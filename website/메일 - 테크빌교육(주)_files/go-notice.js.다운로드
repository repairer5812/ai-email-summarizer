(function(e){function o(e,r){var i=t.options.lang[t.options.locale];e.append(l(n,{label_close:i["\ub2eb\uae30"],label_close_option:i[r.option],close_option:r.option,id:r.id}))}function u(n,s,o){var u=t.options.lang[t.options.locale];if(_.isUndefined(s)||s.length==0)return;n.append(r);var c=n.find("ul.file_wrap");e.each(s,function(){var e=this.downloadUrl==undefined?t.options.ContextRoot+"api/notice/"+o+"/download/"+this.id:this.downloadUrl;c.append(l(i,{downloadUrl:e,fileName:this.name,byteSize:a(this.size),label_download:u["\ub2e4\uc6b4\ub85c\ub4dc"],file_icon:f({extention:this.extention})}))})}function a(e){var t=parseInt(e)||0,n={B:1,K:1024,M:1048576,G:10737e5,T:10995e8},r=0,i="B";return t>n.T?(r=n.T,i="T"+i):t>n.G?(r=n.G,i="G"+i):t>n.M?(r=n.M,i="M"+i):t>n.K?(r=n.K,i="K"+i):(r=n.B,i="Byte"),(t/r).toFixed(1)+i}function f(e){var t=e.extention.toLowerCase(),n=new RegExp("(zip|doc|docx|ppt|pptx|xls|xlsx|hwp|pdf|txt|html|htm|jpg|jpeg|png|gif|tif|tiff|bmp|exe|avi|mp3|mp4|mov|mpg|mpeg|lzh|xml|log|csv|eml)","gi");return"ic_"+(n.test(t)?t:"def")}function l(e,t){return e.replace(/{(\w*)}/g,function(e,n){return t.hasOwnProperty(n)?t[n]:""})}function c(n){if(e.cookie("IsCookieActived"))return;var r=[],i=0;e.each(n,function(n,s){if(s.showWeb==0)return;if(e.cookie(t.options.COOKIE_PREFIX+s.id))return;var o={id:s.id,content:GO.util.escapeXssFromHtml(s.content),modal:!1,title:s.title,width:s.width,height:s.height,showWeb:s.showWeb,showMobile:s.showMobile,option:s.option,endTime:s.endTime,allowPrevPopup:!0,attaches:s.attaches},u=t.makeItem(o).hide();u.on("click",p),r.push(u),i+=s.width+100}),h(r,i),e.cookie("IsCookieActived",!0,{path:"/"})}function h(t,n){var r=null;e.each(t,function(i,s){if(i==0){r=e(t[0]),r.show();return}e(window).width()<n?r=e(s).css({left:parseInt(r.css("left"))+50,top:parseInt(r.css("top"))+50}).show():r=e(s).css({left:parseInt(r.css("left"))+parseInt(r.css("width"))+100}).show()})}function p(){var t=0;e.each(e("div.go_popup "),function(){var n=parseInt(e(this).css("z-index"));n>t&&(t=n)}),t+=1,e(this).css({"z-index":t})}var t=e.goNotice={};t.isFetched=!1,t.notice=[],t.options={ContextRoot:"/",lang:{ko:{"\ub2eb\uae30":"\ub2eb\uae30",day:"\ud558\ub8e8\ub3d9\uc548 \uc774 \ucc3d\uc744 \uc5f4\uc9c0 \uc54a\uc74c",week:"1\uc8fc\uc77c \ub3d9\uc548 \uc774\ucc3d\uc744 \uc5f4\uc9c0 \uc54a\uc74c",none:"\ub354\uc774\uc0c1 \ubcf4\uc9c0 \uc54a\uae30","\ub2e4\uc6b4\ub85c\ub4dc":"\ub2e4\uc6b4\ub85c\ub4dc"},ja:{"\ub2eb\uae30":"\u9589\u3058\u308b",day:"\u4e00\u65e5\u9593\u3053\u306e\u30a6\u30a4\u30f3\u30c9\u30a6\u3092\u8868\u793a\u3057\u306a\u3044",week:"\u4e00\u9031\u9593\u3053\u306e\u30a6\u30a4\u30f3\u30c9\u30a6\u3092\u8868\u793a\u3057\u306a\u3044",none:"\u3053\u308c\u4ee5\u4e0a\u8868\u793a\u3057\u306a\u3044","\ub2e4\uc6b4\ub85c\ub4dc":"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9"},en:{"\ub2eb\uae30":"Close",day:"Do not open this for a day",week:"Do not open this for a week",none:"Do not open for good","\ub2e4\uc6b4\ub85c\ub4dc":"Download"},zh_CN:{"\ub2eb\uae30":"\u5173\u95ed",day:"\u4e00\u5929\u4e0d\u6253\u5f00\u6b64\u7a97\u53e3",week:"\u4e00\u661f\u671f\u4e0d\u6253\u5f00\u6b64\u7a97\u53e3",none:"\u4e0d\u518d\u663e\u793a\u66f4\u591a","\ub2e4\uc6b4\ub85c\ub4dc":"\u4e0b\u8f09"},zh_TW:{"\ub2eb\uae30":"\u95dc\u9589",day:"\u4e00\u5929\u4e0d\u6253\u958b\u6b64\u7a97\u53e3",week:"\u4e00\u661f\u671f\u4e0d\u6253\u958b\u6b64\u7a97\u53e3",none:"\u4e0d\u518d\u986f\u793a\u66f4\u591a","\ub2e4\uc6b4\ub85c\ub4dc":"\u4e0b\u8f7d"},vi:{"\ub2eb\uae30":"\u0110\u00f3ng",day:"Kh\u00f4ng hi\u1ec3n th\u1ecb trang n\u00e0y c\u1ea3 ng\u00e0y h\u00f4m nay",week:"Kh\u00f4ng m\u1edf trang n\u00e0y trong v\u00f2ng 1 tu\u1ea7n",none:"Kh\u00f4ng xem","\ub2e4\uc6b4\ub85c\ub4dc":"T\u1ea3i v\u1ec1"}},sizeType:{"400|600":"notice_type1","520|600":"notice_type2","800|600":"notice_type3"},locale:e('meta[name="locale"]').attr("content")||"ko",COOKIE_PREFIX:"NoticeCookie_"},t.render=function(n){n.contextRoot&&(t.options.ContextRoot=n.contextRoot),this.isFetched?c(this.notice):this.fetch().done(e.proxy(function(){c(this.notice)},this))},t.fetch=function(){var n=t.options.ContextRoot+"api/notice/normal";return e.ajax({type:"GET",dataType:"json",url:n,success:e.proxy(function(e){this.isFetched=!0,this.notice=e.data},this)})},t.makeItem=function(e){return(new s(e)).create()},t.makePreviewItem=function(e){return(new s(e)).preview()};var n=["<footer class='notice_action'>","<div class='layer_action'>","<span class='wrap_option' id='notice_option'>","<input type='checkbox' id='notice_option_checkbox_{id}'><label for='notice_option_checkbox_{id}'>{label_close_option}</label>","</span>","<span class='wrap_btn'><span class='btn_fn6'>{label_close}</span></span>","</div>","</footer>"].join(""),r=["<div class='feed origin'>","<ul class='file_wrap'>","</ul>","</div>"].join(""),i=["<li data-name='' data-id='12' style='left: 10px;'>","<span class='item_file'>","<span class='ic_file {file_icon}'></span>","<span class='name'><a href='{downloadUrl}' data-bypass=''>{fileName}</a></span>","<span class='size'>({byteSize})</span>","<span class='optional'>","<a href='{downloadUrl}' class='btn_fn4' data-bypass=''><span class='txt'>{label_download}</span></a>","</span>","</span>","</li>"].join(""),s=function(n){function s(t){var n=e(t.currentTarget),r=n.parents("div.layer_notice");r.remove(),e("#popOverlay").remove(),e(document).trigger("hideLayer.goLayer")}function a(n){var r={none:f(new Date,l(i.endTime)),day:1,week:7};i.option!="always"&&e.cookie(t.options.COOKIE_PREFIX+i.id,"done",{expires:r[i.option],path:"/"}),s(n)}function f(e,t){return Math.abs(parseInt((e-t)/1e3/60/60/24))+1}function l(e){var e=e.split(/\D/);return new Date(Date.UTC(e[0],--e[1]||"",e[2]||"",e[3]||"",e[4]||"",e[5]||"",e[6]||""))}function c(){var r='<div class="wrap_notice"><div class="editor_view">'+i.content+"</div></div>",s=e.goPopup({header:_.escape(i.title),title:"",pclass:"layer_notice "+t.options.sizeType[i.size],modal:i.modal,contents:r,allowPrevPopup:i.allowPrevPopup});return e.trim(i.title).length==0&&s.find("header:first").remove(),setTimeout(function(){e(window).off("resize.gopop")},100),u(s,i.attaches,n.id),o(s,i),s.css({width:"",left:"",top:"","margin-top":"","margin-left":"","z-index":""}),s.find("header").css({cursor:"move"}),i.option=="always"&&s.find("#notice_option").remove(),s}var r={title:"",content:"",modal:!1,header:"",size:"400|600",option:"none",showWeb:!0,showMobile:!0,allowPrevPopup:!1};n.size=n.width+"|"+n.height;var i=e.extend({},r,n);return i.content=i.content.replace(/<a /gi,"<a target='_blank' data-bypass "),{create:function(){var e=c();return e.find("a.btn_layer_x").addClass("btn_layer_bigx").removeClass("btn_layer_x"),e.find("span.btn_fn6").on("click",s),e.find("#notice_option").on("click",a),e},preview:function(){var e=c();return e.find("a.btn_layer_x").addClass("btn_layer_bigx").removeClass("btn_layer_x"),e.find("span.btn_fn6").on("click",s),e.find("#notice_option").on("click",s),e}}};return t})(jQuery);