define("mail/views/home",function(require){var e=require("backbone"),t=require("models/session");require("jquery.go-preloader");var n=e.View.extend({initialize:function(){(new t(null,{instanceType:GO.instanceType})).fetch({async:!1,error:function(){window.location.href="/app/mail"}})},render:function(){function s(e){var t=Array.prototype.slice.call(arguments,1);if(!r){var n=++i;setTimeout(function(){n==i&&!r&&(r++,e.apply(undefined,t),r--)},200)}}function o(e){var t=$(window).height(),n=t,r=0;$(".go_body").css("min-height","inherit"),$("body").hasClass("go_skin_advanced")||(r=50,$(".go_body").height(n-r));var i=4;e.height(n-i-r);var s=e.contents().find("#mailHeaderWrap").outerHeight(),o=e.contents().find("#write_toolbar_wrap").outerHeight(),u=n-i-r-s-o;e.contents().find("#mailWriteArea").css({"overflow-y":"auto",height:u-10+"px"}),e.contents().find("#mailSettingContent").css({"overflow-y":"auto",height:n-175+"px"});return}var e="/app/mail/home",t=GO.util.getQueryParam();_.isEmpty(t)||(e+="?"+GO.util.jsonToQueryString(t));var n=$("<iframe id='mail-viewer' scrolling='no' width='100%' marginHeight='0' marginWidth='0' frameBorder='0' src='"+e+"'></iframe>");this.$el.html(n),o(n),$(window).resize(function(){s(o,n)});var r=0,i=0;return n}});return n});