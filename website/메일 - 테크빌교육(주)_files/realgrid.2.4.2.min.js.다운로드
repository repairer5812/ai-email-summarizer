/** 
 * RealGrid v2.4.2.1365
 * Copyright (C) 2013-2021 WooriTech Inc.
 * All Rights Reserved.
 */

var RealGrid=function(){function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return e(t={exports:{}},t.exports),t.exports}function u(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(r=s.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function f(e){return this instanceof f?(this.v=e,this):new f(e)}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r=n(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.defineProp=function(e,t,n){n.enumerable=!0,n.configurable=!0,Object.defineProperty(e.prototype,t,n)},e._dp=n.defineProp});t(r),r.defineProp;var i=n(function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.LicenseType||(t.LicenseType={})).Developer="developer",n.Evaluation="evaluation",n.Limited="limited",n.Enterprise="enterprise",t.globalRealGridInfo={name:"RealGrid",version:"2.4.2.1365",license:"enterprise",code:null},t.licenseNo=""});t(i),i.LicenseType,i.globalRealGridInfo,i.licenseNo;var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},l=Object.freeze({__proto__:null,__extends:function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},get __assign(){return o},__rest:function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},__decorate:function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;0<=u;u--)(i=e[u])&&(o=(s<3?i(o):3<s?i(t,n,o):i(t,n))||o);return 3<s&&o&&Object.defineProperty(t,n,o),o},__param:function(e,t){return function(n,r){t(n,r,e)}},__metadata:function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter:function(e,t,n,r){return new(n=n||Promise)(function(i,s){function o(e){try{a(r.next(e))}catch(e){s(e)}}function u(e){try{a(r.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,u)}a((r=r.apply(e,t||[])).next())})},__generator:function(e,t){function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,(o=i?[2&o[0],i.value]:o)[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}var n,r,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o={next:u(0),"throw":u(1),"return":u(2)};return"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},__exportStar:function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},__values:u,__read:a,__spread:function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e},__spreadArrays:function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],o=0,u=s.length;o<u;o++,i++)r[i]=s[o];return r},__await:f,__asyncGenerator:function(e,t,n){function o(e){r[e]&&(s[e]=function(t){return new Promise(function(n,r){1<i.push([e,t,n,r])||u(e,t)})})}function u(e,t){try{(n=r[e](t)).value instanceof f?Promise.resolve(n.value.v).then(a,l):c(i[0][2],n)}catch(e){c(i[0][3],e)}var n}function a(e){u("next",e)}function l(e){u("throw",e)}function c(e,t){e(t),i.shift(),i.length&&u(i[0][0],i[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i=[],s={};return o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s},__asyncDelegator:function(e){function r(r,i){n[r]=e[r]?function(n){return(t=!t)?{value:f(e[r](n)),done:"return"===r}:i?i(n):n}:i}var t,n={};return r("next"),r("throw",function(e){throw e}),r("return"),n[Symbol.iterator]=function(){return this},n},__asyncValues:function(e){function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){var s,o;t=e[n](t),s=r,r=i,o=t.done,i=t.value,Promise.resolve(i).then(function(e){s({value:e,done:o})},r)})}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=u(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t)},__makeTemplateObject:function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__importStar:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},__importDefault:function(e){return e&&e.__esModule?e:{"default":e}},__classPrivateFieldGet:function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},__classPrivateFieldSet:function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}}),c=n(function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.T_HASH="$_hash",t.T_VIEW="$_view",t.T_ROW="$_row",t.T_FIX="$_fix",t.T_HEI="$_hei",t.T_IDX="$_idx",t.T_FOC="$_foc",t.T_LEV="$_lev",(r=t.ValueType||(t.ValueType={})).TEXT="text",r.NUMBER="number",r.BOOLEAN="boolean",r.DATETIME="datetime",r.OBJECT="object",r.CHAR="char",r.UNUM="unum",r.INT="int",r.UINT="uint",r.DATE="date",(r=t.SortDirection||(t.SortDirection={})).ASCENDING="ascending",r.DESCENDING="descending",r.NONE="none",(r=t.SortCase||(t.SortCase={})).SENSITIVE="sensitive",r.INSENSITIVE="insensitive",(r=t.PagingSource||(t.PagingSource={})).ROWS="rows",r.ITEMS="items",(r=t.SortMode||(t.SortMode={})).AUTO="auto",r.EXPLICIT="explicit",(r=t.FilterMode||(t.FilterMode={})).AUTO="auto",r.EXPLICIT="explicit",(r=n=t.RowGroupAdornments||(t.RowGroupAdornments={})).NONE="none",r.HEADER="header",r.FOOTER="footer",r.SUMMARY="summary",r.BOTH="both",t.isHeaderAdornment=function(e){return e==n.BOTH||e==n.HEADER},t.isFooterAdornment=function(e){return e==n.BOTH||e==n.FOOTER},t.isFooterOnlyAdornment=function(e){return e==n.FOOTER||e==n.SUMMARY},(r=t.ValidationMode||(t.ValidationMode={})).ALWAYS="always",r.UPDATE="update",r.INSERT="insert",(r=t.ValidationLevel||(t.ValidationLevel={})).ERROR="error",r.WARNING="warning",r.INFO="info",r.IGNORE="ignore";var r,i={error:1,warning:2,info:3,ignore:4};t.ValidationLevel_compare=function(e,t){return i[e]-i[t]},(r=t.SummaryMode||(t.SummaryMode={})).NONE="none",r.AGGREGATE="aggregate",r.STATISTICAL="statistical",(r=t.ColumnHeaderItemLocation||(t.ColumnHeaderItemLocation={})).NONE="none",r.LEFT_EDGE="leftEdge",r.RIGHT_EDGE="rightEdge",r.TOP_EDGE="topEdge",r.BOTTOM_EDGE="bottomEdge",r.LEFT="left",r.RIGHT="right",r.TOP="top",r.BOTTOM="bottom",r.CENTER="center",(r=t.BlankState||(t.BlankState={})).NONE="none",r.HEAD="head",r.BODY="body",r.TAIL="tail",(r=t.GridFitStyle||(t.GridFitStyle={})).NONE="none",r.EVEN="even",r.EVEN_FILL="evenFill",r.FILL="fill",(r=t.RowMaskType||(t.RowMaskType={})).NONE="none",r.ROW="row",r.DATA="data",r.FILL="fill",r.CELL="cell",(r=t.TextInputCase||(t.TextInputCase={})).NORMAL="normal",r.UPPER="upper",r.LOWER="lower",r.DEFAULT="default",(r=t.Alignment||(t.Alignment={})).NEAR="near",r.CENTER="center",r.FAR="far",(r=t.DefaultShowDate||(t.DefaultShowDate={})).NORMAL="normal",r.TODAY="today",r.TODAY_WHEN_NULL="todayWhenNull",r.DEFAULT="default",r.DEFAULT_WHEN_NULL="defaultWhenNull",(r=t.SortStyle||(t.SortStyle={})).NONE="none",r.EXCLUSIVE="exclusive",r.INCLUSIVE="inclusive",r.REVERSE="reverse",(r=t.MenuItemType||(t.MenuItemType={})).NORMAL="normal",r.CHECK="check",r.RADIO="radio",r.SEPARATOR="separator",(r=t.HandleVisibility||(t.HandleVisibility={})).VISIBLE="visible",r.HOVERED="hovered",r.ALWAYS="always",r.HIDDEN="hidden",(r=t.CellButton||(t.CellButton={})).NONE="none",r.ACTION="action",r.POPUP="popup",(r=t.ButtonVisibility||(t.ButtonVisibility={})).ALWAYS="always",r.DEFAULT="default",r.VISIBLE="visible",r.HIDDEN="hidden",r.ROWFOCUSED="rowfocused",(r=t.IconLocation||(t.IconLocation={})).LEFT="left",r.RIGHT="right",r.LEFT_EDGE="leftEdge",r.RIGHT_EDGE="rightEdge",r.TOP="top",r.BOTTOM="bottom",r.TOP_EDGE="topEdge",r.BOTTOM_EDGE="bottomEdge",r.CENTER="center",(r=t.RefreshMode||(t.RefreshMode={})).ALL="all",r.VISIBLE_ONLY="visibleOnly",(r=t.ScrollOnEditing||(t.ScrollOnEditing={})).CANCEL="cancel",r.COMMIT="commit",r.DEFAULT="default",(r=t.ItemType||(t.ItemType={})).ROW="row",r.GROUP="group",r.FOOTER="footer",r.TREE="tree",(r=t.SummaryType||(t.SummaryType={})).COUNT="count",r.SUM="sum",r.MAX="max",r.MIN="min",r.AVG="avg",r.VAR="var",r.VARP="varp",r.STDEV="stdev",r.STDEVP="stdevp",r.DATACOUNT="datacount",r.DATAAVG="dataavg",(r=t.ExpanderVisibility||(t.ExpanderVisibility={})).ALWAYS="always",r.DEFAULT="default",r.NONE="none",(t=t.ExitGridWhenTab||(t.ExitGridWhenTab={})).ROW="row",t.GRID="grid",t.NONE="none"});t(c),c.T_HASH,c.T_VIEW,c.T_ROW,c.T_FIX,c.T_HEI,c.T_IDX,c.T_FOC,c.T_LEV,c.ValueType,c.SortDirection,c.SortCase,c.PagingSource,c.SortMode,c.FilterMode,c.RowGroupAdornments,c.isHeaderAdornment,c.isFooterAdornment,c.isFooterOnlyAdornment,c.ValidationMode,c.ValidationLevel,c.ValidationLevel_compare,c.SummaryMode,c.ColumnHeaderItemLocation,c.BlankState,c.GridFitStyle,c.RowMaskType,c.TextInputCase,c.Alignment,c.DefaultShowDate,c.SortStyle,c.MenuItemType,c.HandleVisibility,c.CellButton,c.ButtonVisibility,c.IconLocation,c.RefreshMode,c.ScrollOnEditing,c.ItemType,c.SummaryType,c.ExpanderVisibility,c.ExitGridWhenTab;var h=n(function(e,t){function r(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=e=void 0===e?0:e,this.y=t,this.width=n,this.height=r}Object.defineProperty(t,"__esModule",{value:!0});var n=(_dp(r,"left",{get:function(){return this.x},set:function(e){e-=this.x,this.x+=e,this.width-=e}}),_dp(r,"right",{get:function(){return this.x+this.width},set:function(e){e-=this.x+this.width,this.width+=e}}),_dp(r,"top",{get:function(){return this.y},set:function(e){e-=this.y,this.y+=e,this.height-=e}}),_dp(r,"bottom",{get:function(){return this.y+this.height},set:function(e){e-=this.y+this.height,this.height+=e}}),_dp(r,"isEmpty",{get:function(){return 0===this.width||0===this.height}}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.getInner=function(){return new r(0,0,this.width,this.height)},r.prototype.equals=function(e){return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height},r.prototype.leftBy=function(e){return this.x+=e,this.width-=e,this},r.prototype.rightBy=function(e){return this.width+=e,this},r.prototype.topBy=function(e){return this.y+=e,this.height-=e,this},r.prototype.bottomBy=function(e){return this.height+=e,this},r.prototype.shrink=function(e,t){return this.width-=e,this.height-=t,this},r.prototype.expand=function(e,t){return this.width+=e,this.height+=t,this},r.prototype.contains=function(e,t){return e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height},r.prototype.setEmpty=function(){return this.width=this.height=0,this},r.prototype.move=function(e,t){return void 0===t&&(t=0),this.x=e=void 0===e?0:e,this.y=t,this},r.prototype.set=function(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this},r.prototype.setWidth=function(e){return this.width=e,this},r.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},r.prototype.copyHorz=function(e){return this.x=e.x,this.width=e.width,this},r.prototype.copyVert=function(e){return this.y=e.y,this.height=e.height,this},r.prototype.inflate=function(e,t,n,r){return void 0===e&&(e=0),t=void 0!==(t=void 0===t?void 0:t)?t:e,n=void 0!==(n=void 0===n?void 0:n)?n:e,r=void 0!==(r=void 0===r?void 0:r)?r:t,e&&(this.left=this.x-e),t&&(this.top=this.y-t),n&&(this.right=this.right+n),r&&(this.bottom=this.bottom+r),this},r.prototype.offset=function(e,t){return this.x+=e,this.y+=t,this},r.prototype.round=function(){var e=this.clone();return e.x>>>=0,e.y>>>=0,e.width>>>=0,e.height>>>=0,e},r.prototype.union=function(e){var t=this.clone();return t.left=Math.min(this.x,e.x),t.right=Math.max(this.right,e.right),t.top=Math.min(this.y,e.y),t.bottom=Math.max(this.bottom,e.bottom),t},r.prototype.normalize=function(){return this.width<0&&(this.x-=this.width,this.width*=-1),this.height<0&&(this.y-=this.height,this.height*=-1),this},r.prototype.toString=function(){return"{x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+"}"},r.Temp=new r,r);t.Rectangle=n});t(h),h.Rectangle;var p=n(function(e,t){function E(e){return e.defaultView||e.parentWindow}function S(){}Object.defineProperty(t,"__esModule",{value:!0});var n=navigator.userAgent,r=0<=navigator.platform.toUpperCase().indexOf("MAC"),i=!!window.opera||0<=n.indexOf(" OPR/"),s=!!window.whale,o=!!window.chrome&&!i,u=void 0!==window.InstallTrigger,a=0<Object.prototype.toString.call(HTMLElement).indexOf("Constructor")||!o&&!i&&0<=n.indexOf("Safari"),f=a&&("Win32"==navigator.platform||0<=n.indexOf("Windows")),l=0<=n.toLowerCase().indexOf("edge/"),c=/iPad|iPhone|iPod/.test(n)&&!window.MSStream,p=0<=n.toLowerCase().indexOf("edg/")&&0<=n.toLowerCase().indexOf("chrome/"),d=function(){for(var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",n[0];);return 4<e?e:void 0}(),v=void 0!==d&&d<=9,m=void 0!==d&&d<=8,g=!!n.match(/Trident.*rv\:11\./),d=-1!==navigator.appVersion.indexOf("MSIE 10"),n=-1!==navigator.appVersion.indexOf("MSIE 9"),g=g||d||n,y=(new Date).getTime(),b=void 0,w=void 0;t.getWin=function(e){return e&&e.ownerDocument&&(e.ownerDocument.defaultView||e.ownerDocument.parentWindow)},t.getDoc=function(e){return e&&e.ownerDocument},t.getDocWin=E,S.stopEvent=function(e,t){void 0===t&&(t=!1),e.preventDefault?(e.preventDefault(),e.stopPropagation()):e.returnValue=!1,t&&e.stopImmediatePropagation()},S.setDebugging=function(e,t,n){S.$$_trace=e,S.$$_debugging=t,S.$$_keyLog=n},S.isDebugging=function(){return S.$$_debugging},S.isTrace=function(){return this.$$_trace},S.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];S.isDebugging()&&console.log(e,t)},S.keyLog=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];S.$$_keyLog&&console.log(e,t)},S.trace=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];S.isTrace()&&console.log(e,t)},S.isArray=function(e){return Array.isArray(e)},S.isObject=function(e){return null!=e&&"object"==typeof e},S.makeArray=function(e,t){return void 0===t&&(t=!1),null!=e?S.isArray(e)?e:[e]:t?[]:void 0},S.isNumber=function(e){return"number"==typeof e},S.getTimer=function(){return(new Date).getTime()-y},S.isWhiteSpace=function(e){return!e||!e.trim()},S.pad=function(e,t,n){return t=Math.max(t||2,1),n=n||"0",(new Array(t-String(e).length+1)).join(n)+e},S.pick=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n,r=e.length,i=0;i<r;i++)if(null!=(n=e[i]))return n},S.included=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t.length,i=0;i<r;i++)if(t[i]==e)return!0;return!1},S.compareTextValue=function(e,t,n,r){return e===t?!0:(e=String(e),t=null==t?void 0:String(t),!e&&!t||!!e&&!!t&&(n||(e=e.toLowerCase(),t=t.toLowerCase()),r?0<=t.indexOf(e):e==t))},S.cast=function(e,t){return e instanceof t?e:null},S.alert=function(e){window.alert(e)},S.toInt=function(e,t){return t=parseInt(e,t||10),isNaN(t)?0:t},S.toFloat=function(e){return e=parseFloat(e),isNaN(e)?0:e},S.hex=function(e,t,n){return void 0===t&&(t=2),void 0===n&&(n="0"),t=Math.max(t||2,1),e=e.toString(16),n=n||"0",(new Array(t-e.length+1)).join(n)+e},S.deepCopy=function(e){if(null==e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e);for(var t=S.isArray(e)?[]:{},n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];e.hasOwnProperty(i)&&(t[i]=S.deepCopy(e[i]))}return t},S.extendObj=function(e,t){if(null==e||"object"!=typeof e||null==t||"object"!=typeof t)return t;for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];e.hasOwnProperty(i)&&void 0===t[i]&&(t[i]=e[i])}},S.getBounds=function(e){var t=new h.Rectangle;return t.x=e.offsetLeft,t.y=e.offsetTop,t.width=e.offsetWidth,t.height=e.offsetHeight,t},S.toStr=function(e){return"number"==typeof e?isNaN(e)?"":String(e):null!=e?String(e):""},S.setBounds=function(e,t,n,r,i){e=e.style,e.left=t+"px",e.top=n+"px",e.width=r+"px",e.height=i+"px"},S.getClientRect=function(e){var t=e.getBoundingClientRect();return t.cx=e.offsetLeft,t.cy=e.offsetTop,t},S.getChildIndex=function(e){if(e){var t=e.parentNode;if(t)for(var n=t.children,r=n.length;r--;)if(n[r]===e)return r}return-1},S.clearChildren=function(e){for(var t;t=e.lastChild;)e.removeChild(t)},S.clearElements=function(e){for(var t;t=e.lastChild;)S.clearElements(t),e.removeChild(t)},S.addChild=function(e,t){return!!e&&!!t&&t.parentNode!==e&&(e.appendChild(t),!0)},S.removeChild=function(e,t){return!!e&&!!t&&t.parentNode===e&&(e.removeChild(t),!0)},S.disableSelection=function(e){e=e.style,e["-moz-user-select"]="-moz-none",e["-khtml-user-select"]="none",e["-webkit-user-select"]="none",e["-o-user-select"]="none",e["-ms-user-select"]="none",e["user-select"]="none"},S.setMobile=function(e){b=e},S.isMobile=function(){return void 0!==b?b:w=void 0===w?this.$_checkMobile():w},S.$_checkMobile=function(){var e=!1,t=navigator.userAgent;return e=(e=t.match(/Android/i)||t.match(/webOS/i)||t.match(/iPhone/i)||t.match(/iPad/i)||t.match(/iPod/i)||t.match(/BlackBerry/i)||t.match(/Windows Phone/i)?!0:e)||"ontouchstart"in window&&0<=t.indexOf("Macintosh")},S.getBrowserSize=function(e){var t=e?e.ownerDocument:document,e=t.defaultView;return{width:e.innerWidth||t.documentElement.clientWidth||t.body.clientWidth,height:e.innerHeight||t.documentElement.clientHeight||t.body.clientHeight}},S.move=function(e,t,n){e.style.left=t+"px",e.style.top=n+"px"},S.htmlEncode=function(e){return document.createElement("a").appendChild(document.createTextNode(e)).parentNode.innerHTML},S.detach=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},S.getSize=function(e){return e=e.getBoundingClientRect(),{width:e.width,height:e.height}},S.getScrolled=function(e){var t=e.body,n=E(e),e=e.documentElement;return{sx:n.pageXOffset||e.scrollLeft||t.scrollLeft,sy:n.pageYOffset||e.scrollTop||t.scrollTop}},S.getOffset=function(e){var t=e.ownerDocument,n=t.defaultView,r=e.getBoundingClientRect(),i=t.body,s=t.documentElement,e=n.pageYOffset||s.scrollTop||i.scrollTop,t=n.pageXOffset||s.scrollLeft||i.scrollLeft,n=s.clientTop||i.clientTop||0,i=s.clientLeft||i.clientLeft||0,i=r.left+t-i,n=r.top+e-n;return{x:Math.round(i),y:Math.round(n)}},S.isAncestorOf=function(e,t){for(var n=t.parentElement;n;){if(n==e)return!0;n=n.parentElement}return!1},S.equalNumbers=function(e,t){return isNaN(e)&&isNaN(t)||!isNaN(e)&&e==t},S.equalArrays=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;var n=e.length;if(n!=t.length)return!1;for(var r=0;r<n;++r)if(e[r]!==t[r])return!1;return!0},S.isLeapYear=function(e){return e%4==0&&e%100!=0||e%400==0},S.incMonth=function(e,t){var n=e.getDate();return e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(n,S.month_days[S.isLeapYear(e.getFullYear())?1:0][e.getMonth()])),e},S.minDate=function(e,t){return null!==e||null===t&&e.getTime()<t.getTime()?e:t},S.maxDate=function(e,t){return null===e&&(null!==t||e.getTime()>t.getTime())?e:t},S.setClassName=function(e,t){(t=t||"")!=e.className&&(e.className=t)},S.addClassName=function(e,t){var n;t=t||"",e.classList?e.classList.add(t):((n=e.className.split(" ")).indexOf(t)<0&&n.push(t),e.className=n.join(" "))},S.removeClassName=function(e,t){var n,r;e.classList?e.classList.remove(t):(n=void 0,0<=(n=(r=e.className.split(" ")).indexOf(t))&&r.splice(n,1),e.className=r.join(" "))},S.setStyle=function(e,t){var n,r=t.style;for(n in e)null!=e[n]?r[n]=e[n]:(r.removeProperty?r.removeProperty(n):r.removeAttribute&&r.removeAttribute(n),r[n]="")},S.getBoundingClientRect2=function(e){return e=e.getBoundingClientRect(),{left:e.left,right:e.right,width:e.right-e.left,top:e.top,bottom:e.bottom,height:e.bottom-e.top}},S.getTextLength=function(e){for(var t=0,n=0,r=0;e&&(r=e.charCodeAt(n++));t+=r>>7?2:1);return t},S.setTextProp=function(e){e.textProp=this.ieAll?"textContent":"innerText"},S.isEmpty=function(e){if(e)for(var t in e)return!1;return!0},S.isPassive=function(){if(null===S.$_supportPassive){S.$_supportPassive=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){S.$_supportPassive=!0}}))}catch(e){}}return S.$_supportPassive},S.hangulToChosungAll=function(e){for(var t=["\u3131","\u3132","\u3134","\u3137","\u3138","\u3139","\u3141","\u3142","\u3143","\u3145","\u3146","\u3147","\u3148","\u3149","\u314a","\u314b","\u314c","\u314d","\u314e"],n="",r=0;r<e.length;r++){var i=e.charCodeAt(r)-44032;n+=-1<i&&i<11172?t[Math.floor(i/588)]:e[r]}return n},S.hangulToChosung=function(e){var t,n,r={cho:e,org:e};return/[\u3131-\ud79d]/.test(e)&&(n=["\u3131","\u3132","\u3134","\u3137","\u3138","\u3139","\u3141","\u3142","\u3143","\u3145","\u3146","\u3147","\u3148","\u3149","\u314a","\u314b","\u314c","\u314d","\u314e"],t=e.charCodeAt(0)-44032,r.cho=n[((t-(n=t%28))/28-(n=(t-n)/28%21))/21]||e,r.org=["\u314f","\u3150","\u3151","\u3152","\u3153","\u3154","\u3155","\u3156","\u3157","\u3158","\u3159","\u315a","\u315b","\u315c","\u315d","\u315e","\u315f","\u3160","\u3161","\u3162","\u3163"][n]?e:void 0),r},S.addQuot=function(e,t){return e=e&&(0<=e.indexOf("\n")||0<=e.indexOf("\r\n")||'"'==e.charAt(0))?'"'+(e=e.replace(/\"/g,'""'))+'"':e},S.isIE=g,S.isEdge=l,S.ieAll=g||l,S.ieOld=v,S.isMac=r,S.isSafari=a,S.isWinSafari=f,S.isChrome=o,S.isFirefox=u,S.isOpera=i,S.ieLeg=m,S.ieTen=d,S.ieNine=n,S.isiOS=c,S.isChromium=o||p||s||i,S.TextProp=S.ieAll?"innerText":"textContent",S.week_days=window.RG_CONST&&window.RG_CONST.WEEKDAYS?window.RG_CONST.WEEKDAYS:["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"],S.month_days=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]],S.colonreg=/;(?=(?:[^"]*"[^"]*")*(?![^"]*"))/,S.$_INVISIBLE_EDIT_BOUNDS=new h.Rectangle(-1e4,-1e4,100,100),S.$$_debugging=!1,S.$$_keyLog=!1,S.$$_trace=null,S.$_supportPassive=null,i=S,t.Utils=i});t(p),p.getWin,p.getDoc,p.getDocWin,p.Utils;var d=n(function(e,t){var n,r;Object.defineProperty(t,"__esModule",{value:!0}),(r=n=t.RowState||(t.RowState={})).NONE="none",r.CREATED="created",r.UPDATED="updated",r.DELETED="deleted",r.CREATE_AND_DELETED="createAndDeleted",t.isDeletedState=function(e){return e==n.DELETED||e==n.CREATE_AND_DELETED}});t(d),d.RowState,d.isDeletedState;var v=n(function(e,t){function r(e){this.format=e}Object.defineProperty(t,"__esModule",{value:!0});var n=(_dp(r,"format",{get:function(){return this._format},set:function(e){e!=this._format&&(this._format=e,this.parse(e))}}),r.prototype.toBool=function(e){return!!this.toBoolStrict(e)},r.prototype.toBoolEx=function(e){var t=this._sensitive?e:e.toLowerCase(),e=this.$_toBool(e);return null!=e?e:t?Boolean(t):void 0},r.prototype.toBoolStrict=function(e){return this.$_toBool(e)},r.prototype.toText=function(e){return e?this._trueText:this._falseText},r.prototype.$_toBool=function(e){if(this._values){e=this._sensitive?e:e.toLowerCase();if(e in this._values)return this._values[e]}},r.prototype.parse=function(e){var t,n,r=this;this._values={},e?(this._trueText=this._falseText=null,t="0"!=(n=e.split(/[;\:]/))[2],e=n[0]?(t?n[0]:n[0].toLowerCase()).split(","):null,n=n[1]?(t?n[1]:n[1].toLowerCase()).split(","):null,e&&e.forEach(function(e){r._values[e]=!1,r._falseText=r._falseText||e}),n&&n.forEach(function(e){r._values[e]=!0,r._trueText=r._trueText||e})):(this._values[this._trueText="true"]=!0,this._values[this._falseText="false"]=!1)},r.Default=new r("false,f,0:true,t,1:0"),r);t.BooleanConverter=n});t(v),v.BooleanConverter;var m=n(function(e,t){function r(e){this._format=null,this._baseYear=2e3,this._patterns=[],this._amText="AM",this._pmText="PM",e&&(this.format=e)}Object.defineProperty(t,"__esModule",{value:!0});var n=(_dp(r,"format",{get:function(){return this._format},set:function(e){if(e!=this._format){if(!e)throw new Error("Invalid empty date format");this._format=e,this.parseFormat(e)}}}),_dp(r,"baseYear",{get:function(){return this._baseYear},set:function(e){e!=this._baseYear&&(this._baseYear=e)}}),_dp(r,"amText",{get:function(){return this._amText},set:function(e){e!=this._amText&&(this._amText=e)}}),_dp(r,"pmText",{get:function(){return this._pmText},set:function(e){e!=this._pmText&&(this._pmText=e)}}),r.prototype.parse=function(e){try{for(var t=0,n=1,i=1,s=0,o=0,u=0,a=0,f=0,l=0,c=this._patterns.length,h=0,p=e.length,d=0;d<c&&h<p;d++){var v=this._patterns[d],m=v.c,g=v.len;switch(m){case"y":t=parseInt(e.substr(h,g));break;case"M":n=parseInt(e.substr(h,g));break;case"d":i=parseInt(e.substr(h,g));break;case"a":if(this._amText&&e.indexOf(this._amText,h)==h)f=12,g=this._amText.length;else{if(!this._pmText||e.indexOf(this._pmText,h)!=h)return null;l=12,g=this._pmText.length}break;case"H":case"h":s=parseInt(e.substr(h,g));break;case"m":o=parseInt(e.substr(h,g));break;case"s":u=parseInt(e.substr(h,g));break;case"S":a=parseInt(e.substr(h,g));break;case".":case"/":case"-":case":":case" ":if(r.DATE_SEPARATORS.indexOf(e.charAt(h))<0)return null;break;default:return null}h+=g}return t<100&&(t+=this._baseYear),0<f?12==s&&(s=0):0<l&&s<12&&(s+=12),new Date(t,n-1,i,s,o,u,a)}catch(e){return null}},r.prototype.parseFormat=function(e){var t,n,r,i=e,s=i.length,o=0;for(this._patterns=[];o<s;)if(n=i.charAt(t=o),p.Utils.isWhiteSpace(n)){for(o++;o<s&&p.Utils.isWhiteSpace(i.charAt(o));)o++;this._patterns.push({c:" ",p:t,len:o-t})}else{switch(r=0,n){case"y":4!=(r=this.getPattern(i,o,n))&&2!=r&&this.throwInvalidFormat(i);break;case"M":case"d":case"H":case"h":case"m":case"s":2!=(r=this.getPattern(i,o,n))&&this.throwInvalidFormat(i);break;case"S":3!=(r=this.getPattern(i,o,n))&&this.throwInvalidFormat(i);break;case"a":case".":case"/":case"-":case":":1!=(r=this.getPattern(i,o,n))&&this.throwInvalidFormat(i);break;default:this.throwInvalidFormat(i)}0<r&&(this._patterns.push({c:n,p:o,len:r}),o+=r)}},r.prototype.throwInvalidFormat=function(e){throw new Error("Invalid date format: "+e)},r.prototype.throwInvalidValue=function(e){throw new Error("Invalid date format: "+e)},r.prototype.getPattern=function(e,t,n){for(var r=1;++t<e.length&&e.charAt(t)==n;)r++;return r},r.DATE_SEPARATORS="./-: ",r);t.DateTimeParser=n});t(m),m.DateTimeParser;var g=n(function(e,t){function r(e){this._format="",this._type=0,this._parser=new m.DateTimeParser(null),this.format=e}Object.defineProperty(t,"__esModule",{value:!0});var n=(r.initialize=function(){r.Default.amText="AM",r.Default.pmText="PM",r.Default.baseYear=2e3},_dp(r,"format",{get:function(){return this._format},set:function(e){e!=this._format&&(this._format=e,this.parse(e))}}),_dp(r,"amText",{get:function(){return this._parser.amText},set:function(e){this._parser.amText=e}}),_dp(r,"pmText",{get:function(){return this._parser.pmText},set:function(e){this._parser.pmText=e}}),_dp(r,"baseYear",{get:function(){return this._parser.baseYear},set:function(e){this._parser.baseYear=e}}),r.prototype.toDate=function(e){if(!e)return null;var t=null;switch(this._type){case 0:t=this._parser.parse(e);break;case 2:var n=parseInt(e),t=new Date(n);break;case 1:case 3:default:t=new Date(e)}return t&&!isNaN(t.getTime())?t:null},r.prototype.parse=function(e){var t;e&&(t=e.toLowerCase(),this._type=Math.max(0,r.Formats.indexOf(t)),0==this._type&&(this._parser.format=e))},r.Formats=["custom","iso","timestamp","platform"],r.Default=new r("yyyy/MM/dd HH:mm:ss"),r);(t.DateTimeReader=n).initialize()});t(g),g.DateTimeReader;var y=n(function(e,t){function i(e){this.$_disposed=!1,e||(this.$_hash=n++)}Object.defineProperty(t,"__esModule",{value:!0});var n=0,r=(i.prototype.dispose=function(){return this.$_disposed||this.$_disposing||(this.$_disposed=!0,this.$_disposing=!0,this._doDispose()),null},i.prototype._doDispose=function(){},_dp(i,"disposing",{get:function(){return this.$_disposing}}),i.prototype.isMe=function(e){return e==this.$_hash},i.prototype.$_getters=function(e){for(var t=[],n=Object.getOwnPropertyNames(e),r=0,i=n.length;r<i;r++){var s=n[r],o=Object.getOwnPropertyDescriptor(e,s);o&&o.get&&t.push(s)}return t},i.prototype.doAssignSimple=function(e){return!1},i.prototype.assignFrom=function(e){var t=Object.getPrototypeOf(this);if(e instanceof i)for(var n=Object.getPrototypeOf(e),r={};n&&n.constructor!=i;){for(var s=this.$_getters(n),o=0,u=s.length;o<u;o++)if(!((h=s[o])in r)){r[h]=null;var a=Object.getOwnPropertyDescriptor(t,h);if(a)a.set&&(l=Object.getOwnPropertyDescriptor(n,h).get)&&a.set.call(this,l.call(e));else for(var f=Object.getPrototypeOf(t);f;){var l,c=Object.getOwnPropertyDescriptor(f,h);f=c?(c.set&&(l=Object.getOwnPropertyDescriptor(n,h).get)&&c.set.call(this,l.call(e)),null):Object.getPrototypeOf(f)}}n=Object.getPrototypeOf(n)}else if(!this.doAssignSimple(e))for(var h in e)if(a=Object.getOwnPropertyDescriptor(t,h))a.set&&a.set.call(this,e[h]);else for(f=Object.getPrototypeOf(t);f;){var p=Object.getOwnPropertyDescriptor(f,h);f=p?(p.set&&p.set.call(this,e[h]),null):Object.getPrototypeOf(f)}},i.prototype.extend=function(e){for(var t in e)this.hasOwnProperty(t)&&(this[t]=e[t])},i.prototype.toProxy=function(e){void 0===e&&(e=!0);for(var t={},n=Object.getPrototypeOf(this);n&&n.constructor!=i;){for(var r=this.$_getters(n),s=0,o=r.length;s<o;s++){var u=r[s],a=Object.getOwnPropertyDescriptor(n,u);if(a)a.get&&a.set&&(l=a.get.call(this),!e&&void 0===l||(t[u]=l));else for(var f=Object.getPrototypeOf(n);f;)var l,c=Object.getOwnPropertyDescriptor(f,u),f=c?(c.get&&c.set&&(l=c.get.call(this),!e&&void 0===l||(t[u]=c.get.call(this))),null):Object.getPrototypeOf(f)}n=Object.getPrototypeOf(n)}return t},i);t.Base=r});t(y),y.Base;var b=n(function(e,t){function i(e,t){var r=n.call(this,e)||this;return r.message=e,r.tokenPos=t,r}function u(e){var t=s.call(this,e)||this;return t.message=e,t}function m(){this.IS_IDENT=[],this.IS_INTEGER=[],this.IS_NUMBER=[],this.IS_WHITE=[],this.IS_END=[],this.QUOTATION='"'.charCodeAt(0),this.SQUOTATION="'".charCodeAt(0),this.BACKSLASH="\\".charCodeAt(0),this.Keywords={str:20,num:21,bool:23,not:13,len:24,and:11,"in":12,mod:15,or:18,div:14,shl:16,shr:17,xor:19,is:26,like:46,ilike:48,match:50,imatch:52,defined:35,"null":34,empty:36,nan:37,datestr:90,year:91,month:92,day:93,hour:94,rounddown:95},this._procs=null,this._source=null,this._len=0,this._tokenId=0,this._run=0,this._runAhead=0,this._nextRun=0,this._lineNo=0,this._linePos=0;for(var e=this._tokenPos=0;e<256;e++)this.IS_IDENT[e]=e=="_".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="a".charCodeAt(0)&&e<="z".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0),this.IS_INTEGER[e]=e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="a".charCodeAt(0)&&e<="f".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="F".charCodeAt(0),this.IS_NUMBER[e]=e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e==".".charCodeAt(0)||e=="e".charCodeAt(0)||e=="E".charCodeAt(0),this.IS_WHITE[e]=1<=e&&e<=9||11==e||14<=e&&e<=32,this.IS_END[e]=0==e;this.initProcs()}function b(){return g.call(this)||this}function E(){}function T(){return null!==S&&S.apply(this,arguments)||this}function C(){return N.call(this)||this}function A(){var e=k.call(this)||this;return e._operator=0,e}function _(){return null!==O&&O.apply(this,arguments)||this}function H(){return null!==D&&D.apply(this,arguments)||this}function F(){return null!==B&&B.apply(this,arguments)||this}function R(){return null!==I&&I.apply(this,arguments)||this}function W(){return null!==U&&U.apply(this,arguments)||this}function $(e,t,n){var r=X.call(this)||this;return r._leftExpr=e,r._operator=t,r._isNot=27==t,r._value=-1,n instanceof P?r._value=$.DEFINED:n instanceof q?r._value=$.NULL:n instanceof j?r._value=$.EMPTY:n instanceof z&&(r._value=$.NAN),r}function Q(e){var t=J.call(this)||this;return t._value=Number(e),t}function Z(e){var t=G.call(this)||this;return t._value="string"==typeof e?parseInt(e):Math.floor(e),t}function nt(e){var t=et.call(this)||this;t._value=e.substr(1,e.length-2);for(var n="",r=0,i=!1;r<t._value.length;)"\\"!=t._value[r]||i?(i=!1,n+=t._value[r++]):(i=!0,r++);return t._value=n,t}function st(e){var t=rt.call(this)||this;return t._idKey=-651212,t._literal=e,t}function at(e,t,n){var r=ot.call(this)||this;return r._idKey=-1490313,r._intIndex=NaN,r._strIndex=null,r._ident=e,r._indexer=t,r._capital=n,r}function lt(e){var t=ft.call(this)||this;return t._factor=e,t}function pt(e){return ct.call(this,e)||this}function mt(e){return dt.call(this,e)||this}function bt(e){return gt.call(this,e)||this}function St(e){return wt.call(this,e)||this}function Nt(e){return xt.call(this,e)||this}function Lt(e){return Ct.call(this,e)||this}function Mt(e){return At.call(this,e)||this}function Pt(e){return _t.call(this,e)||this}function jt(e){return Ht.call(this,e)||this}function qt(e){return Ft.call(this,e)||this}function zt(e){return Rt.call(this,e)||this}function Vt(e){return Wt.call(this,e)||this}function Kt(e){return $t.call(this,e)||this}function Yt(){var e=Qt.call(this)||this;return e._factors=[],e._operators=[],e._literal=null,e}function tn(){var e=Zt.call(this)||this;return e._terms=[],e._operators=[],e._literal=null,e}function nn(){this._node=null,this._capitalIndexers=null,this._lexer=new v}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Error,l.__extends(i,n),i);t.ExpressionSyntaxError=r;var s,o=(s=Error,l.__extends(u,s),u);t.ExpressionEvaluationError=o;var a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=[],r=0,i=e;r<i.length;r++)n[i[r]]=!0;return n},f=a(26,27),c=a(40,45,46,47,48,49,50,51,52,53,41,42,43,44),h=a(4,5,18,19),d=a(11,3,2,14,15,16,17),v=(m.prototype.clear=function(){this._source=null},m.prototype.next=function(){var e=this._source.charCodeAt(this._run);this._tokenPos=this._run,e<256?this._procs[e].call(this):this.identProc()},m.prototype.unkownProc=function(){this._tokenId=0,this._run++},m.prototype.symbolProc=function(){this._tokenId=80,this._run++},m.prototype.commaProc=function(){this._tokenId=32,this._run++},m.prototype.crProc=function(){this._tokenId=33,10==this._source.charCodeAt(this._run+1)?this._run+=2:this._run++,this._lineNo++,this._linePos=this._run},m.prototype.lfProc=function(){this._tokenId=33,this._run++,this._lineNo++,this._linePos=this._run},m.prototype.equalProc=function(){this._tokenId=40,this._run++},m.prototype.greaterProc=function(){"="==this._source.charAt(this._run+1)?(this._tokenId=42,this._run+=2):(this._tokenId=41,this._run++)},m.prototype.lowerProc=function(){"="==this._source.charAt(this._run+1)?(this._tokenId=44,this._run+=2):">"==this._source.charAt(this._run+1)?(this._tokenId=45,this._run+=2):(this._tokenId=43,this._run++)},m.prototype.nextIdent=function(){for(var e=this._run;e<this._len&&!this.IS_IDENT[this._source.charCodeAt(e)];)e++;for(var t=e;e<this._len&&this.IS_IDENT[this._source.charCodeAt(e)];)e++;return t<e?(this._nextRun=e,this._source.substr(t,e-t).toLowerCase()):null},m.prototype.identProc=function(){for(var e=this._run;this._run<this._len&&(this.IS_IDENT[this._source.charCodeAt(this._run)]||255<this._source.charCodeAt(this._run));)this._run++;var t=this._source.substr(e,this._run-e).toLowerCase();if(this.Keywords.hasOwnProperty(t))switch(this._tokenId=this.Keywords[t],this._tokenId){case 13:if(t=this.nextIdent())switch(t){case"like":this._tokenId=47,this._run=this._nextRun;break;case"ilike":this._tokenId=49,this._run=this._nextRun;break;case"match":this._tokenId=51,this._run=this._nextRun;break;case"imatch":this._tokenId=53,this._run=this._nextRun}break;case 26:"not"==(t=this.nextIdent())&&(this._tokenId=27,this._run=this._nextRun)}else this._tokenId=10},m.prototype.integerProc=function(){for(this._tokenId=64,this._run++;this._run<this._len&&this.IS_INTEGER[this._source.charCodeAt(this._run)];)this._run++},m.prototype.numberProc=function(){for(this._tokenId=64,this._run++;this._run<this._len&&this.IS_NUMBER[this._source.charCodeAt(this._run)];){if("."==this._source.charAt(this._run)){if("."==this._source.charAt(this._run+1))break;this._tokenId=63}this._run++}},m.prototype.minusProc=function(){this._tokenId=4,this._run++},m.prototype.plusProc=function(){this._tokenId=5,this._run++},m.prototype.pointProc=function(){"."==this._source.charAt(this._run+1)?(this._tokenId=68,this._run+=2):(this._tokenId=65,this._run++)},m.prototype.roundOpenProc=function(){this._tokenId=66,this._run++},m.prototype.roundCloseProc=function(){this._tokenId=67,this._run++},m.prototype.slashProc=function(){this._tokenId=2,this._run++},m.prototype.spaceProc=function(){for(this._tokenId=71,this._run++;this._run<this._len&&this.IS_WHITE[this._source.charCodeAt(this._run)];)this._run++},m.prototype.bracketOpenProc=function(){this._tokenId=69,this._run++},m.prototype.bracketCloseProc=function(){this._tokenId=70,this._run++},m.prototype.starProc=function(){this._tokenId=3,this._run++},m.prototype.modProc=function(){this._tokenId=15,this._run++},m.prototype.stringProc=function(){this._tokenId=61;do{var e=this._source.charCodeAt(this._run);if(this.IS_END[e])throw new r("Untermintated string",e)}while(e==this.BACKSLASH&&this._run++,this._run++,this._run<this._len&&this._source.charCodeAt(this._run)!=this.QUOTATION);this._run++},m.prototype.smallStringProc=function(){this._tokenId=61;do{var e=this._source.charCodeAt(this._run);if(this.IS_END[e])throw new r("Untermintated string",e)}while(e==this.BACKSLASH&&this._run++,this._run++,this._run<this._len&&this._source.charCodeAt(this._run)!=this.SQUOTATION);this._run++},m.prototype.initProcs=function(){this._procs=[];for(var e=1;e<=255;e++)this._procs[e]=this.symbolProc;for(e=1;e<=32;e++)this._procs[e]=this.spaceProc;this._procs[10]=this.lfProc,this._procs[13]=this.crProc,this._procs["$".charCodeAt(0)]=this.integerProc,this._procs[this.QUOTATION]=this.stringProc,this._procs[this.SQUOTATION]=this.smallStringProc;for(e=0;e<=9;e++)this._procs["0".charCodeAt(0)+e]=this.numberProc;for(e="A".charCodeAt(0);e<="Z".charCodeAt(0);e++)this._procs[e]=this.identProc;for(e="a".charCodeAt(0);e<="z".charCodeAt(0);e++)this._procs[e]=this.identProc;this._procs["_".charCodeAt(0)]=this.identProc,this._procs["(".charCodeAt(0)]=this.roundOpenProc,this._procs[")".charCodeAt(0)]=this.roundCloseProc,this._procs["*".charCodeAt(0)]=this.starProc,this._procs["+".charCodeAt(0)]=this.plusProc,this._procs[",".charCodeAt(0)]=this.commaProc,this._procs["-".charCodeAt(0)]=this.minusProc,this._procs[".".charCodeAt(0)]=this.pointProc,this._procs["/".charCodeAt(0)]=this.slashProc,this._procs["%".charCodeAt(0)]=this.modProc,this._procs["<".charCodeAt(0)]=this.lowerProc,this._procs["=".charCodeAt(0)]=this.equalProc,this._procs[">".charCodeAt(0)]=this.greaterProc,this._procs["[".charCodeAt(0)]=this.bracketOpenProc,this._procs["]".charCodeAt(0)]=this.bracketCloseProc},_dp(m,"tokenId",{get:function(){return this._tokenId}}),_dp(m,"tokenLoc",{get:function(){return{x:this._tokenPos-this._linePos,y:this._lineNo}}}),_dp(m,"tokenLen",{get:function(){return this._run-this._tokenPos}}),_dp(m,"token",{get:function(){return this._source.substr(this._tokenPos,this.tokenLen)}}),_dp(m,"isSpace",{get:function(){return 71==this._tokenId}}),m.prototype.init=function(e){this._source=e,this._len=e.length,this._lineNo=0,this._linePos=0,this._tokenPos=0,this._runAhead=this._run=0,this._tokenId=0},m.prototype.charAhread=function(){for(this._runAhead=this._run;this._runAhead<this._len&&0<this._source.charCodeAt(this._runAhead)&&this._source.charCodeAt(this._runAhead)<=32;)this._runAhead++;return this._source.charCodeAt(this._runAhead)},m.prototype.nextId=function(e){for(;this.next(),this._run<this._len&&this._tokenId!=e;);},m.prototype.nextNoSpace=function(){if(this._run<this._len)for(;this.next(),this._run<this._len&&this.isSpace;);},m.prototype.isFirstInLine=function(){if(0==this._tokenPos)return!0;var e,t=this._tokenPos;for(t--;0<t&&this.IS_WHITE[this._source.charCodeAt(t)];)t--;return 0==t||10==(e=this._source.charCodeAt(t))||13==e},m),g,a=(g=y.Base,l.__extends(b,g),b.prototype.isIdentifier=function(e){throw new Error("Token is not a valid Identifier: "+e)},b.prototype.evaluateIdentifier=function(e){throw new Error("Invalid identifier key: "+e)},b.prototype.evaluateIndexerI=function(e,t){throw new Error("Invalid identifier indexer: "+e)},b.prototype.evaluateIndexerS=function(e,t,n){throw new Error("Invalid identifier indexer: "+e)},b);t.ExpressionRuntime=a;var w=(_dp(E,"value",{get:function(){}}),_dp(E,"asLiteral",{get:function(){return null}}),E.prototype.prepareValue=function(){},E.prototype.getLiteral=function(){},E.prototype.isIdentifier=function(e){return!1},E.prototype.toString=function(){return String(this)},E);t.ExpressionNode=w;var S,x=(S=w,l.__extends(T,S),T),N;N=w,l.__extends(C,N),C.prototype.evaluate=function(e){},C.prototype.toString=function(){return""},C.Default=new C;var k,L=(k=w,l.__extends(A,k),A.prototype.evaluate=function(e){if(this._literal)return this._literal.value;if(!this._rightExpr)return this._leftExpr.evaluate(e);var t=this._leftExpr.evaluate(e),n=this._rightExpr.evaluate(e);switch(this._operator){case 40:return t==n;case 45:return t!=n;case 41:return n<t;case 42:return n<=t;case 43:return t<n;case 44:return t<=n;case 46:return this.calcLike(t,n,!1);case 47:return!this.calcLike(t,n,!1);case 48:return this.calcLike(t,n,!0);case 49:return!this.calcLike(t,n,!0);case 50:return this.calcMatch(t,n,!1);case 51:return!this.calcMatch(t,n,!1);case 52:return this.calcMatch(t,n,!0);case 53:return!this.calcMatch(t,n,!0);default:throw new o("Unknown operator: "+this._operator)}},A.prototype.toString=function(){var e="";if(this._literal)e=this._literal.toString();else if(this._rightExpr){var t,n=this._leftExpr.toString(),r=this._rightExpr.toString();switch(this._operator){case 40:t="=";break;case 45:t="<>";break;case 41:t=">";break;case 42:t=">=";break;case 43:t="<";break;case 44:t="<=";break;case 46:t="like";break;case 47:t="not like";break;case 48:t="ilike";break;case 49:t="not ilike";break;case 50:t="match";break;case 51:t="not match";break;case 52:t="imatch";break;case 53:t="not imatch";break;case 32:t=",";break;default:t="<<ERROR>>"}e="("+n+" "+t+" "+r+")"}else e=this._leftExpr.toString();return e},A.prototype.isIdentifier=function(e){return this._leftExpr&&!this._rightExpr&&this._leftExpr.isIdentifier(e)},A.prototype.prepareValue=function(){this._leftExpr.prepareValue(),null==this._rightExpr?this._literal=this._leftExpr.getLiteral():this._rightExpr.prepareValue()},A.prototype.getLiteral=function(){return this._literal},A.prototype.calcLike=function(e,t,n){var r=String(e),i=String(t);return r&&i?(n&&(r=r.toLowerCase(),i=i.toLowerCase()),e=i.length,1<e?(t="%"==i.charAt(0),n="%"==i.charAt(e-1),t&&n?(i=i.substr(1,e-2),0<=r.indexOf(i,0)):t?(i=i.substr(1,e-1),r.lastIndexOf(i)==r.length-i.length):n?(i=i.substr(0,e-1),0==r.indexOf(i,0)):r==i):"%"!=i&&r==i):!1},A.prototype.calcMatch=function(e,t,n){return(new RegExp(t,"m"+(n?"i":""))).test(e)},A),O,M=(O=w,l.__extends(_,O),_dp(_,"value",{get:function(){}}),_dp(_,"asLiteral",{get:function(){return this}}),_.prototype.evaluate=function(e){},_),D,P=(D=M,l.__extends(H,D),H.prototype.toString=function(){return"defined"},H),B,j=(B=M,l.__extends(F,B),F.prototype.toString=function(){return"empty"},F),I,q=(I=M,l.__extends(R,I),_dp(R,"value",{get:function(){return NaN}}),R.prototype.toString=function(){return"null"},R),U,z=(U=M,l.__extends(W,U),W.prototype.toString=function(){return"NaN"},W),X,V=(X=L,l.__extends($,X),$.prototype.prepareValue=function(){this._leftExpr.prepareValue(),this._literal=this._leftExpr.getLiteral()},$.prototype.getLiteral=function(){return null},$.prototype.evaluate=function(e){var t,n=this._literal?this._literal.value:this._leftExpr.evaluate(e);switch(this._value){case $.DEFINED:t=void 0!==n;break;case $.NULL:t=null==n;break;case $.EMPTY:t=null==n||0==String(n).length;break;case $.NAN:t=null===n||isNaN(n);break;default:return}return this._isNot?!t:t},$.prototype.toString=function(){var e="<<ERROR>>";switch(this._value){case $.DEFINED:e="defined";break;case $.NULL:e="null";break;case $.EMPTY:e="empty";break;case $.NAN:e="NaN"}return"("+(this._isNot?"is not ":"is ")+e+")"},$.DEFINED=0,$.NULL=1,$.EMPTY=2,$.NAN=3,$),J,K=(J=x,l.__extends(Q,J),_dp(Q,"value",{get:function(){return this._value}}),_dp(Q,"asLiteral",{get:function(){return this}}),Q.prototype.evaluate=function(e){return this._value},Q.prototype.toString=function(){return String(this._value)},Q),G,Y=(G=x,l.__extends(Z,G),_dp(Z,"value",{get:function(){return this._value}}),_dp(Z,"asLiteral",{get:function(){return this}}),Z.prototype.evaluate=function(e){return this._value},Z.prototype.toString=function(){return String(this._value)},Z),et,tt=(et=x,l.__extends(nt,et),_dp(nt,"value",{get:function(){return this._value}}),_dp(nt,"asLiteral",{get:function(){return this}}),nt.prototype.evaluate=function(e){return this._value},nt.prototype.toString=function(){return"'"+this._value+"'"},nt),rt,it=(rt=w,l.__extends(st,rt),_dp(st,"identifier",{get:function(){return this._literal}}),st.prototype.evaluate=function(e){return-651212==this._idKey&&(this._idKey=e.isIdentifier(this._literal)),e.evaluateIdentifier(this._idKey)},st.prototype.toString=function(){return this._literal},st),ot,ut=(ot=L,l.__extends(at,ot),at.prototype.prepareValue=function(){var e=this._indexer.asLiteral;e||this._indexer instanceof L&&(this._indexer.prepareValue(),e=this._indexer.getLiteral()),e&&("string"==typeof (e=e.value)?this._strIndex=e:this._intIndex=parseInt(e),this._capital&&this._strIndex&&(this._strIndex=this._strIndex.toUpperCase()))},at.prototype.getLiteral=function(){return null},at.prototype.evaluate=function(e){if(-1490313==this._idKey&&(this._idKey=e.isIdentifier(this._ident)),this._strIndex)return e.evaluateIndexerS(this._idKey,this._strIndex,this._capital);if(isNaN(this._intIndex)){var t=this._indexer.evaluate(e);return"string"==typeof t?e.evaluateIndexerS(this._idKey,t,this._capital):e.evaluateIndexerI(this._idKey,t)}return e.evaluateIndexerI(this._idKey,this._intIndex)},at.prototype.toString=function(){return this._ident+"["+this._indexer.toString()+"]"},at),ft,a=(ft=w,l.__extends(lt,ft),lt.prototype.prepareValue=function(){this._literal=this._factor.asLiteral,!this._literal&&this._factor instanceof w&&(this._factor.prepareValue(),this._literal=this._factor.getLiteral())},lt.prototype.getLiteral=function(){return null},lt),ct,ht=(ct=a,l.__extends(pt,ct),pt.prototype.evaluate=function(e){return e=this._literal instanceof x?this._literal.value:this._factor.evaluate(e),e?e.length:0},pt.prototype.toString=function(){return"(len "+this._factor+")"},pt),dt,vt=(dt=a,l.__extends(mt,dt),mt.prototype.evaluate=function(e){return-(this._literal instanceof x?this._literal.value:this._factor.evaluate(e))},mt.prototype.toString=function(){return"-"+this._factor},mt),gt,yt=(gt=a,l.__extends(bt,gt),bt.prototype.evaluate=function(e){return this._literal instanceof x?this._literal.value:this._factor.evaluate(e)},bt.prototype.toString=function(){return"+"+this._factor},bt),wt,Et=(wt=a,l.__extends(St,wt),St.prototype.evaluate=function(e){return this._literal instanceof x?!this._literal.value:!this._factor.evaluate(e)},St.prototype.toString=function(){return"(not "+this._factor+")"},St),xt,Tt=(xt=a,l.__extends(Nt,xt),Nt.prototype.evaluate=function(e){return e=this._literal instanceof x?this._literal.value:this._factor.evaluate(e),Boolean(e)},Nt.prototype.toString=function(){return"(bool "+this._factor+")"},Nt),Ct,kt=(Ct=a,l.__extends(Lt,Ct),Lt.prototype.evaluate=function(e){return e=this._literal instanceof x?this._literal.value:this._factor.evaluate(e),Number(e)},Lt.prototype.toString=function(){return"(num "+this._factor+")"},Lt),At,Ot=(At=a,l.__extends(Mt,At),Mt.prototype.evaluate=function(e){return e=this._literal instanceof x?this._literal.value:this._factor.evaluate(e),String(e)},Mt.prototype.toString=function(){return"(str "+this._factor+")"},Mt),_t,Dt=(_t=a,l.__extends(Pt,_t),Pt.prototype.evaluate=function(e){var t=this._literal instanceof x?this._literal.value:this._factor.evaluate(e);return t instanceof Date&&(t=(e=p.Utils.pad)(t.getFullYear(),4)+e(t.getMonth()+1,2)+e(t.getDate(),2)+e(t.getHours(),2)+e(t.getMinutes(),2)+e(t.getSeconds(),2)+e(t.getMilliseconds(),3)),String(t)},Pt.prototype.toString=function(){return"(datestr "+this._factor+")"},Pt),Ht,Bt=(Ht=a,l.__extends(jt,Ht),jt.prototype.evaluate=function(e){return e=this._literal instanceof x?this._literal.value:this._factor.evaluate(e),e instanceof Date?e.getFullYear():null},jt.prototype.toString=function(){return"(year "+this._factor+")"},jt),Ft,It=(Ft=a,l.__extends(qt,Ft),qt.prototype.evaluate=function(e){return e=this._literal instanceof x?this._literal.value:this._factor.evaluate(e),e instanceof Date?e.getMonth()+1:null},qt.prototype.toString=function(){return"(month "+this._factor+")"},qt),Rt,Ut=(Rt=a,l.__extends(zt,Rt),zt.prototype.evaluate=function(e){return e=this._literal instanceof x?this._literal.value:this._factor.evaluate(e),e instanceof Date?e.getDate():null},zt.prototype.toString=function(){return"(day "+this._factor+")"},zt),Wt,Xt=(Wt=a,l.__extends(Vt,Wt),Vt.prototype.evaluate=function(e){return e=this._literal instanceof x?this._literal.value:this._factor.evaluate(e),e instanceof Date?e.getHours():null},Vt.prototype.toString=function(){return"(hour "+this._factor+")"},Vt),$t,Jt=($t=a,l.__extends(Kt,$t),Kt.prototype.evaluate=function(e){var t=this._factor,n=t.getLiteral();if(t.getLiteral())return n.value;if(t._rightExpr){var r=t._leftExpr.evaluate(e),n=t._rightExpr.evaluate(e);if(32!==t._operator)throw new o("Unknown operator: "+t._operator);return n=Math.pow(10,n),Math.floor(r*n)/n}return t._leftExpr.evaluate(e)},Kt.prototype.toString=function(){return"(rounddown "+this._factor+")"},Kt),Qt,Gt=(Qt=w,l.__extends(Yt,Qt),Yt.prototype.addFactor=function(e){this._factors.push(e)},Yt.prototype.addOperator=function(e){this._operators.push(e)},Yt.prototype.isIdentifier=function(e){return 1==this._factors.length&&this._factors[0]instanceof it&&this._factors[0].identifier==e},Yt.prototype.prepareValue=function(){for(var e,t=0,n=this._factors.length;t<n;t++)this._factors[t].prepareValue();0==this._operators.length&&(e=this._factors[0],this._literal=e.asLiteral,this._literal||(this._literal=e.getLiteral()))},Yt.prototype.getLiteral=function(){return this._literal},Yt.prototype.evaluate=function(e){if(this._literal)return this._literal.value;for(var t=this._factors.length,n=this._factors[0].evaluate(e),r=1;r<t;r++){var i=this._factors[r].evaluate(e);switch(this._operators[r-1]){case 11:n=n&&i;break;case 3:n*=i;break;case 2:n/=i;break;case 14:n=Math.floor(Math.floor(n)/Math.floor(i));break;case 15:n%=i;break;case 16:n<<=i;break;case 17:n>>=i}}return n},Yt.prototype.toString=function(){var e="";if(this._literal)e=this._literal.toString();else if(1==this._factors.length)e=this._factors[0].toString();else{for(var t=this._factors.length,e="("+this._factors[0].toString(),n=1;n<t;n++){switch(this._operators[n-1]){case 11:e+=" and ";break;case 3:e+=" * ";break;case 2:case 14:e+=" / ";break;case 15:e+=" mod ";break;case 16:e+=" shl ";break;case 17:e+=" shr "}e+=this._factors[n].toString()}e+=")"}return e},Yt),Zt,en=(Zt=w,l.__extends(tn,Zt),tn.prototype.addTerm=function(e){this._terms.push(e)},tn.prototype.addOperator=function(e){this._operators.push(e)},tn.prototype.isIdentifier=function(e){return 1==this._terms.length&&this._terms[0].isIdentifier(e)},tn.prototype.prepareValue=function(){for(var e=0,t=this._terms.length;e<t;e++)this._terms[e].prepareValue();0==this._operators.length&&(this._literal=this._terms[0].getLiteral())},tn.prototype.getLiteral=function(){return this._literal},tn.prototype.evaluate=function(e){if(this._literal)return this._literal.value;for(var t=this._terms.length,n=this._terms[0].evaluate(e),r=1;r<t;r++){var i=this._terms[r].evaluate(e);switch(this._operators[r-1]){case 4:n-=i;break;case 5:n+=i;break;case 18:n=n||i;break;case 19:n^=i}}return n},tn.prototype.toString=function(){var e="";if(this._literal)e=this._literal.toString();else if(1==this._terms.length)e=this._terms[0].toString();else{for(var t=this._terms.length,e="("+this._terms[0].toString(),n=1;n<t;n++){switch(this._operators[n-1]){case 4:e+=" - ";break;case 5:e+=" + ";break;case 18:e+=" or ";break;case 19:e+=" xor ";break;default:e+=" <<ERROR>> "}e+=this._terms[n].toString()}e+=")"}return e},tn);nn.prototype.syntaxError=function(e,t){throw new r(e,t)},nn.prototype.expected=function(e){if(e!=this._lexer.tokenId)throw new r("Token is not a expected kind ["+e+"]: "+this._lexer.tokenId,this._lexer.tokenLoc);this.nextToken()},nn.prototype.nextToken=function(){this._lexer.nextNoSpace()},nn.prototype.doExpression=function(){var e,t=null,n=this.doSimpleExpression();if(f[e=this._lexer.tokenId]){this.nextToken();var i=this.doSimpleExpression();i.prepareValue(),i=i.getLiteral();if(!(i instanceof M))throw new r("is operator's operand must be defined, null or empty: "+this._lexer.tokenId,null);t=new V(n,e,i)}else(t=new L)._leftExpr=n,!c[this._lexer.tokenId]&&32!=this._lexer.tokenId||(t._operator=this._lexer.tokenId,this.nextToken(),t._rightExpr=this.doSimpleExpression());return t},nn.prototype.doSimpleExpression=function(){var e=new en;for(e.addTerm(this.doTerm());h[this._lexer.tokenId];)e.addOperator(this._lexer.tokenId),this.nextToken(),e.addTerm(this.doTerm());return e},nn.prototype.doTerm=function(){var e=new Gt;for(e.addFactor(this.doFactor());d[this._lexer.tokenId];)e.addOperator(this._lexer.tokenId),this.nextToken(),e.addFactor(this.doFactor());return e},nn.prototype.doFactor=function(){var e=this._lexer.tokenId;switch(e){case 61:return this.doCharString();case 66:return this.doRoundOpen();case 10:return this.doIdentifier();case 64:return this.doInteger();case 63:return this.doNumber();case 4:return this.doMinus();case 5:return this.doPlus();case 13:return this.doNot();case 35:return this.doDefined();case 34:return this.doNull();case 36:return this.doEmpty();case 37:return this.doNaN();case 23:return this.doToBool();case 21:return this.doToNumber();case 20:return this.doToString();case 24:return this.doLength();case 90:return this.doToDateString();case 91:return this.doToYear();case 92:return this.doToMonth();case 93:return this.doToDay();case 94:return this.doToHour();case 95:return this.doRoundDown()}throw new r("Unkown token: "+e,this._lexer.tokenLoc)},nn.prototype.doCharString=function(){var e=this._lexer.token;return this.nextToken(),new tt(e)},nn.prototype.doRoundOpen=function(){this.nextToken();var e=this.doExpression();return this.expected(67),e},nn.prototype.doIdentifier=function(){var e=this._lexer.token;if(this.nextToken(),69!=this._lexer.tokenId)return new it(e);this.nextToken();var t=this.doExpression();return this.expected(70),new ut(e,t,0<=this._capitalIndexers.indexOf(e))},nn.prototype.doNumber=function(){var e=this._lexer.token;return this.nextToken(),new K(e)},nn.prototype.doInteger=function(){var e=this._lexer.token;return this.nextToken(),new Y(e)},nn.prototype.doMinus=function(){return this.nextToken(),new vt(this.doFactor())},nn.prototype.doPlus=function(){return this.nextToken(),new yt(this.doFactor())},nn.prototype.doNot=function(){return this.nextToken(),new Et(this.doFactor())},nn.prototype.doDefined=function(){return this.nextToken(),new P},nn.prototype.doNull=function(){return this.nextToken(),new q},nn.prototype.doEmpty=function(){return this.nextToken(),new j},nn.prototype.doNaN=function(){return this.nextToken(),new z},nn.prototype.doToBool=function(){return this.nextToken(),new Tt(this.doFactor())},nn.prototype.doToNumber=function(){return this.nextToken(),new kt(this.doFactor())},nn.prototype.doToString=function(){return this.nextToken(),new Ot(this.doFactor())},nn.prototype.doLength=function(){return this.nextToken(),new ht(this.doFactor())},nn.prototype.doToDateString=function(){return this.nextToken(),new Dt(this.doFactor())},nn.prototype.doToYear=function(){return this.nextToken(),new Bt(this.doFactor())},nn.prototype.doToMonth=function(){return this.nextToken(),new It(this.doFactor())},nn.prototype.doToDay=function(){return this.nextToken(),new Ut(this.doFactor())},nn.prototype.doToHour=function(){return this.nextToken(),new Xt(this.doFactor())},nn.prototype.doRoundDown=function(){return this.nextToken(),new Jt(this.doFactor())},nn.prototype.parse=function(e,t){return e?(this._capitalIndexers=t||[],this._lexer.init(e),this.nextToken(),e=this.doExpression(),e&&e.prepareValue(),this._lexer.clear(),this._capitalIndexers=null,e):null},nn.prototype.evaluate=function(e,t,n){return this.parse(e,n).evaluate(t)},nn.Default=new nn,a=nn,t.ExpressionParser=a});t(b),b.ExpressionSyntaxError,b.ExpressionEvaluationError,b.ExpressionRuntime,b.ExpressionNode,b.ExpressionParser;var w=n(function(e,t){function s(e,t,r){void 0===t&&(t=c.ValueType.TEXT),void 0===r&&(r=0);var i=n.call(this)||this;return i._index=-1,i._dataType=c.ValueType.TEXT,i._subType=null,i._runType=c.ValueType.TEXT,i._length=0,i._subTypeEnabled=!0,i._required=!1,i._updatable=!0,i._ranged=!1,i._runSet=null,i._typeLock=!1,i._objectKey=null,i._objectCallback=null,e&&(i.fieldName=e),null!=t&&(t===c.ValueType.DATE&&(t=c.ValueType.DATETIME,i._subType=c.ValueType.DATE,i._subTypeEnabled=!0),i._dataType=t),i._length=r,i}Object.defineProperty(t,"__esModule",{value:!0});var n,r=["value","values"],i=(n=y.Base,l.__extends(s,n),_dp(s,"hash",{get:function(){return this._fieldName}}),_dp(s,"index",{get:function(){return this._index}}),_dp(s,"fieldName",{get:function(){return this._fieldName},set:function(e){if(!(e=e&&e.trim()))throw new Error("Field name must be exists.");e!=this._orgFieldName&&(this._orgFieldName=e,this._orgAttrName="@"+e,this._fieldName=e.toUpperCase(),this.changed())}}),_dp(s,"orgFieldName",{get:function(){return this._orgFieldName}}),_dp(s,"orgAttrName",{get:function(){return this._orgAttrName}}),_dp(s,"dataType",{get:function(){return this._dataType},set:function(e){e!=this._dataType&&(this._dataType=e,this.resetTypes(),this.changed())}}),_dp(s,"runType",{get:function(){return this._runType}}),_dp(s,"subType",{get:function(){return this._subType},set:function(e){(e=e||null)!=this._subType&&(this._subType=e,this.resetTypes(),this.changed())}}),_dp(s,"subTypeEnabled",{get:function(){return this._subTypeEnabled},set:function(e){e!=this._subTypeEnabled&&(this._subTypeEnabled=e,this.resetTypes(),this.changed())}}),_dp(s,"baseField",{get:function(){return this._baseField},set:function(e){e!=this._orgBaseField&&(this._orgBaseField=e,this._baseField=e&&e.toUpperCase(),this.changed())}}),_dp(s,"length",{get:function(){return this._length},set:function(e){(e=e||0)!=this._length&&(this._length=e,this.resetTypes(),this.changed())}}),_dp(s,"set",{get:function(){return this._set},set:function(e){e!==this._set&&(this._set=e,this.resetTypes(),this.changed())}}),_dp(s,"minimum",{get:function(){return this._minimum},set:function(e){e!=this._minimum&&(this._minimum=e,this.resetTypes(),this.changed())}}),_dp(s,"maximum",{get:function(){return this._maximum},set:function(e){e!=this._maximum&&(this._maximum=e,this.resetTypes(),this.changed())}}),_dp(s,"required",{get:function(){return this._required},set:function(e){e!=this._required&&(this._required=e,this.changed())}}),_dp(s,"header",{get:function(){return this._header},set:function(e){e!=this._header&&(this._header=e,this.changed())}}),_dp(s,"defaultValue",{get:function(){return this._defaultValue},set:function(e){e!=this._defaultValue&&(this._defaultValue=e)}}),_dp(s,"nullValue",{get:function(){return this._nullValue}}),_dp(s,"booleanFormat",{get:function(){return this._booleanFormat},set:function(e){e!=this._booleanFormat&&(this._booleanFormat=e,this._boolParser=e?new v.BooleanConverter(e):null,this.changed())}}),_dp(s,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(e){e!=this._datetimeFormat&&((this._datetimeFormat=e)?(this._dateParser=new g.DateTimeReader(e),this._dateParser.amText=this._amText,this._dateParser.pmText=this._pmText,this._dateParser.baseYear=this._baseYear):this._dateParser=null,this.changed())}}),_dp(s,"amText",{get:function(){return this._amText},set:function(e){e!=this._amText&&(this._amText=e,this._dateParser&&(this._dateParser.amText=e),this.changed())}}),_dp(s,"pmText",{get:function(){return this._pmText},set:function(e){e!=this._pmText&&(this._pmText=e,this._dateParser&&(this._dateParser.pmText=e),this.changed())}}),_dp(s,"baseYear",{get:function(){return this._baseYear},set:function(e){e!=this._baseYear&&(this._baseYear=e,this._dateParser&&(this._dateParser.baseYear=e),this.changed())}}),_dp(s,"valueExpression",{get:function(){return this._valueExpression},set:function(e){e!=this._valueExpression&&(this._valueExpression=e)}}),_dp(s,"valueCallback",{get:function(){return this._valueCallback},set:function(e){e!=this._valueCallback&&(this._valueCallback=e)}}),_dp(s,"tag",{get:function(){return this._tag},set:function(e){this._tag=e}}),_dp(s,"objectKey",{get:function(){return this._objectKey},set:function(e){this._objectKey=e}}),_dp(s,"objectCallback",{get:function(){return this._objectCallback},set:function(e){this._objectCallback=e}}),_dp(s,"calculated",{get:function(){return!!this._valueExpression||!!this._valueCallback}}),_dp(s,"updatable",{get:function(){return!this._valueExpression&&!this._valueCallback&&this._updatable},set:function(e){e!=this._updatable&&(this._updatable=e)}}),s.prototype.isEmpty=function(e){var t=null==e||""===e;return t=!t&&this._dataType==c.ValueType.NUMBER?isNaN(e):t},s.prototype.isNull=function(e){if(null==e)return!0;switch(this._runType){case c.ValueType.TEXT:case c.ValueType.CHAR:if(0==e.length)return!0;break;case c.ValueType.NUMBER:case c.ValueType.UNUM:case c.ValueType.INT:case c.ValueType.UINT:if(isNaN(e))return!0}return!1},s.prototype.equalValues=function(e,t){return this._equalValues(e,t)},s.prototype.sameValues=function(e,t){return this._sameValues(e,t)},s.prototype.readValue=function(e){return this._readValue(e)},s.prototype.getBool=function(e,t){return"boolean"==typeof t?t:(this._boolParser||e).toBool(t)},s.prototype.getDate=function(e,t){return t instanceof Date?new Date(t.getTime()):"number"==typeof t?new Date(t):(this._dateParser||e).toDate(t)},s.prototype.clone=function(){var e=new s(this.fieldName,this.dataType,this.length);return e._orgFieldName=this._orgFieldName,e._orgAttrName=this._orgAttrName,e._boolParser=this._boolParser,e._dateParser=this._dateParser,e._orgBaseField=this._orgBaseField,e._baseField=this._baseField,e._defaultValue=this._defaultValue,e._valueCallback=this._valueCallback,e._valueExpression=this._valueExpression,e},s.prototype.$_resetTypes=function(e){this.resetTypes(e)},s.prototype.assignFrom=function(e){"fieldName"in e&&(this.fieldName=e.fieldName),"subType"in e&&(this._subType=e.subType),"set"in e&&(this._set=e.set instanceof Array?e.set.slice():null),"defaultValue"in e&&(this._defaultValue=e.defaultValue),"baseField"in e&&(this.baseField=e.baseField),"booleanFormat"in e&&(this.booleanFormat=e.booleanFormat),"amText"in e&&(this._amText=e.amText),"pmText"in e&&(this._pmText=e.pmText),"baseYear"in e&&(this._baseYear=e.baseYear),"header"in e&&(this._header=e.header),"datetimeFormat"in e&&(this.datetimeFormat=e.datetimeFormat),"objectKey"in e&&(this._objectKey=e.objectKey),"objectCallback"in e&&(this._objectCallback=e.objectCallback),"required"in e&&(this._required=e.required),"minimum"in e&&(this._minimum=e.minimum),"maximum"in e&&(this._maximum=e.maximum),"valueExpression"in e&&(this.valueExpression=e.valueExpression),"valueCallback"in e&&(this._valueCallback=e.valueCallback),"tag"in e&&(this._tag=e.tag)},s.prototype.$_setIndex=function(e){this._index=e},s.prototype.$_prepare=function(e){this._owner=e},s.prototype.changed=function(){this._owner},s.prototype.resetTypes=function(e){if(!this._typeLock){e&&(this._ownerBoolParser=e.boolParser,this._ownerDateParser=e.dateParser);var t=this._dataType,n=this._subType;if(this._runType=t,this._ranged=!1,(!this._owner||this._owner.subTypeEnabled)&&this._subTypeEnabled){if(n)switch(t){case c.ValueType.TEXT:n==c.ValueType.CHAR&&0<this._length&&(t=n);break;case c.ValueType.NUMBER:n!=c.ValueType.UNUM&&n!=c.ValueType.INT&&n!=c.ValueType.UINT||(t=n);break;case c.ValueType.DATETIME:n==c.ValueType.DATE&&(t=n)}if(this._runType=t,this._runSet=null,this._set&&this._set.length){if(this._runType==c.ValueType.DATETIME){this._runSet=[];for(var r=0;r<this._set.length;r++)(i=this.getDate(this._ownerDateParser,this._set[r]))&&this._runSet.push(i.getTime());this._runSet.length<1&&(this._runSet=null)}else if(this._runType==c.ValueType.DATE){this._runSet=[];for(var i,s,r=0;r<this._set.length;r++)(i=this.getDate(this._ownerDateParser,this._set[r]))&&(s=new Date(i.getDate()),this._runSet.push(s.setHours(0,0,0,0)));this._runSet.length<1&&(this._runSet=null)}else this._runSet=this._set;this._ranged=!0}if(!this._ranged)switch(this._dataType){case c.ValueType.NUMBER:this._runMin=Number(this._minimum),this._runMax=Number(this._maximum),isNaN(this._runMin)||isNaN(this._runMax)?this._ranged=!isNaN(this._runMin)||!isNaN(this._runMax):this._ranged=this._runMin<=this._runMax;break;case c.ValueType.DATETIME:case c.ValueType.DATE:this._runMin=this.getDate(this._ownerDateParser,this._minimum),this._runMax=this.getDate(this._ownerDateParser,this._maximum),this._runMin&&this._runMax?this._ranged=this._runMin.getTime()<=this._runMax.getTime():this._ranged=this._runMin||this._runMax}switch(this._runType){case c.ValueType.TEXT:this._equalValues=this.equalTextValues,this._sameValues=this.sameTextValues,this._readValue=this.readTextValue,this._nullValue=null;break;case c.ValueType.CHAR:this._equalValues=this.equalTextValues,this._sameValues=this.sameTextValues,this._readValue=this.readCharValue,this._nullValue=null;break;case c.ValueType.NUMBER:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readNumberValue,this._nullValue=NaN;break;case c.ValueType.UNUM:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readUnumValue,this._nullValue=NaN;break;case c.ValueType.INT:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readIntValue,this._nullValue=NaN;break;case c.ValueType.UINT:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readUintValue,this._nullValue=NaN;break;case c.ValueType.DATETIME:this._equalValues=this.equalDateValues,this._sameValues=this.sameDateValues,this._readValue=this.readDatetimeValue,this._nullValue=null;break;case c.ValueType.DATE:this._equalValues=this.equalDateValues,this._sameValues=this.sameDateValues,this._readValue=this.readDateValue,this._nullValue=null;break;case c.ValueType.BOOLEAN:this._equalValues=this.equalBoolValues,this._sameValues=this.sameBoolValues,this._readValue=this.readBooleanValue,this._nullValue=!1;break;case c.ValueType.OBJECT:this._equalValues=this.equalObjectValues,this._sameValues=this.sameObjectValues,this._readValue=this.readObjectValues,this._nullValue=!1;break;default:this._equalValues=this.equalDummyValues,this._sameValues=this.sameDummyValues,this._readValue=this.readDummyValue,this._nullValue=void 0}}}},s.prototype.$_refreshFormats=function(e){this._owner=e,this._dateParser&&(this._dateParser.baseYear||(this._dateParser.baseYear=e.baseYear),this._dateParser.amText||(this._dateParser.amText=e.amText),this._dateParser.pmText||(this._dateParser.pmText=e.pmText)),this._ownerBoolParser=e.boolParser,this._ownerDateParser=e.dateParser},s.prototype.equalDummyValues=function(e,t){return void 0===e?void 0===t:void 0!==t&&e==t},s.prototype.sameDummyValues=function(e,t){return null==e?null==t:null!=t&&e==t},s.prototype.equalTextValues=function(e,t){return void 0===e?void 0===t:void 0!==t&&e==t},s.prototype.sameTextValues=function(e,t){return null==e||""==e?null==t||""==t:null!=t&&""!=t&&e==t},s.prototype.equalNumberValues=function(e,t){return void 0===e?void 0===t:void 0!==t&&(isNaN(e)?isNaN(t):!isNaN(t)&&e==t)},s.prototype.sameNumberValues=function(e,t){return isNaN(e)?isNaN(t):!isNaN(t)&&e==t},s.prototype.equalDateValues=function(e,t){return void 0===e?void 0===t:void 0!==t&&(e instanceof Date?t instanceof Date&&e.getTime()==t.getTime():!(t instanceof Date))},s.prototype.sameDateValues=function(e,t){return e instanceof Date?t instanceof Date&&e.getTime()==t.getTime():!(t instanceof Date)},s.prototype.equalBoolValues=function(e,t){return void 0===e?void 0===t:void 0!==t&&Boolean(e)==Boolean(t)},s.prototype.sameBoolValues=function(e,t){return void 0===e?void 0===t:void 0!==t&&Boolean(e)==Boolean(t)},s.prototype.equalObjectValues=function(e,t){return void 0===e||void 0===t?void 0===e==(void 0===t):JSON.stringify(e)===JSON.stringify(t)},s.prototype.sameObjectValues=function(e,t){return null==e||null==t?null==e&&null==t:JSON.stringify(e)===JSON.stringify(t)},s.prototype.readDummyValue=function(e){return e},s.prototype.readTextValue=function(e){return void 0===e?e:(e=null===e?null:String(e),this._ranged&&this._runSet&&this._runSet.indexOf(e)<0?void 0:e)},s.prototype.readCharValue=function(e){return void 0===e?e:(e=(e=null===e?null:String(e))&&e.substr(0,this._length),this._ranged&&this._runSet&&this._runSet.indexOf(e)<0?void 0:e)},s.prototype.readNumberValue=function(e){if(null!=e&&""!==e){e=Number(e);if(this._ranged)if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));return e}},s.prototype.readUnumValue=function(e){if(null!=e&&""!==e){e=Math.max(0,Number(e));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=Math.max(0,e)}return e}},s.prototype.readIntValue=function(e){if(null!=e&&""!==e){e=0<=e?Math.floor(e):Math.ceil(e);if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=0<=e?Math.floor(e):Math.ceil(e)}return e}},s.prototype.readUintValue=function(e){if(null!=e&&""!==e){e=Math.max(0,Math.floor(Math.floor(e)));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=Math.max(0,Math.floor(Math.floor(e)))}return e}},s.prototype.readDatetimeValue=function(e){if(void 0!==e){if(null===e)return this._nullValue;var t=this.getDate(this._ownerDateParser,e);if(t&&this._ranged)if(this._runSet){for(var n=!1,r=this._runSet.length;r--;)if(t.getTime()==this._runSet[r]){n=!0;break}if(!n)return}else this._runMin&&t.getTime()<this._runMin.getTime()&&(t=new Date(this._runMin)),this._runMax&&t.getTime()>this._runMax.getTime()&&(t=new Date(this._runMax));return t}},s.prototype.readDateValue=function(e){if(void 0!==e){if(null===e)return this._nullValue;var t=this.getDate(this._ownerDateParser,e);if(t&&(t.setHours(0,0,0,0),this._ranged))if(this._runSet){for(var n=!1,r=this._runSet.length;r--;)if(t.getTime()==this._runSet[r]){n=!0;break}if(!n)return}else this._runMin&&t.getTime()<this._runMin.getTime()&&(t=new Date(this._runMin)),this._runMax&&t.getTime()>this._runMax.getTime()&&(t=new Date(this._runMax));return t}},s.prototype.readBooleanValue=function(e){return void 0===e?e:null!==e&&this.getBool(this._ownerBoolParser,e)},s.prototype.readObjectValues=function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){throw new Error("Invalid Object String "+t+"\r\n"+e)}else if("object"!=typeof e)try{e=JSON.parse(e)}catch(t){}return p.Utils.deepCopy(e)},s.prototype.$_compareObject=function(e,t,n,r){var i=this._objectKey,s=this._objectCallback,e=s?s(this.orgFieldName,n,e):i&&e.hasOwnProperty(i)?e[i]:null,i=s?s(this.orgFieldName,r,t):i&&t.hasOwnProperty(i)?t[i]:null;return i<e?1:e<i?-1:0},s.prototype.$_calculateValue=function(e,t,n,i,s,o,u){return this._valueCallback?this._valueCallback(e.handler,n,i,o,u):this._valueExpression?(this._exprNode||(this._exprNode=b.ExpressionParser.Default.parse(this._valueExpression,r)),t.setValues(u,s),this._exprNode.evaluate(t)):void 0},s);t.DataField=i});t(w),w.DataField;var E=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),(t=t.RestoreMode||(t.RestoreMode={})).NONE="none",t.EXPLICIT="explicit",t.AUTO="auto"});t(E),E.RestoreMode;var S=n(function(e,t){function i(){var e=n.call(this)||this;return e._values=null,e._fields=null,e._fieldCount=0,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=b.ExpressionRuntime,l.__extends(i,n),i.prototype.setValues=function(e,t){this._values=e,this._fields=t,this._fieldCount=t?t.length:0},i.prototype.isIdentifier=function(e){return e=e.toLowerCase(),i.IDENTS.hasOwnProperty(e)?i.IDENTS[e]:n.prototype.isIdentifier.call(this,e)},i.prototype.evaluateIdentifier=function(e){throw new b.ExpressionEvaluationError("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(e,t){if(this._values){if(e!=i.ID_VALUE&&e!=i.ID_VALUES)throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e);if(t<0||t>=this._fieldCount)throw new b.ExpressionEvaluationError("Data field index out of bounds:"+t);return this._values[t]}},i.prototype.evaluateIndexerS=function(e,t,n){if(e!=i.ID_VALUE&&e!=i.ID_VALUES)throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e);if(this._values&&this._fields){e=this._fields.indexOf(t);if(e<0||e>=this._fieldCount)throw new b.ExpressionEvaluationError("Data field is not exists:"+t);return this._values[e]}},i.IDENTS={value:i.ID_VALUE=0,values:i.ID_VALUES=1},i);t.CalculateExpressionRuntime=r});t(S),S.CalculateExpressionRuntime;var x=n(function(e,t){function i(){var e=n.call(this)||this;return e._listeners=[],e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.prototype._doDispose=function(){return this._listeners=null,n.prototype._doDispose.call(this)},_dp(i,"listenerCount",{get:function(){return this._listeners.length}}),i.prototype.addListener=function(e,t){return null!=e&&this._listeners&&this._listeners.indexOf(e)<0&&(null!=t&&0<=t?this._listeners.splice(t,0,e):this._listeners.push(e)),this},i.prototype.removeListener=function(e){return null==e||!this._listeners||0<=(e=this._listeners.indexOf(e))&&this._listeners.splice(e,1),this},i.prototype.clearListener=function(){this._listeners.length=0},i.prototype.fireEvent=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=Array.prototype.slice.call(arguments,0),i=0,s=(r[0]=this)._listeners.length;i<s;i++){var o=this._listeners[i],u=o[e];u&&u.apply(o,r)}},i.prototype.fireConfirmEvent=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=Array.prototype.slice.call(arguments,0),i=0,s=(r[0]=this)._listeners.length;i<s;i++){var o=this._listeners[i],u=o[e];if(u){o=u.apply(o,r);if("boolean"==typeof o&&!o)return!1}}return!0},i.prototype.fireMessageEvent=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=Array.prototype.slice.call(arguments,0),i=0,s=(r[0]=this)._listeners.length;i<s;i++){var o=this._listeners[i],u=o[e];if(u){o=u.apply(o,r);if("string"==typeof o&&o)return o}}return null},i.prototype.fireObjectEvent=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=Array.prototype.slice.call(arguments,0),i=0,s=(r[0]=this)._listeners.length;i<s;i++){var o=this._listeners[i],u=o[e];if(u){o=u.apply(o,r);if(null!=o)return o}}return null},i);t.EventAware=r});t(x),x.EventAware;var T=n(function(e,t){function n(e){return e<10?"0"+e:String(e)}function b(e){this._hasAmPm=!1,this.format=e}Object.defineProperty(t,"__esModule",{value:!0});var r=["yy","yyyy","M","MM","d","dd","a","H","HH","h","hh","m","mm","s","ss","S","SS","SSS"],i=[".","/","-",":"],s="Z".charCodeAt(0),o="z".charCodeAt(0),u="A".charCodeAt(0),a="a".charCodeAt(0),f="y".charCodeAt(0),l="M".charCodeAt(0),c="m".charCodeAt(0),h="d".charCodeAt(0),d="H".charCodeAt(0),v="h".charCodeAt(0),m="S".charCodeAt(0),g="s".charCodeAt(0),y=(b.getFormatter=function(e){var t=b.Formatters[e];return t||(b.Formatters[e]=t=new b(e)),t},Object.defineProperty(b,"Default",{get:function(){return b.getFormatter(b.DEFAULT_FORMAT)}}),_dp(b,"format",{get:function(){return this._format},set:function(e){(e=e||b.DEFAULT_FORMAT)!=this._format&&(this._tokens=[],this.parse(e),this._format=e)}}),b.prototype.getText=function(e){if(!this._tokens)return"";for(var t=e instanceof Date?e:new Date(e),r=this._tokens,i="",s=0,o=r.length;s<o;s++){var p,y=r[s],b=y.length;switch(y.charCodeAt(0)){case f:i+=2<b?t.getFullYear():n(t.getFullYear()%100);break;case l:i+=1<b?n(t.getMonth()+1):t.getMonth()+1;break;case h:i+=1<b?n(t.getDate()):t.getDate();break;case d:i+=1<b?n(t.getHours()):t.getHours();break;case v:this._hasAmPm?(0==(p=t.getHours())?p=12:12<p&&(p-=12),i+=1<b?n(p):p):i+=1<b?n(t.getHours()):t.getHours();break;case c:i+=1<b?n(t.getMinutes()):t.getMinutes();break;case g:i+=1<b?n(t.getSeconds()):t.getSeconds();break;case a:case u:t.getHours()<12?i+=this._amText:i+=this._pmText;break;case m:var w=t.getMilliseconds();i+=3==b?(p=w)<10?"00"+p:p<100?"0":String(p):2==b?n(w):w.toString().substr(0,b);break;default:i+=y}}return i},b.prototype.parseDateFormatTokens=function(e){var t=[];if(e)for(var n=e.trim(),f=n.length,l=0;l<f;){var c=n.charAt(l);if(0<=i.indexOf(c))t.push(c),l++;else{for(var h=l++;l<f&&n.charAt(l)==c;)l++;if(c=n.substring(h,l),r.indexOf(c)<0){h=c.charCodeAt(0);if(u<=h&&h<=s||a<=h&&h<=o)throw new Error("Invalid datetime write format: "+e)}t.push(c)}if(l<f&&p.Utils.isWhiteSpace(c=n.charAt(l)))for(t.push(c);l<f&&p.Utils.isWhiteSpace(n.charAt(l));)l++}return t},b.prototype.parse=function(e){this._amText="AM",this._pmText="PM",e&&(e=e.split(";"),this._format=e[0]||b.DEFAULT_FORMAT,this._tokens=this.parseDateFormatTokens(this._format),this._hasAmPm=0<=this._tokens.indexOf("a")||0<=this._tokens.indexOf("A"),1<e.length&&e[1]&&(0<(e=e[1].split(",")).length&&e[0]&&(this._amText=e[0]),1<e.length&&e[1]&&(this._pmText=e[1])))},b.DEFAULT_FORMAT="yyyy/MM/dd",b.Formatters={},b);t.DateTimeWriter=y});t(T),T.DateTimeWriter;var N=n(function(e,t){function r(e){this.$_parse(this._format=e)}Object.defineProperty(t,"__esModule",{value:!0});var n=(r.getFormatter=function(e){var t=r.Formatters[e];return t||(r.Formatters[e]=t=new r(e)),t},_dp(r,"format",{get:function(){return this._format}}),r.prototype.formatValue=function(e){return void 0===e?this._nullText:e?this._trueText:this._falseText},r.prototype.$_parse=function(e){this._falseText=this._trueText=null,e&&(e=e.split(/[;\:]/),this._falseText=e[0],0<e.length&&(this._trueText=e[1]),1<e.length&&(this._nullText=e[2]))},r.Formatters={},r);t.BooleanFormatter=n});t(N),N.BooleanFormatter;var C=n(function(e,t){function n(e){return p.Utils.included(e,"c","f","C","F","a","A")}function i(e){this._groupPos=0,this._replacement="$&,",this.parse(this._format=e)}Object.defineProperty(t,"__esModule",{value:!0});var r=(i.getFormatter=function(e){var t=i.Formatters[e];return t||(i.Formatters[e]=t=new i(e)),t},Object.defineProperty(i,"Default",{get:function(){return i.getFormatter(i.DEFAULT_FORMAT)}}),_dp(i,"format",{get:function(){return this._format}}),_dp(i,"separator",{get:function(){return this._seperator}}),_dp(i,"groupSep",{get:function(){return this._groupSep}}),_dp(i,"minDigits",{get:function(){return this._minDigits}}),_dp(i,"maxDigits",{get:function(){return this._maxDigits}}),i.prototype.parse=function(e){this._minDigits=0,this._maxDigits=0,this._parse(e)},i.prototype.getText=function(e,t){void 0===t&&(t=!0);var n=Number(e);if(isNaN(n))return"";var r=this._minDigits,i=0;if(this._optDecimal&&(o=function(e){return e=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/),e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}(n),r=Math.min(Math.max(o,this._minDigits),this._maxDigits)),this._round)switch(i=Math.pow(10,r),this._round){case"c":n=Math.ceil(i*n)/i;break;case"f":var s=n.toString().split("."),n=parseFloat(1<s.length?s[0]+"."+s[1].substr(0,r):s[0])}n="a"===this._round?Math.abs(n):n;var o=(n=Number(n.toPrecision(15))).toFixed(r);try{t||(i=parseFloat(o))!==Math.abs(parseFloat(o))||0!==i||(o=Math.abs(n).toFixed(r))}catch(e){}return this._seperator&&(o=o.replace(".",this._seperator)),this._reg?r?o.replace(this._regDecimal,this._replacement):o.replace(this._reg,this._replacement):o},i.prototype._parse=function(e){if(e=e&&e.trim()){var t=".",r=",";-1<e.indexOf(";")&&(e=(s=e.split(";"))[0],1<s.length&&s[1]&&!n(s[1])&&(t=s[1]),2<s.length&&s[2]&&!n(s[2])&&(r=s[2]),this._round=s[3]||s[2]||s[1],this._round=n(this._round)?this._round.toLowerCase():this._round),this._seperator="."==t?null:t,this._groupSep=","==r?null:r;var i=e.length,s=e.indexOf(".");if(this._optDecimal=0<e.indexOf("#",s),0<=s){for(var o=s+1;o<i&&"0"==e.charAt(o);o++)this._minDigits++,this._maxDigits++;for(;o<i&&"#"==e.charAt(o);o++)this._maxDigits++;e=e.substr(0,s)}if(e&&(s=e.length,","==e.charAt(s-1)&&(this._groupPos=3,e=e.substr(0,s-1))),e)for(var u=e.length,a=!0,o=u-1;0<=o;o--){var f=e.charAt(o);if("0"!=f||!a)if(0==this._groupPos&&","==f)this._groupPos=u-o-1;else{if("#"!=f)break;a=!1}}0<this._groupPos&&(this._replacement="$&"+r,this._reg=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+($|\\"+t+"))","g"),this._regDecimal=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+\\"+t+")","g"))}},i.DEFAULT_FORMAT="#,##0.0",i.Formatters={},i);t.DecimalFormatter=r});t(C),C.DecimalFormatter;var k=n(function(e,t){function i(e){var t=n.call(this)||this;return t._datetimeWriter=null,t._booleanFormatter=null,t._numberFormatter=null,t.assignFrom(e),t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),_dp(i,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(e){e!=this._datetimeFormat&&(this._datetimeFormat=e,this._datetimeWriter=e?T.DateTimeWriter.getFormatter(e):null)}}),_dp(i,"booleanFormat",{get:function(){return this._booleanFormat},set:function(e){e!=this._booleanFormat&&(this._booleanFormat=e,this._booleanFormatter=e?N.BooleanFormatter.getFormatter(e):null)}}),_dp(i,"numberFormat",{get:function(){return this._numberFormat},set:function(e){e!=this._numberFormat&&(this._numberFormat=e,this._numberFormatter=e?C.DecimalFormatter.getFormatter(e):null)}}),_dp(i,"datetimeCallback",{get:function(){return this._datetimeCallback},set:function(e){this._datetimeCallback=e}}),_dp(i,"booleanCallback",{get:function(){return this._booleanCallback},set:function(e){this._booleanCallback=e}}),_dp(i,"numberCallback",{get:function(){return this._numberCallback},set:function(e){this._numberCallback=e}}),_dp(i,"nullDateText",{get:function(){return this._nullDateText},set:function(e){this._nullDateText=e}}),_dp(i,"nullText",{get:function(){return this._nullText},set:function(e){this._nullText=e}}),_dp(i,"nanText",{get:function(){return this._nanText},set:function(e){this._nanText=e}}),_dp(i,"rowState",{get:function(){return this._rowState},set:function(e){this._rowState=e}}),_dp(i,"datetimeWriter",{get:function(){return this._datetimeWriter}}),_dp(i,"booleanFormatter",{get:function(){return this._booleanFormatter}}),_dp(i,"numberFormatter",{get:function(){return this._numberFormatter}}),i);t.DataOutputOptions=r});t(k),k.DataOutputOptions;var L=n(function(e,t){function r(){}function o(e){return i.call(this,e)||this}function f(){return u.call(this,"Client is editing (call grid.commit() or grid.cancel() first)")||this}function y(){var e=h.call(this)||this;return e._subTypeEnabled=!0,e._undoable=!1,e._insertable=!0,e._updatable=!0,e._deletable=!0,e._softDeleting=!1,e._deleteCreated=!1,e._checkStates=!0,e._restoreMode=E.RestoreMode.NONE,e._strictRestore=!1,e._booleanFormat=null,e._datetimeFormat=null,e._baseYear=2e3,e._amText="AM",e._pmText="PM",e._alertClientError=!0,e._throwClientError=!1,e._commitBeforeDataEdit=!1,e._fields=[],e._calcFields=[],e._fieldNames=[],e._fieldMap={},e._defComparer=new n,e._comparers=[],e._boolParser=v.BooleanConverter.Default,e._dateParser=g.DateTimeReader.Default,e._eventLock=0,e._resetLock=0,e._countLock=0,e._clients=[],e}Object.defineProperty(t,"__esModule",{value:!0});var n=(r.prototype.compare=function(e,t,n){return e.dataType==c.ValueType.NUMBER?Number(t)-Number(n):n<t?1:t<n?-1:0},r),i,s=(i=Error,l.__extends(o,i),o);t.DataSourceError=s;var u,a=(u=Error,l.__extends(f,u),f);t.ClientEditingError=a;var h,m=(h=x.EventAware,l.__extends(y,h),y.prototype._doDispose=function(){try{this.$_internalClearFields(),this._fieldMap=null}catch(e){}this._fields=null,this._calcFields=null,this._fieldNames=null,this._fieldMap=null,this._boolParser=this._dateParser=null,this._comparers=null,this._clients=null,this._defComparer=null,h.prototype._doDispose.call(this)},_dp(y,"subTypeEnabled",{get:function(){return this._subTypeEnabled},set:function(e){if(e!=this._subTypeEnabled){this._subTypeEnabled=e;for(var t=0,n=this._fields;t<n.length;t++)n[t].$_resetTypes()}}}),_dp(y,"undoable",{get:function(){return this._undoable},set:function(e){this._undoable=e}}),_dp(y,"insertable",{get:function(){return this._insertable},set:function(e){this._insertable=e}}),_dp(y,"updatable",{get:function(){return this._updatable},set:function(e){this._updatable=e}}),_dp(y,"deletable",{get:function(){return this._deletable},set:function(e){this._deletable=e}}),_dp(y,"softDeleting",{get:function(){return this._softDeleting},set:function(e){this._softDeleting=e}}),_dp(y,"deleteCreated",{get:function(){return this._deleteCreated},set:function(e){this._deleteCreated=e}}),_dp(y,"checkStates",{get:function(){return this._checkStates},set:function(e){e!=this._checkStates&&(this._checkStates=e,this._doCheckStatesChanged())}}),_dp(y,"restoreMode",{get:function(){return this._restoreMode},set:function(e){var t;e!=this._restoreMode&&(t=this._restoreMode,this._restoreMode=e,this._doRestoreModeChanged(t,e))}}),_dp(y,"strictRestore",{get:function(){return this._strictRestore},set:function(e){this._strictRestore=e}}),_dp(y,"booleanFormat",{get:function(){return this._booleanFormat},set:function(e){e!=this._booleanFormat&&(this._booleanFormat=e,this._boolParser=e?new v.BooleanConverter(e):v.BooleanConverter.Default)}}),_dp(y,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(e){e!=this._datetimeFormat&&(this._datetimeFormat=e,this.$_createDateReader())}}),_dp(y,"baseYear",{get:function(){return this._baseYear},set:function(e){this._baseYear=e}}),_dp(y,"amText",{get:function(){return this._amText},set:function(e){e!=this._amText&&(this._amText=e,this.$_createDateReader())}}),_dp(y,"pmText",{get:function(){return this._pmText},set:function(e){e!=this._pmText&&(this._pmText=e,this.$_createDateReader())}}),_dp(y,"alertClientError",{get:function(){return this._alertClientError},set:function(e){this._alertClientError=e}}),_dp(y,"throwClientError",{get:function(){return this._throwClientError},set:function(e){this._throwClientError=e}}),_dp(y,"commitBeforeDataEdit",{get:function(){return this._commitBeforeDataEdit},set:function(e){this._commitBeforeDataEdit=e}}),_dp(y,"calculateRuntime",{get:function(){return this._calculateRuntime||(this._calculateRuntime=new S.CalculateExpressionRuntime),this._calculateRuntime}}),_dp(y,"local",{get:function(){return!0}}),_dp(y,"immediateUpdate",{get:function(){return!1}}),_dp(y,"summarized",{get:function(){return!1}}),_dp(y,"fieldCount",{get:function(){return this._fields.length}}),_dp(y,"boolParser",{get:function(){return this._boolParser}}),_dp(y,"dateParser",{get:function(){return this._dateParser}}),_dp(y,"eventLocked",{get:function(){return 0<this._eventLock}}),_dp(y,"canUndo",{get:function(){return!1}}),_dp(y,"canRedo",{get:function(){return!1}}),_dp(y,"undoing",{get:function(){return!1}}),_dp(y,"redoing",{get:function(){return!1}}),y.prototype.registerClient=function(e){e&&this._clients.indexOf(e)<0&&this._clients.push(e)},y.prototype.unregisterClient=function(e){!e||0<=(e=this._clients.indexOf(e))&&this._clients.splice(e,1)},y.prototype.cancelClients=function(){for(var e=0,t=this._clients;e<t.length;e++)t[e].cancelDataEditing()},y.prototype.commitClients=function(){for(var e=0,t=this._clients;e<t.length;e++)t[e].commitDataEditing()},y.prototype.beginUpdate=function(){this._checkClientState(),this._eventLock++},y.prototype.endUpdate=function(e){void 0===e&&(e=!0),this._checkClientState(),this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&(e&&(0<this._resetLock?this._fireReset():this._fireRefresh(),0<this._countLock&&this._fireRowCountChanged()),this._resetLock=this._countLock=0)},y.prototype.addField=function(e,t,n){if(this._checkClientState()){var r=null;this.beginUpdate();try{(r=this.$_internalAddField(e))&&r.$_resetTypes(this)}finally{t&&this._doFieldsReset(),this.endUpdate()}return r}},y.prototype.clearFields=function(){this._checkClientState()&&0<this._fields.length&&(this.$_internalClearFields(),this._doFieldsReset())},y.prototype.setFields=function(e){if(this._checkClientState()){this.beginUpdate();try{if(this.$_internalClearFields(),e)for(var t=0,n=e.length;t<n;t++){var r=this.$_internalAddField(e[t]);r&&r.$_resetTypes(this)}}finally{this.endUpdate(),this._doFieldsReset()}}},y.prototype.getField=function(e){return this._fields[e]},y.prototype.getFields=function(){return this._fields.slice()},y.prototype.fieldByName=function(e){if(e)for(var t=e.toUpperCase(),n=0,r=this._fields;n<r.length;n++){var i=r[n];if(i.fieldName==t)return i}return null},y.prototype.getFieldNames=function(){for(var e=this._fields.length,t=[],n=0;n<e;n++)t.push(this._fields[n].fieldName);return t},y.prototype.getOrgFieldNames=function(){for(var e=this._fields.length,t=[],n=0;n<e;n++)t.push(this._fields[n].orgFieldName);return t},y.prototype.getFieldName=function(e){return this._checkFieldIndex(e),this._fields[e].fieldName},y.prototype.getOrgFieldName=function(e){return this._checkFieldIndex(e),this._fields[e].orgFieldName},y.prototype.getFieldIndex=function(e){if("number"==typeof e)return e;if(e){e=e.toUpperCase();if(e in this._fieldMap)return this._fieldMap[e]}return-1},y.prototype.getFieldIndexC=function(e){return e in this._fieldMap?this._fieldMap[e]:-1},y.prototype.getBaseField=function(e){return 0<=e&&e<this._fields.length?this.getFieldIndex(this._fields[e].baseField):-1},y.prototype.getValueType=function(e){return this._fields[e].dataType},y.prototype.getDefaultValue=function(e){return this._fields[e].defaultValue()},y.prototype.hasData=function(e){return!1},y.prototype.objectToRow=function(e){var t=[];if(e)for(var n=0,r=this.fieldCount;n<r;n++){var i=this.getOrgFieldName(n);e.hasOwnProperty(i)&&(t[n]=e[i])}return t},y.prototype.canUpdateField=function(e,t){if(0<=t&&t<this._fields.length){if(!this._fields[t].updatable&&0<=e)try{var n=this.getRowState(e);return!n||n==d.RowState.CREATED||n==d.RowState.CREATE_AND_DELETED}catch(e){return!1}return!0}return!1},y.prototype.getDataComparer=function(e){if(0<=e)return e=this._comparers[e],e||null},y.prototype.setDataComparer=function(e,t){this._comparers[e]=t||void 0},y.prototype.canSummarize=function(e){if(0<=e&&e<this.fieldCount){e=this.getValueType(e);if(e==c.ValueType.BOOLEAN||e==c.ValueType.NUMBER||c.ValueType.DATE)return!0}return!1},y.prototype.getDistinctValues=function(e,t,n){return void 0===n&&(n=c.SortDirection.ASCENDING),null},y.prototype.exportToJson=function(){},y.prototype.exportToCsv=function(e){},y.prototype.exportToXml=function(){},y.prototype.canUpdateRow=function(e){return!1},y.prototype.canAppendRow=function(){return!1},y.prototype.canInsertRow=function(e){return!1},y.prototype.canDeleteRow=function(e){return!1},y.prototype.undo=function(){},y.prototype.redo=function(){},y.prototype.clearCommandStack=function(){},y.prototype._convertValues=function(e,t){var n,r="*"in t&&"*"==t["*"]?e:{};for(n in t)r[t[n]]=e[n];return r},y.prototype.getClientsBusy=function(){var e={busy:!1,cnt:0,client:null};if(this.disposing)return e;for(var t=this._clients.length;t--;)this._clients[t].isDataEditing()&&(e.busy=!0,e.cnt++,e.client=this._clients[t]);return e},y.prototype._checkClientState=function(){if(this.getClientsBusy().busy){if(this._throwClientError)throw new a;return this._alertClientError&&p.Utils.alert((new a).message),!1}return!0},y.prototype._checkFieldIndex=function(e){if(e<0||e>=this._fields.length)throw new s("Invalid field index: "+e)},y.prototype.$_internalClearFields=function(){this._checkClientState();for(var e=0,t=this._fields;e<t.length;e++)t[e].$_setIndex(-1);this._fields.splice(0,this._fields.length),this._calcFields.splice(0,this._calcFields.length),this._fieldNames.splice(0,this._fieldNames.length),this._fieldMap={}},y.prototype.$_internalInsertField=function(e,t){this._checkClientState();var n=this._fields.length;if(e<0||n<e)throw p.Utils.isDebugging(),new s("index is out of bounds:"+e);if(t){t.$_prepare(this),this._fields.splice(e,0,t),this._fieldNames.splice(e,0,t.fieldName),t.calculated&&this._calcFields.push(t),t.$_setIndex(e);for(var r=(this._fieldMap[t.fieldName]=e)+1;r<=n;r++)(t=this._fields[r]).$_setIndex(r),this._fieldMap[t.fieldName]=r;return e}return-1},y.prototype.$_addField=function(e,t,n,r){if(!e)throw new s("fieldName must be exists.");if(0<=this.getFieldIndex(e))throw new s("fieldName is already exists: "+e);return n=new w.DataField(e,t,n),r&&n.assignFrom(r),this.$_internalInsertField(this._fields.length,n),n},y.prototype.$_internalAddField=function(e){var t=null;return"string"==typeof e?t=this.$_addField(e,c.ValueType.TEXT,0):e instanceof w.DataField?(t=e.clone(),this.$_internalInsertField(this._fields.length,t)):e&&(t=this.$_addField(e.fieldName,e.dataType||c.ValueType.TEXT,e.length,e)),t},y.prototype._internalCalculateValues=function(e,t){var n=this._calcFields;if(0<n.length){for(var r=[],i=0;i<e.length;i++)r[i]=this.getField(i).readValue(e[i]);for(var i=0,s=n.length;i<s;i++){var o=n[i],u=this._fieldMap[o.fieldName];e[u]=r[u]=o.readValue(o.$_calculateValue(this,this.calculateRuntime,t,o.orgFieldName,this._fieldNames,this.getOrgFieldNames(),r))}}},y.prototype.refreshFieldFormats=function(){for(var e=0,t=this._fields;e<t.length;e++)t[e].$_refreshFormats(this)},y.prototype.refreshFieldFormat=function(e){e&&e.$_refreshFormats(this)},y.prototype._getRowValues=function(){return new Array(this.fieldCount)},y.prototype.$_createOutputRows=function(e,t,n){void 0===n&&(n=0);var r=this.fieldCount,i=e.length,s=(t=t instanceof k.DataOutputOptions?t:new k.DataOutputOptions(t)).nullDateText,o=t.nullText,u=t.nanText;try{for(var a=0;a<r;a++){var f=this.getField(a),l=f.dataType,h=f.orgFieldName,p=void 0,d=void 0,v=void 0,m=void 0,g=void 0,y=void 0;if(l==c.ValueType.DATETIME&&((p=t.datetimeCallback)||(m=t.datetimeWriter)||s))if(p)for(var b=0;b<i;b++)(S=e[b])[h]=p(this.handler,b+n,h,S[h]);else for(b=0;b<i;b++){var w=(S=e[b])[h];S[h]=w?m?m.getText(S[h]):w:s}else if(l==c.ValueType.BOOLEAN&&((d=t.booleanCallback)||(g=t.booleanFormatter)))if(d)for(b=0;b<i;b++)(S=e[b])[h]=d(this.handler,b+n,h,S[h]);else for(b=0;b<i;b++)(S=e[b])[h]=g.formatValue(S[h]);else if(l==c.ValueType.NUMBER&&((v=t.numberCallback)||(y=t.numberFormatter)||u))if(v)for(b=0;b<i;b++)(S=e[b])[h]=v(this.handler,b+n,h,S[h]);else for(b=0;b<i;b++){var E=(S=e[b])[h];S[h]=null==E||isNaN(E)?u:y?y.getText(E):E}else if(null!=o&&null!=o)for(b=0;b<i;b++){var S,x=(S=e[b])[h];S[h]=null==x||null==x?o:x}}}finally{t&&t.dispose()}},y.prototype.$_sortRows=function(e,t,n,r,i){do{var s,o=r,u=i,a=e[Math.floor((r+i)/2)];do{for(;o<=u&&!(n(t,a,e[o])<=0);)o++;for(;o<=u&&!(0<=n(t,a,e[u]));)u--}while(o<=u&&(o!=u&&(s=e[o],e[o]=e[u],e[u]=s),o++,u--),o<=u)}while(r<u&&this.$_sortRows(e,t,n,r,u),(r=o)<i)},y.prototype.$_createDateReader=function(){this._datetimeFormat?(this._dateParser=new g.DateTimeReader(this._datetimeFormat),this._dateParser.amText=this._amText,this._dateParser.pmText=this._pmText,this._dateParser.baseYear=this._baseYear):this._dateParser=g.DateTimeReader.Default},y.prototype._doCheckStatesChanged=function(){},y.prototype._doRestoreModeChanged=function(e,t){},y.prototype._doFieldsReset=function(){},y.prototype._refreshClients=function(){},y.prototype._fireReset=function(){},y.prototype._fireRowCountChanged=function(){},y.prototype._fireRefresh=function(){},y.prototype._fireCommandStackChanged=function(e,t){this._eventLock<=0&&this.fireEvent(y.COMMAND_STACK_CHANGED,e,t)},y.COMMAND_STACK_CHANGED="onDataSourceCommandStackChanged",y);t.DataSource=m});t(L),L.DataSourceError,L.ClientEditingError,L.DataSource;var A=n(function(e,t){function i(){return n.call(this)||this}function o(e){var t=s.call(this)||this;return t._tags=[],t._owner=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.prototype.connect=function(e){},i.prototype.disconnect=function(){},i.prototype.clearRows=function(){},i.prototype.setRows=function(){},i.prototype.setRowCount=function(e){},i.prototype.insertRow=function(e){},i.prototype.insertRows=function(e,t){},i.prototype.removeRow=function(e){},i.prototype.removeRows=function(e){},i.prototype.updateRow=function(e){},i.prototype.updateRows=function(e,t){},i.prototype.updateRowList=function(e){},i.prototype.setValue=function(e,t){},i.prototype.moveRow=function(e,t){},i.prototype.moveRows=function(e,t,n){},i.prototype.moveRowList=function(e,t){},i.prototype.changeStates=function(e){},i);t.DataTag=r;var s,r=(s=y.Base,l.__extends(o,s),o.prototype._doDispose=function(){this._owner=null,this._tags=null,s.prototype._doDispose.call(this)},o.prototype.add=function(e){null!=this._tags&&e&&this._tags.indexOf(e)<0&&(this._tags.push(e),e.connect(this._owner))},o.prototype.remove=function(e){var t;null!=this._tags&&(!e||0<=(t=this._tags.indexOf(e))&&(this._tags.splice(t,1),e.disconnect()))},o.prototype.clearRows=function(){if(null!=this._tags)for(var e=0,t=this._tags;e<t.length;e++)t[e].clearRows()},o.prototype.setRows=function(){if(null!=this._tags)for(var e=0,t=this._tags;e<t.length;e++)t[e].setRows()},o.prototype.setRowCount=function(e){if(null!=this._tags)for(var t=0,n=this._tags;t<n.length;t++)n[t].setRowCount(e)},o.prototype.insertRow=function(e){if(null!=this._tags)for(var t=0,n=this._tags;
t<n.length;t++)n[t].insertRow(e)},o.prototype.insertRows=function(e,t){if(null!=this._tags)for(var n=0,r=this._tags;n<r.length;n++)r[n].insertRows(e,t)},o.prototype.removeRow=function(e){if(null!=this._tags)for(var t=0,n=this._tags;t<n.length;t++)n[t].removeRow(e)},o.prototype.removeRows=function(e){if(null!=this._tags)for(var t=0,n=this._tags;t<n.length;t++)n[t].removeRows(e)},o.prototype.updateRow=function(e){if(null!=this._tags)for(var t=0,n=this._tags;t<n.length;t++)n[t].updateRow(e)},o.prototype.updateRows=function(e,t){if(null!=this._tags)for(var n=0,r=this._tags;n<r.length;n++)r[n].updateRows(e,t)},o.prototype.updateRowList=function(e){if(null!=this._tags)for(var t=0,n=this._tags;t<n.length;t++)n[t].updateRowList(e)},o.prototype.setValue=function(e,t){if(null!=this._tags)for(var n=0,r=this._tags;n<r.length;n++)r[n].setValue(e,t)},o.prototype.moveRow=function(e,t){if(null!=this._tags)for(var n=0,r=this._tags;n<r.length;n++)r[n].moveRow(e,t)},o.prototype.moveRows=function(e,t,n){if(null!=this._tags)for(var r=0,i=this._tags;r<i.length;r++)i[r].moveRows(e,t,n)},o.prototype.moveRowList=function(e,t){if(null!=this._tags)for(var n=0,r=this._tags;n<r.length;n++)r[n].moveRowList(e,t)},o);t.DataTagCollection=r});t(A),A.DataTag,A.DataTagCollection;var O=n(function(e,t){function r(e){this._active=!1,this._exprNode=null,this.criteria=e}function s(e,t){this._filterMode=s.FILTER_AND,this._or=!1,this.load(e),t&&(this.filterMode=t)}function u(){var e=o.call(this)||this;return e._ds=null,e._fieldCount=0,e._row=-1,e._values=null,e}Object.defineProperty(t,"__esModule",{value:!0});var n=(r.prototype.dispose=function(){this._exprNode=null},_dp(r,"criteria",{get:function(){return this._criteria},set:function(e){e!=this._criteria&&(this._criteria=e,this._exprNode=e?b.ExpressionParser.Default.parse(e,r.CAPITAL_INDEXERS):null)}}),r.prototype.select=function(e,t,n){return!this._exprNode||(e.setRow(t,n),this._exprNode.evaluate(e))},r.CAPITAL_INDEXERS=["value","values","len"],r);t.DataFilter=n;var i=(s.prototype.dispose=function(){return this._filters&&this._filters.forEach(function(e,t){e.dispose()}),this._filters=null},_dp(s,"filterMode",{get:function(){return this._filterMode},set:function(e){e=e&&e.toLocaleLowerCase(),e!=this._filterMode&&(this._filterMode=e,this._or=this._filterMode==s.FILTER_OR)}}),s.prototype.load=function(e){if(!e||e instanceof Array||(e=[e]),this._filters=[],e instanceof Array)for(var t=0,r=e.length;t<r;t++){var i=null,s=e[t];s&&("string"==typeof s?i=new n(s):s.criteria&&(i=new n(s.criteria))),i&&this._filters.push(i)}},s.prototype.prepare=function(e,t){e.prepare(t)},s.prototype.select=function(e,t,n){var r=this._filters,i=r.length;if(this._or){for(var s=0;s<i;s++)if(1==r[s].select(e,t,n))return!0;return!1}for(s=0;s<i;s++)if(0==r[s].select(e,t,n))return!1;return!0},s.FILTER_AND="and",s.FILTER_OR="or",s);t.DataFilterCollection=i;var o,i=(o=b.ExpressionRuntime,l.__extends(u,o),u.prototype._doDispose=function(){this._ds=null,o.prototype._doDispose.call(this)},u.prototype.prepare=function(e){this._ds=e,this._fieldCount=e?e.fieldCount:0},u.prototype.setRow=function(e,t){this._row=e,this._values=t},u.prototype.isIdentifier=function(e){return e=e.toLowerCase(),u.IDENTS.hasOwnProperty(e)?u.IDENTS[e]:o.prototype.isIdentifier.call(this,e)},u.prototype.evaluateIdentifier=function(e){if(e===u.ID_ROW)return this._row;throw new b.ExpressionEvaluationError("Invalid identifier key: "+e)},u.prototype.evaluateIndexerI=function(e,t){if(t<0||t>=this._fieldCount)throw new b.ExpressionEvaluationError("Data field index out of bounds:"+t);switch(e){case u.ID_VALUE:case u.ID_VALUES:return this._values[t]}throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e)},u.prototype.evaluateIndexerS=function(e,t,n){switch(e){case u.ID_VALUE:case u.ID_VALUES:var r=this.getField(t,n);return this._values[r]}throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e)},u.prototype.getField=function(e,t){t=t?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(t<0||t>=this._fieldCount)throw new b.ExpressionEvaluationError("Data field is not exits:"+e);return t},u.IDENTS={row:u.ID_ROW=0,value:u.ID_VALUE=1,values:u.ID_VALUES=2},u);t.DataFilterRuntime=i});t(O),O.DataFilter,O.DataFilterCollection,O.DataFilterRuntime;var M=n(function(e,t){function i(){var e=n.call(this)||this;return e._tags=new A.DataTagCollection(e),e._filterRuntime=new O.DataFilterRuntime,e._commandListeners=[],e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=L.DataSource,l.__extends(i,n),i.prototype._doDispose=function(){this._tags=this._tags.dispose(),this._filters=this._filters&&this._filters.dispose(),this._filterRuntime=this._filterRuntime.dispose(),this._commandListeners=null,n.prototype._doDispose.call(this)},i.prototype.editCommandStackChanged=function(e,t,n){this._fireCommandStackChanged(t,n)},_dp(i,"filters",{get:function(){return this._filters}}),_dp(i,"filterRuntime",{get:function(){return this._filterRuntime}}),_dp(i,"deletedCount",{get:function(){return 0}}),_dp(i,"tags",{get:function(){return this._tags}}),i.prototype.addTag=function(e){this._tags.add(e)},i.prototype.removeTag=function(e){this._tags.remove(e)},i.prototype.setFilterMode=function(e){this._filters&&e==this._filters.filterMode||(this._filters?this._filters.filterMode=e:this._filters=new O.DataFilterCollection(null,e))},i.prototype.setFilters=function(e,t){!e||e instanceof O.DataFilterCollection?(this._filters=e,this._filters&&t&&(this._filters.filterMode=t)):this._filters=new O.DataFilterCollection(e,t)},i.prototype.getRowObject=function(e){if(e<0||e>=this.rowCount)throw new L.DataSourceError("row is out of range: "+e);for(var t={},n=0,r=this.fieldCount;n<r;n++){var i=this.getOrgFieldName(n),s=this.getValue(e,n);t[i]=s}return t},i.prototype.objectToRow=function(e){var t=[];if(e)for(var n=0,r=this.fieldCount;n<r;n++){var i=this.getOrgFieldName(n);e.hasOwnProperty(i)&&(t[n]=e[i])}return t},i.prototype.compareValues=function(e,t,n){return 0},i.prototype.compareTexts=function(e,t,n,r){return 0},i.prototype.compareNumbers=function(e,t,n){return 0},i.prototype.compareBools=function(e,t,n){return 0},i.prototype.compareObjects=function(e,t,n){return 0},i.prototype.summarize=function(e,t){return!1},i.prototype.summarizeRange=function(e,t,n){return!1},i.prototype.copyRows=function(e,t,n,r){},_dp(i,"hiddenCount",{get:function(){return 0}}),i.prototype.isHiddenRow=function(e){return!1},i.prototype.registerCommandListener=function(e){e&&this._commandListeners&&this._commandListeners.indexOf(e)<0&&this._commandListeners.push(e)},i.prototype.unregisterCommandListener=function(e){e=this._commandListeners?this._commandListeners.indexOf(e):-1,0<=e&&this._commandListeners.splice(e,1)},i.prototype.findRow=function(e,t,n){},i.prototype._doFieldsReset=function(){this._fireReset()},i.prototype._refreshClients=function(){this.fireRefreshClients()},i.prototype._keepCommandStates=function(e){if(0<this._commandListeners.length)return this._commandListeners[0].getCommandStates(e)},i.prototype._yieldCommandStates=function(e,t){if(0<this._commandListeners.length)return this._commandListeners[0].setCommandStates(e,t)},i.prototype.fireDisposed=function(){this._eventLock<=0&&this.fireEvent(i.DISPOSED)},i.prototype._fireReset=function(){this._eventLock<=0?this.fireEvent(i.RESET):this._resetLock++},i.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent(i.REFRESH)},i.prototype.fireRefreshClients=function(){this._eventLock<=0&&this.fireEvent(i.REFRESH)},i.prototype._fireRowCountChanged=function(){this._eventLock<=0?this.fireEvent(i.ROW_COUNT_CHANGED):this._countLock++},i.prototype.fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent(i.DATA_LOAD_COMPLATED)},i.prototype.fireRowInserting=function(e,t){return!(this._eventLock<=0)||this.fireConfirmEvent(i.ROW_INSERTING,e,t)},i.prototype.fireRowInserted=function(e){this._eventLock<=0&&(this.fireEvent(i.ROW_INSERTED,e),this.fireEvent(i.DATA_CHANGED))},i.prototype.fireRowsInserted=function(e,t){this._eventLock<=0&&(this.fireEvent(i.ROWS_INSERTED,e,t),this.fireEvent(i.DATA_CHANGED))},i.prototype.fireRowRemoving=function(e){return!(this._eventLock<=0)||this.fireConfirmEvent(i.ROW_REMOVING,e)},i.prototype.fireRowRemoved=function(e){this._eventLock<=0&&(this.fireEvent(i.ROW_REMOVED,e),this.fireEvent(i.DATA_CHANGED))},i.prototype.fireRowsRemoving=function(e){return!(this._eventLock<=0)||this.fireConfirmEvent(i.ROWS_REMOVING,e)},i.prototype.fireRowsRemoved=function(e){this._eventLock<=0&&(this.fireEvent(i.ROWS_REMOVED,e),this.fireEvent(i.DATA_CHANGED))},i.prototype.fireRowUpdating=function(e,t){return!(this._eventLock<=0)||this.fireConfirmEvent(i.ROW_UPDATING,e,t)},i.prototype.fireRowUpdated=function(e){this._eventLock<=0&&(this.fireEvent(i.ROW_UPDATED,e),this.fireEvent(i.DATA_CHANGED))},i.prototype.fireRowsUpdated=function(e,t){this._eventLock<=0&&(this.fireEvent(i.ROWS_UPDATED,e,t),this.fireEvent(i.DATA_CHANGED))},i.prototype.fireRowListUpdated=function(e){this._eventLock<=0&&(this.fireEvent(i.ROW_LIST_UPDATED,e),this.fireEvent(i.DATA_CHANGED))},i.prototype.fireRowMoving=function(e,t){return!(this._eventLock<=0)||this.fireConfirmEvent(i.ROW_MOVING,e,t)},i.prototype.fireRowMoved=function(e,t){this._eventLock<=0&&this.fireEvent(i.ROW_MOVED,e,t)},i.prototype.fireRowsMoving=function(e,t,n){return!(this._eventLock<=0)||this.fireConfirmEvent(i.ROWS_MOVING,e,t,n)},i.prototype.fireRowsMoved=function(e,t,n){this._eventLock<=0&&this.fireEvent(i.ROWS_MOVED,e,t,n)},i.prototype.fireRowListMoving=function(e,t){return!(this._eventLock<=0)||this.fireConfirmEvent(i.ROW_LIST_MOVING,e,t)},i.prototype.fireRowListMoved=function(e,t){this._eventLock<=0&&this.fireEvent(i.ROW_LIST_MOVED,e,t)},i.prototype.fireValueChanging=function(e,t,n){return!(this._eventLock<=0)||this.fireConfirmEvent(i.VALUE_CHANGING,e,t,n)},i.prototype.fireValueChanged=function(e,t){this._eventLock<=0&&(this.fireEvent(i.VALUE_CHANGED,e,t),this.fireEvent(i.DATA_CHANGED))},i.prototype.fireRowStateChanged=function(e){this._eventLock<=0&&this.fireEvent(i.STATE_CHANGED,e)},i.prototype.fireRowStatesChanged=function(e){this._eventLock<=0&&this.fireEvent(i.STATES_CHANGED,e)},i.prototype.fireRowStatesCleared=function(){this._eventLock<=0&&this.fireEvent(i.STATES_CLEARED)},i.prototype.fireRestoreRows=function(e){this._eventLock<=0&&this.fireEvent(i.RESTOREROWS,e)},i.prototype.fireRowHided=function(e,t){this._eventLock<=0&&this.fireEvent(i.ROW_HIDED,e,t)},i.DISPOSED="onDataProvderDisposed",i.RESET="onDataProviderReset",i.REFRESH="onDataProviderRefresh",i.REFRESH_CLIENT="onDataProviderRefreshClient",i.ROW_COUNT_CHANGED="onDataProviderRowCountChanged",i.ROW_INSERTING="onDataProviderRowInserting",i.ROW_INSERTED="onDataProviderRowInserted",i.ROWS_INSERTED="onDataProviderRowsInserted",i.ROW_REMOVING="onDataProviderRowRemoving",i.ROW_REMOVED="onDataProviderRowRemoved",i.ROWS_REMOVING="onDataProviderRowsRemoving",i.ROWS_REMOVED="onDataProviderRowsRemoved",i.ROW_UPDATING="onDataProviderRowUpdating",i.ROW_UPDATED="onDataProviderRowUpdated",i.ROWS_UPDATED="onDataProviderRowsUpdated",i.ROW_LIST_UPDATED="onDataProviderRowListUpdated",i.ROW_MOVING="onDataProviderRowMoving",i.ROW_MOVED="onDataProviderRowMoved",i.ROWS_MOVING="onDataProviderRowsMoving",i.ROWS_MOVED="onDataProviderRowsMoved",i.ROW_LIST_MOVING="onDataProviderRowListMoving",i.ROW_LIST_MOVED="onDataProviderRowListMoved",i.VALUE_CHANGING="onDataProviderValueChanging",i.VALUE_CHANGED="onDataProviderValueChanged",i.DATA_CHANGED="onDataProviderDataChanged",i.STATE_CHANGED="onDataProviderStateChanged",i.STATES_CHANGED="onDataProviderStatesChanged",i.STATES_CLEARED="onDataProviderStatesCleared",i.RESTOREROWS="onDataProviderRestoreRows",i.ROW_HIDED="onDataProviderRowHided",i.DATA_LOAD_COMPLATED="onDataProviderDataLoadComplated",i);t.DataProvider=r});t(M),M.DataProvider;var _=n(function(e,t){function l(e){this._baseYear=2e3,this.format=e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=["yy","yyyy","M","MM","d","dd","a","A","H","HH","h","hh","m","mm","s","ss"],i=[".","/","-",":"],s="0".charCodeAt(0),o="9".charCodeAt(0),u=[31,28,31,30,31,30,31,31,30,31,30],a=["am","pm","AM","PM","Am","Pm","aM","pM"];(f=n=t.DateProperty||(t.DateProperty={}))[f.YEAR=0]="YEAR",f[f.HALF=1]="HALF",f[f.QUARTER=2]="QUARTER",f[f.MONTH=3]="MONTH",f[f.WEEK=4]="WEEK",f[f.DAY=5]="DAY",f[f.HOUR=6]="HOUR";var f=(l.getSimpleDateNull=function(e){if(e instanceof Date)return e;if("number"==typeof e)return new Date(e);var t=(e=8===e.length&&/^[0-9]*$/.test(e)?e.replace(/(\d{4})(\d{2})(\d{2})/,"$1/$2/$3"):e).split(/[.//-]/);if(3!=t.length)return null;var n=parseInt(t[0]),r=parseInt(t[1])-1,t=parseInt(t[2]);return n==(e=new Date(n,r,t)).getFullYear()&&r==e.getMonth()&&t==e.getDate()?e:null},l.getDateProperty=function(e,t){if(!e)return null;switch(t){case n.YEAR:return e.getFullYear();case n.HALF:return 5<e.getMonth()?2:1;case n.QUARTER:return Math.floor(e.getMonth()/3);case n.MONTH:return e.getMonth();case n.WEEK:var r=new Date(e.getFullYear(),e.getMonth(),1);return r.setDate(r.getDate()-r.getDay()),Math.floor((e.getTime()-r.getTime())/6048e5)+1;case n.DAY:return e.getDate();case n.HOUR:return e.getHours()}},_dp(l,"format",{get:function(){return this._format},set:function(e){e!=this._format&&(this._format=e,this.parse(e))}}),l.prototype.getDate=function(e){var t;if(e=e.trim()){for(var n=this.parseDateFormatTokens(this._format),r=this.parseDateValueTokens(e,this._amText,this._pmText),i=n.length,s=r.length,o=0,u=1,a=1,f=0,l=0,c=0,h=0,d=0,v=0,m=0;v<i&&m<s;){var g=n[v],y=r[m];switch(g.charAt(0)){case"L":var b=String(y);for(v++;v<i&&"E"!=(e=n[v]);){var w=b?parseInt(b.substr(0,e.length)):-1,b=b.substr(e.length);switch(e.charAt(0)){case"Y":case"y":o=Math.max(0,w);break;case"M":u=0<=w?w:1;break;case"D":case"d":a=0<=w?w:1;break;case"H":case"h":f=Math.max(0,w);break;case"m":l=Math.max(0,w);break;case"s":c=Math.max(0,w)}v++}break;case"Y":case"y":o=parseInt(y);break;case"M":u=parseInt(y);break;case"D":case"d":a=parseInt(y);break;case"H":case"h":f=parseInt(y);break;case"m":l=parseInt(y);break;case"s":c=parseInt(y);break;case"a":(e=String(y))&&(e=e.toLowerCase(),this._amText&&e==this._amText.toLowerCase()||"am"==e?h=12:(this._pmText&&e==this._pmText.toLowerCase()||"pm"==e)&&(d=12))}v++,m++}if(o<100&&0<=o&&(o+=this._baseYear),o<0||9999<o)return null;if(p.Utils.included(u,1,3,5,7,8,10,12)){if(a<1||31<a)return null}else if(p.Utils.included(u,4,6,9,11)){if(a<1||30<a)return null}else{if(2!=u)return null;if(29<a)return null;if(29==a&&(o%4!=0||o%100==0)&&o%400!=0)return null}if(f<0||24<f)return null;if((0<h||0<d)&&12<f)return null;if(l<0||59<l)return null;if(c<0||59<c)return null;0<h?f%=12:0<d&&(f=f%12+12),t=new Date(o,u-1,a,f,l,c)}return t},l.prototype.getDateNull=function(e){try{return this.getDate(e)}catch(e){}return null},l.prototype.getText=function(e){var t=e;t instanceof Date||(t=new Date(e));for(var n=this.parseDateFormatTokens(this._format),r=0<=n.indexOf("a")||0<=n.indexOf("A"),i="",s=0,o=n.length;s<o;s++){var u,a=n[s],f=a.length;switch(a.charAt(0)){case"L":break;case"Y":case"y":i+=2<f?t.getFullYear():p.Utils.pad(t.getFullYear()%100);break;case"M":i+=1<f?p.Utils.pad(t.getMonth()+1):t.getMonth()+1;break;case"D":case"d":i+=1<f?p.Utils.pad(t.getDate()):t.getDate();break;case"H":i+=1<f?p.Utils.pad(t.getHours()):t.getHours();break;case"h":r?(0==(u=t.getHours())?u=12:12<u&&(u-=12),i+=1<f?p.Utils.pad(u):u):i+=1<f?p.Utils.pad(t.getHours()):t.getHours();break;case"m":i+=1<f?p.Utils.pad(t.getMinutes()):t.getMinutes();break;case"s":i+=1<f?p.Utils.pad(t.getSeconds()):t.getSeconds();break;case"A":case"a":t.getHours()<12?i+=this._amText:i+=this._pmText;break;default:i+=a}}return i},l.prototype.daysOfYear=function(e){for(var t,n=0,r=0;r<e.getMonth();r++)n+=u[r];return 2<=e.getMonth()&&((t=e.getFullYear())%400==0||t%4==0&&t%100!=0)&&n++,n+=e.getDate()},l.prototype.daysOfPriorYears=function(e){return e<=1900?0:365*(--e-1899)+(Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400)-460)},l.prototype.toExcelDate=function(e){var t=(1e3*(60*(60*e.getHours()+e.getMinutes())+e.getSeconds())+e.getMilliseconds())/864e5,t=this.daysOfPriorYears(e.getFullYear())+this.daysOfYear(e)+t;return 60<=t&&t++,t},l.prototype.parseDateFormatTokens=function(e){var t=[],n=e&&e.trim();if(n){for(var s=n.length,o=0;o<s;){var u=n.charAt(o);if(0<=i.indexOf(u))t.push(u),o++;else{for(var a=o++;o<s&&n.charAt(o)==u;)o++;if(u=n.substring(a,o),r.indexOf(u)<0)throw new Error("Invalid datetime read format: "+e);t.push("A"==u?"a":u)}if(o<s&&p.Utils.isWhiteSpace(u=n.charAt(o)))for(t.push(" ");o<s&&p.Utils.isWhiteSpace(n.charAt(o));)o++}for(var f=[],l=0,s=t.length,o=0;o<s;o++)"a"==(u=t[o])||r.indexOf(u)<0?(1<l&&f.push("E"),f.push(u),l=0):(1==l&&f.splice(f.length-2,0,"L"),f.push(u),l++);t=f}return t},l.prototype.parseDateValueTokens=function(e,t,n){var r=[],u=e.trim();if(u){var f=a.slice();t&&f.push(t),n&&f.push(n);for(var l=u.length,c=0;c<l;){var h=u.charAt(c);if(0<=i.indexOf(h))r.push(h),c++;else if(h.charCodeAt(0)>=s&&h.charCodeAt(0)<=o){for(var d=c++;c<l&&u.charCodeAt(c)>=s&&u.charCodeAt(c)<=o;)c++;h=u.substring(d,c),r.push(h)}else{for(var v=-1,m=0;m<f.length;m++)if(u.indexOf(f[m],c)==c){v=m;break}if(v<0)throw"Invalid date value: "+u;r.push(f[m]),c+=f[m].length}if(c<l&&p.Utils.isWhiteSpace(h=u.charAt(c)))for(r.push(" ");c<l&&p.Utils.isWhiteSpace(u.charAt(c));)c++}}return r},l.prototype.validateDateFormat=function(e){if(e=e&&e.trim()){var t=this.parseDateFormatTokens(e),n=0<=t.indexOf("a");if(n&&0<=t.indexOf("H"))throw"Invalid datetime read format - 'H'\uc640 'a'\uac00 \uac19\uc774 \uc874\uc7ac\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4: "+e;if(0<=t.indexOf("h")&&!n)throw"Invalid datetime read format - 'h'\uac00 \uc788\uc73c\uba74 'a'\uac00 \ubc18\ub4dc\uc2dc \uc788\uc5b4\uc57c \ud569\ub2c8\ub2e4: "+e}},l.prototype.parse=function(e){this._amText="am",this._pmText="pm",this._baseYear=2e3,e&&(e=e.split(";"),this._format=e[0]||l.DEFAULT_FORMAT,this.validateDateFormat(this._format),1<e.length&&e[1]&&(this._baseYear=parseInt(e[1])),2<e.length&&e[2]&&(e=e[2].split(","),this._amText=e[0]||"am",1<e.length&&(this._pmText=e[1]||"pm")))},l.Default=new l(l.DEFAULT_FORMAT="yyyy/MM/dd"),l);t.DateTimeConverter=f});t(_),_.DateProperty,_.DateTimeConverter;var D=n(function(e,t){function i(e){var t=n.call(this)||this;return t.fields=[],t.values=[],t.startIndex=0,t.wrap=!0,t.select=!0,t.allFields=!0,t.caseSensitive=!1,t.partialMatch=!1,e&&t.extend(e),t}function o(e){var t=s.call(this)||this;return t.fields=null,t.value=null,t.startIndex=0,t.startFieldIndex=0,t.wrap=!0,t.select=!0,t.caseSensitive=!1,t.partialMatch=!1,t.columns=null,t.compareCallback=null,e&&t.extend(e),t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i);t.SearchOptions=r;var s,r=(s=y.Base,l.__extends(o,s),o);t.SearchCellOptions=r});t(D),D.SearchOptions,D.SearchCellOptions;var P=n(function(e,t){function i(e){return n.call(this,e)||this}function o(){return s.call(this)||this}function a(){return u.call(this)||this}function c(e){var t=f.call(this)||this;return t._commands=[],t._current=-1,t._undoing=!1,t._redoing=!1,t._owner=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Error,l.__extends(i,n),i);t.EditCommandError=r;var s,r=(s=y.Base,l.__extends(o,s),o.prototype._doDispose=function(){},o.prototype.undo=function(){},o.prototype.redo=function(e){},o.prototype.execute=function(){return this.redo(!1)},o);t.EditCommand=r;var u,r=(u=r,l.__extends(a,u),a.prototype._doDispose=function(){u.prototype._doDispose.call(this)},a.prototype.undo=function(){},a.prototype.redo=function(e){},a.prototype.execute=function(){return this.redo(!1)},a);t.EditCommandGruop=r;var f,r=(f=x.EventAware,l.__extends(c,f),c.prototype._doDispose=function(){this._owner=null,this._commands=null,f.prototype._doDispose.call(this)},_dp(c,"owner",{get:function(){return this._owner}}),_dp(c,"length",{get:function(){return this._commands.length}}),_dp(c,"canUndo",{get:function(){return 0<=this._current}}),_dp(c,"canRedo",{get:function(){return this._commands.length>this._current+1}}),_dp(c,"undoing",{get:function(){return this._undoing}}),_dp(c,"redoing",{get:function(){return this._redoing}}),c.prototype.undo=function(){if(this.canUndo){var e=this._commands[this._current];this._undoing=!0;try{e.undo()}finally{this._undoing=!1}this._current=this._current-1,this._changed()}},c.prototype.redo=function(e){var t;if(this.canRedo){var n=this._current+1,r=this._commands[n];this._redoing=!0;try{t=r.redo(!0)}finally{this._redoing=!1}this._current=n,this._changed()}return t},c.prototype.execute=function(e){if(e){var t=e.execute();return this._current++,this._commands[this._current]=e,this.$_shrink(this._current+1),this._changed(),t}},c.prototype.flush=function(){var e=this._commands.length;if(0<e){for(;e--;)this._commands[e].dispose();this._commands=[],this._current=-1,this._changed()}},c.prototype._changed=function(){null!=this._owner&&this._owner.editCommandStackChanged(this,this.canUndo,this.canRedo)},c.prototype.$_shrink=function(e){if(0<=e&&e<this._commands.length){for(var t=this._commands.length-1;e<=t;t--)this._commands[t].dispose();this._commands.splice(e,this._commands.length-e)}},c);t.EditCommandStack=r});t(P),P.EditCommandError,P.EditCommand,P.EditCommandGruop,P.EditCommandStack;var H=n(function(e,t){function i(e){var t=n.call(this)||this;return t._ds=e,t}function o(e){return s.call(this,e)||this}function a(){return null!==u&&u.apply(this,arguments)||this}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=P.EditCommand,l.__extends(i,n),i.prototype._doDispose=function(){this._ds=null,this._save=null,n.prototype._doDispose.call(this)},i.prototype.redo=function(e){return e?this._doRedo(this._ds,this._save):this._save=this._doRun(this._ds),this._save&&this._save.result},i.prototype.undo=function(){this._doUndo(this._ds,this._save)},i.prototype._setSoftDeleting=function(e,t){e._softDeleting=t},i.prototype._setDeleteCreated=function(e,t){e._deleteCreated=t},i.prototype._cloneRow=function(e){if(p.Utils.isArray(e))return e.slice();if(e){var t,n={};for(t in e)n[t]=e[t];return n}},i.prototype._cloneValues=function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=-1),e){var r=e.length,i=[];n<0&&(n=r),t=Math.max(0,t);for(var s=Math.min(r,t+n),o=t;o<s;o++){var u=e[o];if(p.Utils.isArray(u))i.push(u.slice());else if(u){var a,f={};for(a in u)f[a]=u[a];i.push(f)}}return i}return null},i);t.DataEditCommand=r;var s,r=(s=r,l.__extends(o,s),o.prototype._doDispose=function(){s.prototype._doDispose.call(this)},o);t.LocalDataEditCommand=r;var u,r=(u=P.EditCommandStack,l.__extends(a,u),a);t.LocalDataCommandStack=r});t(H),H.DataEditCommand,H.LocalDataEditCommand,H.LocalDataCommandStack;var B=n(function(e,t){function i(e,t,r,i){return e=n.call(this,e)||this,e._row=t,e._field=r,e._value=i,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=H.LocalDataEditCommand,l.__extends(i,n),i.prototype._doRun=function(e){var t={};return t.row=e._keepRow(this._row),(t.result=e.$_setValue(this._row,this._field,this._value))&&(this._newState=e.getRowState(this._row)),t},i.prototype._doRedo=function(e,t){e.$_setValue(this._row,this._field,this._value)},i.prototype._doUndo=function(e,t){e._yieldRow(this._row,t.row),t.row.state!=this._newState&&e.fireRowStateChanged(this._row),e.fireValueChanged(this._row,this._field)},i);t.SetValueDataCommand=r});t(B),B.SetValueDataCommand;var j=n(function(e,t){function i(e,t,r,i){return e=n.call(this,e)||this,e._row=t,e._values=e._cloneRow(r),e._strict=i,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=H.LocalDataEditCommand,l.__extends(i,n),i.prototype._doDispose=function(){this._values=null,n.prototype._doDispose.call(this)},i.prototype._doRun=function(e){var t={};return t.row=e._keepRow(this._row),(t.result=e.$_updateRow(this._row,this._values,this._strict))&&(this._newState=e.getRowState(this._row)),t},i.prototype._doRedo=function(e,t){e.$_updateRow(this._row,this._values,this._strict)},i.prototype._doUndo=function(e,t){e._yieldRow(this._row,t.row),t.row.state!=this._newState&&e.fireRowStateChanged(this._row),e.fireRowUpdated(this._row)},i);t.UpdateRowDataCommand=r});t(j),j.UpdateRowDataCommand;var F=n(function(e,t){function i(e,t,r){var i=n.call(this,e)||this;return i._row=t,p.Utils.isArray(r)||(r=e.objectToRow(r)),i._values=r.slice(),i}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=H.LocalDataEditCommand,l.__extends(i,n),i.prototype._doRun=function(e){var t={};return t.result=e.$_insertRow(this._row,this._values),t},i.prototype._doRedo=function(e,t){e.$_insertRow(this._row,this._values)},i.prototype._doUndo=function(e,t){e.$_deleteRow(this._row)},i);t.InsertRowDataCommand=r});t(F),F.InsertRowDataCommand;var I=n(function(e,t){function i(e,t){return e=n.call(this,e)||this,e._row=t,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=H.LocalDataEditCommand,l.__extends(i,n),i.prototype._doRun=function(e){var t={};return this._softDeleting=e.softDeleting,t.row=e._keepRow(this._row),t.result=e.$_deleteRow(this._row),t},i.prototype._doRedo=function(e,t){var n=e.softDeleting;try{this._setSoftDeleting(e,this._softDeleting),e.$_deleteRow(this._row)}finally{this._setSoftDeleting(e,n)}},i.prototype._doUndo=function(e,t){e.$_insertRow(this._row,t.row.values),e._yieldStates(this._row,t.row),e._yieldCommandStates(this._row,t.row.outer)},i);t.RemoveRowDataCommand=r});t(I),I.RemoveRowDataCommand;var q=n(function(e,t){function i(e,t,r,i){return e=n.call(this,e)||this,e._row=t,e._state=r,e._force=i,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=H.LocalDataEditCommand,l.__extends(i,n),i.prototype._doRun=function(e){var t={};return t.row=e._keepStates(this._row),e.$_setRowState(this._row,this._state,this._force),t},i.prototype._doRedo=function(e,t){e.$_setRowState(this._row,this._state,this._force)},i.prototype._doUndo=function(e,t){e._yieldState(this._row,t.row),t.row.state!=this._state&&e.fireRowStateChanged(this._row)},i);t.SetRowStateDataCommand=r});t(q),q.SetRowStateDataCommand;var R=n(function(e,t){function i(e,t,r){return e=n.call(this,e)||this,e._row=t,e._state=r,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=H.LocalDataEditCommand,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},i.prototype._doRun=function(e){var t={};return t.state=e._keepState(this._row),e.$_changeRowState(this._row,this._state,!0,!0,!0),t},i.prototype._doRedo=function(e,t){e.$_changeRowState(this._row,this._state,!0,!0,!0)},i.prototype._doUndo=function(e,t){e._yieldState(this._row,t.state),t.state!=this._state&&e.fireRowStateChanged(this._row)},i);t.ChangeRowStateDataCommand=r});t(R),R.ChangeRowStateDataCommand;var U=n(function(e,t){function i(e,t,r){return e=n.call(this,e)||this,e._deleteRows=t,e._rowEvents=r,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=H.LocalDataEditCommand,l.__extends(i,n),i.prototype._doRun=function(e){var t={};return t.rows=[],t.orgValues=e._keepOrgValues(),e=e.$_clearRowStates(this._deleteRows,this._rowEvents,!0),t.rows=e.rows,t.states=e.states,t.values=e.values,t},i.prototype._doRedo=function(e,t){e.$_clearRowStates(this._deleteRows,this._rowEvents,!1)},i.prototype._doUndo=function(e,t){var n=t.rows,r=t.values,i=t.states,s=[];if(r)for(var o=0;o<n.length;o++)e.$_internalInsertRow(o,r[o],t.row,!0);if(i)for(o=0;o<i.length;o++)i[o]&&(e._yieldState(o,i[o]),i[o]!==d.RowState.NONE&&s.push(o));e._yieldOrgValues(t.rows),(0<n.length||0<i.length)&&e._fireRefresh()},i);t.ClearRowStatesDataCommand=r});t(U),U.ClearRowStatesDataCommand;var z=n(function(e,t){function i(e,t,r,i,s,o,u){return e=n.call(this,e)||this,e._row=t,e._values=e._cloneValues(r,i,s),e._start=0,e._count=e._values.length,e._rowEvents=o,e._strict=u,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=H.LocalDataEditCommand,l.__extends(i,n),i.prototype._doDispose=function(){this._values=null,n.prototype._doDispose.call(this)},i.prototype._doRun=function(e){var t={};return e.$_updateRows(this._row,this._values,this._start,this._count,this._strict,this._rowEvents,t),t},i.prototype._doRedo=function(e,t){e.$_updateRows(this._row,this._values,this._start,this._count,this._strict,this._rowEvents,null)},i.prototype._doUndo=function(e,t){var n=t.rows;if(!(n.length<1)){for(var r=t.values,i=t.states,s=t.orgValues,o=0;o<n.length;o++){var u=n[o];e.$_restoreRow(u,r[o],i[u],s[u])}e._fireRefresh()}},i);t.UpdateRowsDataCommand=r});t(z),z.UpdateRowsDataCommand;var W=n(function(e,t){function i(e,t,r){return e=n.call(this,e)||this,e._rows=t.slice(),e._rowEvents=r,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=H.LocalDataEditCommand,l.__extends(i,n),i.prototype._doRun=function(e){var t={};return this._softDeleting=e.softDeleting,e.$_removeRows(this._rows,this._rowEvents,t),t},i.prototype._doRedo=function(e,t){var n=e.softDeleting;try{this._setSoftDeleting(e,this._softDeleting),e.$_removeRows(this._rows,this._rowEvents,null)}finally{this._setSoftDeleting(e,n)}},i.prototype._doUndo=function(e,t){var n=t.rows,r=t.statedRows;if(!(n.length<1&&r.length<1)){for(var i=t.rowSaves,s=t.states,o=0;o<n.length;o++){var u=n[o],a=i[o];e.$_internalInsertRow(u,a.values,!0),e._yieldRow(u,a,!1)}for(o=0;o<r.length;o++)u=r[o],e._yieldState(u,s[o]);e._fireRefresh();for(o=0;o<n.length;o++){var u=n[o],f=i[o];e._yieldCommandStates(u,f.outer)}}},i);t.RemoveRowsDataCommand=r});t(W),W.RemoveRowsDataCommand;var X=n(function(e,t){function i(e,t,r,i,s,o){return e=n.call(this,e)||this,e._row=t,e._values=e._cloneValues(r,i,s),e._start=0,e._count=e._values.length,e._rowEvents=o,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=H.LocalDataEditCommand,l.__extends(i,n),i.prototype._doRun=function(e){return e.$_insertRows(this._row,this._values,this._start,this._count,this._rowEvents),{}},i.prototype._doRedo=function(e,t){e.$_insertRows(this._row,this._values,this._start,this._count,this._rowEvents)},i.prototype._doUndo=function(e,t){if(!this._rows){this._rows=[];for(var n=0;n<this._values.length;n++)this._rows.push(this._row+n)}var r=e.softDeleting;try{this._setSoftDeleting(e,!1),e.$_removeRows(this._rows,!1,null)}finally{this._setSoftDeleting(e,r)}},i);t.InsertRowsDataCommand=r});t(X),X.InsertRowsDataCommand;var V=n(function(e,t){function i(){return null!==n&&n.apply(this,arguments)||this}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.csvToArray=function(e,t,n,r,i,s){void 0===n&&(n=0),void 0===r&&(r=-1),void 0===i&&(i=!1),void 0===s&&(s=",");for(var o=[],u=[],a=t.length,f=0,l=[],c=!1,h=!1;f<a;){var p=t.charAt(f);'"'==p?c?h&&'"'==t.charAt(f+1)?(l.push(p),f++):h?(h=!1,i||l.push(p)):l.push(p):(c=h=!0,i||l.push(p)):h||p!=s&&"\r"!=p&&"\n"!=p?(c=!0,l.push(p)):(p==s?u.push(l.join("")):"\r"!=p&&"\n"!=p||(u.push(l.join("")),o.push(u),u=[],"\n"==t.charAt(f+1)&&f++),c=!(l=[])),f++}h&&l.splice(0,0,'"'),0<l.length&&u.push(l.join("")),0<u.length&&o.push(u),0<n&&(r<=0?o.splice(0,n):o=o.splice(n,r));for(var d=e.getFields(),v=d.length,m=0<v,g=0,y=o.length;g<y;g++){u=o[g],m&&u.length>v&&(u.length=v);for(var b=0;b<v;b++)u[b]=d[b].readValue(u[b])}return o},i.xmlToRow=function(e,t,n){for(var r=e.childNodes,i=t.length,s=new Array(i),o=0,u=r.length;o<u;o++){var a,f,l=r[o];0<=(a=n.indexOf(l.tagName))&&null!=(f=null==(f=l.nodeValue)&&l.hasChildNodes()?p.Utils.included(l.childNodes[0].nodeType,3,4)?l.childNodes[0].nodeValue:void 0:f)&&(s[a]=f)}for(var c,h,o=0;o<i;o++)void 0===s[o]&&(c=e,h=n[o],null!=(h=c&&c.getAttribute(h))&&(s[o]=h));return s},i.xmlToArray=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=-1);var s=null,o=i.xmlToRow,u=t?t.length:0;if(u&&(n=Math.max(0,n),r<0&&(r=u),r=Math.min(u-n,r)))for(var a=e.getFields(),f=e.getOrgFieldNames(),s=(a.length,new Array(r)),l=0;l<r;l++){var c=o(t[l+n],a,f);s[l]=c}return s},i);t.DataHelper=r});t(V),V.DataHelper;var $=n(function(e,t){function i(e,t,r){return e=n.call(this,e)||this,e._row=t,e._newRow=r,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=H.LocalDataEditCommand,l.__extends(i,n),i.prototype._doRun=function(e){e.$_moveRow(this._row,this._newRow)},i.prototype._doRedo=function(e,t){e.$_moveRow(this._row,this._newRow)},i.prototype._doUndo=function(e,t){e.$_moveRow(this._newRow,this._row)},i);t.MoveRowDataCommand=r});t($),$.MoveRowDataCommand;var J=n(function(e,t){function i(e,t,r,i){return e=n.call(this,e)||this,e._row=t,e._count=r,e._newRow=i,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=H.LocalDataEditCommand,l.__extends(i,n),i.prototype._doRun=function(e){e.$_moveRows(this._row,this._count,this._newRow)},i.prototype._doRedo=function(e,t){e.$_moveRows(this._row,this._count,this._newRow)},i.prototype._doUndo=function(e,t){e.$_moveRows(this._newRow,this._count,this._row)},i);t.MoveRowsDataCommand=r});t(J),J.MoveRowsDataCommand;var K=n(function(e,t){function i(e,t,r){var i=n.call(this,e)||this;i._rows=t,i._newRows=t.slice();for(var s=r-t[0],o=0;o<t.length;o++)i._newRows[o]+=s;return i}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=H.LocalDataEditCommand,l.__extends(i,n),i.prototype._doRun=function(e){var t={};return t.result=e.$_moveRowList(this._rows,this._newRows[0]),t},i.prototype._doRedo=function(e,t){return e.$_moveRowList(this._rows,this._newRows[0])},i.prototype._doUndo=function(e,t){return e.$_moveRowList(this._newRows,this._rows[0])},i);t.MoveRowListDataCommand=r});t(K),K.MoveRowListDataCommand;var Q=n(function(e,t){function i(e,t,r,i){return e=n.call(this,e)||this,e._rows=t.slice(),e._fields=r.slice(),e._value=i,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=H.LocalDataEditCommand,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},i.prototype._doRun=function(e){var t={};return e.$_fillValue(this._rows,this._fields,this._value,t),t},i.prototype._doRedo=function(e,t){e.$_fillValue(this._rows,this._fields,this._value,null)},i.prototype._doUndo=function(e,t){var n=t.rows;if(!(n.length<1)){for(var r=t.values,i=t.states,s=t.orgValues,o=0;o<n.length;o++){var u=n[o];e.$_restoreRow(u,r[o],i[u],s[u])}e._fireRefresh()}},i);t.FillValueDataCommand=r});t(Q),Q.FillValueDataCommand;var G=n(function(e,t){function i(e,t,r,i,s){void 0===r&&(r=!1),void 0===i&&(i=null),void 0===s&&(s=d.RowState.NONE);var o=n.call(this,e)||this;return o._newCount=t,o._oldCount=e.rowCount,o._fillDefaults=r,o._defaultValues=i,o._rowState=s,o}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=H.LocalDataEditCommand,l.__extends(i,n),i.prototype._doRun=function(e){var t={};return e.$_setRowCount(this._newCount,this._fillDefaults,this._defaultValues,this._rowState,t),t},i.prototype._doRedo=function(e,t){e.$_setRowCount(this._newCount,this._fillDefaults,this._defaultValues,this._rowState,null)},i.prototype._doUndo=function(e,t){if(this._oldCount<this._newCount)e.$_setRowCount(this._oldCount);else if(this._oldCount>this._newCount){var n=t.rows,r=t.statedRows;if(!(n.length<1&&r.length<1)){for(var i=t.rowSaves,s=t.states,o=0;o<n.length;o++){var u=n[o],a=i[o];e.$_internalInsertRow(u,a.values,!0),e._yieldRow(u,a,!1)}for(o=0;o<r.length;o++)u=r[o],e._yieldState(u,s[o]);e._fireRefresh();for(o=0;o<n.length;o++){var u=n[o],f=i[o];e._yieldCommandStates(u,f.outer)}}}},i);t.setRowCountDataCommand=r});t(G),G.setRowCountDataCommand;var Y=n(function(e,t){function i(e,t){var r=n.call(this)||this;return r._points=[],r._nextPoint=0,r._values=[],r._rowIds=[],r._rowStates=[],r._orgValues=null,r._needRestore=!1,r._deletedCount=0,r._nextRowId=0,r._hiddenIds=[],r.$_handler=t,e&&(r.undoable=!0,r._commands=new H.LocalDataCommandStack(r)),r}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=M.DataProvider,l.__extends(i,n),i.prototype._doDispose=function(){this._commands=this._commands&&this._commands.dispose(),this._values=null,this._rowIds=null,this._rowStates=null,this._points=null,this._orgValues=null,this._hiddenIds=null,n.prototype._doDispose.call(this)},_dp(i,"handler",{get:function(){return this.$_handler}}),_dp(i,"undoable",{get:function(){return this._undoable&&!!this._commands},set:function(e){e!=this.undoable&&(this._undoable=e,this._commands&&this._commands.flush())}}),i.prototype.getDataRow=function(e){return this._rowIds.indexOf(e)},_dp(i,"rowCount",{get:function(){return this._values.length}}),_dp(i,"isSummarized",{get:function(){return!0}}),_dp(i,"deletedCount",{get:function(){return this._deletedCount}}),_dp(i,"canUndo",{get:function(){return this._commands&&this._commands.canUndo}}),_dp(i,"canRedo",{get:function(){return this._commands&&this._commands.canRedo}}),_dp(i,"undoing",{get:function(){return this._commands&&this._commands.undoing}}),_dp(i,"redoing",{get:function(){return this._commands&&this._commands.redoing}}),i.prototype.getRowId=function(e){return this._rowIds[e]},i.prototype.$_internalInsertField=function(e,t){if(0<=(e=n.prototype.$_internalInsertField.call(this,e,t))){for(var r=this._values.length,i=0;i<r;i++)(s=this._values[i])&&s.splice(e,0,void 0);if(this._orgValues)for(var s,r=Math.min(r,this._orgValues.length),i=0;i<r;i++)(s=this._orgValues[i])&&s.splice(e,0,void 0)}return e},i.prototype.$_internalClearFields=function(){n.prototype.$_internalClearFields.call(this),this.$_clearRows()},i.prototype.setRowCount=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=d.RowState.NONE),this.undoable?this._commands.execute(new G.setRowCountDataCommand(this,e,t,n,r)):this.$_setRowCount(e,t,n,r)},i.prototype.$_setRowCount=function(e,t,n,r,i){if(void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=d.RowState.NONE),void 0===i&&(i=null),this._checkClientState()){var s=this._values,o=s.length,u=Math.max(0,e);if(u!=o){var a=this._rowIds,f=this._rowStates;if(this.refreshFieldFormats(),i&&(i.rows=[],i.rowSaves=[],i.statedRows=[],i.states=[]),o<u&&(t||n)){var l=this.fieldCount,c=n;if((c=!c||c instanceof Array?c:this.objectToRow(c))&&c.length<1&&(c=null),t||c)for(var h=c?Math.min(c.length,l):0,p=o;p<u;p++){var v=[];if(t)for(var m=0;m<l;m++){var g=this.getField(m);v[m]=void 0!==g.defaultValue?g.defaultValue:g.nullValue}if(0<h)for(m=0;m<h;m++){var y=c[m];void 0!==y&&(v[m]=this.getField(m).readValue(y))}s[p]=v}}else if(o<u)for(p=o;p<u;p++)s[p]=[];else if(u<o){if(i)for(p=u;p<o;p++){var b=p;i.statedRows.push(b),i.states.push(f[p]),i.rows.push(b),i.rowSaves.push(this._keepRow(b))}if(0<this._deletedCount)for(p=o-1;u<=p;p--)d.isDeletedState(f[p])&&this._deletedCount--}r=this.checkStates&&r?r:d.RowState.NONE,s.length=a.length=f.length=u,this._orgValues&&this._orgValues.length>u&&(this._orgValues.length=u);for(p=o;p<u;p++)f[p]=r,a[p]=this._nextRowId++;for(p=this._hiddenIds.length-1;0<=p;p--)m=this._hiddenIds[p],a.indexOf(m)<0&&this._hiddenIds.splice(p,1);this.tags.setRowCount(u),this._fireRefresh(),this._fireRowCountChanged()}}},i.prototype.$_clearRows=function(){this._values.length=0,this._values=[],this._rowIds.length=0,this._rowIds=[],this._rowStates.length=0,this._rowStates=[],this._hiddenIds.length=0,this._hiddenIds=[],this._orgValues?(this._orgValues.length=0,this._orgValues=[]):this._orgValues=null,this._deletedCount=0,this.clearCommandStack(),this.tags.clearRows()},i.prototype.clearRows=function(){this._checkClientState()&&(this.$_clearRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated())},i.prototype.setRows=function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=-1),this._checkClientState()&&0!=n){this.refreshFieldFormats(),this.beginUpdate();try{this.$_clearRows();var r=this.checkStates,i=this.filters,s=this.filterRuntime,o=void 0;if(e&&0<(o=e.length)&&t<o)if(t=Math.max(0,t),n=n<0?o:Math.min(n,o-t),i){this._values.length=this._rowIds.length=this._rowStates.length=n,i.prepare(s,this);for(var u=o,a=0,f=0,l=t;l<u&&a<n;l++)(c=e[l])instanceof Array||(c=this.objectToRow(c)),i.select(s,f++,c)&&this.$_internalSetRow(a++,c,r);this._values.length=this._rowIds.length=this._rowStates.length=a}else if(t<(u=Math.min(o,t+n))){this._values.length=this._rowIds.length=this._rowStates.length=u-t;for(var c,a=0,l=t;l<u;l++)(c=e[l])instanceof Array||(c=this.objectToRow(c)),this.$_internalSetRow(a++,c,r)}}finally{this.endUpdate(!1),this.clearCommandStack()}this.tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated()}},i.prototype.setXmlRows=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=-1),this._checkClientState()&&0!=n&&(e=V.DataHelper.xmlToArray(this,e,t,n),this.setRows(e))},i.prototype.insertRows=function(e,t,n,r,i){void 0===n&&(n=0),void 0===r&&(r=-1),void 0===i&&(i=!1),this.undoable?this._commands.execute(new X.InsertRowsDataCommand(this,e,t,n,r,i)):this.$_insertRows(e,t,n,r,i)},i.prototype.$_insertRows=function(e,t,n,r,i){if(this._checkClientState()&&t){var s=t.length;if(!(s<1)&&0!=(r=r<0?s:Math.min(s,r))){if(e<0||e>this._values.length)throw new L.DataSourceError("row is out of bounds:"+e);this.refreshFieldFormats(),n=Math.max(0,n);var o=Math.min(s,n+r);if(i)for(var u=e,a=n;a<o;a++)(f=t[a])instanceof Array||(f=this.objectToRow(f)),this.fireRowInserting(u,f)&&(this.$_internalInsertRow(u,f,!0),this.fireRowInserted(u),this._fireRowCountChanged(),u++);else{for(var f,u=e,a=n;a<o;a++,u++)(f=t[a])instanceof Array||(f=this.objectToRow(f)),this.$_internalInsertRow(u,f,!1);this.tags.insertRows(e,r=o-n),this.fireRowsInserted(e,r),this._fireRowCountChanged()}}}},i.prototype.appendRows=function(e,t,n,r){this.insertRows(this.rowCount,e,t=void 0===t?0:t,n=void 0===n?-1:n,r=void 0===r?!1:r)},i.prototype.insertRowsFrom=function(e,t,n,r){for(var i=[],s=0,o=n;s<o.length;s++){var u=o[s];i.push(e.getRowObject(u))}if(t)for(var a=n.length-1;0<=a;a--)i[a]=this._convertValues(i[a],t);this.insertRows(r,i)},i.prototype.appendRowsFrom=function(e,t,n){this.insertRowsFrom(e,t,n,this.rowCount)},i.prototype.insertXmlRows=function(e,t,n,r,i){void 0===n&&(n=0),void 0===r&&(r=-1),void 0===i&&(i=!1),this._checkClientState()&&(t=V.DataHelper.xmlToArray(this,t,n,r),this.insertRows(e,t,0,-1,i))},i.prototype.appendXmlRows=function(e,t,n,r){this.insertXmlRows(this.rowCount,e,t,n,r=void 0===r?!1:r)},i.prototype.fillValue=function(e,t,n){if(this.undoable)return this._commands.execute(new Q.FillValueDataCommand(this,e,t,n));this.$_fillValue(e,t,n)},i.prototype.updateRows=function(e,t,n,r,i,s){if(void 0===s&&(s=!1),this.undoable)return this._commands.execute(new z.UpdateRowsDataCommand(this,e,t,n,r,s,i));this.$_updateRows(e,t,n,r,i,s)},i.prototype.updateXmlRows=function(e,t,n,r,i){void 0===i&&(i=!1),this._checkClientState()&&(t=V.DataHelper.xmlToArray(this,t,n,r),this.updateRows(e,t,0,-1,i))},i.prototype.getValue=function(e,t){return this.$_checkRowIndex(e),this._checkFieldIndex(t),e=this._values[e],e?e[t]:void 0},i.prototype.setValue=function(e,t,n){return this.undoable?this._commands.execute(new B.SetValueDataCommand(this,e,t,n)):this.$_setValue(e,t,n)},i.prototype.$_setValue=function(e,t,n){if(!this._checkClientState())return!1;this.$_checkRowIndex(e),this._checkFieldIndex(t);var r=this.getField(t),i=this._rowStates[e];if(!r)throw new L.DataSourceError("Invalid field: "+t);if(!!r.updatable||i!=d.RowState.NONE&&i!=d.RowState.UPDATED){var s,o=this._values[e],n=r.readValue(n);return o&&r.equalValues(n,o[t])?!1:(this.refreshFieldFormat(r),i=this.checkStates&&(i==d.RowState.NONE||!i),o||(this._values[e]=o=new Array(this.fieldCount)),i&&this._orgValues&&(s=o.concat()),o[t]=n,this._internalCalculateValues(o,e),i?(s&&(this._orgValues[e]=s),this.$_changeRowState(e,d.RowState.UPDATED,!0)):this._needRestore&&this.restoreState(e),this.tags.setValue(e,t),this.fireValueChanged(e,t),!0)}return!1},i.prototype.updateRow=function(e,t,n){return this.undoable?this._commands.execute(new j.UpdateRowDataCommand(this,e,t,n)):this.$_updateRow(e,t,n)},i.prototype.getRow=function(e){return this.$_checkRowIndex(e),e=this._values[e],e?e.slice():[]},i.prototype.getRows=function(e,t){void 0===e&&(e=0),void 0===t&&(t=-1);var n=this._values.length,r=Math.max(0,e),t=t<0?n-1:Math.min(n-1,t);if(n<=r||t<r)return[];for(var i=t-r+1,s=new Array(i),o=0;o<i;o++)s[o]=this._values[o+r]?this._values[o+r].slice():[];return s},i.prototype.getRowObject=function(e,t){return this.$_checkRowIndex(e),this.$_getRowObject(e,t)},i.prototype.getRowObjects=function(e,t,n){void 0===e&&(e=0),void 0===t&&(t=-1);var r=this._values.length,i=Math.max(0,e),t=t<0?r-1:Math.min(r-1,t);if(r<=i||t<i)return[];for(var s=t-i+1,o=new Array(s),u=0;u<s;u++)o[u]=this.$_getRowObject(u+i,n);return o},i.prototype.getOutputObject=function(e,t){var n=this.getRowObject(t,null==e?void 0:e.rowState);return e&&this.$_createOutputRows([n],e,t),n},i.prototype.getOutputObjects=function(e,t,n){return n=this.getRowObjects(t=void 0===t?0:t,n=void 0===n?-1:n,null==e?void 0:e.rowState),e&&this.$_createOutputRows(n,e,t),n},i.prototype.getFieldValues=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=-1),this._checkFieldIndex(e);var r=this._values.length;if(n=n<0?r-1:Math.min(r-1,n),r<=(t=Math.max(0,t))||n<t)return null;for(var i=new Array(n-t+1),s=t;s<=n;s++){var o=this._values[s];i[s-t]=o&&o[e]}return i},i.prototype.hasData=function(e){return 0<=e&&e<this._values.length&&void 0!==this._values[e]},i.prototype.insertRow=function(e,t){return this.undoable?this._commands.execute(new F.InsertRowDataCommand(this,e,t)):this.$_insertRow(e,t)},i.prototype.$_insertRow=function(e,t,n){if(void 0===n&&(n=void 0),!this._checkClientState())return!1;if(e<0||e>this._values.length)throw new L.DataSourceError("row is out of bounds:"+e);return this.refreshFieldFormats(),!!t&&!!this.fireRowInserting(e,t)&&(p.Utils.isArray(t)||(t=this.objectToRow(t)),this.$_internalInsertRow(e,t,!0),n&&this._yieldStates(e,n),this.fireRowInserted(e),this._fireRowCountChanged(),!0)},i.prototype.appendRow=function(e){var t=this.rowCount;return this.insertRow(t,e)?t:-1},i.prototype.removeRow=function(e){if(this.undoable){if(this.softDeleting&&this.checkStates)switch(this._rowStates[e]){case d.RowState.CREATED:if(!this.deleteCreated)return this._commands.execute(new R.ChangeRowStateDataCommand(this,e,d.RowState.CREATE_AND_DELETED));break;case d.RowState.DELETED:case d.RowState.CREATE_AND_DELETED:break;default:return this._commands.execute(new R.ChangeRowStateDataCommand(this,e,d.RowState.DELETED))}return this._commands.execute(new I.RemoveRowDataCommand(this,e))}return this.$_removeRow(e)},i.prototype.$_removeRow=function(e){if(!this._checkClientState())return!1;if(this.$_checkRowIndex(e),this.softDeleting&&this.checkStates){switch(this._rowStates[e]){case d.RowState.CREATED:this.deleteCreated?this.$_deleteRow(e):this.$_changeRowState(e,d.RowState.CREATE_AND_DELETED,!0,!0,!0);break;case d.RowState.DELETED:case d.RowState.CREATE_AND_DELETED:break;default:this.$_changeRowState(e,d.RowState.DELETED,!0,!0,!0)}return!0}return this.$_deleteRow(e)},i.prototype.removeRows=function(e,t){void 0===t&&(t=!1),this.undoable?this._commands.execute(new W.RemoveRowsDataCommand(this,e,t)):this.$_removeRows(e,t,null)},i.prototype.$_removeRows=function(e,t,n){if(this._checkClientState()){var r,i=this.deleteCreated;if(e&&!((r=e.length)<1)){if(e=e.slice(),n&&(n.rows=[],n.rowSaves=[],n.statedRows=[],n.states=[]),this.softDeleting&&this.checkStates){for(var s=t?null:[],o=r;o--;){var u=e[o],a=this._rowStates[u],f=!1;switch(this.$_checkRowIndex(u),a){case d.RowState.CREATED:i||(n&&(n.statedRows.push(u),n.states.push(a)),f=this.$_changeRowState(u,d.RowState.CREATE_AND_DELETED,t,!1,!0),e.splice(o,1));break;case d.RowState.DELETED:case d.RowState.CREATE_AND_DELETED:e.splice(o,1);break;default:n&&(n.statedRows.push(u),n.states.push(a)),f=this.$_changeRowState(u,d.RowState.DELETED,t,!1,!0),e.splice(o,1)}s&&f&&s.push(u)}t||s&&0<s.length&&this.fireRowStatesChanged(s)}if(0<(r=e.length)){if(1<r&&e.sort(function(e,t){return e-t}),n)for(o=0;o<r;o++)u=e[o],n.rows.push(u),n.rowSaves.push(this._keepRow(u));if(t)for(o=r;o--;)u=e[o],this.$_checkRowIndex(u),this.$_deleteRow(u);else if(this.fireRowsRemoving(e)){for(o=r;o--;)u=e[o],a=this._rowStates[u],this.$_checkRowIndex(u),this.$_internalRemoveRow(u),d.isDeletedState(a)&&this._deletedCount--;this.tags.removeRows(e),this.fireRowsRemoved(e),this._fireRowCountChanged()}}}}},i.prototype.moveRow=function(e,t){if(e!=t)return this.undoable?this._commands.execute(new $.MoveRowDataCommand(this,e,t)):void this.$_moveRow(e,t)},i.prototype.$_moveRow=function(e,t){this._checkClientState()&&(this.$_checkRowIndex(e),this.$_checkRowIndex(t),this.fireRowMoving(e,t)&&(this.$_internalMoveRow(e,t),this.tags.moveRow(e,t),this.fireRowMoved(e,t)))},i.prototype.moveRows=function(e,t,n){if(!(t<1||e==n))return this.undoable?this._commands.execute(new J.MoveRowsDataCommand(this,e,t,n)):void this.$_moveRows(e,t,n)},i.prototype.$_moveRows=function(e,t,n){this._checkClientState()&&(this.$_checkRowIndex(e),this.$_checkRowIndex(n),this.fireRowsMoving(e,t,n)&&(this.$_internalMoveRows(e,t,n),this.tags.moveRows(e,t,n),this.fireRowsMoved(e,t,n)))},i.prototype.moveRowList=function(e,t){if(e&&!(e.length<1))return e=e.sort(function(e,t){return e-t}),this.undoable?this._commands.execute(new K.MoveRowListDataCommand(this,e,t)):this.$_moveRowList(e,t)},i.prototype.$_moveRowList=function(e,t){if(this._checkClientState()){var n=e[0];return this.$_checkRowIndex(n),this.$_checkRowIndex(t),this.fireRowListMoving(e,t)?(this.$_internalMoveRowList(e,t),this.tags.moveRowList(e,t),this.fireRowListMoved(e,t),!0):void 0}},i.prototype.getRowState=function(e){return this.$_checkRowIndex(e),this._rowStates[e]||d.RowState.NONE},i.prototype.$_checkDeleted=function(e,t){d.isDeletedState(t)?this._deletedCount++:d.isDeletedState(e)&&!d.isDeletedState(t)&&this._deletedCount--},i.prototype.setRowState=function(e,t,n){return this.undoable?this._commands.execute(new q.SetRowStateDataCommand(this,e,t,n)):this.$_setRowState(e,t,n)},i.prototype.$_setRowState=function(e,t,n){this._checkClientState()&&(this.$_checkRowIndex(e),this._orgValues?this.$_changeRowStateEx(e,t,!0,n,!1):this.$_changeRowState(e,t,!0,n))},i.prototype.setRowStates=function(e,t,n,r){var i;if((void 0===r&&(r=!1),this._checkClientState())&&e&&!((i=e.length)<1))if(r)for(var s=0;s<i;s++){var o=e[s];this.$_checkRowIndex(o),this.$_changeRowStateEx(o,t,!0,n,!1)}else{for(var u=[],a=this._rowStates,s=0;s<i;s++){var f=a[o=e[s]];this.$_checkRowIndex(o),t!=f&&(a[o]=t,u.push(o),this.$_checkDeleted(f,t),this._orgValues&&this.prepareOrgValues(o,f,t))}0<u.length&&this.fireRowStatesChanged(u)}},i.prototype.clearRowStates=function(e,t){void 0===t&&(t=!1),this.undoable?this._commands.execute(new U.ClearRowStatesDataCommand(this,e,t)):this.$_clearRowStates(e,t)},i.prototype.$_clearRowStates=function(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),this._checkClientState()){for(var r=[],i=n?[]:null,s=n?[]:null,o=this._rowStates.length;o--;){var u,a=this._rowStates[o];switch(i&&(i[o]=a),s&&(s[o]=null),a){case d.RowState.CREATE_AND_DELETED:case d.RowState.DELETED:e?(r.push(o),!s||(u=this._keepRow(o))&&(s[o]=u.values),t?this.$_deleteRow(o):(this.$_internalRemoveRow(o),this.tags.removeRow(o),this._deletedCount--)):(this.$_changeRowState(o,d.RowState.NONE,t),this._deletedCount--);break;default:this.$_changeRowState(o,d.RowState.NONE,t)}}return this.$_resetOrgValues(),t||(0<r.length&&(this.fireRowsRemoved(r),this._fireRowCountChanged()),this.fireRowStatesCleared()),n?{rows:r,states:i,values:s}:void 0}},i.prototype.$_restoreStates=function(e,t){this.fireRowStatesChanged(e)},i.prototype.getStateRows=function(e){var t=[];if(e)for(var n=0,r=this._rowStates.length;n<r;n++)this._rowStates[n]==e&&t.push(n);return t},i.prototype.getAllStateRows=function(){for(var e={},t=e[d.RowState.CREATED]=[],n=e[d.RowState.UPDATED]=[],r=e[d.RowState.DELETED]=[],i=e[d.RowState.CREATE_AND_DELETED]=[],s=0,o=this._rowStates.length;s<o;s++){var u=this._rowStates[s];u===d.RowState.CREATED?t.push(s):u===d.RowState.UPDATED?n.push(s):u===d.RowState.DELETED?r.push(s):u===d.RowState.CREATE_AND_DELETED&&i.push(s)}return e},i.prototype.getRowStateCount=function(e){var t=e?e.length:0,n=this._rowStates.length,r=0;if(t&&n)if(1<t)for(var i=0;i<n;i++){var s=this._rowStates[i];0<=e.indexOf(s)&&r++}else for(s=e[0],i=0;i<n;i++)this._rowStates[i]===s&&r++;return r},i.prototype.$_restoreState=function(e){if(this._rowStates[e]===d.RowState.UPDATED){var t=this._orgValues[e];if(t){for(var n=this._values[e],r=this.strictRestore,i=0,s=this.fieldCount;i<s;i++){var o=n.length>i?n[i]:void 0,u=t.length>i?t[i]:void 0,a=this.getField(i);if(r){if(!a.equalValues(o,u))return!1}else if(!a.sameValues(o,u))return!1}return this._rowStates[e]=d.RowState.NONE,!0}}return!1},i.prototype.restoreUpdatedStates=function(e){if(this._orgValues&&this._checkClientState()){var t=[];if(null!=e)for(var n=0,r=e.length;n<r;n++){var i=e[n];0<=i&&i<this._values.length&&this.$_restoreState(i)&&t.push(i)}else for(n=0,r=this._values.length;n<r;n++)this.$_restoreState(n)&&t.push(n);0<t.length&&this.fireRowStatesChanged(t)}},i.prototype.$_restoreUpdatedRow=function(e){if(this._rowStates[e]===d.RowState.UPDATED){var t=this._orgValues[e];if(t){for(var n=this._values[e],r=0,i=Math.min(t.length,this.fieldCount);r<i;r++)n[r]=t[r];return this._rowStates[e]=d.RowState.NONE,!0}}return!1},i.prototype.$_restoreRow=function(e,t,n,r){this._values[e]=t.slice(),this._rowStates[e]=n,this._orgValues&&(this._orgValues[e]=r&&r.slice())},i.prototype.restoreUpdatedRows=function(e){if(this._orgValues&&this._checkClientState()){var t=[];if(null!=e)for(var n=0,r=e.length;n<r;n++){var i=e[n];0<=i&&i<this._values.length&&this.$_restoreUpdatedRow(i)&&t.push(i)}else for(n=0,r=this._values.length;n<r;n++)this.$_restoreUpdatedRow(n)&&t.push(n);0<t.length&&(this.fireRestoreRows(t),this.fireRowStatesChanged(t))}},i.prototype.getUpdatedCells=function(e){var t=this.restoreMode;if(!this._orgValues||t!=E.RestoreMode.AUTO&&t!=E.RestoreMode.EXPLICIT)return null;if(null==(e=null==e?this.getStateRows(d.RowState.UPDATED):e))return null;for(var n=[],r=0,i=e.length;r<i;r++){var s=e[r],o=0<=s&&this._orgValues&&s<this._orgValues.length?this._orgValues[s]:null;if(o){for(var u=this._values[s],a=this.strictRestore,f=[],l=0,c=this.fieldCount;l<c;l++){var h=u.length>l?u[l]:void 0,p=o.length>l?o[l]:void 0,v=this.getField(l);v.calculated||(a?v.equalValues(h,p)||f.push({fieldName:this.getOrgFieldName(l),oldValue:o[l],newValue:u[l]}):v.sameValues(h,p)||f.push({fieldName:this.getOrgFieldName(l),oldValue:o[l],newValue:u[l]}))}0<f.length&&n.push({__rowId:s,updatedCells:f})}}return n},i.prototype._doRestoreModeChanged=function(){this.$_resetOrgValues()},i.prototype.findRow=function(e,t,n){if(void 0===n&&(n=0),e.length<1||t.length<e.length)return-1;for(var r=[],i=[],s=this._values,o=0,u=e.length;o<u;o++){var a=void 0;0<=(a="string"==typeof e[o]?this.getFieldIndex(e[o]):Number(e[o]))&&a<this.fieldCount&&r.indexOf(a)<0&&(r.push(a),i.push(t[o]))}for(var f=r.length,o=0;o<f;o++)r[o]=this.getField(r[o]);for(o=n,u=s.length;o<u;o++){for(var l=s[o],c=!0,a=0;a<f;a++)if(!r[a].equalValues(i[a],l[a])){c=!1;break}if(c)return o}return-1},i.prototype.savePoint=function(e){if(void 0===e&&(e=!0),this._checkClientState()){var t=this._values,n=this.fieldCount,r=t?t.length:0;if(0<n&&0<r){for(var i=new Array(r),s=0;s<r;s++){var o=t[s]&&t[s].concat();i[s]=o}return n=e?this._rowStates.concat():null,e=this._nextPoint++,this._points.push({id:e,data:i,states:n}),e}return-1}},i.prototype.rollback=function(e){if(this._checkClientState())for(var t=this._points.length-1;0<=t;t--){var n=this._points[t];if(n.id==e){this.$_removeSavePoints(t+1),this.setRows(n.data),n=n.states,n&&(this._rowStates=n.concat());break}}},i.prototype.$_removeSavePoints=function(e){for(var t=this._points,n=t.length-1;e<=n;n--)t[n].data=null,t.pop()},i.prototype.clearSavePoints=function(){this.$_removeSavePoints(0)},i.prototype.getSavePoints=function(){for(var e=[],t=0,n=this._points.length;t<n;t++)e.push(this._points[t].id);return e},i.prototype.canUpdateRow=function(e){return this._rowStates[e]!==d.RowState.NONE||!!this.updatable},i.prototype.canAppendRow=function(){return!0},i.prototype.canInsertRow=function(e){return!0},i.prototype.canDeleteRow=function(e){return!0},i.prototype.getDistinctValues=function(e,t,n){if(void 0===t&&(t=-1),void 0===n&&(n=c.SortDirection.ASCENDING),t=1<arguments.length?t:-1,this._checkFieldIndex(e),0<(t=t<0?this._values.length:t)){for(var r=this.getField(e).dataType,i=[],s=[],o=void 0,u=0,a=this.rowCount;u<a;u++)switch(o=this._values[u]?this._values[u][e]:void 0,r){case c.ValueType.NUMBER:null!=o&&isNaN(o)||i.indexOf(o)<0&&i.push(o);break;case c.ValueType.DATE:case c.ValueType.DATETIME:o?s.indexOf(o.getTime())<0&&(s.push(o.getTime()),i.push(o)):s.indexOf(void 0)<0&&(s.push(void 0),i.push(void 0));break;case c.ValueType.OBJECT:default:i.indexOf(o)<0&&i.push(o)}return n!==c.SortDirection.NONE&&(i=p.Utils.included(r,c.ValueType.DATETIME,c.ValueType.DATE,c.ValueType.NUMBER)?i.sort(function(e,t){return e-t}):i.sort(),n===c.SortDirection.DESCENDING&&(i=i.reverse())),i.slice(0,t)}return null},i.prototype.compareValues=function(e,t,n,r){return t=this._values[t],n=this._values[n],t===n?0:(t=t?t[e]:null,e=n?n[e]:null,null==t?null==e?0:-1:null==e?1:(t=r?String(t).toLowerCase():t,(e=r?String(e).toLowerCase():e)<t?1:t<e?-1:0))},i.prototype.compareTexts=function(e,t,n){return this.compareValues(e,t,n,!0)},i.prototype.compareNumbers=function(e,t,n){return t=this._values[t],n=this._values[n],t===n?0:(t=t?t[e]:NaN,e=n?n[e]:NaN,isNaN(t)?isNaN(e)?0:-1:isNaN(e)||e<t?1:t<e?-1:0)},i.prototype.compareDates=function(e,t,n){return t=this._values[t],n=this._values[n],t===n?0:(t=t?t[e]:null,e=n?n[e]:null,t instanceof Date?!(e instanceof Date)||e<t?1:t<e?-1:0:e instanceof Date?-1:0)},i.prototype.compareBools=function(e,t,n){return t=this._values[t],n=this._values[n],t===n?0:(t=!!t&&Boolean(t[e]),e=!!n&&Boolean(n[e]),t&&!e?1:!t&&e?-1:0)},i.prototype.compareObjects=function(e,t,n){var r=this._values[t],i=this._values[n];return r===i?0:(r=r?r[e]:null,i=i?i[e]:null,r?i?this.getField(e).$_compareObject(r,i,t,n):1:i?-1:0)},i.prototype.summarize=function(e,t){if(null==e)return!1;e.clear();var n=this.rowCount;if(n<1)return!1;for(var r=0,i=e.field,s=0,o=NaN,u=NaN,a=0;a<n;){var f=(p=this._values[a++])?null==p[i]?void 0:p[i]:NaN;if(!isNaN(f)){s=o=u=f,r++;break}}for(;a<n;)f=(p=this._values[a++])?null==p[i]?void 0:p[i]:NaN,isNaN(f)||(s+=f,f<o&&(o=f),u<f&&(u=f),r++);if(e.count=n,0<r)if(e.sum=s,e.min=o,e.max=u,e.avg=s/n,e.dataCount=r,e.dataAvg=s/r,t){for(var l=0,c=e.avg,h=0;h<n;h++){var p,f=(p=this._values[h])?null==p[i]?void 0:p[i]:NaN;isNaN(f)||(l+=Math.pow(f-c,2))}e.varsp=l/n,e.vars=l/(n-1)}else e.varsp=NaN,e.vars=NaN;return!0},i.prototype.summarizeRange=function(e,t,n){if(null==e||null==t)return!1;e.clear();var r=t.length;if(r<1)return!1;for(var i=0,s=e.field,o=0,u=NaN,a=NaN,f=0;f<r;){var l=t[f++],c=(v=this._values[l])?null==v[s]?void 0:v[s]:NaN;if(!isNaN(c)){o=u=a=c,i++;break}}for(;f<r;)l=t[f++],c=(v=this._values[l])?null==v[s]?void 0:v[s]:NaN,isNaN(c)||(o+=c,c<u&&(u=c),a<c&&(a=c),i++);if(e.count=r,0<i)if(e.sum=o,e.min=u,e.max=a,e.avg=o/r,e.dataCount=i,e.dataAvg=o/i,n){for(var h=0,p=e.avg,d=0;d<r;d++){var v,l=t[d],c=(v=this._values[l])?null==v[s]?void 0:v[s]:NaN;isNaN(c)||(h+=Math.pow(c-p,2))}e.varsp=h/r,e.vars=h/(r-1)}else e.varsp=NaN,e.vars=NaN;return!0},i.prototype._keepRow=function(e){var t={};return t.rowId=this._rowIds[e],t.values=this._values[e]&&this._values[e].slice(),t.state=this._rowStates[e],t.orgValues=this._orgValues&&this._orgValues[e]&&this._orgValues[e].slice(),t.outer=this._keepCommandStates(e),t},i.prototype._yieldRow=function(e,t,n){void 0===n&&(n=!0),this._rowIds[e]=t.rowId,this._values[e]=t.values&&t.values.slice(),this._rowStates[e]=t.state,this._orgValues&&(this._orgValues[e]=t.orgValues&&t.orgValues.slice()),n&&this._yieldCommandStates(e,t.outer)},i.prototype._keepStates=function(e){var t={};return t.rowId=this._rowIds[e],t.state=this._rowStates[e],t.orgValues=this._orgValues&&this._orgValues[e]&&this._orgValues[e].slice(),t},i.prototype._yieldStates=function(e,t){this._rowIds[e]=t.rowId,this._rowStates[e]=t.state,this._orgValues&&(this._orgValues[e]=t.orgValues&&t.orgValues.slice())},i.prototype._keepState=function(e){return this._rowStates[e]},i.prototype._yieldState=function(e,t){this._rowStates[e]=t},i.prototype._keepOrgValues=function(){var e=this._orgValues;if(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]&&e[n].slice());return t}return null},i.prototype._yieldOrgValues=function(e){if(this._orgValues)if(e){this._orgValues=[];for(var t=0;t<e.length;t++)this._orgValues.push(e[t]&&e[t].slice())}else this._orgValues=e},i.prototype.$_checkRowIndex=function(e){if(e<0||e>=this._values.length)throw p.Utils.isDebugging(),new L.DataSourceError("row is out of bounds: "+e)},i.prototype.$_resetOrgValues=function(){var e=this.restoreMode;this._orgValues=this.checkStates&&e!=E.RestoreMode.NONE?[]:null,this._needRestore=this._orgValues&&e==E.RestoreMode.AUTO},i.prototype.arrayToRow=function(e,t){for(var n=Math.min(e?e.length:0,this.fieldCount),r=new Array(n),i=0;i<n;i++)r[i]=this.getField(i).readValue(e[i]);return this._internalCalculateValues(r,t),r},i.prototype.$_internalSetRow=function(e,t,n){t=this.arrayToRow(t,e),this._values[e]=t,this._rowIds[e]=this._nextRowId++,this.checkStates&&(this._rowStates[e]=d.RowState.NONE)},i.prototype.$_internalInsertRow=function(e,t,n){var r=this.arrayToRow(t,e),t=e==this._values.length;t?(this._values.push(r),this._rowIds.push(this._nextRowId++)):(this._values.splice(e,0,r),this._rowIds.splice(e,0,this._nextRowId++)),n&&this.tags.insertRow(e),t?this._rowStates.push(this.checkStates?d.RowState.CREATED:d.RowState.NONE):(this._rowStates.splice(e,0,this.checkStates?d.RowState.CREATED:d.RowState.NONE),this._orgValues&&this._orgValues.splice(e,0,void 0))},i.prototype.$_updateRow=function(e,t,n){if(this._checkClientState())return this.$_checkRowIndex(e),this.refreshFieldFormats(),!!t&&!!this.fireRowUpdating(e,t)&&(this.$_internalUpdateRow(e,t,n,!0,!0),this.fireRowUpdated(e),!0)},i.prototype.$_updateRows=function(e,t,n,r,i,s,o){if(void 0===o&&(o=null),this._checkClientState()&&t){var u=t.length;if(!(u<1)&&0!=(r=r<0?u:Math.min(u,r))){n=Math.max(0,n),this.refreshFieldFormats();var a=this.rowCount,f=Math.min(u,n+r);if(!(f<=n))if(o&&(o.rows=[],o.values=[],o.states=[],o.orgValues=[]),s)for(var l=e,c=n;c<f&&l<a;c++,l++){var h=t[c];this._values[l]||(this._values[l]=new Array(this.fieldCount)),this.fireRowUpdating(l,h)&&(o&&(o.rows.push(l),o.values.push(this._values[l].slice()),o.states.push(this._rowStates[l]),o.orgValues.push(this._orgValues&&this._orgValues[l])),this.$_internalUpdateRow(l,h,i,!0,!0),this.fireRowUpdated(l))}else{for(var p=[],l=e,c=n;c<f&&l<a;c++,l++)this._rowStates[l]==d.RowState.NONE&&p.push(l),this._values[l]||(this._values[l]=new Array(this.fieldCount)),o&&(o.rows.push(l),o.values.push(this._values[l].slice()),o.states.push(this._rowStates[l]),o.orgValues.push(this._orgValues&&this._orgValues[l])),h=t[c],this.$_internalUpdateRow(l,h,i,!1,!1);0<p.length&&this.fireRowStatesChanged(p),this.tags.updateRows(e,r=f-n),this.fireRowsUpdated(e,r)}}}},i.prototype.$_fillValue=function(e,t,n,r){if(void 0===r&&(r=null),this._checkClientState()&&e&&e.length&&t&&t.length){this.refreshFieldFormats(),r&&(r.rows=[],r.values=[],r.states=[],r.orgValues=[]);for(var i=[],s=0,o=e;s<o.length;s++){var u=o[s];this._rowStates[u]==d.RowState.NONE&&i.push(u),this._values[u]||(this._values[u]=new Array(this.fieldCount)),r&&(r.rows.push(u),r.values.push(this._values[u].slice()),r.states.push(this._rowStates[u]),r.orgValues.push(this._orgValues&&this._orgValues[u]));for(var a=this._values[u].slice(),f=0,l=t;f<l.length;f++)a[l[f]]=n;this.$_internalUpdateRow(u,a,!1,!1,!1)}0<i.length&&this.fireRowStatesChanged(i),this.tags.updateRowList(e),this.fireRowListUpdated(e)}},i.prototype.$_internalUpdateRow=function(e,t,n,r,i){var s,o=this.getFields(),u=p.Utils.isArray(t),a=Math.min(o.length,(u?t:o).length),f=this._values[e],l=this._rowStates[e],c=this.checkStates&&(l==d.RowState.NONE||!l);f||(this._values[e]=f=new Array(this.fieldCount)),c&&this._orgValues&&(s=p.Utils.deepCopy(f));for(var h=!1,v=0;v<a;v++){var m,g=o[v];!g.updatable&&l!=d.RowState.CREATED&&l!=d.RowState.CREATE_AND_DELETED||!u&&!t.hasOwnProperty(g.orgFieldName)||(m=u?t[v]:t[g.orgFieldName],n&&void 0===m||(h=!this._needRestore||h||(n?!g.equalValues(f[v],g.readValue(m)):!g.sameValues(f[v],g.readValue(m))),f[v]=g.readValue(m)))}h&&this._internalCalculateValues(f,e),c&&h?(s&&(this._orgValues[e]=s),this.$_changeRowState(e,d.RowState.UPDATED,r)):this._needRestore&&this.restoreState(e),i&&this.tags.updateRow(e)},i.prototype.$_changeRowState=function(e,t,n,r,i){if(void 0===r&&(r=!1),void 0===i&&(i=!1),this.checkStates||r){r=this._rowStates[e];if((t=t||d.RowState.NONE)!=r)return this._rowStates[e]=t,i&&(!d.isDeletedState(r)&&d.isDeletedState(t)?this._deletedCount++:d.isDeletedState(r)&&!d.isDeletedState(t)&&this._deletedCount--),n&&this.fireRowStateChanged(e),!0}return!1},i.prototype.restoreState=function(e){if(this._rowStates[e]===d.RowState.UPDATED){var t=this._orgValues[e];if(t){for(var n=this._values[e],r=this.strictRestore,i=0,s=this.fieldCount;i<s;i++){var o=n.length>i?n[i]:void 0,u=t.length>i?t[i]:void 0;if(r){if(!this.getField(i).equalValues(o,u))return!1}else if(!this.getField(i).sameValues(o,u))return!1}return this._rowStates[e]=d.RowState.NONE,!0}}return!1},i.prototype.prepareOrgValues=function(e,t,n){n==d.RowState.UPDATED?this._orgValues[e]=this._values[e]?this._values[e].concat():[]:t==d.RowState.UPDATED&&this._orgValues[e]&&(this._orgValues[e]=void 0)},i.prototype.$_changeRowStateEx=function(e,t,n,r,i){var s=this._rowStates[e];return!!this.$_changeRowState(e,t,!1,r,i)&&(this._orgValues&&this.prepareOrgValues(e,s,t),n&&this.fireRowStateChanged(e),!0)},i.prototype.$_getRowObject=function(e,t){var n={},r=this._values[e];if(r){for(var i=0;i<this.fieldCount;i++)n[this.getOrgFieldName(i)]=r[i];t&&(n.__rowState=this.getRowState(e))}return n},i.prototype.$_deleteRow=function(e){if(this.fireRowRemoving(e)){var t=this._rowStates[e];return this.$_internalRemoveRow(e),d.isDeletedState(t)&&this._deletedCount--,this.tags.removeRow(e),this.fireRowRemoved(e),this._fireRowCountChanged(),!0}return!1},i.prototype.$_internalRemoveRow=function(e){var t=this._rowIds[e];0<=this._hiddenIds.indexOf(t)&&this._hiddenIds.splice(this._hiddenIds.indexOf(t),1),this._values.splice(e,1),this._rowIds.splice(e,1),this._orgValues&&this._orgValues.length>e&&this._orgValues.splice(e,1),this._rowStates.splice(e,1)},i.prototype.$_internalMoveRow=function(e,t){var n=this._values[e],r=this._rowIds[e],i=this._rowStates[e];this._values.splice(e,1),this._rowIds.splice(e,1),this._rowStates.splice(e,1),this._values.splice(t,0,n),this._rowIds.splice(t,0,r),this._rowStates.splice(t,0,i),this._orgValues&&this._orgValues.length>e&&(n=this._orgValues[e],this._orgValues.splice(e,1),this._orgValues.splice(t,0,n))},i.prototype.$_internalMoveRows=function(e,t,n){for(var r=this._values.splice(e,t),i=this._rowIds.splice(e,t),s=this._rowStates.splice(e,t),o=0,u=r.length;o<u;o++)this._values.splice(n+o,0,r[o]),this._rowIds.splice(n+o,0,i[o]),this._rowStates.splice(n+o,0,s[o]);if(this._orgValues&&this._orgValues.length>e)for(o=0,u=(r=this._orgValues.splice(e,t)).length;o<u;o++)this._orgValues.splice(n+o,0,r[o])},i.prototype.$_internalMoveRowList=function(e,t){for(var n=[],r=[],i=[],s=e.length-1;0<=s;s--){var o=e[s];n.push(this._values.splice(o,1)[0]),r.push(this._rowIds.splice(o,1)[0]),i.push(this._rowStates.splice(o,1)[0])}n=n.reverse();for(var r=r.reverse(),i=i.reverse(),u=0,a=e.length;u<a;u++)this._values.splice(t+u,0,n[u]),this._rowIds.splice(t+u,0,r[u]),this._rowStates.splice(t+u,0,i[u]);if(this._orgValues&&this._orgValues.length>e[0]){for(var n=[],f=e.length-1;0<=f;f--)n=this._orgValues.splice(e[f],1)[0];n=n.reverse();for(u=0,a=e.length;u<a;u++)this._orgValues.splice(t+u,0,n[u])}},i.prototype.$_searchDataRow=function(e,t,n,r,i){var s=this.rowCount;if(s<1)return-1;var o=Math.min(e.length,t.length);if(o<1)return-1;for(var u=!n||n.allFields,a=n&&n.caseSensitive,f=n&&n.partialMatch,l=null,h=[],d=n.compareCallback||p.Utils.compareTextValue,v=0;v<o;v++)h[v]=this.getField(e[v]).dataType;r=Math.max(0,r),i=Math.min(s-1,i);for(var m=r;m<=i;m++){for(var g=!0,v=0;v<o;v++){var y=this.getValue(m,e[v]);switch(h[v]){case c.ValueType.DATETIME:case c.ValueType.DATE:var b,g=t[v]instanceof Date?d.call(this.$_handler,t[v],y,a,f):(l||(b=/[.]/.test(t[v])?"yyyy.MM.dd":/[/]/.test(t[v])?"yyyy/MM/dd":/[-]/.test(t[v])?"yyyy-MM-dd":"yyyyMMdd",l=new _.DateTimeConverter(b)),d.call(this.$_handler,t[v],y&&l.getText(y),a,f));break;default:g=d.call(this.$_handler,t[v],y,a,f)}if(g&&!u)return m;if(!g&&u)break}if(g)return m}return-1},i.prototype.searchDataRow=function(e){var t=-1,n=(e=e instanceof D.SearchOptions?e:new D.SearchOptions(e)).fields,r=e.values,i=e.startIndex;if(n&&0<n.length&&r&&0<r.length){for(var s=n.length,o=[],u=0;u<s;u++){var a,f=parseFloat(n[u]);isNaN(f)?0<=(a=this.getFieldIndex(n[u]))&&o.push(a):o.push(f)}0<o.length&&(s=this.rowCount,(t=(i=Math.max(0,i))<s?this.$_searchDataRow(o,r,e,i,s-1):-1)<0&&e.wrap&&0<i&&(t=this.$_searchDataRow(o,r,e,0,i-1)))}return t},i.prototype.$_searchData=function(e,t,n,r,i,s){var o=this.rowCount;if(o<1)return null;for(var u=n&&n.caseSensitive,a=n&&n.partialMatch,f=this.fieldCount,l=e.length,h=null,d=[],v=0;v<f;v++)d[v]=this.getField(v).dataType;r=Math.max(0,r),i=Math.min(o-1,i),(s=Math.max(0,s))>=e.length&&(r++,s=0);for(var m=n.compareCallback||p.Utils.compareTextValue,g=r;g<=i;g++)for(v=r<g?0:s;v<l;v++){var y=e[v];if(0<=y&&y<f){var b=this.getValue(g,y),w=!1;switch(d[y]){case c.ValueType.DATETIME:case c.ValueType.DATE:var E,w=t instanceof Date?m.call(this.$_handler,t,b,u,a):(h||(E=/[.]/.test(t)?"yyyy.MM.dd":/[/]/.test(t)?"yyyy/MM/dd":/[-]/.test(t)?"yyyy-MM-dd":"yyyyMMdd",h=new _.DateTimeConverter(E)),m.call(this.$_handler,t,b&&h.getText(b),u,a));break;default:w=m.call(this.$_handler,t,b,u,a)}if(w)return{dataRow:g,fieldIndex:y,searchFieldIndex:v}}}return null},i.prototype.searchData=function(e){var t=null,n=(e=e instanceof D.SearchCellOptions?e:new D.SearchCellOptions(e)).fields,r=e.value,i=Math.max(0,e.startIndex),s=Math.max(0,e.startFieldIndex);if(!n||n.length<1)for(var n=[],o=this.getFields(),u=0;u<o.length;u++)n.push(o[u].orgFieldName);if(n&&0<n.length&&null!=r){for(var a,f=n.length,l=[],c=0;c<f;c++)a=parseFloat(n[c]),isNaN(a)?l.push(this.getFieldIndex(n[c])):l.push(a);0<l.length&&(t=!(t=i<(f=this.rowCount)?this.$_searchData(l,r,e,i,f-1,s):null)&&e.wrap&&0<i?this.$_searchData(l,r,e,0,i-1,0):t)&&(t.fieldName=this.getOrgFieldName(t.fieldIndex))}return t},i.prototype.isDataChanged=function(e,t){if(this._rowStates[e]!==d.RowState.UPDATED||!this._orgValues)return!1;if(this.$_checkRowIndex(e),this._checkFieldIndex(t),this._orgValues[e]){var n=this._orgValues[e][t],e=this.getValue(e,t),t=this.getField(t);return t&&!t.sameValues(n,e)}return!1},i.prototype.$_hideRows=function(e,t){if(null!=e){for(var n=p.Utils.isArray(e)?e:[e],r=[],e=this._hiddenIds.length,i=0,s=n.length;i<s;i++){var o=this.getRowId(n[i]);null!=o&&(r.push(o),t?this._hiddenIds.indexOf(o)<0&&this._hiddenIds.push(o):0<=(o=this._hiddenIds.indexOf(o))&&this._hiddenIds.splice(o,1))}this._hiddenIds.length!==e&&this.fireRowHided(r,t)}},i.prototype.hideRows=function(e){this.$_hideRows(e,!0)},i.prototype.showRows=function(e){this.$_hideRows(e,!1)},i.prototype.clearHiddenRows=function(){0<this._hiddenIds.length&&(this._hiddenIds=[],this.fireRowHided([],!1))},i.prototype.getHiddenRows=function(){for(var e=[],t=0,n=this._hiddenIds.length;t<n;t++){var r=this._rowIds.indexOf(this._hiddenIds[t]);0<=r&&e.push(r)}return e.sort(function(e,t){return e-t}),e},i.prototype.isHiddenRow=function(e){return e=this._rowIds[e],0<=this._hiddenIds.indexOf(e)},_dp(i,"hiddenCount",{get:function(){return this._hiddenIds.length}}),i.prototype.undo=function(){this.canUndo&&this._commands.undo()},i.prototype.redo=function(){this.canRedo&&this._commands.redo(!0)},i.prototype.clearCommandStack=function(){this._commands&&this._commands.flush()},i);t.LocalDataProvider=r});t(Y),Y.LocalDataProvider;var Z=n(function(e,t){function i(e){var t=n.call(this)||this;return t._tags=new Array,t._owner=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},i.prototype.add=function(e){var t;e&&((t=this._tags||(this._tags=[])).indexOf(e)<0&&t.push(e),e.connect(this._owner))},i.prototype.remove=function(e){var t;e&&this._tags&&0<=(t=this._tags.indexOf(e))&&(this._tags.splice(t,1),e.disconnect())},i.prototype.clearRows=function(){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].clearRows()},i.prototype.setRows=function(){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].setRows()},i.prototype.addRow=function(e){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].addRow(e)},i.prototype.addRows=function(e){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].addRows(e)},i.prototype.removeRow=function(e){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].removeRow(e)},i.prototype.removeRows=function(e){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].removeRows(e)},i.prototype.updateRow=function(e){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].updateRow(e)},i.prototype.updateRows=function(e){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].updateRows(e)},i);t.TreeDataTagCollection=r});t(Z),Z.TreeDataTagCollection;var et=n(function(e,t){function r(){}Object.defineProperty(t,"__esModule",{value:!0});var n=(r.parse=function(e){return(new window.DOMParser).parseFromString(e,"text/xml")},r.toString=function(e){return(new window.XMLSerializer).serializeToString(e)},r.getNodeValue=function(e){return e.firstChild.nodeValue},r.getAttr=function(e,t){return e.getAttribute(t)},r.setAttr=function(e,t,n){e.setAttribute(t,n)},r.addChild=function(e,t,n){return n=e.createElement(n),t.appendChild(n),n},r.addChildWithAttr=function(e,t,n,r,i){return n=e.createElement(n),n.setAttribute(r,i),t.appendChild(n),n},r.addChildWithValue=function(e,t,n,r){return n=e.createElement(n),n.nodeValue=r,t.appendChild(n),n},r.parseXml=function(e){var t=null;try{(t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e)}catch(n){if(t)throw n;t=(new window.DOMParser).parseFromString(e,"text/xml")}return t},r);t.XmlUtils=n});t(et),et.XmlUtils;var tt=n(function(e,t){function n(e,t){var n=[];if(e){var r=e.childNodes;if(r)for(var i=0,s=r.length;i<s;i++){var o=r[i];o.tagName===t&&n.push(o)}}return n}function o(){return null!==r&&r.apply(this,arguments)||this}function f(e){var t=u.call(this)||this;if(t.fillMode=i.SET,t.fillPos=0,t.count=-1,t.rootArray=!0,t.rows="row",t.start=0,t.delimiter=",",t.quoted=!1,t.parentId=0,t.childrenField=null,t.treeField=null,t.iconField=null,t.needSorting=!1,t.noStates=!1,e){for(var n in e.hasOwnProperty("append")&&(t.fillMode=i.APPEND),e.hasOwnProperty("fillMode")&&(t.fillMode=e.fillMode),e.hasOwnProperty("fillPos")&&(t.fillPos=e.fillPos),e.hasOwnProperty("count")&&(t.count=e.count),e.hasOwnProperty("rootArray")&&(t.rootArray=e.rootArray),e.hasOwnProperty("rows")&&(t.rows=e.rows),e.hasOwnProperty("start")&&(t.start=e.start),e.hasOwnProperty("delimiter")&&(t.delimiter=e.delimiter),e.hasOwnProperty("quoted")&&(t.quoted=e.quoted),e)void 0!==e[n]&&(t[n]=e[n]);t.parentId=e.parentId||e.parent,t.childrenField=e.childrenField||e.children,t.treeField=e.treeField||e.tree,t.iconField=e.iconField||e.icon,t.needSorting=e.needSorting||e.sorting}return t}function d(e){var t=c.call(this)||this;return t._provider=e,t}Object.defineProperty(t,"__esModule",{value:!0});var r,i,s=(r=y.Base,l.__extends(o,r),o.extractJson=function(e,t){var n=e;if(t=t&&t.trim())for(var r=t.split("."),i=0;i<r.length;i++){var s=r[i]&&r[i].trim();if(s){var o,u,a=s.indexOf("["),f=s.lastIndexOf("]");if(0<a&&a<f?(o="$"!=(u=s.substring(0,a))?n[u]:n,n=Array.isArray(o)?(u=s.substring(a+1,f),0<=(u=parseInt(u))&&u<o.length?o[u]:null):null):"$"!=s&&(n=n[s]),!n)break}}return Array.isArray(n)?n:null},o.extractXml=function(e,t){var r=null;if(t=t&&t.trim())for(var i=t.split("."),s=0;s<i.length;s++){var o=i[s]&&i[s].trim();if(o){var u,a=o.indexOf("["),f=o.lastIndexOf("]");if(0<a&&a<f?(u=o.substring(0,a),(r=n(r?r[0]:e,u))&&(u=o.substring(a+1,f),r=r[parseInt(u)])):r=n(r?r[0]:e,o),!r)break}}return r},o);t.DataPath=s,(h=i=t.DataFillMode||(t.DataFillMode={})).SET="set",h.APPEND="append",h.INSERT="insert",h.UPDATE="update";var u,a=(u=y.Base,l.__extends(f,u),f);t.DataFillOptions=a;var c,h=(c=y.Base,l.__extends(d,c),d.prototype._doDispose=function(){this._provider=null},d.prototype.load=function(e,t,n){var r=new a(n);if(this._checkEmpty(t,r))return 0;n=this._provider.checkStates,r.noStates&&(this._provider.checkStates=!1);try{switch(e){case"json":return this._loadJson(t,r);case"xml":return this._loadXml(t,r);case"csv":return this._loadCsv(t,r)}}finally{this._provider.checkStates=n,this._provider.fireDataLoadComplated()}},d.prototype._loadJson=function(e,t){"string"==typeof e&&(e=JSON.parse(e));var n=null;if(n=(n=t.rootArray?p.Utils.isArray(e)?e:null:n)||s.extractJson(e,t.rows)){var r=t.fillPos,o=t.start,u=t.count;switch(t.fillMode){case i.APPEND:this._provider.appendRows(n,o,u);break;case i.INSERT:this._provider.insertRows(r,n,o,u);break;case i.UPDATE:this._provider.updateRows(r,n,o,u,!1);break;case i.SET:default:this._provider.setRows(n,o,u)}return n.length}return this._fillEmpty(t),0},d.prototype._loadXml=function(e,t){if((e="string"==typeof e?et.XmlUtils.parse(e):e)&&e.documentElement){var n=t.fillPos,r=t.start,o=t.count,u=t.rows,a=s.extractXml(e.documentElement,u);switch(t.fillMode){case i.APPEND:this._provider.appendXmlRows(a,r,o);break;case i.INSERT:this._provider.insertXmlRows(n,a,r,o);break;case i.UPDATE:this._provider.updateXmlRows(n,a,r,o);break;case i.SET:default:this._provider.setXmlRows(a,r,o)}return a.length}return this._fillEmpty(t),0},d.prototype._loadCsv=function(e,t){var n=t.fillPos,r=t.start,s=t.count,o=t.quoted,u=t.delimiter,a=V.DataHelper.csvToArray(this._provider,e,r,s,o,u);if(a&&0<(s=a.length)){switch(t.fillMode){case i.APPEND:this._provider.appendRows(a,0,s);break;case i.INSERT:this._provider.insertRows(n,a,0,s);break;case i.UPDATE:this._provider.updateRows(n,a,0,s,!1);break;case i.SET:default:this._provider.setRows(a,0,s)}return a.length}return this._fillEmpty(t),0},d.prototype._fillEmpty=function(e){e.fillMode===i.SET&&this._provider.setRows(null)},d.prototype._checkEmpty=function(e,t){return!e&&(this._fillEmpty(t),!0)},d);t.DataLoader=h});t(tt),tt.DataPath,tt.DataFillMode,tt.DataFillOptions,tt.DataLoader;var nt=n(function(e,t){function i(e,t){var r=n.call(this)||this;return r._rowCount=0,r._ds=e,r._rootRow=t,r}function u(e,t){return s.call(this,e,t)||this}function c(e,t){return a.call(this,e,t)||this}function p(e,t){return h.call(this,e,t)||this}function v(e,t){return d.call(this,e,t)||this}function g(e,t){return m.call(this,e,t)||this}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(i,"provider",{get:function(){return this._ds}}),_dp(i,"rootRow",{get:function(){return this._rootRow}}),_dp(i,"insertedRows",{get:function(){return this._rows}}),_dp(i,"insertedCount",{get:function(){return this._rowCount}}),i.prototype._prepareLoad=function(e){this._rowCount=0,this._rows=[]},i.prototype._objectToArray=function(e,t){for(var n=t.fieldCount,r=new Array(n),i=0;i<n;i++){var s=t.getOrgFieldName(i);e.hasOwnProperty(s)&&(r[i]=e[s])}return r},i.prototype._createRow=function(e,t,n){return this._ds.createRow(n,n[t],n[e],!1)},i.prototype._createRow2=function(e,t,n){return this._ds.createRow(n,t,e,!1)},i.prototype._rowAdded=function(e,t){this._rowCount++,this._rows&&t.parent===e&&this._rows.push(t)},i.prototype._addRow=function(e,t,n,r,i){return i=this._createRow(n,r,i),t._insertChild(t.count,i,!0,!0),this._rowAdded(e,i),i},i.prototype._addRow2=function(e,t,n,r,i){return i=this._createRow2(n,r,i),t._insertChild(t.count,i,!0,!0),this._rowAdded(e,i),i},i);t.TreeDataSource=r;var s,o=(s=r,l.__extends(u,s),u.prototype._loadData=function(e,t,n,r,i,s){if(this._prepareLoad(t),!e||e.length<1)return this._rowCount;for(var o=this.provider,u=e.length,a=[],f=new Array(e.length),l=0;l<u;l++)if(a[l]=l,Array.isArray(e[l])){if(Array.isArray(e[l]))for(var c=f[l]=new Array(o.fieldCount),h=0,p=o.fieldCount;h<p;h++)c[h]=e[l][h]}else f[l]=this._objectToArray(e[l],o);r&&this.$_sortRows(a,f,n,0,u-1),o.beginUpdate();try{this.$_buildTree(t||this.rootRow,a,f,n,i,s)}finally{o.endUpdate(!1)}return this.insertedCount},u.prototype.$_sortRows=function(e,t,n,r,i){function s(e,r){return e=t[e][n],r=t[r][n],e==r?0:e<r?-1:1}do{var o,u=r,a=i,f=e[Math.floor((r+i)/2)];do{for(;!(s(f,e[u])<=0);)u++;for(;!(0<=s(f,e[a]));)a--}while(u<=a&&(u!=a&&(o=e[u],e[u]=e[a],e[a]=o),u++,a--),u<=a)}while(r<a&&this.$_sortRows(e,t,n,r,a),(r=u)<i)},u.prototype.$_buildTree=function(e,t,n,r,i,s){function o(t,n,i,s){for(var o=s[r];n!=e;){var u=n.getValue(r);if(t.parentCallback){if(t.parentCallback(u,o))return n}else if(0==o.indexOf(u))return n;n=n.parent}return e}var u=t[0],a=this._createRow(i,s,n[u]),f=o(this,e,0,n[u]);if(f._insertChild(f.count,a,!0,!0),this._rowAdded(e,a),1<t.length)for(var l=t.length,c=a,h=1;h<l;h++)u=t[h],a=this._createRow(i,s,n[u]),(f=o(this,c,0,n[u]))._insertChild(f.count,a,!0,!0),this._rowAdded(e,a),c=a},u),a,f=(a=o,l.__extends(c,a),c.prototype.load=function(e,t,n,r,i,s){return this._loadData(t,e,n,r,i,s)},c);t.ArrayTreeSource=f;var h,f=(h=o,l.__extends(p,h),p.prototype.load=function(e,t,n,r,i,s){return t=V.DataHelper.csvToArray(this.provider,t),this._loadData(t,e,n,r,i,s)},p);t.CsvTreeSource=f;var d,r=(d=r,l.__extends(v,d),v.prototype.load=function(e,t,n,r,i){if(this._prepareLoad(e),t){t=tt.DataPath.extractJson(t,n);if(t&&0<t.length){this.provider.beginUpdate();try{this.$_buildJsonTree(this.provider,e||this.rootRow,t,n,r,i)}finally{this.provider.endUpdate(!1)}}}return this._rowCount},v.prototype.load2=function(e,t,n,r,i,s){if(this._prepareLoad(e),t){n=tt.DataPath.extractJson(t,n);if(n&&0<n.length){this.provider.beginUpdate();try{this.$_buildJsonTree2(this.provider,e||this.rootRow,n,r,i,s)}finally{this.provider.endUpdate(!1)}}}return this._rowCount},v.prototype.$_buildJsonTree=function(e,t,n,r,i,s){e=e.getOrgFieldNames(),!function o(e,n,u,a){for(var f=a.length,l=0,c=u.length;l<c;l++){for(var h=u[l],p=new Array(f),d=0;d<f;d++){var v=a[d];h.hasOwnProperty(v)&&(p[d]=h[v])}var m,g=e._addRow(t,n,i,s,p);h.hasOwnProperty(r)&&(m=h[r],Array.isArray(m)&&0<m.length&&o(e,g,m,a))}}(this,t,n,e)},v.prototype.$_buildJsonTree2=function(e,t,n,r,i,s){e=e.getOrgFieldNames(),!function o(e,n,u,a){for(var f=a.length,l=0,c=u.length;l<c;l++){for(var h=u[l],p=new Array(f),d=0;d<f;d++){var v=a[d];h.hasOwnProperty(v)&&(p[d]=h[v])}var m,g=e._addRow2(t,n,h[i],h[s],p);h.hasOwnProperty(r)&&(m=h[r],Array.isArray(m)&&0<m.length&&o(e,g,m,a))}}(this,t,n,e)},v);t.JsonTreeSource=r;var m,o=(m=o,l.__extends(g,m),g.prototype.load=function(e,t,n,r,i){if(this._prepareLoad(e),t){t="string"==typeof t?et.XmlUtils.parseXml(t):t;if(t){t=tt.DataPath.extractXml(t.documentElement,n);if(t&&0<t.length){this.provider.beginUpdate();try{this.$_buildXmlTree(this.provider,e||this.rootRow,t,n,r,i)}finally{this.provider.endUpdate(!1)}}}}return this._rowCount},g.prototype.$_buildXmlTree=function(e,t,n,r,i,s){!function o(e,n,u,a,f){for(var l=0,c=u.length;l<c;l++){var h=u[l],p=V.DataHelper.xmlToRow(h,a,f),p=e._addRow(t,n,i,s,p);(h=tt.DataPath.extractXml(h,r))&&0<h.length&&o(e,p,h,a,f)}}(this,t,n,e.getFields(),e.getOrgFieldNames())},g);t.XmlTreeSource=o});t(nt),nt.TreeDataSource,nt.ArrayTreeSource,nt.CsvTreeSource,nt.JsonTreeSource,nt.XmlTreeSource;var rt=n(function(e,t){function i(e){return n.call(this,e)||this}function o(){return null!==s&&s.apply(this,arguments)||this}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=H.DataEditCommand,l.__extends(i,n),i);t.LocalTreeDataCommand=r;var s,r=(s=P.EditCommandStack,l.__extends(o,s),o);t.LocalTreeDataCommandStack=r});t(rt),rt.LocalTreeDataCommand,rt.LocalTreeDataCommandStack;var it=n(function(e,t){function i(e,t,r,i){return e=n.call(this,e)||this,e._row=t,e._values=e._cloneRow(r),e._strict=i,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=rt.LocalTreeDataCommand,l.__extends(i,n),i.prototype._doRun=function(e){var t={};return t.row=this._row._keepRow(e),(t.result=this._row.$_update(e,this._values,this._strict,!1))&&(this._newState=this._row.rowState),t},i.prototype._doRedo=function(e,t){this._row.$_update(e,this._values,this._strict,!1)},i.prototype._doUndo=function(e,t){this._row._yieldRow(e,t.row),t.row.state!=this._newState&&e._fireRowStateChanged(this._row,!1),e._rowUpdated(this._row)},i);t.UpdateTreeDataCommand=r});t(it),it.UpdateTreeDataCommand;var st=n(function(e,t){function i(e){var t=n.call(this)||this;return t._children=null,t._descendantCount=0,t._rowId=e&&e._nextRowId++,t}function o(e){var t=s.call(this,e)||this;return t._provider=e,t}function a(){var e=u.call(this)||this;return e._nextRowId=0,e._commandListeners=[],e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.getRowIds=function(e){if(!e)return null;for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];t.push(i.rowId)}return t},i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(i,"rowId",{get:function(){return this._rowId}}),_dp(i,"provider",{get:function(){return null}}),_dp(i,"parent",{get:function(){return null}}),_dp(i,"index",{get:function(){var e=this.parent;return null!=e?e._children.indexOf(this):-1}}),_dp(i,"level",{get:function(){return 0}}),_dp(i,"iconIndex",{get:function(){return-1},set:function(e){}}),_dp(i,"hasChildren",{get:function(){return!1}}),_dp(i,"count",{get:function(){return this._children?this._children.length:0}}),_dp(i,"descendantCount",{get:function(){return this._descendantCount}}),_dp(i,"children",{get:function(){return this._children?this._children.concat():null}}),_dp(i,"descendants",{get:function(){if(this._children){var e=[];return function t(e,n){for(var r=0,i=e.count;r<i;r++){var s=e.getChild(r);n.push(s),t(s,n)}}(this,e),e}return null}}),_dp(i,"ancestors",{get:function(){var e=null,t=this.parent;if(t)for(e=[];t&&0<=t.rowId;)e.push(t),t=t.parent;return e}}),_dp(i,"rowState",{get:function(){return d.RowState.NONE}}),_dp(i,"values",{get:function(){return null}}),i.prototype.getChild=function(e){if(0<=e){if(!this._children||e>=this._children.length)throw new RangeError("Index is invalid: "+e);return this._children[e]}throw new RangeError("Index is invalid: "+e)},i.prototype.getChildObjects=function(e,t,n,r,i){var s=this._children;if(s){var o=[];t=t||"rows",n=n||"iconIndex";for(var u=0,a=s.length;u<a;u++){var f=s[u],l=f.getObject();r&&(l.__rowId=f._rowId),i&&(l.__rowState=f.rowState),r&&(l._rowId=f._rowId),e&&(l[t]=f.getChildObjects(e,t,n,r,i)),l[n]=f.iconIndex,o.push(l)}return o}return null},i.prototype.$_createTreeOutputRows=function(e,t,n){var r=[];!function x(e,t,n){for(var r=0,i=e.length;r<i;r++){var s=e[r];t.push(e[r]),n&&s[n]&&s[n].length&&x(s[n],t,n)}}(e,r,n);for(var i=this.provider,s=i.fieldCount,o=r.length,u=(t=t instanceof k.DataOutputOptions?t:new k.DataOutputOptions(t)).nullDateText,a=t.nullText,f=t.nanText,l=this.provider.handler,h=0;h<s;h++){var p=i.getField(h),d=p.orgFieldName,v=void 0,m=void 0;if(p.dataType==c.ValueType.DATETIME&&((v=t.datetimeCallback)||(m=t.datetimeWriter)||null!=u&&null!=u))if(v)for(var g=0;g<o;g++)(y=r[g])[d]=v(l,y._rowId,d,y[d]);else for(g=0;g<o;g++){var y,b=(y=r[g])[d];y[d]=b?m?m.getText(y[d]):b:u}else if(p.dataType==c.ValueType.BOOLEAN&&((v=t.booleanCallback)||(m=t.booleanFormatter)))if(v)for(g=0;g<o;g++)(y=r[g])[d]=v(l,y._rowId,d,y[d]);else for(g=0;g<o;g++)(y=r[g])[d]=m.formatValue(y[d]);else if(p.dataType==c.ValueType.NUMBER&&((v=t.numberCallback)||(m=t.numberFormatter)||null!=f&&null!=f))if(v)for(g=0;g<o;g++)(y=r[g])[d]=v(l,y._rowId,d,y[d]);else for(g=0;g<o;g++){var w=(y=r[g])[d];y[d]=null==w||isNaN(w)?f:m?m.getText(w):w}else if(null!=a&&null!=a)for(g=0;g<o;g++)w=(y=r[g])[d],y[d]=null==w||null==w?a:w}for(var E=0,S=r.length;E<S;E++)delete r[E]._rowId},i.prototype.getOutput=function(e,t){if(e){var n=this.getObject();return n[t||"iconIndex"]=this.iconIndex,n._rowId=this._rowId,e.rowState&&(n.__rowState=this.rowState),this.$_createTreeOutputRows([n],e),n}return null},i.prototype.getChildOutputObjects=function(e,t,n,r){return r=this.getChildObjects(t,n,r,!0,null==e?void 0:e.rowState),r&&e&&this.$_createTreeOutputRows(r,e,n),r},i.prototype.findById=function(e){if(this._children)for(var t=0,n=this._children.length;t<n;t++){var r=this._children[t];if(r.rowId==e)return r;if(r=r.findById(e))return r}return null},i.prototype.indexOf=function(e){return this._children?this._children.indexOf(e):-1},i.prototype.insertChild=function(e,t,n){return this._insertChild(e,t,!1,n)},i.prototype.addChild=function(e,t){return this._insertChild(this.count,e,!1,t)},i.prototype.insertChildren=function(e,t,n){return this._insertChildren(e,t,!1,n)},i.prototype.removeChild=function(e){return this._removeChild(e,!1)},i.prototype.clearChildren=function(){var e=this.provider;e&&!e._checkClientState()||this._removeChildren()},i.prototype.findChild=function(e,t){var n=this.provider;if(!n||!e||e.length<1||!t||t.length<e.length)return null;for(var r=[],i=[],s=0,o=e.length;s<o;s++){var u=void 0;0<=(u="string"==typeof e[s]?n.getFieldIndex(e[s]):Number(e[s]))&&u<n.fieldCount&&r.indexOf(u)<0&&(r.push(u),i.push(t[s]))}for(var s=0,a=r.length;s<a;s++)r[s]=n.getField(r[s]);return this.$_findChild(r,i)},i.prototype.isAncestorOf=function(e){if(e&&e!==this){for(var t=e.parent;t&&t!==this;)t=t.parent;return t===this}return!1},i.prototype.clearRowStates=function(e,t){var n=this.provider;if(n){var r=[],i=e?[]:null;this._collectStateRows(r,i);var s=r.length,e=i?i.length:0;if(0!=s||0!=e){if(t)for(var o=0,u=r.length;o<u;o++)r[o]._changeRowState(d.RowState.NONE,!0,!1);else s&&n.changeRowStates(r,d.RowState.NONE);e&&n.deleteRows(i)}}},i.prototype.toTreeString=function(){for(var e=this.rowId+"",t=(new Array(this.level+1)).join("  "),n=0;n<this.count;n++)e+="\n"+t+this.getChild(n).toTreeString();return e},i.prototype._checkFieldIndex=function(e){var t=this.provider.fieldCount;if(e<0||t<=e)throw new L.DataSourceError("Field index is out of bounds: "+e)},i.prototype._descendantCountChanged=function(e){this._descendantCount+=e;var t=this.parent;t&&t._descendantCountChanged(e)},i.prototype._moveChild=function(e,t){if(e!=t){if(e<0||e>=this._children.length)throw new RangeError("index is out of range: "+e);if(t<0||t>=this._children.length)throw new RangeError("newIndex is out of range: "+t);var n=this._children[e];if(t<e)for(var r=e;t<r;r--)this._children[r]=this._children[r-1];else for(r=e;r<t;r++)this._children[r]=this._children[r+1];this._children[t]=n}},i.prototype._moveChildren=function(e,t){var n=e[0];if(n!=t){if(n<0||n>=this._children.length)throw new RangeError("index is out of range: "+e[0]);if(t<0||t>=this._children.length)throw new RangeError("newIndex is out of range: "+t);for(var r=this._children,i=[],s=e.length-1;0<=s;s--)i.push(r.splice(e[s],1)[0]);for(s=0;s<i.length;s++)r.splice(t+s,0,i[s])}},i.prototype._changeParent=function(e,t){if(t<0||t>e._children.length)throw new RangeError("index is out of range: "+t);var n=this.parent,r=this.index;n._children.splice(r,1),n._descendantCountChanged(-1-this.descendantCount),n._detach(this),e._children.splice(t,0,this),e._descendantCountChanged(1+this.descendantCount),e._attach(this)},i.prototype._insertChild=function(e,t,n,r){var i=this.provider;if(i&&!n){if(!i._checkClientState())return!1;i.refreshFieldFormats()}if(!t)throw new Error("child is null");if(this._children=this._children||[],e<0||e>this._children.length)throw new RangeError("Insert index is invalid: "+e);return(!!n||!!this._doChildAdding(e,t))&&(this._children.splice(e,0,t),this._descendantCountChanged(1+t.descendantCount),this._attach(t),r||t._changeRowState(d.RowState.CREATED,!0,!1),this._doChildAdded(e,t),!0)},i.prototype._insertChildren=function(e,t,n,r){var i=this.provider;if(i&&!n){if(!i._checkClientState())return!1;i.refreshFieldFormats()}if(this._children=this._children||[],e<0||e>this._children.length)throw new RangeError("Insert index is invalid: "+e);if(n||this._doRowsAdding(e,t)){for(var s=0,o=0;o<t.length;o++){var u=t[o];this._children.splice(e+o,0,u),this._attach(u),s+=u.descendantCount,r||u._changeRowState(d.RowState.CREATED,!0,!1)}return this._descendantCountChanged(s),this._doRowsAdded(e,t),!0}return!1},i.prototype._addChild=function(e,t,n){return this._insertChild(this.count,e,t,n)},i.prototype.$_removeChild=function(e,t,n){return(!!n||!!this._doChildRemoving(e))&&(this._children.splice(t,1),this._descendantCountChanged(-1-e.descendantCount),this._detach(e),this._doChildRemoved(e),!0)},i.prototype._removeChild=function(e,t){var n=this.provider;if(!n||t||n._checkClientState()){if(e&&this._children)for(var r=this._children.length;r--;)if(this._children[r]===e){if(!n.softDeleting||!n.checkStates)return this.$_removeChild(e,r,t);switch(e.rowState){case d.RowState.CREATED:if(n.deleteCreated)return this.$_removeChild(e,r,t);e._changeRowState(d.RowState.CREATE_AND_DELETED,!0,!1);break;case d.RowState.DELETED:case d.RowState.CREATE_AND_DELETED:break;default:e._changeRowState(d.RowState.DELETED,!0,!1)}}return!1}},i.prototype._removeChildren=function(){this._children&&0<this._children.length&&(this._children.splice(0,this._children.length),this._descendantCountChanged(-this._descendantCount),this._doCleared())},i.prototype._setChildren=function(e){this._children&&0<this._children.length&&this._children.splice(0,this._children.length);var t,n=-this._descendantCount;if(e&&0<(t=e.length)){this._children||(this._children=[]);for(var r=0;r<t;r++){var i=e[r];this._children.push(i),n+=1+i.descendantCount,this._attach(i)}}this._descendantCountChanged(n)},i.prototype.$_findChild=function(e,t){for(var n=e.length,r=this.count,i=0;i<r;i++){for(var s=this._children[i],o=!0,u=0;u<n;u++)if(!e[u].equalValues(t[u],s.getValue(e[u].index))){o=!1;break}if(o)return s;if(s=s.$_findChild(e,t))return s}return null},i.prototype._collectStateRows=function(e,t){for(var n=this.count;n--;){var r=this.getChild(n),i=r.rowState;!t||i!=d.RowState.DELETED&&i!=d.RowState.CREATE_AND_DELETED?(i!=d.RowState.NONE&&e.push(r),r._collectStateRows(e,t)):t.push(r)}},i.prototype._clearOrgValues=function(){for(var e=this.count;e--;)this.getChild(e)._clearOrgValues()},i.prototype._restoreState=function(e,t){if(e)for(var n=this.count;n--;)this.getChild(n)._restoreState(!0,t);return!1},i.prototype.$_restoreRow=function(e,t){if(e)for(var n=this.count;n--;)this.getChild(n).$_restoreRow(!0,t);return!1},i.prototype._doChildAdding=function(e,t){var n=this.provider;return!n||n._rowAdding(this,e,t)},i.prototype._doChildAdded=function(e,t){var n=this.provider;n&&n._rowAdded(t)},i.prototype._doRowsAdding=function(e,t){var n=this.provider;return!n||n._rowsAdding(this,e,t)},i.prototype._doRowsAdded=function(e,t){var n=this.provider;n&&n._rowsAdded(this,t)},i.prototype._doChildRemoving=function(e){var t=this.provider;return!t||t._rowRemoving(e)},i.prototype._doChildRemoved=function(e){var t=this.provider;t&&t._rowRemoved(e)},i.prototype._doCleared=function(){var e=this.provider;e&&e._rowCleared(this)},i);t.TreeDataRow=r;var s,r=(s=r,l.__extends(o,s),o.prototype._doDispose=function(){this._provider=null,s.prototype._doDispose.call(this)},o.prototype.set=function(e){for(var t=[],n=0;n<e.count;n++)t.push(e.getChild(n).copy());this._setChildren(t)},_dp(o,"provider",{get:function(){return this._provider}}),_dp(o,"rowId",{get:function(){return-1}}),_dp(o,"index",{get:function(){return 0}}),_dp(o,"hasChildren",{get:function(){return!0}}),o.prototype.copy=function(){for(var e=new o(null),t=0,n=this.count;t<n;t++){var r=this.getChild(t).copy();e._addChild(r,!0,!0)}return e._provider=this._provider,e},o.prototype._changeRowState=function(e,t,n){return!1},o.prototype.getObject=function(){return null},o.prototype.getValue=function(e){},o.prototype.setValue=function(e,t,n){return!1},o.prototype._attach=function(e){e._parent=this},o.prototype._detach=function(e){e._parent===this&&(e._parent=null)},o.prototype.update=function(e,t){return!1},o.prototype.$_setHasChildren=function(e){},o.prototype.$_setIconIndex=function(e){},o.prototype._keepRow=function(e){},o.prototype._yieldRow=function(e,t){},o.prototype._keepStates=function(e){},o.prototype._yieldStates=function(e,t){},o);t.RootTreeRow=r;var u,r=(u=L.DataSource,l.__extends(a,u),a.prototype._doDispose=function(){u.prototype._doDispose.call(this)},a.prototype.editCommandStackChanged=function(e,t,n){this._fireCommandStackChanged(t,n)},a.prototype.registerCommandListener=function(e){e&&this._commandListeners.indexOf(e)<0&&this._commandListeners.push(e)},a.prototype.unregisterCommandListener=function(e){e=this._commandListeners.indexOf(e),0<=e&&this._commandListeners.splice(e,1)},a.prototype._keepCommandStates=function(e){if(0<this._commandListeners.length)return this._commandListeners[0].getCommandStates(e)},a.prototype._yieldCommandStates=function(e,t){if(0<this._commandListeners.length)return this._commandListeners[0].setCommandStates(e,t)},a);t.TreeDataProvider=r});t(st),st.TreeDataRow,st.RootTreeRow,st.TreeDataProvider;var ot=n(function(e,t){function i(e,t,r,i){return e=n.call(this,e)||this,e._rows=t.slice(),e._fields=r.slice(),e._value=i,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=rt.LocalTreeDataCommand,l.__extends(i,n),i.prototype._doRun=function(e){for(var t=e,n=[],r=0,i=this._rows;r<i.length;r++){var s=i[r]._keepRow(t);n.push(s)}return t.$_fillValue(this._rows,this._fields,this._value),n},i.prototype._doRedo=function(e,t){e.$_fillValue(this._rows,this._fields,this._value)},i.prototype._doUndo=function(e,t){for(var n=0;n<this._rows.length;n++)this._rows[n]._yieldRow(e,t[n]);e._fireRefresh()},i);t.FillValueTreeDataCommand=r});t(ot),ot.FillValueTreeDataCommand;var ut=n(function(e,t){function i(e,t,r,i){return e=n.call(this,e)||this,e._rows=t.slice(),e._values=e._cloneValues(r.slice()),e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=rt.LocalTreeDataCommand,l.__extends(i,n),i.prototype._doRun=function(e){for(var t=e,n=[],r=0,i=this._rows;r<i.length;r++){var s=i[r]._keepRow(t);n.push(s)}return t.$_updateRows(this._rows,this._values,this._strict),n},i.prototype._doRedo=function(e,t){e.$_updateRows(this._rows,this._values,this._strict)},i.prototype._doUndo=function(e,t){for(var n=0;n<this._rows.length;n++)this._rows[n]._yieldRow(e,t[n]);e._fireRefresh()},i);t.UpdateRowsTreeDataCommand=r});t(ut),ut.UpdateRowsTreeDataCommand;var at=n(function(e,t){function i(e,t,r,i){return e=n.call(this,e)||this,e._row=t,e._field=r,e._value=i instanceof Date?new Date(i):i,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=rt.LocalTreeDataCommand,l.__extends(i,n),i.prototype._doRun=function(e){var t={};return t.row=this._row._keepRow(e),(t.result=this._row.$_setValue(this._field,this._value,!1))&&(this._newState=this._row.rowState),t},i.prototype._doRedo=function(e,t){this._row.$_setValue(this._field,this._value,!1)},i.prototype._doUndo=function(e,t){this._row._yieldRow(e,t.row),t.row.state!=this._newState&&e._fireRowStateChanged(this._row),e._valueChanged(this._row,this._field)},i);t.SetValueTreeCommand=r});t(at),at.SetValueTreeCommand;var ft=n(function(e,t){function i(e,t){var r=n.call(this,e)||this;if(r._iconIndex=-1,r._hasChildren=!1,r._parent=null,r._values=null,r._orgValues=null,r._state=d.RowState.NONE,e&&t){var i=e.fieldCount;Math.min(t.length,i),r._values=new Array(i);for(var s=0,o=Math.min(t.length,i);s<o;s++)r._values[s]=e.getField(s).readValue(t[s])}return r}function u(e,t){var n=s.call(this)||this;return n._countDirty=!1,n._tagLock=!1,n._points=[],n._nextPoint=0,n._rowMap=[],n._needOrgValues=!1,n._needRestore=!1,n._checkParentProc=null,n._hiddenRows=[],n.$_handler=t,e&&(n._commands=new rt.LocalTreeDataCommandStack
(n)),n._rootRow=new st.RootTreeRow(n),n._tags=new Z.TreeDataTagCollection(n),n}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=st.TreeDataRow,l.__extends(i,n),i.prototype._doDispose=function(){this._values=null,this._orgValues=null,n.prototype._doDispose.call(this)},_dp(i,"provider",{get:function(){return this._parent&&this._parent.provider}}),_dp(i,"parent",{get:function(){return this._parent}}),_dp(i,"index",{get:function(){return this._parent?this._parent.indexOf(this):-1}}),_dp(i,"level",{get:function(){return this._parent?this._parent.level+1:0}}),_dp(i,"hasChildren",{get:function(){return this._hasChildren},set:function(e){e!=this._hasChildren&&(this._hasChildren=e,(e=this.provider)&&e._hasChildrenChanged(this))}}),_dp(i,"iconIndex",{get:function(){return this._iconIndex},set:function(e){(e=isNaN(e)?-1:e)!=this._iconIndex&&(this._iconIndex=e,(e=this.provider)&&e._iconIndexChanged(this))}}),_dp(i,"rowState",{get:function(){return this._state}}),_dp(i,"values",{get:function(){return this._values&&this._values.slice()}}),i.prototype._attach=function(e){e._parent=this},i.prototype._detach=function(e){e._parent===this&&(e._parent=null)},i.prototype._changeRowState=function(e,t,n){var r=this.provider;if(r&&e!=this._state){var i=this._state;return(this._state=e)==d.RowState.UPDATED&&r._needOrgValues?this._orgValues=this._values.concat():i==d.RowState.UPDATED&&this._orgValues&&(this._orgValues=null),t&&r._stateChanged(this,n),!0}return!1},i.prototype.getValue=function(e){if(this.provider){if(this._checkFieldIndex(e),this._values)return this._values[e];throw new Error("Row data is not loaded")}},i.prototype.setValue=function(e,t,n){var r=this.provider;return!!r&&(r.undoable?r._commands.execute(new at.SetValueTreeCommand(r,this,e,t)):this.$_setValue(e,t,n))},i.prototype.getObject=function(){var e=this.provider;if(e){for(var t=e.fieldCount,n={},r=0;r<t;r++)n[e.getOrgFieldName(r)]=this._values[r];return n}return null},i.prototype.copy=function(){var e=new i(null,null);e._rowId=this._rowId,e._iconIndex=this._iconIndex,e._hasChildren=this._hasChildren,e._state=this._state,e._values=this._values?this._values.concat():null;for(var t=0,n=this.count;t<n;t++){var r=this.getChild(t).copy();e._addChild(r,!0,!0)}return e},i.prototype.update=function(e,t){var n=this.provider;return!!n&&(n.undoable?n._commands.execute(new it.UpdateTreeDataCommand(n,this,e,t)):this.$_update(n,e,t,!1))},i.prototype._keepRow=function(e){var t={};return t.values=this._values&&this._values.slice(),t.state=this._state,t.orgValues=this._orgValues&&this._orgValues.slice(),t.outer=e._keepCommandStates(this),t},i.prototype._yieldRow=function(e,t){this._values=t.values&&t.values.slice(),this._state=t.state,this._orgValues=t.orgValues&&t.orgValues.slice(),e._yieldCommandStates(this,t.outer)},i.prototype._keepStates=function(e){},i.prototype._yieldStates=function(e,t){},i.prototype._keepState=function(){return this._state},i.prototype._yieldState=function(e){this._state=e},i.prototype.$_setValue=function(e,t,n){var r,i,s,o=this.provider;if(o&&o._checkClientState()){if(o.refreshFieldFormats(),this._checkFieldIndex(e),this._values)return t!=this._values[e]&&(r=null,i=o.getField(e),s=o.checkStates&&(this._state==d.RowState.NONE||!this._state),!n&&s&&o._needOrgValues&&(r=this._values.concat()),this._values[e]=i.readValue(t),o._internalCalculateValues(this._values,this.rowId),!n&&s?(o._needOrgValues&&(this._orgValues=r),this._state=d.RowState.UPDATED,o._stateChanged(this,!1)):o._needRestore&&this.$_restoreState(o),o._valueChanged(this,e)),!0;throw new Error("Row data is not loaded")}},i.prototype.$_update=function(e,t,n,r){if(!r){if(!e._checkClientState())return;e.refreshFieldFormats()}return!(!t||!r&&!e._rowUpdating(this))&&(this.$_internalUpdate(t,n,!0),e._rowUpdated(this),!0)},i.prototype._clearOrgValues=function(){this._orgValues&&(this._orgValues.length=0,this._orgValues=null),n.prototype._clearOrgValues.call(this)},i.prototype._restoreState=function(e,t){var r=this.$_restoreState(this.provider);return r&&t&&t.push(this),n.prototype._restoreState.call(this,e,t),r},i.prototype.$_restoreRow=function(e,t){var r=!1;if(this._state===d.RowState.UPDATED){var i=this._orgValues;if(i){for(var s=this._values,o=0,u=Math.min(i.length,this.provider.fieldCount);o<u;o++)s[o]=i[o];this._state=d.RowState.NONE,t&&t.push(this),r=!0}}return n.prototype.$_restoreRow.call(this,e,t),r},i.prototype.$_restoreState=function(e){if(this._state==d.RowState.UPDATED&&this._orgValues){for(var t=this._orgValues,n=this._values,r=this.provider,i=r.strictRestore,s=0,o=r.fieldCount;s<o;s++){var u=n.length>s?n[s]:void 0,a=t.length>s?t[s]:void 0;if(i){if(!r.getField(s).equalValues(u,a))return!1}else if(!r.getField(s).sameValues(u,a))return!1}return this._state=d.RowState.NONE,!0}return!1},i.prototype.$_getUpdatedCells=function(){var e=this._orgValues,t=this._values,n=this.provider,r=n.strictRestore,i=[];if(!e||e.length<=0)return null;for(var s=0,o=n.fieldCount;s<o;s++){var u=t.length>s?t[s]:void 0,a=e.length>s?e[s]:void 0,f=n.getField(s);f.calculated||(r?f.equalValues(u,a)||i.push({fieldName:n.getOrgFieldName(s),oldValue:e[s],newValue:t[s]}):f.sameValues(u,a)||i.push({fieldName:n.getOrgFieldName(s),oldValue:e[s],newValue:t[s]}))}return i},i.prototype.$_setHasChildren=function(e){this._hasChildren=e},i.prototype.$_setIconIndex=function(e){this._iconIndex=isNaN(e)?-1:e},i.prototype.$_internalUpdate=function(e,t,n){var r=!1,i=Array.isArray(e),s=this.provider;if(s){var o=Math.min(s.fieldCount,i?e.length:s.fieldCount),u=s.checkStates&&(this._state==d.RowState.NONE||!this._state),a=null;u&&s._needOrgValues&&(a=this._values.concat());for(var f=0;f<o;f++){var l,c=s.getField(f);(i||e.hasOwnProperty(c.orgFieldName))&&(l=i?e[f]:e[c.orgFieldName],t&&void 0===l||(r=!s._needRestore||r||(t?!c.equalValues(this._values[f],c.readValue(l)):!c.sameValues(this._values[f],c.readValue(l))),this._values[f]=s.getField(f).readValue(l)))}s._internalCalculateValues(this._values,this.rowId),u&&r?(a&&(this._orgValues=a),this._state=d.RowState.UPDATED,n&&s._stateChanged(this,!1)):s._needRestore&&this.$_restoreState(s)}},i);t.TreeDataRowImpl=r;var s,o=(s=st.TreeDataProvider,l.__extends(u,s),u.prototype._doDispose=function(){this._commands=this._commands&&this._commands.dispose(),this._points=null,this._rootRow=null,this._rowMap=null,this._tags=null,this._hiddenRows=null,s.prototype._doDispose.call(this)},_dp(u,"rootRow",{get:function(){return this._rootRow}}),_dp(u,"parentCallback",{get:function(){return this._parentCallback},set:function(e){this._parentCallback=e}}),_dp(u,"needOrgValues",{get:function(){return this._needOrgValues}}),_dp(u,"needRestore",{get:function(){return this._needRestore}}),_dp(u,"undoable",{get:function(){return this._undoable&&!!this._commands},set:function(e){e!=this.undoable&&(this._undoable=e,this._commands&&this._commands.flush())}}),_dp(u,"handler",{get:function(){return this.$_handler}}),u.prototype.addTag=function(e){this._tags.add(e)},u.prototype.removeTag=function(e){this._tags.remove(e)},u.prototype.setRows=function(e,t,n,r,i){if(!this._checkClientState())return-1;var s=0,t=this.getFieldIndex(t);if(0<=t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var o=new nt.ArrayTreeSource(this,this._rootRow);o.parentCallback=this._parentCallback,s=o.load(null,e,t,n,this.getFieldIndex(r),this.getFieldIndex(i)),this._checkSum(s)}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.fireDataLoadComplated(),s},u.prototype.setCsvRows=function(e,t,n,r,i){if(!this._checkClientState())return-1;var s=0,t=this.getFieldIndex(t);if(0<=t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var o=new nt.CsvTreeSource(this,this._rootRow);o.parentCallback=this._parentCallback,s=o.load(null,e,t,n,this.getFieldIndex(r),this.getFieldIndex(i)),this._checkSum(s)}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.fireDataLoadComplated(),s},u.prototype.setXmlRows=function(e,t,n,r){if(!this._checkClientState())return-1;var i=0;if(e){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats(),i=(new nt.XmlTreeSource(this,this._rootRow)).load(null,e,t,this.getFieldIndex(n),this.getFieldIndex(r)),this._checkSum(i)}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.fireDataLoadComplated(),i},u.prototype.setJsonRows=function(e,t,n,r){if(!this._checkClientState())return-1;if(e){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var i=new nt.JsonTreeSource(this,this._rootRow);this._rowCount=i.load(null,e,t,this.getFieldIndex(n),this.getFieldIndex(r))}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.fireDataLoadComplated(),this.rowCount},u.prototype.setJsonRows2=function(e,t,n,r,i){if(!this._checkClientState())return-1;if(e){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var s=new nt.JsonTreeSource(this,this._rootRow);this._rowCount=s.load2(null,e,t,n,r,i)}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.fireDataLoadComplated(),this.rowCount},u.prototype.appendDataRows=function(e,t,n,r,i,s){if(!this._checkClientState())return-1;var o=0,u=this.getFieldIndex(n);if(0<=u){n=new nt.ArrayTreeSource(this,this._rootRow),n.parentCallback=this._parentCallback,this.beginUpdate();try{this.refreshFieldFormats(),o=n.load(e,t,u,r,this.getFieldIndex(i),this.getFieldIndex(s))}finally{this.endUpdate(!1),0<o&&(n=n.insertedRows)&&0<(o=n.length)&&this._rowsAdded(e,n)}}return o},u.prototype.appendCsvRows=function(e,t,n,r,i,s){if(!this._checkClientState())return-1;var o=0,n=this.getFieldIndex(n);if(0<=n){this.beginUpdate();try{this.refreshFieldFormats();var u=new nt.CsvTreeSource(this,this._rootRow);u.parentCallback=this._parentCallback,o=u.load(e,t,n,r,this.getFieldIndex(i),this.getFieldIndex(s))}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),o},u.prototype.appendXmlRows=function(e,t,n,r,i){if(!this._checkClientState())return-1;var s=0;if(t){var o=new nt.XmlTreeSource(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),s=o.load(e,t,n,this.getFieldIndex(r),this.getFieldIndex(i))}finally{this.endUpdate(!1),0<s&&(o=o.insertedRows)&&0<(s=o.length)&&this._rowsAdded(e,o)}}return this._fireRowCountChanged(),s},u.prototype.appendJsonRows=function(e,t,n,r,i){if(!this._checkClientState())return-1;var s=0;if(t){var o=new nt.JsonTreeSource(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),s=o.load(e,t,n,this.getFieldIndex(r),this.getFieldIndex(i))}finally{this.endUpdate(!1),0<s&&(o=o.insertedRows)&&0<(s=o.length)&&this._rowsAdded(e,o)}}return this._fireRowCountChanged(),s},u.prototype.setIconIndex=function(e,t){return e.iconIndex!=t&&(e.$_setIconIndex(t),!0)},u.prototype.setHasChildren=function(e,t){return t!=e.hasChildren&&(e.$_setHasChildren(t),!0)},u.prototype.getChildCount=function(e){return(e||this._rootRow).count},u.prototype.getRows=function(e){return(e||this._rootRow).children},u.prototype.getDescendantCount=function(e){return(e||this._rootRow).descendantCount},u.prototype.getDescendants=function(e,t){var n=e||this._rootRow;return(t=1<arguments.length?t:0)<=0?n.descendants:t>n.level?(e=[],function r(e,t,n){for(var i=0,s=e.count;i<s;i++){var o;t.push(o=e.getChild(i)),n>o.level&&r(o,t,n)}}(n,e,t),e):null},u.prototype.getChild=function(e,t){return(e||this._rootRow).getChild(t)},u.prototype.hasData=function(e){return null!=this.rowById(e)},u.prototype.rowById=function(e){var t=this._rowMap[e];return t||(t=this._findRowById(e))&&(this._rowMap[e]=t),t},u.prototype.getDataRow=function(e){var t=this._rowMap[e];return null!=(t=null==t?this._findRowById(e):t)?e:-1},u.prototype.rowsByIds=function(e,t){if(e){for(var n=[],r=0,i=e;r<i.length;r++){var s=i[r],s=this.rowById(s);(s||t)&&n.push(s)}return n}return null},u.prototype.createRow=function(e,t,n,i){var s=null;if((i=void 0===i?!0:i)&&this.refreshFieldFormats(),Array.isArray(e))s=new r(this,e);else if(e){var o,u=new Array(this.fieldCount);for(o in e){var a=this.getFieldIndex(o);0<=a&&(u[a]=e[o])}s=new r(this,u)}return s&&(this._internalCalculateValues(s._values,s.rowId),s._iconIndex=t,s._hasChildren=n),s},u.prototype.clearRows=function(){this._checkClientState()&&(this._clearRows(),this.clearCommandStack(),this._eventLock<=0&&(this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated()))},u.prototype.removeRows=function(e){for(var t=[],n=e.length;n--;)(s=this.rowById(e[n]))&&t.push(s);if(this._checkClientState()&&t&&!(t.length<1)){t.sort(function(e,t){return e.level-t.level});for(var r=t,n=t.length;n--;)1<t[n].level&&!function(e,n){for(var r=n;0<=r;r--)if(t[r].isAncestorOf(e))return;return 1}(t[n],n-1)&&t.splice(n,1);if(t.length<1||!this._rowsRemoving(t))return!1;if(this.softDeleting&&this.checkStates){for(var i=[],n=t.length-1;0<=n;n--){var s,o=!1;switch((s=t[n]).rowState){case d.RowState.CREATED:this.deleteCreated||(o=s._changeRowState(d.RowState.CREATE_AND_DELETED,!1,!1),t.splice(n,1));break;case d.RowState.DELETED:case d.RowState.CREATE_AND_DELETED:t.splice(n,1);break;default:o=s._changeRowState(d.RowState.DELETED,!0,!1),t.splice(n,1)}o&&i.push(s)}0<i.length&&this._fireRowStatesChanged(i)}return this.deleteRows(r),!0}},u.prototype.changeRowIndex=function(e,t){if(0==t)return!1;if(!this._checkClientState())return!1;var n=e.parent,r=n.children.length,i=e.index,r=Math.min(Math.max(i+t,0),r-1);return 0!=(t=r-i)&&!!this._fireRowSiblingMoving(e,t)&&(n._moveChild(i,r),this._fireRowSiblingMoved(e,t),!0)},u.prototype.changeRowsIndex=function(e,t){if(0==t)return!1;if(!this._checkClientState())return!1;var n=e[0].parent,r=n.children.length,i=e[0].index,r=Math.min(Math.max(i+t,0),r-1);if(0==(t=r-i))return!1;for(var s=[],o=0,u=e;o<u.length;o++){var a=u[o];s.push(a.index)}return!!this._fireRowsSiblingMoving(e,t)&&(n._moveChildren(s,r),this._fireRowsSiblingMoved(e,t),!0)},u.prototype.changeRowParent=function(e,t,n){if(e===t)throw new Error("Parent must not be self.");if(e.isAncestorOf(t))throw new Error("Can`t move to child of a descendant.");var r=e.parent;if(r===t&&n==e.index)return!1;if(!this._checkClientState())return!1;t._children||(t._children=[]);var i=t._children.length;return n=Math.min(Math.max(n,0),i),!!this._fireRowParentChanging(e,t,n)&&(e._changeParent(t,n),t instanceof st.RootTreeRow||this.setHasChildren(t,!0),r instanceof st.RootTreeRow||0!=r.count||this.setHasChildren(r,!1),this._fireRowParentChanged(e,t,n),!0)},u.prototype.moveRows=function(e,t){return this.changeRowsIndex(e,t.index-e[0].index),!1},u.prototype.toTreeString=function(){return this._rootRow.toTreeString()},u.prototype.beginUpdate=function(){this._checkClientState(),this._eventLock++},u.prototype.endUpdate=function(e){void 0===e&&(e=!0),this._checkClientState(),this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&(e&&(0<this._resetLock?this._fireReset():this._fireRefresh(),this._countDirty&&this._fireRowCountChanged()),this._resetLock=0,this._countDirty=!1)},u.prototype.$_extractTreeRowIds=function(e){if(e){for(var t=e.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r].rowId;return n}return null},u.prototype.$_searchDataRow=function(e,t,n,r,i,s){var o=e.length;if(o<1)return-1;var u=Math.min(t.length,n.length);if(u<1)return-1;for(var a=!r||r.allFields,f=r&&r.caseSensitive,l=r&&r.partialMatch,h=null,d=[],v=0;v<u;v++)d[v]=this.getField(t[v]).dataType;i=Math.max(0,i),s=Math.min(o-1,s);for(var m=i;m<=s;m++){if(b=!0)for(v=0;v<u;v++){var g=this.rowById(e[m]).getValue(t[v]);switch(d[v]){case c.ValueType.DATETIME:case c.ValueType.DATE:var y,b=n[v]instanceof Date?p.Utils.compareTextValue(n[v],g,f,l):(h||(y=/[.]/.test(n[v])?"yyyy.MM.dd":/[/]/.test(n[v])?"yyyy/MM/dd":/[-]/.test(n[v])?"yyyy-MM-dd":"yyyyMMdd",h=new _.DateTimeConverter(y)),p.Utils.compareTextValue(n[v],g&&h.getText(g),f,l));break;default:b=p.Utils.compareTextValue(n[v],g,f,l)}if(b&&!a)return e[m];if(!b&&a)break}if(b)return e[m]}return-1},u.prototype.searchDataRow=function(e,t){var n;if(void 0===t&&(t=null),e instanceof D.SearchOptions||(e=new D.SearchOptions(e)),null!=t){var r=this.rowById(t);if(!r)return-1;n=this.$_extractTreeRowIds(r.descendants)}else n=this.$_extractTreeRowIds(this._rootRow.descendants);if(!Array.isArray(n)||n.length<=0)return-1;var i=n.length,s=Math.max(0,n.indexOf(e.startIndex)),o=e.fields,t=e.values,r=-1;if(o&&0<o.length&&t&&0<t.length){for(var u=o.length,a=[],f=0;f<u;f++){var l=o[f];p.Utils.isNumber(l)?a.push(l):0<=(l=this.getFieldIndex(o[f]))&&a.push(l)}0<a.length&&(r=s<i?this.$_searchDataRow(n,a,t,e,s,i-1):-1)<0&&e.wrap&&0<s&&(r=this.$_searchDataRow(n,a,t,e,0,s-1))}return r},u.prototype.$_searchData=function(e,t,n,r,i,s,o){var u=this.rowCount;if(u<1)return null;for(var a=r&&r.caseSensitive,f=r&&r.partialMatch,l=this.fieldCount,h=t.length,d=null,v=[],m=0;m<l;m++)v[m]=this.getField(m).dataType;i=Math.max(0,i),s=Math.min(u-1,s),(o=Math.max(0,o))>=t.length&&(i++,o=0);for(var g=i;g<=s;g++)for(m=i<g?0:o;m<h;m++){var y=!1,b=t[m];if(0<=b&&b<l){var w=this.rowById(e[g]).getValue(b);switch(v[b]){case c.ValueType.DATETIME:case c.ValueType.DATE:var E,y=n instanceof Date?p.Utils.compareTextValue(n,w,a,f):(d||(E=/[.]/.test(n)?"yyyy.MM.dd":/[/]/.test(n)?"yyyy/MM/dd":/[-]/.test(n)?"yyyy-MM-dd":"yyyyMMdd",d=new _.DateTimeConverter(E)),p.Utils.compareTextValue(n,w&&d.getText(w),a,f));break;default:y=p.Utils.compareTextValue(n,w,a,f)}if(y)return{dataRow:e[g],fieldIndex:b,searchFieldIndex:m}}}return null},u.prototype.searchData=function(e,t){var n;if(void 0===t&&(t=-1),e instanceof D.SearchCellOptions||(e=new D.SearchCellOptions(e)),0<=t){var r=this.rowById(t);if(!r)return null;n=this.$_extractTreeRowIds(r.descendants)}else n=this.$_extractTreeRowIds(this._rootRow.descendants);if(!Array.isArray(n)||n.length<=0)return null;var i=n.length,s=null,o=e.fields,u=e.value,t=Math.max(0,e.startFieldIndex),r=Math.max(0,n.indexOf(e.startIndex));if(!o||o.length<1)for(var o=[],a=this.getFields(),f=0;f<a.length;f++)o.push(a[f].orgFieldName);if(o&&0<o.length&&null!=u){for(var l=o.length,c=[],h=0;h<l;h++){var d=o[h];p.Utils.isNumber(d)?c.push(d):c.push(this.getFieldIndex(o[h]))}0<c.length&&(s=!(s=r<i?this.$_searchData(n,c,u,e,r,i-1,t):null)&&e.wrap&&0<r?this.$_searchData(n,c,u,e,0,r-1,0):s)&&(s.fieldName=this.getOrgFieldName(s.fieldIndex))}return s},u.prototype.$_hideDataRows=function(e,t){if(null!=e){for(var n=p.Utils.isArray(e)?e:[e],e=this._hiddenRows.length,r=[],i=0,s=n.length;i<s;i++){var o=n[i];null!=this._findRowById(o)&&(r.push(o),t?this._hiddenRows.indexOf(o)<0&&this._hiddenRows.push(o):0<=(o=this._hiddenRows.indexOf(o))&&this._hiddenRows.splice(o,1))}this._hiddenRows.length!==e&&this._fireRowsHiddenChanged(r,t)}},u.prototype.hideRows=function(e){this.$_hideDataRows(e,!0)},u.prototype.showRows=function(e){this.$_hideDataRows(e,!1)},u.prototype.clearHiddenRows=function(){var e;0<this._hiddenRows.length&&(e=this._hiddenRows.concat(),this._hiddenRows=[],this._fireRowsHiddenChanged(e,!1))},u.prototype.getHiddenRows=function(){var e=this._hiddenRows.concat();return e.sort(function(e,t){return e-t}),e},u.prototype.isHiddenRow=function(e){return!!this.rowById(e)&&0<=this._hiddenRows.indexOf(e)},_dp(u,"hiddenCount",{get:function(){return this._hiddenRows.length}}),u.prototype.summarize=function(e,t){if(null==e)return!1;e.clear();var n=this.rowCount;return!(n<1)&&(e.count=n,e.sum=0,e.min=Number.MAX_VALUE,e.max=Number.MIN_VALUE,e.dataCount=0,this.$_summarizeChildren(this._rootRow,e),e.avg=e.sum/e.count,e.dataAvg=0===e.dataCount?NaN:e.sum/e.dataCount,t&&(t=this.$_summarizeVars(this._rootRow,e),e.varsp=t/e.count,e.vars=t/(e.count-1)),!0)},u.prototype.summarizeRange=function(e,t,n){if(null==e||null==t)return!1;e.clear();var r=t.length;if(r<1)return!1;for(var i=0,s=e.field,o=0,u=NaN,a=NaN,f=0;f<r;){var l=t[f++].getValue(s);if(!isNaN(l)){o=u=a=l,i++;break}}for(;f<r;)l=t[f++].getValue(s),isNaN(l)||(o+=l,l<u&&(u=l),a<l&&(a=l),i++);if(e.count=r,0<i&&(e.sum=o,e.min=u,e.max=a,e.avg=o/r,e.dataCount=i,e.dataAvg=0===e.dataCount?NaN:e.sum/e.dataCount,n))if(1<r){for(var c=0,h=e.avg,p=0;p<r;p++)l=t[p++].getValue(s),isNaN(l)||(c+=Math.pow(l-h,2));e.varsp=c/r,e.vars=c/(r-1)}else e.varsp=0,e.vars=0;return!0},_dp(u,"rowCount",{get:function(){return this._rootRow.descendantCount}}),_dp(u,"immediateUpdate",{get:function(){return!0}}),_dp(u,"isSummarized",{get:function(){return!0}}),_dp(u,"canUndo",{get:function(){return this._commands&&this._commands.canUndo}}),_dp(u,"canRedo",{get:function(){return this._commands&&this._commands.canRedo}}),_dp(u,"undoing",{get:function(){return this._commands&&this._commands.undoing}}),_dp(u,"redoing",{get:function(){return this._commands&&this._commands.redoing}}),u.prototype.getRow=function(e){return this.rowById(e).values},u.prototype.deleteRows=function(e){if(this._checkClientState()&&e&&0<e.length){var t=this._softDeleting;this.beginUpdate();try{this._softDeleting=!1,this._tagLock=!0;try{for(var n=e.length-1;0<=n;n--){var r=e[n],i=r&&r.parent;i&&i._removeChild(r,!0)}}finally{this._tagLock=!1}}finally{this._softDeleting=t,this.endUpdate(!1)}this._rowsRemoved(e)}},u.prototype.equalValues=function(e,t,n){if(t===n)return!0;var r=this._fields[e],t=t.getValue(e),e=n.getValue(e);return r.equalValues(t,e)},u.prototype.sameValues=function(e,t,n,r){if(t===n)return!0;var i=this._fields[e],t=t.getValue(e),e=n.getValue(e);return r?String(t).toLowerCase()==String(e).toLowerCase():i.sameValues(t,e)},u.prototype.equalTexts=function(e,t,n){return this.sameValues(e,t,n,!0)},u.prototype.compareValues=function(e,t,n,r){return t===n?0:(t=t.getValue(e),e=n.getValue(e),null==t?null==e?0:-1:null==e?1:(t=r?String(t).toLowerCase():t,(e=r?String(e).toLowerCase():e)<t?1:t<e?-1:0))},u.prototype.compareTexts=function(e,t,n){return this.compareValues(e,t,n,!0)},u.prototype.compareNumbers=function(e,t,n){return t===n?0:(t=t.getValue(e),e=n.getValue(e),isNaN(t)?isNaN(e)?0:-1:isNaN(e)||e<t?1:t<e?-1:0)},u.prototype.compareBools=function(e,t,n){return t===n?0:(t=t.getValue(e),e=n.getValue(e),t&&!e?1:!t&&e?-1:0)},u.prototype.compareDates=function(e,t,n){return t===n?0:(t=t.getValue(e),e=n.getValue(e),t instanceof Date?!(e instanceof Date)||e<t?1:t<e?-1:0:e instanceof Date?-1:0)},u.prototype.compareObjects=function(e,t,n){var r=this._values[t],i=this._values[n];return r===i?0:(r=r?r[e]:null,i=i?i[e]:null,r?i?this.getField(e).$_compareObject(r,i,t,n):1:i?-1:0)},u.prototype.getDistinctValues=function(e,t,n){if(void 0===t&&(t=-1),void 0===n&&(n=c.SortDirection.ASCENDING),this._checkFieldIndex(e),0<(t=t<0?this.getDescendantCount(this._rootRow):t)){for(var r=this.getDescendants(this._rootRow,0),i=this.getField(e).dataType,s=[],o=[],u=void 0,a=0,f=r.length;a<f;a++)switch(u=r[a].values[e],i){case c.ValueType.NUMBER:null!=u&&isNaN(u)||s.indexOf(u)<0&&s.push(u);break;case c.ValueType.DATE:case c.ValueType.DATETIME:u?o.indexOf(u.getTime())<0&&(o.push(u.getTime()),s.push(u)):(o.push(u),s.push(u));break;case c.ValueType.OBJECT:default:s.indexOf(u)<0&&s.push(u)}return n!==c.SortDirection.NONE&&(s=p.Utils.included(i,c.ValueType.DATETIME,c.ValueType.DATE)?s.sort(function(e,t){return e-t}):s.sort(),n===c.SortDirection.DESCENDING&&(s=s.reverse())),s.slice(0,t)}return null},u.prototype._doFieldsReset=function(){s.prototype._doFieldsReset.call(this),this._clearRows(),this._fireReset()},u.prototype.refreshClients=function(){this._fireRefreshClient()},u.prototype.savePoint=function(e){if(void 0===e&&(e=!0),this._checkClientState()){if(0<this.fieldCount&&0<this._rootRow.count){var t=this._rootRow.copy(),n=this._nextPoint++;return e||t.clearRowStates(!1,!1),this._points.push({id:n,data:t}),n}return-1}},u.prototype.rollback=function(e){if(void 0===e&&(e=0),this._checkClientState())for(var t=this._points.length-1;0<=t;t--){var n=this._points[t];if(n.id==e){this.$_removeSavePoints(t+1),this._rowMap=[],this._rootRow.set(n.data),this._fireReset();break}}},u.prototype.$_removeSavePoints=function(e){for(var t=this._points,n=t.length-1;e<=n;n--)t[n].data=null,t.pop()},u.prototype.clearSavePoints=function(){this.$_removeSavePoints(0)},u.prototype.getSavePoints=function(){for(var e=[],t=0,n=this._points.length;t<n;t++)e.push(this._points[t].id);return e},u.prototype._doCheckStatesChanged=function(){this.$_resetOrgValues()},u.prototype._doRestoreModeChanged=function(){this.$_resetOrgValues()},u.prototype._hasChildrenChanged=function(e){this._fireHasChildrenChanged(e)},u.prototype._iconIndexChanged=function(e){this._fireIconIndexChanged(e)},u.prototype._stateChanged=function(e,t){this._fireRowStateChanged(e,t)},u.prototype._statesChanged=function(e){this._fireRowStatesChanged(e)},u.prototype._valueChanged=function(e,t){this._fireValueChanged(e,t)},u.prototype._rowAdding=function(e,t,n){return this._fireRowAdding(e,t,n)},u.prototype._rowAdded=function(e){this._tagLock||this._tags.addRow(e),this._eventLock<=0&&(this._fireRowAdded(e),this._fireRowCountChanged())},u.prototype._rowsAdding=function(e,t,n){return this._fireRowsAdding(e,t,n)},u.prototype._rowsAdded=function(e,t){this._tagLock||this._tags.addRows(t),this._eventLock<=0&&(this._fireRowsAdded(e,t),this._fireRowCountChanged())},u.prototype._rowRemoving=function(e){return this._fireRowRemoving(e)},u.prototype._rowRemoved=function(e){this._tagLock||this._tags.removeRow(e),this._eventLock<=0&&(this._fireRowRemoved(e),this._fireRowCountChanged())},u.prototype._rowsRemoving=function(e){return this._fireRowsRemoving(e)},u.prototype._rowsRemoved=function(e){this._tagLock||this._tags.removeRows(e),this._eventLock<=0&&(this._fireRowsRemoved(e),this._fireRowCountChanged())},u.prototype._rowCleared=function(e){e&&(e=e.children,this._tags.removeRows(e),this._eventLock<=0&&(this._fireRowsRemoved(e),this._fireRowCountChanged()))},u.prototype._rowUpdating=function(e){return this._fireRowUpdating(e)},u.prototype._rowUpdated=function(e){this._tags.updateRow(e),this._eventLock<=0&&this._fireRowUpdated(e)},u.prototype._rowsUpdating=function(e){return this._fireRowsUpdating(e)},u.prototype._rowsUpdated=function(e){this._tags.updateRows(e),this._eventLock<=0&&this._fireRowsUpdated(e)},u.prototype.getRowId=function(e){throw new Error("Method not implemented.")},u.prototype.getValue=function(e,t){throw new Error("Method not implemented.")},u.prototype.setValue=function(e,t,n){e=this.rowById(e);if(e)return e.setValue(t,n,!1)},u.prototype.getRowObject=function(e){var e=this.rowById(e),t=this.fieldCount,n={},r=e._values;if(r)for(var i=0;i<t;i++)n[this.getOrgFieldName(i)]=r[i];return n},u.prototype.getRowState=function(e){return e=this.rowById(e),e?e.rowState:d.RowState.NONE},u.prototype.setRowState=function(e,t,n){e=this.rowById(e),!e||!this.checkStates&&!n||t!=(n=e.rowState)&&e._changeRowState(t,!0,!!d.isDeletedState(n)||void 0)},u.prototype.changeRowStates=function(e,t){for(var n=e.length,r=[],i=0;i<n;i++){var s=e[i];s._changeRowState(t,!1,!1)&&r.push(s)}0<r.length&&this._fireRowStatesChanged(r)},u.prototype.clearRowStates=function(e,t){this._checkClientState()&&this._rootRow.clearRowStates(e,t)},u.prototype.$_collectStateRows=function(e,t,n){for(var r=0,i=e.count;r<i;r++){var s=e.getChild(r);s.rowState==t&&n.push(s.rowId),this.$_collectStateRows(s,t,n)}},u.prototype.getStateRows=function(e){var t=[];return this.$_collectStateRows(this._rootRow,e,t),t},u.prototype.$_collectAllStateRows=function(e,t){for(var n=0,r=e.count;n<r;n++){var i=e.getChild(n);switch(i.rowState){case d.RowState.CREATED:case d.RowState.UPDATED:case d.RowState.DELETED:case d.RowState.CREATE_AND_DELETED:t[i.rowState].push(i.rowId)}this.$_collectAllStateRows(i,t)}},u.prototype.getAllStateRows=function(){var e={};return e[d.RowState.CREATED]=[],e[d.RowState.UPDATED]=[],e[d.RowState.DELETED]=[],e[d.RowState.CREATE_AND_DELETED]=[],this.$_collectAllStateRows(this._rootRow,e),e},u.prototype.setRowStates=function(e,t,n,r){if(this._checkClientState()){for(var i=r?null:[],s=0,o=e.length;s<o;s++){var u=this.rowById(e[s]);u&&(this.checkStates||n)&&u._changeRowState(t,r,!1)&&!r&&i.push(u)}!r&&0<i.length&&this._fireRowStatesChanged(i)}},u.prototype.$_getRowStateCount=function(e,t){for(var n=0,r=0,i=e.count;r<i;r++){var s=e.getChild(r);0<=t.indexOf(s.rowState)&&n++,n+=this.$_getRowStateCount(s,t)}return n},u.prototype.getRowStateCount=function(e){return this.$_getRowStateCount(this._rootRow,e)},u.prototype.restoreUpdatedStates=function(e){this.restoreUpdatedRows(e)},u.prototype.restoreUpdatedRows=function(e){if(this._checkClientState()){var t=[];if(null==e)this._rootRow.$_restoreRow(!0,t);else for(var n=e.length;n--;){var r=this.rowById(e[n]);r&&r.$_restoreRow(!1,t)}1==t.length?this._fireRowStateChanged(t[0],!1):1<t.length&&this._fireRowStatesChanged(t)}},u.prototype.getUpdatedCells=function(e){var t=this.restoreMode;if(t!=E.RestoreMode.AUTO&&t!=E.RestoreMode.EXPLICIT)return null;if(null==e)e=this.getStateRows(d.RowState.UPDATED);else if(!Array.isArray(e)){if("number"!=typeof e)return null;e=[e]}if(!Array.isArray(e))return null;for(var n=[],r=0,i=e.length;r<i;r++){var s,o=this.rowById(e[r]);!o||(s=o.$_getUpdatedCells())&&0<s.length&&n.push({__rowId:o.rowId,updatedCells:s})}return n},u.prototype.canUpdateRow=function(e){return!0},u.prototype.canInsertRow=function(e){return!0},u.prototype.canDeleteRow=function(e){return!0},u.prototype.isDataChanged=function(e,t){if(e<0)return!1;var n=this.rowById(e);return n||p.Utils.isDebugging(),e=n._orgValues,n.rowState!==d.RowState.UPDATED||!e?!1:e?(e=e[t],n=n._values[t],t=this._fields[t],t&&!t.sameValues(e,n)):!1},u.prototype.$_createFrom=function(e,t){var n=e.getObject();t&&(n=this._convertValues(n,t));for(var n=this.objectToRow(n),i=new r(this,n),s=0;s<e.count;s++){var o=this.$_createFrom(e.getChild(s),t);i.addChild(o,!1)}return i},u.prototype.$_insertRowsFrom=function(e,t,n,r){for(var i=[],s=0,o=e.rowsByIds(n,!1);s<o.length;s++){var u=o[s];i.push(this.$_createFrom(u,t))}e=0<=r?this.rowById(r):null,n=e?e.parent:this.rootRow,0<=r?(e=n.indexOf(e),n.insertChildren(e,i,!1)):n.insertChildren(n.count,i,!1)},u.prototype.insertRowsFrom=function(e,t,n,r){this.$_insertRowsFrom(e,t,n,r)},u.prototype.appendRowsFrom=function(e,t,n){this.$_insertRowsFrom(e,t,n,-1)},u.prototype.fillValue=function(e,t,n){if(e&&0!=e.length&&t&&0!=t.length){for(var r=[],i=0;i<e.length;i++){var s=this.rowById(e[i]);s&&r.push(s)}this.undoable?this._commands.execute(new ot.FillValueTreeDataCommand(this,r,t,n)):this.$_fillValue(r,t,n)}},u.prototype.updateRows=function(e,t,n){if(e&&0!=e.length){for(var r=[],i=0;i<e.length;i++){var s=this.rowById(e[i]);s&&r.push(s)}this.undoable?this._commands.execute(new ut.UpdateRowsTreeDataCommand(this,r,t,n)):this.$_updateRows(r,t,n)}},u.prototype._findRowById=function(e){return this._rootRow.findById(e)},u.prototype._checkSum=function(e){if(e!=this.rowCount)throw new Error("Invalid row count: "+e+" <> "+this.rowCount)},u.prototype._clearRows=function(){this._rootRow._removeChildren(),this._rowMap=[],this._rootRow&&0<this._rootRow.descendantCount||(this._nextRowId=1),this._tags.clearRows(),this._checkSum(0)},u.prototype.$_fillValue=function(e,t,n){if(this._checkClientState()&&e&&e.length&&t&&t.length){this.refreshFieldFormats();for(var r=[],i=t.length,s=0,o=e;s<o.length;s++){var u=o[s];u.rowState==d.RowState.NONE&&r.push(u);for(var a=u.values,f=0;f<i;f++)a[t[f]]=n;u.$_internalUpdate(a,!1,!1)}0<r.length&&this._fireRowStatesChanged(r),this._tags.updateRows(e),this._fireRowsUpdated(e)}},u.prototype.$_updateRows=function(e,t,n){if(this._checkClientState()&&e&&t){var r=Math.min(e.length,t.length);if(!(r<1)){this.refreshFieldFormats();for(var i=[],s=0;s<r;s++){var o=e[s];o.rowState==d.RowState.NONE&&i.push(o),o.$_internalUpdate(t,n,!1)}0<i.length&&this._fireRowStatesChanged(i),this._tags.updateRows(e),this._fireRowsUpdated(e)}}},u.prototype.findRow=function(e,t){return e&&0<e.length&&t&&t.length>=e.length?this._rootRow.findChild(e,t):null},u.prototype.$_resetOrgValues=function(){this._needOrgValues=this.checkStates&&this.restoreMode!=E.RestoreMode.NONE,this._needRestore=this._needOrgValues&&this.restoreMode==E.RestoreMode.AUTO,this._rootRow._clearOrgValues()},u.prototype.$_summarizeChildren=function(e,t){for(var n=t.field,r=e.count,i=0;i<r;i++){var s=e.getChild(i),o=s.getValue(n);isNaN(o)||(t.sum+=o,t.dataCount++,o<t.min&&(t.min=o),o>t.max&&(t.max=o)),this.$_summarizeChildren(s,t)}},u.prototype.$_summarizeVars=function(e,t){for(var n=t.field,r=t.avg,i=e.count,s=0,o=0;o<i;o++){var u=e.getChild(o),a=u.getValue(n);isNaN(a)||(s+=Math.pow(a-r,2)),s+=this.$_summarizeVars(u,t)}return s},u.prototype._summarizeChildren=function(e,t){for(var n=t.field,r=e.count,i=0;i<r;i++){var s=e.getChild(i),o=s.getValue(n);isNaN(o)||(t.sum+=o,o<t.min&&(t.min=o),o>t.max&&(t.max=o)),this._summarizeChildren(s,t)}},u.prototype._summarizeVars=function(e,t){for(var n=t.field,r=t.avg,i=e.count,s=0,o=0;o<i;o++){var u=e.getChild(o),a=u.getValue(n);isNaN(a)||(s+=Math.pow(a-r,2)),s+=this._summarizeVars(u,t)}return s},u.prototype._summarize=function(e,t){return null!=e&&(e.clear(),!(this.rowCount<1)&&(e.count=0,e.sum=0,e.min=Number.MIN_VALUE,e.max=Number.MAX_VALUE,this._summarizeChildren(this._rootRow,e),e.avg=e.sum/e.count,t&&(t=this._summarizeVars(this._rootRow,e),e.vars=t/e.count),!0))},u.prototype._fireDisposed=function(){this._eventLock<=0&&this.fireEvent(u.DISPOSED)},u.prototype._fireReset=function(){this._eventLock<=0&&this.fireEvent(u.RESET)},u.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent(u.REFRESH)},u.prototype._fireRefreshClient=function(){this._eventLock<=0&&this.fireEvent(u.REFRESH_CLIENT)},u.prototype._fireCleared=function(){this._eventLock<=0&&this.fireEvent(u.CLEARED)},u.prototype._fireRowCountChanged=function(){this._eventLock<=0&&this.fireEvent(u.ROW_COUNT_CHANGED,this.rowCount)},u.prototype._fireRowAdding=function(e,t,n){return!(this._eventLock<=0)||this.fireConfirmEvent(u.ROW_ADDING,e,t,n)},u.prototype._fireRowAdded=function(e){this._eventLock<=0&&this.fireEvent(u.ROW_ADDED,e)},u.prototype._fireRowsAdding=function(e,t,n){return!(this._eventLock<=0)||this.fireConfirmEvent(u.ROWS_ADDING,e,t,n)},u.prototype._fireRowsAdded=function(e,t){this._eventLock<=0&&this.fireEvent(u.ROWS_ADDED,e,t)},u.prototype._fireRowRemoving=function(e){return!(this._eventLock<=0)||this.fireConfirmEvent(u.ROW_REMOVING,e)},u.prototype._fireRowRemoved=function(e){this._eventLock<=0&&this.fireEvent(u.ROW_REMOVED,e)},u.prototype._fireRowsRemoving=function(e){return!(this._eventLock<=0)||this.fireConfirmEvent(u.ROWS_REMOVING,e)},u.prototype._fireRowsRemoved=function(e){this._eventLock<=0&&this.fireEvent(u.ROWS_REMOVED,e)},u.prototype._fireRowUpdating=function(e){return!(this._eventLock<=0)||this.fireConfirmEvent(u.ROW_UPDATING,e)},u.prototype._fireRowUpdated=function(e){this._eventLock<=0&&this.fireEvent(u.ROW_UPDATED,e)},u.prototype._fireRowsUpdating=function(e){return!(this._eventLock<=0)||this.fireConfirmEvent(u.ROWS_UPDATING,e)},u.prototype._fireRowsUpdated=function(e){this._eventLock<=0&&this.fireEvent(u.ROWS_UPDATED,e)},u.prototype._fireValueChanging=function(e,t,n){return!(this._eventLock<=0)||this.fireConfirmEvent(u.VALUE_CHANGING,e,t,n)},u.prototype._fireValueChanged=function(e,t){this._eventLock<=0&&this.fireEvent(u.VALUE_CHANGED,e,t)},u.prototype._fireIconIndexChanged=function(e){this._eventLock<=0&&this.fireEvent(u.ICON_INDEX_CHANGED,e)},u.prototype._fireHasChildrenChanged=function(e){this._eventLock<=0&&this.fireEvent(u.HAS_CHILDREN_CHANGED,e)},u.prototype._fireRowStateChanged=function(e,t){this._eventLock<=0&&this.fireEvent(u.ROW_STATE_CHANGED,e,t)},u.prototype._fireRowStatesChanged=function(e){this._eventLock<=0&&this.fireEvent(u.ROW_STATES_CHANGED,e)},u.prototype._fireRowSiblingMoving=function(e,t){return!(this._eventLock<=0)||this.fireConfirmEvent(u.ROW_SIBLING_MOVING,e,t)},u.prototype._fireRowSiblingMoved=function(e,t){this._eventLock<=0&&this.fireEvent(u.ROW_SIBLING_MOVED,e,t)},u.prototype._fireRowsSiblingMoving=function(e,t){return!(this._eventLock<=0)||this.fireConfirmEvent(u.ROWS_SIBLING_MOVING,e,t)},u.prototype._fireRowsSiblingMoved=function(e,t){this._eventLock<=0&&this.fireEvent(u.ROWS_SIBLING_MOVED,e,t)},u.prototype._fireRowParentChanging=function(e,t,n){return!(this._eventLock<=0)||this.fireConfirmEvent(u.ROW_PARENT_CHANGING,e,t,n)},u.prototype._fireRowParentChanged=function(e,t,n){this._eventLock<=0&&this.fireEvent(u.ROW_PARENT_CHANGED,e,t,n)},u.prototype._fireRowsParentChanging=function(e,t,n){return!(this._eventLock<=0)||this.fireConfirmEvent(u.ROWS_PARENT_CHANGING,e,t,n)},u.prototype._fireRowsParentChanged=function(e,t,n){this._eventLock<=0&&this.fireEvent(u.ROWS_PARENT_CHANGED,e,t,n)},u.prototype._fireRowsHiddenChanged=function(e,t){this._eventLock<=0&&this.fireEvent(u.ROWS_HIDDEN_CHANGED,e,t)},u.prototype.fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent(u.DATA_LOAD_COMPLATED)},u.prototype.undo=function(){this.canUndo&&this._commands.undo()},u.prototype.redo=function(){this.canRedo&&this._commands.redo(!0)},u.prototype.clearCommandStack=function(){this._commands&&this._commands.flush()},u.DISPOSED="onTreeDataProviderDisposed",u.RESET="onTreeDataProviderReset",u.REFRESH="onTreeDataProviderRefresh",u.REFRESH_CLIENT="onTreeDataProviderRefreshClient",u.CLEARED="onTreeDataProviderCleared",u.ROW_COUNT_CHANGED="onTreeDataProviderRowCountChanged",u.ROW_ADDING="onTreeDataProviderRowAdding",u.ROW_ADDED="onTreeDataProviderRowAdded",u.ROWS_ADDING="onTreeDataProviderRowsAdding",u.ROWS_ADDED="onTreeDataProviderRowsAdded",u.ROW_REMOVING="onTreeDataProviderRowRemoving",u.ROW_REMOVED="onTreeDataProviderRowRemoved",u.ROWS_REMOVING="onTreeDataProviderRowsRemoving",u.ROWS_REMOVED="onTreeDataProviderRowsRemoved",u.ROW_UPDATING="onTreeDataProviderRowUpdating",u.ROW_UPDATED="onTreeDataProviderRowUpdated",u.ROWS_UPDATING="onTreeDataProviderRowsUpdating",u.ROWS_UPDATED="onTreeDataProviderRowsUpdated",u.VALUE_CHANGING="onTreeDataProviderValueChanging",u.VALUE_CHANGED="onTreeDataProviderValueChanged",u.ICON_INDEX_CHANGED="onTreeDataProviderIconIndexChanged",u.HAS_CHILDREN_CHANGED="onTreeDataProviderHasChildrenChanged",u.ROW_STATE_CHANGED="onTreeDataProviderRowStateChanged",u.ROW_STATES_CHANGED="onTreeDataProviderRowStatesChanged",u.ROW_SIBLING_MOVING="onTreeDataProviderRowSiblingMoving",u.ROW_SIBLING_MOVED="onTreeDataProviderRowSiblingMoved",u.ROWS_SIBLING_MOVING="onTreeDataProviderRowsSiblingMoving",u.ROWS_SIBLING_MOVED="onTreeDataProviderRowsSiblingMoved",u.ROW_PARENT_CHANGING="onTreeDataProviderRowParentChanging",u.ROW_PARENT_CHANGED="onTreeDataProviderRowParentChanged",u.ROWS_PARENT_CHANGING="onTreeDataProviderRowsParentChanging",u.ROWS_PARENT_CHANGED="onTreeDataProviderRowsParentChanged",u.ROWS_HIDDEN_CHANGED="onTreeDataProviderRowsHideChanged",u.DATA_LOAD_COMPLATED="onTreeDataProviderDataLoadComplated",u);t.LocalTreeDataProvider=o});t(ft),ft.TreeDataRowImpl,ft.LocalTreeDataProvider;var lt=n(function(e,t){function i(e){var t=n.call(this)||this;return t._ds=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},i.prototype.load=function(e,t,n){var r=new tt.DataFillOptions(n);if(this.$_checkEmpty(t,r))return 0;switch(this.$_prepareLoad(r),e=e&&e.toLowerCase()){case"json":return this.$_loadJson(t,r);case"xml":return this.$_loadXml(t,r);case"csv":return this.$_loadCsv(t,r)}return 0},i.prototype.$_loadJson=function(e,t){if(e="string"==typeof e?JSON.parse(e):e){var n=t.childrenField,r=t.iconField;if(t.fillMode!=tt.DataFillMode.APPEND)return this._ds.setJsonRows(e,t.rows,n,r);var i=this._ds.rowById(t.parentId);return this._ds.appendJsonRows(i,e,t.rows,n,r)}return 0},i.prototype.$_loadXml=function(e,t){if((e="string"==typeof e?et.XmlUtils.parseXml(e):e)&&e.documentElement){var n=t.childrenField,r=t.iconField;if(t.fillMode!=tt.DataFillMode.APPEND)return this._ds.setXmlRows(e,t.rows,n,r);var i=this._ds.rowById(t.parentId);return this._ds.appendXmlRows(i,e,t.rows,n,r)}return 0},i.prototype.$_loadCsv=function(e,t){var n=t.start,r=t.count,i=t.quoted,s=t.delimiter,e=V.DataHelper.csvToArray(this._ds,e,n,r,i,s);return e&&0<e.length?(n=t.treeField,i=t.childrenField,s=t.iconField,r=t.needSorting,t.fillMode==tt.DataFillMode.APPEND?(t=this._ds.rowById(t.parentId),this._ds.appendDataRows(t,e,n,r,i,s)):this._ds.setRows(e,n,r,i,s),e.length):0},i.prototype.$_fillEmpty=function(e){e.fillMode===tt.DataFillMode.SET&&this._ds.setRows(null,null,!1,null,null)},i.prototype.$_checkEmpty=function(e,t){return!e&&(this.$_fillEmpty(t),!0)},i.prototype.$_prepareLoad=function(e){},i);t.TreeDataLoader=r});t(lt),lt.TreeDataLoader;var ct=n(function(e,t){function r(){}function i(){}function o(e){this._dp=this._createProvider(e),this._listener=this._createListener(this._dp)}function f(){var e=null!==u&&u.apply(this,arguments)||this;return e.onRowCountChanged=null,e.onRowUpdating=null,e.onRowUpdated=null,e.onRowsUpdated=null,e.onRowListUpdated=null,e.onRowInserting=null,e.onRowInserted=null,e.onRowsInserted=null,e.onRowDeleting=null,e.onRowDeleted=null,e.onRowsDeleted=null,e.onRowMoving=null,e.onRowMoved=null,e.onRowsMoving=null,e.onRowsMoved=null,e.onRowListMoving=null,e.onRowListMoved=null,e.onValueChanged=null,e.onDataChanged=null,e.onRowStateChanged=null,e.onRowStatesChanged=null,e.onRowStatesCleared=null,e.onRestoreRows=null,e}function v(e){return e=h.call(this,e=void 0===e?!1:e)||this,e.onRowCountChanged=null,e.onRowAdding=null,e.onRowAdded=null,e.onRowsAdded=null,e.onRowDeleting=null,e.onRowDeleted=null,e.onRowsDeleted=null,e.onRowUpdating=null,e.onRowUpdated=null,e.onRowsUpdating=null,e.onRowsUpdated=null,e.onValueChanged=null,e.onDataChanged=null,e.onRowStateChanged=null,e.onRowStatesChanged=null,e.onRowSiblingMoving=null,e.onRowSiblingMoved=null,e.onRowsSiblingMoving=null,e.onRowsSiblingMoved=null,e.onRowParentChanging=null,e.onRowParentChanged=null,e}function y(e,t){var n=m.call(this)||this;return n._del=e,n._provider=t,n._provider.addListener(n),n}function E(e,t){var n=b.call(this)||this;return n._del=e,n._provider=t,n._provider.addListener(n),n}Object.defineProperty(t,"__esModule",{value:!0});var n=(r.getFieldIndex=function(e,t){return"string"==typeof t?e.getFieldIndex(t):t},r.fillData=function(e,t,n,r){e=new tt.DataLoader(e);try{e.load(t,n,r)}finally{e.dispose()}},r.fillTreeData=function(e,t,n,r){e=new lt.TreeDataLoader(e);try{e.load(t,n,r)}finally{e.dispose()}},r.extractTreeRows=function(e){if(e){for(var t=e.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r].rowId;return n}return null},r);t.EventListenerBase=i;var s=(o.prototype.dispose=function(){this._dp.dispose(),this._dp=null},_dp(o,"subTypeEnabled",{get:function(){return this._dp.subTypeEnabled},set:function(e){this._dp.subTypeEnabled=e}}),_dp(o,"undoable",{get:function(){return this._dp.undoable},set:function(e){this._dp.undoable=e}}),_dp(o,"insertable",{get:function(){return this._dp.insertable},set:function(e){this._dp.insertable=e}}),_dp(o,"updatable",{get:function(){return this._dp.updatable},set:function(e){this._dp.updatable=e}}),_dp(o,"deletable",{get:function(){return this._dp.deletable},set:function(e){this._dp.deletable=e}}),_dp(o,"softDeleting",{get:function(){return this._dp.softDeleting},set:function(e){this._dp.softDeleting=e}}),_dp(o,"deleteCreated",{get:function(){return this._dp.deleteCreated},set:function(e){this._dp.deleteCreated=e}}),_dp(o,"checkStates",{get:function(){return this._dp.checkStates},set:function(e){this._dp.checkStates=e}}),_dp(o,"restoreMode",{get:function(){return this._dp.restoreMode},set:function(e){this._dp.restoreMode=e}}),_dp(o,"strictRestore",{get:function(){return this._dp.strictRestore},set:function(e){this._dp.strictRestore=e}}),_dp(o,"booleanFormat",{get:function(){return this._dp.booleanFormat},set:function(e){this._dp.booleanFormat=e}}),_dp(o,"datetimeFormat",{get:function(){return this._dp.datetimeFormat},set:function(e){this._dp.datetimeFormat=e}}),_dp(o,"baseYear",{get:function(){return this._dp.baseYear},set:function(e){this._dp.baseYear=e}}),_dp(o,"amText",{get:function(){return this._dp.amText},set:function(e){this._dp.amText=e}}),_dp(o,"pmText",{get:function(){return this._dp.pmText},set:function(e){this._dp.pmText}}),_dp(o,"commitBeforeDataEdit",{get:function(){return this._dp.commitBeforeDataEdit},set:function(e){this._dp.commitBeforeDataEdit=e}}),o.prototype.getOptions=function(){var e=this._dp;return{subTypeEnabled:e.subTypeEnabled,undoable:e.undoable,insertable:e.insertable,updatable:e.updatable,deletable:e.deletable,softDeleting:e.softDeleting,deleteCreated:e.deleteCreated,checkStates:e.checkStates,restoreMode:e.restoreMode.toString(),strictRestore:e.strictRestore,booleanFormat:e.booleanFormat,datetimeFormat:e.datetimeFormat,baseYear:e.baseYear,amText:e.amText,pmText:e.pmText,commitBeforeDataEdit:e.commitBeforeDataEdit}},o.prototype.setOptions=function(e){this._dp.assignFrom(e)},o.prototype.beginUpdate=function(){this._dp.beginUpdate()},o.prototype.endUpdate=function(e){this._dp.endUpdate(e=void 0===e?!0:e)},o.prototype.getFields=function(){return this._dp.getFields()},o.prototype.setFields=function(e){p.Utils.isArray(e)&&this._dp.setFields(e)},o.prototype.addField=function(e,t,n){return this._dp.addField(e,t,n)},o.prototype.getFieldCount=function(){return this._dp.fieldCount},o.prototype.fieldByName=function(e){return this._dp.fieldByName(e)},o.prototype.getFieldNames=function(){return this._dp.getFieldNames()},o.prototype.getOrgFieldNames=function(){return this._dp.getOrgFieldNames()},o.prototype.getFieldName=function(e){return this._dp.getFieldName(e)},o.prototype.getOrgFieldName=function(e){return this._dp.getOrgFieldName(e)},o.prototype.getFieldIndex=function(e){return this._dp.getFieldIndex(e)},o.prototype.hasData=function(e){return this._dp.hasData(e)},o.prototype.getValues=function(e){return this._dp.getRow(e)},o.prototype.getJsonRow=function(e,t){return this._dp.getRowObject(e,t)},o.prototype.checkRowStates=function(e){this._dp.checkStates=e},o.prototype.getRowState=function(e){return this._dp.getRowState(e)},o.prototype.getStateRows=function(e){return void 0===e&&(e=d.RowState.NONE),this._dp.getStateRows(e)},o.prototype.getAllStateRows=function(){return this._dp.getAllStateRows()},o.prototype.clearRowStates=function(e,t){this._dp.clearRowStates(e,t=void 0===t?!1:t)},o.prototype.setRowState=function(e,t,n){void 0===t&&(t=d.RowState.NONE),this._dp.setRowState(e,t,n=void 0===n?!1:n)},o.prototype.setRowStates=function(e,t,n,r){void 0===t&&(t=d.RowState.NONE),this._dp.setRowStates(e,t,n=void 0===n?!1:n,r=void 0===r?!1:r)},o.prototype.getRowStateCount=function(e){if(!e)return 0;var t=[];if("*"==e||"all"==e)t.push(d.RowState.CREATED,d.RowState.UPDATED,d.RowState.DELETED,d.RowState.CREATE_AND_DELETED);else for(var n=Array.isArray(e)?e:[e],r=0,i=n.length;r<i;r++)t.push(n[r]);return 0<t.length?this._dp.getRowStateCount(t):void 0},o.prototype.restoreUpdatedStates=function(e){return this._dp.restoreUpdatedStates(e)},o.prototype.restoreUpdatedRows=function(e){return this._dp.restoreUpdatedRows(p.Utils.makeArray(e))},o.prototype.getUpdatedCells=function(e){return this._dp.getUpdatedCells(e)},o.prototype.getDistinctValues=function(e,t,n){return void 0===t&&(t=-1),n=(n=void 0===n?c.SortDirection.ASCENDING:n)||c.SortDirection.ASCENDING,e="string"==typeof e?this._dp.getFieldIndex(e):e,this._dp.getDistinctValues(e,t,n)},o.prototype.savePoint=function(e){return this._dp.savePoint(e=void 0===e?!0:e)},o.prototype.rollback=function(e){this._dp.rollback(e=void 0===e?0:e)},o.prototype.clearSavePoints=function(){this._dp.clearSavePoints()},o.prototype.getSavePoints=function(){return this._dp.getSavePoints()},o.prototype.setDataComparer=function(e,t){e="string"==typeof e?this._dp.getFieldIndex(e):e,this._dp.setDataComparer(e,t)},o.prototype.exportToCsv=function(e){this._dp.exportToCsv(e)},o.prototype.destroy=function(){this.dispose()},o.prototype.undo=function(){this._dp.undo()},o.prototype.redo=function(){this._dp.redo()},o.prototype.clearCommandStack=function(){this._dp.clearCommandStack()},o.prototype.getProvider=function(){return this._dp},o);t.DataProviderBase=s;var u,a=(u=s,l.__extends(f,u),f.prototype.getRowCount=function(){return this._dp.rowCount},f.prototype.setRowCount=function(e,t,n,r){return void 0===r&&(r=d.RowState.NONE),this._dp.setRowCount(e,t=void 0===t?!1:t,n=void 0===n?null:n,r)},f.prototype.setFilterMode=function(e){this._dp.setFilterMode(e=void 0===e?"and":e)},f.prototype.setFilters=function(e,t){this._dp.setFilters(e,t=void 0===t?"and":t)},f.prototype.fillJsonData=function(e,t){t=t instanceof tt.DataFillOptions?t:new tt.DataFillOptions(t),n.fillData(this._dp,"json",e,t)},f.prototype.fillXmlData=function(e,t){t=t instanceof tt.DataFillOptions?t:new tt.DataFillOptions(t),n.fillData(this._dp,"xml",e,t)},f.prototype.fillCsvData=function(e,t){t=t instanceof tt.DataFillOptions?t:new tt.DataFillOptions(t),n.fillData(this._dp,"csv",e,t)},f.prototype.setRows=function(e,t,n){this._dp.setRows(e,t=void 0===t?0:t,n=void 0===n?-1:n)},f.prototype.addRows=function(e,t,n,r){this._dp.appendRows(e,t=void 0===t?0:t,n=void 0===n?-1:n,r=void 0===r?!1:r)},f.prototype.insertRows=function(e,t,n,r,i){this._dp.insertRows(e,t,n=void 0===n?0:n,r=void 0===r?-1:r,i=void 0===i?!1:i)},f.prototype.updateRows=function(e,t,n,r,i,s){this._dp.updateRows(e,t,n=void 0===n?0:n,r=void 0===r?-1:r,i=void 0===i?!1:i,s=void 0===s?!1:s)},f.prototype.clearRows=function(){this._dp.clearRows()},f.prototype.updateRow=function(e,t,n){this._dp.updateRow(e,t,n)},f.prototype.hideRows=function(e){this._dp.hideRows(e)},f.prototype.showHiddenRows=function(e){this._dp.showRows(e)},f.prototype.getHiddenRows=function(){return this._dp.getHiddenRows()},f.prototype.isHiddenRow=function(e){return this._dp.isHiddenRow(e)},f.prototype.resetHiddenRows=function(){this._dp.clearHiddenRows()},f.prototype.addRow=function(e){return this._dp.appendRow(e)},f.prototype.insertRow=function(e,t){return this._dp.insertRow(e,t)},f.prototype.removeRow=function(e){this._dp.removeRow(e)},f.prototype.removeRows=function(e,t){this._dp.removeRows(e,t=void 0===t?!1:t)},f.prototype.moveRow=function(e,t){this._dp.moveRow(e,t)},f.prototype.moveRows=function(e,t,n){this._dp.moveRows(e,t,n)},f.prototype.getValue=function(e,t){return t=n.getFieldIndex(this._dp,t),this._dp.getValue(e,t)},f.prototype.setValue=function(e,t,r){t=n.getFieldIndex(this._dp,t),this._dp.setValue(e,t,r)},f.prototype.getRows=function(e,t){return this._dp.getRows(e=void 0===e?0:e,t=void 0===t?-1:t)},f.prototype.getJsonRows=function(e,t,n){return this._dp.getRowObjects(e=void 0===e?0:e,t=void 0===t?-1:t,n)},f.prototype.getOutputRow=function(e,t){return this._dp.getOutputObject(e,t)},f.prototype.getOutputRows=function(e,t,n){return this._dp.getOutputObjects(e,t=void 0===t?0:t,n=void 0===n?-1:n)},f.prototype.getFieldValues=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=-1),e=n.getFieldIndex(this._dp,e),this._dp.getFieldValues(e,t,r)},f.prototype.searchDataRow=function(e){return e?this._dp.searchDataRow(e):-1},f.prototype.searchData=function(e){return e?this._dp.searchData(e):null},f.prototype._createProvider=function(e){return new Y.LocalDataProvider(e,this)},f.prototype._createListener=function(e){return new g(this,e)},f);t.LocalDataProvider=a;var h,s=(h=s,l.__extends(v,h),v.prototype.dispose=function(){h.prototype.dispose.call(this)},v.prototype.getRowCount=function(){return this._dp.rowCount},v.prototype.setRows=function(e,t,n,r,i){this._dp.setRows(e,t,n,r,i)},v.prototype.setCsvRows=function(e,t,n,r,i){this._dp.setCsvRows(e,t,n,r,i)},v.prototype.setXmlRows=function(e,t,n,r){this._dp.setXmlRows(e,t,n,r)},v.prototype.setObjectRows=function(e,t,n,r){this._dp.setJsonRows(e,t,n,r)},v.prototype.setNestedRows=function(e,t,n,r,i){this._dp.setJsonRows2(e,t,n,r,i)},v.prototype.fillJsonData=function(e,t){t=new tt.DataFillOptions(t);try{n.fillTreeData(this._dp,"json",e,t)}finally{t.dispose(),t=null}},v.prototype.fillXmlData=function(e,t){t=new tt.DataFillOptions(t);try{n.fillTreeData(this._dp,"xml",e,t)}finally{t.dispose(),t=null}},v.prototype.fillCsvData=function(e,t){t=new tt.DataFillOptions(t);try{n.fillTreeData(this._dp,"csv",e,t)}finally{t.dispose(),t=null}},v.prototype.getIconIndex=function(e){return this._dp.rowById(e).iconIndex},v.prototype.setIconIndex=function(e,t){this._dp.rowById(e).iconIndex=t},v.prototype.getParent=function(e){return e=this._dp.rowById(e),e&&e.parent?e.parent.rowId:-1},v.prototype.getLevel=function(e){return this._dp.rowById(e).level},v.prototype.getChildCount=function(e){return null==e||-1==e?this._dp.getChildCount(null):(e=this._dp.rowById(e),e&&e.children?e.children.length:0)},v.prototype.getChildren=function(e){return e=null==e||-1==e?this._dp.getRows(null):this._dp.rowById(e).children,n.extractTreeRows(e)},v.prototype.getDescendantCount=function(e){return null==e||-1==e?this._dp.getDescendantCount(null):this._dp.rowById(e).descendantCount},v.prototype.getDescendants=function(e,t){void 0===t&&(t=-1);var r=null;return null!=e&&-1!=e&&(r=this._dp.rowById(e)),t=this._dp.getDescendants(r,t),n.extractTreeRows(t)},v.prototype.getAncestors=function(e){return e=this._dp.rowById(e),e&&e.ancestors?n.extractTreeRows(e.ancestors):null},v.prototype.getJsonRow=function(e,t){var n=this._dp.rowById(e);return n&&(e=n.getObject(),t&&(e.__rowState=n.rowState)),n?n.getObject():null},v.prototype.getJsonRows=function(e,t,n,r,i){return void 0===t&&(t=!1),void 0===n&&(n="rows"),void 0===r&&(r="iconIndex"),e=null==e?this._dp.rootRow:this._dp.rowById(e),e?e.getChildObjects(t,n,r,!0,i):null},v.prototype.getOutputRow=function(e,t,n){void 0===n&&(n="iconIndex"),e=new k.DataOutputOptions(e);try{var r=null==t?this._dp.rootRow:this._dp.rowById(t),i=r?r.getOutput(e,n):null}finally{e.dispose()}return i},v.prototype.getOutputRows=function(e,t,n,r,i){void 0===n&&(n=!1),void 0===r&&(r="rows"),void 0===i&&(i="iconIndex"),e=new k.DataOutputOptions(e);try{var s=null==t||t<=-1?this._dp.rootRow:this._dp.rowById(t),o=s?s.getChildOutputObjects(e,n,r,i):null}finally{e.dispose()}return o},v.prototype.addChildRow=function(e,t,n,r){void 0===n&&(n=-1),void 0===r&&(r=!1);var i=this._dp,e=i.rowById(e)||i.rootRow,r=i.createRow(t,n,r);return e.addChild(r,!1)?r.rowId:-1},v.prototype.insertChildRow=function(e,t,n,r,i){void 0===r&&(r=-1),void 0===i&&(i=!1);var s=this._dp,e=s.rowById(e)||s.rootRow,i=s.createRow(n,r,i);return e.insertChild(t,i,!1)?i.rowId:-1},v.prototype.updateRow=function(e,t,n){return e=this._dp.rowById(e),!!e&&e.update(t,n)},v.prototype.updateRows=function(e,t,n){this._dp.updateRows(e,t,n)},v.prototype.removeRow=function(e){return e=this._dp.rowById(e),!!e&&!!e.parent&&e.parent.removeChild(e)},v.prototype.removeRows=function(e){return!!(e&&0<e.length)&&this._dp.removeRows(e)},v.prototype.clearRows=function(){this._dp.clearRows()},v.prototype.hideRows=function(e){this._dp.hideRows(e)},v.prototype.showHiddenRows=function(e){this._dp.showRows(e)},v.prototype.getHiddenRows=function(){return this._dp.getHiddenRows()},v.prototype.isHiddenRow=function(e){return this._dp.isHiddenRow(e)},v.prototype.resetHiddenRows=function(){this._dp.clearHiddenRows()},v.prototype.getValue=function(e,t){return e=this._dp.rowById(e),t=n.getFieldIndex(this._dp,t),e?e.getValue(t):null},v.prototype.setValue=function(e,t,r){e=this._dp.rowById(e),t=n.getFieldIndex(this._dp,t),e&&e.setValue(t,r,!1)},v.prototype.moveRowSibling=function(e,t){return e=this._dp.rowById(e),!!e&&this._dp.changeRowIndex(e,t)},v.prototype.moveRowsSibling=function(e,t){return e=this._dp.rowById(e),!!e&&this._dp.changeRowIndex(e,t)},v.prototype.changeRowParent=function(e,t,n){return e=this._dp.rowById(e),t=this._dp.rowById(t),!!e&&!!t&&this._dp.changeRowParent(e,t,n)},v.prototype.searchDataRow=function(e){return e?this._dp.searchDataRow(e,e.parentId):-1},v.prototype.searchData=function(e){return e?this._dp.searchData(e,e.parentId):null},v.prototype._createProvider=function(e){return new ft.LocalTreeDataProvider(e,this)},v.prototype._createListener=function(e){return new w(this,e)},v);t.LocalTreeDataProvider=s;var m,g=(m=i,l.__extends(y,m),y.prototype.dispose=function(){this._del=null,this._provider.removeListener(this),this._provider=null},y.prototype.onDataProviderRowCountChanged=function(e){this._del.onRowCountChanged?this._del.onRowCountChanged(this._del,e.rowCount):p.Utils.log("onRowCountChanged: "+e.rowCount)},y.prototype.onDataProviderRowUpdating=function(e,t,n){return this._del.onRowUpdating?this._del.onRowUpdating(this._del,t):(p.Utils.log("onRowUpdating: "+t),!0)},y.prototype.onDataProviderRowUpdated=function(e,t){this._del.onRowUpdated?this._del.onRowUpdated(this._del,t):p.Utils.log("onRowUpdated: "+t)},y.prototype.onDataProviderRowsUpdated=function(e,t,n){this._del.onRowsUpdated?this._del.onRowsUpdated(this._del,t,n):p.Utils.log("onRowsUpdated: "+t+", "+n)},y.prototype.onDataProviderRowListUpdated=function(e,t){this._del.onRowListUpdated?this._del.onRowListUpdated(this._del,t):p.Utils.log("onRowListUpdated: "+t)},y.prototype.onDataProviderRowInserting=function(e,t,n){return this._del.onRowInserting?this._del.onRowInserting(this._del,t,n):(p.Utils.log("onRowInserting: "+t),!0)},y.prototype.onDataProviderRowInserted=function(e,t){this._del.onRowInserted?this._del.onRowInserted(this._del,t):p.Utils.log("onRowInserted: "+t)},y.prototype.onDataProviderRowsInserted=function(e,t,n){this._del.onRowsInserted?this._del.onRowsInserted(this._del,t,n):p.Utils.log("onRowsInserted: "+t+", "+n)},y.prototype.onDataProviderRowRemoving=function(e,t){return this._del.onRowDeleting?this._del.onRowDeleting(this._del,t):(p.Utils.log("onRowDeleting: "+t),!0)},y.prototype.onDataProviderRowRemoved=function(e,t){this._del.onRowDeleted?this._del.onRowDeleted(this._del,t):p.Utils.log("onRowDeleted: "+t)},y.prototype.onDataProviderRowsRemoving=function(e,t){return!0},y.prototype.onDataProviderRowsRemoved=function(e,t){this._del.onRowsDeleted?this._del.onRowsDeleted(this._del,t):p.Utils.log("onRowsDeleted: ",t)},y.prototype.onDataProviderRowMoving=function(e,t,n){return this._del.onRowMoving?this._del.onRowMoving(this._del,t,n):(p.Utils.log("onRowMoving: "+t+", "+n),!0)},y.prototype.onDataProviderRowMoved=function(e,t,n){this._del.onRowMoved?this._del.onRowMoved(this._del,t,n):p.Utils.log("onRowMoved: "+t+", "+n)},y.prototype.onDataProviderRowsMoving=function(e,t,n,r){return this._del.onRowsMoving?this._del.onRowsMoving(this._del,t,n,r):(p.Utils.log("onRowsMoving: "+t+", "+n+", "+r),!0)},y.prototype.onDataProviderRowsMoved=function(e,t,n,r){this._del.onRowsMoved?this._del.onRowsMoved(this._del,t,n,r):p.Utils.log("onRowsMoved: "+t+", "+n+", "+r)},y.prototype.onDataProviderRowListMoving=function(e,t,n){return this._del.onRowListMoving?this._del.onRowListMoving(this._del,t,n):(p.Utils.log("onRowListMoving: ",t,", ",n),!0)},y.prototype.onDataProviderRowListMoved=function(e,t,n){this._del.onRowListMoved?this._del.onRowListMoved(this._del,t,n):p.Utils.log("onRowListMoved: ",t,n)},y.prototype.onDataProviderValueChanged=function(e,t,n){this._del.onValueChanged?this._del.onValueChanged(this._del,t,n):p.Utils.log("onValueChanged:"+t+", "+n)},y.prototype.onDataProviderDataChanged=function(e){this._del.onDataChanged?this._del.onDataChanged(this._del):p.Utils.log("onDataChanged")},y.prototype.onDataProviderStateChanged=function(e,t){this._del.onRowStateChanged?this._del.onRowStateChanged(this._del,t):p.Utils.log("onRowStateChanged: "+t)},y.prototype.onDataProviderStatesChanged=function(e,t){this._del.onRowStatesChanged?this._del.onRowStatesChanged(this._del,t):p.Utils.log("onRowStatesChanged",t)},y.prototype.onDataProviderStatesCleared=function(e){this._del.onRowStatesCleared?this._del.onRowStatesCleared(this._del):p.Utils.log("onRowStatesCleared")},y.prototype.onDataProviderRestoreRows=function(e,t){this._del.onRestoreRows?this._del.onRestoreRows(this._del,t):p.Utils.log("onRestoreRows",t)},y),b,w=(b=i,l.__extends(E,b),E.prototype.dispose=function(){this._del=null,this._provider.removeListener(this),this._provider=null},E.prototype.onTreeDataProviderRowCountChanged=function(e){this._del.onRowCountChanged?this._del.onRowCountChanged(this._del,e.rowCount):p.Utils.log("onRowCountChanged: "+e.rowCount)},E.prototype.onTreeDataProviderRowAdding=function(e,t,n,r){return this._del.onRowAdding?this._del.onRowAdding(this._del,t.rowId,n,r._values):(p.Utils.log("onRowAdding: "+t.rowId+", "+n,r._values),!0)},E.prototype.onTreeDataProviderRowAdded=function(e,t){this._del.onRowAdded?this._del.onRowAdded(this._del,t.rowId):p.Utils.log("onRowAdded: "+t.rowId)},E.prototype.onTreeDataProviderRowsAdded=function(e,t,r){r=n.extractTreeRows(r),this._del.onRowsAdded?this._del.onRowsAdded(this._del,t.rowId,r):p.Utils.log("onRowsAdded: "+t.rowId,r)},E.prototype.onTreeDataProviderRowRemoving=function(e,t){return this._del.onRowDeleting?this._del.onRowDeleting(this._del,t.rowId):(p.Utils.log("onRowDeleting: "+t.rowId),!0)},E.prototype.onTreeDataProviderRowRemoved=function(e,t){this._del.onRowDeleted?this._del.onRowDeleted(this._del,t.rowId):p.Utils.log("onRowDeleted: "+t.rowId)},E.prototype.onTreeDataProviderRowsRemoved=function(e,t){t=n.extractTreeRows(t),this._del.onRowsDeleted?this._del.onRowsDeleted(this._del,t):p.Utils.log("onRowsDeleted: ",t)},E.prototype.onTreeDataProviderRowUpdating=function(e,t){return this._del.onRowUpdating?this._del.onRowUpdating(this._del,t.rowId):(p.Utils.log("onRowUpdating:"+t.rowId),!0)},E.prototype.onTreeDataProviderRowUpdated=function(e,t){this._del.onRowUpdated?this._del.onRowUpdated(this._del,t.rowId):p.Utils.log("onRowUpdated: "+t.rowId)},E.prototype.onTreeDataProviderRowsUpdating=function(e,t){return this._del.onRowsUpdating?this._del.onRowsUpdating(this._del,st.TreeDataRow.getRowIds(t)):(p.Utils.log("onRowUpdating:"+t.length),!0)},E.prototype.onTreeDataProviderRowsUpdated=function(e,t){this._del.onRowsUpdated?this._del.onRowsUpdated(this._del,st.TreeDataRow.getRowIds(t)):p.Utils.log("onRowsUpdated: "+t.length)},E.prototype.onTreeDataProviderValueChanged=function(e,t,n){this._del.onValueChanged?this._del.onValueChanged(this._del,t.rowId,n):p.Utils.log("onValueChanged: "+t.rowId+", "+n)},E.prototype.onTreeDataProviderRowStateChanged=function(e,t){this._del.onRowStateChanged?this._del.onRowStateChanged(this._del,t.rowId):p.Utils.log("onRowStateChanged: "+t.rowId)},E.prototype.onTreeDataProviderRowStatesChanged=function(e,t){t=n.extractTreeRows(t),this._del.onRowStatesChanged?this._del.onRowStatesChanged(this._del,t):p.Utils.log("onRowStatesChanged: ",t)},E.prototype.onTreeDataProviderRowSiblingMoving=function(e,t,n){return this._del.onRowSiblingMoving?this._del.onRowSiblingMoving(this._del,t.rowId,n):(p.Utils.log("onRowSiblingMoveing: "+t.rowId+", "+n),!0)},E.prototype.onTreeDataProviderRowSiblingMoved=function(e,t,n){this._del.onRowSiblingMoved?this._del.onRowSiblingMoved(this._del,t.rowId,n):p.Utils.log("onSiblingMoved: "+t.rowId+", "+n)},E.prototype.onTreeDataProviderRowsSiblingMoving=function(e,t,n){return this._del.onRowsSiblingMoving?this._del.onRowsSiblingMoving(this._del,t,n):(p.Utils.log("onRowSiblingMoveing: ",t,n),!0)},E.prototype.onTreeDataProviderRowsSiblingMoved=function(e,t,n){this._del.onRowsSiblingMoved?this._del.onRowsSiblingMoved(this._del,t,n):p.Utils.log("onSiblingMoved: ",t,n)},E.prototype.onTreeDataProviderRowParentChanging=function(e,t,n,r){if(this._del.onRowParentChanging)return this._del.onRowParentChanging(this._del,t.rowId,n.rowId,r);p.Utils.log("onRowParentChanging: "+t.rowId+", "+n.rowId+", "+r)},E.prototype.onTreeDataProviderRowParentChanged=function(e,t,n,r){this._del.onRowParentChanged?this._del.onRowParentChanged(this._del,t.rowId,n.rowId,r):p.Utils.log("onRowParentChanged: "+t.rowId+", "+n.rowId+", "+r)},E)});t(ct),ct.EventListenerBase,ct.DataProviderBase,ct.LocalDataProvider,ct.LocalTreeDataProvider;var ht=n(function(e,t){function i(e,t){var r=n.call(this)||this;return r._urls=[],r._name=e,r._rootUrl=t,r}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(i,"name",{get:function(){return this._name}}),_dp(i,"count",{get:function(){return this._urls.length}}),i.prototype.addUrl=function(e){e&&this._urls.indexOf(e)<0&&this._urls.push(e)},i.prototype.addUrls=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e)for(var n=0;n<e.length;n++)this.addUrl(e[n])},i.prototype.getImage=function(e){return 0<=e&&e<this._urls.length?this._rootUrl+this._urls[e]:null},i);t.ImageList=r});t(ht),ht.ImageList;var pt=n(function(e,t){function r(e){this.field=e,this.count=0,this.sum=NaN,this.max=NaN,this.min=NaN,this.avg=NaN,this.vars=NaN,this.varsp=NaN,this.dataCount=0,this.dataAvg=NaN}Object.defineProperty(t,"__esModule",{value:!0});var n=(r.prototype.clear=function(){this.count=this.dataCount=0,this.sum=this.dataAvg=this.max=this.min=this.avg=this.vars=this.varsp=NaN},r);t.FieldSummary=n});t(pt),pt.FieldSummary;var dt=n(function(e,t){function o(){}function a(){this._id=a.$$_grid_item_id++,this._index=-1}function v(e){var t=f.call(this)||this;return t._displayLevel=-1,t._extents=0,t._dataRow=e,t}function y(){var e=m.call(this)||this;return e._children=[],e._expanded=!1,e._descendantCount=0,e._summaries=null,e._rows=null,e}function w(e){var t=b.call(this)||this;return t._footers=0,t._extents=0,t._allFooters=[],t._groupField=e,t}function x(){var e=E.call(this)||this;return e._expandable=!1,e.$_footerIndex=0,e._hiddenFooter=!1,e._extents=0,e}Object.defineProperty(t,"__esModule",{value:!0}),t.ITEM_EXT_CHECKED=1;var n,r=196608,i=4294705152;(s=n=t.ItemState||(t.ItemState={})).NORMAL="normal",s.FOCUSED="focused",s.UPDATING="updating",s.INSERTING="inserting",s.APPENDING="appending",s.DUMMY="dummy",t.ItemState_isEditing=function(e){return e==n.UPDATING||e==n.INSERTING||e==n.APPENDING},t.ItemState_isInserting=function(e){return e==n.INSERTING||e==n.APPENDING},t.ItemState_isInsertItem=function(e,t){return e==n.INSERTING||e==n.APPENDING||t==d.RowState.CREATED};var s=(o.prototype.clear=function(){return this.styleName=this.readOnly=this.editable=this.style=void 0,this},o.prototype.assign=function(e){"string"==typeof e?this.styleName=e:(null!=e.readOnly&&(this.readOnly=e.readOnly),null!=e.editable&&(this.editable=e.editable),null!=e.styleName&&(this.styleName=e.styleName.trim()),null!=e.style&&(this.style=e.style),null!=e.exportStyleName&&(this.exportStyleName=e.exportStyleName))},o);t.RowStyle=s;var u=(a.prototype.dispose=function(){this._parent=null},_dp(a,"id",{get:function(){return this._id}}),_dp(a,"index",{get:function(){return this._index}}),_dp(a,"parent",{get:function(){return this._parent}}),_dp(a,"parentIndex",{get:function(){return this._parent?this._parent._index:-1}}),_dp(a,"root",{get:function(){for(var e=this._parent;e&&1<e.level;)e=e._parent;return e}}),_dp(a,"childIndex",{get:function(){return this._parent?this._parent.indexOf(this):-1}}),_dp(a,"level",{get:function(){return this._parent?this._parent.level+1:0}}),_dp(a,"isData",{get:function(){return!1}}),_dp(a,"isDataRow",{get:function(){return!1}}),_dp(a,"visible",{get:function(){return this._parent&&0<=this._index}}),_dp(a,"displayLevel",{get:function(){return this.level}}),_dp(a,"provider",{get:function(){return this._parent&&this._parent.provider}}),_dp(a,"dataSource",{get:function(){return this._parent&&this._parent.dataSource}}),_dp(a,"dataRow",{get:function(){return-1}}),_dp(a,"dataId",{get:function(){return-1}}),_dp(a,"rowState",{get:function(){var e=this.dataRow;if(0<=e){var t=this.dataSource;return t?t.getRowState(e):d.RowState.NONE}return d.RowState.NONE}}),_dp(a,"itemState",{get:function(){return n.NORMAL}}),_dp(a,"checked",{get:function(){var e=0!=(this._getExtents()&t.ITEM_EXT_CHECKED);return this.provider.getItemChecked(this,e)}}),_dp(a,"checkable",{get:function(){return 0==(4&this._getExtents())}}),_dp(a,"editable",{get:function(){return!1}}),_dp(a,"readOnly",{get:function(){return 0!=(8&this._getExtents())},set:function(e){this._setExtents(e?8|this._getExtents():-9&this._getExtents())}}),_dp(a,"resizable",{get:function(){return!1}}),_dp(a,"merged",{get:function(){return!1}}),_dp(a,"height",{get:function(){var e=this._getExtents();return e&r?(e&i)>>>18:NaN}}),a.prototype.$_setHeight=function(e,t){var n=this._getExtents();if(e=Math.round(e),isNaN(e)){if(n&r)return this._setExtents(n&~r),!0}else{if(e!=(n&i)>>>18)return e=Math.max(0,Math.min(53247,e))<<18,this._setExtents((n=t?n&~r|131072:n&~r|65536)&~i|e),!0;if(t){if(0==(131072&n))return this._setExtents(n=n&~r|131072),!0}else if(0==(65536&n))return this._setExtents(n=n&~r|65536),!0}},a.prototype.$_clearHeight=function(e){e?this._setExtents(this._getExtents()&~r):this._setExtents(-65537&this._getExtents()),0==this.index&&p.Utils.log("HEIGHT",this.height)},_dp(a,"heights",{get:function(){return this._heights},set:function(e){this._heights=e}}),a.prototype.getShadowRow=function(){return this.dataRow},a.prototype.getHeight=function(e){return this._heights[e]},a.prototype.setChecked=function(e,t){var n=this.provider;n&&n.checkItem(this,e,void 0,t)},a.prototype.setCheckable=function(e){var t=this.provider;t&&t.setCheckable(this,e)},a.prototype.getAncestor=function(e){if(e<this.level){for(var t=this._parent;t.level>e;)t=t._parent;return t}return this instanceof g?this:null},a.prototype.getVisibleAncestor=function(){var e=this._parent;do if(e.visible)return e;while(e=e._parent)},a.prototype.getAncestors=function(){var e=null,t=this._parent;if(t)for(e=[];e.push(t),t=t._parent;);return e},a.prototype.isDescendantOf=function(e){if(e){for(var t=this._parent;t&&t!=e;)t=t._parent;return t===e}return!1},a.prototype.getData=function(e){var t=this.dataSource;e=t.getFieldIndex(e);var n=this.getShadowRow();return t&&0<=n?t.getValue(n,e):void 0},a.prototype.setData=function(e,t){var n=this.dataSource;e=n.getFieldIndex(e),n&&n.setValue(this.dataRow,e,t)},a.prototype.getRowData=function(){var e=this.dataRow;if(0<=e){var t=this.dataSource;if(t)return t.getRow(e)}return null},a.prototype.getRowObject=function(){var e=this.dataRow;if(0<=e){var t=this.dataSource;if(t)return t.getRowObject(e)}return null},a.prototype.isChanged=function(e){var t=this.dataSource;return t?t.isDataChanged(this.dataRow,e):void 0},a.prototype.canEdit=function(){return!1},a.prototype._setIndex=function(e){this._index=e},a.prototype._setChecked=function(e){this.provider.setItemChecked(this,e)||this._setExtents(e?this._getExtents()|t.ITEM_EXT_CHECKED:this._getExtents()&~t.ITEM_EXT_CHECKED)},a.prototype._setCheckable=function(e){this._setExtents(e?-5&this._getExtents():4|this._getExtents())},a.PARENT="_parent",a.$$_grid_item_id=0,a);t.GridItem=u;var f,h=(f=u,l.__extends(v,f),_dp(v,"dataRowId",{get:function(){return this._dataRowId}}),_dp(v,"editable",{get:function(){return this._editable}}),_dp(v,"readOnly",{get:function(){return this._readOnly}}),v.prototype.setEditable=function(e,t){this._editable=e,this._readOnly=t},v.prototype._getExtents=function(){return this._extents},v.prototype._setExtents=function(e){this._extents=e},_dp(v,"isData",{get:function(){return!0}}),_dp(v,"isDataRow",{get:function(){return!0}}),_dp(v,"dataRow",{get:function(){return this._dataRow}}),_dp(v,"dataId",{get:function(){return this.dataSource.getRowId(this._dataRow)}}),_dp(v,"isLeaf",{get:function(){return!0}}),_dp(v,"resizable",{get:function(){return!0}}),_dp(v,"displayLevel",{get:function(){return 0<=this._displayLevel?this._displayLevel:this.level}}),v.prototype.canEdit=function(){return!0},v.prototype.getShadowRow=function(){return this._dataRow},v.prototype.$_setDisplayLevel=function(e){this._displayLevel=e},v);t.GridRow=h;var m,g=(m=u,l.__extends(y,m),y.prototype.dispose=function(){this._children=null,m.prototype.dispose.call(this)},_dp(y,"expanded",{get:function(){return this._expanded}}),_dp(y,"collapsed",{get:function(){return!this.expanded}}),_dp(y,"count",{get:function(){return this._children.length}}),_dp(y,"children",{get:function(){return this._children.slice()}}),_dp(y,"allFooterCount",{get:function(){return 0}}),_dp(y,"first",{get:function(){return 0<this._children.length?this._children[0]:null}}),_dp(y,"last",{get:function(){var e=this._children.length;return 0<e?this._children[e-1]:null}}),_dp(y,"firstItem",{get:function(){if(0<this._children.length){var e=this._children[0];return e instanceof y?e.firstItem:e}return null}}),_dp(y,"firstDataItem",{get:function(){if(0<this._children.length)for(var e=0,t=this._children.length;e<t;e++){if(this._children[e]instanceof y)return this._children[e].firstDataItem;if(this._children[e]instanceof h)return this._children[e]}return null}}),y.prototype.getLastItem=function(e){var t;if(0<this._children.length){for(var n=this._children.length;n&&(t=this._children[n-1],e&&t instanceof S);n--);return t instanceof y?t.getLastItem(e):t}return null},_dp(y,"lastDataItem",{get:function(){var e=this._children.length;if(0<e)for(;0<e;e--){var t=this._children[e-1];if(t instanceof y)return t.lastDataItem;if(t instanceof h)return t}return null}}),_dp(y,"descendantCount",{get:function(){return this._descendantCount}}),_dp(y,"expandable",{get:function(){return!0}}),_dp(y,"collapsable",{get:function(){return!0}}),y.prototype.getItem=function(e){if(e<0||e>=this._children.length)throw new RangeError("index is invalid: "+e);return this._children[e]},y.prototype.getRows=function(){var e=[];return this.$_collectRows(this,e),e},y.prototype.getFooterIndex=function(e){return 0},y.prototype.itemOfRow=function(e){for(var t=this._children.length;t--;)if(this._children[t].dataRow==e)return this._children[t];return null},y.prototype.indexOf=function(e){for(var t=this._children.length-1;0<=t;t--)if(this._children[t]==e)return t;return-1},y.prototype.isDescendant=function(e){if(e&&e!==this){for(var t=e._parent;t&&t!==this;)t=t._parent;return t===this}return!1},y.prototype.getDescendants=function(e){if((!e||this._expanded)&&this._children&&0<this._children.length){var t=[];return function n(t,r){for(var i=t.count,s=0;s<i;s++){var o=t.getItem(s);r.push(o),o instanceof y&&(!e||o.expanded)&&n(o,r)}}(this,t),t}return null},y.prototype.clear=function(){this._summaries=null,this._children.length=0,this._descendantCount=0},y.prototype.insert=function(e,t){this._addChild(t,e)},y.prototype.add=function(e){this._addChild(e,-1)},y.prototype.addAll=function(e){this._addChildren(e)},y.prototype.remove=function(e){var t=this.indexOf(e);0<=t&&(this._children.splice(t,1),e instanceof u&&(e[u.PARENT]=null))},y.prototype.setItem=function(e,t){var n;e&&t&&e!==t&&(n=this._removeChild(e),this._insertChild(n,t),t._index=e.index)},y.prototype.setExpanded=function(e,t,n){e==this._expanded&&!n||(e?this.provider.expand(this,t,n,0):this.provider.collapse(this,t,n))},y.prototype.getNumber=function(e){return e=this.$_getSummary(e),e instanceof pt.FieldSummary?e.count:e?e.length:this._descendantCount},y.prototype.getDataCount=function(e){var t=this.$_getSummary(e);if(t instanceof pt.FieldSummary)return t.dataCount;if(t){var n=this.dataSource,r=t.length,i=0;if(0<r){for(var s=0;s<r;s++)null!=n.getValue(t[s],e)&&i++;return i}}return 0},y.prototype.getDataAvg=function(e){var t=this.$_getSummary(e);if(t instanceof pt.FieldSummary)return t.dataAvg;if(t){for(var n=this.dataSource,r=t.length,i=0,s=0,o=0;o<r;o++){var u=n.getValue(t[o],e);isNaN(u)||(i+=u,s++)}return 0<s&&!isNaN(i)?i/s:NaN}return NaN},y.prototype.getSum=function(e){var t=this.$_getSummary(e);if(t instanceof pt.FieldSummary)return t.sum;if(t){for(var n=this.dataSource,r=t.length,i=void 0,s=0;s<r;s++){var o=n.getValue(t[s],e);isNaN(o)||(i=(isNaN(i)?0:i)+o)}return i}return NaN},y.prototype.getMax=function(e){var t=this.$_getSummary(e);if(t instanceof pt.FieldSummary)return t.max;if(t){var n=this.dataSource,r=t.length,i=void 0;if(1<r){for(var i=NaN,s=0;i=n.getValue(t[s++],e),isNaN(i=null==i?void 0:i)&&s<r;);for(;s<r;){var o=n.getValue(t[s++],e);!isNaN(o=null==o?void 0:o)&&i<o&&(i=o)}return i}if(1==r)return null==(i=n.getValue(t[0],e))?void 0:i}return NaN},y.prototype.getMin=function(e){var t=this.$_getSummary(e);if(t instanceof pt.FieldSummary)return t.min;if(t){var n=this.dataSource,r=t.length,i=void 0;if(1<r){for(var i=NaN,s=0;i=n.getValue(t[s++],e),isNaN(i=null==i?void 0:i)&&s<r;);for(;s<r;){var o=n.getValue(t[s++],e);!isNaN(o=null==o?void 0:o)&&o<i&&(i=o)}return i}if(1==r)return null==(i=n.getValue(t[0],e))?void 0:i}return NaN},y.prototype.getAvg=function(e){var t=this.$_getSummary(e);if(t instanceof pt.FieldSummary)return t.avg;if(t){var n=this.dataSource,r=t.length,i=void 0;if(1<r){for(var i=0,s=0;s<r;s++)i+=n.getValue(t[s],e);return i/r}if(1==r)return i=n.getValue(t[0],e)}return NaN},y.prototype.getVar=function(e,t){var n=this.$_getSummary(e);if(n instanceof pt.FieldSummary)return n.vars;if(n&&this.provider.summaryMode==c.SummaryMode.STATISTICAL){var r=this.dataSource,i=n.length;if(1<i){for(var s=0,o=0;o<i;o++)s+=r.getValue(n[o],e);for(var u=s/i,s=0,o=0;o<i;o++)s+=Math.pow(r.getValue(n[o],e)-u,2);return s/=i-t}if(1==i)return 0}return NaN},y.prototype.getStdev=function(e,t){var n=this.$_getSummary(e);if(n instanceof pt.FieldSummary)return 0==t?Math.sqrt(n.varsp):Math.sqrt(n.vars);if(n&&this.provider.summaryMode==c.SummaryMode.STATISTICAL){var r=this.dataSource,i=n.length;if(1<i){for(var s=0,o=0;o<i;o++)s+=r.getValue(n[o],e);for(var u=s/i,s=0,o=0;o<i;o++)s+=Math.pow(r.getValue(n[o],e)-u,2);return s=Math.sqrt(s/(i-t))}if(1==i)return 0}return NaN},_dp(y,"isLeaf",{get:function(){return!1}}),y.prototype._setExpanded=function(e){this._expanded=e},y.prototype._incDescendants=function(e){this._descendantCount+=e=void 0===e?1:e},y.prototype._insertChild=function(e,t){this._children.splice(e,0,t),t instanceof u&&(t[u.PARENT]=this)},y.prototype._addChild=function(e,t){e&&this.indexOf(e)<0&&(t<0?this._children.push(e):this._children.splice(t,0,e),e[u.PARENT]=this)},y.prototype._addChildren=function(e){var t;if(e&&0<(t=e.length))for(var n=0;n<t;n++){var r=e[n];r&&this.indexOf(r)<0&&(r[u.PARENT]=this)._children.push(r)}},y.prototype._removeChild=function(e){var t=this.indexOf(e);return 0<=t&&(this._children.splice(t,1),e instanceof u&&(e[u.PARENT]=null)),t},y.prototype._exchangeItems=function(e,t){if(e<0||e>=this._children.length)throw new RangeError("index1 is out of range: "+e);if(t<0||t>=this._children.length)throw new RangeError("index2 is out of range: "+t);var n;e!==t&&(n=this._children[e],this._children[e]=this._children[t],this._children[t]=n)},y.prototype._moveChild=function(e,t){var n=this._children.length;if(e<0||n<=e)throw new RangeError("index is out of range: "+e);var r=Math.min(Math.max(e+t,0),n-1),n=this._children[e];if(t<0)for(var i=e;r<i;i--)this._children[i]=this._children[i-1];else for(i=e;i<r;i++)this._children[i]=this._children[i+1];this._children[r]=n},y.prototype.$_collectRows=function(e,t){for(var n=e.count,r=0;r<n;r++){var i=e.getItem(r);i instanceof y?this.$_collectRows(i,t):i.isDataRow&&t.push(i.dataRow)}},y.prototype.$_getSummary=function(e){var t=this.dataSource;if(t instanceof M.DataProvider){null==this._summaries&&(this._summaries={}),"string"==typeof e&&(e=t.getFieldIndex(e));var n=this._summaries?this._summaries[e]:null;return n||t.canSummarize(e)&&(n=this.$_summarize(e,t))&&(this._summaries[e]=n),n}return null},y.prototype.$_summarize=function(e,t){var n=this.provider.summaryMode;return n==c.SummaryMode.NONE?null:(null==this._rows&&(this._rows=[],this.$_collectRows(this,this._rows)),3<this._rows.length&&t.canSummarize(e))?(e=new pt.FieldSummary(e),t.summarizeRange(e,this._rows,n==c.SummaryMode.STATISTICAL),e):this._rows},y.prototype._saveExpanded=function(){this._setExtents(this.expanded?16|this._getExtents():-17&this._getExtents())},y.prototype._restoreExpanded=function(e){if(void 0===e&&(e=!1),this._setExpanded(0!=(16&this._getExtents())),e)for(var t=this.count-1;0<=t;t--){var n=this.getItem(t);n instanceof y&&n._restoreExpanded(!0)}},y);t.GroupItem=g;var b,s=(b=g,l.__extends(w,b),w.prototype.dispose=function(){this._allFooters=null,b.prototype.dispose.call(this)},_dp(w,"groupField",{get:function(){return this._groupField}}),w.prototype._getExtents=function(){return this._extents},w.prototype._setExtents=function(e){this._extents=e},_dp(w,"footer",{get:function(){return this._footer}}),_dp(w,"footerCount",{get:function(){return this._footers}}),_dp(w,"allFooterCount",{get:function(){return this._allFooters.length}}),w.prototype.getHiddenFooterCount=function(){for(var e=0,t=0;t<this.children.length;t++)this.children[t].hiddenFooter&&e++;return e},w.prototype.getFooter=function(e){return e=this.indexOf(this._footer)+e,this._children[e]},w.prototype.getFooterIndex=function(e){return e.$_footerIndex},w.prototype.isFooter=function(e){if(e===this._footer)return!0;if(1<this._footers)for(var t=this._children,n=t.length-1;0<=n;n--){if(t[n]===e)return!0;if(t[n]===this._footer)break}return!1},w.prototype._addChild=function(e,t){e instanceof S?(this._allFooters.push(e),e[u.PARENT]=this,e.hiddenFooter||(b.prototype._addChild.call(this,e,t),this._footer=this._footer||e,this._footers++)):b.prototype._addChild.call(this,e,t)},w);t.GroupItemImpl=s;var E,S=(E=u,l.__extends(x,E),_dp(x,"expandable",{get:function(){return this._expandable},set:function(e){this._expandable=e}}),_dp(x,"footerIndex",{get:function(){return this.$_footerIndex}}),_dp(x,"vindex",{get:function(){return-1<this.$_vindex?this.$_vindex:this.$_footerIndex}}),_dp(x,"hiddenFooter",{get:function(){return this._hiddenFooter},set:function(e){this._hiddenFooter=e}}),x.prototype._getExtents=function(){return this._extents},x.prototype._setExtents=function(e){this._extents=e},_dp(x,"isLeaf",{get:function(){return!0}}),_dp(x,"isData",{get:function(){return!0}}),_dp(x,"displayLevel",{get:function(){return this._expandable?this.level-1:this.level}}),x);t.GroupFooter=S});t(dt),dt.ITEM_EXT_CHECKED,dt.ItemState,dt.ItemState_isEditing,dt.ItemState_isInserting,dt.ItemState_isInsertItem,dt.RowStyle,dt.GridItem,dt.GridRow,dt.GroupItem,dt.GroupItemImpl,dt.GroupFooter;var vt=n(function(e,t){function i(e){var t=n.call(this,-1)||this;return t._provider=e,t}function u(e){var t=s.call(this)||this;return t._hideDeleted=!1,t._eventLock=0,t._rowHeighted=!1,t._explicitHeighted=!1,t._indexing=e,t._rootItem=t._createRootItem(),t}function f(e,t){return t=a.call(this,t)||this,t._initialize(),t.source=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=dt.GroupItemImpl,l.__extends(i,n),_dp(i,"provider",{get:function(){return this._provider}}),_dp(i,"level",{get:function(){return 0}}),_dp(i,"expanded",{get:function(){return!1}}),_dp(i,"isLeaf",{get:function(){return!1}}),_dp(i,"dataSource",{get:function(){return this._provider.dataSource}}),_dp(i,"expandable",{get:function(){return!1}}),_dp(i,"collapsable",{get:function(){return!1}}),i);t.RootItem=r;var s,o=(s=x.EventAware,l.__extends(u,s),u.prototype._doDispose=function(){return this._rootItem.dispose(),null},_dp(u,"hideDeleted",{get:function(){return this._hideDeleted},set:function(e){e!=this._hideDeleted&&(this._hideDeleted=e,this._hideDeletedChanged())}}),_dp(u,"summaryMode",{get:function(){return c.SummaryMode.AGGREGATE},set:function(e){}}),_dp(u,"sortMode",{get:function(){return c.SortMode.AUTO},set:function(e){}}),_dp(u,"fixedCount",{get:function(){return 0}}),_dp(u,"maxItemCount",{get:function(){return 0},set:function(e){}}),_dp(u,"movable",{get:function(){return!1}}),u.prototype.setFixed=function(e,t,n){},u.prototype.attachItem=function(e){e._parent=this._rootItem},u.prototype.getItemsByIndices=function(e){var t=[];if(e)for(var n=0,r=e.length;n<r;n++){var i=this.getItem(e[n]);i&&t.push(i)}return t},u.prototype.getIndexOfRow=function(e,t){return t=this.getItemOfRow(e,t),t?t.index:-1},u.prototype.getIndicesOfRows=function(e,t){var n=[],r=e?e.length:0;if(r)for(var i=0;i<r;i++){var s=this.getItemOfRow(e[i],t);n.push(s?s.index:-1)}return n},u.prototype.getItemsByRows=function(e,t){void 0===t&&(t=!1);for(var n=[],r=e?e.length:0,i=0;i<r;i++){var s=this.getItemOfRow(e[i],t);s&&n.push(s)}return n},u.prototype.exchange=function(e,t){},u.prototype.setCheckable=function(e,t){e&&t!=e.checkable&&(e._setCheckable(t),this._fireCheckableChanged(e))},u.prototype.checkItem=function(e,t,n,r){var i;e&&(i=e.checked,n?(this._clearChecked(),t&&this._setChecked(e,!0),t!=i&&r&&this._fireItemChecked(e),this._fireRefreshClient()):t!=i&&(this._setChecked(e,t),r?this._fireItemChecked(e):this._fireRefreshClient()),this._fireItemCheckChanged([e],t))},u.prototype.checkItems=function(e,t,n){if(e&&0<e.length){for(var r=0,i=e.length;r<i;r++){var s=e[r];s instanceof dt.GridItem&&this._setChecked(s,t)}n?1===e.length?this._fireItemChecked(e[0]):this._fireItemsChecked(e,t):this._fireRefreshClient()}this._fireItemCheckChanged(e,t)},u.prototype.checkAll=function(e,t,n,r,i){var s=this.itemCount;if(n)for(var o=0;o<s;o++){var u=this.getItem(o);u.checkable&&this._setChecked(u,e)}else for(o=0;o<s;o++)this._setChecked(this.getItem(o),e);r?this._fireItemAllChecked(e):this._fireRefreshClient(),this._fireItemCheckChanged(null,e)},u.prototype._setCheckItem=function(e,t){e._setChecked(t)},u.prototype._clearDisplayLevels=function(){},u.prototype.canUpdate=function(e,t){if(e){var n=this.dataSource;if(!n)return!1;var r=e.dataRow;return n.canUpdateField(r,t)?(e=e.itemState,e=dt.ItemState_isInserting(e)||e===dt.ItemState.DUMMY,(0<=r||e)&&(e||n.canUpdateRow(r))):!1}return!1},u.prototype.canAppend=function(){var e=this.dataSource;return e&&e.canAppendRow()},u.prototype.canInsert=function(e){if(e){var t=e.dataRow,e=this.dataSource;return e&&e.canInsertRow(t)}return!1},u.prototype.canDelete=function(e){if(e){var t=e.dataRow,e=this.dataSource;return 0<=t&&e&&e.canDeleteRow(t)}return!1},u.prototype.appendDummy=function(){},u.prototype.cancelDummy=function(){},u.prototype.findItem=function(e,t,n,r,i){return-1},u.prototype.findCell=function(e,t,n,r,i,s){return null},u.prototype.getSum=function(e){return NaN},u.prototype.getMax=function(e){return NaN},u.prototype.getMin=function(e){return NaN},u.prototype.getAvg=function(e){return NaN},u.prototype.getVar=function(e){return NaN},u.prototype.getVarp=function(e){return NaN},u.prototype.getStdev=function(e){return NaN},u.prototype.getStdevp=function(e){return NaN},u.prototype.getDataCount=function(e){return NaN},u.prototype.getDataAvg=function(e){return NaN},_dp(u,"isIndexing",{get:function(){return this._indexing}}),u.prototype.setRowHeight=function(e,t,n){e.$_setHeight(t,n)&&(isNaN(t)||(n?this._explicitHeighted=!0:this._rowHeighted=!0))},u.prototype.clearRowHeights=function(e){if(e||this._rowHeighted){for(var t=!1,n=this.itemCount-1;0<=n;n--){var r=this.getItem(n),i=r.height;isNaN(i)||(r.$_clearHeight(e),t=!(r.heights=null))}return this._rowHeighted=!1,e&&(this._explicitHeighted=!1),t}},u.prototype.isRowHeighted=function(e){return void 0===e&&(e=!0),this._rowHeighted||e&&this._explicitHeighted},u.prototype.setCheckFieldIndex=function(e){},u.prototype.getItemChecked=function(e,t){return t},u.prototype.setItemChecked=function(e,t){return!1},_dp(u,"rootItem",{get:function(){return this._rootItem}}),u.prototype._createRootItem=function(){return new r(this)},u.prototype._hideDeletedChanged=function(){},u.prototype.$_canFire=function(){return this._eventLock<=0},u.prototype._setChecked=function(e,t){e._setChecked(t)},u.prototype._clearChecked=function(){for(var e=0,t=this.itemCount;e<t;e++)this._setChecked(this.getItem(e),!1)},u.prototype._resetItemIndicies=function(e){if(this._indexing)for(var t=e,n=this.itemCount;t<n;t++)this.getItem(t)._index=t},u.prototype._setExpanded=function(e,t){e._setExpanded(t)},u.prototype._resetItemIndex=function(e){var t=this.getItem(e);t&&(t._index=e)},u.prototype._incDescendents=function(e,t){e._descendantCount+=t,e.parent&&this._incDescendents(e.parent,t)},u.prototype._copyExtents=function(e,t){e instanceof dt.GridItem&&t instanceof dt.GridItem&&t._setExtents(e._getExtents())},u.prototype._fireReset=function(){this._eventLock<=0&&this.fireEvent(u.RESET)},u.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent(u.REFRESH)},u.prototype._fireRefreshClient=function(){this._eventLock<=0&&this.fireEvent(u.REFRESH_CLIENT)},u.prototype._fireItemInserted=function(e){this._eventLock<=0&&this.fireEvent(u.ITEM_INSERTED,e)},u.prototype._fireItemDeleted=function(e){this._eventLock<=0&&this.fireEvent(u.ITEM_DELETED,e)},u.prototype._fireItemUpdated=function(e){this._eventLock<=0&&this.fireEvent(u.ITEM_UPDATED,e)},u.prototype._fireCheckableChanged=function(e){this._eventLock<=0&&this.fireEvent(u.CHECKABLE_CHANGED,e)},u.prototype._fireItemChecked=function(e){this._eventLock<=0&&this.fireEvent(u.ITEM_CHECKED,e)},u.prototype._fireItemsChecked=function(e,t){this._eventLock<=0&&this.fireEvent(u.ITEMS_CHECKED,e,t)},u.prototype._fireItemAllChecked=function(e){this._eventLock<=0&&this.fireEvent(u.ITEM_ALL_CHECKED,e)},u.prototype._fireItemCheckChanged=function(e,t){this.fireEvent(u.ITEMCHECK_CHANGED,e,t)},u.prototype._fireRowStateChanged=function(e){this._eventLock<=0&&this.fireEvent(u.ROW_STATE_CHANGED,e)},u.prototype._fireRowStatesChanged=function(e){this._eventLock<=0&&this.fireEvent(u.ROW_STATES_CHANGED,e)},u.prototype._fireRowStatesCleared=function(){this._eventLock<=0&&this.fireEvent(u.ROW_STATES_CLEARED)},u.prototype._fireSort=function(e,t,n){this._eventLock<=0&&this.fireEvent(u.SORT,e,t,n)},u.prototype._fireSorted=function(){this._eventLock<=0&&this.fireEvent(u.SORTED)},u.prototype._fireFilterAdded=function(e,t){this._eventLock<=0&&this.fireEvent(u.FILTER_ADDED,e,t)},u.prototype._fireFilterRemoved=function(e,t){this._eventLock<=0&&this.fireEvent(u.FILTER_REMOVED,e,t)},u.prototype._fireFilterCleared=function(e){this._eventLock<=0&&this.fireEvent(u.FILTER_CLEARED,e)},u.prototype._fireFilterAllCleared=function(){this._eventLock<=0&&this.fireEvent(u.FILTER_ALL_CLEARED)},u.prototype._fireFiltered=function(e,t){this._eventLock<=0&&this.fireEvent(u.FILTERED,e,t)},u.prototype._fireCommandStackChanged=function(e,t){this._eventLock<=0&&this.fireEvent(u.COMMAND_STACK_CHANGED,e,t)},u.prototype._fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent(u.DATA_LOAD_COMPLATED)},u.RESET="onItemProviderReset",u.REFRESH="onItemProviderRefresh",u.REFRESH_CLIENT="onItemProviderRefreshClient",u.ITEM_INSERTED="onItemProviderItemInserted",u.ITEM_DELETED="onItemProviderItemDeleted",u.ITEM_UPDATED="onItemProviderItemUpdated",u.CHECKABLE_CHANGED="onItemProviderCheckableChanged",u.ITEM_CHECKED="onItemProviderItemChecked",u.ITEMS_CHECKED="onItemProviderItemsChecked",u.ITEM_ALL_CHECKED="onItemProviderItemAllChecked",u.ROW_STATE_CHANGED="onItemProviderRowStateChanged",u.ROW_STATES_CHANGED="onItemProviderRowStatesChanged",u.ROW_STATES_CLEARED="onItemProviderRowStatesCleared",u.SORT="onItemProviderSort",u.SORTED="onItemProviderSorted",u.FILTER_ADDED="onItemProviderFilterAdded",u.FILTER_REMOVED="onItemProviderFilterRemoved",u.FILTER_CLEARED="onItemProviderFilterCleared",u.FILTER_ALL_CLEARED="onItemProviderFilterAllCleared",u.FILTERED="onItemProviderFiltered",u.ITEMCHECK_CHANGED="onItemProviderItemCheckChanged",u.COMMAND_STACK_CHANGED="onItemProviderCommandStackChanged",u.DATA_LOAD_COMPLATED="onItemProviderDataLoadComplated",u);t.ItemProvider=o;var a,o=(a=o,l.__extends(f,a),f.prototype._doDispose=function(){a.prototype._doDispose.call(this)},_dp(f,"source",{get:function(){return this._source},set:function(e){e!=this._source&&(this._source&&this._source.removeListener(this),this._clearItems(),this._source=e,this._source&&(this._populateItems(),this._source.addListener(this)))}}),_dp(f,"dataSource",{get:function(){return this._source&&this._source.dataSource},set:function(e){this._source&&(this._source.dataSource=e)}}),_dp(f,"rowCount",{get:function(){return this._source?this._source.rowCount:0}}),_dp(f,"fixedCount",{get:function(){return this._source?this._source.fixedCount:0}}),_dp(f,"maxItemCount",{get:function(){return this._source?this._source.maxItemCount:0},set:function(e){this._source&&(this._source.maxItemCount=e)}}),_dp(f,"sorted",{get:function(){return this._source&&this._source.sorted}}),f.prototype.setFixed=function(e,t,n){this._source&&this._source.setFixed(e,t,n)},f.prototype.getIndexOfRow=function(e){return this._source?this._source.getIndexOfRow(e,!1):-1},f.prototype.getItemOfRow=function(e,t){return this._source?this._source.getItemOfRow(e,t):null},f.prototype._refreshItems=function(){this._source&&this._source._refreshItems()},f.prototype._clearDisplayLevels=function(){this._source&&this._source._clearDisplayLevels()},f.prototype._initialize=function(){},f.prototype._clearItems=function(){},f.prototype._populateItems=function(){this._resetItemIndicies(0)},f.prototype.onItemProviderReset=function(e){this._populateItems(),this._fireReset()},f.prototype.onItemProviderRefresh=function(e){this._populateItems(),this._fireRefresh()},f.prototype.onItemProviderRefreshClient=function(e){this._fireRefreshClient()},f.prototype.onItemProviderItemInserted=function(e,t){this._resetItemIndicies(0),this._fireItemInserted(t)},f.prototype.onItemProviderItemDeleted=function(e,t){this._resetItemIndicies(0),this._fireItemDeleted(t)},f.prototype.onItemProviderItemUpdated=function(e,t){this._resetItemIndicies(0),this._fireItemUpdated(t)},f.prototype.onItemProviderCheckableChanged=function(e,t){this._fireCheckableChanged(t)},f.prototype.onItemProviderItemChecked=function(e,t){this._fireItemChecked(t)},f.prototype.onItemProviderItemsChecked=function(e,t,n){this._fireItemsChecked(t,n)},f.prototype.onItemProviderItemAllChecked=function(e,t){this._fireItemAllChecked(t)},f.prototype.onItemProviderItemCheckChanged=function(e,t,n){this._fireItemCheckChanged(t,n)},f.prototype.onItemProviderRowStateChanged=function(e,t){this._fireRowStateChanged(t)},f.prototype.onItemProviderRowStatesChanged=function(e,t){this._fireRowStatesChanged(t)},f.prototype.onItemProviderRowStatesCleared=function(e){this._fireRowStatesCleared()},f.prototype.onItemProviderFilterAdded=function(e,t,n){},f.prototype.onItemProviderFilterRemoved=function(e,t,n){},f.prototype.onItemProviderFilterCleared=function(e,t){},f.prototype.onItemProviderFilterAllCleared=function(e){},f.prototype.onItemProviderFiltered=function(e,t,n){},f.prototype.onItemProviderSort=function(e,t,n){},f.prototype.onItemProviderSorted=function(e){},f.prototype.onItemProviderCommandStackChanged=function(e,t,n){this._fireCommandStackChanged(t,n)},f);t.ProxyItemProvider=o});t(vt),vt.RootItem,vt.ItemProvider,vt.ProxyItemProvider;var mt=n(function(e,t){function i(e,t,r,i,s){return i=n.call(this,i)||this,i._started=!1,i._checkDiff=!1,i._strictDiff=!1,i._target=t,e.attachItem(i),i._setIndex(r),i._state=s,i.$_setDisplayLevel(t?t.displayLevel:0),i}function u(e,t,n,r,i){return r=s.call(this,r)||this,r._values=[],r._changeValues=[],r._started=!1,r._checkDiff=!1,r._strictDiff=!1,r._invalidFields=[],r._target=t,e.attachItem(r),r._setIndex(n),r._state=i,r.$_setDisplayLevel(t?t.displayLevel:0),r._invalidFields=[],r}function c(e,t){return t=a.call(this,e,t)||this,t._checkDiff=!1,t._checkCellDiff=!1,t._strictDiff=!1,t._undoable=!1,t._cancelWhenLastUndo=!1,t._orgItem=null,t._editingItem=null,t._dummyEditItem=null,t._editingState=dt.ItemState.NORMAL,t._insertMode=0,t._modified=!1,t._commiting=!1,t._saveDs=null,t._commands=new P.EditCommandStack(t),e&&(t._saveDs=e.dataSource)&&t._saveDs.registerClient(t),t}function p(e,t){return t=h.call(this,e,t)||this,t._insertRow=-1,t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=dt.GridRow,l.__extends(i,n),_dp(i,"values",{get:function(){},set:function(e){}}),i.prototype.beginEdit=function(e,t){this.$_clearHeight(!0)},i.prototype.setValue=function(e,t){},_dp(i,"resizable",{get:function(){return!1}}),_dp(i,"itemState",{get:function(){return this._state}}),_dp(i,"editable",{get:function(){return!0}}),i.prototype.getData=function(e){return null},i.prototype.setData=function(e,t){},i.prototype.getRowData=function(){return null},i.prototype.getRowObject=function(){return null},i.prototype._clearDisplayLevels=function(){},i);t.DummyEditItem=r;var s,o=(s=dt.GridRow,l.__extends(u,s),_dp(u,"values",{get:function(){return this._values.concat()},set:function(e){var t=this.provider,n=this.dataSource,r=n.fieldCount;if(e instanceof Array)for(var r=Math.min(r,e.length),i=0;i<r;i++){var s=n.getField(i),o=this._values[i],u=s.readValue(e[i]);this._values[i]=u,this._started&&!s.equalValues(o,u)&&t._editItemCellUpdated(this,i,o,u)}else if(e)for(i=0;i<r;i++){var a=n.getOrgFieldName(i);e.hasOwnProperty(a)&&(s=n.getField(i),o=this._values[i],u=s.readValue(e[a]),this._values[i]=u,this._started&&!s.equalValues(o,u)&&t._editItemCellUpdated(this,i,o,u))}}}),_dp(u,"invalidFields",{get:function(){return this._invalidFields}}),u.prototype.beginEdit=function(e,t){dt.ItemState_isInserting(this._state)&&this.$_clearHeight(!0),this._started=!0,this._checkDiff=e,this._strictDiff=t},u.prototype.setValue=function(e,t){var n=this.dataSource;if(e<0&&e>=n.fieldCount)throw new L.DataSourceError("field index is out of bounds: "+e);var r=n.getField(e),n=this._values[e];t=r.readValue(t),this._values[e]=t,this._started&&!r.equalValues(n,t)&&this.provider._editItemCellUpdated(this,e,n,t),this.$_clearHeight(!1)},_dp(u,"resizable",{get:function(){return!1}}),_dp(u,"itemState",{get:function(){return this._state}}),_dp(u,"level",{get:function(){return this._target?this._target.level:1}}),u.prototype.getData=function(e){if(e<0&&e>=this.dataSource.fieldCount)throw new RangeError("field index is out of bounds: "+e);return this._values[e]},u.prototype.setData=function(e,t){var n=this.dataSource;if(e<0&&e>=n.fieldCount)throw new RangeError("field index is out of bounds: "+e);var r=n.getField(e),i=this._values[e],n=!this._checkDiff;t=r.readValue(t),(n=n||(this._strictDiff?!r.equalValues(i,t):!r.sameValues(i,t)))&&(this._values[e]=t,this._changeValues[e]=!0,this.provider._editItemCellUpdated(this,e,i,t),this.provider._editItemCellEdited(this,e)),this.$_clearHeight(!1)},u.prototype.getRowData=function(){return this._values.concat()},u.prototype.getRowObject=function(){var e=this.dataSource;if(e){for(var t={},n=0,r=e.fieldCount;n<r;n++)t[e.getOrgFieldName(n)]=this._values[n];return t}return null},u.prototype.isEdited=function(e){return this._changeValues[e]},u.prototype._setChecked=function(e){this.provider.setItemChecked(this,e)||this._setExtents(e?this._getExtents()|dt.ITEM_EXT_CHECKED:this._getExtents()&~dt.ITEM_EXT_CHECKED)},u.prototype._clearDisplayLevels=function(){},u);t.EditItem=o;var a,f=(a=vt.ProxyItemProvider,l.__extends(c,a),c.prototype._doDispose=function(){this._saveDs=null,a.prototype._doDispose.call(this)},c.prototype.isDataEditing=function(){return this.isEditing()},c.prototype.cancelDataEditing=function(){this.isEditing()&&this.fireCancelRequest()},c.prototype.commitDataEditing=function(){this.isEditing()&&this.fireCommitRequest()},c.prototype.editCommandStackChanged=function(e,t,n){var r=this._saveDs;r?this._fireCommandStackChanged(t||r.canUndo,n||r.canRedo):this._fireCommandStackChanged(t,n)},_dp(c,"isCheckDiff",{get:function(){return this._checkDiff},set:function(e){this._checkDiff=e}}),_dp(c,"isCheckCellDiff",{get:function(){return this._checkCellDiff},set:function(e){this._checkCellDiff=e}}),_dp(c,"isStrictDiff",{get:function(){return this._strictDiff},set:function(e){this._strictDiff=e}}),_dp(c,"editingItem",{get:function(){return this._commiting||this.isEditing()?this._editingItem:null}}),_dp(c,"isUpdating",{get:function(){return this._editingState==dt.ItemState.UPDATING}}),_dp(c,"isInserting",{get:function(){return this._editingState==dt.ItemState.INSERTING}}),_dp(c,"isAppending",{get:function(){return this._editingState==dt.ItemState.APPENDING}}),_dp(c,"undoable",{get:function(){return this._undoable&&this._saveDs&&this._saveDs.undoable},set:function(e){e!=
this._undoable&&(this._undoable=e,this._commands.flush(),this._saveDs.undoable=e)}}),_dp(c,"cancelWhenLastUndo",{get:function(){return this._cancelWhenLastUndo},set:function(e){this._cancelWhenLastUndo=e}}),_dp(c,"canUndo",{get:function(){return this._commands.canUndo||this._saveDs&&this._saveDs.canUndo}}),_dp(c,"canRedo",{get:function(){return this._commands.canRedo||this._saveDs&&this._saveDs.canRedo}}),_dp(c,"undoing",{get:function(){return this._commands.undoing}}),_dp(c,"redoing",{get:function(){return this._commands.redoing}}),c.prototype.isEditing=function(e){return dt.ItemState_isEditing(this._editingState)&&(!e||e===this._editingItem)},c.prototype.isEdited=function(e){return dt.ItemState_isEditing(this._editingState)&&(!e||e===this._editingItem)&&this._modified},c.prototype.setDiffs=function(e,t,n){this._checkDiff=e,this._checkCellDiff=t,this._strictDiff=n},c.prototype.edit=function(e){if(this.isEditing())return!0;if(e)try{return this._beginUpdate(e),!0}catch(e){throw this.cancel(),e}return!1},c.prototype.editData=function(e,t,n){var r;if(e&&(r=this.dataSource)&&0<=t&&t<r.fieldCount){if(!this.isEditing())try{return this._beginUpdate(e),!0}catch(e){throw this.cancel(),e}this._editingItem.setData(t,n)}return!1},c.prototype.appendDummy=function(){if(!this.isEditing())try{this._beginAppendDummy()}catch(e){this.cancelDummy()}},c.prototype.append=function(e){if(!this.isEditing())try{return this._beginAppend(e),!0}catch(e){throw this.cancel(),e}return!1},c.prototype.insert=function(e,t,n,r){if(!this.isEditing())try{return this._beginInsert(e,t,n,r),!0}catch(e){throw this.cancel(),e}return!1},c.prototype.cancelDummy=function(){this._dummyEditItem&&this._cancelDummyEdit()},c.prototype.cancel=function(){this.isEditing()&&this._cancelEdit()},c.prototype.commit=function(){if(this.isEditing()){this._commiting=!0;try{var e=this.dataSource;if(e){if(this._editingState==dt.ItemState.UPDATING&&this.isCheckDiff){for(var t=this._editingItem.values,n=t.length,r=this.isStrictDiff,i=!1,s=0;s<n;s++)if(r){if(!e.getField(s).equalValues(this._orgItem.getData(s),t[s])){i=!0;break}}else if(!e.getField(s).sameValues(this._orgItem.getData(s),t[s])){i=!0;break}if(!i)return this._cancelEdit(),!0}return this._commitEdit()}}finally{this._commiting=!1}}return!0},c.prototype.execute=function(e){e&&(this.undoable?this._commands.execute(e):e.execute())},c.prototype.undo=function(){this.isEditing()?(this._commands.undo(),!this._commands.canUndo&&this._cancelWhenLastUndo&&this.cancel()):this._saveDs&&this._saveDs.undo()},c.prototype.redo=function(){this.isEditing()?this._commands.redo():this._saveDs&&this._saveDs.redo()},c.prototype.clearCommandStack=function(e){void 0===e&&(e=!0),this._commands.flush(),e&&this._saveDs&&this._saveDs.clearCommandStack()},c.prototype.revert=function(e){},c.prototype.revertAll=function(e){},c.prototype._checkEditing=function(){if(!this.isEditing())throw new Error("itemProvider is not editing")},c.prototype._checkNotEditing=function(){if(this.isEditing())throw new Error("itemProvider is already editing")},c.prototype._beginUpdate=function(e){if(!e)throw new Error("item is null");this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginUpdate(e),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._orgItem=e,this._editingState=dt.ItemState.UPDATING,this._commands.flush(),this.fireUpdateStarted(this._editingItem))},c.prototype._doBeginUpdate=function(e){return null},c.prototype._beginAppendDummy=function(){this._dummyEditItem=this._doBeginAppendDummy()},c.prototype._doBeginAppendDummy=function(){return null},c.prototype._beginAppend=function(e){this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginAppend(e),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._editingState=dt.ItemState.APPENDING,this._commands.flush(),this.fireAppendStarted(this._editingItem))},c.prototype._doBeginAppend=function(e){return null},c.prototype._beginInsert=function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1),this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginInsert(e,t,n,r),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._editingState=dt.ItemState.INSERTING,this._resetItemIndicies(0),this._commands.flush(),this.fireInsertStarted(this._editingItem))},c.prototype._doBeginInsert=function(e,t,n,r){return null},c.prototype._updateEditingRow=function(e){return!1},c.prototype._insertEditingRow=function(e){return!1},c.prototype._cancelDummyEdit=function(){this._dummyEditItem=null,this._doCancelDummyEdit()},c.prototype._cancelEdit=function(){this._checkEditing();var e=this._editingState;try{this._editingState=dt.ItemState.NORMAL,this._doCancelEdit(e,this._orgItem)}catch(t){throw this._editingState=e,t}this._modified=!1,this._commands.flush(),this.fireCanceled()},c.prototype._doCancelDummyEdit=function(){},c.prototype._doCancelEdit=function(e,t){e==dt.ItemState.INSERTING&&this._resetItemIndicies(0)},c.prototype._commitEdit=function(){if(this._checkEditing(),!this.dataSource)throw new Error("data provier is null");try{this.fireItemCommitting(this._editingItem)}catch(e){alert(e.message)}var t=this._editingState,e=!1;if(this.isUpdating)try{this._editingState=dt.ItemState.NORMAL,e=this._doCompleteUpdate(this._orgItem)}catch(e){throw this._editingState=t,e}else try{this._editingState=dt.ItemState.NORMAL,e=this._doCompleteInsert(t==dt.ItemState.APPENDING)}catch(e){throw this._editingState=t,e}return e?(this._modified=!1,this._doCommitEdit(t,this._orgItem),this._commands.flush(),this.fireCommitted(this._editingItem)):this._editingState=t,e},c.prototype._doCommitEdit=function(e,t){return!1},c.prototype._editItemCellEdited=function(e,t){e&&this.isEditing(e)&&(this._modified=!0,this.fireItemCellEdited(e,t))},c.prototype._editItemCellUpdated=function(e,t,n,r){this.isEditing(e)&&(this._modified=!0,this.fireItemCellUpdated(e,t,n,r))},c.prototype.$_editingItem=function(){return this._editingItem},c.prototype.$_dummyItem=function(){return this._dummyEditItem},c.prototype.fireUpdateStarted=function(e){this.$_canFire()&&this.fireEvent(c.UPDATE_STARTED,e)},c.prototype.fireAppendStarted=function(e){this.$_canFire()&&this.fireEvent(c.APPEND_STARTED,e)},c.prototype.fireInsertStarted=function(e){this.$_canFire()&&this.fireEvent(c.INSERT_STARTED,e)},c.prototype.fireItemCellEdited=function(e,t){this.$_canFire()&&this.fireEvent(c.CELL_EDITED,e,t)},c.prototype.fireItemCellUpdated=function(e,t,n,r){this.$_canFire()&&this.fireEvent(c.CELL_UPDATED,e,t,n,r)},c.prototype.fireItemCommitting=function(e){this.$_canFire()&&this.fireEvent(c.COMMITTING,e)},c.prototype.fireCommitted=function(e){this.$_canFire()&&this.fireEvent(c.COMMITTED,e)},c.prototype.fireCanceled=function(){this.$_canFire()&&this.fireEvent(c.CANCELED)},c.prototype.fireCommitRequest=function(){this.$_canFire()&&this.fireEvent(c.COMMIT_REQUEST)},c.prototype.fireCancelRequest=function(){this.$_canFire()&&this.fireEvent(c.CANCEL_REQUEST)},c.prototype.onItemProviderReset=function(e){a.prototype.onItemProviderReset.call(this,e),e=this.dataSource,e!=this._saveDs&&(this._saveDs&&this._saveDs.unregisterClient(this),this._saveDs=e,this._saveDs&&this._saveDs.registerClient(this))},c.prototype.onItemProviderRefresh=function(e){a.prototype.onItemProviderRefresh.call(this,e)},c.prototype.onItemProviderRefreshClient=function(e){a.prototype.onItemProviderRefreshClient.call(this,e)},c.prototype.onItemProviderItemInserted=function(e,t){a.prototype.onItemProviderItemInserted.call(this,e,t)},c.prototype.onItemProviderItemDeleted=function(e,t){a.prototype.onItemProviderItemDeleted.call(this,e,t)},c.prototype.onItemProviderItemUpdated=function(e,t){a.prototype.onItemProviderItemUpdated.call(this,e,t)},c.prototype.onItemProviderCommandStackChanged=function(e,t,n){var r=this._commands;this._fireCommandStackChanged(t||r.canUndo,n||r.canRedo)},c.UPDATE_STARTED="onItemEditUpdateStarted",c.APPEND_STARTED="onItemEditAppendStarted",c.INSERT_STARTED="onItemEditInsertStarted",c.CELL_EDITED="onItemEditCellEdited",c.CELL_UPDATED="onItemEditCellUpdated",c.COMMITTING="onItemEditCommitting",c.COMMITTED="onItemEditCommitted",c.CANCELED="onItemEditCanceled",c.COMMIT_REQUEST="onItemEditCommitRequest",c.CANCEL_REQUEST="onItemEditCancelRequest",c);t.EditableItemProvider=f;var h,f=(h=f,l.__extends(p,h),p.prototype._doDispose=function(){h.prototype._doDispose.call(this)},_dp(p,"itemCount",{get:function(){var e=this.source.itemCount;return e+=this.isInserting||this.isAppending?1:0,e+=this.$_dummyItem()?1:0}}),p.prototype.getItem=function(e,t){var n=this.source;if(t)return n.getItem(e,t);var r,i=this.$_editingItem(),t=this.$_dummyItem();return this.isEditing()&&i.index==e?i:(this.isInserting?r=e>i.index?n.getItem(e-1):n.getItem(e):e<n.itemCount&&(r=n.getItem(e)),r||(t&&e==this.itemCount-1?t:null))},p.prototype.getItems=function(e,t){return this.source.getItems(e,t)},p.prototype._doBeginUpdate=function(e){return this._createEditItem(e,dt.ItemState.UPDATING,null,!1,!1)},p.prototype._doBeginAppendDummy=function(){return this.$_dummyItem()||this._createDummyEditItem()},p.prototype._doBeginAppend=function(e){return this._createEditItem(null,dt.ItemState.APPENDING,e,!1,!1)},p.prototype._doBeginInsert=function(e,t,n,r){return this._createEditItem(e,dt.ItemState.INSERTING,t,n,r)},p.prototype._doCompleteUpdate=function(e){var t=this.dataSource;if(t instanceof M.DataProvider){var n=this.$_editingItem();return this._copyExtents(n,e),t.updateRow(n.dataRow,n.values,!1)}return!1},p.prototype._doCompleteInsert=function(e){var t,n,r=this.dataSource,i=!1;return r&&(t=this.$_editingItem(),n=e?r.rowCount:Math.max(0,this._insertRow),e=t.values,!(i=r.insertRow(n,e,t._index2))||(n=this.getItemOfRow(n,!0))&&(t._setCheckable(n.checkable),this._copyExtents(t,n),t.heights&&(n.heights=t.heights.slice()))),i},p.prototype.remove=function(e){var t=this.dataSource;!e||this.isEditing(e)||!t||0<=(e=e.dataRow)&&t.removeRow(e)},p.prototype.revert=function(e){var t,n;!(e=e instanceof dt.GridItem?e:this.getItem(e))||(t=this.dataSource)&&(n=e.dataRow,(e=t.getRowState(n))==d.RowState.DELETED?t.setRowState(n,d.RowState.NONE,!1):e==d.RowState.CREATE_AND_DELETED&&t.setRowState(n,d.RowState.CREATED,!1))},p.prototype.revertAll=function(e){if(e&&0!=e.length){var t=this.dataSource;if(t)for(var n=e.length;n--;){var r,i=this.getItem(e[n]);i&&(r=i.dataRow,(i=t.getRowState(r))==d.RowState.DELETED?t.setRowState(r,d.RowState.NONE,!1):i==d.RowState.CREATE_AND_DELETED&&t.setRowState(r,d.RowState.CREATED,!1))}}},p.prototype.getRemovableRows=function(e){if(!e||0==e.length)return null;for(var t=[],n=0,r=e.length;n<r;n++){var i=this.getItem(e[n]).dataRow;0<=i&&t.push(i)}return t},p.prototype.removeRows=function(e){e&&(1<e.length?this.dataSource.removeRows(e):this.dataSource.removeRow(e[0]))},p.prototype._createDummyEditItem=function(){return new r(this,null,this.itemCount,-1,dt.ItemState.DUMMY)},p.prototype._createEditItem=function(e,t,n,r,i){var s=this.dataSource;if(!s)return null;var u=null,a=s.fieldCount;switch(t){case dt.ItemState.UPDATING:for(var u=new o(this,e,e.index,e.dataRow,t),f=0;f<a;f++)u.setValue(f,e.getData(f));this._copyExtents(e,u),e.heights&&(u._heights=e.heights.slice());break;case dt.ItemState.INSERTING:case dt.ItemState.APPENDING:var l=this._rs,c=t==dt.ItemState.INSERTING&&e?r?e.index+1:e.index:this.itemCount;if(u=new o(this,e,c,-1,t),t==dt.ItemState.INSERTING){var c=e.dataRow,h=e;if(c<=-1){for(var p=this.source._visibleItems;(h=p.getNext(h))&&!(h instanceof dt.GridRow););this._insertRow=h?h.dataRow:s.rowCount}else this._insertRow=r?Math.min(s.rowCount,c+1):c;e instanceof dt.GridRow&&r&&l&&(c=l._pubItems.indexOf(h),0<=c++&&c<=l._pubItems.length&&(u._index2=c))}if(n)for(f=0;f<a;f++)n.length>f&&u.setValue(f,n[f])}return u},p);t.EditableItemProviderImpl=f});t(mt),mt.DummyEditItem,mt.EditItem,mt.EditableItemProvider,mt.EditableItemProviderImpl;var gt=n(function(e,t){function i(e,t){var r=n.call(this,e)||this;return r.message=e,r.tokenPos=t,r}function o(e){this.literal=e}function a(e,t){void 0===t&&(t=-1),this.ident=e,this.idKey=t}function c(e,t,n){void 0===t&&(t=-1),void 0===n&&(n=!1),this.ident=e,this.idKey=t,this.capital=n}function h(e,t){void 0===t&&(t=!1),this._silentError=!1,this._tokens=[],this._source=e,this._silentError=t,e&&this._parse(e)}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Error,l.__extends(i,n),i);t.ExpressionStatementError=r;var s=(o.prototype.evaluate=function(e){return this.literal},o),u=(a.prototype.evaluate=function(e){return this.idKey<0&&(this.idKey=e.isIdentifier(this.ident)),e.evaluateIdentifier(this.idKey)},a),f=(c.prototype.evaluate=function(e){var t=this.ident,n=t.indexOf("["),r=t.indexOf("]");if(n<r){var i=t.substr(0,n).trim(),r=t.substring(n+1,r).replace(/'|"/g,"").trim();return this.idKey<0&&(this.idKey=e.isIdentifier(i)),e.evaluateIndexerS(this.idKey,r,this.capital)}},c);_dp(h,"source",{get:function(){return this._source},set:function(e){e!=this._source&&(this._source=e,this._parse(e))}}),h.prototype.evaluate=function(e){try{for(var t=this._tokens,n="",r=0,i=t.length;r<i;r++)n+=t[r].evaluate(e)||"";return n}catch(e){if(!this._silentError)throw new e}return null},h.prototype._parse=function(e){if(this._tokens=[],e)for(var t=e.length,n=0;n<t;){var r,i,o,a,l=e.indexOf("${",n);if(0<=l&&(0<=(r=e.indexOf("}",l+2))?(n<l&&(a=e.substring(n,l),i=new s(a),this._tokens.push(i)),(c=e.substring(l+2,r).trim())&&(a=o=void 0,i=new((o=c.indexOf("["))&&(a=c.indexOf("]"))&&o<a?f:u)(c),this._tokens.push(i)),n=r+1):l=-1),l<0){var c=e.substr(n,t);i=new s(c),this._tokens.push(i);break}}},r=h,t.ExpressionStatement=r});t(gt),gt.ExpressionStatementError,gt.ExpressionStatement;var yt=n(function(e,t){function s(e){var t=r.call(this)||this;return t._active=!1,t._visible=!0,t._level=0,t._category=null,t.criteria=e,t}function a(){var e=o.call(this,null)||this;return e._childs=[],e}function f(e){this._model=e,this.parse()}function h(e){var t=c.call(this)||this;return t._items=[],t._names={},t._updating=!1,t._nextId=1,t._owner=e,t}function m(){var e=v.call(this)||this;return e._field=-1,e._fieldCount=0,e}var n;Object.defineProperty(t,"__esModule",{value:!0}),(u=n=t.ActiveState||(t.ActiveState={})).ACTIVE="active",u.UNACTIVE="unactive",u.INDETERMINATE="indeterminate";var r,i=(r=x.EventAware,l.__extends(s,r),s.prototype._doDispose=function(){this._criteria=null,this._category=null,r.prototype._doDispose.call(this)},_dp(s,"name",{get:function(){return this._name},set:function(e){this._name=e}}),_dp(s,"criteria",{get:function(){return this._criteria},set:function(e){e!=this._criteria&&(this._criteria=e,this.criteriaChanged())}}),_dp(s,"callback",{get:function(){return this._callback},set:function(e){this._callback=e,this.callbackChanged()}}),_dp(s,"text",{get:function(){return this._text},set:function(e){this._text=e,this.changed()}}),_dp(s,"description",{get:function(){return this._description},set:function(e){this._description=e}}),_dp(s,"active",{get:function(){return this._active},set:function(e){e!=this._active&&(this._active=e,this.changed())}}),_dp(s,"visible",{get:function(){return this._visible},set:function(e){this._visible=e,this.changed()}}),_dp(s,"tag",{get:function(){return this._tag},set:function(e){this._tag=e}}),_dp(s,"category",{get:function(){return this._category},set:function(e){this._category=e}}),_dp(s,"level",{get:function(){return this._level},set:function(e){this._level=e}}),s.prototype.toString=function(){return this._text||this._name},s.prototype.changed=function(){this.fireEvent(s.CHANGED)},s.prototype.criteriaChanged=function(){},s.prototype.callbackChanged=function(){},s.CHANGED="onColumnFilterChanged",s);t.ColumnFilter=i;var o,u=(o=i,l.__extends(a,o),_dp(a,"active",{get:function(){for(var e=this._childs.length;e--;)if(!this._childs[e].active)return!1;return!0},set:function(e){for(var t=this._childs.length;t--;)this._childs[t].active=e}}),_dp(a,"count",{get:function(){return this._childs.length}}),_dp(a,"activeState",{get:function(){for(var e=void 0,t=0,r=this._childs.length;t<r;t++){if(null!=e&&this._childs[t].active!=e)return n.INDETERMINATE;e=this._childs[t].active}return e?n.ACTIVE:n.UNACTIVE}}),a.prototype._doDispose=function(){this.clear(),o.prototype._doDispose.call(this)},a.prototype.clear=function(){this._childs=[]},a.prototype.add=function(e,t,n,r,s){return r=new i(r),r.name=t,r.text=n,r.active=s,this.addChild(r),e.add(r),r},a.prototype.addChild=function(e){e.level=this.level+1,(e.category=this)._childs.push(e)},a.prototype.getChild=function(e){return this._childs[e]},a);t.ColumnFilterCategory=u,f.prototype._doDispose=function(){this._exprNode=null,this._model=null},_dp(f,"model",{get:function(){return this._model}}),f.prototype.prepare=function(e,t){e.setDataSource(t)},f.prototype.select=function(e,t,n,r){var i=this._model.callback;return i?i.call(this,e._ds.handler,n.dataRow,t.level+1,r,this._model,n.getData(r)):!this._exprNode||(e.setData(n,r),this._exprNode.evaluate(e))},f.prototype.criteriaChanged=function(){this.parse()},f.prototype.parse=function(){this._model.callback||(this._model.criteria?this._exprNode=b.ExpressionParser.Default.parse(this._model.criteria,null):this._exprNode=null)},u=f,t.ColumnFilterRun=u;var c,u=(c=x.EventAware,l.__extends(h,c),h.prototype._doDispose=function(){c.prototype._doDispose.call(this)},_dp(h,"count",{get:function(){return this._items.length}}),_dp(h,"activeCount",{get:function(){for(var e=0,t=0,n=this._items;t<n.length;t++)n[t].active&&e++;return e}}),_dp(h,"items",{get:function(){return this._items.slice()}}),_dp(h,"isVisible",{get:function(){for(var e=0,t=this._items;e<t.length;e++)if(t[e].visible)return!0;return!1}}),h.prototype.getOwner=function(){return this._owner},h.prototype.getItem=function(e){return this._items[e]},h.prototype.itemByName=function(e){return this._names[e]},h.prototype.indexOf=function(e){for(var t=this._items.length-1;0<=t;t--)if(this._items[t].name==e)return t;return-1},h.prototype.getActiveItems=function(e){for(var t=[],n=this._items.length-1;0<=n;n--)this._items[n].active==e&&t.push(this._items[n]);return t},h.prototype.assignFrom=function(e){if(e!==this){var t=this.clear(!1);if(e)for(var n,r=e instanceof Array?e:[e],s=r.length,o=0;o<s;o++)(e=r[o])&&e.name&&(this.$_checkName(e.name),(n=new i(null)).assignFrom(e),this._items.push(n),(this._names[e.name]=n).addListener(this));(t||0<this.count)&&this.changed(null)}},h.prototype.clear=function(e){void 0===e&&(e=!0);var t=this._items.length;if(0<t){for(var n=0;n<t;n++)this._items[n].removeListener(this);return this._items.length=0,this._names={},e&&this.changed(null),!0}return!1},h.prototype.add=function(e,t){void 0===t&&(t=!0);var n=p.Utils.cast(e,i);n?this._items.indexOf(n)<0&&n.name&&this.$_checkName(n.name):e&&e.name&&(this.$_checkName(e.name),(n=new i(null)).assignFrom(e)),n&&(this._items.push(n),(this._names[n.name]=n).addListener(this),t&&this.changed(null))},h.prototype.addAll=function(e,t){if((e=e instanceof Array||!e?e:[e])&&0<e.length){for(var n=0,r=e.length,s=0;s<r;s++){var o,u=p.Utils.cast(e[s],i);u?this._items.indexOf(u)<0&&u.name&&(t||this.$_checkName(u.name)):e[s]&&e[s].name&&(t||this.$_checkName(e[s].name),(u=new i(null)).assignFrom(e[s])),u&&(0<=(o=this.indexOf(u.name))?(this._items[o]&&this._items[o].removeListener(this),this._items[o]=u):this._items.push(u),u.addListener(this),this._names[u.name]=u,n++)}0<n&&this.changed(null)}},h.prototype.remove=function(e){if(e){for(var t=this._items.length-1;0<=t;t--){var n=this._items[t];if(n.name==e)return this._items.splice(t,1),delete this._names[n.name],n.removeListener(this),this.changed(null),!0}return!1}},h.prototype.removeItems=function(e){if(e){for(var t=0,n=e.length-1;0<=n;n--){var r,i=this.indexOf(e[n]);0<=i&&(r=this._items[i],this._items.splice(i,1),delete this._names[r.name],r.removeListener(this),t++)}0<t&&this.changed(null)}},h.prototype.activateItems=function(e,t,n){if(void 0===n&&(n=!0),e){var r=0;this._updating=!0;try{for(var i=e.length-1;0<=i;i--){var s=this._names[e[i]];s&&s.active!=t&&(s._active=t,r++)}}finally{this._updating=!1}n&&0<r&&this.changed(null)}},h.prototype.activateAll=function(e){var t=!1;this._updating=!0;try{for(var n=0,r=this._items.length;n<r;n++){var i=this._items[n];i.active!=e&&(i._active=e,t=!0)}}finally{this._updating=!1}t&&this.changed(null)},h.prototype.hideFilters=function(e,t){if(e)for(var n=0,r=e.length;n<r;n++){var i=this._names[e[n]];i&&(i.visible=!t)}},h.prototype.hideAllFilters=function(e){for(var t=0,n=this._items.length;t<n;t++){var r=this._items[t];r&&(r.visible=!e)}},h.prototype.toggleItems=function(e){if(e){var t=0;this._updating=!0;try{for(var n=e.length-1;0<=n;n--){var r=this._names[e[n]];r&&(r._active=!r.active,t++)}}finally{this._updating=!1}0<t&&this.changed(null)}},h.prototype.toggleAll=function(){var e=!1;this._updating=!0;try{for(var t=0,n=this._items.length;t<n;t++){var r=this._items[t];r._active=!r.active,e=!0}}finally{this._updating=!1}e&&this.changed(null)},h.prototype.changed=function(e){this._updating||this.fireEvent(i.CHANGED,e)},h.prototype.$_checkName=function(e){if(this._names.hasOwnProperty(e))throw new Error("Column filter already existes: "+e)},h.prototype.$_userFilterAdd=function(e,t){var n=e instanceof i?e:null;return n||(this.$_checkName(e.name),(n=new i(null)).assignFrom(e)),this.add(n,t),n},h.prototype.onColumnFilterChanged=function(e){this.changed(e)},h.prototype.onColumnFilterSelectorChanged=function(){this.changed(null)},h.prototype.onColumnFilterUserAdd=function(e,t,n){},h);t.ColumnFilterCollection=u;var v,u=(v=b.ExpressionRuntime,l.__extends(m,v),m.prototype._doDispose=function(){this._item=this._ds=null,v.prototype._doDispose.call(this)},m.prototype.setDataSource=function(e){this._ds=e,this._fieldCount=this._ds?this._ds.fieldCount:0},m.prototype.setData=function(e,t){this._item=e,this._field=t},m.prototype.isIdentifier=function(e){return e=e.toLowerCase(),m.IDENTS.hasOwnProperty(e)?m.IDENTS[e]:v.prototype.isIdentifier.call(this,e)},m.prototype.evaluateIdentifier=function(e){switch(e){case m.ID_VALUE:return this._item.getData(this._field);case m.ID_STATE:switch(this._item.rowState){case d.RowState.CREATED:return"c";case d.RowState.UPDATED:return"u";case d.RowState.DELETED:return"d";case d.RowState.CREATE_AND_DELETED:return"x"}return;case m.ID_CHANGED_CELL:var t=this._item.dataRow,n=this._field;return 0<=n&&this._item.rowState==d.RowState.UPDATED&&this._ds.isDataChanged(t,n);case m.ID_FIELD:return this._field;case m.ID_MAX:case m.ID_MIN:case m.ID_MEAN:return 0}throw new b.ExpressionEvaluationError("Invalid identifier key: "+e)},m.prototype.evaluateIndexerI=function(e,t){if(this._item){if(e!=m.ID_VALUE&&e!=m.ID_VALUES)throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e);if(t<0||t>=this._fieldCount)throw new b.ExpressionEvaluationError("Data field index out of bounds:"+t);return this._item.getData(t)}},m.prototype.evaluateIndexerS=function(e,t,n){if(e!=m.ID_VALUE&&e!=m.ID_VALUES)throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e);if(this._ds){n=n?this._ds.getFieldIndexC(t):this._ds.getFieldIndex(t);if(n<0||n>=this._fieldCount)throw new b.ExpressionEvaluationError("Data field is not exists:"+t);return this._item.getData(n)}},m.IDENTS={value:m.ID_VALUE=0,field:m.ID_FIELD=1,values:m.ID_VALUES=2,state:m.ID_STATE=3,changedcell:m.ID_CHANGED_CELL=4,min:m.ID_MAX=10,max:m.ID_MIN=11,mean:m.ID_MEAN=12},m);t.ColumnFilterRuntime=u});t(yt),yt.ActiveState,yt.ColumnFilter,yt.ColumnFilterCategory,yt.ColumnFilterRun,yt.ColumnFilterCollection,yt.ColumnFilterRuntime;var bt=n(function(e,t){function i(e){var t=n.call(this)||this;return t._dirty=!1,t._grid=e,t}function o(e){return e=s.call(this,e)||this,e._visible=!0,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=x.EventAware,l.__extends(i,n),i.prototype._doDispose=function(){this._grid=null,n.prototype._doDispose.call(this)},_dp(i,"owner",{get:function(){return this._grid}}),_dp(i,"dirty",{get:function(){return this._dirty}}),i.prototype.clean=function(){this._dirty&&(this._dirty=!1)},i.prototype.invalidate=function(){this._grid&&this._grid.invalidate()},i.prototype.refreshOwner=function(){this._grid&&this._grid.refreshView()},i.prototype._changed=function(){this._doChanged(),this._dirty||(this._dirty=!0,this.refreshOwner())},i.prototype._doChanged=function(){},i);t.GridObject=r;var s,r=(s=r,l.__extends(o,s),o.prototype._doDispose=function(){s.prototype._doDispose.call(this)},_dp(o,"visible",{get:function(){return this._visible},set:function(e){e!=this._visible&&(this._visible=e,this._visibleChanged())}}),o.prototype._doChanged=function(){this._grid&&this._grid._visualObjectChanged(this)},o.prototype._visibleChanged=function(){this._changed()},o);t.VisualObject=r});t(bt),bt.GridObject,bt.VisualObject;var wt=n(function(e,t){function i(){var e=n.call(this)||this;return e._item=null,e._group=null,e._dataSource=null,e._fieldCount=0,e}function o(){var e=s.call(this)||this;return e._fieldCount=0,e}function a(){var e=u.call(this)||this;return e._fieldCount=0,e}function c(){return f.call(this)||this}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=b.ExpressionRuntime,l.__extends(i,n),i.prototype._doDispose=function(){this._item=null,this._group=null,this._dataSource=null,n.prototype._doDispose.call(this)},_dp(i,"index",{get:function(){return this._item.index}}),_dp(i,"item",{get:function(){return this._item}}),i.prototype.setDataSource=function(e){this._dataSource=e,this._fieldCount=e?e.fieldCount:0},i.prototype.setItem=function(e){this._item=e,this._group=p.Utils.cast(e,dt.GroupItem)},i.prototype.isIdentifier=function(e){return e=e.toLowerCase(),i.IDENTS.hasOwnProperty(e)?i.IDENTS[e]:n.prototype.isIdentifier.call(this,e)},i.prototype.evaluateIdentifier=function(e){switch(e){case i.ID_ROW:return this._item.index;case i.ID_DATAROW:return this._item.dataRow;case i.ID_CHECKED:return this._item.checked;case i.ID_STATE:switch(this._item.rowState){case d.RowState.CREATED:return"c";case d.RowState.UPDATED:return"u";case d.RowState.DELETED:return"d";case d.RowState.CREATE_AND_DELETED:return"x"}return;case i.ID_COUNT:return this._group?this._group.count:0;case i.ID_DCOUNT:return this._group?this._group.descendantCount:0}throw new b.ExpressionEvaluationError("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(e,t){if(this._item){if(e!=i.ID_VALUE&&e!=i.ID_VALUES)throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e);if(t<0||t>=this._fieldCount)throw new b.ExpressionEvaluationError("Data field index out of bounds:"+t);return this._item.getData(t)}},i.prototype.evaluateIndexerS=function(e,t,n){if(e!=i.ID_VALUE&&e!=i.ID_VALUES)throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e);if(this._dataSource){n=n?this._dataSource.getFieldIndexC(t):this._dataSource.getFieldIndex(t);if(n<0||n>=this._fieldCount)throw new b.ExpressionEvaluationError("Data field is not exists:"+t);return this._item.getData(n)}},i.IDENTS={row:i.ID_ROW=0,datarow:i.ID_DATAROW=1,checked:i.ID_CHECKED=2,value:i.ID_VALUE=3,values:i.ID_VALUES=4,state:i.ID_STATE=5,count:i.ID_COUNT=6,dcount:i.ID_DCOUNT=7},i);t.DataRowExpressionRuntime=r;var s,r=(s=b.ExpressionRuntime,l.__extends(o,s),o.prototype._doDispose=function(){this._cell=null,this._item=null,this._grid=null,this._dataSource=null,s.prototype._doDispose.call(this)},o.prototype.setDataSource=function(e){this._dataSource=e,this._fieldCount=e?e.fieldCount:0},o.prototype.setCell=function(e,t){this._cell=e,this._grid=e.index.grid,this._item=e.index.item||t},o.prototype.isIdentifier=function(e){return e=e.toLowerCase(),o.IDENTS.hasOwnProperty(e)?o.IDENTS[e]:s.prototype.isIdentifier.call(this,e)},o.prototype.evaluateIdentifier=function(e){if(this._cell.index.itemIndex<0){var t=this._cell.index.dataField;switch(e){case o.ID_VALUE:return this._item.getData(t);case o.ID_DATA_ROW:return this._item.dataRow}}switch(e){case o.ID_VALUE:return this._cell.value();case o.ID_ROW:return this._cell.index.itemIndex;case o.ID_DATA_ROW:return this._cell.index.dataRow;case o.ID_INDEX:return this._cell.index.column.index;case o.ID_FIELD:return this._cell.index.dataField;case o.ID_CHECKED:return this._item.checked;case o.ID_STATE:switch(this._item.rowState){case d.RowState.CREATED:return"c";case d.RowState.UPDATED:return"u";case d.RowState.DELETED:return"d";case d.RowState.CREATE_AND_DELETED:return"x"}return;case o.ID_TAG:return this._cell.index.column.tag;case o.ID_BASE:var n=this._cell.index.dataColumn.baseIndex;return 0<=n?this._item.getData(n):void 0;case o.ID_COUNT:return this._item instanceof dt.GroupItem?this._item.count:0;case o.ID_DCOUNT:return this._item instanceof dt.GroupItem?this._item.descendantCount:0;case o.ID_CHANGED_CELL:var r=this._cell.index,i=r.dataRow,r=r.dataField;return 0<=r&&this._item.rowState==d.RowState.UPDATED&&this._dataSource.isDataChanged(i,r);case o.ID_LOOKUP_EXISTS:i=this._cell.index.dataColumn,r=void 0;if(r=i.lookupSource){for(var s=i.lookupKeyFieldIds,u=s.length,a=[],f=0;f<u;f++)a.push(this._item.getData(s[f]));return r.exists(a)}return-1<i.getLookupIndex(this._cell.value())}throw new b.ExpressionEvaluationError("Invalid identifier key: "+e)},o.prototype.evaluateIndexerI=function(e,t){if(this._item){if(e!=o.ID_VALUE&&e!=o.ID_VALUES)throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e);if(t<0||t>=this._fieldCount)throw new b.ExpressionEvaluationError("Data field index out of bounds:"+t);return this._item.getData(t)}},o.prototype.evaluateIndexerS=function(e,t,n){if(e!=o.ID_VALUE&&e!=o.ID_VALUES)throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e);if(this._dataSource){n=n?this._dataSource.getFieldIndexC(t):this._dataSource.getFieldIndex(t);if(n<0||n>=this._fieldCount)throw new b.ExpressionEvaluationError("Data field is not exists:"+t);return this._item.getData(n)}},o.IDENTS={value:o.ID_VALUE=0,row:o.ID_ROW=1,datarow:o.ID_DATA_ROW=2,index:o.ID_INDEX=3,field:o.ID_FIELD=4,checked:o.ID_CHECKED=5,state:o.ID_STATE=6,tag:o.ID_TAG=7,base:o.ID_BASE=8,values:o.ID_VALUES=9,count:o.ID_COUNT=10,dcount:o.ID_DCOUNT=11,changedcell:o.ID_CHANGED_CELL=12,lookupexists:o.ID_LOOKUP_EXISTS=13},o);t.DataCellExpressionRuntime=r;var u,r=(u=b.ExpressionRuntime,l.__extends(a,u),a.prototype._doDispose=function(){this._cell=null,this._item=null,this._ds=null,this._grid=null,u.prototype._doDispose.call(this)},a.prototype.setDataArguments=function(e,t,n){this._ds=e,this._fieldCount=e?e.fieldCount:0,this._cell=t,this._item=n,this._grid=t&&t.index.column.grid},a.prototype.setItem=function(e){this._item=e},a.prototype.isIdentifier=function(e){return e=e.toLowerCase(),a.IDENTS.hasOwnProperty(e)?a.IDENTS[e]:u.prototype.isIdentifier.call(this,e)},a.prototype.evaluateIdentifier=function(e){switch(e){case a.ID_VALUE:return this._item.getData(this._cell.index.dataField);case a.ID_BASE:return 0<=(r=this._cell.index.dataColumn.baseIndex)?this._item.getData(r):void 0;case a.ID_PREV_VALUES:var t=this._cell.index.column,n=this._grid.getDataColumns(),r=n.indexOf(t),i=[];if(n.length<0||r<0)return;for(var s=0,o=Math.min(r,n.length);s<o;s++)i.push(this._item.getData(n[s].dataIndex));return i.join("`")}throw new b.ExpressionEvaluationError("Invalid identifier key: "+e)},a.prototype.evaluateIndexerI=function(e,t){if(this._item){if(e!=a.ID_VALUE&&e!=a.ID_VALUES)throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e);if(t<0||t>=this._fieldCount)throw new b.ExpressionEvaluationError("Data field index out of bounds:"+t);return this._item.getData(t)}},a.prototype.evaluateIndexerS=function(e,t,n){if(e!=a.ID_VALUE&&e!=a.ID_VALUES)throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e);if(this._ds){n=n?this._ds.getFieldIndexC(t):this._ds.getFieldIndex(t);if(n<0||n>=this._fieldCount)throw new b.ExpressionEvaluationError("Data field is not exists:"+t);return this._item.getData(n)}},a.IDENTS={value:a.ID_VALUE=0,values:a.ID_VALUES=1,base:a.ID_BASE=2,prevvalues:a.ID_PREV_VALUES=3},a);t.EqualBlankRuntime=r;var f,r=(f=b.ExpressionRuntime,l.__extends(c,f),c.prototype.setGrid=function(e){this._grid=e},c.prototype.setGroup=function(e){this._group=e},c.prototype.isIdentifier=function(e){return e=e.toLowerCase(),c.IDENTS.hasOwnProperty(e)?c.IDENTS[e]:f.prototype.isIdentifier.call(this,e)},c.prototype.evaluateIdentifier=function(e){var t,n=this._group;switch(e){case c.ID_GROUP_FIELD:return(t=n.dataSource.getField(n.groupField))?t.fieldName:"";case c.ID_FIELD_HEADER:return(t=n.dataSource.getField(n.groupField))?t.header:"";case c.ID_GROUP_COLUMN:return(r=this._grid?this._grid.columnByField(n.groupField):null)?r.displayText:n.dataSource.getFieldName(n.groupField);case c.ID_COLUMN_HEADER:return(r=this._grid?this._grid.columnByField(n.groupField):null)?r.header.text||r.displayText:n.dataSource.getFieldName(n.groupField);case c.ID_COLUMN_FOOTER:return(r=this._grid?this._grid.columnByField(n.groupField):null)?r.footer.text||r.displayText:n.dataSource.getFieldName(n.groupField);case c.ID_GROUP_VALUE:var r=n.firstItem;return r?r.getData(n.groupField):void 0;case c.ID_ROW_COUNT:return n.descendantCount}throw new b.ExpressionEvaluationError("Invalid identifier key: "+e)},c.prototype.evaluateIndexerI=function(e,t){switch(e){case c.ID_SUM:case c.ID_MAX:case c.ID_MIN:case c.ID_AVG:case c.ID_DATA_COUNT:case c.ID_DATA_AVG:if(isNaN(t)||t<0)return;var n=void 0;switch(e){case c.ID_SUM:n=this._group.getSum(t);break;case c.ID_MAX:n=this._group.getMax(t);break;case c.ID_MIN:n=this._group.getMin(t);break;case c.ID_AVG:n=this._group.getAvg(t);break;case c.ID_DATA_COUNT:n=this._group.getDataCount(t);break;case c.ID_DATA_AVG:n=this._group.getDataAvg(t)}return isNaN(n)?"":String(n)}throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e)},c.prototype.evaluateIndexerS=function(e,t,n){var r=this._group.dataSource,t=t?r?r.getFieldIndex(t):-1:this._group.groupField;return this.evaluateIndexerI(e,t)},c.IDENTS={groupfield:c.ID_GROUP_FIELD=0,fieldheader:c.ID_FIELD_HEADER=1,groupcolumn:c.ID_GROUP_COLUMN=2,columnheader:c.ID_COLUMN_HEADER=3,columnfooter:c.ID_COLUMN_FOOTER=4,groupvalue:c.ID_GROUP_VALUE=5,rowcount:c.ID_ROW_COUNT=6,sum:c.ID_SUM=7,max:c.ID_MAX=8,min:c.ID_MIN=9,avg:c.ID_AVG=10,datacount:c.ID_DATA_COUNT=11,dataavg:c.ID_DATA_AVG=12},c);t.RowGroupStatementRuntime=r});t(wt),wt.DataRowExpressionRuntime,wt.DataCellExpressionRuntime,wt.EqualBlankRuntime,wt.RowGroupStatementRuntime;var Et=n(function(e,t){function i(e){var t=n.call(this)||this;return t._index=new It.CellIndex,t._name=e,t}function u(e,t){return t=s.call(this,t=void 0===t?null:t)||this,t._model=e,t}function h(e){return a.call(this,e)||this}function d(e){return p.call(this,(e=void 0===e?null:e)||"dataCell")||this}function m(){return null!==v&&v.apply(this,arguments)||this}function b(e){return g.call(this,(e=void 0===e?null:e)||"literalCell")||this}function E(e){return w.call(this,(e=void 0===e?null:e)||"seriesCell")||this}function x(e){return S.call(this,(e=void 0===e?null:e)||"mergedDataCell")||this}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.prototype._doDispose=function(){this._index&&this._index.dispose(),this._index=null,n.prototype._doDispose.call(this)},_dp(i,"name",{get:function(){return this._name}}),_dp(i,"index",{get:function(){return this._index}}),_dp(i,"item",{get:function(){return this._index.item}}),_dp(i,"valueColumn",{get:function(){return this._index.valueColumn}}),_dp(i,"dataColumn",{get:function(){return this._index.dataColumn}}),_dp(i,"text",{get:function(){return null}}),_dp(i,"value",{get:function(){}}),_dp(i,"level",{get:function(){return 0}}),i.prototype.setIndex=function(e){this._index.assignFrom(e)},i.prototype.setIndex2=function(e,t,n){this._index._grid=e,this._index.set(t,n)},i.prototype.setLayout=function(e){this._index.layout=e},i.ERROR="<<ERROR>>",i);t.GridCell=r;var s,o=(s=r,l.__extends(u,s),u.prototype._doDispose=function(){s.prototype._doDispose.call(this)},_dp(u,"model",{get:function(){return this._model},set:function(e){this._model=e}}),u);t.StyledCell=o;var a,f=(a=r,l.__extends(h,a),h.prototype._doDispose=function(){a.prototype._doDispose.call(this)},h.prototype.getBlankState=function(){return c.BlankState.NONE},h.prototype.isValueChanged=function(){return!1},h);t.ValueCell=f;var p,o=(p=f,l.__extends(d,p),d.getText=function(e,t){var n=0<=t.dataIndex?e.getData(t.dataIndex):void 0;return d._getText(e,t,n)},d._getText=function(e,t,n){var r=t;if(r.lookupDisplay){var i=r.lookupSource;if(i){for(var s=r.lookupKeyFieldIds,o=s.length,u=[],a=0;a<o;a++)u.push(e.getData(s[a]));l=void 0!==(l=i.lookup(u,r.valueSeparator))?l:null!=r.textOfInvalid?r.textOfInvalid:n}else var f=r.labelFieldIndex,l=0<=f?e.getData(f):r.getLookupLabel(n)}else{var h,f=void 0;l=n,r.valueType==c.ValueType.NUMBER&&null!=(h=r.nanText)&&isNaN(l)?l=h:(f=r.displayCallback)?l=f(r.grid.handler,It.CellIndex.temp(r.grid,e.index,t).proxy(),l):null!=l&&"object"==typeof l&&(l=JSON.stringify(l))}return null==l?"":String(l)},d._getDisplayText=function(e,t,n,r,i){var e=e.formatOptions,s=i.textFormatter||void 0===n.textFormat&&e.textFormatter,o=i.numberFormatter||void 0===n.numberFormat&&e.numberFormatter,u=i.booleanFormatter||void 0===n.booleanFormat&&e.boolFormatter,a=i.datetimeWriter||void 0===n.datetimeFormat&&e.datetimeWriter;if(n){switch(n.valueType){case c.ValueType.TEXT:l=r&&s?s.getText(r):d._getText(t,n,r);break;case c.ValueType.NUMBER:var f=Number(r),l=isNaN(f)||null==f?n.nanText:0==f&&null!=n.zeroText?n.zeroText:o?o.getText(f,n.displayMinusZero):d._getText(t,n,r);break;case c.ValueType.DATETIME:l=r instanceof Date&&a?a.getText(r):d._getText(t,n,r);break;case c.ValueType.BOOLEAN:l=u?u.formatValue(r):d._getText(t,n,r);break;case c.ValueType.OBJECT:var h=n.getField(),p=t.dataRow,v=n.objectKey||n.objectCallback,f=(v?n:h).objectKey,v=(v?n:h).objectCallback;if(r){var m=l=v&&"function"==typeof v?v(h.orgFieldName,p,r):f&&r.hasOwnProperty(f)?r[f]:d._getText(t,n,r);switch(typeof m){case"string":break;case"number":l=o?o.getText(m,n.displayMinusZero):String(m);break;case"boolean":l=u?u.formatValue(m):String(m);break;default:l=m instanceof Date&&a?a.getText(m):m?String(m):""}}break;default:l=d._getText(t,n,r)}l&&((e=i.prefix)&&(l=e+l),(e=i.suffix)&&(l+=e))}return l},d.equalBlankRuntime=function(){return this._equalBlankRuntime||(this._equalBlankRuntime=new wt.EqualBlankRuntime),this._equalBlankRuntime},d.prototype._doDispose=function(){p.prototype._doDispose.call(this)},d.prototype.getValue=function(){var e=this.dataColumn.dataIndex;if(0<=e)return this.item.getData(e)},d.prototype.getDisplayText=function(e,t){return d._getDisplayText(e,this.index.item,this.index.dataColumn,this.getValue(),t)},_dp(d,"value",{get:function(){return this.getValue()}}),d.prototype.getBlankState=function(){var e,t,n,r,i,s=c.BlankState.NONE,o=this.index,u=o.layout,a=this.dataColumn,f=this.item,l=u.equalBlankNode,h=l&&d.equalBlankRuntime();return u&&u.blanked&&u.dataRoot&&0<=f.dataRow&&(t=(e=u.grid).itemCount,l&&h&&h.setDataArguments(f.dataSource,this,f),1<t&&(n=o.itemIndex,r=a.dataIndex,i=l?(h.setItem(f),l.evaluate(h)):f.getData(r),a=o=u=void 0,0<n?(f=e.getItem(n-1),n<t-1?(a=e.getItem(n+1),f instanceof dt.GridRow?(u=l?(h.setItem(f),l.evaluate(h)):f.getData(r),(i instanceof Date&&u instanceof Date?+i==+u:i==u)?s=a instanceof dt.GridRow&&((o=l?(h.setItem(a),l.evaluate(h)):a.getData(r))instanceof Date&&i instanceof Date?+o==+i:o==i)?c.BlankState.BODY:c.BlankState.TAIL:a instanceof dt.GridRow&&((o=l?(h.setItem(a),l.evaluate(h)):a.getData(r))instanceof Date&&i instanceof Date?+o==+i:o==i)&&(s=c.BlankState.HEAD)):a instanceof dt.GridRow&&((o=l?(h.setItem(a),l.evaluate(h)):a.getData(r))instanceof Date&&i instanceof Date?+o==+i:o==i)&&(s=c.BlankState.HEAD)):f instanceof dt.GridRow&&((u=l?(h.setItem(f),l.evaluate(h)):f.getData(r))instanceof Date&&i instanceof Date?+u==+i:u==i)&&(s=c.BlankState.TAIL)):(a=e.getItem(n+1))instanceof dt.GridRow&&((o=l?(h.setItem(a),l.evaluate(h)):a.getData(r))instanceof Date&&i instanceof Date?+o==+i:o==i)&&(s=c.BlankState.HEAD))),s},d.prototype.isValueChanged=function(){var e=this.dataColumn.dataIndex;return 0<=e&&this.item.isChanged(e)},d);t.DataCell=o;var v,r=(v=o,l.__extends(m,v),m.prototype.setItem=function(e){this.$_item=e},_dp(m,"item",{get:function(){return this.$_item}}),m);t.HiddenDataCell=r;var g,r=(g=f,l.__extends(b,g),b.prototype._doDispose=function(){g.prototype._doDispose.call(this)},_dp(b,"text",{get:function(){return""}}),_dp(b,"value",{get:function(){return null}}),b.prototype.getDisplayText=function(e){return this.text},b);t.LiteralCell=r;var w,f=(w=f,l.__extends(E,w),E.getText=function(e,t){return void 0===t&&(t=","),e?e.join(t):""},E.prototype._doDispose=function(){w.prototype._doDispose.call(this)},E.prototype.getDisplayText=function(e,t){var n=this.value;return n?n.join(t||","):""},_dp(E,"getText",{get:function(){return null}}),_dp(E,"value",{get:function(){var e=this.index.column;if(e instanceof jt.SeriesColumn){var t=e.fields,n=t?t.length:0;if(0<n){for(var r=this.item,i=new Array(n),s=0;s<n;s++)0<=t[s]&&(i[s]=r.getData(t[s]));return i}}return[]}}),E);t.SeriesCell=f;var S,o=(S=o,l.__extends(x,S),x.prototype._doDispose=function(){S.prototype._doDispose.call(this)},x.prototype.getValue=function(){var e=this.index,t=e.item;return t instanceof dt.GridRow?S.prototype.getValue.call(this):(t=(t instanceof dt.GroupItem?t:t.parent).firstItem).getData(e.dataField)},_dp(x,"text",{get:function(){return this.getValue()}}),x);t.MergedDataCell=o});t(Et),Et.GridCell,Et.StyledCell,Et.ValueCell,Et.DataCell,Et.HiddenDataCell,Et.LiteralCell,Et.SeriesCell,Et.MergedDataCell;var St=n(function(e,t){function i(){return n.call(this)||this}function u(){var e=s.call(this)||this;return e.integralBar=!0,e.minBarWidth=1,e.maxBarWidth=0,e.barWidth=0,e}function p(){var e=a.call(this)||this;return e.quietZoneWidth=10,e}function m(){var e=d.call(this)||this;return e._wideWidth=3,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(i,"value",{get:function(){return this._value},set:function(e){if(e!=this._value){this._value=e;try{this._error=null,this._parse(e)}catch(e){this._error=e}}}}),_dp(i,"error",{get:function(){return this._error}}),i.prototype.render=function(e,t){this._doRender(e,t,!1)},i.prototype.renders=function(e,t){this._doRender(e,t,!0)},i),s,o=(s=r,l.__extends(u,s),u.prototype._doDispose=function(){s.prototype._doDispose.call(this)},u.prototype._doRender=function(e,t,n){var r,i=this._getBarLength();i<1||((r=this.barWidth)<=0&&(r=this.integralBar?Math.floor(t.width/i):t.width/i,r=Math.max(this.minBarWidth,r),0<this.maxBarWidth&&(r=Math.min(this.maxBarWidth,r))),t.x+=(t.width-(i*=r))/2,this.integralBar&&(t.x=Math.floor(t.x)),this._drawBars(e,this.barStyle,n,t.x,t.y,r,t.height))},u),a,f=[2171426,2236706,2236961,1184291,1184546,1249826,1188371,1188626,1253906,2232851,2233106,2298386,1122866,1188146,1188401,1126946,1192226,1192481,2241041,2232626,2232881,2175506,2240786,3219761,3215906,3281186,3281441,3219986,3285266,3285521,2171171,2171681,2302241,1119011,1249571,1250081,1123091,1253651,1254161,2167571,2298131,2298641,1122611,1123121,1253681,1126691,1127201,1257761,3223841,2167601,2298161,2175251,2175761,2175281,3215651,3216161,3346721,3219731,3220241,3350801,3227921,2233361,4395281,1118756,1119266,1184036,1184801,1315106,1315361,1122836,1123346,1188116,1188881,1319186,1319441,2363921,2232596,4272401,2363666,1261841,1118786,1184066,1184321,1131026,1196306,1196561,4264466,4329746,4330001,2171201,2179361,4268321,1118531,1119041,1249601,1130771,1131281,4264211,4264721,1126721,1130801,3215681,4264241,2167826,2167316,2167346,36901138],c=[103,104,105],h=[251658240,15728640,983040,61440,3840,240,15],r=(a=o,l.__extends(p,a),p.prototype._doDispose=function(){a.prototype._doDispose.call(this)},p.prototype._parse=function(e){this._weights=[];var t=e?e.length:0;if(!(t<1)){var n=this.$_detectType(e);2==n&&t%2==1&&(e="0"+e,t++);var r=f[u=c[n]],i=u;if(this._weights.push(r),2==n)for(var s=0;s<t;s+=2){var o=e.substr(s,2),u=parseInt(o);u=this.$_convert(n,u),this._weights.push(r=f[u]),i+=u*(s+1)}else for(s=0;s<t;s++)u=e.charCodeAt(s),u=this.$_convert(n,u),this._weights.push(r=f[u]),i+=u*(s+1);this._weights.push(f[i%=103]),this._weights.push(f[106])}},p.prototype._getBarLength=function(){return this.quietZoneWidth+11*(this._weights.length-1)+13+this.quietZoneWidth},p.prototype._drawBars=function(e,t,n,r,i,s,o){r+=10*s;for(var u=this._weights.length-1,a=0;a<u;a++)for(var f=this._weights[a],l=0;l<6;l++){var c=(f&h[l+1])>>4*(5-l);c*=s,l%2==0&&(n?(this.integralBar,e.sbounds(t,r+"",i+"%",c+"",o+"%")):(this.integralBar,e.bounds(t,r,i,c,o))),r+=c}f=this._weights[u];for(l=0;l<7;l++)c=(f&h[l])>>4*(6-l),c*=s,l%2==0&&(n?(this.integralBar,e.sbounds(t,r+"",i+"%",c+"",o+"%")):(this.integralBar,e.bounds(t,r,i,c,o))),r+=c},p.prototype.$_convert=function(e,t){switch(e){case 0:if(0<=t&&t<32)return t+64;if(32<=t&&t<96)return t-32;case 1:if(32<=t&&t<128)return t-32;case 2:if(0<=t&&t<=99)return t}throw new Error("Invalid code128 charactor: "+t)},p.prototype.$_detectType=function(e){var t=/^[0-9]+$/;return t.test(e)?2:(t=/[a-z]/).test(e)?1:0},p);t.Code128=r;var d,v={0:"nnnwwnwnn",1:"wnnwnnnnw",2:"nnwwnnnnw",3:"wnwwnnnnn",4:"nnnwwnnnw",5:"wnnwwnnnn",6:"nnwwwnnnn",7:"nnnwnnwnw",8:"wnnwnnwnn",9:"nnwwnnwnn",A:"wnnnnwnnw",B:"nnwnnwnnw",C:"wnwnnwnnn",D:"nnnnwwnnw",E:"wnnnwwnnn",F:"nnwnwwnnn",G:"nnnnnwwnw",H:"wnnnnwwnn",I:"nnwnnwwnn",J:"nnnnwwwnn",K:"wnnnnnnww",L:"nnwnnnnww",M:"wnwnnnnwn",N:"nnnnwnnww",O:"wnnnwnnwn",P:"nnwnwnnwn",Q:"nnnnnnwww",R:"wnnnnnwwn",S:"nnwnnnwwn",T:"nnnnwnwwn",U:"wwnnnnnnw",V:"nwwnnnnnw",W:"wwwnnnnnn",X:"nwnnwnnnw",Y:"wwnnwnnnn",Z:"nwwnwnnnn","-":"nwnnnnwnw",".":"wwnnnnwnn"," ":"nwwnnnwnn",$:"nwnwnwnnn","/":"nwnwnnnwn","+":"nwnnnwnwn","%":"nnnwnwnwn","*":"nwnnwnwnn"},o=(d=o,l.__extends(m,d),m.prototype._doDispose=function(){d.prototype._doDispose.call(this)},m.prototype._parse=function(e){if(this._codes=[],e){var t=e.length;this._codes.push(v["*"]);for(var n=0;n<t;n++){var r=e.charAt(n),i=v[r];if(!i)throw new Error("Invalid Code39 character: "+r);this._codes.push(i)}this._codes.push(v["*"])}},m.prototype._getBarLength=function(){var e=this._codes.length;return e*(3*this._wideWidth+6)+(e-1)},m.prototype._drawBars=function(e,t,n,r,i,s,o){var u=this._codes.length;if(2<u)for(var a=0;a<u;a++){for(var f=this._codes[a],l=0;l<9;l++){var c="n"==f.charAt(l)?1:this._wideWidth;c*=s,l%2==0&&(n?(this.integralBar,e.sbounds(t,r+"",i+"%",c+"",o+"%")):(this.integralBar,e.bounds(t,r,i,c,o))),r+=c}a<u-1&&(r+=s)}},m);t.Code39=o});t(St),St.Code128,St.Code39;var xt=n(function(e,t){function o(e,t){var r=n.call(this)||this;return r._transforms=[],r._defs=e,r._element=t,r}function f(e){var t=u.call(this)||this,n=p.getDoc(e),i=t._element=n.createElementNS(r,"svg"),o=i.style,n=t._defs=n.createElementNS(r,"defs");return i.appendChild(n),o.background="",o.border="none",o.pointerEvents="none",e.appendChild(i),t._renderer=new s(t._defs),t}Object.defineProperty(t,"__esModule",{value:!0});var n,r="http://www.w3.org/2000/svg",i=0,s=(n=y.Base,l.__extends(o,n),o.prototype._doDispose=function(){this.clear(),n.prototype._doDispose.call(this)},_dp(o,"doc",{get:function(){return p.getDoc(this._element)||document}}),o.prototype.init=function(e,t){return this._defs=e,this._element=t,this},o.prototype.clear=function(){this._defs=null,this._element=null,this._transforms=null},o.prototype.save=function(){this._transforms.push(this._trans),this._trans=""},o.prototype.restore=function(){this._trans=this._transforms.pop()},o.prototype.translate=function(e,t){this._trans+="translate("+e+","+t+")"},o.prototype.rotate=function(e){this._trans+="rotate("+180*e/Math.PI+")"},o.prototype.rotateAt=function(e,t,n){this._trans+="rotate("+180*e/Math.PI+","+t+",)"},o.prototype.scale=function(e,t){this._trans+="scale("+e+","+t+")"},o.prototype.clipRect=function(e){this.clip(e.x,e.y,e.width,e.height)},o.prototype.clip=function(e,t,n,s){var o=this.doc,u=i++,a=o.createElementNS(r,"clipPath");a.setAttributeNS(null,"id","clip"+u),o=o.createElementNS(r,"rect"),o.x.baseVal.value=e,o.y.baseVal.value=t,o.width.baseVal.value=n,o.height.baseVal.value=s,a.appendChild(o),this._defs.appendChild(a)},o.prototype.sline=function(e,t,n,i,s){var o=this.doc.createElementNS(r,"line");this._element.appendChild(o),o.x1.baseVal.valueAsString=t,o.y1.baseVal.valueAsString=n,o.x2.baseVal.valueAsString=i,o.y2.baseVal.valueAsString=s,e&&o.setAttribute("class",e)},o.prototype.polygon=function(e,t){if(!(null==t||t.length<4)){var n=this.doc.createElementNS(r,"polygon");this._element.appendChild(n);var i=[];i.push(t[0]+","+t[1]);for(var s=2;s<t.length;s+=2)i.push(t[s]+","+t[s+1]);this._trans&&n.setAttributeNS(null,"transform",this._trans),n.setAttributeNS(null,"points",i.join(" ")),e&&n.setAttribute("class",e)}},o.prototype.bounds=function(e,t,n,i,s){var o=this.doc.createElementNS(r,"rect");this._element.appendChild(o),o.x.baseVal.value=t,o.y.baseVal.value=s<0?n+s:n,o.width.baseVal.value=i,o.height.baseVal.value=Math.abs(s),e&&o.setAttribute("class",e)},o.prototype.pbounds=function(e,t,n,i,s){var o=this.doc.createElementNS(r,"rect");this._element.appendChild(o),o.x.baseVal.valueAsString=t+"%",o.y.baseVal.valueAsString=(s<0?n+s:n)+"%",o.width.baseVal.valueAsString=i+"%",o.height.baseVal.valueAsString=Math.abs(s)+"%",e&&o.setAttribute("class",e)},o.prototype.sbounds=function(e,t,n,i,s){var o=this.doc.createElementNS(r,"rect");this._element.appendChild(o),o.x.baseVal.valueAsString=t,o.y.baseVal.valueAsString=n,o.width.baseVal.valueAsString=i,o.height.baseVal.valueAsString=s,e&&o.setAttribute("class",e)},o.prototype.scircle=function(e,t,n,i){var s=this.doc.createElementNS(r,"circle");this._element.appendChild(s),s.cx.baseVal.valueAsString=t,s.cy.baseVal.valueAsString=n,s.r.baseVal.valueAsString=i,e&&s.setAttribute("class",e)},o.prototype.ellipse=function(e,t,n,i,s){var o=this.doc.createElementNS(r,"ellipse"),i=i/2,s=s/2;this._element.appendChild(o),o.cx.baseVal.value=t+i,o.cy.baseVal.value=n+s,o.rx.baseVal.value=i,o.ry.baseVal.value=s,e&&o.setAttribute("class",e)},o);t.SvgRenderer=s;var u,a=(u=y.Base,l.__extends(f,u),f.createSVG=function(e){var t=p.getDoc(e),n=t.createElementNS(r,"svg"),i=n.style,s=t.createElementNS(r,"defs");return n.appendChild(s),i.background="",i.border="none",i.pointerEvents="none",t=t.createElementNS(r,"g"),n.appendChild(t),e.appendChild(n),n},f.renderSVG=function(e,t,n){var r=t.lastElementChild,i=this._renderer.init(t.firstChild,r);r.textContent="",n.call(e,t,i,t.clientWidth,t.clientHeight),i.clear()},f.renderSVG2=function(e,t,n){var i=p.getDoc(t);1<t.childElementCount&&t.removeChild(t.lastElementChild);var s=i.createElementNS(r,"g"),i=this._renderer.init(t.firstChild,s);t.appendChild(s),n.call(e,t,i),i.clear()},f.prototype._doDispose=function(){this._renderer=this._renderer.dispose(),this._element.parentElement.removeChild(this._element),this._element=this._defs=null,u.prototype._doDispose.call(this)},_dp(f,"element",{get:function(){return this._element}}),f.prototype.render=function(e){this._clear(),e?e.call(this,this._renderer,this._element.clientWidth,this._element.clientHeight):this._doRender(this._renderer,this._element.clientWidth,this._element.clientHeight)},f.prototype._clear=function(){1<this._element.childElementCount&&this._element.removeChild(this._element.lastElementChild);var e=p.getDoc(this._element).createElementNS(r,"g");this._element.appendChild(e),this._renderer._element=e},f.prototype._doRender=function(e,t,n){},f._renderer=new s,f);t.SvgElement=a});t(xt),xt.SvgRenderer,xt.SvgElement;var Tt=n(function(e,t){function i(){return null!==n&&n.apply(this,arguments)||this}function f(e){var t=s.call(this)||this;return t._shape=e,t}function h(){return null!==c&&c.apply(this,arguments)||this}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.prototype.draw=function(e,t,n){this._doDraw(e,t,n)},i);t.ShapeDrawing=r;var s,o={rectangle:[0,0,1,0,1,1,0,1],triangle:[.5,0,0,1,1,1],itriangle:[0,0,.5,1,1,0],diamond:[.5,0,0,.5,.5,1,1,.5],uparrow:[.5,0,0,.5,.3,.5,.3,1,.7,1,.7,.5,1,.5],downarrow:[.3,0,.3,.5,0,.5,.5,1,1,.5,.7,.5,.7,0],leftarrow:[0,.5,.5,1,.5,.7,1,.7,1,.3,.5,.3,.5,0],rightarrow:[0,.3,0,.7,.5,.7,.5,1,1,.5,.5,0,.5,.3],plus:[.3,0,.3,.3,0,.3,0,.7,.3,.7,.3,1,.7,1,.7,.7,1,.7,1,.3,.7,.3,.7,0],minus:[0,.3,0,.7,1,.7,1,.3],star:[.5,0,.6122,.3454,.9755,.3454,.6816,.559,.7938,.9045,.5,.691,.2061,.9045,.3183,.559,.02447,.3454,.3877,.3454]},u={equal:[[0,.2,0,.4,1,.4,1,.2],[0,.6,0,.8,1,.8,1,.6]]},a=(s=r,l.__extends(f,s),_dp(f,"shape",{get:function(){return this._shape},set:function(e){this._shape=e?"inverted_triangle"===e?f.INVERTED_TRIANLGE:e.toLowerCase():null}}),f.prototype._doDraw=function(e,t,n){var r=this._shape;if(o.hasOwnProperty(r)){if(l=o[r]){for(var i=0,s=0,a=0,f=(l=l.slice()).length/2;a<f;a++)l[2*a]=i+l[2*a]*t,l[2*a+1]=s+l[2*a+1]*n;l.push(l[0],l[1]),e.polygon(null,l)}}else if(u.hasOwnProperty(r)){r=u[r];if(r){for(var l,i=0,s=0,a=0,f=(l=r[0].slice()).length/2;a<f;a++)l[2*a]=i+l[2*a]*t,l[2*a+1]=s+l[2*a+1]*n;l.push(l[0],l[1]),e.polygon(null,l);for(a=0,f=(l=(l=r[1]).slice()).length/2;a<f;a++)l[2*a]=i+l[2*a]*t,l[2*a+1]=s+l[2*a+1]*n;l.push(l[0],l[1]),e.polygon(null,l)}}},f.RECTANGLE="rectangle",f.TRIANLGE="triangle",f.INVERTED_TRIANLGE="itriangle",f.DIAMOND="diamond",f.UP_ARROW="uparrow",f.DOWN_ARROW="downarrow",f.LEFT_ARROW="leftarrow",f.RIGHT_ARROW="rightarrow",f.PLUS="plus",f.MINUS="minus",f.EQUAL="equal",f.STAR="star",f);t.PolygonShape=a;var c,r=(c=r,l.__extends(h,c),h.prototype._doDraw=function(e,t,n){e.ellipse(null,0,0,t,n)},h);t.EllipseShape=r});t(Tt),Tt.ShapeDrawing,Tt.PolygonShape,Tt.EllipseShape;var Nt=n(function(e,t){function r(){}Object.defineProperty(t,"__esModule",{value:!0});var n=(r.layoutFlex=function(e,t,n,r,i,s){var o=s===c.IconLocation.CENTER,u=p.Utils.included(s,c.IconLocation.LEFT,c.IconLocation.LEFT_EDGE),a=p.Utils.included(s,c.IconLocation.RIGHT,c.IconLocation.RIGHT_EDGE),f=p.Utils.included(s,c.IconLocation.TOP,c.IconLocation.TOP_EDGE),l=p.Utils.included(s,c.IconLocation.BOTTOM,c.IconLocation.BOTTOM_EDGE),h=p.Utils.included(s,c.IconLocation.LEFT_EDGE,c.IconLocation.RIGHT_EDGE,c.IconLocation.TOP_EDGE,c.IconLocation.BOTTOM_EDGE),s=e.style,e=o||u||a?"row":"column";s.flexDirection=e+=a||l?"-reverse":"",s.justifyContent=h?"start":"center",s.alignItems="center",(s=t.style).paddingTop=f&&h?i+"px":"",s.paddingBottom=l&&h?i+"px":"",(s=n.style).display=o?"none":"",s.paddingLeft=u?r+"px":"",s.paddingRight=a?r+"px":"",s.paddingTop=f?r+"px":"",s.paddingBottom=l?r+"px":"",s.flexGrow=h?"1":""},r);t.RenderHelper=n});t(Nt),Nt.RenderHelper;var Ct=n(function(e,t){function s(){var e=r.call(this)||this;return e._showTooltip=!1,e._refreshFocusChanged=!1,e._textProp=p.Utils.TextProp,e._inited=!1,e._dirty=!1,e._className="",e._itemClickable=!1,e}function f(){return o.call(this)||this}function v(){var e=d.call(this)||this;return e._barStyle=v.BAR_STYLE,e._rightBarStyle=v.BAR_RIGHT_STYLE,e._topBarStyle=v.BAR_TOP_STYLE,e._bottomBarStyle=v.BAR_BOTTOM_STYLE,e._minimum=0,e._maximum=100,e._barWidth="80%",e._showLabel=!1,e._origin=u.LEFT,e._absoluteValue=!1,e._percentShapeWidth=80,e}function b(){var e=m.call(this)||this;return e._spaceKey=!1,e._itemClickable=!0,e}function E(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=w.call(this)||this;return n._itemGap=4,n._verticalEdgePad=2,n._textVisible=!0,n._reversed=!1,n._splitted=!1,n._imgFixed=!1,n._imgMiddle=!1,n._imgCenter=!1,n._imgHeight=16,n._imgWidth=16,n._imgLeft=0,n._imgRight=0,n._imgTop=0,n._imgBottom=0,n._spanVis=void 0,n._spanPadRight=0,n._spanPadLeft=0,n._spanCenter=!1,n._spanText="",n._imgWidth=e,n._imgHeight=t,n}function x(){var e=S.call(this)||this;return e._iconWidth=NaN,e._iconHeight=NaN,e._iconLocation=c.IconLocation.LEFT,e._spaceKey=!1,e._imgSrc="",e._itemClickable=!0,e}function N(){return null!==T&&T.apply(this,arguments)||this}function k(){var e=C.call(this,16,16)||this;return e._strictValue=!1,e._threeStates=!1,e._checkLocation=c.IconLocation.CENTER,e._useImages=!1,e._checkedStyle=k.CHECKED_STYLE,e._uncheckedStyle=k.UNCHECKED_STYLE,e._intermediateStyle=k.INTERMEDIATE_STYLE,e._editable=!0,e._spaceKey=!0,e._showInnerFocus=!1,e._oldUsed=!1,e._useChanged=!1,e._values={},e.refreshFocusChanged=!0,e}function A(){return null!==L&&L.apply(this,arguments)||this}function M(){var e=O.call(this)||this;return e._buttonStyle=M.BUTTON_STYLE,e._hideWhenEmpty=!0,e._spaceKey=!0,e._itemClickable=!0,e}function D(){var e=_.call(this)||this;return e._spaceKey=!0,e._itemClickable=!0,e}function H(){var e=P.call(this)||this;return e._shapeStyle=H.SHAPE_STYLE,e._shape=Tt.PolygonShape.STAR,e._shapeWidth=16,e._shapeHeight=16,e._shapeLocation=c.IconLocation.LEFT,e}function j(){return null!==B&&B.apply(this,arguments)||this}function I(){var e=F.call(this)||this;return e._barStyle=I.BAR_STYLE,e._inactiveStyle=I.INACTIVE_STYLE,e._barCount=10,e._minimum=NaN,e._maximum=NaN,e._startRate=50,e._endRate=100,e._absoluteValue=!1,e}function R(){var e=q.call(this)||this;return e._barStyle=R.BAR_STYLE,e._barcode=new St.Code39,e.$_render=function(e,t,n,r){this._value&&(this._barcode.value=this._value,this._barcode.renders(t,new h.Rectangle(0,0,n,100)))}.bind(e),e}function z(){var e=U.call(this)||this;return e._barStyle=z.BAR_STYLE,e._barcode=new St.Code128,e.$_render=function(e,t,n,r){this._value&&(this._barcode.value=this._value,this._barcode.renders(t,new h.Rectangle(0,0,n,100)))}.bind(e),e}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){this.commit=!0,this.value=void 0};t.RendererEditResult=n;var r,i=(r=y.Base,l.__extends(s,r),s.getRendererStyle=function(e){var t=e.firstElementChild;if(t){if(t.classList){if(1<t.classList.length)return t.classList[1]}else{e=t.className&&t.className.split(" ");if(e&&1<e.length)return e[1]}return t.className}},s.prototype._doDispose=function(){this._dom=null,this._index=null,r.prototype._doDispose.call(this)},s.prototype.clearAndDispose=function(){return this.clearContent(),this.dispose()},s.prototype.initContent=function(e,t,n){this._inited?this._index.assign(e):(this._dom=t,this._index=e.clone(),t.className=this._className=n,this._doInitContent(t),this._inited=!0)},s.prototype.initFormContent=function(e,t){this._inited||((this._dom=e).className=this._className=t,this._doInitContent(e),this._inited=!0)},s.prototype.clearContent=function(){this._inited?(this._doClearContent(this._dom),this._dom.className=this._className="",this._inited=!1):this._dom[this._textProp]=""},s.prototype.checkClassName=function(e){return e!=this._className},_dp(s,"grid",{get:function(){return this._index&&this._index.grid}}),_dp(s,"index",{get:function(){return this._index}}),_dp(s,"styleName",{get:function(){return"rg-renderer"}}),_dp(s,"showTooltip",{get:function(){return this._showTooltip},set:function(e){this._showTooltip=e}}),_dp(s,"refreshFocusChanged",{get:function(){return this._refreshFocusChanged},set:function(e){this._refreshFocusChanged=e}}),_dp(s,"itemClickable",{get:function(){return this._itemClickable}}),s.prototype.renderCell=function(e,t,n){this._doRenderCell(e,t,n,n.width-n.errorWidth-n.buttonWidth-n.editWidth-1,n.height-1)},s.prototype.getTooltip=function(e,t){if(this.showTooltip){var n=t.grid,r=n.body,t=t.column,t=r.getCellAt(e.item,t,!1),e=t&&this._makeText(n,t,e);return e||void 0}},s.prototype.canShowInnerFocus=function(){return!1},s.prototype.canEdit=function(){return!1},s.prototype.canEditClickAt=function(e){return!1},s.prototype.preventDefaultEditClick=function(e){e.preventDefault()},s.prototype.editClick=function(e,t){var r=new n;if(this._doEditClick(e,t,r))return r},s.prototype._doEditClick=function(e,t,n){return!1},s.prototype.preventDefaultClick=function(e){e.preventDefault()},s.prototype.canClick=function(e){return!1},s.prototype.canClickSpaceKey=function(e){return!1},s.prototype.click=function(e,t,n){return this._doClick(e,t,n)},s.prototype.itemClick=function(){this._doItemClick()},s.prototype._doItemClick=function(){},s.prototype._doClick=function(e,t,n){},s.prototype.canEditKey=function(e){return!1},s.prototype.editKey=function(e,t){var r=new n;if(this._doEditKey(e,t,r))return r},s.prototype._doEditKey=function(e,t,n){return!1},s.prototype.moveClickElement=function(e,t){},s.prototype._doInitContent=function(e){p.Utils.setTextProp(e)},s.prototype._doClearContent=function(e){e[this._textProp]=""},s.prototype._doRenderCell=function(e,t,n,r,i){},s.prototype._changed=function(){this._dirty=!0},s.prototype._getValue=function(e,t,n){t=t.item.dataRow;if(0<=t){n=e.dataSource.getFieldIndex(n);if(0<=n)return e.dataSource.getValue(t,n)}},s.prototype._makeText=function(e,t,n){return t.getDisplayText(e,n)||t.dataColumn.placeHolder||""},s.prototype._clearHeight=function(){this._dom.style.height=""},s.prototype._setHeight=function(e){this._dom.style.height=0<=e?e+"px":""},s.prototype._isEmpty=function(e){return null==e||""==e||"number"==typeof e&&isNaN(e)},s);t.DataCellRenderer=i;var o,u,a=(o=i,l.__extends(f,o),f.prototype._doDispose=function(){o.prototype._doDispose.call(this)},_dp(f,"type",{get:function(){return f.TYPE}}),f.prototype._doRenderCell=function(e,t,n,r,i){if(t instanceof Et.ValueCell)if(t.index.itemIndex!==e.layoutManager.topIndex)switch(t.getBlankState()){case c.BlankState.BODY:case c.BlankState.TAIL:this.$_setText("");break;default:this.$_setText(this._makeText(e,t,n))}else this.$_setText(this._makeText(e,t,n))},f.prototype.$_setText=function(e){this._dom[this._textProp]=e||""},f.TYPE="text",f.Default=new f,f);t.TextCellRenderer=a,(g=u=t.BarOrigin||(t.BarOrigin={})).DEFAULT="default",g.LEFT="left",g.RIGHT="right",g.TOP="top",g.BOTTOM="bottom";var d,a=(d=i,l.__extends(v,d),v.prototype._doDispose=function(){d.prototype._doDispose.call(this)},_dp(v,"barStyle",{get:function(){return this._barStyle},set:function(e){e!=this._barStyle&&(this._barStyle=e,this._changed())}}),_dp(v,"rightBarStyle",{get:function(){return this._rightBarStyle},set:function(e){e!=this._rightBarStyle&&(this._rightBarStyle=e,this._changed())}}),_dp(v,"topBarStyle",{get:function(){return this._topBarStyle},set:function(e){e!=this._topBarStyle&&(this._topBarStyle=e,this._changed())}}),_dp(v,"bottomBarStyle",{get:function(){return this._bottomBarStyle},set:function(e){e!=this._bottomBarStyle&&(this._bottomBarStyle=e,this._changed())}}),_dp(v,"minimum",{get:function(){return this._minimum},set:function(e){e!=this._minimum&&(this._minimum=e,this._changed())}}),_dp(v,"maximum",{get:function(){return this._maximum},set:function(e){e!=this._maximum&&(this._maximum=e,this._changed())}}),_dp(v,"showLabel",{get:function(){return this._showLabel},set:function(e){e!=this._showLabel&&(this._showLabel=e,this._changed())}}),_dp(v,"barWidth",{get:function(){return this._barWidth},set:function(e){e!=this._barWidth&&("string"==typeof (this._barWidth=e)&&"%"==e.charAt(e.length-1)?this._percentShapeWidth=parseFloat(e.substring(0,e.length-1)):this._percentShapeWidth=NaN,this._changed())}}),_dp(v,"origin",{get:function(){return this._origin},set:function(e){e!=this._origin&&(this._origin=e,this._changed())}}),_dp(v,"absoluteValue",{get:function(){return this._absoluteValue},set:function(e){e!=this._absoluteValue&&(this._absoluteValue=e,this._changed())}}),_dp(v,"type",{get:function(){return v.TYPE}}),_dp(v,"styleName",{get:function(){return v.STYLE_NAME}}),v.prototype._doInitContent=function(e){var t=p.getDoc(e);e.childElementCount,e[this._textProp]="",(n=this._div=t.createElement("div")).style.position="relative",e.appendChild(n);var n,t=(n=this._span=t.createElement("span")).style;t.display="inline-block",t.position="absolute",t.top="50%",t.right="50%",t.msTransform=n.style.transform="translate(50%, -50%)",e.appendChild(n)},v.prototype._doRenderCell=function(e,t,n,r,i){var s=this._div,o=s.style,a=this._absoluteValue?Math.abs(t.value):t.value,f=Math.min(1,(a-this._minimum)/(this._maximum-this._minimum));switch(isNaN(f)&&(f=0),this._origin){case u.LEFT:this.$_renderLeft(o,f),s.className=this.barStyle||v.BAR_STYLE;break;case u.RIGHT:this.$_renderRight(o,f),s.className=this.rightBarStyle||v.BAR_RIGHT_STYLE;break;case u.TOP:this.$_renderTop(o,f),s.className=this.topBarStyle||v.BAR_TOP_STYLE;break;case u.BOTTOM:this.$_renderBottom(o,f),s.className=this.bottomBarStyle||v.BAR_BOTTOM_STYLE;break;default:this.$_renderLeft(o,f),s.className=this.barStyle||v.BAR_STYLE}this.$_setText(this._makeText(e,t,n))},v.prototype.$_renderLeft=function(e,t){e.left="0px",e.width=100*t+"%",isNaN(this._percentShapeWidth)?(t=this._barWidth,e.top="50%",e.msTransform=e.transform="translate(0%,-50%)",e.height=t+"px"):(e.top=(100-this._percentShapeWidth)/2+"%",e.height=this._percentShapeWidth+"%")},v.prototype.$_renderRight=function(e,t){e.left=100*(1-t)+"%",e.width=100*t+"%",isNaN(this._percentShapeWidth)?(t=this._barWidth,e.top="50%",e.msTransform=e.transform="translate(0%,-50%)",e.height=t+"px"):(e.top=(100-this._percentShapeWidth)/2+"%",e.height=this._percentShapeWidth+"%")},v.prototype.$_renderTop=function(e,t){e.top="0px",e.height=100*t+"%",isNaN(this._percentShapeWidth)?(t=this._barWidth,e.left="50%",e.msTransform=e.transform="translate(-50%,0%)",e.width=t+"px"):(e.left=(100-this._percentShapeWidth)/2+"%",e.width=this._percentShapeWidth+"%")},v.prototype.$_renderBottom=function(e,t){e.top=100*(1-t)+"%",e.height=100*t+"%",isNaN(this._percentShapeWidth)?(t=this._barWidth,e.left="50%",e.msTransform=e.transform="translate(-50%,0%)",e.width=t+"px"):(e.left=(100-this._percentShapeWidth)/2+"%",e.width=this._percentShapeWidth+"%")},v.prototype.$_setText=function(e){this._span[this._textProp]=e||""},v.TYPE="bar",v.STYLE_NAME="rg-renderer "+(v.STYLE="rg-bar-renderer"),v.BAR_STYLE="rg-bar-renderer-bar",v.BAR_RIGHT_STYLE="rg-bar-renderer-bar-right",v.BAR_TOP_STYLE="rg-bar-renderer-bar-top",v.BAR_BOTTOM_STYLE="rg-bar-renderer-bar-bottom",v);t.BarCellRenderer=a;var m,g=(m=i,l.__extends(b,m),b.prototype._doDispose=function(){m.prototype._doDispose.call(this)},_dp(b,"imageMap",{get:function(){return this._imageMap},set:function(e){e!==this._imageMap&&(this._imageMap=e,this._changed())}}),_dp(b,"imageCallback",{get:function(){return this._imageCallback},set:function(e){e!==this._imageCallback&&(this._imageCallback=e,this._changed())}}),_dp(b,"imageField",{get:function(){return this._imageField},set:function(e){e!=this._imageField&&(this._imageField=e,this._changed())}}),_dp(b,"titleField",{get:function(){return this._titleField},set:function(e){e!=this._titleField&&(this._titleField=e,this._changed())}}),_dp(b,"titleCallback",{get:function(){return this._titleCallback},set:function(e){e!==this._titleCallback&&(this._titleCallback=e,this._changed())}}),_dp(b,"imageHeight",{get:function(){return this._imageHeight},set:function(e){e!=this._imageHeight&&(this._imageHeight=e,this._changed())}}),_dp(b,"spaceKey",{get:function(){return this._spaceKey},set:function(e){this._spaceKey=e}}),_dp(b,"type",{get:function(){return b.TYPE}}),_dp(b,"styleName",{get:function(){return b.STYLE_NAME}}),b.prototype._doInitContent=function(e){var t=this._img=p.getDoc(e).createElement("img");t.style.verticalAlign="middle",e.appendChild(t)},b.prototype._doRenderCell=function(e,t,n,r,i){var s=this._img,o=this.$_getImageUrl(e,t);o?(s.src=o,(t=this.$_getTitle(e,t))?s.title=t:delete s.title,isNaN(this._imageHeight)?s.style.height="":s.style.height=this._imageHeight+"px"):(s.removeAttribute("src"),s.removeAttribute("title"))},b.prototype.canClick=function(e){return e.target===this._img},b.prototype._doClick=function(e,t,n){if(t.target===this._img||"keydown"===t.type)return{type:this.type,value:e.value}},b.prototype.canClickSpaceKey=function(e){return this.spaceKey&&32==e.keyCode&&!e.ctrlKey&&!e.shiftKey&&!e.altKey},b.prototype.$_getImageUrl=function(e,t){var n="",r=this._imageCallback;return(n=!(n=!(n=r?r.call(this,e.handler,t):n)&&this._imageMap?this._imageMap[t.value]:n)&&this._imageField?this._getValue(e,t,this._imageField):n)||""},b.prototype.$_getTitle=function(e,t){var n="",r=this._titleCallback;return(n=!(n=r?r.call(this,e.handler,t):n)&&this._titleField?this._getValue(e,t,this._titleField):n)||""},b.TYPE="image",b.STYLE_NAME="rg-renderer "+(b.STYLE="rg-image-renderer"),b);t.ImageCellRenderer=g;var w,a=(w=i,l.__extends(E,w),E.prototype._doDispose=function(){w.prototype._doDispose.call(this)},_dp(E,"itemGap",{get:function(){return this._itemGap},set:function(e){e!=this._itemGap&&(this._itemGap=e,this._changed())}}),_dp(E,"verticalEdgePad",{get:function(){return this._verticalEdgePad},set:function(e){e!=this._verticalEdgePad&&(this._verticalEdgePad=e,this._changed())}}),_dp(E,"textVisible",{get:function(){return this._textVisible},set:function(e){e!=this._textVisible&&(this._textVisible=e,this._changed())}}),E.prototype._doClearContent=function(e){w.prototype._doClearContent.call(this,e),this._reset()},E.prototype._reset=function(){this._oldLocation=void 0,this._imgHeight=this._imgWidth=this._imgLeft=this._imgRight=this._imgTop=this._imgBottom=this._spanPadRight=this._spanPadLeft=NaN,this._imgFixed=this._imgMiddle=this._imgCenter=this._spanVis=this._spanCenter=this._spanText=void 0,this._dom&&(this._dom[p.Utils.TextProp]="")},E.prototype.$_setImgFixed=function(e,t,n){t==this._imgFixed&&!n||(this._imgFixed=t,e.style.position=t?"absolute":"")},E.prototype.$_setImgMiddle=function(e,t,n){t==this._imgMiddle&&!n||(this._imgMiddle=t,e.style.verticalAlign=t?"middle":"")},E.prototype.$_setImgCenter=function(e,t,n){t==this._imgCenter&&!n||(this._imgCenter=t,e.style.textAlign=t?"center":"")},E.prototype.$_setImgWidth=function(e,t,n){(t=isNaN(t)?0:t)==this._imgWidth&&!n||(this._imgWidth=t,e.style.width=0<t?t+"px":"")},E.prototype.$_setImgHeight=function(e,t,n){(t=isNaN(t)?0:t)==this._imgHeight&&!n||(this._imgHeight=t,e.style.height=0<t?t+"px":"")},E.prototype.$_setImgBounds=function(e,t,n,r,i,s){t==this._imgTop&&!s||(this._imgTop=t,e.style.top=0<t?t+"px":""),n==this._imgLeft&&!s||(this._imgLeft=n,e.style.left=0<n?n+"px":""),r==this._imgBottom&&!s||(this._imgBottom=r,e.style.bottom=0<r?r+"px":""),i==this._imgRight&&!s||(this._imgRight=i,e.style.right=0<i?i+"px":"")},E.prototype.$_clearImgBounds=function(e,t){(0<this._imgTop||t)&&(this._imgTop=0,e.style.top=""),(0<this._imgLeft||t)&&(this._imgLeft=0,e.style.left=""),(0<this._imgBottom||t)&&(this._imgBottom=0,e.style.bottom=""),(0<this._imgRight||t)&&(this._imgRight=0,e.style.right="")},E.prototype.$_setSpanVis=function(e){e!=this._spanVis&&(this._spanVis=e,this._span.style.display=e?"":"none")},E.prototype.$_setSpanPadLeft=function(e){e!=this._spanPadLeft&&(this._spanPadLeft=e,this._span.style.paddingLeft=0<e?e+"px":"")},E.prototype.$_setSpanPadRight=function(e){e!=this._spanPadRight&&(this._spanPadRight=e,this._span.style.paddingRight=0<e?e+"px":"")},E.prototype.$_setSpanCenter=function(e,t){var n;void 0===t&&(t=0),e!=this._spanCenter&&(n=this._span.style,(this._spanCenter=e)?(n.left="50%",n.top=50+t+"%",n.transform="translate(-50%, -50%)",n.position="absolute"):(n.left="",n.top="",n.transform="",n.position=""))},E.prototype.$_setSpanText=function(e){e!=this._spanText&&(this._spanText=e,e=this._textVisible?this._spanText:void 0,this._span[this._textProp]=e)},E.prototype.$_layoutLeft=function(e,t,n,r){this._reversed&&(e.insertBefore(t,n),this._reversed=!1),this._splitted&&(e.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(t,!1,r),this.$_setImgMiddle(t,!0,r),this.$_setImgCenter(t,!1,r),this.$_clearImgBounds(t,r),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(this._itemGap),this.$_setSpanPadRight(0)},E.prototype.$_layoutRight=function(e,t,n,r){this._reversed||(e.insertBefore(n,t),this._reversed=!0),this._splitted&&(e.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(t,!1,r),this.$_setImgMiddle(t,!0,r),this.$_setImgCenter(t,!1,r),this.$_clearImgBounds(t,r),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(4)},E.prototype.$_layoutTop=function(e,t,n,r){this._reversed&&(e.insertBefore(t,n),this._reversed=!1),this._splitted||(e.insertBefore(this._br,n),this._splitted=!0),this.$_setImgFixed(t,!1,r),this.$_setImgMiddle(t,!1,r),this.$_setImgCenter(t,!1,r),this.$_clearImgBounds(t,r),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},E.prototype.$_layoutBottom=function(e,t,n,r){this._reversed||(e.insertBefore(n,t),this._reversed=!0),this._splitted||(e.insertBefore(this._br,t),this._splitted=!0),this.$_setImgFixed(t,!1,r),this.$_setImgMiddle(t,!1,r),this.$_setImgCenter(t,!1,r),this.$_clearImgBounds(t,r),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},E.prototype.$_layoutLeftEdge=function(e,t,n,r,i){this._reversed&&(e.insertBefore(t,n),this._reversed=!1),this._splitted&&(e.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(t,!0,i),this.$_setImgMiddle(t,!0,i),this.$_setImgCenter(t,!1,i),this.$_setImgBounds(t,0,2,0,0,i),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0),n.style.marginLeft=isNaN(r)?"":r+"px"},E.prototype.$_layoutRightEdge=function(e,t,n,r,i){this._reversed||(e.insertBefore(n,t),this._reversed=!0),this._splitted&&(e.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(t,!0,i),this.$_setImgMiddle(t,!0,i),this.$_setImgCenter(t,!1,i),this.$_setImgBounds(t,0,0,0,2,i),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(r)},E.prototype.$_layoutTopEdge=function(e,t,n,r,i,s,o,u){this._reversed&&(e.insertBefore(t,n),this._reversed=!1),this._splitted||(e.insertBefore(this._br,n),this._splitted=!0),this.$_setImgFixed(t,!0,u),this.$_setImgMiddle(t,!1,u),this.$_setImgCenter(t,!1,u),this.$_setImgBounds(t,2,(r-s)/2,0,0,u),this.$_setSpanVis(!0),this.$_setSpanCenter(!0,o*((i-o)/i)),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},E.prototype.$_layoutBottomEdge=function(e,t,n,r,i,s,o,u){this._reversed||(e.insertBefore(n,t),this._reversed=!0),this._splitted||(e.insertBefore(this._br,t),this._splitted=!0),this.$_setImgFixed(t,!0,u),this.$_setImgMiddle(t,!1,u),this.$_setImgCenter(t,!0,u),this.$_setImgBounds(t,0,(r-s)/2,2,0,u),this.$_setSpanVis(!0),this.$_setSpanCenter(!0,(i-o)/i*-o),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},E.prototype.$_layoutCenter=function(e,t,n,r){this._reversed&&(e.insertBefore(t,n),this._reversed=!1),this._splitted&&(e.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(t,!1,r),this.$_setImgMiddle(t,!0,r),this.$_setImgCenter(t,!0,r),this.$_clearImgBounds(t,r),this.$_setSpanVis(!1),this.$_setSpanCenter(!0),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},E);t.FlexibleCellRenderer=a;var S,g=(S=a,l.__extends(x,S),x.prototype._doDispose=function(){S.prototype._doDispose.call(this)},_dp(x,"iconMap",{get:function(){return this._iconMap},set:function(e){e!==this._iconMap&&(this._iconMap=e,this._changed())}}),_dp(x,"iconCallback",{get:function(){return this._iconCallback},set:function(e){e!==this._iconCallback&&(this._iconCallback=e,this._changed())}}),_dp(x,"iconUrl",{get:function(){return this._iconUrl},set:function(e){this._iconUrl=e,this._changed()}}),_dp(x,"iconField",{get:function(){return this._iconField},set:function(e){e!=this._iconField&&(this._iconField=e,this._changed())}}),_dp(x,"iconLocation",{get:function(){return this._iconLocation},set:function(e){e!=this._iconLocation&&(this._oldLocation=this._iconLocation,this._iconLocation=e,this._changed())}}),_dp(x,"iconWidth",{get:function(){return this._iconWidth},set:function(e){e!=this._iconWidth&&(this._iconWidth=e,this._changed())}}),_dp(x,"iconHeight",{get:function(){return this._iconHeight},set:function(e){e!=this._iconHeight&&(this._iconHeight=e,this._changed())}}),_dp(x,"spaceKey",{get:function(){return this._spaceKey},set:function(e){this._spaceKey=e}}),_dp(x,"type",{get:function(){return x.TYPE}}),_dp(x,"styleName",{get:function(){return x.STYLE_NAME+" rg-icon-"+this.$_getStyleName().toLowerCase()}}),x.prototype._doInitContent=function(e){var t=p.getDoc(e),n=this._img=t.createElement("img");e.appendChild(n),n=this._span=t.createElement("span"),e.appendChild(n),this._br=t.createElement("br")},x.prototype._reset=function(){S.prototype._reset.call(this),this._imgSrc=this._splitted=this._reversed=void 0},x.prototype._doRenderCell=function(e,t,n,r,i){var s=this._img,o=this._span;if(this.$_setImgWidth(s,this._iconWidth,!1),this.$_setImgHeight(s,this._iconHeight,!1),this.$_setImgSrc(this.$_getIconUrl(e,t)),this.$_setSpanText(this._makeText(e,t,n)),this._oldLocation!=this._iconLocation){switch(this._iconLocation){case c.IconLocation.LEFT:this.$_layoutLeft(this._dom,s,o,!1);break;case c.IconLocation.RIGHT:this.$_layoutRight(this._dom,s,o,!1);break;case c.IconLocation.TOP:this.$_layoutTop(this._dom,s,o,!1);break;case c.IconLocation.BOTTOM:this.$_layoutBottom(this._dom,s,o,!1);break;case c.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(this._dom,s,o,this._iconWidth,!1);break;case c.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(this._dom,s,o,this._iconWidth,!1);break;case c.IconLocation.TOP_EDGE:this.$_layoutTopEdge(this._dom,s,o,r,i,this._iconWidth,this._iconHeight,!1);break;case c.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(this._dom,s,o,r,i,this._iconWidth,this._iconHeight,!1);break;case c.IconLocation.CENTER:this.$_layoutCenter(this._dom,s,o,!1);break;default:this.$_layoutLeft(this._dom,s,o,!1)}this._oldLocation=this._iconLocation}this._iconLocation==c.IconLocation.TOP_EDGE||this._iconLocation==c.IconLocation.BOTTOM_EDGE?this._setHeight(i):this._clearHeight()},x.prototype.canClick=function(e){return e.target===this._img},x.prototype.canClickSpaceKey=function(e){return this.spaceKey&&32==e.keyCode&&!e.ctrlKey&&!e.shiftKey&&!e.altKey},x.prototype._doClick=function(e,t,n){var r={};if(t.target===this._img||"keydown"===t.type)return r.type=this.type,r.value=e.value,r},x.prototype.$_getIconUrl=function(e,t){var n=void 0,r=this._iconCallback;return(n=void 0===(n=void 0===(n=void 0===(n=r?r.call(this,e.handler,t):n)&&this._iconMap?this._iconMap[t.value]:n)&&this._iconField?this._getValue(e,t,this._iconField):n)?this._iconUrl:n)||""},x.prototype.$_setImgSrc=function(e){e!=this._imgSrc&&((this._imgSrc=e)?this._img.src=e:this._img.removeAttribute("src"))},x.prototype.$_getStyleName=function(){return String(this._iconLocation)||String(c.IconLocation.LEFT)},x.prototype.preventDefaultClick=function(e){e.target===this._img&&(e.preventDefault(),e.stopImmediatePropagation())},x.TYPE="icon",x.STYLE_NAME="rg-renderer "+(x.STYLE="rg-icon-renderer"),x);t.IconCellRenderer=g;var T,g=(T=g,l.__extends(N,T),N.prototype._doInitContent=function(e){T.prototype._doInitContent.call(this,e),e.style.setProperty("display","flex","important")},N.prototype.$_layoutLeft=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.LEFT)},N.prototype.$_layoutRight=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.RIGHT)},N.prototype.$_layoutTop=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.TOP)},N.prototype.$_layoutBottom=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.BOTTOM)},N.prototype.$_layoutLeftEdge=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.LEFT_EDGE)},N.prototype.$_layoutRightEdge=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.RIGHT_EDGE)},N.prototype.$_layoutTopEdge=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.TOP_EDGE)},N.prototype.$_layoutBottomEdge=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.BOTTOM_EDGE)},N.prototype.$_layoutCenter=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.CENTER)},N);t.FlexIconCellRenderer=g;var C,g=(C=a,l.__extends(k,C),k.prototype._doDispose=function(){C.prototype._doDispose.call(this)},_dp(k,"getCheckedCallback",{get:function(){return this._getCheckedCallback},set:function(e){e!==this._getCheckedCallback&&(this._getCheckedCallback=e,this._changed())}}),_dp(k,"setCheckedCallback",{get:function(){return this._setCheckedCallback},set:function(e){e!==this._setCheckedCallback&&(this._setCheckedCallback=e,this._changed())}}),_dp(k,"trueValues",{get:function(){return this._trueValues},set:function(e){e!==this._trueValues&&(this._trueValues=e,this.$_resetValues(),this._changed())}}),_dp(k,"falseValues",{get:function(){return this._falseValues},set:function(e){e!==this._falseValues&&(this._falseValues=e,this.$_resetValues(),this._changed())}}),_dp(k,"strictValue",{get:function(){return this._strictValue},set:function(e){e!=this._strictValue&&(this._strictValue=e,this._changed())}}),_dp(k,"threeStates",{get:function(){return this._threeStates},set:function(e){e!=this._threeStates&&(this._threeStates=e,this._changed())}}),_dp(k,"spaceKey",{get:function(){return this._spaceKey},set:function(e){this._spaceKey=e}}),_dp(k,"checkLocation",{get:function(){return this._checkLocation},set:function(e){e!=this._checkLocation&&(this._checkLocation=e,this._changed())}}),_dp(k,"useImages",{get:function(){return this._useImages},set:function(e){e!=this._useImages&&(this._useImages=e,this._changed())}}),_dp(k,"editable",{get:function(){return this._editable},set:function(e){this._editable=e}}),_dp(k,"showInnerFocus",{get:function(){return this._showInnerFocus},set:function(e){this._showInnerFocus=e}}),_dp(k,"type",{get:function(){return k.TYPE}}),_dp(k,"styleName",{get:function(){return k.STYLE_NAME}}),k.prototype.canEdit=function(){return this._editable},k.prototype.canShowInnerFocus=function(){return this._showInnerFocus&&this._editable},k.prototype._doInitContent=function(e){var t=p.getDoc(e),n=this._check=t.createElement("input");n.type="checkbox",n.tabIndex=-1,n.style.display="inline-block";var r=this._span=t.createElement("span");e.appendChild(n),e.appendChild(r),r=this._image=t.createElement("span"),r.className=this._checkedStyle,r.style.display="inline-block",this._br=t.createElement("br")},k.prototype._reset=function(){C.prototype._reset.call(this),this._splitted=this._reversed=void 0,this._oldUsed=!1},k.prototype._doRenderCell=function(e,t,n,r,i){var s=this._check,o=this._image,u=this._span,a=this._dom,f=s;this._imgWidth=e.container.measureCheckWidth(),this._imgHeight=e.container.measureCheckHeight();var l=this.$_getChecked(e,t.value,t.index,this._getCheckedCallback);if(s.checked=l,s.indeterminate=this._threeStates&&void 0===l,this._useChanged=this._useImages!==this._oldUsed,this._useChanged&&(this._oldUsed?(a.removeChild(o),this._check.style.display="inline-block"):(a.insertBefore(o,this._check),this._check.style.display="none")),this._oldUsed=this._useImages,this._useImages&&(o.className=l?this._checkedStyle:void 0===l&&this.threeStates?this._intermediateStyle:this._uncheckedStyle,f=o),n.merged&&this.editable&&!p.Utils.included(this.checkLocation,c.IconLocation.TOP_EDGE,c.IconLocation.BOTTOM_EDGE)&&n.focused||a.style.removeProperty("top"),this.$_setSpanText(this._makeText(e,t,n)),this._oldLocation!=this._checkLocation){switch(this._checkLocation){case c.IconLocation.LEFT:this.$_layoutLeft(a,f,u);break;case c.IconLocation.RIGHT:this.$_layoutRight(a,f,u);break;case c.IconLocation.TOP:this.$_layoutTop(a,f,u);break;case c.IconLocation.BOTTOM:this.$_layoutBottom(a,f,u);break;case c.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(a,f,u);break;case c.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(a,f,u);break;case c.IconLocation.TOP_EDGE:this.$_layoutTopEdge(a,f,u,r,i);break;case c.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(a,f,u,r,i);break;case c.IconLocation.CENTER:this.$_layoutCenter(a,f,u);break;default:this.$_layoutLeft(a,f,u)}this._oldLocation=this._checkLocation}this._checkLocation==c.IconLocation.TOP_EDGE||this._checkLocation==c.IconLocation.BOTTOM_EDGE?this._setHeight(i):this._clearHeight()},k.prototype.canEditClickAt=function(e){return this.preventDefaultEditClick(e),e.target===this._check||e.target===this._image},k.prototype.preventDefaultEditClick=function(e){e.target===this._check&&e.preventDefault()},k.prototype._doEditClick=function(e,t,n){return t.target===this._check||t.target===this._image?(this.$_edit(e,n),!0):void 0},k.prototype.canEditKey=function(e){return this.spaceKey&&32==e.keyCode&&!e.ctrlKey&&!e.shiftKey&&!e.altKey},k.prototype._doEditKey=function(e,t,n){return this.$_edit(e,n),!0},k.prototype.moveClickElement=function(e,t){var n=this._dom;this.editable&&!p.Utils.included(c.IconLocation.TOP_EDGE,c.IconLocation.BOTTOM_EDGE)&&(n.style.top=e+"px")},k.prototype.$_resetValues=function(){var e;if(this._values={},this._falseValues)if(e=this._falseValues.split(",")){var t=void 0;this._falseValue=0<(t=e.length)?e[0]:void 0;for(var n=0;n<t;n++)this._values[e[n]]=!1}else this._falseValue=void 0;if(this._trueValues)if(e=this._trueValues.split(",")){t=void 0,this._trueValue=0<(t=e.length)?e[0]:void 0;for(n=0;n<t;n++)this._values[e[n]]=!0}else this._trueValue=void 0},k.prototype.$_getChecked=function(e,t,n,r){return r?r(e.handler,n.itemIndex,n.dataColumn,t):"boolean"==typeof t?t:(n=String(t),this._values.hasOwnProperty(n)?this._values[n]:!this._threeStates||!this._strictValue&&""!=t&&null!=t?Boolean(t):void 0)},k.prototype.$_edit=function(e,t){var n=e.grid,r=(this._check,n.body.getCell(e,!1)),i=r.value,s=(r.dataColumn.dataIndex,i),r=!(s=this.$_getChecked(n,i,e,this._getCheckedCallback))&&(void 0===s||!this._threeStates||void 0),s=this._setCheckedCallback;s?r=s(n.handler,e.itemIndex,e.dataColumn,i,r):void 0!==this._trueValue&&r?r=this._trueValue:void 0!==this._falseValue&&!1===r&&(r=this._falseValue),t.value=r},k.prototype.$_layoutLeft=function(e,t,n){var r=this._useImages,t=r?this._image:t;C.prototype.$_layoutLeft.call(this,e,t,n,r)},k.prototype.$_layoutRight=function(e,t,n){var r=this._useImages,t=r?this._image:t;C.prototype.$_layoutRight.call(this,e,t,n,r)},k.prototype.$_layoutTop=function(e,t,n){var r=this._useImages,t=r?this._image:t;C.prototype.$_layoutTop.call(this,e,t,n,r)},k.prototype.$_layoutBottom=function(e,t,n){var r=this._useImages,t=r?this._image:t;C.prototype.$_layoutBottom.call(this,e,t,n,r)},k.prototype.$_layoutLeftEdge=function(e,t,n){var r=this._useImages,t=r?this._image:t;C.prototype.$_layoutLeftEdge.call(this,e,t,n,this._imgWidth,r)},k.prototype.$_layoutRightEdge=function(e,t,n){var r=this._useImages,t=r?this._image:t;C.prototype.$_layoutRightEdge.call(this,e,t,n,this._imgWidth,r)},k.prototype.$_layoutTopEdge=function(e,t,n,r,i){var s=this._useImages,t=s?this._image:t;C.prototype.$_layoutTopEdge.call(this,e,t,n,r,i,this._imgWidth,this._imgHeight,s)},k.prototype.$_layoutBottomEdge=function(e,t,n,r,i){var s=this._useImages,t=s?this._image:t;C.prototype.$_layoutBottomEdge.call(this,e,t,n,r,i,this._imgWidth,this._imgHeight,s)},k.prototype.$_layoutCenter=function(e,t,n){var r=this._useImages,t=r?this._image:t;C.prototype.$_layoutCenter.call(this,e,t,n,r)},k.prototype.$_setImageMiddle=function(e,t,n){t==this._imgMiddle&&!n||(this._imgMiddle=t)},k.prototype.$_getStyleName=function(){return String(this._checkLocation)||String(c.IconLocation.LEFT)},k.TYPE="check",k.STYLE_NAME="rg-renderer "+(k.STYLE="rg-check-renderer"),k.CHECKED_STYLE="rg-check-renderer-checked",k.UNCHECKED_STYLE="rg-check-renderer-unchecked",k.INTERMEDIATE_STYLE="rg-check-renderer-intermediate",k);t.CheckCellRenderer=g;var L,g=(L=g,l.__extends(A,L),A.prototype._doInitContent=function(e){L.prototype._doInitContent.call(this,e),e.style.setProperty("display","flex","important")},A.prototype.$_layoutLeft=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.LEFT)},A.prototype.$_layoutRight=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.RIGHT)},A.prototype.$_layoutTop=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.TOP)},A.prototype.$_layoutBottom=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.BOTTOM)},A.prototype.$_layoutLeftEdge=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.LEFT_EDGE)},A.prototype.$_layoutRightEdge=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.RIGHT_EDGE)},A.prototype.$_layoutTopEdge=function(e,t,n,r,i){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.TOP_EDGE)},A.prototype.$_layoutBottomEdge=function(e,t,n,r,i){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.BOTTOM_EDGE)},A.prototype.$_layoutCenter=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.CENTER)},A);t.FlexCheckCellRenderer=g;var O,g=(O=i,l.__extends(M,O),M.prototype._doDispose=function(){O.prototype._doDispose.call(this)},_dp(M,"buttonStyle",{get:function(){return this._buttonStyle},set:function(e){e!=this._buttonStyle&&(this._buttonStyle=e,this._changed())}}),_dp(M,"hideWhenEmpty",{get:function(){return this._hideWhenEmpty},set:function(e){e!=this._hideWhenEmpty&&(this._hideWhenEmpty=e,this._changed())}}),_dp(M,"spaceKey",{get:function(){return this._spaceKey},set:function(e){this._spaceKey=e}}),_dp(M,"type",{get:function(){return M.TYPE}}),_dp(M,"styleName",{get:function(){return M.STYLE_NAME}}),M.prototype._doInitContent=function(e){var t=this._button=p.getDoc(e).createElement("button");t.type="button",t.tabIndex=-1,t.style.display="inline-block",e.appendChild(t)},M.prototype._doRenderCell=function(e,t,n,r,i){var s=this._button;s[this._textProp]=this._makeText(e,t,n),s.setAttribute("class",this._buttonStyle),this._hideWhenEmpty&&this._isEmpty(t.value)?s.style.visibility="hidden":s.style.visibility="visible"},M.prototype.canClick=function(e){return e.target===this._button},M.prototype.canClickSpaceKey=function(e){return this.spaceKey&&32==e.keyCode&&!e.ctrlKey&&!e.shiftKey&&!e.altKey},M.prototype._doClick=function(e,t,n){if(t.target===this._button||"keydown"===t.type)return{type:this.type,value:e.value}},M.prototype._doItemClick=function(){this._button.click()},M.TYPE="button",M.STYLE_NAME="rg-renderer "+(M.STYLE="rg-button-renderer"),M.BUTTON_STYLE="rg-button-renderer-button",M);t.ButtonCellRenderer=g;var _,g=(_=i,l.__extends(D,_),D.prototype._doDispose=function(){_.prototype._doDispose.call(this)},_dp(D,"baseUrl",{get:function(){return this._baseUrl},set:function(e){e!=this._baseUrl&&(this._baseUrl=e,this._changed())}}),_dp(D,"linkField",{get:function(){return this._linkField},set:function(e){e!=this._linkField&&(this._linkField=e,this._changed())}}),_dp(D,"urlCallback",{get:function(){return this._urlCallback},set:function(e){e!==this._urlCallback&&(this._urlCallback=e,this._changed())}}),_dp(D,"titleField",{get:function(){return this._titleField},set:function(e){e!=this._titleField&&(this._titleField=e,this._changed())}}),_dp(D,"titleCallback",{get:function(){return this._titleCallback},set:function(e){e!==this._titleCallback&&(this._titleCallback=e,this._changed())}}),_dp(D,"spaceKey",{get:function(){return this._spaceKey},set:function(e){this._spaceKey=e}}),_dp(D,"type",{get:function(){return D.TYPE}}),_dp(D,"styleName",{get:function(){return D.STYLE_NAME}}),D.prototype._doInitContent=function(e){var t=this._anchor=p.getDoc(e).createElement("a");t.tabIndex=-1,e.appendChild(t)},D.prototype._doRenderCell=function(e,t,n,r,i){var s=this._anchor;s[this._textProp]=this._makeText(e,t,n),this._url="","#"===this._baseUrl?(s.removeAttribute("target"),s.href="#"):(this._url=this.$_getUrl(e,t),this._url&&(s.target="_blank",s.href=this._url)),t=this.$_getTitle(e,t),t?s.title=t:delete s.title},D.prototype.preventDefaultClick=function(e){e.target===this._anchor&&(e.preventDefault(),e.stopImmediatePropagation())},D.prototype.canClick=function(e){return e.target===this._anchor},D.prototype._doClick=function(e,t,n){if(t.target===this._anchor||"keydown"===t.type)return{type:this.type,url:this._url,value:e.value}},D.prototype.canClickSpaceKey=function(e){return this.spaceKey&&32==e.keyCode&&!e.ctrlKey&&!e.shiftKey&&!e.altKey},D.prototype._doItemClick=function(){this._anchor.click()},D.prototype.$_getUrl=function(e,t){var n="",r=this._urlCallback;return(n=r?r.call(this,e.handler,t):n)||(n=this._linkField?this._getValue(e,t,this._linkField):t.value,this._baseUrl&&(n=this._baseUrl+n)),n||""},D.prototype.$_getTitle=function(e,t){var n="",r=this._titleCallback;return(n=!(n=r?r.call(this,e.handler,t):n)&&this._titleField?this._getValue(e,t,this._titleField):n)||""},D.TYPE="link",D.STYLE_NAME="rg-renderer "+(D.STYLE="rg-link-renderer"),D);t.LinkCellRenderer=g;var P,a=(P=a,l.__extends(H,P),H.prototype._doDispose=function(){P.prototype._doDispose.call(this)},_dp(H,"shapeStyle",{get:function(){return this._shapeStyle},set:function(e){e!=this._shapeStyle&&(this._shapeStyle=e,this._changed())}}),_dp(H,"shape",{get:function(){return this._shape},set:function(e){e!=this._shape&&(this._shape=e,this._changed())}}),_dp(H,"shapeMap",{get:function(){return this._shapeMap},set:function(e){e!==this._shapeMap&&(this._shapeMap=e,this._changed())}}),_dp(H,"shapeCallback",{get:function(){return this._shapeCallback},set:function(e){e!=this._shapeCallback&&(this._shapeCallback=e,this._changed())}}),_dp(H,"shapeWidth",{get:function(){return this._shapeWidth},set:function(e){this._shapeWidth!==e&&(this._shapeWidth=e,this._changed())}}),_dp(H,"shapeHeight",{get:function(){return this._shapeHeight},set:function(e){this._shapeHeight!==e&&(this._shapeHeight=e,this._changed())}}),_dp(H,"shapeLocation",{get:function(){return this._shapeLocation},set:function(e){e!=this._shapeLocation&&(this._oldLocation=this._shapeLocation,this._shapeLocation=e,this._changed())}}),_dp(H,"type",{get:function(){return H.TYPE}}),_dp(H,"styleName",{get:function(){return H.STYLE_NAME}}),H.prototype._doInitContent=function(e){var t=p.getDoc(e),n=(this._svg=xt.SvgElement.createSVG(e)).style,r=isNaN(this._shapeWidth)||this._shapeWidth<=0?16:this._shapeWidth,i=isNaN(this._shapeHeight)||this._shapeHeight<=0?16:this._shapeHeight;n.display="inline-block",n.width=r+"px",n.height=i+"px",i=this._span=t.createElement("span"),e.appendChild(i),this._br=t.createElement("br")},H.prototype._reset=function(){P.prototype._reset.call(this),this._splitted=this._reversed=void 0},H.prototype._doRenderCell=function(e,t,n,r,i){var s=this._svg,o=this._span;if(this._runShape=this.$_getShape(e,t),s.setAttribute("class",this._shapeStyle),xt.SvgElement.renderSVG(e,s,this.$_render.bind(this)),this.$_setSpanText(this._makeText(e,t,n)),this._oldLocation!=this._shapeLocation){switch(this._shapeLocation){case c.IconLocation.LEFT:this.$_layoutLeft(this._dom,s,o,!1);break;case c.IconLocation.RIGHT:this.$_layoutRight(this._dom,s,o,!1);break;case c.IconLocation.TOP:this.$_layoutTop(this._dom,s,o,!1);break;case c.IconLocation.BOTTOM:this.$_layoutBottom(this._dom,s,o,!1);break;case c.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(this._dom,s,o,this._shapeWidth,!1);break;case c.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(this._dom,s,o,this._shapeWidth,!1);break;case c.IconLocation.TOP_EDGE:this.$_layoutTopEdge(this._dom,s,o,r,i,this._shapeWidth,this._shapeHeight,!1);break;case c.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(this._dom,s,o,r,i,this._shapeWidth,this._shapeHeight,!1);break;case c.IconLocation.CENTER:this.$_layoutCenter(this._dom,s,o,!1);break;default:this.$_layoutLeft(this._dom,s,o,!1)}this._oldLocation=this._shapeLocation}this._shapeLocation==c.IconLocation.TOP_EDGE||this._shapeLocation==c.IconLocation.BOTTOM_EDGE?this._setHeight(i):this._clearHeight()},H.prototype.$_getShape=function(e,t){var n=void 0,r=this._shapeCallback;return n=null==(n=null==(n=r?r.call(this,e.handler,t):n)&&this._shapeMap?this._shapeMap[t.value]:n)?this._shape:n},H.prototype.$_getDrawing=function(e){var t;return e&&("ellipse"==(e=e.toLowerCase())?t=this._ellipse||(this._ellipse=new Tt.EllipseShape):(t=this._polygon||(this._polygon=new Tt.PolygonShape(e)),this._polygon.shape=e)),t},H.prototype.$_render=function(e,t,n,r){var i;!this._runShape||(i=this.$_getDrawing(this._runShape))&&i.draw(t,n,r)},H.TYPE="shape",H.STYLE_NAME="rg-renderer "+(H.STYLE="rg-shape-renderer"),H.SHAPE_STYLE="rg-shape-renderer-shape",H);t.ShapeCellRenderer=a;var B,a=(B=a,l.__extends(j,B),j.prototype._doInitContent=function(e){e.style.setProperty("display","flex","important"),B.prototype._doInitContent.call(this,e)},j.prototype.$_layoutLeft=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.LEFT)},j.prototype.$_layoutRight=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.RIGHT)},j.prototype.$_layoutTop=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.TOP)},j.prototype.$_layoutBottom=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.BOTTOM)},j.prototype.$_layoutLeftEdge=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.LEFT_EDGE)},j.prototype.$_layoutRightEdge=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.RIGHT_EDGE)},j.prototype.$_layoutTopEdge=function(e,t,n,r,i){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.TOP_EDGE)},j.prototype.$_layoutBottomEdge=function(e,t,n,r,i){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.BOTTOM_EDGE)},j.prototype.$_layoutCenter=function(e,t,n){Nt.RenderHelper.layoutFlex(e,t,n,this._itemGap,this._verticalEdgePad,c.IconLocation.CENTER)},j);t.FlexShapeCellRenderer=a;var F,a=(F=i,l.__extends(I,F),I.prototype._doDispose=function(){F.prototype._doDispose.call(this)},_dp(I,"barStyle",{get:function(){return this._barStyle},set:function(e){e!=this._barStyle&&(this._barStyle=e,this._changed())}}),_dp(I,"inactiveStyle",{get:function(){return this._inactiveStyle},set:function(e){e!=this._inactiveStyle&&(this._inactiveStyle=e,this._changed())}}),_dp(I,"barCount",{get:function(){return this._barCount},set:function(e){(e=Math.max(2,e))!=this._barCount&&(this._barCount=e,this._changed())}}),_dp(I,"minimum",{get:function(){return this._minimum},set:function(e){e!=this._minimum&&(this._minimum=e,this._changed())}}),_dp(I,"maximum",{get:function(){return this._maximum},set:function(e){e!=this._maximum&&(this._maximum=e,this._changed())}}),_dp(I,"startRate",{get:function(){return this._startRate},set:function(e){!isNaN(e)&&0<=e&&e<=100&&e!==this._startRate&&(this._startRate=e,this._changed())}}),_dp(I,"endRate",{get:function(){return this._endRate},set:function(e){!isNaN(e)&&0<=e&&e<=100&&e!==this._endRate&&(this._endRate=e,this._changed())}}),_dp(I,"absoluteValue",{get:function(){return this._absoluteValue},set:function(e){e!=this._absoluteValue&&(this._absoluteValue=e,this._changed())}}),_dp(I,"type",{get:function(){return I.TYPE}}),_dp(I,"styleName",{get:function(){return I.STYLE_NAME}}),I.prototype._doInitContent=function(e){var t=this._div=p.getDoc(e).createElement("div");t.style.position="relative",t.style.height="100%",e.appendChild(t),t=(this._svg=xt.SvgElement.createSVG(t)).style,t.position="absolute",t.left="0px",t.width="100%",t.top=(100-Math.max(this._startRate,this._endRate))/2+"%",t.height=Math.max(this._startRate,this._endRate)+"%"},I.prototype._doRenderCell=function(e,t,n,r,i){var s=this._svg;this._value=parseFloat(t.value),s.setAttribute("class",this._barStyle),xt.SvgElement.renderSVG2(e,s,this.$_render.bind(this))},I.prototype.$_render=function(e,t){var n=this
.absoluteValue?Math.abs(this._value):this._value;isNaN(this._minimum)||isNaN(this._maximum)||(n=this._barCount*(n-this._minimum)/(this._maximum-this._minimum));for(var r=100/Math.max(this._startRate,this._endRate),i=(100-2*(this._barCount+1))/this._barCount,s=0,o=this._startRate*r,u=(this._endRate-this._startRate)/(this._barCount-1),a=0;a<this._barCount;a++){var f=a<n?null:this._inactiveStyle;t.sbounds(f,s+"%",100-o+"%",i+"%",o+"%"),s+=2+i,o+=u}},I.TYPE="signalbar",I.STYLE_NAME="rg-renderer "+(I.STYLE="rg-signalbar-renderer"),I.BAR_STYLE="rg-signalbar-renderer-bar",I.INACTIVE_STYLE="rg-signalbar-renderer-inactive",I);t.SignalBarCellRenderer=a;var q,a=(q=i,l.__extends(R,q),R.prototype._doDispose=function(){q.prototype._doDispose.call(this)},_dp(R,"barStyle",{get:function(){return this._barStyle},set:function(e){e!=this._barStyle&&(this._barStyle=e,this._changed())}}),_dp(R,"type",{get:function(){return R.TYPE}}),_dp(R,"styleName",{get:function(){return R.STYLE_NAME}}),R.prototype._doInitContent=function(e){var t=this._div=p.getDoc(e).createElement("div");t.style.position="relative",t.style.height="100%",e.appendChild(t),t=(this._svg=xt.SvgElement.createSVG(t)).style,t.position="absolute",t.left="0px",t.top="0px",t.width="100%",t.height="100%"},R.prototype._doRenderCell=function(e,t,n,r,i){this._div;var s=this._svg;this._value=String(t.value),this._value&&(this._value=this._value.toUpperCase()),s.setAttribute("class",this._barStyle),xt.SvgElement.renderSVG(e,s,this.$_render)},R.TYPE="code39",R.STYLE_NAME="rg-renderer "+(R.STYLE="rg-code39-renderer"),R.BAR_STYLE="rg-code39-renderer-bar",R);t.Code39CellRenderer=a;var U,i=(U=i,l.__extends(z,U),z.prototype._doDispose=function(){U.prototype._doDispose.call(this)},_dp(z,"barStyle",{get:function(){return this._barStyle},set:function(e){e!=this._barStyle&&(this._barStyle=e,this._changed())}}),_dp(z,"type",{get:function(){return z.TYPE}}),_dp(z,"styleName",{get:function(){return z.STYLE_NAME}}),z.prototype._doInitContent=function(e){var t=this._div=p.getDoc(e).createElement("div");t.style.position="relative",t.style.height="100%",e.appendChild(t),t=(this._svg=xt.SvgElement.createSVG(t)).style,t.position="absolute",t.left="0px",t.top="0px",t.width="100%",t.height="100%"},z.prototype._doRenderCell=function(e,t,n,r,i){this._div;var s=this._svg;this._value=String(t.value),s.setAttribute("class",this._barStyle),xt.SvgElement.renderSVG(e,s,this.$_render)},z.TYPE="code128",z.STYLE_NAME="rg-renderer "+(z.STYLE="rg-code128-renderer"),z.BAR_STYLE="rg-code128-renderer-bar",z);t.Code128CellRenderer=i});t(Ct),Ct.RendererEditResult,Ct.DataCellRenderer,Ct.TextCellRenderer,Ct.BarOrigin,Ct.BarCellRenderer,Ct.ImageCellRenderer,Ct.FlexibleCellRenderer,Ct.IconCellRenderer,Ct.FlexIconCellRenderer,Ct.CheckCellRenderer,Ct.FlexCheckCellRenderer,Ct.ButtonCellRenderer,Ct.LinkCellRenderer,Ct.ShapeCellRenderer,Ct.FlexShapeCellRenderer,Ct.SignalBarCellRenderer,Ct.Code39CellRenderer,Ct.Code128CellRenderer;var kt=n(function(e,t){function i(){this._template="",this._tokens=[]}function u(){var e=s.call(this)||this;return e._output=void 0,e._inputFocusable=!1,e._html="",e._parser=new r,e.template="<span>${value}</span>",e._itemClickable=!0,e}Object.defineProperty(t,"__esModule",{value:!0});var n=/\$\{[^{}]*\}/g,r=(_dp(i,"template",{get:function(){return this._template},set:function(e){this._template=e,this.$_parse(e)}}),_dp(i,"pattern",{set:function(e){this._pattern=e}}),i.prototype.realize=function(e,t,n,r){for(var i="",s=0,o=this._tokens;s<o.length;s++){var u=o[s];"string"==typeof u?i+=u||"":1==u.type?i+=t.value||"":2==u.type?i+=t.item.getData(e.dataSource.getFieldIndex(u.field))||"":4===u.type?i+=(t instanceof Et.DataCell?t.getDisplayText(e,n):t.value)||"":i+=r?r.call(this,e.handler,t,u.field)||"":u.field}return i},i.prototype.realizeHeader=function(e,t,n){for(var r="",i=0,s=this._tokens;i<s.length;i++){var o,u=s[i];"string"==typeof u?r+=u:1==u.type?r+=e.displayText:r+=t?(o=t.call(this,n.handler,e,u.field))||"":null!=(o=e.getValue(u.field))?o:u.field}return r},i.prototype.realizeSummary=function(e,t,n,r){for(var i="",s=0,o=this._tokens;s<o.length;s++){var u,a=o[s];"string"==typeof a?i+=a:1==a.type?i+=t.getDisplayText(n):i+=r?(u=r.call(this,e.column.grid.handler,e,a.field))||"":null!=(u=e.getValue(a.field))?u:a.field}return i},i.prototype.realizeGroupSummary=function(e,t,n,r){for(var i="",s=0,o=this._tokens;s<o.length;s++){var u,a=o[s];"string"==typeof a?i+=a:1==a.type?i+=t.getDisplayText(n):i+=r?(u=r.call(this,e.column.grid.handler,e,a.field))||"":null!=(u=e.getValue(a.field))?u:a.field}return i},i.prototype.realizeForm=function(e,t,n){for(var r="",i=0,s=this._tokens;i<s.length;i++){var o=s[i];"string"==typeof o?r+=o:1==o.type||2==o.type||(n?n.call(this,e.getHandler(),t,o.field):r+=o.field)}return r},i.prototype.$_parse=function(e){var t=this._tokens=[];if(e){for(var r=e.length,i=this._pattern||n,s=0;u=i.exec(e);){var o=u[0],u=u.index;s<u&&(t.push(e.substring(s,u)),s=u),u=o.substring(2,o.length-1),u={type:"value"===u?1:"text"===u?4:0==u.indexOf("value:")?2:3,field:u},2==u.type&&(u.field=u.field.substring(6)),t.push(u),s+=o.length}s<r&&t.push(e.substring(s,r))}},i);t.HtmlTemplateParser=r;var s,o=(s=Ct.DataCellRenderer,l.__extends(u,s),u.prototype._doDispose=function(){s.prototype._doDispose.call(this)},_dp(u,"template",{get:function(){return this._parser.template},set:function(e){e!=this._parser.template&&(this._parser.template=e,this._changed())}}),_dp(u,"pattern",{set:function(e){e!=this._pattern&&(e instanceof RegExp?this._pattern=e:this._pattern=e?new RegExp(e):void 0,this._parser.pattern=this._pattern,this._parser.template=this.template)}}),_dp(u,"output",{get:function(){return this._output},set:function(e){this._output=e}}),_dp(u,"callback",{get:function(){return this._callback},set:function(e){e!==this._callback&&(this._callback=e,this._changed())}}),_dp(u,"valueCallback",{get:function(){return this._valueCallback},set:function(e){e!==this._valueCallback&&(this._valueCallback=e,this._changed())}}),_dp(u,"inputFocusable",{get:function(){return this._inputFocusable},set:function(e){this._inputFocusable!==e&&(this._inputFocusable=e)}}),u.prototype.clearAndAssignFrom=function(e){this.valueCallback=void 0,this.callback=void 0,this.pattern=void 0,this.template="",s.prototype.assignFrom.call(this,e)},_dp(u,"type",{get:function(){return u.TYPE}}),u.prototype._doClearContent=function(e){s.prototype._doClearContent.call(this,e),this._html=null},u.prototype.canClick=function(e){var t=p.getWin(this._dom),e=e.target;return!(e instanceof t.HTMLTableCellElement&&0<=e.className.indexOf("rg-")||this._dom===e)},u.prototype.click=function(e,t,n){return this._doClick(e,t,n||t.target)},u.prototype._doRenderCell=function(e,t,n,r,i){var s=this._callback;s?this.$_setHtml(s.call(this,e.handler,t,r,i)):this.$_setHtml(this._parser.realize(e,t,n,this._valueCallback))},u.prototype._doClick=function(e,t,n){return{type:this.type,target:t.target,value:e.value}},u.prototype.$_setHtml=function(e){e!=this._html&&(this._html=e,this._dom.innerHTML=e)},u.TYPE="html",u);t.TemplateCellRenderer=o});t(kt),kt.HtmlTemplateParser,kt.TemplateCellRenderer;var Lt=n(function(e,t){function i(){var e=n.call(this)||this;return e.$_userComparer=function(e,t,n){if(this._labelComparer)return this._labelComparer(e,t._rowId,n.rowId)},e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.prototype.run=function(e,t,n,r,i,s,o){this._rs=e.provider;var u=this._ds=this._rs.dataSource;this._parent=e,this._field=t,e=this._ds.getField(t);if(this._labelComparer=this._ds._comparers[t]||this._rs._labelComparer[t],this._labelComparer)this._comparer=this.$_userComparer;else switch(e.dataType){case c.ValueType.NUMBER:case c.ValueType.DATETIME:this._comparer=u.compareNumbers;break;case c.ValueType.BOOLEAN:this._comparer=u.compareBools;break;case c.ValueType.OBJECT:this._comparer=u.compareObjects;break;default:this._comparer=(r?u.compareTexts:u.compareValues).bind(u)}this.$_sort(i,s,n,o)},i.prototype.$_sort=function(e,t,n,r){do{var i,s=this._parent,o=this._field,u=e,a=t,f=Math.floor((e+t)/2),l=s.getItem(f).dataRow,h=s.getItem(f).row;do if(n==c.SortDirection.ASCENDING){for(;u<=a;){if((i=0==(i=this._comparer(this._field,h,s.getItem(u).row))&&r?l-s.getItem(u).dataRow:i)<=0)break;u++}for(;u<=a;){if(0<=(i=0==(i=this._comparer(o,h,s.getItem(a).row))&&r?l-s.getItem(a).dataRow:i))break;a--}}else{for(;u<=a;){if(0<=(i=0==(i=this._comparer(o,h,s.getItem(u).row))&&r?l-s.getItem(u).dataRow:i))break;u++}for(;u<=a;){if((i=0==(i=this._comparer(o,h,s.getItem(a).row))&&r?l-s.getItem(a).dataRow:i)<=0)break;a--}}while(u<=a&&(u!=a&&s._exchangeItems(u,a),u++,a--),u<=a)}while(e<a&&this.$_sort(e,a,n,r),(e=u)<t)},i);t.TreeItemsSorter=r});t(Lt),Lt.TreeItemsSorter;var At=n(function(e,t){function i(){return n.call(this)||this}function u(e,t,n){var i=s.call(this)||this;return i._runtime=new r,i._owner=e,i._exprNode=b.ExpressionParser.Default.parse(t,["value","values"]),i._runtime=new r,i._callback=n,i}function h(e){return e=a.call(this,e)||this,e._sortMode=c.SortMode.AUTO,e._filterMode=c.FilterMode.AUTO,e._filterOr=!1,e._checkableExpression=null,e._rows=[],e._filteredItems=[],e._pageItems=[],e._sortedItems=[],e._pubItems=e._rows,e._items=e._rows,e._distinctRows=[],e._rowCount=0,e._fixedCount=0,e._fixedSorting=!1,e._maxItemCount=0,e._itemCount=0,e._pubCount=0,e._filtered=!1,e._filtering=!1,e._filters=[],e._filterRuntime=new yt.ColumnFilterRuntime,e._filterLock=0,e._fixedFiltering=!1,e._sorted=!1,e._sortFields=[],e._sortDirections=[],e._sortCases=[],e._labelComparer={},e._sorter=null,e._defSorter=null,e._paging=!1,e._pagingSource=c.PagingSource.ROWS,e._pageSize=10,e._pageCount=-1,e._pageStartIndex=-1,e._currPage=0,e._pageStart=0,e._summaryMode=c.SummaryMode.AGGREGATE,e._summaryMap=null,e._checkableTag=null,e._checkFieldIndex=-1,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=wt.DataRowExpressionRuntime,l.__extends(i,n),i);t.CheckableExpressionRuntime=r;var s,o=(s=A.DataTag,l.__extends(u,s),u.clearCheckables=function(e){for(var t=e.itemCount;t--;)e.getItem(t)._setCheckable(!0)},u.prototype.connect=function(e){this._runtime.setDataSource(e)},u.prototype.disconnect=function(){},u.prototype.clearRows=function(){u.clearCheckables(this._owner)},u.prototype.setRows=function(){for(var e=this._owner._rows,t=e.length;t--;){var n=e[t];this.$_setCheckable(n)}},u.prototype.insertRow=function(e){e=this._owner.getItemOfRow(e,!0),this.$_setCheckable(e)},u.prototype.insertRows=function(e,t){for(var n=0;n<t;n++){var r=this._owner.getItemOfRow(e+n,!0);r instanceof dt.GridItem&&this.$_setCheckable(r)}},u.prototype.updateRow=function(e){e=this._owner.getItemOfRow(e,!0),this.$_setCheckable(e)},u.prototype.updateRows=function(e,t){for(var n=0;n<t;n++){var r=this._owner.getItemOfRow(e+n,!0);r instanceof dt.GridItem&&this.$_setCheckable(r)}},u.prototype.updateRowList=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t],r=this._owner.getItemOfRow(r,!0);r instanceof dt.GridItem&&this.$_setCheckable(r)}},u.prototype.changeStates=function(e){if(e)for(var t=e.length;t--;){var n=this._owner.getItemOfRow(e[t],!0);n instanceof dt.GridItem&&this.$_setCheckable(n)}},u.prototype.$_setCheckable=function(e){var t=this._callback,t=t?t.call(this,e.dataSource.handler,e):(this._runtime.setItem(e),this._exprNode.evaluate(this._runtime));e._setCheckable(t)},u),a,f=(a=vt.ItemProvider,l.__extends(h,a),h.prototype._doDispose=function(){function e(e){for(var t=0,n=e.length;t<n;t++)e[t]&&e[t].dispose();e.length=0}this.dataSource=null,e(this._rows),e(this._filteredItems),e(this._pageItems),e(this._sortedItems),e(this._pubItems),e(this._items),e(this._distinctRows),this._filterRuntime&&this._filterRuntime.dispose(),this._filterRuntime=null,this._sortFields.length=0,this._labelComparer=null,this._summaryMap=null,this._checkableTag=null,a.prototype._doDispose.call(this)},h.prototype.getCommandStates=function(e){return this._rows[e]._getExtents()},h.prototype.setCommandStates=function(e,t){this._rows[e]._setExtents(t)},_dp(h,"isFilterOr",{get:function(){return this._filterOr},set:function(e){e!=this._filterOr&&(this._filterOr=e,this.$_buildItems(),this._fireRefresh())}}),_dp(h,"isFiltered",{get:function(){return this._filtered}}),_dp(h,"isSorted",{get:function(){return this._sorted}}),_dp(h,"isPaging",{get:function(){return this._paging}}),_dp(h,"pageStartIndex",{get:function(){return this._pageStart}}),_dp(h,"sorter",{get:function(){return this._sorter||this._defSorter},set:function(e){this._sorter=e}}),_dp(h,"summaryMode",{get:function(){return this._summaryMode},set:function(e){e!=this._summaryMode&&(this._summaryMode=e,this.$_resetSummary(),this.$_buildItems(),this._fireRefresh())}}),_dp(h,"sortMode",{get:function(){return this._sortMode},set:function(e){this._sortMode=e}}),_dp(h,"filterMode",{get:function(){return this._filterMode},set:function(e){this._filterMode=e}}),_dp(h,"checkableExpression",{get:function(){return this._checkableExpression},set:function(e){e!=this._checkableExpression&&(this._checkableExpression=e,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),e&&(this._checkableTag=new o(this,e),this._dataSource&&this._checkableTag.connect(this._dataSource)))}}),_dp(h,"checkableCallback",{set:function(e){this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),e&&(this._checkableTag=new o(this,null,e),this._dataSource&&this._checkableTag.connect(this._dataSource))}}),_dp(h,"labelComparer",{get:function(){return this._labelComparer},set:function(e){this._labelComparer=e||{}}}),h.prototype.getFieldDomain=function(e){for(var t=this._rows.length,n=[],r=void 0,i=0;i<t;i++){var s=this._dataSource.getValue(i,e);s!=r&&n.indexOf(s)<0&&n.push(s),r=s}return n},h.prototype.beginFilter=function(){this._filterLock++},h.prototype.endFilter=function(e,t,n){void 0===e&&(e=!0),void 0===t&&(t=null),void 0===n&&(n=null),0<this._filterLock&&(this._filterLock=Math.max(0,this._filterLock-1),0==this._filterLock&&e&&this.applyFilters(!0,t,n))},h.prototype.hasFilter=function(e){return e=this._filters[e],e&&0<e.length},h.prototype.addFilter=function(e,t){var n=t&&t.criteria;if(0<=e){this._fireFilterAdded(e,n),n=this._filters[e];if(n||(this._filters[e]=n=[]),t.criteria||t.callback)return t=new yt.ColumnFilterRun(t),n.push(t),this.applyFilters(),t}},h.prototype.removeFilter=function(e,t){this._filtered&&this._filters[e]&&(this._fireFilterRemoved(e,t.model),0<=(t=(e=this._filters[e]).indexOf(t))&&(e.splice(t,1),this.applyFilters()))},h.prototype.clearFilters=function(e){var t;this._filtered&&this._filters[e]&&(this._fireFilterCleared(e),0<(t=this._filters[e]).length&&(t.length=0,delete this._filters[e],this.applyFilters()))},h.prototype.clearAllFilters=function(){this._filtered&&(this._fireFilterAllCleared(),this._filters=[],this.applyFilters())},h.prototype.hasFilters=function(){for(var e=this._filters.length,t=0;t<e;t++){var n=this._filters[t];if(n&&0<n.length)return!0}return!1},h.prototype.applyFilters=function(e,t,n){if(void 0===e&&(e=!0),void 0===t&&(t=null),void 0===n&&(n=null),!(0<this._filterLock)){this.$_buildItems();try{e&&this._fireRefresh()}finally{this._fireFiltered(t,n)}}},h.prototype.orderBy=function(e,t,n,r){void 0===r&&(r=!0),this._fireSort(e=void 0===e?null:e,t=void 0===t?null:t,n=void 0===n?null:n),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var i=e?e.length:0,s=t?t.length:0,o=n?n.length:0,u=0;u<s;u++)t[u]=t[u]==c.SortDirection.ASCENDING||t[u]==c.SortDirection.DESCENDING?t[u]:c.SortDirection.ASCENDING;for(u=0;u<i;u++)this._sortFields.push(e[u]),u<s?this._sortDirections.push(t[u]):0<s?this._sortDirections.push(t[s-1]):this._sortDirections.push(c.SortDirection.ASCENDING),u<o?this._sortCases.push(n[u]):0<o?this._sortCases.push(n[o-1]):this._sortCases.push(c.SortCase.SENSITIVE);this._sorted=this.$_checkSorted(),this.$_buildItems();try{r&&this._fireRefresh()}finally{this._fireSorted()}},h.prototype.getSortFields=function(){return this._sortFields.slice()},h.prototype.getSortDirections=function(){return this._sortDirections.slice()},h.prototype.getSortCases=function(){return this._sortCases.concat()},h.prototype.setPaging=function(e,t,n,r){void 0===t&&(t=10),void 0===n&&(n=-1),void 0===r&&(r=null),t=Math.max(t,1),n=Math.max(n,-1),e==this._paging&&t==this._pageSize&&n==this._pageCount&&r==this._pagingSource||(this._currPage=0,this._paging=e,this._pagingSource=r,this._pageSize=t,this._pageCount=n,this.$_buildItems(),this._fireRefresh())},_dp(h,"page",{get:function(){return this._paging?this._currPage:-1}}),h.prototype.setPage=function(e,t){void 0===e&&(e=0),void 0===t&&(t=-1),this._paging&&(e=Math.max(0,Math.min(this.pageCount-1,e)),t=Math.max(-1,t),e==this._currPage&&t==this._pageStartIndex||(this._currPage=e,this._pageStartIndex=t,this.$_buildPage(),this._fireRefresh()))},_dp(h,"pageCount",{get:function(){return this._paging?0<=this._pageCount?this._pageCount:Math.floor((this._dataSource.rowCount+this._pageSize-1)/this._pageSize):0},set:function(e){this._paging&&(e=Math.max(-1,e))!=this._pageCount&&(this._pageCount=e,this.$_buildPage(),this._fireRefresh())}}),h.prototype.getCheckedRows=function(e){for(var t=e?this._dataSource.rowCount:this.itemCount,n=[],r=0;r<t;r++){var i=(e?this._rows:this._pubItems)[r];i.checked&&n.push(i.dataRow)}return n},h.prototype.resetCheckables=function(){for(var e=this._rows.length;e--;)this._rows[e]._setCheckable(!0);this._fireRefresh()},h.prototype.applyCheckables=function(){this._checkableTag?this._checkableTag.setRows():o.clearCheckables(this),this._fireRefresh()},h.prototype.setCheckFieldIndex=function(e){this._checkFieldIndex=e},h.prototype.getItemChecked=function(e,t){return-1<this._checkFieldIndex?this.dataSource.getField(this._checkFieldIndex).readBooleanValue(e.getData(this._checkFieldIndex)):t},h.prototype.setItemChecked=function(e,t){if(-1<this._checkFieldIndex){var n,r=this.dataSource.getField(this._checkFieldIndex);return!!(n=r.readBooleanValue(e.getData(this._checkFieldIndex)))!=t&&(n=(r._boolParser||r._ownerBoolParser).toText(t),e.setData(this._checkFieldIndex,n)),!0}return!1},h.prototype.getJsonRows=function(){return this._pubItems.map(function(e){return e.getRowObject()})},_dp(h,"dataSource",{get:function(){return this._dataSource},set:function(e){e!==this._dataSource&&(this.$_clearRows(!0),this._dataSource&&(this._checkableTag&&this._checkableTag.disconnect(),this._dataSource.removeListener(this),this._dataSource.unregisterCommandListener(this)),this._dataSource=e,this._dataSource&&(this._checkableTag&&this._checkableTag.connect(this._dataSource),this.$_buildRows(),this._dataSource.addListener(this),this._dataSource.registerCommandListener(this)),this.disposing||(this.$_resetSummary(),this._fireReset()))}}),_dp(h,"itemCount",{get:function(){return this._pubCount}}),_dp(h,"rowCount",{get:function(){return this._pubCount}}),_dp(h,"fixedCount",{get:function(){return this._fixedCount}}),_dp(h,"maxItemCount",{get:function(){return this._maxItemCount},set:function(e){(e=Math.max(0,e))!=this._maxItemCount&&(this._maxItemCount=e,this._refreshItems())}}),_dp(h,"sorted",{get:function(){return this._sorted}}),_dp(h,"movable",{get:function(){return!this.sorted}}),h.prototype._hideDeletedChanged=function(){this.$_buildItems(),this._fireRefresh()},h.prototype.getItem=function(e){return e<0||e>=this._pubCount?null:this._pubItems[e]},h.prototype.getItems=function(e,t){return this._pubItems.slice(e,e+t)},h.prototype.getIndexOfRow=function(e){return 0<=e&&e<this._rows.length?(e=this._rows[e],e&&0<=this._pubItems.indexOf(e)?e.index:-1):-1},h.prototype.getItemOfRow=function(e,t){return 0<=e&&e<this._rows.length?(e=this._rows[e],0<=e.index||t?e:null):null},h.prototype._refreshItems=function(){var e={};this.$_saveExtents(e),this.$_clearRows(!1),this.$_buildRows(e),this._fireRefresh()},h.prototype.setFixed=function(e,t,n){(e=Math.max(0,e))==this._fixedCount&&t==this._fixedSorting&&n==this._filtering||(this._fixedCount=e,this._fixedSorting=t,this._fixedFiltering=n,this.$_buildItems(),this._fireRefresh())},h.prototype.exchange=function(e,t){if(e!=t&&!this._sorted&&!this._filtered){if(e<0||e>=this._rows.length)throw new Error("index1 is out of bounds: "+e);if(t<0||t>=this._rows.length)throw new Error("index2 is out of bounds: "+e);var n=this._rows[e];this._rows[e]=this._rows[t],this._rows[t]=n}},h.prototype.clearDisplayLevels=function(){for(var e=this._rows,t=e.length,n=0;n<t;n++)e[n]._displayLevel=-1},h.prototype.getAllItems=function(){return this._pubItems.slice()},h.prototype.getNumber=function(e){return e=this.$_getSummary(e),e?e.count:this.itemCount},h.prototype.getSum=function(e){return e=this.$_getSummary(e),e?e.sum:NaN},h.prototype.getMax=function(e){return e=this.$_getSummary(e),e?e.max:NaN},h.prototype.getMin=function(e){return e=this.$_getSummary(e),e?e.min:NaN},h.prototype.getAvg=function(e){return e=this.$_getSummary(e),e?e.avg:NaN},h.prototype.getVar=function(e){return e=this.$_getSummary(e),e?e.vars:NaN},h.prototype.getVarp=function(e){return e=this.$_getSummary(e),e?e.varsp:NaN},h.prototype.getStdev=function(e){return e=this.$_getSummary(e),e?Math.sqrt(e.vars):NaN},h.prototype.getStdevp=function(e){return e=this.$_getSummary(e),e?Math.sqrt(e.varsp):NaN},h.prototype.getDataCount=function(e){return e=this.$_getSummary(e),e?e.dataCount:0},h.prototype.getDataAvg=function(e){return e=this.$_getSummary(e),e?e.dataAvg:NaN},h.prototype.$_saveExtents=function(e){for(var t=0,n=this._rows.length;t<n;t++){var r=this._rows[t];0<=r.dataRowId&&(e[r.dataRowId]=r._extents)}},h.prototype.$_clearRows=function(e){e&&this.clearRowHeights(!0),this._rows.length=0,this._filteredItems.length=0,this._filtered=!1,this._sorted=!1,this._sortedItems.length=0,this._pubItems=this._rows,this.$_clearDistincts()},h.prototype.$_clearIndicies=function(){for(var e=this._rows.length;e--;)this._rows[e]._index=-1},h.prototype.$_clearDistincts=function(){for(var e=this._distinctRows.length;e--;)this._distinctRows[e]=null;this._distinctRows.length=0},h.prototype.$_buildRows=function(e){void 0===e&&(e=null);var t=this._dataSource;if(t){this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),this._rowCount=t.rowCount,!this._filtered&&!this._paging&&0<this.maxItemCount&&(this._rowCount=Math.min(this._rowCount,this.maxItemCount)),this._rows=new Array(this._rowCount);for(var n=0,r=this._rowCount;n<r;n++){var i=this._rows[n]=this.$_createRow(n);e&&e.hasOwnProperty(i.dataId)&&(i._extents=e[i.dataId])}this.$_buildItems(),this._checkableTag&&this._checkableTag.setRows(),0==this._rowCount&&this.clearRowHeights(!0)}},h.prototype.$_resetCounts=function(){this._filtered?this._pubCount=this._itemCount=this._items.length:this._pubCount=this._itemCount=this._rowCount=this._rows.length},h.prototype.$_buildItems=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var n=0<this.maxItemCount?this.maxItemCount:this._rows.length;if(this._rowCount=this._rows.length,this._pubItems=this._items=this._rows,this._pubCount=this._itemCount=this._rows.length,this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),(this._filtered||this._paging)&&this.$_clearIndicies(),this._filtered){if(this._filteredItems.length=0,this.hideDeleted||0<this._dataSource.hiddenCount)for(var r=0;r<this._rowCount;r++){var i=this._rows[r],s=this._dataSource.getRowState(this._rows[r].dataRow),o=this._dataSource.isHiddenRow(this._rows[r].dataRow);this.hideDeleted&&d.isDeletedState(s)||o?i._index=-1:i._index=0}else for(r=0;r<this._rowCount;r++)this._rows[r]._index=0;var u=this.fixedCount,a=0<u&&!this._fixedFiltering,f=this._rows.length;if(!e)for(var r=0,l=this._filters.length;r<l;r++)if(p=this._filters[r])for(var c=0;c<p.length;c++)p[c].prepare(this._filterRuntime,this._dataSource);this._paging||(f=Math.min(f,n));for(var h=0,r=0;r<this._rowCount&&h<f;r++)if(0<=(i=this._rows[r]).index)if(e||a&&h<u)this._filteredItems.push(i),h++;else{for(var p,v=!this._filterOr,m=0,g=0,l=this._filters.length;g<l;g++)if((p=this._filters[g])&&m++,this._filterOr){if(p&&this.$_select(p,i,g)){v=!0;break}}else if(p&&!this.$_select(p,i,g)){v=!1;break}v||0===m?(this._filteredItems.push(i),h++):i._index=-1}this._pubItems=this._items=this._filteredItems,this._pubCount=this._itemCount=this._items.length}else this._filteredItems.length=0;if(this._sorted){if(t)for(var y=this._sortedItems,r=y.length;r--;)y[r].index<0&&y.splice(r,1);else this.$_sortRows();this._pubItems=this._sortedItems}else this._sortedItems.length=0;this._paging&&this.$_buildPageItems(),this.$_clearSummary(),this._resetItemIndicies(0)},h.prototype.$_buildPageItems=function(){var e=this._sorted?this._sortedItems:this._filtered?this._filteredItems:this._items;this._pageItems.length=0;for(var t=this._pageStart=0<=this._pageStartIndex?this._pageStartIndex:this._currPage*this._pageSize,n=e.length,r=0<this.maxItemCount?this.maxItemCount:n,i=Math.min(this._pageSize,r);t<n&&0<i;t++,i--)this._pageItems.push(e[t]);this._pubItems=this._pageItems,this._pubCount=this._pubItems.length},h.prototype.$_buildPage=function(){this.$_clearIndicies(),this.$_buildPageItems(),this._resetItemIndicies(0)},h.prototype.$_compareFuncs=function(e,t){for(var n={},r=this._dataSource,i=0,s=e.length;i<s;i++){var o=r.getField(e[i]);if(o){var u=r.getDataComparer(o.index)||this._labelComparer[o.index],a=t[i]==c.SortCase.INSENSITIVE;if(!u)switch(o.dataType){case c.ValueType.DATETIME:case c.ValueType.NUMBER:u=r.compareNumbers.bind(r);break;case c.ValueType.BOOLEAN:u=r.compareBools.bind(r);break;case c.ValueType.OBJECT:u=r.compareObjects.bind(r);break;default:u=(a?r.compareTexts:r.compareValues).bind(r)}u&&(n[e[i]]=u)}}return n},h.prototype.$_sortRows=function(e){var t=(e=void 0===e?null:e)||this._items.slice(),e=[];0<this._fixedCount&&!this._fixedSorting&&(e=t.splice(0,this._fixedCount));var n=this.$_compareFuncs(this._sortFields,this._sortCases);t.sort(function(e,t){for(var r,i,s,o=0,u=0,a=this._sortFields.length;u<a&&(i=this._sortDirections[u],s=this._sortFields.length==u+1,!(r=n[this._sortFields[u]])||0===(o=r(this._sortFields[u],e.dataRow,t.dataRow)));u++);return o=0===(o*=i===c.SortDirection.DESCENDING?-1:1)&&s?i===c.SortDirection.DESCENDING?t.dataRow-e.dataRow:e.dataRow-t.dataRow:o}.bind(this)),this._sortedItems=e.concat(t)},h.prototype.$_createRow=function(e){return e=new dt.GridRow(e),this.attachItem(e),e._dataRowId=e.dataId,e},h.prototype.$_createAllRow=function(){for(var e=0;e<this._rowCount;e++)this._rows[e]||(this._rows[e]=this.$_createRow(e))},h.prototype.$_resetSummary=function(){this._summaryMap=[]},h.prototype.$_clearSummary=function(){if(this._summaryMap)for(var e=this._summaryMap.length-1;0<=e;e--)this._summaryMap[e]&&this._summaryMap[e].clear()},h.prototype.$_getSummary=function(e){var t,n=this._summaryMap[e];return n||(t=this._dataSource)&&t.canSummarize(e)&&(n=new pt.FieldSummary(e),this._summaryMap[e]=n),n&&0==n.count&&0<this.itemCount&&this.$_summarize(n),n},h.prototype.$_summarize=function(e){var t=this._dataSource;if(t)if(this._filtered){for(var n=this._items.length,r=new Array(n),i=0;i<n;i++)r[i]=this._pubItems[i].dataRow;t.summarizeRange(e,r,this._summaryMode==c.SummaryMode.STATISTICAL)}else t.summarize(e,this._summaryMode==c.SummaryMode.STATISTICAL)},h.prototype.$_needSort=function(){return this._sorted&&this._sortMode==c.SortMode.AUTO},h.prototype.$_needFilter=function(){return this._filtered&&this._filterMode==c.FilterMode.AUTO},h.prototype.$_checkFiltered=function(){if(this._dataSource)return this._filters.length=this._dataSource.fieldCount,this.hasFilters()||this.hideDeleted&&0<this._dataSource.deletedCount||0<this._dataSource.hiddenCount},h.prototype.$_select=function(e,t,n){for(var r=0,i=e.length;r<i;r++)if(e[r].select(this._filterRuntime,t.parent,t,n))return!0},h.prototype.$_checkSorted=function(){for(var e=this._sortFields.length-1;0<=e;e--)this._sortFields[e]>this._dataSource.fieldCount&&(this._sortFields.splice(e,1),this._sortDirections.splice(e,1),this._sortCases.splice(e,1));return this._sortFields&&0<this._sortFields.length},h.prototype.onDataSourceCommandStackChanged=function(e,t,n){this._fireCommandStackChanged(t,n)},h.prototype.onDataProviderDisposed=function(e){this._checkableTag&&this._checkableTag.disconnect(),this.$_clearRows(!0),this.$_resetSummary(),this._fireReset(),this.dataSource=null},h.prototype.onDataProviderReset=function(e){this.$_clearRows(!0),this.$_buildRows(),this.$_resetSummary(),this._fireReset()},h.prototype.onDataProviderRefresh=function(e){this._refreshItems()},h.prototype.onDataProviderRefreshClient=function(e){this._fireRefreshClient()},h.prototype.onDataProviderRowCountChanged=function(e,t){this._fireRefreshClient()},h.prototype.onDataProviderDataLoadComplated=function(){this._fireDataLoadComplated()},h.prototype.onDataProviderRowInserting=function(e,t,n){return!0},h.prototype.onDataProviderRowInserted=function(e,t,n){var r=this._rows,i=t<r.length?r[t]:null,s=this.$_createRow(t);r.splice(t,0,s);for(var o,u=t,a=r.length;u<a;u++)r[u]._dataRow=u;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():(this._filtered&&(o=this._filteredItems,t=null!=n?n:Math.max(0,i?o.indexOf(i):o.length),o.splice(t,0,s)),this._sorted&&(o=this._sortedItems,t=null!=n?n:Math.max(0,i?o.indexOf(i):o.length),o.splice(t,0,s)),this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(this._sorted?0:t)),this._checkableTag&&this._checkableTag.insertRow(t),this._fireItemInserted(s)},h.prototype.onDataProviderRowsInserted=function(e,t,n,r){if(!(n<0)){for(var i,s=this._rows,o=t<s.length?s[t]:null,u=[],a=0;a<n;a++)u.push(i=this.$_createRow(t+a)),s.splice(t+a,0,i);for(var f=s.length,a=t;a<f;a++)s[a]._dataRow=a;if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else{if(this._filtered){var l=this._filteredItems;t=null!=r?r:Math.max(0,o?l.indexOf(o):l.length);for(a=0;a<u.length;a++)l.splice(t+a,0,u[a])}if(this._sorted){l=this._sortedItems,t=null!=r?r:Math.max(0,o?l.indexOf(o):l.length);for(a=0;a<u.length;a++)l.splice(t+a,0,u[a])}this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(t)}this._checkableTag&&this._checkableTag.insertRows(t,n),this._fireRefresh()}},h.prototype.onDataProviderRowRemoving=function(e,t){return!0},h.prototype.$_silentRemoveRow=function(e){var t,n;this._filtered&&0<=(n=(t=this._filteredItems).indexOf(e))&&t.splice(n,1),this._sorted&&0<=(n=(t=this._sortedItems).indexOf(e))&&t.splice(n,1),this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(0)},h.prototype.onDataProviderRowRemoved=function(e,t){var n=this._rows,r=n[t];n.splice(t,1);for(var i=n.length-1;t<=i;i--)n[i]._dataRow=i;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_silentRemoveRow(r),0==n.length&&this.clearRowHeights(!0),this._fireItemDeleted(r)},h.prototype.onDataProviderRowsRemoving=function(e,t){return!0},h.prototype.$_silentRemoveRows=function(e){if(this._filtered)for(var t=this._filteredItems,n=0;n<e.length;n++){var r=e[n];0<=(i=t.indexOf(r))&&t.splice(i,1)}if(this._sorted)for(t=this._sortedItems,n=0;n<e.length;n++){var i,r=e[n];0<=(i=t.indexOf(r))&&t.splice(i,1)}this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(0)},h.prototype.onDataProviderRowsRemoved=function(e,t){if(t&&!(t.length<1)){1<t.length&&t.sort(function(e,t){return e-t});for(var n=this._rows,r=t[0],i=[],s=t.length-1;0<=s;s--)i.push(n[t[s]]),n.splice(t[s],1);for(s=this._rows.length-1;r<=s;s--)n[s]._dataRow=s;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_silentRemoveRows(i),0==t.length&&this.clearRowHeights(!0),this._fireRefresh()}},h.prototype.onDataProviderRowUpdating=function(e,t,n){return!0},h.prototype.onDataProviderRowUpdated=function(e,t){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(t),this._rows[t]&&this._fireItemUpdated(this._rows[t])},h.prototype.onDataProviderRowsUpdated=function(e,t,n){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRows(t,n),this._fireRefresh()},h.prototype.onDataProviderRowListUpdated=function(e,t){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRowList(t),this._fireRefresh()},h.prototype.onDataProviderValueChanging=function(e,t,n,r){return!0},h.prototype.onDataProviderValueChanged=function(e,t,n){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(t),this._rows[t]&&this._fireItemUpdated(this._rows[t])},h.prototype.onDataProviderRowMoving=function(e,t,n){return!0},h.prototype.onDataProviderRowMoved=function(e,t,n){var r=this._rows,i=r.splice(t,1);r.splice(n,0,i[0]);for(var s=r.length,o=t=Math.min(t,n);o<s;o++)r[o]._dataRow=o;(this._sorted||this._paging||this.hideDeleted)&&(this.$_buildItems(),this._resetItemIndicies(0)),this._fireRefresh()},h.prototype.onDataProviderRowsMoving=function(e,t,n,r){return!0},h.prototype.onDataProviderRowsMoved=function(e,t,n,r){this._refreshItems()},h.prototype.onDataProviderRowListMoving=function(e,t,n){return!0},h.prototype.onDataProviderRowListMoved=function(e,t,n){this._refreshItems()},h.prototype.onDataProviderStateChanged=function(e,t){var n;this.hideDeleted&&(n=this._rows[t],d.isDeletedState(n.rowState)&&(this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0)?this.$_buildItems(!0,!0):this.$_silentRemoveRow(n),this._fireRefresh())),this._checkableTag&&this._checkableTag.updateRow(t),this._fireRowStateChanged(this._rows[t])},h.prototype.onDataProviderRowHided=function(e,t,n){this._filtered=this.$_checkFiltered(),n?(this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0)?this.$_buildItems(!0,!0):(t=this.getItemsByRows(t),this.$_silentRemoveRows(t)),this._fireRefresh()):this._refreshItems()},h.prototype.onDataProviderStatesChanged=function(e,t){if(this.hideDeleted){for(var n,r=!1,i=0,s=t.length;i<s;i++){var o=t[i],o=this._rows[o];if(d.isDeletedState(o.rowState)){r=!0;break}}r&&(this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0)?this.$_buildItems(!0,!0):(n=this.getItemsByRows(t),this.$_silentRemoveRows(n)),this._fireRefresh())}this._checkableTag&&this._checkableTag.changeStates(t),this._fireRowStatesChanged(this.getItemsByRows(t))},h.prototype.onDataProviderRestoreRows=function(e,t){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.changeStates(t),this._fireRowStatesChanged(this.getItemsByRows(t)),this._fireRefresh()},h.prototype.onDataProviderStatesCleared=function(e){this._pubCount!=e.rowCount&&this._refreshItems(),this._fireRowStatesCleared()},h);t.DefaultItemProvider=f});t(At),At.CheckableExpressionRuntime,At.DefaultItemProvider;var Ot=n(function(e,t){function i(e,t,r){var i=n.call(this)||this;return i._owner=e,i._exprNode=b.ExpressionParser.Default.parse(t,["value","values"]),i._runtime=new At.CheckableExpressionRuntime,i._callback=r,i}function u(){var e=null!==s&&s.apply(this,arguments)||this;return e._extents={},e}function h(){var e=a.call(this)||this;return e._extents=0,e}function g(e){var t=v.call(this)||this;return t._iconHeight=0,t._dataRow=e,t}function S(e){var t=w.call(this,null)||this;return t._rs=e,t}function N(e){var t=x.call(this)||this;return t._fixedCount=0,t._items=new Array,t._list=new Array,t._rs=e,t}function L(){var e=C.call(this,null)||this;return e._sortMode=c.SortMode.AUTO,e._expandWhenGrouping=!0,e._footerWhenExpanded=!0,e._footerWhenCollapsed=!0,e._labelComparer={},e._summaryMode=c.SummaryMode.AGGREGATE,e._groupSummaryMode=c.SummaryMode.AGGREGATE,e._checkableExpression=null,e._checkableCallback=null,e._extents=new o,e._filters={},e._filterRuntime=new yt.ColumnFilterRuntime,e._filtered=!1,e._sorter=new Lt.TreeItemsSorter,e._sortFields=[],e._sortDirections=[],e._sortCases=[],e._visibleItems=new T(e),e._itemMap=[],e._itemCount=0,e._summaryMap=null,e._filterLock=0,e._includeParentItem=!0,e._checkFieldIndex=-1,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.clearCheckables=function(e){for(var t=function(e){if(e){e.setCheckable(!0);for(var n=e.count;n--;){var r=e.getItem(n);r instanceof m&&t(r)}}},n=e.itemCount;n--;){var r=e.getItem(n);r instanceof m&&t(r)}},i.prototype.connect=function(e){this._runtime.setDataSource(e)},i.prototype.disconnect=function(){},i.prototype.clearRows=function(){i.clearCheckables(this._owner)},i.prototype.setRows=function(){for(var e=this._owner.itemCount;e--;){var t=this._owner.getItem(e);t instanceof m&&this.$_setCheckable(t,!0)}},i.prototype.addRow=function(e,t){void 0===t&&(t=!0),e=this._owner.getItemOfRow(e.rowId),e instanceof m&&this.$_setCheckable(e,t)},i.prototype.addRows=function(e){for(var t=e.length;t--;){var n=this._owner.getItemOfRow(e[t].rowId);n instanceof m&&this.$_setCheckable(n,!0)}},i.prototype.updateRow=function(e){e=this._owner.getItemOfRow(e.rowId),e instanceof m&&this.$_setCheckable(e,!1)},i.prototype.updateRows=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t],r=this._owner.getItemOfRow(r.rowId);r instanceof m&&this.$_setCheckable(r,!1)}},i.prototype.changeStates=function(e){for(var t=e.length;t--;){var n=this._owner.getItemOfRow(e[t].rowId);n instanceof m&&this.$_setCheckable(n,!1)}},i.prototype.$_setCheckable=function(e,t){if(e){var n=this._callback,r=void 0,r=n?n.call(this,e.dataSource.handler,e):(this._runtime.setItem(e),this._exprNode.evaluate(this._runtime));if(e.setCheckable(r),t)for(var i=e.count;i--;){var s=e.getItem(i);s instanceof m&&this.$_setCheckable(s,!0)}}},i),s,o=(s=y.Base,l.__extends(u,s),u.prototype.connect=function(e){this._extents={}},u.prototype.disconnect=function(){this._extents={}},u.prototype.clearRows=function(){this._extents={}},u.prototype.setRows=function(){},u.prototype.addRow=function(e){this._extents[e.rowId]=0;for(var t=e.count-1;0<=t;t--)this.addRow(e.getChild(t))},u.prototype.addRows=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];this.addRow(r)}},u.prototype.removeRow=function(e){delete this._extents[e.rowId];for(var t=e.count-1;0<=t;t--)this.removeRow(e.getChild(t))},u.prototype.removeRows=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];this.removeRow(r)}},u.prototype.updateRow=function(e){},u.prototype.updateRows=function(e){},u.prototype.getExtents=function(e){var t=this._extents[e.rowId];return void 0===t?this._extents[e.rowId]=0:t},u.prototype.setExtents=function(e,t){this._extents[e.rowId]=t},u),a,f=(a=dt.GridItem,l.__extends(h,a),h.prototype._getExtents=function(){return this._extents},h.prototype._setExtents=function(e){this._extents=e},_dp(h,"isLeaf",{get:function(){return!0}}),h);t.TreeItemFooter=f;var v,m=(v=dt.GroupItem,l.__extends(g,v),g.getTemp=function(e,t){return g.$_tempItem._dataRow=e,g.$_tempItem[dt.GridItem.PARENT]=t,g.$_tempItem},g.prototype.dispose=function(){this._dataRow=null,v.prototype.dispose.call(this)},_dp(g,"iconHeight",{get:function(){return this._iconHeight},set:function(e){this._iconHeight=e}}),_dp(g,"row",{get:function(){return this._dataRow}}),_dp(g,"rowId",{get:function(){return this._dataRow?this._dataRow.rowId:-1}}),_dp(g,"iconIndex",{get:function(){return this._dataRow?this._dataRow.iconIndex:-1}}),_dp(g,"hasChildren",{get:function(){return 0<this.count||this._dataRow&&this._dataRow.hasChildren}}),_dp(g,"rootItem",{get:function(){for(var e=this;1<e.level;)e=e.parent;return e}}),_dp(g,"summaryMode",{get:function(){return c.SummaryMode.AGGREGATE}}),_dp(g,"editable",{get:function(){return this._editable}}),_dp(g,"readOnly",{get:function(){return this._readOnly}}),g.prototype.setEditable=function(e,t){this._editable=e,this._readOnly=t},g.prototype._getExtents=function(){var e=this.provider;return e?e._extents.getExtents(this):0},g.prototype._setExtents=function(e){var t;null!==(t=this.provider)&&void 0!==t&&t._extents.setExtents(this,e)},_dp(g,"isData",{get:function(){return!0}}),_dp(g,"isDataRow",{get:function(){return!0}}),_dp(g,"footer",{get:function(){return this._footer}}),_dp(g,"footerCount",{get:function(){return this._footer?1:0}}),_dp(g,"dataRow",{get:function(){return this._dataRow?this._dataRow.rowId:-1}}),g.prototype.getShadowRow=function(){return this._dataRow?this._dataRow.rowId:-1},_dp(g,"dataId",{get:function(){return this._dataRow?this._dataRow.rowId:-1}}),_dp(g,"descendantCount",{get:function(){return this._dataRow.descendantCount}}),_dp(g,"rowState",{get:function(){return this._dataRow.rowState}}),_dp(g,"isLeaf",{get:function(){return!this.hasChildren}}),_dp(g,"resizable",{get:function(){return!0}}),g.prototype.getFooter=function(e){return this._footer},g.prototype.isFooter=function(e){return e===this._footer},g.prototype.canEdit=function(){return!0},g.prototype.createFooter=function(){this._footer||(this._footer=new f)},g.prototype.setExpanded=function(e,t,n){e==this.expanded&&!n||(e?this.provider.expand(this,t,n,0):this.provider.collapse(this,t,n))},g.prototype.getData=function(e){return e=this.dataSource.getFieldIndex(e),this._dataRow.getValue(e)},g.prototype.setData=function(e,t){e=this.dataSource.getFieldIndex(e),this._dataRow.setValue(e,t,!1)},g.prototype.setItem=function(e,t){v.prototype.setItem.call(this,e,t),t._addChildren(e.children),e.clear()},g.prototype.exchange=function(e,t){this._exchangeItems(e,t)},g.prototype.moveChild=function(e,t){var n=e+t,r=this._children,i=r[e];if(t<0)for(var s=e;n<s;s--)r[s]=r[s-1];else for(s=e;s<n;s++)r[s]=r[s+1];r[n]=i},g.prototype.moveChildren=function(e,t,n){for(var r=this._children,i=r.splice(e,t),s=e+n,o=0;o<t;o++)r.splice(s+o,0,i[o])},g.prototype.changeParent=function(e,t){this.parent.remove(this),e&&e.insert(t,this)},g.prototype.getRowData=function(){return this._dataRow&&this._dataRow._values.concat()},g.$_tempItem=new g(null),g);t.TreeItem=m;var w,E=(w=m,l.__extends(S,w),_dp(S,"id",{get:function(){return-1}}),_dp(S,"provider",{get:function(){return this._rs}}),_dp(S,"level",{get:function(){return 0}}),_dp(S,"expanded",{get:function(){return!0}}),S.prototype.setExpanded=function(e,t,n){},_dp(S,"isLeaf",{get:function(){return!1}}),_dp(S,"visible",{get:function(){return!0}}),_dp(S,"dataSource",{get:function(){return this._rs.dataSource}}),S);t.RootTreeItem=E;var x,T=(x=y.Base,l.__extends(N,x),_dp(N,"provider",{get:function(){return this._rs}}),_dp(N,"count",{get:function(){return this._items.length}}),_dp(N,"fixedCount",{get:function(){return this._fixedCount}}),N.prototype.getItem=function(e){return this._items[e]},N.prototype.setItem=function(e,t){this._items[e]=t},N.prototype.indexOf=function(e){return this._items.indexOf(e)},N.prototype.clear=function(){this._items.length=0},N.prototype.expand=function(e,t,n){void 0===n&&(n=0),e&&this.$_expandItem(e,t,n)},N.prototype.collapse=function(e){if(e)for(var t=this._rs,n=this._items,r=e.index+1;r<n.length&&n[r].level>e.level;){if(n[r]==e.footer){t.footerWhenCollapsed||(n[r]._index=-1,n.splice(r,1));break}n[r]._index=-1,n.splice(r,1)}},N.prototype.getNext=function(e){return e&&e.visible&&e.index<this.count-1?this._items[e.index+1]:null},N.prototype.getPrior=function(e){return e&&e.visible&&0<e.index?this._items[e.index-1]:null},N.prototype.insert=function(e,t){this._items.splice(t,0,e)},N.prototype.remove=function(e){var t=this._items,n=t.indexOf(e);if(0<=n&&(t.splice(n,1),e.expanded))for(;n<t.length&&e.isDescendant(t[n]);)t.splice(n,1)},N.prototype.$_collectChildren=function(e,t,n,r){for(var i=0,s=e.count;i<s;i++){var o=e.getItem(i);o&&(t.push(o),(n&&o.level<r||o.expanded)&&this.$_collectChildren(o,t,n,r))}e.footer&&t.push(e.footer)},N.prototype.$_expandItem=function(e,t,n){var r=this._items,i=this._list,s=e instanceof E?this._fixedCount:e.index+1;if(n=Math.max(0,n),i.length=0,this.$_collectChildren(e,i,t,0<n?e.level+n:1e6),t){for(var o=s,u=r.length;o<u&&!(r[o].level<=e.level);o++);r.splice(s,o-s)}for(o=0,u=i.length;o<u;o++)r.splice(s+o,0,i[o])},N.prototype._clearAndInit=function(e){this.clear(),this._fixedCount=Math.min(e,this._rs.itemCount);for(var t=0;t<this._fixedCount;t++)this._items.push(this._rs.getItem(t))},N),C,k=(C=vt.ItemProvider,l.__extends(L,C),L.prototype._doDispose=function(){this._filters=null,this._filterRuntime=null,this._sorter=null,this._sortFields=null,this._sortDirections=null,this._sortCases=null,this._visibleItems=null,this._itemMap=null,this._summaryMap=null,this._checkableExpression=null,this._checkableCallback=null,this._checkableTag=null,this._labelComparer=null,C.prototype._doDispose.call(this)},L.prototype.getCommandStates=function(e){return this._itemMap[e.rowId]._getExtents()},L.prototype.setCommandStates=function(e,t){this._itemMap[e.rowId]._setExtents(t)},_dp(L,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(e){e!=this._expandWhenGrouping&&(this._expandWhenGrouping=e)}}),_dp(L,"footerWhenExpanded",{get:function(){return this._footerWhenExpanded},set:function(e){e!=this._footerWhenExpanded&&(this._footerWhenExpanded=e)}}),_dp(L,"footerWhenCollapsed",{get:function(){return this._footerWhenCollapsed},set:function(e){e!=this._footerWhenCollapsed&&(this._footerWhenCollapsed=e)}}),_dp(L,"labelComparer",{get:function(){return this._labelComparer},set:function(e){this._labelComparer=e||{}}}),_dp(L,"summaryMode",{get:function(){return this._summaryMode},set:function(e){e!=this._summaryMode&&(this._summaryMode=e,this.$_resetSummary(),this._fireRefresh())}}),_dp(L,"groupSummaryMode",{get:function(){return this._groupSummaryMode},set:function(e){e!=this._groupSummaryMode&&(this._groupSummaryMode=e,this.$_resetGroupSummary(),this._fireRefresh())}}),_dp(L,"hideDeleted",{get:function(){return this._hideDeleted},set:function(e){e!=this._hideDeleted&&(this._hideDeleted=e,this._saveAndRefresh())}}),_dp(L,"checkableExpression",{get:function(){return this._checkableExpression},set:function(e){e!=this._checkableExpression&&(this._checkableExpression=e,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),e&&(this._checkableTag=new r(this,e),this.dataSource&&this._checkableTag.connect(this.dataSource)))}}),_dp(L,"checkableCallback",{get:function(){return this._checkableCallback},set:function(e){e!=this._checkableCallback&&(this._checkableCallback=e,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),e&&(this._checkableTag=new r(this,null,e),this.dataSource&&this._checkableTag.connect(this.dataSource)))}}),_dp(L,"sortMode",{get:function(){return this._sortMode},set:function(e){e!=this._sortMode&&(this._sortMode=e)}}),_dp(L,"includeParentItem",{get:function(){return this._includeParentItem},set:function(e){this._includeParentItem=e}}),L.prototype.$_needSort=function(){return this._sortFields&&0<this._sortFields.length&&this._sortMode==c.SortMode.AUTO},L.prototype.insertItem=function(e,t,n,r){var i=this._visibleItems;e.collapsed&&i.expand(e,!1);var s=i.indexOf(e.getItem(n));if(r){e.insert(n+1,t);for(var o=i.count,u=e.level+1;++s<o&&!(i.getItem(s).level<=u););i.insert(t,s)}else e.insert(n,t),i.insert(t,s)},L.prototype.appendItem=function(e,t){var n=this._visibleItems;e.collapsed&&n.expand(e,!1);for(var r=0<e.count?n.indexOf(e.getItem(e.count-1)):n.indexOf(e),i=n.count,s=e.level;++r<i&&!(n.getItem(r).level<=s););e.add(t),n.insert(t,r)},L.prototype.removeItem=function(e){this._visibleItems.remove(e),e.parent.remove(e)},L.prototype.$_calcLevel=function(e,t,n){for(var r,i=e.count,s=t,o=0;o<i;o++)(r=e.getItem(o))&&(s=Math.max(s,t+1),n&&!r.expanded||(s=Math.max(s,this.$_calcLevel(r,t+1,n))));return s},L.prototype.getLevels=function(e){return this.$_calcLevel(this._rootItem,0,e)},L.prototype.$_setExpanded=function(e,t,n){if(this._setExpanded(e,!0),this.dataSource.setHasChildren(e.row,!1),t)for(var r=0,i=e.count;r<i;r++){var s=e.getItem(r);s instanceof m&&(s.expanded||s.level<n)&&this.$_setExpanded(s,!0,n)}},L.prototype._expandItem=function(e,t,n,r,i){if(e&&(t||!e.expanded)&&(!i||this._fireExpanding(e))){this._visibleItems.collapse(e),this._visibleItems.expand(e,n,r),this._resetItemIndicies(e===this._rootItem?0:e.index),this.$_setExpanded(e,n,0<r?e.level+r:1e6);try{this._fireRefresh()}finally{i&&this._fireExpanded(e)}}},L.prototype.expand=function(e,t,n,r){this._expandItem(e,n,t,r=void 0===r?0:r,!0)},L.prototype.expandAll=function(e){this._expandItem(this._rootItem,!0,!0,0<e?e+1:0,!0)},L.prototype.$_setCollapsed=function(e,t){if(this._setExpanded(e,!1),t)for(var n=0,r=e.count;n<r;n++){var i=e.getItem(n);i instanceof m&&this.$_setCollapsed(i,!0)}},L.prototype._collapseItem=function(e,t,n,r){if(e&&(t||e.expanded)&&(!r||this._fireCollapsing(e))){this._visibleItems.collapse(e),this.$_setCollapsed(e,n),e==this._rootItem&&this._visibleItems.expand(this._rootItem,!1),this._resetItemIndicies(e===this._rootItem?0:e.index);try{this._fireRefresh()}finally{r&&this._fireCollapsed(e)}}},L.prototype.collapse=function(e,t,n){this._collapseItem(e,n,t,!0)},L.prototype.collapseAll=function(){this._collapseItem(this._rootItem,!0,!0,!0)},L.prototype.$_saveExpanded=function(e){e._saveExpanded();for(var t=0,n=e.count;t<n;t++)this.$_saveExpanded(e.getItem(t))},L.prototype.orderBy=function(e,t,n,r){void 0===r&&(r=!0),this._fireSort(e,t,n),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var i=e?e.length:0,s=t?t.length:0,o=n?n.length:0,u=0;u<i;u++)this._sortFields.push(e[u]),u<s?this._sortDirections.push(t[u]):0<s?this._sortDirections.push(t[s-1]):this._sortDirections.push(c.SortDirection.ASCENDING),u<o?this._sortCases.push(n[u]):0<o?this._sortCases.push(n[o-1]):this._sortCases.push(c.SortCase.SENSITIVE);try{this._saveAndRefresh(!0,r),r&&this._fireRefresh()}finally{this._fireSorted()}},L.prototype.getSortFields=function(){return this._sortFields.concat()},L.prototype.getSortDirections=function(){return this._sortDirections.concat()},L.prototype.getSortCases=function(){return this._sortCases.concat()},L.prototype.beginFiltering=function(){this._filterLock++},L.prototype.$_prepareFiltering=function(e,t){for(var n=t._dataRow.count,r=t.rowId,i=r<=-1||this.$_selectItem(t.parent,t),s=0;s<n;s++){var o=new m(t._dataRow._children[s]);o[dt.GridItem.PARENT]=t,o&&!this.dataSource.isHiddenRow(o.rowId)&&(i=this.$_prepareFiltering(e,o)||i)}return e[r]=i},L.prototype.endFiltering=function(e,t,n){var r={};e&&this._includeParentItem&&(r={},this.$_prepareFilters(),this.$_prepareFiltering(r,this._rootItem)),0<this._filterLock&&(this._filterLock=Math.max(0,this._filterLock-1),e&&0==this._filterLock&&this.applyFilters(t,n,r))},L.prototype.hasFilter=function(e){return e=this._filters[e],!!e&&0<e.length},L.prototype.addFilter=function(e,t){this._fireFilterAdded(e,t.text);var n=this._filters[e];return n||(this._filters[e]=n=[]),t=new yt.ColumnFilterRun(t),n.push(t),t},L.prototype.removeFilter=function(e,t){if(this._filtered&&this._filters[e]){this._fireFilterRemoved(e,t);for(var n=this._filters[e],r=n.length;r--;)if(n[r].model===t){n.splice(r,1),this.applyFilters(null,null);break}}},L.prototype.clearFilters=function(e){var t;this._filtered&&this._filters[e]&&(this._fireFilterCleared(e),(t=this._filters[e])&&0<t.length&&(t.splice(0,t.length),this._filters[e]=null,this.applyFilters(null,null)))},L.prototype.clearAllFilters=function(){this._filtered&&(this._fireFilterAllCleared(),this._filters={},this.applyFilters(null,null))},L.prototype.hasFilters=function(){for(var e in this._filters){e=this._filters[e];if(e&&0<e.length)return!0}return!1},L.prototype.$_prepareFilters=function(){var e,t=this.dataSource,n=t.fieldCount;for(e in this._filters)Number(e)>=n&&(this._filters[e]=null);if(this._filtered=this.hasFilters())for(var r in this._filters){var i=this._filters[r];if(i)for(var s=i.length;s--;)i[s].prepare(this._filterRuntime,t)}},L.prototype.applyFilters=function(e,t,n){if(n||this.$_prepareFilters(),0==this._filterLock){this.$_saveExpanded(this._rootItem),this.$_clearItems(),this.$_buildTree(!0,n);try{this._fireRefresh()}finally{this._fireFiltered(e,t)}}},L.prototype.getItemByRow=function(e){return e?this._itemMap[e.rowId]:null},L.prototype.getCheckedRows=function(){var e=[];return function t(e,n){if(e instanceof m)for(var r=0,i=e.count;r<i;r++){var s=e.getItem(r),o=void 0;s.checked&&(o=s.row)&&n.push(o),t(s,n)}}(this._rootItem,e),e},L.prototype.getCheckedRowIds=function(){var e=[];return function t(e,n){if(e instanceof m)for(var r=0,i=e.count;r<i;r++){var s=e.getItem(r),o=void 0;s.checked&&0<=(o=s.dataRow)&&n.push(o),t(s,n)}}(this._rootItem,e),e},L.prototype.resetCheckables=function(){this._checkableTag&&(this._checkableTag.clearRows(),this._fireRefresh())},L.prototype.applyCheckables=function(){this._checkableTag?this._checkableTag.setRows():r.clearCheckables(this),this._fireRefresh()},L.prototype.$_checkChildren=function(e,t,n){for(var r=0,i=e.count;r<i;r++){var s=e.getItem(r);!s||n&&!s.checkable||this._setCheckItem(s,t),s instanceof m&&this.$_checkChildren(s,t,n)}},L.prototype._clearChecked=function(){this.$_checkChildren(this._rootItem,!1,!1)},L.prototype.checkAll=function(e,t,n,r){t?C.prototype.checkAll.call(this,e,t,n,r,!1):(this.$_checkChildren(this._rootItem,e,n),r?this._fireItemAllChecked(e):this._fireRefreshClient())},L.prototype.setCheckFieldIndex=function(e){this._checkFieldIndex=e},L.prototype.setItemChecked=function(e,t){return-1<this._checkFieldIndex&&(e.setData(this._checkFieldIndex,t),!0)},L.prototype.getItemChecked=function(e,t){return 0<=this._checkFieldIndex?e.getData(this._checkFieldIndex):t},_dp(L,"dataSource",{get:function(){return this._ds},set:function(e){e!==this._ds&&(this.$_clearItems(),this.$_resetSummary(),this._ds&&(this._ds.removeTag(this._extents),this._ds.removeListener(this),this._ds.unregisterCommandListener(this)),this._ds=e,this._ds&&(this.$_buildTree(),this._ds.addTag(this._extents),this._ds.addListener(this,0),this._ds.registerCommandListener(this)),this._fireReset())}}),_dp(L,"itemCount",{get:function(){return this._visibleItems.count}}),_dp(L,"rowCount",{get:function(){return this._itemCount}}),_dp(L,"sorted",{get:function(){return this._sortFields&&0<this._sortFields.length}}),_dp(L,"movable",{get:function(){return!this.sorted}}),L.prototype._createRootItem=function(){var e=new E(this);return this._setExpanded(e,!0),e},L.prototype.getItem=function(e){return 0<=e&&e<this._visibleItems.count?this._visibleItems.getItem(e):null},L.prototype.getItems=function(e,t){throw new Error("Method not implemented.")},L.prototype.getItemOfRow=function(e,t){return this._itemMap[e]},L.prototype.$_collectItems=function(e,t){for(var n=0,r=e.count;n<r;n++){var i=e.getItem(n);i instanceof m&&(t.push(i),this.$_collectItems(i,t))}},L.prototype.getAllItems=function(){var e=[];return this.$_collectItems(this._rootItem,e),e},L.prototype.getJsonRows=function(){return this.getAllItems().map(function(e){var t=e.getRowObject();return t.__level=e.level,t})},L.prototype.getSum=function(e){return e=this.$_getSummary(e),e?e.sum:NaN},L.prototype.getMax=function(e){return e=this.$_getSummary(e),e?e.max:NaN},L.prototype.getMin=function(e){return e=this.$_getSummary(e),e?e.min:NaN},L.prototype.getAvg=function(e){return e=this.$_getSummary(e),e?e.avg:NaN},L.prototype.getVar=function(e){return e=this.$_getSummary(e),e?e.vars:NaN},L.prototype.getVarp=function(e){return e=this.$_getSummary(e),e?e.varsp:NaN},L.prototype.getStdev=function(e){return e=this.$_getSummary(e),e?Math.sqrt(e.vars):NaN},L.prototype.getStdevp=function(e){return e=this.$_getSummary(e),e?Math.sqrt(e.varsp):NaN},L.prototype.getDataCount=function(e){return e=this.$_getSummary(e),e?e.dataCount:0},L.prototype.getDataAvg=function(e){return e=this.$_getSummary(e),e?e.dataAvg:NaN},L.prototype.findItem=function(e,t,n,r,i){var s=this.dataSource;if(!s)return-1;if(this.itemCount<1)return-1;var o=Math.min(e.length,t.length);if(o<1)return-1;for(var u=!n||n.allFields,a=n&&n.caseSensitive,f=n&&n.partialMatch,l=null,h=[],d="function"==typeof (d=n.compareCallback)?d:p.Utils.compareTextValue,v=0;v<o;v++)h[v]=s.getField(e[v]).dataType;r=Math.max(0,r),i=Math.min(this._visibleItems.count-1,i);for(var m=r;m<=i;m++){var g=this._visibleItems.getItem(m);if(w=0<=g.dataRow)for(v=0;v<o;v++){var y=g.getData(e[v]);switch(h[v]){case c.ValueType.DATETIME:case c.ValueType.DATE:var b,w=t[v]instanceof Date?d(t[v],y,a,f):(l||(b=/[.]/.test(t[v])?"yyyy.MM.dd":/[/]/.test(t[v])?"yyyy/MM/dd":/[-]/.test(t[v])?"yyyy-MM-dd":"yyyyMMdd",l=new _.DateTimeConverter(b)),d(t[v],y&&l.getText(y),a,f));break;default:w=d(t[v],y,a,f)}if(w&&!u)return m;if(!w&&u)break}if(w)return m}return-1},L.prototype.findCell=function(e,t,n,r,i,s){var o=this.dataSource;if(!o)return null;if(this.itemCount<1)return null;for(var u=n&&n.caseSensitive,a=n&&n.partialMatch,f=o.fieldCount,l=e.length,h=null,d=[],v=0;v<f;v++)d[v]=o.getField(v).dataType;r=Math.max(0,r),i=Math.min(this._visibleItems.count-1,i),(s=Math.max(0,s))>=e.length&&(r++,s=0);for(var m="function"==typeof (m=n.compareCallback)?m:p.Utils.compareTextValue,g=r;g<=i;g++){var y=this._visibleItems.getItem(g),b=!1;if(0<=y.dataRow)for(v=r<g?0:s;v<l;v++){var w=e[v];if(0<=w&&w<f){var E=y.getData(w);switch(d[w]){case c.ValueType.DATETIME:case c.ValueType.DATE:var S,b=t instanceof Date?m(t,E,u,a):(h||(S=/[.]/.test(t)?"yyyy.MM.dd":/[/]/.test(t)?"yyyy/MM/dd":/[-]/.test(t)?"yyyy-MM-dd":"yyyyMMdd",h=new _.DateTimeConverter(S)),m(t,E&&h.getText(E),u,a));break;default:b=m(t,E,u,a)}if(b)return{itemIndex:g,fieldIndex:w,searchFieldIndex:v}}}}return null},L.prototype.$_internalAddItem=function(e,t,n){var r=m.getTemp(t,e),i=this.dataSource;if(!(this.hideDeleted&&d.isDeletedState(r.rowState)||i.isHiddenRow(t.rowId)))return r&&(null!=n?n:this.$_selectItem(e,r))?(r=new m(t),e.insert(t.index,r),this._itemCount++,this._itemMap[t.rowId]=r):void 0},L.prototype.$_internalRemoveItem=function(e){e&&(e.parent.remove(e),this._itemCount--,this._itemMap[e.row.rowId]=void 0)},L.prototype.$_internalRowStateChanged=function(e,t){var n;void 0===t&&(t=!0),e&&(this.hideDeleted&&d.isDeletedState(e.rowState)?(n=e.parent,this.$_internalRemoveItem(e),this.$_clearSummary(),n.expanded&&n.visible&&(this._visibleItems.remove(e),t=!0),t&&this._fireRefresh()):this._fireItemChanged(e))},L.prototype.$_selectField=function(e,t,n,r){for(var i=0,s=e.length;i<s;i++)if(e[i].select(this._filterRuntime,t,n,r))return!0;return!1},L.prototype.$_selectItem=function(e,t){if(!t)return!1;for(var n in this._filters){var r=this._filters[n];if(r&&!this.$_selectField(r,e,t,Number(n)))return!1}return!!t&&!0},L.prototype._setItem=function(e,t){this._visibleItems.setItem(e.index,t),this._resetItemIndex(e.index)},L.prototype.$_resetVisibleItems=function(){this._visibleItems._clearAndInit(this.fixedCount),this._visibleItems.expand(this._rootItem,!1),this._setExpanded(this._rootItem,!0),this._resetItemIndicies(0)},L.prototype.$_clearItems=function(){this._visibleItems.clear(),this._rootItem.clear(),this._itemMap=[],this._itemCount=0},L.prototype.$_buildItems=function(e,t,n){void 0===t&&(t=!1);for(var r=e.row,i=r.count,s=0;s<i;s++){var o=r.getChild(s),u=this.$_internalAddItem(e,o,n?n[o.rowId]:null);u&&(t&&u._restoreExpanded(),0<o.count&&this.$_buildItems(u,t,n))}},L.prototype.$_sortItem=function(e){var t=e.count;1<t&&this.$_sort(e,0,0,t-1);for(var n=0;n<t;n++){var r=e.getItem(n);r instanceof m&&this.$_sortItem(r)}},L.prototype.$_sort=function(e,t,n,r){var i=this._sortFields[t],s=this._sortDirections[t],o=this.dataSource,u=this._sortCases[t]==c.SortCase.INSENSITIVE;this._sorter.run(e,i,s,u,n,r,t+1==this._sortFields.length);var a=(o.getField(i).dataType==c.ValueType.TEXT&&u?o.equalTexts:o.equalValues).bind(o);if(t+1<this._sortFields.length){for(var f=n,l=f;f<r;)a(i,e.getItem(++f).row,e.getItem(f-1).row)||(this.$_sort(e,t+1,l,f-1),l=f);l<r&&this.$_sort(e,t+1,l,r)}},L.prototype.$_buildTree=function(e,t){void 0===e&&(e=!1);var n=this.dataSource;this._rootItem._dataRow=n.rootRow,this._itemMap[this._rootItem._dataRow.rowId]=this._rootItem,this.$_buildItems(this._rootItem,e,t),this.$_clearSummary();for(var r=n.fieldCount,i=this._sortFields,s=this._sortDirections,o=this._sortCases,u=i.length;u--;)(i[u]<0||i[u]>=r)&&(i.splice(u,1),s.splice(u,1),o.splice(u,1));this.sorted&&0<this._rootItem.count&&this.$_sortItem(this._rootItem),this.$_resetVisibleItems(),this._checkableTag&&this._checkableTag.setRows()},L.prototype.$_resetSummary=function(){this._summaryMap=[]},L.prototype.$_resetGroupSummary=function(){},L.prototype.$_clearSummary=function(){if(this._summaryMap)for(var e=this._summaryMap.length;e--;)this._summaryMap[e]&&this._summaryMap[e].clear()},L.prototype.$_getSummary=function(e){var t,n=this._summaryMap[e];return n||(t=this.dataSource)&&t.canSummarize(e)&&(n=new pt.FieldSummary(e),this._summaryMap[e]=n),n&&0==n.count&&0<this.itemCount&&this.$_summarize(n),n},L.prototype.$_summarize=function(e){var t=this.dataSource;if(t)if(this._filtered||this.hideDeleted||0<t.hiddenCount){for(var n=this._rootItem.getDescendants(!1),r=n.length,i=[],s=0;s<r;s++){var o=n[s];o instanceof m&&!t.isHiddenRow(o.rowId)&&i.push(o.row)}e.count=i.length,t.summarizeRange(e,i,this.summaryMode==c.SummaryMode.STATISTICAL)}else e.count=t.rowCount,t.summarize(e,this.summaryMode==c.SummaryMode.STATISTICAL)},L.prototype._fireItemChanged=function(e){this._eventLock<=0&&this.fireEvent(L.ITEM_CHANGED,e)},L.prototype._fireExpanding=function(e){return!(this._eventLock<=0)||this.fireConfirmEvent(L.EXPANDING,e)},L.prototype._fireExpanded=function(e){this._eventLock<=0&&this.fireEvent(L.EXPANDED,e)},L.prototype._fireCollapsing=function(e){return!(this._eventLock<=0)||this.fireConfirmEvent(L.COLLAPSING,e)},L.prototype._fireCollapsed=function(e){this._eventLock<=0&&this.fireEvent(L.COLLAPSED,e)},L.prototype._fireParentChanging=function(e,t,n){return!(this._eventLock<=0)||this.fireConfirmEvent(L.PARENT_CHANGING,e,t,n)},L.prototype._fireParentChanged=function(e,t,n){this._eventLock<=0&&this.fireEvent(L.PARENT_CHANGED,e,t,n)},L.prototype._refreshItems=function(){this.$_clearItems(),this.$_buildTree(),this._fireRefresh()},L.prototype._saveAndRefresh=function(e,t){void 0===t&&(t=!0),(e=void 0===e?!0:e)&&this.$_saveExpanded(this._rootItem);var n={};this.hasFilters()&&!function r(e,t){t[e.dataId]=!0,0<e.children.length&&e.children.forEach(function(e){r(e,t)})}(this._rootItem,n),this.$_clearItems(),this.$_buildTree(e,n),t&&this._fireRefresh()},L.prototype.onDataSourceCommandStackChanged=function(e,t,n){this._fireCommandStackChanged(t,n)},L.prototype.onTreeDataProviderDisposed=function(e){this.$_clearItems(),this.$_resetSummary(),this._fireReset(),this.dataSource=null},L.prototype.onTreeDataProviderReset=function(e){this.$_clearItems(),this.$_resetSummary(),this.$_buildTree(),this._fireReset()},L.prototype.onTreeDataProviderRefresh=function(e){this._refreshItems()},L.prototype.onTreeDataProviderRefreshClient=function(e){this._fireRefreshClient()},L.prototype.onDataProvderCleared=function(e){this._refreshItems()},L.prototype.onTreeDataProviderRowCountChanged=function(e,t){},L.prototype.onTreeDataProviderRowAdding=function(e,t,n){return!0},L.prototype.onTreeDataProviderRowAdded=function(e,t){var n,r=this._itemMap[t.parent.rowId];r&&((n=this.$_internalAddItem(r,t,!0))?(this.$_buildItems(n),this.$_clearSummary(),r.expanded?this._expandItem(r,!0,!1,0,!1):this._fireItemChanged(r)):this.$_resetVisibleItems()),this._checkableTag&&(this._checkableTag.addRow(t,!1),0<t.parent.level&&this._checkableTag.addRow(t.parent,!1)),this.$_needSort()&&this._saveAndRefresh()},L.prototype.onTreeDataProviderRowsAdded=function(e,t,n){var r,i=this._itemMap[t.rowId];if(i&&n&&0<(r=n.length)){for(var s=0;s<r;s++){var o=n[s],o=this.$_internalAddItem(i,o,!0);o&&this.$_buildItems(o)}this.$_clearSummary(),i.expanded?this._expandItem(i,!0,!1,0,!1):this._fireItemChanged(i),this._checkableTag&&(this._checkableTag.addRows(n),0<t.level&&this._checkableTag.addRow(t))}this.$_needSort()&&this._saveAndRefresh()},L.prototype.onTreeDataProviderRowRemoving=function(e,t){return!0},L.prototype.onTreeDataProviderRowRemoved=function(e,t){var n=this._itemMap[t.rowId];n&&(t=n.parent,this.$_internalRemoveItem(n),this.$_clearSummary(),t.expanded&&t.visible&&(this._visibleItems.remove(n),this._fireRefresh()))},L.prototype.onTreeDataProviderRowsRemoving=function(e,t){return!0},L.prototype.onTreeDataProviderRowsRemoved=function(e,t){for(var n=t.length,r=!1,i=0;i<n;i++){var s=t[i],o=this._itemMap[s.rowId];o&&(s=o.parent,this.$_internalRemoveItem(o),s.expanded&&s.visible&&(this._visibleItems.remove(o),r=!0))}this.$_clearSummary(),r&&this._fireRefresh()},L.prototype.onTreeDataProviderRowUpdating=function(e,t){return!0},L.prototype.onTreeDataProviderRowUpdated=function(e,t){var n;this.$_needSort()?this._saveAndRefresh():(n=this._itemMap[t.rowId],this.$_clearSummary(),this._fireItemUpdated(n)),this._checkableTag&&this._checkableTag.updateRow(t)},L.prototype.onTreeDataProviderRowsUpdating=function(e,t){return!0},L.prototype.onTreeDataProviderRowsUpdated=function(e,t){this.$_needSort()?this._saveAndRefresh():(this.$_clearSummary(),this._fireRefresh()),this._checkableTag&&this._checkableTag.updateRows(t)},L.prototype.onTreeDataProviderValueChanging=function(e,t,n){return!0},L.prototype.onTreeDataProviderValueChanged=function(e,t,n){var r;this.$_needSort()?this._saveAndRefresh():(r=this._itemMap[t.rowId],this.$_clearSummary(),this._fireItemUpdated(r)),this._checkableTag&&this._checkableTag.updateRow(t)},L.prototype.onTreeDataProviderIconIndexChanged=function(e,t){t=this._itemMap[t.rowId],t&&t.visible&&this._fireItemChanged(t)},L.prototype.onTreeDataProviderHasChildrenChanged=function(e,t){t=this._itemMap[t.rowId],t&&t.visible&&this._fireItemChanged(t)},L.prototype.onTreeDataProviderRowStateChanged=function(e,t,n){var r=this._itemMap[t.rowId];this.$_internalRowStateChanged(r,n),this._checkableTag&&this._checkableTag.updateRow(t),!r&&n&&this._saveAndRefresh()},L.prototype.onTreeDataProviderRowStatesChanged=function(e,t){var n=t.length,r=!1;if(1==n){var i=t[0],r=!(f=this._itemMap[i.rowId]);this.$_internalRowStateChanged(f),this._checkableTag&&this._checkableTag.updateRow(i),r&&this._saveAndRefresh()}else if(0<n){var s=!1;if(this.hideDeleted)for(var o=0,u=t.length;o<u;o++){var a,f=this._itemMap[t[o].rowId];r=r||!f,f&&d.isDeletedState(f.rowState)&&(a=f.parent,this.$_internalRemoveItem(f),a.expanded&&a.visible&&this._visibleItems.remove(f),s=!0)}this._checkableTag&&this._checkableTag.changeStates(t),s&&this.$_clearSummary(),r?this._saveAndRefresh():this._fireRefresh()}},L.prototype.onTreeDataProviderRowSiblingMoved=function(e,t,n){this.$_needSort()||(t=this._itemMap[t.rowId])&&(t.parent.moveChild(t.childIndex,n),this.$_resetVisibleItems(),this._fireRefresh())},L.prototype.onTreeDataProviderRowsSiblingMoved=function(e,t,n){var r;this.$_needSort()||(r=this._itemMap[t[0].rowId])&&(r.parent.moveChildren(r.childIndex,t.length,n),this.$_resetVisibleItems(),this._fireRefresh())},L.prototype.onTreeDataProviderRowParentChanged=function(e,t,n,r){t=this._itemMap[t.rowId],t&&(n=this._itemMap[n.rowId],this.$_needSort()&&(r=n?n.count():0),t.changeParent(n,r),this.$_resetVisibleItems(),this._fireRefresh())},L.prototype.onTreeDataProviderRowsParentChanged=function(e,t,n,r){if(this._itemMap[t[0].rowId]){var i=this._itemMap[n.rowId];this.$_needSort()&&(r=i?i.count():0);for(var s=0;s<t.length;s++){var o=t[s];this._itemMap[o.rowId].changeParent(i,r+s)}this.$_resetVisibleItems(),this._fireRefresh()}},L.prototype.onTreeDataProviderRowsHideChanged=function(e,t,n){if(n){for(var r=!1,i=0,s=t.length;i<s;i++){var o=t[i],u=this._itemMap[o];u&&(o=u.parent,this.$_internalRemoveItem(u),o.expanded&&o.visible&&this._visibleItems.remove(u),r=!0)}r&&this.$_clearSummary(),this._fireRefresh()}else this._saveAndRefresh()},L.prototype.onTreeDataProviderDataLoadComplated=function(){this._fireDataLoadComplated()},L.ITEM_CHANGED="onTreeItemProviderItemChanged",L.EXPANDING="onTreeItemProviderExpanding",L.EXPANDED="onTreeItemProviderExpanded",L.COLLAPSING="onTreeItemProviderCollapsing",L.COLLAPSED="onTreeItemProviderCollapsed",L.PARENT_CHANGING="onTreeItemProviderParentChanging",L.PARENT_CHANGED="onTreeItemProviderParentChanged",L);t.TreeItemProvider=k});t(Ot),Ot.TreeItemFooter,Ot.TreeItem,Ot.RootTreeItem,Ot.TreeItemProvider;var Mt=n(function(e,t){function i(e){var t=n.call(this)||this;return t._rs=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.prototype.getCount=function(e){return this._rs.itemCount},i.prototype.getSum=function(e){return this._rs.getSum(e)},i.prototype.getMax=function(e){return this._rs.getMax(e)},i.prototype.getMin=function(e){return this._rs.getMin(e)},i.prototype.getAvg=function(e){return this._rs.getAvg(e)},i.prototype.getVar=function(e){return this._rs.getVar(e)},i.prototype.getVarp=function(e){return this._rs.getVarp(e)},i.prototype.getStdev=function(e){return this._rs.getStdev(e)},i.prototype.getStdevp=function(e){return this._rs.getStdevp(e)},i.prototype.getDataCount=function(e){return this._rs.getDataCount(e)},i.prototype.getDataAvg=function(e){return this._rs.getDataAvg(e)},i);t.DefaultSummarizer=r});t(Mt),Mt.DefaultSummarizer;var _t=n(function(e,t){function i(e,t,r){var i=n.call(this,t&&t.row)||this;return i._values=[],i._changeValues=[],i._started=!1,i._checkDiff=!1,i._strictDiff=!1,i._invalidFields=[],i._rs=e,i._target=t,i._state=r,i}function u(e){return e=s.call(this,null,e)||this,e._observers=[],e._appending=!1,e._insertAfter=!1,e._insertIndex=-1,e._rs=new Ot.TreeItemProvider,e.source=e._rs,e._summarizer=new Mt.DefaultSummarizer(e._rs),e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Ot.TreeItem,l.__extends(i,n),i.prototype.dispose=function(){this._values=null,n.prototype.dispose.call(this)},_dp(i,"values",{get:function(){return this._values.concat()},set:function(e){var t=this.dataSource,n=t.fieldCount;if(e)for(var n=Math.min(n,e.length),r=0;r<n;r++){var i=t.getField(r),s=this._values[r],o=i.readValue(e[r]);this._values[r]=o,this._started&&parent&&!i.equalValues(s,o)&&this._rs._editItemCellUpdated(this,r,s,o)}else this._values=[]}}),_dp(i,"invalidFields",{get:function(){return this._invalidFields}}),i.prototype.beginEdit=function(e,t){this._started=!0,this._checkDiff=e,this._strictDiff=t},i.prototype.setValue=function(e,t){var n=this.dataSource;if(e<0&&e>=n.fieldCount)throw new RangeError("field index is out of bounds: "+e);var r=n.getField(e),n=this._values[e];t=r.readValue(t),this._values[e]=t,this._started&&this.parent&&!r.equalValues(n,t)&&this._rs._editItemCellUpdated(this,e,n,t)},_dp(i,"dataSource",{get:function(){return this._rs.dataSource}}),_dp(i,"itemState",{get:function(){return this._state}}),_dp(i,"rowState",{get:function(){return this._target?this._target.rowState:d.RowState.NONE}}),_dp(i,"expanded",{get:function(){return!!this._target&&this._target.expanded}}),i.prototype.getData=function(e){var t=this.dataSource;if((e=t.getFieldIndex(e))<0||e>=t.fieldCount)throw new RangeError("field index is out of bounds: "+e);return this._values[e]},i.prototype.setData=function(e,t){var n=this.dataSource;if((e=n.getFieldIndex(e))<0||e>=n.fieldCount)throw new RangeError("field index is out of bounds: "+e);var r=n.getField(e),i=this._values[e];t=r.readValue(t),n=!this._checkDiff,(n=n||(this._strictDiff?!r.equalValues(i,t):!r.sameValues(i,t)))&&(this._values[e]=t,this._changeValues[e]=!0,this.parent&&(this._rs._editItemCellUpdated(this,e,i,t),this._rs._editItemCellEdited(this,e)))},i.prototype.getRowData=function(){return this._values.concat()},i.prototype.getRowObject=function(){var e=this.dataSource;if(e){for(var t={},n=0,r=e.fieldCount;n<r;n++)t[e.getOrgFieldName(n)]=this._values[n];return t}return null},i.prototype.isEdited=function(e){return this._changeValues[e]},_dp(i,"provider",{get:function(){return this._rs&&this._rs.source}}),i);t.TreeEditItem=r;var s,o=(s=mt.EditableItemProvider,l.__extends(u,s),u.prototype._doDispose=function(){this._rs=null,this._summarizer=null,s.prototype._doDispose.call(this)},_dp(u,"summarizer",{get:function(){return this._summarizer}}),u.prototype.getLevels=function(e){return this._rs.getLevels(e)},u.prototype.setLabelComparer=function(e){this._rs.labelComparer=e},u.prototype.orderBy=function(e,t,n){this._rs.orderBy(e,t,n)},u.prototype.getSortFields=function(){return this._rs.getSortFields()},u.prototype.getSortDirections=function(){return this._rs.getSortDirections()},u.prototype.getSortCases=function(){return this._rs.getSortCases()},_dp(u,"labelComparer",{get:function(){return this._rs.labelComparer},set:function(e){this._rs.labelComparer=e}}),u.prototype.isFiltered=function(e){return null!=e?this._rs.hasFilter(e):this._rs.hasFilters()},u.prototype.addFilter=function(e,t){this._rs.addFilter(e,t)},u.prototype.removeFilter=function(e,t){this._rs.removeFilter(e,t)},u.prototype.clearFilters=function(e){this._rs.clearFilters(e)},u.prototype.clearAllFilters=function(){this._rs.clearAllFilters()},u.prototype.beginFiltering=function(){this._rs.beginFiltering()},u.prototype.endFiltering=function(e,t){this._rs.endFiltering(!0,e,t)},_dp(u,"includeParentItem",{set:function(e){this._rs.includeParentItem=e}}),u.prototype.expand=function(e,t,n,r){this._rs.expand(e,t,n,r)},u.prototype.collapse=function(e,t){this._rs.collapse(e,t)},u.prototype.expandAll=function(e){this._rs.expandAll(e)},u.prototype.collapseAll=function(){this._rs.collapseAll()},u.prototype.getCheckedRows=function(){return this._rs.getCheckedRows()},u.prototype.getCheckedRowIds=function(){return this._rs.getCheckedRowIds()},_dp(u,"checkableExpression",{set:function(e){this._rs.checkableExpression=e}}),_dp(u,"checkableCallback",{set:function(e){this._rs.checkableCallback=e}}),u.prototype.resetCheckables=function(){this._rs.resetCheckables()},u.prototype.applyCheckables=function(){this._rs.applyCheckables()},u.prototype.getAllItems=function(){return this._rs.getAllItems()},u.prototype.getItem=function(e){return this._rs.getItem(e)},u.prototype.getItemOfRow=function(e){return this._rs.getItemOfRow(e)},u.prototype.findItem=function(e,t,n,r,i){return this._rs.findItem(e,t,n,r,i)},u.prototype.findCell=function(e,t,n,r,i,s){return this._rs.findCell(e,t,n,r,i,s)},u.prototype.checkItem=function(e,t,n,r){this._rs.checkItem(e,t,n,r)},u.prototype.checkAll=function(e,t,n,r){this._rs.checkAll(e,t,n,r)},u.prototype.setCheckFieldIndex=function(e){this._rs.setCheckFieldIndex(e)},u.prototype.getJsonRows=function(){return this._rs.getJsonRows()},_dp(u,"summaryMode",{get:function(){return this._rs.summaryMode},set:function(e){this._rs.summaryMode=e}}),_dp(u,"groupSummaryMode",{set:function(e){this._rs.groupSummaryMode=e}}),_dp(u,"hideDeleted",{get:function(){return this._rs.hideDeleted},set:function(e){this._rs.hideDeleted=e}}),_dp(u,"sortMode",{get:function(){return this._rs.sortMode},set:function(e){this._rs.sortMode=e}}),_dp(u,"itemCount",{get:function(){return this._rs.itemCount}}),_dp(u,"rowCount",{get:function(){return this._rs.rowCount}}),_dp(u,"sorted",{get:function(){return this._rs.sorted}}),_dp(u,"movable",{get:function(){return this._rs.movable}}),u.prototype.getItems=function(e,t){throw new Error("Method not implemented.")},u.prototype.canAppend=function(){return!1},u.prototype.canInsert=function(e){return!!e},u.prototype.canDelete=function(e){return!!e},u.prototype.$_replaceItem=function(e,t){e.parent.setItem(e,t),this._rs._setItem(e,t)},u.prototype._doBeginUpdate=function(e){return this._editingItem=this._editItem=this._createEditItem(e,dt.ItemState.UPDATING,null),this.$_replaceItem(e,this._editItem),this._editItem},u.prototype._doBeginAppend=function(e){return this._editingItem=this._editItem=this._createEditItem(null,dt.ItemState.APPENDING,e),this._editItem},u.prototype._doBeginInsert=function(e,t,n,r){return void 0===n&&(n=!1),(r=void 0===r?!1:r)?(this._appending=!0,e.setExpanded(!0,!1,!1),this._editingItem=this._editItem=this._createEditItem(null,dt.ItemState.INSERTING,t),this._rs.appendItem(e,this._editItem)):(r=e.parent,this._appending=!1,this._insertAfter=n,this._insertIndex=r.indexOf(e),this._editingItem=this._editItem=this._createEditItem(e,dt.ItemState.INSERTING,t),this._rs.insertItem(r,this._editItem,this._insertIndex,this._insertAfter)),this._editItem},u.prototype._doCompleteUpdate=function(e){var t=!1;if(this.dataSource){this.$_replaceItem(this._editItem,e);var n=this._editItem.row;try{t=n.update(this._editItem.values,!1)}catch(t){throw this.$_replaceItem(e,this._editItem),t}t||this.$_replaceItem(e,this._editItem)}return t},u.prototype._doCompleteInsert=function(e){var t=this.dataSource,n=this._editItem,r=!1;if(t){var i=n.parent,s=i.row,o=t.createRow(n.values,-1,!1),t=n.parent.indexOf(n);this._rs.removeItem(n);try{r=this.isAppending?s.addChild(o,!1):s.insertChild(t,o,!1)}catch(e){throw this._appending?this._rs.appendItem(i,n):this._rs.insertItem(i,n,this._insertIndex,this._insertAfter),e}r?(o=i.itemOfRow(o.rowId),n.setCheckable(o.checkable),this._copyExtents(n,o),n.heights&&(o.heights=n.heights.slice())):this._appending?this._rs.appendItem(i,n):this._rs.insertItem(i,n,this._insertIndex,this._insertAfter)}return r},u.prototype._doCancelEdit=function(e,t){e==dt.ItemState.UPDATING?(this.$_replaceItem(this._editItem,t),this._copyExtents(this._editItem,t)):e==dt.ItemState.INSERTING&&this._editItem.parent&&this._rs.removeItem(this._editItem),s.prototype._doCancelEdit.call(this,e,t)},u.prototype._doCommitEdit=function(e,t){return e==dt.ItemState.UPDATING||dt.ItemState.INSERTING,s.prototype._doCommitEdit.call(this,e,t)},u.prototype.remove=function(e){!e||(e=e.row)&&e.parent.removeChild(e)},u.prototype.getRemovableRows=function(e){if(0<e.length){for(var t=[],n=0,r=e.length;n<r;n++){var i=this._rs.getItem(e[n]);t.push(i.dataId)}return t}},u.prototype.removeRows=function(e){e&&this.dataSource.removeRows(e)},u.prototype.setDataSource=function(e){this._rs.dataSource=e},_dp(u,"rootItem",{get:function(){return this._rs._rootItem}}),u.prototype._createEditItem=function(e,t,n){this._editingItem=null;var i=this.dataSource;if(!i)return null;var s=i.fieldCount;switch(t){case dt.ItemState.UPDATING:for(var o=this._editingItem=new r(this,e,t),u=0;u<s;u++)o.setValue(u,e.getData(u));this._copyExtents(e,o),e.heights&&(o.heights=e.heights.slice());break;case dt.ItemState.INSERTING:case dt.ItemState.APPENDING:if((o=this._editingItem=new r(this,null,t))._setExtents(0),n)for(u=0;u<s;u++)n.length>u&&o.setValue(u,n[u])}return this._editingItem},u.prototype.onItemProviderFilterAdd=function(e,t,n){},u.prototype.onItemProviderFilterRemove=function(e,t,n){},u.prototype.onItemProviderFilterClear=function(e,t){},u.prototype.onItemProviderFilterClearAll=function(e){},u.prototype.onItemProviderFilterAdded=function(e,t,n){this._fireFilterAdded(t,n)},u.prototype.onItemProviderFilterRemoved=function(e,t,n){this._fireFilterRemoved(t,n)},u.prototype.onItemProviderFilterCleared=function(e,t){this._fireFilterCleared(t)},u.prototype.onItemProviderFilterAllCleared=function(e){this._fireFilterAllCleared()},u.prototype.onItemProviderFiltered=function(e,t,n){this._fireFiltered(t,n)},u.prototype.onItemProviderSort=function(e,t,n){this._fireSort(t,n,null)},u.prototype.onItemProviderSorted=function(e){this._fireSorted()},u.prototype.onItemProviderDataLoadComplated=function(){this._fireDataLoadComplated()},u.prototype.onTreeItemProviderItemChanged=function(e,t){this._eventLock<=0&&this.fireEvent(Ot.TreeItemProvider.ITEM_CHANGED,t)},u.prototype.onTreeItemProviderExpanding=function(e,t){return!(this._eventLock<=0)||this.fireConfirmEvent(Ot.TreeItemProvider.EXPANDING,t)},u.prototype.onTreeItemProviderExpanded=function(e,t){this._eventLock<=0&&this.fireEvent(Ot.TreeItemProvider.EXPANDED,t)},u.prototype.onTreeItemProviderCollapsing=function(e,t){return!(this._eventLock<=0)||this.fireConfirmEvent(Ot.TreeItemProvider.COLLAPSING,t)},u.prototype.onTreeItemProviderCollapsed=function(e,t){this._eventLock<=0&&this.fireEvent(Ot.TreeItemProvider.COLLAPSED,t)},u);t.TreeGridItemProvider=o});t(_t),_t.TreeEditItem,_t.TreeGridItemProvider;var Dt=n(function(e,t){function i(e){return e=n.call(this,e)||this,Object.setPrototypeOf(e,i.prototype),e}function u(e,t,n,r){return t=s.call(this,t)||this,Object.setPrototypeOf(t,u.prototype),t.level=e,t.column=n,t.userMessage=r,t}function h(e){var t=a.call(this)||this;return t._active=!0,t._mode=c.ValidationMode.ALWAYS,t._level=c.ValidationLevel.ERROR,t._name=e,t}function v(e){var t=d.call(this)||this;return t._items=[],t._isColumn=e,t}function g(){var e=m.call(this)||this;return e._item=null,e._dataSource=null,e._fieldCount=0,e}function E(){return w.call(this)||this}function x(e){var t=S.call(this)||this;return t._cellList={},t._owner=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Error,l.__extends(i,n),i);t.AbortError=r;var s,o=(s=r,l.__extends(u,s),u.prototype.toString=function(){return"Validation failed["+this.level.toUpperCase()+"]: "+this.message},u);t.ValidationError=o;var a,f=(a=y.Base,l.__extends(h,a),_dp(h,"name",{get:function(){return this._name}}),_dp(h,"active",{get:function(){return this._active},set:function(e){this._active=e}}),_dp(h,"mode",{get:function(){return this._mode},set:function(e){this._mode=e}}),_dp(h,"level",{get:function(){return this._level},set:function(e){this._level=e}}),_dp(h,"criteria",{get:function(){return this._criteria},set:function(e){e!=this._criteria&&(this._criteria=e,this._exprNode=e?b.ExpressionParser.Default.parse(e,h.CAPITAL_INDEXERS):null)}}),_dp(h,"message",{get:function(){return this._message},set:function(e){this._message=e}}),_dp(h,"description",{get:function(){return this._description},set:function(e){this._description=e}}),h.prototype.validate=function(e){if(this._exprNode&&!this._exprNode.evaluate(e))throw e=this._message||this._description||this._name||this._criteria,new o(this._level,e,null,this._message)},h.prototype.doAssignSimple=function(e){if("string"==typeof e)return this.criteria=e,!0},h.CAPITAL_INDEXERS=["value","values"],h);t.EditValidation=f;var d,r=(d=y.Base,l.__extends(v,d),v.prototype._doDispose=function(){this._items=null,d.prototype._doDispose.call(this)},_dp(v,"count",{get:function(){return this._items.length}}),_dp(v,"items",{get:function(){return this._items.slice()},set:function(e){this.assignFrom(e)}}),v.prototype.clear=function(){this._items=[]},v.prototype.addAll=function(e){if(e&&0<e.length)for(var t=0,n=e.length;t<n;t++)this._items.push(e[t])},v.prototype.validate=function(e,t,n,r){for(var i=0;i<this._items.length;i++){var s=this._items[i];if(s.active&&(s.mode==e||s.mode==c.ValidationMode.ALWAYS))try{s.validate(t)}catch(e){if(!(n=n&&!this._isColumn)||c.ValidationLevel_compare(s.level,r)<0)throw e instanceof o?(e.level=s.level,e):new o(s.level,e)}}},v.prototype.assignFrom=function(e){if(e!==this&&(this.clear(),e))for(var t=0,n=(e=p.Utils.isArray(e)?e:[e]).length;t<n;t++){var r=new f;r.assignFrom(e[t]),this._items.push(r)}},v);t.EditValidationCollection=r;var m,r=(m=b.ExpressionRuntime,l.__extends(g,m),g.prototype._doDispose=function(){this._item=null,this._dataSource=null,m.prototype._doDispose.call(this)},_dp(g,"item",{get:function(){return this._item},set:function(e){this._item=e,this._dataSource=this._item.dataSource,this._fieldCount=this._dataSource?this._dataSource.fieldCount:0}}),g.prototype.isIdentifier=function(e){return e=e.toLowerCase(),g.IDENTS.hasOwnProperty(e)?g.IDENTS[e]:m.prototype.isIdentifier.call(this,e)},g.prototype.evaluateIdentifier=function(e){switch(e){case g.ID_ROW:return this._item.index;case g.ID_DATAROW:return this._item.dataRow;case g.ID_CHECKED:return this._item.checked}throw new b.ExpressionEvaluationError("Invalid identifier key: "+e)},g.prototype.evaluateIndexerI=function(e,t){if(t<0||t>=this._fieldCount)throw new b.ExpressionEvaluationError("Data field index out of bounds:"+t);switch(e){case g.ID_VALUE:case g.ID_VALUES:return this._item.getData(t)}throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e)},g.prototype.evaluateIndexerS=function(e,t,n){var r=n?this._dataSource.getFieldIndexC(t):this._dataSource.getFieldIndex(t);if(r<0||r>=this._fieldCount)throw new b.ExpressionEvaluationError("Data field is not exists:"+t);switch(e){case g.ID_VALUE:case g.ID_VALUES:return this._item.getData(r)}throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e)},g.IDENTS={row:g.ID_ROW=0,datarow:g.ID_DATAROW=1,checked:g.ID_CHECKED=2,value:g.ID_VALUE=3,values:g.ID_VALUES=4},g);t.DataRowValidationRuntime=r;var w,r=(w=b.ExpressionRuntime,l.__extends(E,w),E.prototype._doDispose=function(){this._index=null,this._dataSource=null,w.prototype._doDispose.call(this)},E.prototype.setIndex=function(e){this._index=e,this._value=this._index.item.getData(this._index.dataColumn.dataIndex),this._dataSource=this._index.item.dataSource},E.prototype.isIdentifier=function(e){return e=e.toLowerCase(),E.IDENTS.hasOwnProperty(e)?E.IDENTS[e]:w.prototype.isIdentifier.call(this,e)},E.prototype.evaluateIdentifier=function(e){switch(e){case E.ID_VALUE:return this._value;case E.ID_ROW:return this._index.itemIndex;case E.ID_DATAROW:return this._index.item.dataRow;case E.ID_INDEX:return this._index.column.index;case E.ID_FIELD:return this._index.dataColumn.dataIndex;case E.ID_CHECKED:var t=this._index.item;return!!t&&t.checked;case E.ID_TAG:return this._index.column.tag;case E.ID_BASE:return t=this._index.dataColumn.baseIndex,0<=t?this._index.item.getData(t):void 0}throw new b.ExpressionEvaluationError("Invalid identifier key: "+e)},E.prototype.evaluateIndexerI=function(e,t){var n=this._dataSource.fieldCount;if(t<0||n<=t)throw new b.ExpressionEvaluationError("Data field index out of bounds:"+t);switch(e){case E.ID_VALUE:case E.ID_VALUES:return this._index.item.getData(t)}throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e)},E.prototype.evaluateIndexerS=function(e,t,n){var r=n?this._dataSource.getFieldIndexC(t):this._dataSource.getFieldIndex(t),n=this._dataSource.fieldCount;if(r<0||n<=r)throw new b.ExpressionEvaluationError("Data field is not exists:"+t);switch(e){case E.ID_VALUE:case E.ID_VALUES:return this._index.item.getData(r)}throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e)},E.IDENTS={value:E.ID_VALUE=0,row:E.ID_ROW=1,datarow:E.ID_DATAROW=2,index:E.ID_INDEX=3,field:E.ID_FIELD=4,checked:E.ID_CHECKED=5,tag:E.ID_TAG=6,base:E.ID_BASE=7,values:E.ID_VALUES=8},E);t.DataCellValidationRuntime=r;var S,r=(S=y.Base,l.__extends(x,S),_dp(x,"owner",{get:function(){return this._owner}}),_dp(x,"cellList",{get:function(){return this._cellList}}),x.prototype.validateCell=function(e,t,n){this.$_validateCell(e,t,!0,this._owner.editOptions.commitLevel,n)},x.prototype.validateRow=function(e,t,n,r){var i=this._owner.editOptions.commitLevel;if(!n)for(var s=this._owner.getDataColumns(),u=0,a=s.length;u<a;u++){var f=s[u],f=It.CellIndex.temp(this._owner,e.index,f);try{this.$_validateCell(f,t,!0,i,r)}catch(e){if(!(e instanceof o))throw e;if(c.ValidationLevel_compare(e.level,i)<0)throw e;r||this.addInvalidateCell(f,e)}}var l=this._owner.validations;l&&0<l.count&&((n=this._owner.rowValidationRuntime).item=e,l.validate(t?c.ValidationMode.INSERT:c.ValidationMode.UPDATE,n,!0,i)),this.owner._fireValidateRow(e,t,e.getRowObject())},x.prototype.clearInvalidCells=function(e){this.$_clearInvalidateList(e)},x.prototype.clearInvalidCell=function(e){this.$_clearInvalidateCell(e)},x.prototype.getError=function(e){return e.item?(this._cellList[dt.ItemState_isEditing(e.item.itemState)?-1:e.dataId]||{})[e.dataField]:null},x.prototype.cloneError=function(e,t){var n=this._cellList;n[e]&&(n[t]=JSON.parse(JSON.stringify(n[e])))},x.prototype.addInvalidateCell=function(e,t){this.$_addInvalidateCell(e,t)},x.prototype.getInvalidCells=function(){var e,t=[],n=this._cellList;for(e in n){var r,i=n[e];for(r in i){var s=i[r];t.push({column:s.column,dataRow:s.dataRow,message:s.message,level:s.level})}}return 0<t.length?t:null},x.prototype.validateCells=function(e,t){var n=this._owner,r=n.getDataColumns(),i=[];if(e=p.Utils.makeArray(e))for(var s=0,o=e.length;s<o;s++)(u=n.getItem(e[s]))&&u.isDataRow&&(delete this._cellList[u.dataId],i.push(u));else{if(t)for(s=0,o=n.itemCount;s<o;s++)(u=n.getItem(s))&&u.isDataRow&&(delete this._cellList[u.dataId],i.push(u));else i=n.getAllItems();this._cellList={}}for(var u,s=0,a=i.length;s<a;s++)if((u=i[s]).isDataRow)for(var f=0,o=r.length;f<o;f++){var l=r[f],l=(l.dataIndex,It.DummyCellIndex.tempItem(n,u,l));try{this.$_validateCell(l,!1,!1,c.ValidationLevel.IGNORE,!1)}catch(e){}}return n.refreshView(),this.getInvalidCells()},x.prototype.clearInvalidateList=function(){this.$_clearInvalidateList()},x.prototype.checkRowIds=function(){var e,t=this.owner.dataSource;for(e in this._cellList){var n=parseInt(e);t.getDataRow(n)<0&&delete this._cellList[n]}},x.prototype.$_validateCell=function(e,t,n,r,i){var s=e.dataColumn;if(s){var u=this.owner.editOptions.validateOnlyEditColumn,a=!0;if((e.item instanceof mt.EditItem||e.item instanceof _t.TreeEditItem)&&(a=e.item.isEdited(s.dataIndex)),!u||a||s.required)try{var f=e.item.getData(s.dataIndex);if(s.required){var l=s.grid,h=l&&l.dataSource&&l.dataSource.getField(s.dataIndex);if(h&&h.isEmpty(f)){var p=s.requiredLevel||c.ValidationLevel.ERROR,d=s.requiredMessage||"Value is required: "+s.fieldName;throw new o(p,d,s,s.requiredMessage)}}var v,m=s.validations;m&&0<m.count&&((v=this._owner.columnValidationRuntime).setIndex(e),m.validate(t?c.ValidationMode.INSERT:c.ValidationMode.UPDATE,v,n,r)),this.owner._fireValidateCell(e,t,e.item.getData(e.dataField)),i||this.$_clearInvalidateCell(e)}catch(t){throw t instanceof o&&(t.column=s,i||this.$_addInvalidateCell(e,t)),t}}},x.prototype.$_addInvalidateCell=function(e,t){var n,r=dt.ItemState_isEditing(e.item.itemState)?-1:e.dataId,i=e.dataColumn&&e.dataColumn.dataIndex;null==r||i<=-1||(((n=this._cellList)[r]=n[r]||{})[i]={dataRow:e.dataRow,message:t.message,userMessage:t.userMessage,level:t.level,column:e.dataColumn.name})},x.prototype.$_clearInvalidateCell=function(e){var t=dt.ItemState_isEditing(e.item.itemState)?-1:e.dataId,e=e.dataField,t=this._cellList[t];t&&t[e]&&delete t[e]},x.prototype.$_clearInvalidateList=function(e){null!=e?delete this._cellList[e]:this._cellList={},this._owner.refreshView()},x);t.ValidationManager=r});t(Dt),Dt.AbortError,Dt.ValidationError,Dt.EditValidation,Dt.EditValidationCollection,Dt.DataRowValidationRuntime,Dt.DataCellValidationRuntime,Dt.ValidationManager;var Pt=n(function(e,t){function i(e){this._pattern=n,this._replace="$1",this.$_parse(this._format=e)}Object.defineProperty(t,"__esModule",{value:!0});var n=/(.*)/,r=(i.getFormatter=function(e){var t=i.Formatters[e];return t||(i.Formatters[e]=t=new i(e)),t},_dp(i,"format",{get:function(){return this._format}}),i.prototype.getText=function(e){return e&&e.replace(this._pattern,this._replace)},i.prototype.$_parse=function(e){var t,n;!e||1<(t=e.trim().split(p.Utils.colonreg)).length&&(n=t[0].trim(),e=t[1].trim(),n&&e&&(n='"'==n.charAt(0)?n.substr(1,n.length-2):n)&&(e='"'==e.charAt(0)?n.substr(1,e.length-2):e)&&(this._pattern=new RegExp(n,t[2]||""),this._replace=e))},i.Formatters={},i);t.TextFormatter=r});t(Pt),Pt.TextFormatter;var Ht=n(function(e,t){function i(){return n.call(this)||this}function u(e,t){return t=s.call(this,t)||this,t._level=0,t._level=e,t}function h(e){var t=a.call(this)||this;return t._fixedCount=0,t._items=[],t._list=[],t._rowCount=NaN,t._rs=e,t}function g(e,t){return t=d.call(this,e,t)||this,t._expandedAdornments=c.RowGroupAdornments.BOTH,t._collapsedAdornments=c.RowGroupAdornments.HEADER,t._indentVisible=!0,t._expandWhenGrouping=!1,t._mergeMode=!1,t._summaryMode=c.SummaryMode.AGGREGATE,t._groupSorting=!0,t._grouped=!1,t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=dt.GroupFooter,l.__extends(i,n),i.prototype.getShadowRow=function(){var e=this.parent.firstDataItem;return e?e.dataRow:-1},i);t.MergedGroupFooter=r;var s,o=(s=dt.GroupItemImpl,l.__extends(u,s),_dp(u,"groupLevel",{get:function(){return this._level}}),u.prototype.getShadowRow=function(){var e=this.firstDataItem;return e?e.dataRow:-1},_dp(u,"merged",{get:function(){return!0}}),u);t.MergedGroupHeader=o;var a,f=(a=y.Base,l.__extends(h,a),h.prototype._doDispose=function(){a.prototype._doDispose.call(this)},_dp(h,"provider",{get:function(){return this._rs}}),_dp(h,"count",{get:function(){return this._items.length}}),_dp(h,"fixedCount",{get:function(){return this._fixedCount}}),_dp(h,"items",{get:function(){return this._items.slice()}}),_dp(h,"rowCount",{get:function(){if(isNaN(this._rowCount)){for(var e=this._items,t=0,n=e.length-1;0<=n;n--)e[n]instanceof dt.GridRow&&t++;this._rowCount=t}return this._rowCount}}),h.prototype.getItem=function(e){return this._items[e]},h.prototype.clear=function(e){for(var t=this._rs,n=0,r=(e=(e=void 0===e?null:e)||this._items).length;n<r;n++){var i=e[n];i._parent=t._rootItem,i._index=-1,i instanceof dt.GroupItemImpl&&i._children&&this.clear(i._children)}e.length=0,this.$_changed()},h.prototype.expand=function(e,t,n,r){return this.$_expandItem(e,t,n,r),this.$_changed(),!0},h.prototype.collapse=function(e,t){var n,i=this._rs,s=this._items;if(e._expanded=!1,i.mergeMode){if(0<=(f=e.index)?(s.splice(f,1),e._index=-1):(f=this.$_firstIndex(e,i.expandedAdornments==c.RowGroupAdornments.SUMMARY,!0))<0&&(f=e.firstItem.index),0<=f)for(;f<s.length;){if(!(u=s[f]).isDescendantOf(e))break;s.splice(f,1),u._index=-1,t&&(u instanceof dt.GroupItem||u instanceof r)&&(a=u instanceof dt.GroupItem?u:u instanceof r&&u.parent._expanded?u.parent:null)&&(a._expanded=!1)}switch(h=e.footerCount,i.collapsedAdornments){case c.RowGroupAdornments.BOTH:e._index=f,s.splice(f++,0,e);for(var o=0;o<h;o++)s.splice(f+o,0,n=e.getFooter(o)),n._index=f+o;break;case c.RowGroupAdornments.FOOTER:case c.RowGroupAdornments.SUMMARY:if(h=e.footerCount)for(o=0;o<h;o++)s.splice(f+o,0,n=e.getFooter(o)),n._index=f+o;else if(h=e.allFooterCount)for(o=0;o<h;o++)s.splice(f+o,0,n=e._allFooters[o]),n._index=f+o;break;case c.RowGroupAdornments.HEADER:default:e._index=f,s.splice(f,0,e)}}else{var u,a,f=e.index;if(h=e.footerCount,0<=f)s.splice(f,1),e._index=-1;else if(f=this.$_firstIndex(e,i.expandedAdornments==c.RowGroupAdornments.SUMMARY,!1),e.footer)for(var l=e.footer.index,o=0;o<h;o++)s[l]._index=-1,s.splice(l,1);else for(var l=e._allFooters[0].index,h=e.allFooterCount,o=0;o<h;o++)s[l]._index=-1,s.splice(l,1);for(;f<s.length;){if(!(u=s[f]).isDescendantOf(e))break;s.splice(f,1),u._index=-1,t&&(u instanceof dt.GroupItem||u instanceof dt.GroupFooter)&&(a=u instanceof dt.GroupItem?u:u instanceof dt.GroupFooter&&u.parent._expanded?u.parent:null)&&(a._expanded=!1)}switch(i.collapsedAdornments){case c.RowGroupAdornments.BOTH:e._index=f,s.splice(f++,0,e),h=e.footerCount;for(o=0;o<h;o++)(n=e.getFooter(o))._index=f+o,n._expandable=!1,s.splice(f+o,0,n);break;case c.RowGroupAdornments.FOOTER:case c.RowGroupAdornments.SUMMARY:if(h=e.footerCount)for(o=0;o<h;o++)(n=e.getFooter(o))._index=f+o,n._expandable=0===o,s.splice(f+o,0,n);else for(o=0;o<e.allFooterCount;o++)(n=e._allFooters[o])._index=f+o,n._expandable=0===o,s.splice(f+o,0,n);break;case c.RowGroupAdornments.HEADER:default:e._index=f,s.splice(f,0,e)}}return this.$_changed(),!0},h.prototype.getNext=function(e){return null!=e&&e.visible&&e.index<this.count-1?this._items[e.index+1]:null},h.prototype.getPrior=function(e){return null!=e&&e.visible&&0<e.index?this._items[e.index-1]:null},h.prototype.$_changed=function(){this._rowCount=NaN},h.prototype.$_collectChildren=function(e,t,n,r,i){var s,o=this._rs,u=o.expandedAdornments,a=o.collapsedAdornments;if(r&&e&&e._setExpanded(!0),o.mergeMode){if(!(e instanceof vt.RootItem))if(u==c.RowGroupAdornments.HEADER||u==c.RowGroupAdornments.BOTH)t.push(e);else if(u==c.RowGroupAdornments.SUMMARY)for(var f=0,l=e.footerCount;f<l;f++)s=e.getFooter(f),t.push(s);for(var h=0,p=e.count;h<p;h++)if((g=e.getItem(h))instanceof dt.GroupItem){var d=g;if(n&&(!i||d.level<=i)||d.expanded)this.$_collectChildren(d,t,n,r,i);else{var v=d.footerCount;switch(a){case c.RowGroupAdornments.BOTH:t.push(d);for(f=0;f<v;f++)s=d.getFooter(f),t.push(s);break;case c.RowGroupAdornments.SUMMARY:case c.RowGroupAdornments.FOOTER:if(v)for(f=0;f<v;f++)s=d.getFooter(f),t.push(s);else{v=d.allFooterCount;for(f=0;f<d.allFooterCount;f++)s=d._allFooters[f],t.push(s)}break;case c.RowGroupAdornments.HEADER:default:t.push(d)}}}else e.isFooter(g)||t.push(g);if(!(e instanceof vt.RootItem)&&e.footer&&(u==c.RowGroupAdornments.FOOTER||u==c.RowGroupAdornments.BOTH))for(h=0,p=e.footerCount;h<p;h++)t.push(e.getFooter(h))}else{if(!(e instanceof vt.RootItem))if(u==c.RowGroupAdornments.SUMMARY){var m=e.footer,v=e.footerCount;if(m){f=e.indexOf(m),m._expandable=!0,t.push(m);for(h=1;h<v;h++)(m=e.getItem(f+h))._expandable=!1,t.push(m)}else{v=e.allFooterCount;for(h=0;h<v;h++)(m=e._allFooters[h])._expandable=0===h,t.push(m)}}else(o.indentVisible||c.isHeaderAdornment(u))&&t.push(e);for(var g,h=0,p=e.count;h<p;h++)if((g=e.getItem(h))instanceof dt.GroupItem){var d=g,y=void 0,v=void 0;if(n&&(!i||d.level<=i)||d.expanded)this.$_collectChildren(d,t,n,r,i);else switch(a){case c.RowGroupAdornments.HEADER:t.push(d);break;case c.RowGroupAdornments.FOOTER:case c.RowGroupAdornments.SUMMARY:if(y=d.footer){if(v=d.footerCount,y._expandable=!0,t.push(y),1<v)for(var f=d.indexOf(y),b=1;b<v;b++)(y=d.getItem(f+b))._expandable=!1,t.push(y)}else{v=d.allFooterCount;for(var w=0;w<v;w++)(y=d._allFooters[w])._expandable=0===w,t.push(y)}break;case c.RowGroupAdornments.BOTH:default:if(t.push(d),(y=d.footer)&&(v=d.footerCount,y._expandable=!1,t.push(y),1<v))for(var f=d.indexOf(y),E=1;E<v;E++)(y=d.getItem(f+E))._expandable=!1,t.push(y)}}else g instanceof dt.GroupFooter||t.push(g);if(!(e instanceof vt.RootItem||u!=c.RowGroupAdornments.BOTH&&(o.indentVisible||u!==c.RowGroupAdornments.FOOTER))){var u=!e._expanded&&!e.visible,S=e.footer;if(S){v=e.footerCount;if(S._expandable=u,t.push(S),1<v)for(f=e.indexOf(S),h=1;h<v;h++)(S=e.getItem(f+h))._expandable=!1,t.push(S)}}}},h.prototype.$_expandItem=function(e,t,n,r){var i;if(e instanceof vt.RootItem)i=this._fixedCount;else if(this._rs.mergeMode){switch(this._rs.collapsedAdornments){case c.RowGroupAdornments.BOTH:i=e.index,this._items.splice(i,1+e.footerCount);break;case c.RowGroupAdornments.FOOTER:case c.RowGroupAdornments.SUMMARY:var s=e.footer;s?(i=s.index,this._items.splice(i,e.footerCount)):0<e.allFooterCount&&(i=e._allFooters[0].index,this._items.splice(i,e.allFooterCount));break;case c.RowGroupAdornments.HEADER:default:i=e.index,this._items.splice(i,1)}n&&(e._index=-1)}else{switch(this._rs.collapsedAdornments){case c.RowGroupAdornments.BOTH:i=e.index,this._items.splice(i,1+e.footerCount);break;case c.RowGroupAdornments.FOOTER:case c.RowGroupAdornments.SUMMARY:0<e.footerCount?(i=e.footer.index,this._items.splice(i,e.footerCount)):0<e.allFooterCount&&(i=e._allFooters[0].index,this._items.splice(i,e.allFooterCount));break;case c.RowGroupAdornments.HEADER:default:i=e.index,this._items.splice(i,1)}n&&(e._index=-1)}this._list.splice(0,this._list.length),this.$_collectChildren(e,this._list,t,n,r);for(var o=this._list.length,u=0;u<o;u++)this._items.splice(i+u,0,this._list[u])},h.prototype.$_firstIndex=function(e,t,n){var r=e.index;if(0<=r)return r;for(var i=this._items,s=0,o=i.length;s<o;s++){var u=i[s];if(e.isDescendant(u))return u.index}return-1},h.prototype.$_clearAndInit=function(e,t){if(this.clear(),e){this._fixedCount=Math.min(t,e.itemCount);for(var n=0;n<this._fixedCount;n++)this._items.push(e.getItem(n))}else this._fixedCount=0},h.prototype.$_resetIndices=function(e){for(var t=e=void 0===e?0:e,n=this.
_items.length;t<n;t++)this._items[t]._index=t},h),d,v=function(e,t){this.startIndex=e,this.endIndex=t,this.level=0,this.children=[]},m=(d=vt.ProxyItemProvider,l.__extends(g,d),g.prototype._doDispose=function(){this._callbackOnwer=null,this._visibleItems=this._visibleItems.dispose(),d.prototype._doDispose.call(this)},g.prototype.groupfFooterCounterChanged=function(e){this.$_footerCounterChanged()},g.prototype.$_footerCounterChanged=function(){this._populateItems(),this._fireRefresh()},_dp(g,"footerCounter",{get:function(){return this._footerCounter},set:function(e){e!=this._footerCounter&&(e&&e.setCounterAware(null),(this._footerCounter=e)&&e.setCounterAware(this),this.$_footerCounterChanged())}}),_dp(g,"expandedAdornments",{get:function(){return this._expandedAdornments},set:function(e){e!=this._expandedAdornments&&(this._expandedAdornments=e,this.grouped&&(this._populateItems(),this._fireRefresh()))}}),_dp(g,"collapsedAdornments",{get:function(){return this._collapsedAdornments},set:function(e){e!=this._collapsedAdornments&&(this._collapsedAdornments=e,this.grouped&&(this._populateItems(),this._fireRefresh()))}}),g.prototype.resetAdornments=function(e,t,n,r,i){e==this._expandedAdornments&&t==this._collapsedAdornments&&r===this._footerCallback&&this._indentVisible===i||(this._expandedAdornments=e,this._collapsedAdornments=t,this._callbackOnwer=n,this._footerCallback=r,this._indentVisible=i,this.grouped&&(this._populateItems(),this._fireRefresh()))},_dp(g,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(e){this._expandWhenGrouping=e}}),_dp(g,"mergeMode",{get:function(){return this._mergeMode}}),_dp(g,"summaryMode",{get:function(){return this._summaryMode},set:function(e){e!=this._summaryMode&&(this._summaryMode=e,this._populateItems(),this._fireRefresh())}}),_dp(g,"grouped",{get:function(){return this._grouped}}),_dp(g,"groupCount",{get:function(){return this._groupFields?this._groupFields.length:0}}),_dp(g,"groupSorting",{get:function(){return this._groupSorting},set:function(e){this._groupSorting!=e&&(this._groupSorting=e)}}),_dp(g,"visibleRowCount",{get:function(){return this._visibleItems.rowCount}}),_dp(g,"indentVisible",{get:function(){return this._indentVisible}}),g.prototype.canGrouping=function(e){return this.fireGrouping(e)},g.prototype.groupBy=function(e){this.groupByMode(e,this._mergeMode)},g.prototype.groupByMode=function(e,t){this._mergeMode=t,this._groupFields=e?e.concat():null,t||this._clearDisplayLevels(),this._populateItems();try{this._fireRefresh()}finally{this.fireGrouped(e)}},g.prototype.isGroupedField=function(e){if(this._groupFields)for(var t=this._groupFields.length;t--;)if(this._groupFields[t]==e)return!0;return!1},g.prototype.getGroupLevel=function(e){if(this._groupFields&&0<=e)for(var t=this._groupFields.length;t--;)if(this._groupFields[t]==e)return t+1;return 0},_dp(g,"groupedFields",{get:function(){return this._groupFields?this._groupFields.concat():null}}),g.prototype.expand=function(e,t,n,r){if(e&&(!e.expanded||n)&&this.fireExpand(e)&&(e.expanded&&this._visibleItems.collapse(e,!1),this._visibleItems.expand(e,t,!0,r))){this._resetItemIndicies(e.index);try{this._fireRefresh()}finally{this.fireExpanded(e)}}},g.prototype.$_collapseChild=function(e,t,n){for(var r=0,i=e.count;r<i;r++){var s=e.getItem(r);s instanceof dt.GroupItemImpl&&(s._expanded=!1,this.$_collapseChild(s,t,n))}},g.prototype.collapse=function(e,t,n){if(e&&e.expanded){if(this.fireCollapse(e)&&this._visibleItems.collapse(e,t)){0<=e.index&&this._resetItemIndicies(e.index);try{this._fireRefresh()}finally{this.fireCollapsed(e)}}}else e&&t&&n&&this.$_collapseChild(e,t,n)},g.prototype.collapseAll=function(e){for(var t=0;t<this._rootItem.count;t++){var n=this._rootItem.getItem(t);n instanceof dt.GroupItem&&this.collapse(n,e,!0)}},g.prototype.expandAll=function(e,t){for(var n=0;n<this._rootItem.count;n++){var r=this._rootItem.getItem(n);r instanceof dt.GroupItem&&this.expand(r,e,!0,t)}},g.prototype.findItem=function(e,t,n,r,i){var s=this.dataSource;if(!s)return-1;var o=this.itemCount;if(o<1)return-1;var u=Math.min(e.length,t.length);if(u<1)return-1;var a=!n||n.allFields,f=n&&n.caseSensitive,l=n&&n.partialMatch,h=null,d=[];r=Math.max(0,r),i=Math.min(o-1,i);for(var v=0;v<u;v++)d[v]=s.getField(e[v]).dataType;for(var m="function"==typeof (m=n.compareCallback)?m:p.Utils.compareTextValue,g=r;g<=i;g++){var y=this.$_getItem(g);if(E=0<=y.dataRow)for(v=0;v<u;v++){var b=y.getData(e[v]);switch(d[v]){case c.ValueType.DATETIME:case c.ValueType.DATE:var w,E=t[v]instanceof Date?m.call(s.handler,t[v],b,f,l):(h||(w=/[.]/.test(t[v])?"yyyy.MM.dd":/[/]/.test(t[v])?"yyyy/MM/dd":/[-]/.test(t[v])?"yyyy-MM-dd":"yyyyMMdd",h=new _.DateTimeConverter(w)),m.call(s.handler,t[v],b&&h.getText(b),f,l));break;default:E=m.call(s.handler,t[v],b,f,l)}if(E&&!a)return g;if(!E&&a)break}if(E)return g}return-1},g.prototype.findCell=function(e,t,n,r,i,s){var o=this.dataSource;if(!o)return null;var u=this.itemCount;if(u<1)return null;for(var a=n&&n.caseSensitive,f=n&&n.partialMatch,l=this.dataSource.fieldCount,h=e.length,d=null,v=[],m="function"==typeof (m=n.compareCallback)?m:p.Utils.compareTextValue,g=0;g<l;g++)v[g]=o.getField(g).dataType;r=Math.max(0,r),i=Math.min(u-1,i),(s=Math.max(0,s))>=e.length&&(r++,s=0);for(var y=r;y<=i;y++){var b=this.$_getItem(y);if(0<=b.dataRow)for(g=r<y?0:s;g<h;g++){var w=e[g];if(0<=w&&w<l){var E=b.getData(w),S=!1;switch(v[w]){case c.ValueType.DATETIME:case c.ValueType.DATE:var x,S=t instanceof Date?m(t,E,a,f):(d||(x=/[.]/.test(t)?"yyyy.MM.dd":/[/]/.test(t)?"yyyy/MM/dd":/[-]/.test(t)?"yyyy-MM-dd":"yyyyMMdd",d=new _.DateTimeConverter(x)),m(t,E&&d.getText(E),a,f));break;default:S=m(t,E,a,f)}if(S)return{itemIndex:y,fieldIndex:w,searchFieldIndex:g}}}}return null},g.prototype.getGroupItem=function(e){return function t(n){for(var r=0,i=n.children.length;r<i;r++){var s;if((s=n.children[r]).id===e)return s;if(s instanceof dt.GroupItemImpl&&(s=t(s)))return s}}(this._rootItem)},_dp(g,"itemCount",{get:function(){return this._grouped?this._visibleItems.count:this.source.itemCount}}),g.prototype.getItem=function(e,t){return this.grouped&&!t?0<=e&&e<this._visibleItems.count?this._visibleItems.getItem(e):null:this.source.getItem(e,t)},g.prototype.getItems=function(e,t){if(this.grouped){for(var n=this._visibleItems,r=[],i=Math.min(n.count,e+t-1),s=e;s<i;s++){var o=n.getItem(s);r.push(o)}return r}return this.source.getItems(e,t)},g.prototype.getAllItems=function(){if(this.grouped){var e=new f(this);return e.expand(this.rootItem,!0,!1,0),e.items}return this.source?this.source.getAllItems():null},g.prototype.getIndexOfRow=function(e){if(this.grouped){for(var t=this._visibleItems,n=0,r=t.count;n<r;n++)if(t.getItem(n).dataRow==e)return n;return-1}return this.source.getIndexOfRow(e,!1)},g.prototype.getItemOfRow=function(e,t){if(this.grouped){for(var n=this._visibleItems,r=0,i=n.count;r<i;r++){var s=n.getItem(r);if(s.dataRow==e)return s}return null}return this.source.getItemOfRow(e,t)},g.prototype._initialize=function(){d.prototype._initialize.call(this),this._visibleItems=new f(this)},g.prototype._clearItems=function(){this._visibleItems.clear(),this.rootItem.clear()},g.prototype._populateItems=function(){this.$_populateItems(!1)},g.prototype._resetItemIndicies=function(e){this.isIndexing&&this.grouped?this._visibleItems.$_resetIndices(e):d.prototype._resetItemIndicies.call(this,e)},g.prototype._clearChecked=function(){this.grouped?this.$_checkChildren(this.rootItem,!1,!1,!1):d.prototype._clearChecked.call(this),this._editItem&&this._editItem._setChecked(!1)},g.prototype.checkAll=function(e,t,n,r,i){if(!this._editItem||n&&!this._editItem.checkable||this._editItem._setChecked(e),t||!this.grouped)d.prototype.checkAll.call(this,e,t,n,r,i);else{t=this._visibleItems.fixedCount;if(0<t)if(n)for(var s=t;s--;){var o=this.getItem(s);o.checkable&&o._setChecked(e)}else for(s=t;s--;)this.getItem(s)._setChecked(e);t=-1<this.source._checkFieldIndex,t&&this.dataSource.beginUpdate();try{this.$_checkChildren(this.rootItem,e,n,i)}finally{t&&this.dataSource.endUpdate(!1)}this._fireItemCheckChanged(null,e),r?this._fireItemAllChecked(e):this._fireRefreshClient()}},g.prototype.getItemChecked=function(e,t){return this.source.getItemChecked(e,t)},g.prototype.setItemChecked=function(e,t){return this.source.setItemChecked(e,t)},g.prototype.getFirstRow=function(){for(var e=0,t=this._visibleItems.count;e<t;e++){var n=this._visibleItems.getItem(e);if(n instanceof dt.GridRow)return n}},g.prototype.getLastRow=function(){for(var e=this._visibleItems.count-1;0<=e;e--){var t=this._visibleItems.getItem(e);if(t instanceof dt.GridRow)return t}},g.prototype.getPrevRow=function(e){if(e)for(var t=(e=e.visible?e:e.getVisibleAncestor()).index-1;0<=t;t--)if((e=this._visibleItems.getItem(t))instanceof dt.GridRow)return e;return this.getFirstRow()},g.prototype.getNextRow=function(e){if(e)for(var t=(e=e.visible?e:e.getVisibleAncestor()).index+1,n=this._visibleItems.count;t<n;t++)if((e=this._visibleItems.getItem(t))instanceof dt.GridRow)return e;return this.getLastRow()},g.prototype.$_saveExpand=function(e,t){for(var n=0,r=e.count;n<r;n++){var i,s,u,a=e.getItem(n);(a instanceof dt.GroupItemImpl||a instanceof o)&&(i=a.firstItem._dataRowId,s=this.dataSource.getDataRow(i),u=a._groupField,0<=s&&0<=u&&(t[i]={expanded:a._expanded,children:[]},this.$_saveExpand(a,t[i].children)))}},g.prototype.$_restoreExpand=function(e,t){for(var n=0,r=e.count;n<r;n++){var i,s,u,a=e.getItem(n);(a instanceof dt.GroupItemImpl||a instanceof o)&&(i=a.firstItem._dataRowId,s=this.dataSource.getDataRow(i),u=a._groupField,0<=s&&0<=u&&t[i]&&(a._setExpanded(t[i].expanded),this.$_restoreExpand(a,t[i].children)))}},g.prototype.$_populateItems=function(e){var t={},n=this.source.itemCount,r=this._rootItem;if(e&&0<n&&r&&this.$_saveExpand(r,t),this._clearItems(),this.source){if(this._groupFields){for(var i=this.dataSource.fieldCount,s=this._groupFields.length-1;0<=s;s--)this._groupFields[s]>=i&&this._groupFields.splice(s,1);this._grouped=0<this._groupFields.length}else this._grouped=!1;this._grouped&&0<n&&(this.$_buildGroupItems(n),e&&this.$_restoreExpand(r,t),this.$_resetVisibleItems())}},g.prototype.$_checkChildren=function(e,t,n,r){for(var i=0,s=e.count;i<s;i++){var o=e.getItem(i);o&&(!n||(r||o.isDataRow)&&o.checkable)&&o._setChecked(t),o instanceof dt.GroupItem&&this.$_checkChildren(o,t,n,r)}},g.prototype.$_getItem=function(e){return(this._grouped?this._visibleItems:this.source).getItem(e)},g.prototype.$_resetVisibleItems=function(){this._visibleItems.$_clearAndInit(this.source,this.fixedCount),this.source&&this.source.itemCount>this._visibleItems.fixedCount&&this._visibleItems.expand(this.rootItem,!1,!1,0),this._resetItemIndicies(0)},g.prototype.$_buildGroupItems=function(e){e>this.fixedCount&&(e=new v(this.fixedCount,e-1),this.$_buildGroups(e,this.source,this._groupFields),this.$_buildItems(this.rootItem,e,this._groupFields),this.mergeMode&&(this._clearDisplayLevels(),this.$_resetDisplayLevels(this.rootItem)))},g.prototype.$_resetDisplayLevels=function(e){for(var t=0,n=e.count;t<n;t++){var r,i=p.Utils.cast(e.getItem(t),dt.GroupItem);i&&((r=p.Utils.cast(i.firstItem,dt.GridRow))&&r._displayLevel<0&&(r._displayLevel=i.level),this.$_resetDisplayLevels(i))}},g.prototype.$_buildGroups=function(e,t,n){if(!(n.length<=e.level)){var r=e.startIndex,i=e.endIndex;if(!(i<r)){var s=e.level+1,o=n[e.level],u=this.dataSource.getField(o),a=new v(r,r);a.level=s,e.children.push(a);for(var f=t.getItem(r).getData(o),l=r+1;l<=i;l++){var c=t.getItem(l).getData(o);u.equalValues(c,f)||(a&&(a.endIndex=l-1),(a=new v(l,l)).level=s,e.children.push(a)),f=c}a&&(a.endIndex=i);for(var l=0,h=e.children.length;l<h;l++)this.$_buildGroups(e.children[l],t,n)}}},g.prototype.$_buildItems=function(e,t,n){var i=this.mergeMode,s=t.children.length;if(0<s)for(var u=t.level,a=n[t.level],f=0;f<s;f++){var l=i?new o(u,a):new dt.GroupItemImpl(a);l._setExpanded(this.expandWhenGrouping),e.add(l),this.$_buildItems(l,t.children[f],n)}else{var c=t.endIndex-t.startIndex+1,h=this.source.getItems(t.startIndex,c);e.addAll(h),this._incDescendents(e,c)}if(0<e.level){var p=this._callbackOnwer,d=this._footerCallback;if(this._footerCounter)for(var v=0,f=0,m=this._footerCounter.getGroupFooterCount(e);f<m;f++){var g,y=!!d&&!d(p,e,f);(g=new(i?r:dt.GroupFooter)).$_footerIndex=f,g.$_vindex=y?-1:v++,g.hiddenFooter=y,e.add(g)}else(d||d(p,e,0))&&(g=new(i?r:dt.GroupFooter),e.add(g))}},g.prototype.$_setEditItem=function(e){this._editItem=e},g.prototype.$_setDummyEditItem=function(e){this._dummyEditItem=e},g.prototype.fireGrouping=function(e){return this.fireConfirmEvent(g.GROUPING,e)},g.prototype.fireGrouped=function(e){this.fireEvent(g.GROUPED)},g.prototype.fireExpand=function(e){return this.fireConfirmEvent(g.EXPAND,e)},g.prototype.fireExpanded=function(e){this.fireEvent(g.EXPANDED,e)},g.prototype.fireCollapse=function(e){return this.fireConfirmEvent(g.COLLAPSE,e)},g.prototype.fireCollapsed=function(e){this.fireEvent(g.COLLAPSED,e)},g.prototype.onItemProviderRefresh=function(e){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),d.prototype.onItemProviderRefresh.call(this,e))},g.prototype.onItemProviderItemInserted=function(e,t){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),d.prototype.onItemProviderItemInserted.call(this,e,t))},g.prototype.onItemProviderItemDeleted=function(e,t){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),d.prototype.onItemProviderItemDeleted.call(this,e,t))},g.prototype.onItemProviderItemUpdated=function(e,t){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),d.prototype.onItemProviderItemUpdated.call(this,e,t))},g.GROUPING="onGroupedItemProviderGrouping",g.GROUPED="onGroupedItemProviderGrouped",g.EXPAND="onGroupedItemProviderExpand",g.EXPANDED="onGroupedItemProviderExpanded",g.COLLAPSE="onGroupedItemProviderCollapse",g.COLLAPSED="onGroupedItemProviderCollapsed",g);t.GroupedItemProvider=m});t(Ht),Ht.MergedGroupFooter,Ht.MergedGroupHeader,Ht.GroupedItemProvider;var Bt=n(function(e,t){function i(){return n.call(this)||this}function u(){var e=s.call(this)||this;return e._level=0,e._mergeMode=!1,e}function c(){var e=a.call(this)||this;return e._item=null,e._field=-1,e._ds=null,e._fieldCount=0,e._grid=null,e._layout=null,e}function v(e){var t=h.call(this)||this;return t._runtime=v.$_runtime=v.$_runtime||new f,t.criteria=e,t}function g(){return m.call(this)||this}function S(e){var t=w.call(this)||this;return t._group=null,t._column=e.c1._columnObj,t._head=e.top,t._tail=e.bottom,t}function C(e){var t=x.call(this)||this;return t._flags=null,t._fixedRooms=[],t._rooms=[],t._inited=!1,t._fixedCells=[],t._cells=[],(t._layout=e)._merges=t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.prototype._changed=function(){},i.INIT_COUNT=200,i);t.GridMergeRule=r;var s,o=(s=r,l.__extends(u,s),u.getDefault=function(e,t){var n=u.$_default;return n._level=e,n._mergeMode=t,n},u.prototype.parseInit=function(e,t,n,r,i){var s=e.itemCount;(r=Math.min(s-n,r))<1||(this._mergeMode?this.$_parseMerged(e,t,n,r,i):this.$_parseNormal(e,t,n,r,i))},u.prototype.parseBounds=function(e,t,n,r,i){if(!(e.itemCount<1)){for(n=Math.max(0,n);0<=n&&i[n]<=0;){var s=e.getItem(n);if(s==this.$_getAncestor(s,this._level))break;n--}for(;n<=r&&0<i[n];)n++;n<=r&&(this._mergeMode?this.$_parseMergedBounds(e,t,n,r,i):this.$_parseNormalBounds(e,t,n,r,i))}},u.prototype.$_getAncestor=function(e,t){for(var n=(n=p.Utils.cast(e,dt.GroupItem))||e.parent;n.level>t;)n=n.parent;return n},u.prototype.$_parseNormal=function(e,t,n,r,i){var s=e.itemCount;if(!(s<1)){var o,u=e.fixedCount,a=o=e.getItem(n),f=n,l=f+1;for(i[f]=f+1;l<s;)o=e.getItem(l),(l==u||o.level!=a.level||o.constructor!==a.constructor||o instanceof dt.GroupFooter||o instanceof dt.GroupItemImpl)&&(f=l),i[l]=f+1,l++,a=o}},u.prototype.$_parseMerged=function(e,t,n,r,i){var s=e.itemCount;if(!(s<1))for(var o=e.getItem(n),u=this.$_getAncestor(o,this._level),a=n,f=i[a]=a+1;f<s;){var o=e.getItem(f),l=this.$_getAncestor(o,this._level);if(l!=u){if(r<=f)break;u=l,a=f}i[f]=a+1,f++}},u.prototype.$_parseNormalBounds=function(e,t,n,r,i){var s=e.itemCount;if(!(s<1)){var o,u=e.fixedCount,a=o=e.getItem(n),f=n,l=f+1;for(i[f]=f+1;l<s;)o=e.getItem(l),l!=u&&o.level==a.level&&o.constructor===a.constructor||(f=l),i[l]=f+1,l++,a=o}},u.prototype.$_parseMergedBounds=function(e,t,n,r,i){var s=e.itemCount;if(!(s<1)){var o=e.getItem(n),u=this.$_getAncestor(o,this._level),a=n,f=a+1;for(i[a]=a+1;f<s;){var o=e.getItem(f),l=this.$_getAncestor(o,this._level);if(l!=u){if(r<f)break;u=l,a=f}i[f]=a+1,f++}}},u.$_default=new u,u);t.RowGroupMergeRule=o;var a,f=(a=b.ExpressionRuntime,l.__extends(c,a),c.prototype._doDispose=function(){this._item=null,this._ds=null,this._grid=null,this._layout=null,a.prototype._doDispose.call(this)},c.prototype.setDataSource=function(e){this._ds=e,this._fieldCount=e?e.fieldCount:0},c.prototype.setLayout=function(e){this._layout=e,this._column=e.firstColumn,this._grid=e.grid},c.prototype.setCell=function(e){this._item=e.item,this._field=e.dataField},c.prototype.setItem=function(e,t){this._item=e,this._field=t},c.prototype.clear=function(){this._item=null,this._field=null,this._layout=null,this._column=null,this._grid=null,this._ds=null},c.prototype.isIdentifier=function(e){return e=e.toLowerCase(),c.IDENTS.hasOwnProperty(e)?c.IDENTS[e]:a.prototype.isIdentifier.call(this,e)},c.prototype.evaluateIdentifier=function(e){if(this._item){switch(e){case c.ID_ROW:return this._item.index;case c.ID_DATAROW:return this._item.dataRow;case c.ID_CHECKED:return this._item.checked;case c.ID_GROUP:return this._item.parent;case c.ID_VALUE:return this._item.getData(this._field);case c.ID_PREV_VALUES:var t=this._grid.getDataColumns(),n=t.indexOf(this._column);if(t.length<0||n<1)return"";for(var r=[],i=0,s=Math.min(n,t.length);i<s;i++)r.push(this._item.getData(t[i].dataIndex));return r.join("`")}throw new b.ExpressionEvaluationError("Invalid identifier key: "+e)}},c.prototype.evaluateIndexerI=function(e,t){if(this._item){if(e!=c.ID_VALUE&&e!=c.ID_VALUES)throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e);if(t<0||t>=this._fieldCount)throw new b.ExpressionEvaluationError("Data field index out of bounds:"+t);return this._item.getData(t)}},c.prototype.evaluateIndexerS=function(e,t,n){if(e!=c.ID_VALUE&&e!=c.ID_VALUES)throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e);if(this._ds){n=n?this._ds.getFieldIndexC(t):this._ds.getFieldIndex(t);if(n<0||n>=this._fieldCount)throw new b.ExpressionEvaluationError("Data field is not exists:"+t);return this._item.getData(n)}},c.IDENTS={row:c.ID_ROW=0,datarow:c.ID_DATAROW=1,checked:c.ID_CHECKED=2,value:c.ID_VALUE=3,values:c.ID_VALUES=4,group:c.ID_GROUP=5,prevvalues:c.ID_PREV_VALUES=6},c),h,d={},r=(h=r,l.__extends(v,h),v.createRule=function(e){return e="string"==typeof e?e:e&&e.criteria,e?new v(e):null},v.prototype._doDispose=function(){this._runtime.clear(),this._runtime=null,h.prototype._doDispose.call(this)},_dp(v,"criteria",{get:function(){return this._criteria},set:function(e){(e=e?e.trim():null)!=this._criteria&&(this._criteria=e,this._exprNode=e?b.ExpressionParser.Default.parse(e,null):null,this._changed())}}),v.prototype.parseInit=function(e,t,n,r,i){var s=this._layout.isBreakMergeOnEmpty(),o=e.fixedCount,u=e.itemCount,a=e.dataSource.rowCount;if(!((r=Math.min(u-n,r))<1||a<=0)){this._runtime.setDataSource(e.dataSource),this._runtime.setLayout(this._layout);for(var f=null,l=n;l<u&&(f=e.getItem(l),!this.$_isRow(f,!1));)i[l]=l+1,l++;if(!(u<=l)){var c=d,h=this._exprNode.isIdentifier("value"),p=n=l;if(i[p]=p+1,!(f.dataRow>=a))for(var c=h?f.getData(t):(this._runtime.setItem(f,t),this._exprNode.evaluate(this._runtime)),v=n+1;v<u;v++)if(f=e.getItem(v),this.$_isRow(f,!1)){if(f.dataRow>=a)break;var m=void 0,m=h?f.getData(t):(this._runtime.setItem(f,t),this._exprNode.evaluate(this._runtime));if(v==o||void 0===m&&s||(m instanceof Date&&c instanceof Date?+m!=+c:m!=c)){if(r<=v)break;p=v,c=m}i[v]=p+1}else{if(r<=v)break;c=d,i[p=v]=p+1}}}},v.prototype.parseBounds=function(e,t,n,r,i){var s=this._layout.isBreakMergeOnEmpty(),o=e.itemCount;if(!(o<1)){var u=e.fixedCount,a=this._exprNode.isIdentifier("value"),f=d,l=Math.max(0,n),c=l,h=-1;if(this._runtime.setDataSource(e.dataSource),this._runtime.setLayout(this._layout),0<l&&i[l]<=0){var p=e.getItem(l);if(this.$_isRow(p,!1)){var v=void 0;for(v=a?e.getItem(l).getData(t):(this._runtime.setItem(p,t),this._exprNode.evaluate(this._runtime)),l--;0<=l&&(p=e.getItem(l),this.$_isRow(p,!1))&&(f=a?p.getData(t):(this._runtime.setItem(p,t),this._exprNode.evaluate(this._runtime)),!(l==u||void 0===f&&s||(f instanceof Date&&v instanceof Date?+f!=+v:f!=v)));)l--;for(var m=c-1;l<m;m--)i[m]=l+2;l<c-1&&(h=l+1)}else{i[l]=l+1;for(m=c-1;l<m;m--)i[m]=l+2;for(l+1<c-1&&(h=l+2),l--;0<=l&&i[l]<=0&&!this.$_isRow(e.getItem(l),!1);)i[l]=l+1,l--}}for(l=Math.max(0,n);l<=r&&0<i[l];)l++;for(;l<=r&&!this.$_isRow(e.getItem(l),!1);)i[l]=l+1,l++;if(l<r){c=l,p=e.getItem(l),v=void 0;for(v=a?p.getData(t):(this._runtime.setItem(p,t),this._exprNode.evaluate(this._runtime)),l++;l<o;)if(p=e.getItem(l),this.$_isRow(p,!1)){if(f=a?p.getData(t):(this._runtime.setItem(p,t),this._exprNode.evaluate(this._runtime)),l==u||void 0===f&&s||(f instanceof Date&&v instanceof Date?+f!=+v:f!=v)){var g=c;0<=h&&(g=h,h=-1);for(m=c;m<l;m++)i[m]=g+1;if(r<=l)break;v=f,c=l}else i[l]=c+1;l++}else{g=c,0<=h&&(g=h,h=-1);for(m=c;m<l;m++)i[m]=g+1;for(i[l]=l+1,l++;l<o&&!this.$_isRow(e.getItem(l),!1);)i[l]=l+1,l++;if(r<=(c=l))break}if(l==o&&(f instanceof Date&&v instanceof Date?+f==+v:f==v))for(g=0<=h?h:c,m=c;m<l;m++)i[m]=g+1}}},v.prototype.$_isRow=function(e,t){var n=e instanceof dt.GridRow&&!(e instanceof mt.DummyEditItem);return n=n&&!t?(t=e.parent).expanded||t.firstItem!==e:n},v.$_runtime=null,v);t.ColumnMergeRule=r;var m,r=(m=y.Base,l.__extends(g,m),_dp(g,"head",{get:function(){return-1}}),_dp(g,"tail",{get:function(){return-1}}),g);t.GridMergeRoom=r;var w,E=(w=r,l.__extends(S,w),S.borrow=function(e){var t=S.$_rooms.pop();return t?(t._head=e.top,t._tail=e.bottom):t=new S(e),t},S.returnTo=function(e){var t;!e||(t=S.$_rooms).indexOf(e)<0&&t.push(e)},_dp(S,"column",{get:function(){return this._column}}),_dp(S,"head",{get:function(){return this._head}}),_dp(S,"tail",{get:function(){return this._tail}}),_dp(S,"scope",{get:function(){return this._column}}),_dp(S,"group",{get:function(){return this._group},set:function(e){this._group=e}}),S.prototype.getHead=function(e){return e?e.set(this._head,this._column):e=this._column.grid.getIndex(this._head,this._column),e},S.prototype.getTail=function(e){return e?e.set(this._tail,this._column):e=this._column.grid.getIndex(this._tail,this._column),e},S.prototype.isHead=function(e){return e.column==this._column&&e.itemIndex==this._head},S.prototype.isTail=function(e){return e.column==this._column&&e.itemIndex==this._tail},S.prototype.contains=function(e){return e.column==this._column&&e.itemIndex>=this._head&&e.itemIndex<=this._tail},S.$_rooms=new Array,S.$_roomCount=0,S);t.ColumnMergeRoom=E;var x,T=0,N=65535,r=(x=y.Base,l.__extends(C,x),C.prototype._doDispose=function(){this._layout=null,this._rooms=this._fixedRooms=null,x.prototype._doDispose.call(this)},_dp(C,"count",{get:function(){return this._rooms.length}}),C.prototype.clear=function(){this._flags=null,this._rooms=[],this._inited=!1},C.prototype.initialize=function(e){if(!this._inited){var t=this._layout.grid,n=t.rowGroup,r=t.itemSource,i=this._layout.firstColumn,s=t.getGroupLevel(i.dataIndex),n=!t.isGroupedColumn(i)||n.mergeMode&&!i.mergeGrouped?this._layout.$_mergeRuleObj():o.getDefault(s,n.mergeMode);if(n){for(var u=this._flags=new Array(r.itemCount),t=t.fixedOptions.mergeRows?0:r.fixedCount,a=r.itemCount;a--;)u[a]=0;n._layout=this._layout,n.parseInit(r,i.dataIndex,t,e,u)}this._inited=!0}},C.prototype.refreshRooms=function(e,t,n){if(this._inited&&this._flags&&!(t<e)){var r=this._layout.grid,i=this._layout.firstColumn;if(r&&i){var s,u,a=this._rooms,f=r.layoutManager.fixedItemCount,l=r.itemSource,c=r.getGroupLevel(i.dataIndex),h=0<c?o.getDefault(c,r.rowGroup.mergeMode):this._layout.$_mergeRuleObj(),p=r.displayOptions.editItemMerging,d=0;if(this._fixedRooms.length=0,this._rooms.length=0,h&&(h._layout=this._layout,h.parseBounds(l,i.dataIndex,e,t,this._flags)),n)for(;d<f;)(s=this.$_checkFixedMerge(l,i,d,f))?(c<1&&(v=new E(s),this._fixedRooms.push(v)),d=s.r2+1):d+=1;for(d=e;d<=t;)if(s=this.$_checkMerge(l,i,d,0==a.length,f)){if(c<1)(u=l.getItem(s.r2))instanceof Ht.MergedGroupHeader||u instanceof Ht.MergedGroupFooter||(v=new E(s),this._rooms.push(v));else if((u=(p?l.source:l).getItem(s.top)).level>=c){for(var v,m=u instanceof dt.GroupItem?u:u.parent;m.level>c;)m=m.parent;(v=new E(s)).group=m,a.push(v)}d=s.r2+1}else d+=1}}},C.prototype.getFixedRooms=function(){return this._fixedRooms.slice()},C.prototype.getRooms=function(){return this._rooms.slice()},C.prototype.scroll=function(e){},C.prototype.getRoom=function(e){for(var t=e.rowFixed?this._fixedRooms:this._rooms,n=t.length-1;0<=n;n--)if(t[n].contains(e))return t[n];return null},C.prototype.prepareCells=function(e,t){if(0<e){for(var n=this._fixedCells,r=0;r<n.length;r++)n[r]=-1;for(;n.length<e;)n.push(-1)}for(var i=this._cells,r=0;r<i.length;r++)i[r]=-1;for(;i.length<t;)i.push(-1)},C.prototype.refreshCells=function(e,t){for(var n=this.getFixedRooms(),r=n.length-1;0<=r;r--){var i=n[r];this.addFixedCells(i.head,i.tail-i.head+1)}for(r=(n=this.getRooms()).length-1;0<=r;r--){var i=n[r],s=Math.max(0,i.head-t-e),o=i.tail-t-e;this.addCells(s,o-s+1)}},C.prototype.addFixedCells=function(e,t){for(var n=this._fixedCells,r=T++,i=e+1;i<e+t;i++)n[i]=r+N;return n[e]=r},C.prototype.addCells=function(e,t){for(var n=this._cells,r=T++,i=e+1;i<e+t;i++)n[i]=r+N;return n[e]=r},C.prototype.isMerged=function(e,t){return e<t?-1<this._fixedCells[e]:-1<this._cells[e-t]},C.prototype.isMergeRoot=function(e,t){return e<t?-1<this._fixedCells[e]&&this._fixedCells[e]<N:-1<this._cells[e-=t]&&this._cells[e]<N},C.prototype.isHidden=function(e,t){return e<t?this._fixedCells[e]>=N:this._cells[e-t]>=N},C.prototype.getMerged=function(e,t){var n=1;if(e<t)for(var r=(s=this._fixedCells)[e],i=e+1;i<s.length&&s[i]-N==r;i++,n++);else for(var s,r=(s=this._cells)[e-=t],i=e+1;i<s.length&&s[i]-N==r;i++,n++);return n},C.prototype.getMerged2=function(e,t,n,r){for(var i=this._cells,s=i[n],o=e.itemSource,u=o.getItem(t++).isData?r:1,a=n+1;a<i.length&&i[a]-N==s;a++)u+=o.getItem(t++).isData?r:1;return u},C.prototype.$_checkFixedMerge=function(e,t,n,r){if(0<r){var i=t.grid.displayOptions.editItemMerging,s=n,o=this._flags[s],u=e.getItem(s);if(o<=0||dt.ItemState_isEditing(u.itemState)&&!i)return null;for(var a=n+1;a<=r;){var f=dt.ItemState_isEditing(e.getItem(a).itemState);if(a==r||this._flags[a]>o||f&&!i)return s+1<a||f?It.CellRange.createRange(s,t.layout,a-1,t.layout):null;a++}}return null},C.prototype.$_checkMerge=function(e,t,n,r,i){if(0<=n){var s=t.grid.displayOptions.editItemMerging,o=n,u=this._flags[o],a=e.getItem(o);if(u<=0||dt.ItemState_isEditing(a.itemState)&&!s)return null;if(r)for(;i<o&&!(this._flags[o-1]<u||dt.ItemState_isEditing(e.getItem(o-1).itemState));)o--;for(var f=e.itemCount,l=n+1;l<f;){var c=dt.ItemState_isEditing(e.getItem(l).itemState);if(this._flags[l]>u||this._flags[l]<=0||c&&!s){if(o+1<l)return It.CellRange.createRange(o,t.layout,l-1,t.layout);var h=t instanceof jt.DataColumn?t.groupLevel:-1;return(a=e.getItem(o))instanceof Ht.MergedGroupHeader&&a.collapsed||a instanceof Ht.MergedGroupFooter&&a.parent.level==h&&(l==n+1||a.parent.collapsed)||(a instanceof Ht.MergedGroupHeader||a instanceof Ht.MergedGroupFooter)&&a.parent.level>h?It.CellRange.createRange(o,t.layout,l-1,t.layout):null}l++}if(o<l)return o+1<l?It.CellRange.createRange(o,t.layout,l-1,t.layout):(h=t instanceof jt.DataColumn?t.groupLevel:-1,(a=e.getItem(o))instanceof Ht.MergedGroupHeader&&a.collapsed||a instanceof Ht.MergedGroupFooter&&a.parent.level==h&&(l==n+1||a.parent.collapsed)||(a instanceof Ht.MergedGroupHeader||a instanceof Ht.MergedGroupFooter)&&a.parent.level>h?It.CellRange.createRange(o,t.layout,l-1,t.layout):null)}return null},C.MERGE_ROOMS="mergeRooms",C);t.ColumnMergeManager=r});t(Bt),Bt.GridMergeRule,Bt.RowGroupMergeRule,Bt.ColumnMergeRule,Bt.GridMergeRoom,Bt.ColumnMergeRoom,Bt.ColumnMergeManager;var jt=n(function(e,t){function i(e){var t=n.call(this,null)||this;return t._column=e,t}function o(){}function f(e){return e=u.call(this,e)||this,e._index=0,e}function d(e,t){var n=h.call(this)||this;return n._items=[],n._column=e,n._type=t,n._items.push(n.$_createSummary()),n}function g(e){var t=v.call(this,e.column)||this;return t.$_owner=e,t}function S(e,t){return w.call(this,e,t)||this}function L(e){return e=x.call(this,e)||this,e._checkLocation=c.ColumnHeaderItemLocation.NONE,e._showTooltip=!0,e}function M(e){var t=A.call(this,e.column)||this;return t.$_owner=e,t}function P(e,t){return _.call(this,e,t)||this}function H(){}function j(e){var t=B.call(this)||this;return t._visible=!0,t._resizable=!0,t._movable=!0,t._checked=!1,t._fillWidth=NaN,t._dirty=!1,t._index=-1,t._states={},t._header=new k(t),t._footers=new D(t,"footer"),t._headerSummaries=new E(t,"summary"),t._groupFooters=new D(t,"groupFooter"),e&&t.assignFrom(e),t}function I(e){return e=F.call(this,e)||this,e._blankWhenCopy=!1,e._blankWhenExport=!1,e._ignoreDefaultDynamicStyles=!1,e._textInputCase=c.TextInputCase.NORMAL,e._button=c.CellButton.NONE,e._buttonVisibility=c.ButtonVisibility.DEFAULT,e._editButtonVisibility=c.ButtonVisibility.DEFAULT,e._displayMinusZero=!0,e}function U(e){var t=q.call(this)||this;return t._fieldIndex=-1,t._readOnly=!1,t._valueSeparator=",",t._breakMergeOnEmpty=!1,t._equalBlank=!1,t._values=null,t._labels=null,t._lookupDisplay=!1,t._lookupSource=null,t._lookupKeyFields=null,t._lookupKeyFieldIds=null,t._mergeGrouped=!1,t._sortable=!0,t._sortOrder=-1,t._sortByLabel=!1,t._filterable=!0,t._autoFilter=!1,t._lookupData=null,t._required=!1,t._requiredLevel=c.ValidationLevel.ERROR,t._validations=new Dt.EditValidationCollection(!0),t._groupable=!0,t._dataIndex=-1,t._baseIndex=-1,t._valueType=c.ValueType.TEXT,t._groupLevel=-1,t._labelFieldIndex=-1,t._filters=new yt.ColumnFilterCollection(t),t._filters.addListener(t),t._autoFilters=new yt.ColumnFilterCollection(t),t._autoFilters.addListener(t),e&&t.assignFrom(e),t}function W(e){var t=z.call(this)||this;return t._fieldArray=t._fieldArray||[],t._fields=t._fields||[],e&&t.assignFrom(e),t}function X(){this._layouts={}}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=bt.GridObject,l.__extends(i,n),i.prototype._doDispose=function(){this._column=null,this._template=null,n.prototype._doDispose.call(this)},_dp(i,"column",{get:function(){return this._column}}),_dp(i,"template",{get:function(){return this._template&&this._template.template},set:function(e){e!=this.template&&(e?(this.template||(this._template=new kt.HtmlTemplateParser),this._template.template=e):this._template=void 0,this._changed())}}),_dp(i,"values",{get:function(){return this._values},set:function(e){e!==this._values&&(e?p.Utils.extendObj(e,this._values={}):this._values=void 0,this._changed())}}),_dp(i,"popupMenu",{get:function(){return this._popupMenu},set:function(e){e!=this._popupMenu&&(this._popupMenu=e,this._popupMenuName="string"==typeof e?e:null)}}),_dp(i,"popupMenuName",{get:function(){if(this._popupMenuName)return this._popupMenuName;if(this._popupMenu){this._popupMenuName="$$_column_popup_menu"+this.$_hash;var e=this.column.grid;return e&&e.addPopupMenu(this._popupMenuName,this._popupMenu,!0),e&&this._popupMenuName}return null},set:function(e){null!=e&&"string"!=typeof e||(this._popupMenuName=e,this._changed())}}),i.prototype.getValue=function(e){return this._values&&this._values[e]},i.prototype.setValue=function(e,t){this._values||(this._values={}),this._values[e]!=t&&(this._values[e]=t,this._changed())},i);t.ColumnObject=r;var s=(o.prototype.clear=function(){return this.styleName=this.exportStyleName=this.textFormat=this.datetimeFormat=this.numberFormat=this.booleanFormat=this.prefix=this.suffix=void 0,this},o.prototype.assign=function(e){return"string"==typeof e?this.styleName=e:e&&("styleName"in e&&(this.styleName=e.styleName),"textFormat"in e&&(this.textFormat=e.textFormat),"datetimeFormat"in e&&(this.datetimeFormat=e.datetimeFormat),"numberFormat"in e&&(this.numberFormat=e.numberFormat),"booleanFormat"in e&&(this.booleanFormat=e.booleanFormat),"prefix"in e&&(this.prefix=e.prefix),"suffix"in e&&(this.suffix=e.suffix),"exportStyleName"in e&&(this.exportStyleName=e.exportStyleName)),this},o);t.ColumnSummaryStyle=s;var u,a=(u=r,l.__extends(f,u),f.prototype._doDispose=function(){u.prototype._doDispose.call(this)},_dp(f,"index",{get:function(){return this._index}}),_dp(f,"valueCallback",{get:function(){return this._valueCallback},set:function(e){e!==this._valueCallback&&(this._valueCallback=e,this._changed())}}),_dp(f,"text",{get:function(){return this._text},set:function(e){e!=this._text&&(this._text=e,this._changed())}}),_dp(f,"expression",{get:function(){return this._expression},set:function(e){(e=e&&e.trim())!=this._expression&&(this._expression=e,this._exprNode=e?b.ExpressionParser.Default.parse(e):void 0,this._changed())}}),_dp(f,"styleName",{get:function(){return this._styleName},set:function(e){e!=this._styleName&&(this._styleName=e,this._changed())}}),_dp(f,"exportStyleName",{get:function(){return this._exportStyleName},set:function(e){this._exportStyleName=e}}),_dp(f,"styleCallback",{get:function(){return this._styleCallback},set:function(e){e!=this._styleCallback&&(this._styleCallback=e,this._changed())}}),_dp(f,"numberFormat",{get:function(){return this._numberFormat},set:function(e){e!=this._numberFormat&&(this._numberFormat=e,this._numberFormatter=e?C.DecimalFormatter.getFormatter(e):null,this._changed())}}),_dp(f,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(e){e!=this._datetimeFormat&&(this._datetimeFormat=e,this._datetimeWriter=e?T.DateTimeWriter.getFormatter(e):null,this._changed())}}),_dp(f,"booleanFormat",{get:function(){return this._booleanFormat},set:function(e){e!=this._booleanFormat&&(this._booleanFormat=e,this._boolFormatter=e?N.BooleanFormatter.getFormatter(e):null,this._changed())}}),_dp(f,"textFormat",{get:function(){return this._textFormat},set:function(e){e!=this._textFormat&&(this._textFormat=e,this._textFormatter=e?Pt.TextFormatter.getFormatter(e):null,this._changed())}}),_dp(f,"prefix",{get:function(){return this._prefix},set:function(e){e!=this._prefix&&(this._prefix=e,this._changed())}}),_dp(f,"suffix",{get:function(){return this._suffix},set:function(e){e!=this._suffix&&(this._suffix=e,this._changed())}}),_dp(f,"textFormatter",{get:function(){return this._textFormatter}}),_dp(f,"numberFormatter",{get:function(){return this._numberFormatter}}),_dp(f,"datetimeWriter",{get:function(){return this._datetimeWriter}}),_dp(f,"boolFormatter",{get:function(){return this._boolFormatter}}),f.prototype.evaluate=function(e,t){if(this._exprNode)return this._exprNode.evaluate(e)},f.prototype.realizeSummary=function(e,t){var n=this._template;if(n)return n.realizeSummary(this,e,t)},f.prototype.realizeGroupSummary=function(e,t){var n=this._template;if(n)return n.realizeGroupSummary(this,e,t)},f.prototype.doAssignSimple=function(e){return"string"==typeof e&&(this.expression=e,!0)},f.prototype._doChanged=function(){},f);t.ColumnSummary=a;var h,s=(h=y.Base,l.__extends(d,h),d.prototype._doDispose=function(){this._column=null,this._items&&this._items.forEach(function(e){e.dispose()}),this._items=null,h.prototype._doDispose.call(this)},_dp(d,"column",{get:function(){return this._column}}),_dp(d,"count",{get:function(){return this._items.length}}),_dp(d,"type",{get:function(){return this._type}}),d.prototype.get=function(e){return 0<=e&&e<this.column.grid.getSummaryCount(this._type)&&!this._items[e]&&(this._items[e]=this.$_createSummary()),this._items[e]},d.prototype.assignFrom=function(e){if(p.Utils.isArray(e)){for(var t=e.length;this._items.length<t;)this._items.push(null);1<t&&this._items.length>t&&(this._items.length=t),0<t&&this._items[0].assignFrom(e[0]);for(var n=1;n<t;n++)e[n]?(this._items[n]||(this._items[n]=this.$_createSummary()),this._items[n].assignFrom(e[n])):this._items[n]=null}else this._items[0].assignFrom(e)},d),v,m=(v=a,l.__extends(g,v),g.prototype._doChanged=function(){this.column._headerSummaryChanged()},g);t.ColumnHeaderSummary=m;var w,E=(w=s,l.__extends(S,w),S.prototype.$_createSummary=function(){return new m(this)},S);t.ColumnHeaderSummaryCollection=E;var x,k=(x=r,l.__extends(L,x),L.prototype._doDispose=function(){x.prototype._doDispose.call(this)},_dp(L,"text",{get:function(){return this._text},set:function(e){e!=this._text&&(this._text=e,this._changed())}}),_dp(L,"itemOffset",{get:function(){return this._itemOffset},set:function(e){e!=this._itemOffset&&(this._itemOffset=e,this._changed())}}),_dp(L,"itemGap",{get:function(){return this._itemGap},set:function(e){e!=this._itemGap&&(this._itemGap=e,this._changed())}}),_dp(L,"checkLocation",{get:function(){return this._checkLocation},set:function(e){e!=this._checkLocation&&(this._checkLocation=e,this._changed())}}),_dp(L,"showTooltip",{get:function(){return this._showTooltip},set:function(e){e!=this._showTooltip&&(this._showTooltip=e,this._changed())}}),_dp(L,"tooltip",{get:function(){return this._tooltip},set:function(e){e!=this._tooltip&&(this._tooltip=e,this._changed())}}),_dp(L,"edgeMark",{get:function(){return this._edgeMark},set:function(e){e!==this._edgeMark&&(this._edgeMark=e,this._changed())}}),_dp(L,"displayText",{get:function(){var e,t=this.column,n=this._text;return n=(n=!n&&t instanceof R?(e=t.getField())?e.header||e.orgFieldName:t.fieldName:n)||t.name}}),_dp(L,"styleName",{get:function(){return this._styleName},set:function(e){this._styleName!==e&&(this._styleName=e,this._changed())}}),_dp(L,"exportStyleName",{get:function(){return this._exportStyleName},set:function(e){e!=this._exportStyleName&&(this._exportStyleName=e)}}),L.prototype.realizeTemplate=function(){var e=this._template;if(e)return e.realizeHeader(this,null,this._grid)},L.prototype._doChanged=function(){this.column&&this.column._headerChanged()},L.prototype.doAssignSimple=function(e){return"string"==typeof e&&(this.text=e,!0)},L);t.ColumnHeader=k;var A,O=(A=a,l.__extends(M,A),M.prototype._doChanged=function(){this.column._footerChanged()},M);t.ColumnFooter=O;var _,D=(_=s,l.__extends(P,_),P.prototype.$_createSummary=function(){return new O(this)},P);t.ColumnFooterCollection=D,H.prototype.clear=function(){return this.styleName=this.exportStyleName=this.renderer=this.editable=this.editor=this.readOnly=this.textFormat=this.datetimeFormat=this.numberFormat=this.booleanFormat=this.prefix=this.suffix=this.edgeMark=this.style=void 0,this},H.prototype.assign=function(e){return"string"==typeof e?this.styleName=e:e&&("styleName"in e&&(this.styleName=e.styleName),"exportStyleName"in e&&(this.exportStyleName=e.exportStyleName),"renderer"in e&&(this.renderer=e.renderer),"editor"in e&&(this.editor=e.editor),"editable"in e&&(this.editable=e.editable),("readonly"in e||"readOnly"in e)&&(this.readOnly=e.readonly||e.readOnly),"textFormat"in e&&(this.textFormat=e.textFormat),"datetimeFormat"in e&&(this.datetimeFormat=e.datetimeFormat),"numberFormat"in e&&(this.numberFormat=e.numberFormat),"booleanFormat"in e&&(this.booleanFormat=e.booleanFormat),"prefix"in e&&(this.prefix=e.prefix),"suffix"in e&&(this.suffix=e.suffix),"edgeMark"in e&&(this.edgeMark=e.edgeMark),"style"in e&&(this.style=e.style)),this},H.prototype.toFormatter=function(e){var t;return e=e||{textFormatter:void 0,numberFormatter:void 0,datetimeWriter:void 0,booleanFormatter:void 0,prefix:void 0,suffix:void 0},(t=this.textFormat)&&(e.textFormatter&&e.textFormatter.format==t||(e.textFormatter=Pt.TextFormatter.getFormatter(t))),(t=this.numberFormat)&&(e.numberFormatter&&e.numberFormatter.format==t||(e.numberFormatter=C.DecimalFormatter.getFormatter(t))),(t=this.datetimeFormat)&&(e.datetimeWriter&&e.datetimeWriter.format==t||(e.datetimeWriter=T.DateTimeWriter.getFormatter(t))),(t=this.booleanFormat)&&(e.booleanFormatter&&e.booleanFormatter.format==t||(e.booleanFormatter=N.BooleanFormatter.getFormatter(t))),(t=this.prefix)&&(e.prefix&&e.prefix==t||(e.prefix=t)),(t=this.suffix)&&(e.suffix&&e.suffix==t||(e.suffix=t)),e},s=H,t.ColumnStyle=s;var B,s=(B=y.Base,l.__extends(j,B),j.prototype._doDispose=function(){this._layout=null,this.$_owner=null,this._header=this._header&&this._header.dispose(),this._footers=this._footers&&this._footers.dispose(),this._headerSummaries=this._headerSummaries&&this._headerSummaries.dispose(),this._groupFooters=this._groupFooters&&this._groupFooters.dispose(),B.prototype._doDispose.call(this)},_dp(j,"name",{get:function(){return this._name},set:function(e){e!=this._name&&(this._name=e,this._changed())}}),j.prototype._layoutChanged=function(){this._changed(),this._layout&&this._layout._changed()},_dp(j,"visible",{get:function(){return this._visible},set:function(e){e!=this._visible&&(this._visible=e,this._layout&&this._layoutChanged(),this._propChanged("visible",this._visible,!this._visible))}}),_dp(j,"width",{get:function(){return(null==this._width||isNaN(this._width))&&this.grid?this._width=this.grid.displayOptions.defaultColumnWidth:this._width},set:function(e){var t;e=Math.max(0,e),isNaN(e)||e==this._width||(t=this._width,this._width=e,this._layoutChanged(),this._propChanged("width",this._width,t))}}),_dp(j,"fillWidth",{get:function(){return this._fillWidth},set:function(e){e=Math.max(0,e),isNaN(e)||e==this._fillWidth||(this._fillWidth=e,this._layoutChanged())}}),_dp(j,"resizable",{get:function(){return this._resizable},set:function(e){e!=this._resizable&&(this._resizable=e,this._changed())}}),_dp(j,"movable",{get:function(){return this._movable},set:function(e){e!=this._movable&&(this._movable=e,this._changed())}}),_dp(j,"checked",{get:function(){return this._checked},set:function(e){e!=this._checked&&(this._checked=e,this._changed())}}),_dp(j,"header",{get:function(){return this._header}}),j.prototype.setHeader=function(e){this._header.assignFrom(e)},_dp(j,"footers",{get:function(){return this._footers}}),j.prototype.setFooters=function(e){this._footers.assignFrom(e),this._changed()},_dp(j,"footer",{get:function(){return this._footers.get(0)}}),j.prototype.setFooter=function(e){this.setFooters(e)},_dp(j,"headerSummaries",{get:function(){return this._headerSummaries}}),j.prototype.setHeaderSummaries=function(e){this._headerSummaries.assignFrom(e),this._changed()},_dp(j,"headerSummary",{get:function(){return this._headerSummaries.get(0)}}),j.prototype.setHeaderSummary=function(e){this.setHeaderSummaries(e)},_dp(j,"groupFooters",{get:function(){return this._groupFooters}}),j.prototype.setGroupFooters=function(e){this._groupFooters.assignFrom(e),this._changed()},_dp(j,"groupFooter",{get:function(){return this._groupFooters.get(0)}}),j.prototype.setGroupFooter=function(e){this.setGroupFooters(e)},_dp(j,"grid",{get:function(){return this._layout?this._layout.grid:this.$_owner?this.$_owner.owner:void 0}}),_dp(j,"tag",{get:function(){return this._tag},set:function(e){this._tag=e}}),_dp(j,"index",{get:function(){return this._index}}),_dp(j,"displayText",{get:function(){return this._header.text||this._name||"col_"+this._index}}),_dp(j,"displayWidth",{get:function(){return this._layout?this._layout.domWidth:this._width}}),_dp(j,"displayIndex",{get:function(){return this._layout?this._layout.vindex:-1}}),_dp(j,"dataRoot",{get:function(){return this}}),_dp(j,"layout",{get:function(){return this._layout}}),j.prototype.clean=function(){this._dirty=!1},j.prototype.isWritable=function(){return!1},j.prototype.stateFor=function(e){return this._states[e]},j.prototype.setState=function(e,t){this._states[e]=t},j.prototype.getFooter=function(e){return this._footers.get(e)},j.prototype.getHeaderSummary=function(e){return this._headerSummaries.get(e)},j.prototype.assignFrom=function(e){B.prototype.assignFrom.call(this,e),this._header.assignFrom(e.header),this._footers.assignFrom(e.footers||e.footer),this._headerSummaries.assignFrom(e.summaries||e.summary||e.headerSummaries||e.headerSummary),this._groupFooters.assignFrom(e.groupFooters||e.groupFooter)},j.prototype.toString=function(){return this.displayText},j.prototype._prepareLayout=function(e,t){},j.prototype._changed=function(){var e;this._dirty||(this._dirty=!0,(e=this.grid)&&e.invalidateColumn(this))},j.prototype._propChanged=function(e,t,n){var r=this.grid;r&&r._fireColumnPropertyChanged(this,e,t,n)},j.prototype.$_setIndex=function(e){this._index=e},j.prototype._headerChanged=function(){this._changed()},j.prototype._headerSummaryChanged=function(){this._changed()},j.prototype._footerChanged=function(){this._changed()},j.prototype._resetIndices=function(e){},j.prototype.$_layoutIndexChanged=function(e,t){this._propChanged("displayIndex",t,e)},j.prototype.$_layoutWidthChanged=function(e,t){this._propChanged("displayWidth",t,e)},j);t.GridColumn=s;var F,s=(F=s,l.__extends(I,F),I.prototype._doDispose=function(){this._popupMenu=null,this._popupMenuName=null,F.prototype._doDispose.call(this)},_dp(I,"numberFormat",{get:function(){return this._numberFormat},set:function(e){e!==this._numberFormat&&(this._numberFormat=e,this._numberFormatter=e?C.DecimalFormatter.getFormatter(e):null,this._changed())}}),_dp(I,"displayMinusZero",{get:function(){return this._displayMinusZero},set:function(e){this._displayMinusZero!=e&&(this._displayMinusZero=e,this._changed())}}),_dp(I,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(e){e!==this._datetimeFormat&&(this._datetimeFormat=e,this._datetimeWriter=e?T.DateTimeWriter.getFormatter(e):null,this._changed())}}),_dp(I,"booleanFormat",{get:function(){return this._booleanFormat},set:function(e){e!==this._booleanFormat&&(this._booleanFormat=e,this._boolFormatter=e?N.BooleanFormatter.getFormatter(e):null,this._changed())}}),_dp(I,"textFormat",{get:function(){return this._textFormat},set:function(e){e!==this._textFormat&&(this._textFormat=e,this._textFormatter=e?Pt.TextFormatter.getFormatter(e):null,this._changed())}}),_dp(I,"prefix",{get:function(){return this._prefix},set:function(e){e!=this._prefix&&(this._prefix=e,this._changed())}}),_dp(I,"suffix",{get:function(){return this._suffix},set:function(e){e!=this._suffix&&(this._suffix=e,this._changed())}}),_dp(I,"blankWhenCopy",{get:function(){return this._blankWhenCopy},set:function(e){e!=this._blankWhenCopy&&(this._blankWhenCopy=e,this._changed())}}),_dp(I,"blankWhenExport",{get:function(){return this._blankWhenExport},set:function(e){e!=this._blankWhenExport&&(this._blankWhenExport=e,this._changed())}}),_dp(I,"ignoreDefaultDynamicStyles",{get:function(){return this._ignoreDefaultDynamicStyles},set:function(e){e!=this._ignoreDefaultDynamicStyles&&(this._ignoreDefaultDynamicStyles=e,this._changed())}}),_dp(I,"textInputCase",{get:function(){return this._textInputCase},set:function(e){e!=this._textInputCase&&(this._textInputCase=e,this._changed())}}),_dp(I,"styleName",{get:function(){return this._styleName},set:function(e){e!=this._styleName&&(this._styleName=e,this._changed())}}),_dp(I,"exportStyleName",{get:function(){return this._exportStyleName},set:function(e){e!=this._exportStyleName&&(this._exportStyleName=e)}}),_dp(I,"styleCallback",{get:function(){return this._styleCallback},set:function(e){e!=this._styleCallback&&(this._styleCallback=e,this._changed())}}),_dp(I,"renderer",{get:function(){return this._renderer},set:function(e){this._renderer=e,this.grid&&this._layout&&this.grid.$_rendererChanged(this._layout),this._changed()}}),_dp(I,"editor",{get:function(){return this._editor},set:function(e){this._editor=e,this._changed()}}),_dp(I,"button",{get:function(){return this._button},set:function(e){e!=this._button&&(this._button=e,this._changed())}}),_dp(I,"buttonVisibility",{get:function(){return this._buttonVisibility},set:function(e){e!=this._buttonVisibility&&(this._buttonVisibility=e,this._changed())}}),_dp(I,"buttonVisibleCallback",{get:function(){return this._buttonVisibleCallback},set:function(e){this._buttonVisibleCallback=e,this._changed}}),_dp(I,"editButtonVisibility",{get:function(){return this._editButtonVisibility},set:function(e){e!=this._editButtonVisibility&&(this._editButtonVisibility=e,this._changed())}}),_dp(I,"textFormatter",{get:function(){return this._textFormatter}}),_dp(I,"numberFormatter",{get:function(){return this._numberFormatter}}),_dp(I,"datetimeWriter",{get:function(){return this._datetimeWriter}}),_dp(I,"boolFormatter",{get:function(){return this._boolFormatter}}),_dp(I,"popupMenu",{get:function(){return this._popupMenu},set:function(e){e!=this._popupMenu&&(this._popupMenu=e,this._popupMenuName="string"==typeof e?e:null)}}),_dp(I,"popupMenuName",{get:function(){return this._popupMenuName||(this._popupMenu?(this._popupMenuName="$$_column_popup_menu"+this.$_hash,this.grid.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this.grid&&this._popupMenuName):null)},set:function(e){null!=e&&"string"!=typeof e||(this._popupMenuName=e,this._changed())}}),_dp(I,"edgeMark",{get:function(){return this._edgeMark},set:function(e){e!==this._edgeMark&&(this._edgeMark=e,this._changed())}}),I.prototype.getCellStyle=function(e){return this._styleCallback&&this._styleCallback(this.grid.handler,e)},I.prototype.affix=function(e){return this._prefix&&(e=this._prefix+e),this._suffix&&(e+=this._suffix),e},I.prototype._prepareLayout=function(e,t){F.prototype._prepareLayout.call(this,e,t)},I);t.ValueColumn=s;var q,R=(q=s,l.__extends(U,q),U.prototype._doDispose=function(){this._mergeRuleObj=this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._filters=this._filters&&this._filters.dispose(),this._autoFilters=this._autoFilters&&this._autoFilters.dispose(),this.validations=this._validations&&this._validations.dispose(),q.prototype._doDispose.call(this)},_dp(U,"fieldIndex",{get:function(){return this._fieldIndex},set:function(e){(e=Math.max(-1,e))!=this._fieldIndex&&(this._fieldIndex=e,this._changed())}}),_dp(U,"fieldName",{get:function(){return this._fieldName},set:function(e){e!=this._fieldName&&(this._fieldName=e,this._changed())}}),_dp(U,"editable",{get:function(){return this._editable},set:function(e){e!=this._editable&&(this._editable=e,this._changed())}}),_dp(U,"readOnly",{get:function(){return this._readOnly},set:function(e){e!=this._readOnly&&(this._readOnly=e,this._changed())}}),_dp(U,"nanText",{get:function(){return this._nanText},set:function(e){e!=this._nanText&&(this._nanText=e,this._changed())}}),_dp(U,"zeroText",{get:function(){return this._zeroText},set:function(e){e!=this._zeroText&&(this._zeroText=e,this._changed())}}),_dp(U,"defaultValue",{get:function(){return this._defaultValue},set:function(e){this._defaultValue=e}}),_dp(U,"valueSeparator",{get:function(){return this._valueSeparator},set:function(e){e!=this._valueSeparator&&(this._valueSeparator=e,this._changed())}}),_dp(U,"mergeRule",{get:function(){return this._mergeRule},set:function(e){e!=this._mergeRule&&(this._mergeRule=e,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=e?Bt.ColumnMergeRule.createRule(e):null,(e=this.grid)&&this.layout&&e._columnMergeRuleChanged(this.layout))}}),_dp(U,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(e){e!=this._breakMergeOnEmpty&&(this._breakMergeOnEmpty=e,(e=this.grid)&&this.layout&&e._columnMergeRuleChanged(this.layout))}}),_dp(U,"equalBlank",{get:function(){return this._equalBlank},set:function(e){e!=this._equalBlank&&(this._equalBlank=e,this._layoutChanged())}}),_dp(U,"equalBlankExpression",{get:function(){return this._equalBlankExpression},set:function(e){e!=this._equalBlankExpression&&(this._equalBlankExpression=e,this._equalBlankNode=e?b.ExpressionParser.Default.parse(e,null):void 0,this._layoutChanged())}}),_dp(U,"excelFormat",{get:function(){return this._excelFormat},set:function(e){e!=this._excelFormat&&(this._excelFormat=e,this._changed())}}),_dp(U,"excelFormulaStatement",{get:function(){return this._excelFormulaStatement},set:function(e){e!=this._excelFormulaStatement&&((this._excelFormulaStatement=e)?this._excelFormulaExprStatement?this._excelFormulaExprStatement.source=e:this._excelFormulaExprStatement=new gt.ExpressionStatement(e):this._excelFormulaExprStatement=null,this._changed())}}),_dp(U,"excelFormulaExprStatement",{get:function(){return this._excelFormulaExprStatement}}),_dp(U,"dataIndex",{get:function(){return this._dataIndex}}),_dp(U,"baseIndex",{get:function(){return this._baseIndex}}),_dp(U,"valueType",{get:function(){return this._valueType}}),_dp(U,"groupLevel",{get:function(){return this._groupLevel}}),_dp(U,"values",{get:function(){return this._values},set:function(e){e!=this._values&&(this._values=e?e.map(function(e,t){return null!=e?String(e):e}):[],this._lookupMap=null,this._changed())}}),_dp(U,"labels",{get:function(){return this._labels},set:function(e){e!=this._labels&&(this._labels=e&&e.slice(),this._lookupMap=null,this._changed())}}),_dp(U,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(e){this._lookupDisplay!=e&&(this._lookupDisplay=e,this._changed())}}),_dp(U,"lookupSource",{get:function(){return this._lookupSource}}),_dp(U,"lookupSourceId",{get:function(){return this._lookupSourceId},set:function(e){this._lookupSourceId!=e&&(this._lookupSourceId=e,this._changed(),this.grid&&this.$_resetLookup(this.grid))}}),_dp(U,"lookupKeyFields",{get:function(){return this._lookupKeyFields},set:function(e){e!=this._lookupKeyFields&&(this._lookupKeyFields=p.Utils.makeArray(e,!0).slice(),this._changed(),this.grid&&this.$_resetLookup(this.grid))}}),_dp(U,"lookupKeyFieldIds",{get:function(){return this._lookupKeyFieldIds}}),_dp(U,"labelField",{get:function(){return this._labelField},set:function(e){this._labelField!=e&&(this._labelField=e,this._changed())}}),_dp(U,"textOfInvalid",{get:function(){return this._textOfInvalid},set:function(e){this._textOfInvalid!=e&&(this._textOfInvalid=e,this._changed())}}),_dp(U,"placeHolder",{get:function(){return this._placeHolder},set:function(e){e!==this._placeHolder&&(this._placeHolder=e,this._changed())}}),_dp(U,"placeHolderStyleName",{get:function(){return this._placeHolderStyleName},set:function(e){e!==this._placeHolderStyleName&&(this._placeHolderStyleName=e,this._changed())}}),_dp(U,"labelFieldIndex",{get:function(){return this._labelFieldIndex}}),_dp(U,"displayCallback",{get:function(){return this._displayCallback},set:function(e){this._displayCallback=e,this._changed()}}),_dp(U,"mergeGrouped",{get:function(){return this._mergeGrouped}}),_dp(U,"sortable",{get:function(){return this._sortable},set:function(e){e!=this._sortable&&(this._sortable=e,this._changed())}}),_dp(U,"sortOrder",{get:function(){return this._sortOrder},set:function(e){this._sortOrder=e}}),_dp(U,"sortDirection",{get:function(){return this._sortDirection},set:function(e){this._sortDirection=e}}),_dp(U,"sortByLabel",{get:function(){return this._sortByLabel},set:function(e){this._sortByLabel!==e&&(this._sortByLabel=e,this._changed())}}),_dp(U,"filterable",{get:function(){return this._filterable},set:function(e){e!=this._filterable&&(this._filterable=e,this._changed())}}),_dp(U,"autoFilter",{get:function(){return this._autoFilter},set:function(e){e!==this._autoFilter&&(!(this._autoFilter=e)&&this._autoFilters&&0<this._autoFilters.count&&this._autoFilters.clear(),this._changed())}}),_dp(U,"filters",{get:function(){return this._filters},set:function(e){e instanceof yt.ColumnFilterCollection||this.setFilters(e)}}),_dp(U,"autoFilters",{get:function(){return this._autoFilters}}),_dp(U,"required",{get:function(){return this._required},set:function(e){e!=this._required&&(this._required=e,this._changed())}}),_dp(U,"requiredMessage",{get:function(){return this._requiredMessage},set:function(e){e!=this._requiredMessage&&(this._requiredMessage=e,this._changed())}}),_dp(U,"requiredLevel",{get:function(){return this._requiredLevel},set:function(e){e!=this._requiredLevel&&(this._requiredLevel=e,this._changed())}}),_dp(U,"validations",{get:function(){return this._validations},set:function(e){this._validations.assignFrom(e)}}),_dp(U,"groupable",{get:function(){return this._groupable},set:function(e){this._groupable!=e&&(this._groupable=e)}}),_dp(U,"objectKey",{get:function(){return this._objectKey},set:function(e){e!=this._objectKey&&(this._objectKey=e,this._changed())}}),_dp(U,"objectCallback",{get:function(){return this._objectCallback},set:function(e){this._objectCallback=e,this._changed()}}),_dp(U,"displayText",{get:function(){return this.header.text||this.fieldName||this.name||"col_"+this.index}}),_dp(U,"lookupData",{get:function(){return this._lookupData},set:function(e){var t,n,r={};if(this._lookupData=p.Utils.deepCopy(e),e){p.Utils.isArray(e)?r.list=e:r=e,this._labels=[],this._values=[],this._lookupMap=null;for(var i=r.hasOwnProperty("value")?r.value:"value",s=r.hasOwnProperty("label")?r.label:"label",o=0,u=r.list.length;o<u;o++)null!=(n=null!=(t=r.list[o])[i]?t[i]:t.code)&&this._values.push(null!=t[i]?t[i]:t.code),null!=n&&this._labels.push(null!=t[s]?t[s]:null!=t.text?t.text:n)}else this._labels=null,this._values=null,this._lookupMap=null;this._changed()}}),U.prototype.getField=function(){var e=this._dataIndex;if(0<=e){var t=this.grid.dataSource;if(t)return t.getField(e)}return null},U.prototype.getLookupLabel=function(e){if(!this._lookupMap){var t=this._values,n=this._labels;if(t&&0<t.length){this._lookupMap={};for(var r=0;r<t.length;r++)n&&n.length>r?this._lookupMap[t[r]]=n[r]:this._lookupMap[t[r]]=t[r]}}var i;if(e&&this._valueSeparator){for(var s=e.split(this._valueSeparator),o=[],r=0,u=s.length;r<u;r++)o.push(this._lookupMap&&this._lookupMap[s[r]]?this._lookupMap[s[r]]:s[r]);if(o.length<=0)return"";i=o.join(this._valueSeparator)}else i=this._lookupMap?this._lookupMap[e]:void 0;return i||(null!=this.textOfInvalid?this.textOfInvalid:e)},U.prototype.getLookupIndex=function(e){if(this._values&&0<this._values.length)for(var t=0,n=this._values.length;t<n;t++)if(this._values[t]==e)return t;return-1},U.prototype.getLookupIndices=function(e){var t=[];if(e&&this._values&&0<this._values.length)for(var n=p.Utils.isArray(e)?e:String(e).split(this._valueSeparator),r=0,i=n.length;r<i;r++)0<=this._values.indexOf(n[r])&&t.push(this._values.indexOf(n[r]));return t},U.prototype.getLookupValue=function(e){if(this._values&&0<this._values.length)return this._values[e]},U.prototype.getLookupValues=function(e){var t=[];if(this._values&&0<this._values.length)for(var n=0,r=e.length;n<r;n++)0<=e[n]&&e[n]<this._values.length&&t.push(this._values[e[n]]);return t},U.prototype.getSourceValue=function(e){var t=this._values,n=this._labels;if(n&&t){n=n.indexOf(e);if(0<=n&&t.length>n)return t[n];if(0<=(n=t.indexOf(e)))return t[n]}},U.prototype.getSourceValues=function(e){var t=this._values,n=this._labels;if(n&&t){for(var r,i=[],s=this._valueSeparator,o=0,u=(e=p.Utils.isArray(e)?e:s&&e?String(e).split(s):p.Utils.makeArray(e)).length;o<u;o++)0<=(r=n.indexOf(e[o]))&&t.length>r?i.push(t[r]):i.push(e[o]);if(0<i.length&&s)return i.join(s);if(0<i.length)return i.join()}},_dp(U,"$_filters",{get:function(){return this._autoFilter?this._autoFilters:this._filters}}),U.prototype.clearFilters=function(){this.setFilters(null)},U.prototype.addFilters=function(e,t){var n;e&&((n=this.grid)&&!n.canFiltering()||this._filters.addAll(p.Utils.makeArray(e),t))},U.prototype.removeFilters=function(e){var t;e&&((t=this.grid)&&!t.canFiltering()||this._filters.removeItems(p.Utils.makeArray(e)))},U.prototype.activateFilters=function(e,t){var n;e&&((n=this.grid)&&!n.canFiltering()||this.$_filters.activateItems(p.Utils.makeArray(e),t))},U.prototype.activateAllFilters=function(e){var t=this.grid;t&&!t.canFiltering()||this.$_filters.activateAll(e)},U.prototype.hideColumnFilters=function(e,t){this.$_filters.hideFilters(p.Utils.makeArray(e),t)},U.prototype.hideAllColumnFilters=function(e){this.$_filters.hideAllFilters(e)},U.prototype.toggleFilters=function(e){var t;e&&((t=this.grid)&&!t.canFiltering()||this.$_filters.toggleItems(p.Utils.makeArray(e)))},U.prototype.toggleAllFilters=function(){var e=this.grid;e&&!e.canFiltering()||this.$_filters.toggleAll()},U.prototype.getFilter=function(e){var t=this.$_filters,e=t.indexOf(e);return t.getItem(e)},U.prototype.getActiveFilters=function(e){return this.$_filters.getActiveItems(e)},_dp(U,"hasFilters",{get:function(){return this._autoFilter||0<this._filters.count}}),U.prototype.isFiltered=function(){return this._autoFilter?0<this._autoFilters.activeCount:0<this._filters.activeCount},U.prototype.setFilters=function(e){var t=this.grid;t&&!t.canFiltering()||this._filters.assignFrom(e)},U.prototype.autoFilterRefresh=function(e){var t=this.grid,n=null==t?void 0:t.dataSource;t&&n&&this._autoFilter&&(t=t.filterSelector._manager)&&t.buildItems(this,n,!0,e)},U.prototype.onColumnFilterChanged=function(e,t){var n=this.grid;n&&n.columnFilterChanged(e,t)},U.prototype._prepareLayout=function(e,t){q.prototype._prepareLayout.call(this,e,t)},U.prototype._resetIndices=function(e){this._dataIndex=-1,this._baseIndex=-1;var t=e.dataSource;t&&(this._fieldName?this._dataIndex=t.getFieldIndex(this._fieldName):this._dataIndex=this._fieldIndex,0<=this._dataIndex&&(t.getField(this._dataIndex),this._baseIndex=t.getBaseField(this._dataIndex),this._valueType=t.getValueType(this._dataIndex)),this._labelFieldIndex=t.getFieldIndex(this._labelField),this.$_resetLookup(e))},U.prototype.isWritable=function(){var e=this.grid.editOptions,e=e.columnEditableFirst?null!=this._editable?this._editable:e.editable:1==e.editable&&!1!==this._editable;return e&&!this._readOnly},U.prototype.assignFrom=function(e){q.prototype.assignFrom.call(this,e)},U.prototype.$_setMergeGrouped=function(e){this._mergeGrouped=e},U.prototype.$_setGroupLevel=function(e){this._groupLevel=e},U.prototype.$_resetLookup=function(e){if(this._lookupKeyFields&&0<this._lookupKeyFields.length&&this._lookupSourceId){for(var t=this._lookupKeyFields.length,n=this._lookupKeyFieldIds=new Array(t),r=0;r<t;r++)n[r]=e.dataSource.getFieldIndex(this._lookupKeyFields[r]);this._lookupSource=e.lookupProvider.getSource(this._lookupSourceId)}else this._lookupSource=null,this._lookupKeyFieldIds=[]},U.prototype._changed=function(){q.prototype._changed.call(this)},U.CAPITAL_INDEXERS=["value","values"],U);t.DataColumn=R;var z,s=(z=s,l.__extends(W,z),W.prototype._doDispose=function(){z.prototype._doDispose.call(this)},_dp(W,"fieldNames",{get:function(){return this._fieldNames},set:function(e){e!=this._fieldNames&&(this._fieldNames=e,this._fieldArray=e?e.split(","):[],this._changed())}}),_dp(W,"fields",{get:function(){return this._fields}}),W.prototype._resetIndices=function(e){this._fields=[];var t=e.dataSource;if(t)for(var n=0,r=this._fieldArray.length;n<r;n++){var i=this._fieldArray[n],s=i.split("..");if(1<s.length){var o=t.getFieldIndex(s[0]),u=t.getFieldIndex(s[1]);if(0<=o&&0<=u)for(var s=Math.min(o,u),a=Math.max(o,u),f=s;f<=a;f++)this._fields.push(f)}else 0<=(f=t.getFieldIndex(i))&&this._fields.push(f)}},W);t.SeriesColumn=s,X.prototype._doDispose=function(){this._layouts=null},X.prototype.find=function(e){return this._layouts[e]},X.prototype.clear=function(){this._layouts={}},X.prototype.load=function(e){if(e=p.Utils.makeArray(e),this._layouts={},e)for(var t=0,n=e.length;t<n;t++){var r=e[t];r.name&&!this._layouts[r.name]&&(this._layouts[r.name]=r.items)}},s=X,t.ColumnLayoutCollection=s});t(jt),jt.ColumnObject,jt.ColumnSummaryStyle,jt.ColumnSummary,jt.ColumnHeaderSummary,jt.ColumnHeaderSummaryCollection,jt.ColumnHeader,jt.ColumnFooter,jt.ColumnFooterCollection,jt.ColumnStyle,jt.GridColumn,jt.ValueColumn,jt.DataColumn,jt.SeriesColumn,jt.ColumnLayoutCollection;var Ft=n(function(e,t){function i(){var e=n.call(this)||this;return e._visible=!0,e._width=NaN,e._fillWidth=NaN,e._index=-1,e._vindex=-1,e._row=0,e._col=0,e._hrow=0,e._hcol=0,e._cspan=1,e._hspan=1,e._dspan=1,e._clen=1,e._hlen=1,e._dlen=1,e._cellWidth=0,e._fitWidth=NaN,e._defColSpan=1,e._header=e._createHeader(),e._header&&(e._header._layout=e),e}function u(e,t){var n=s.call(this)||this;return n._source=e,n._index=t,n}function d(e){var t=a.call(this)||this;return t._cellSpan=1,t._cellWidths=[],t._cols=1,t._rows=1,t._blanked=!1,t._column=e,t._columnObj=e instanceof jt.ValueColumn?e:null,t}function g(e){var t=v.call(this)||this;return t._layout=e,t}function S(e){return e=w.call(this,e)||this,e._visible=!0,e._showTooltip=!0,e}function C(e,t){var n=T.call(this)||this;return n._direction=f.HORIZONTAL,n._items=[],n._resizable=!0,n._movable=!0,n._hideChildHeaders=!1,n._childColumnMovable=!0,n._visibles=[],n._cols=0,n._rows=0,n._headerRows=0,n._name=e,n._direction=t==f.VERTICAL?f.VERTICAL:f.HORIZONTAL,n}function F(e){var t=k.call(this,"$_root_$",null)||this;return t._owner=e,t.header._visible=!1,t}function q(e){var t=I.call(this)||this;return t._cellWidths=[],t._grid=e,t._root=new j(t),t}function U(e){return R.call(this,e)||this}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.compareLoc=function(e,t){if(null==e||null==t)return 0;if(null==e)return-1;if(null==t)return 1;var n=e.root.vindex,r=t.root.vindex;return n==r&&(r=e.group===t.group?(n=e.vindex,t.vindex):(n=e.dataRoot.vindex,t.dataRoot.vindex)),n-r},i.prototype._doDispose=function(){this._header=this._header&&this._header.dispose(),n.prototype._doDispose.call(this)},_dp(i,"grid",{get:function(){if(this.$_grid)return this.$_grid;var e=this.root;return e&&e._parent.grid}}),_dp(i,"source",{get:function(){return this}}),_dp(i,"isNull",{get:function(){return!1}}),_dp(i,"isProxy",{get:function(){return!1}}),_dp(i,"visible",{get:function(){return this._visible},set:function(e){e!=this._visible&&(this._visible=e,this._changed(),this._propChanged("visible",this._visible,!this._visible))}}),i.prototype.$_isVisible=function(e){return this._visible},_dp(i,"header",{get:function(){return this._header}}),_dp(i,"owner",{get:function(){return this._parent&&this._parent.owner}}),_dp(i,"parent",{get:function(){return this._parent}}),_dp(i,"group",{get:function(){return this._parent instanceof j?null:this._parent}}),_dp(i,"root",{get:function(){if(!this._root)for(var e=this;e;){if(e._parent instanceof j)return this._root=e;e=e._parent}return this._root}}),_dp(i,"isRoot",{get:function(){return this.root===this}}),_dp(i,"dataRoot",{get:function(){if(!this._dataRoot){var e=this.group;if(e)for(;e=(this._dataRoot=e).group;);else this._dataRoot=this}return this._dataRoot}}),_dp(i,"index",{get:function(){return this._index}}),_dp(i,"vindex",{get:function(){return this._vindex},set:function(e){var t=this._vindex;this._parent&&this._parent.$_changeChildVIndex(this,e),this._vindex!=t&&(this._propChanged("displayIndex",this._vindex,t),(e=this.firstColumn)&&this instanceof h&&e.$_layoutIndexChanged(t,this._vindex))}}),_dp(i,"row",{get:function(){return this._row}}),_dp(i,"col",{get:function(){return this._col}}),_dp(i,"hrow",{get:function(){return this._hrow}}),_dp(i,"hcol",{get:function(){return this._hcol}}),_dp(i,"width",{get:function(){return this._getWidth(this._width)},set:function(e){e=Math.max(0,e),(e=this.grid?Math.max(e,this.grid.displayOptions.minCellWidth):e)!=this._width&&(this._width=e,this._parent&&this._parent._childWidthChanged(this))}}),_dp(i,"fillWidth",{get:function(){return this._getFillWidth(this._fillWidth)},set:function(e){(e=Math.max(0,e))!=this._fillWidth&&(this._fillWidth=e,this._parent&&this._parent._childFillWidthChanged(this))}}),_dp(i,"domWidth",{get:function(){if(!this.grid||!this.grid.layoutManager.isColumnFitted)return this.cellWidth;var e=this.grid,t=e.layoutManager,n=e.fixedOptions.colCount,e=t.cellCount,t=this.$_fixed?t._fixedCellPoints:this.$_rfixed?t._rightCellPoints:this.grid.layoutManager._cellPoints,n=this.$_fixed?this._col:this.$_rfixed?this._col-(e-n):this._col-n;return t[n+(this instanceof N?this._clen:this._defColSpan)]-t[n]}}),_dp(i,"distance",{get:function(){return this._col}}),_dp(i,"cspan",{get:function(){return this._cspan}}),_dp(i,"hspan",{get:function(){return this._hspan}}),_dp(i,"hlen",{get:function(){return this._hlen}}),_dp(i,"merged",{get:function(){return this._merged}}),_dp(i,"isFixed",{get:function(){return this.$_fixed||this.$_rfixed}}),_dp(i,"displayText",{get:function(){return this._header&&this._header.text||this.toString()}}),i.prototype.load=function(e){void 0!==e.width&&(this.width=e.width),void 0!==e.header&&this._header.assignFrom(e.header),void 0!==e.fillWidth&&(this.fillWidth=e.fillWidth),void 0!==e.visible&&(this.visible=e.visible)},i.prototype.isColumn=function(e){return!1},i.prototype.cleanColumns=function(){},i.prototype.findLayout=function(e){return null},i.prototype.getHeaderSpan=function(){return 1},i.prototype.getSummarySpan=function(e){return 1},i.prototype.getFooterSpan=function(e){return 1},i.prototype.getDataSpan=function(){return 1},i.prototype.getGroupFooterSpan=function(e,t){return 1},i.prototype.getDataColumn=function(){return null},i.prototype.getFooterUserSpan=function(e){return null},i.prototype.getSummaryUserSpan=function(e){return null},i.prototype._createHeader=function(){return null},i.prototype._headerChanged=function(){this._changed()},i.prototype._prepareLayout=function(e,t,n){this.$_grid=e,this.$_fixed=t,this.$_rfixed=n,this._merged=!1},i.prototype._detach=function(){this._parent=void 0,this._index=-1,this._vindex=-1,this._row=-1,this._col=-1,this._cspan=1,this._hspan=1,this._dspan=1,this._clen=1,this._hlen=1,this._dlen=1,this._root=void 0,this._dataRoot=void 0},i.prototype._getWidth=function(e){return e},i.prototype._getFillWidth=function(e){return e},i.prototype.changeCellWidth=function(e,t,n){var r=n?this.cellWidth:this.domWidth,i=this.domWidth,r=e-r;t&&!n&&(r*=this.cellWidth/this._fitWidth),r=Math.round(r),this.owner&&(t=this._col,n=void 0,n=this instanceof N?this._clen:this._defColSpan,this.owner.$_changeCellWidths(t,n,r),this.owner.$_calcGroupWidths()),setTimeout(function(){var e;this.domWidth!=i&&(e=this.firstColumn,this._propChanged("displayWidth",this.domWidth,i),e&&this instanceof h&&e.$_layoutWidthChanged(i,this.domWidth))}.bind(this),50)},i.prototype._setFitWidth=function(e){this._fitWidth=e},i.prototype._clearFitWidth=function(){this._fitWidth=NaN},i.prototype._changed=function(){this._parent&&this._parent._changed()},i.prototype.$_setMerged=function(e){this._merged=e},i.prototype._propChanged=function(e,t,n){var r=this.grid;r&&r._fireLayoutPropertyChanged(this,e,t,n)},i);t.CellLayoutItem=r;var s,o=(s=r,l.__extends(u,s),_dp(u,"cellWidth",{get:function(){return this._cellWidth},set:function(e){}}),_dp(u,"isNull",{get:function(){return!0}}),_dp(u,"isProxy",{get:function(){return!0}}),_dp(u,"source",{get:function(){return this._source}}),_dp(u,"visible",{get:function(){return this._source.visible}}),u.prototype.$_isVisible=function(e){return this._source.$_isVisible(e)},_dp(u,"cols",{get:function(){return this._source.cols}}),_dp(u,"headerRows",{get:function(){return this._source.headerRows}}),_dp(u,"rows",{get:function(){return this._source.rows}}),_dp(u,"root",{get:function(){return this._source.root}}),_dp(u,"first",{get:function(){return null}}),_dp(u,"last",{get:function(){return null}}),_dp(u,"firstColumn",{get:function(){return this._source.firstColumn}}),_dp(u,"lastColumn",{get:function(){return this._source.lastColumn}}),_dp(u,"boundColumn",{get:function(){return this._source.boundColumn}}),u.prototype.load=function(e){},u.prototype._isResizable=function(){return!1},u.prototype._isMovable=function(){return!1},u.prototype.clearMergeGrouped=function(){},u);t.ProxyCellLayoutItem=o;var a,f,c,h=(a=r,l.__extends(d,a),d.prototype._doDispose=function(){this._column=this._columnObj=null,this._merges=this._merges&&this._merges.dispose(),this._mergeRuleObj=this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._equalBlankNode=null,a.prototype._doDispose.call(this)},_dp(d,"column",{get:function(){return this._column}}),_dp(d,"cellWidth",{get:function(){return this.owner.getCellWidths(this._col,this._defColSpan)},set:function(e){var t=!!this.grid&&this.grid.layoutManager.isColumnFitted;this.changeCellWidth(e,t,!0)}}),_dp(d,"merges",{get:function(){return this._merges}}),_dp(d,"mergeRule",{get:function(){return this._mergeRule},set:function(e){e!==this._mergeRule&&(this._mergeRule=e,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=e?Bt.ColumnMergeRule.createRule(e):void 0===e?void 0:null,(e=this.grid)&&e._columnMergeRuleChanged(this))}}),_dp(d,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(e){e!==this._breakMergeOnEmpty&&(this._breakMergeOnEmpty=e,(e=this.grid)&&e._columnMergeRuleChanged(this))}}),d.prototype.isBreakMergeOnEmpty=function(){return void 0===this._breakMergeOnEmpty?this._columnObj instanceof jt.DataColumn&&this._columnObj.breakMergeOnEmpty:this._breakMergeOnEmpty},_dp(d,"equalBlank",{get:function(){return this._equalBlank},set:function(e){e!==this._equalBlank&&(this._equalBlank=e,this._changed())}}),_dp(d,"equalBlankNode",{get:function(){return this._blankNodeRun}}),_dp(d,"blanked",{get:function(){return this._blanked}}),_dp(d,"equalBlankExpression",{get:function(){return this._equalBlankExpression},set:function(e){e!==this._equalBlankExpression&&(this._equalBlankExpression=e,this._equalBlankNode=e?b.ExpressionParser.Default.parse(e,null):void 0===e?void 0:null,this._changed())}}),_dp(d,"cellSpan",{get:function(){return this._cellSpan},set:function(e){(e=Math.max(1,e))!=this._cellSpan&&(this._cellSpan=e,this._changed())}}),_dp(d,"headerSpan",{get:function(){return this._headerSpan},set:function(e){e!=this._headerSpan&&(void 0!==e&&(e=Math.max(1,e)),this._headerSpan=e,this._changed())}}),_dp(d,"summarySpan",{get:function(){return this._summarySpans?this._summarySpans[0]:void 0},set:function(e){this._summarySpans=this._summarySpans||[],e!=this._summarySpans[0]&&(void 0!==e&&(e=Math.max(1,e)),this._summarySpans[0]=e,this._changed())}}),_dp(d,"summarySpans",{get:function(){return this._summarySpans&&this._summarySpans.slice()},set:function(e){e!==this._summarySpans&&(this._summarySpans=e&&e.slice(),this._changed())}}),_dp(d,"footerSpan",{get:function(){return this._footerSpans&&this._footerSpans[0]},set:function(e){this._footerSpans=this._footerSpans||[],e!=this._footerSpans[0]&&(void 0!==e&&(e=Math.max(1,e)),this._footerSpans[0]=e,this._changed())}}),_dp(d,"footerSpans",{get:function(){return this._footerSpans&&this._footerSpans.slice()},set:function(e){e!==this._footerSpans&&(this._footerSpans=e&&e.slice(),this._changed())}}),_dp(d,"dataSpan",{get:function(){return this._dataSpan},set:function(e){e!=this._dataSpan&&(void 0!==e&&(e=Math.max(1,e)),this._dataSpan=e,this._changed())}}),_dp(d,"groupFooterSpan",{get:function(){return this._groupFooterSpans&&this._groupFooterSpans[0]},set:function(e){this._groupFooterSpans=this._groupFooterSpans||[],e!=this._groupFooterSpans[0]&&(void 0!==e&&(e=Math.max(1,e)),this._groupFooterSpans[0]=e,this._changed())}}),_dp(d,"groupFooterSpans",{get:function(){return this._groupFooterSpans&&this._groupFooterSpans.slice()},set:function(e){e!==this._groupFooterSpans&&(this._groupFooterSpans=e&&e.slice(),this._changed())}}),_dp(d,"spanCallback",{get:function(){return this._spanCallback},set:function(e){e!=this._spanCallback&&(this._spanCallback=e,this._changed())}}),_dp(d,"summarySpanCallback",{get:function(){return this._summarySpanCallback},set:function(e){e!=this._summarySpanCallback&&(this._summarySpanCallback=e,this._changed())}}),_dp(d,"footerSpanCallback",{get:function(){return this._footerSpanCallback},set:function(e){e!=this._footerSpanCallback&&(this._footerSpanCallback=e,this._changed())}}),_dp(d,"groupFooterSpanCallback",{get:function(){return this._groupFooterSpanCallback},set:function(e){e!=this._groupFooterSpanCallback&&(this._groupFooterSpanCallback=e,this._changed())}}),_dp(d,"footerUserSpans",{get:function(){return this._footerUserSpans},set:function(e){this._footerUserSpans=p.Utils.makeArray(e,!0).slice(),this._changed()}}),_dp(d,"summaryUserSpans",{get:function(){return this._summaryUserSpans},set:function(e){this._summaryUserSpans=p.Utils.makeArray(e,!0).slice(),this._changed()}}),_dp(d,"groupFooterUserSpans",{get:function(){return this._groupFooterUserSpans},set:function(e){this._groupFooterUserSpans=p.Utils.makeArray(e,!0).slice(),this._changed()}}),_dp(d,"groupFooterUserSpanCallback",{get:function(){return this._groupFooterUserSpanCallback},set:function(e){e!=this._groupFooterUserSpanCallback&&(this._groupFooterUserSpanCallback=e,this._changed())}}),d.prototype.canMerge=function(){return null!=this._mergeRuleObj||(this._columnObj instanceof jt.DataColumn?!!this._columnObj.mergeGrouped||(void 0===this._mergeRuleObj?null!=this._columnObj._mergeRuleObj:void 0):void 0)},_dp(d,"isNull",{get:function(){return!this._columnObj}}),_dp(d,"cols",{get:function(){return this._cols}}),_dp(d,"headerRows",{get:function(){return 1}}),_dp(d,"rows",{get:function(){return this._rows}}),_dp(d,"first",{get:function(){return this}}),_dp(d,"last",{get:function(){return this}}),_dp(d,"firstColumn",{get:function(){return this._columnObj}}),_dp(d,"lastColumn",{get:function(){if(this._columnObj)return this._columnObj;for(var e=this.parent.visibles,t=e.indexOf(this);0<t--;){var n=e[t];if(n instanceof d&&n.lastColumn)return n.lastColumn}return null}}),_dp(d,"boundColumn",{get:function(){return this._columnObj}}),_dp(d,"displayText",{get:function(){return this._header&&this._header.text||this._columnObj&&this._columnObj.displayText||this.toString()}}),d.prototype.getHeaderSpan=function(){return void 0===this._headerSpan?this._cellSpan:this._headerSpan},d.prototype.getSummarySpan=function(e){var t,n=this._summarySpanCallback,r=this._summarySpans;return n?void 0===(t=n(this.grid.handler,this,e))&&r&&r.length>e&&(t=r[e]):r&&r.length>e&&(t=r[e]),void 0===t?this._cellSpan:t},d.prototype.getFooterSpan=function(e){var t,n=this._footerSpanCallback,r=this._footerSpans;return n?void 0===(t=n(this.grid.handler,this,e))&&r&&r.length>e&&(t=r[e]):r&&r.length>e&&(t=r[e]),void 0===t?this._cellSpan:t},d.prototype.getFooterUserSpan=function(e){return this._footerUserSpans&&this._footerUserSpans[e]},d.prototype.getSummaryUserSpan=function(e){return this._summaryUserSpans&&this._summaryUserSpans[e]},d.prototype.getGroupFooterUserSpan=function(e,t){var n,r=this._groupFooterUserSpanCallback;return(n=r?r(this.grid.handler,this,e,e.index,t):n)||this._groupFooterUserSpans&&this._groupFooterUserSpans[t]},d.prototype.getGroupFooterSpan=function(e,t){var n,r=this._groupFooterSpanCallback,i=this._groupFooterSpans;return r?void 0===(n=r(this.grid.handler,this,e,t))&&i&&i.length>t&&(n=i[t]):i&&i.length>t&&(n=i[t]),void 0===n?this._cellSpan:n},d.prototype.getDataSpan=function(){return void 0===this._dataSpan?this._cellSpan:this._dataSpan},d.prototype.getDataColumn=function(){return this._columnObj},d.prototype._createHeader=function(){return new m(this)},d.prototype._isResizable=function(){return!this._columnObj||this._columnObj.resizable},d.prototype._isMovable=function(){for(var e=!0,t=this.parent;t;)e=e&&t.childColumnMovable,t=t.parent;return e&&(!this._columnObj||this._columnObj.movable)},d.prototype.isColumn=function(e){return this._columnObj===e},d.prototype.findLayout=function(e){return e&&this._columnObj===e?this:null},d.prototype.load=function(e){this.assignFrom(e),a.prototype.load.call(this,e),this._columnObj||"string"!=typeof this._column||(e=this.owner&&this.owner.grid,this._columnObj=e?e.columnByName(this._column):null)},d.prototype.cleanColumns=function(){this._columnObj&&this._columnObj.clean()},d.prototype.$_isVisible=function(e){return e?this._visible:this._visible&&(!this._columnObj||this._columnObj.visible)},d.prototype._getWidth=function(e){return isNaN(e)?this._columnObj?this._columnObj.width:NaN:e},d.prototype._getFillWidth=function(e){return isNaN(e)?this._columnObj?this._columnObj.fillWidth:NaN:e},d.prototype._prepareLayout=function(e,t,n){a.prototype._prepareLayout.call(this,e,t,n),this._columnObj&&(this._columnObj._prepareLayout(e,this),e=this.parent.direction===f.VERTICAL?this.cellSpan+this._dspan-1:this._dspan,(this._blanked=e===this.owner.dataRows)&&(this._blankNodeRun=this._equalBlankNode,this._blanked=this._equalBlank||null!=this._blankNodeRun,this._blanked||(void 0===this._equalBlankNode&&(this._blanked=null!=(this._blankNodeRun=this._columnObj._equalBlankNode)),this._blanked||void 0!==this._equalBlank||(this._blanked=this._columnObj._equalBlank))))},d.prototype.toString=function(){return"string"==typeof this._column?this._column:a.prototype.toString.call(this)},d.prototype.clearMergeGrouped=function(){this.firstColumn instanceof jt.DataColumn&&this.firstColumn.$_setMergeGrouped(!1)},d.prototype.$_bindColumn=function(e,t,n){if(void 0===n&&(n=!1),this._columnObj||(this._columnObj=t.columnByName(this._column)),this._columnObj){t=this._columnObj.$_hash;if(e[t])throw"Column is already contained in layouts: "+(this._columnObj.name||this._columnObj.displayText);n||(this._columnObj._layout=this),n||(this._columnObj._layout=this),e[t]=this}},d.prototype.$_mergeRuleObj=function(){return this._mergeRuleObj||(void 0===this._mergeRuleObj&&this._columnObj instanceof jt.DataColumn?this._columnObj._mergeRuleObj:null)},d);t.CellLayoutColumnItem=h,(c=f=t.ColumnLayoutDirection||(t.ColumnLayoutDirection={})).VERTICAL="vertical",c.HORIZONTAL="horizontal";var v,m=(v=y.Base,l.__extends(g,v),_dp(g,"layout",{get:function(){return this._layout}}),_dp(g,"text",{get:function(){return this._text},set:function(e){e!=this._text&&(this._text=e,this._changed())}}),_dp(g,"styleName",{get:function(){return this.layout.firstColumn.header.styleName},set:function(e){this.layout.firstColumn.header.styleName=e}}),_dp(g,"exportStyleName",{get:function(){return this.layout.firstColumn.header.exportStyleName},set:function(e){this.layout.firstColumn.header.exportStyleName=e}}),g.prototype.isVisible=function(){return!0},g.prototype.getDisplayText=function(){return this._text},g.prototype.doAssignSimple=function(e){return"string"==typeof e&&(this.text=e,!0)},g.prototype._changed=function(){this._layout&&this._layout._headerChanged()},g);t.CellLayoutHeader=m;var w,E=(w=m,l.__extends(S,w),_dp(S,"visible",{get:function(){return this._visible},set:function(e){e!=this._visible&&(this._visible=e,this._changed())}}),_dp(S,"template",{get:function(){return this._template&&this._template.template},set:function(e){e!=this.template&&(e?(this.template||(this._template=new kt.HtmlTemplateParser),this._template.template=e):this._template=void 0,this._changed())}}),_dp(S,"values",{get:function(){return this._values},set:function(e){e!==this._values&&(e?p.Utils.extendObj(e,this._values={}):this._values=void 0,this._changed())}}),_dp(S,"showTooltip",{get:function(){return this._showTooltip},set:function(e){e!==this._showTooltip&&(this._showTooltip=e,this._changed())}}),_dp(S,"tooltip",{get:function(){return this._tooltip},set:function(e){e!==this._tooltip&&(this._tooltip=e,this._changed())}}),_dp(S,"edgeMark",{get:function(){return this._edgeMark},set:function(e){e!==this._edgeMark&&(this._edgeMark=e,this._changed())}}),_dp(S,"styleName",{get:function(){return this._styleName},set:function(e){e!==this._styleName&&(this._styleName=e,this._changed())}}),_dp(S,"exportStyleName",{get:function(){return this._exportStyleName},set:function(e){this._exportStyleName=e}}),S.prototype.realizeTemplate=function(){var e=this._template;if(e)return e.realizeHeader(this,null,this._layout.grid)},S.prototype.getValue=function(e){return this._values&&this._values[e]},S.prototype.doAssignSimple=function(e){return!w.prototype.doAssignSimple.call(this,e)&&"boolean"==typeof e&&(this.visible=e,!0)},S.prototype.isVisible=function(){return this._visible},S.prototype.getDisplayText=function(){return this.text||this.layout.name},_dp(S,"displayText",{get:function(){return this.getDisplayText()}}),S);t.CellLayoutGroupHeader=E;var T,N=(T=r,l.__extends(C,T),C.getRight=function(e){var t=e&&e.parent;return t?e=(e=t.rightOf(e))||C.getRight(t):null},C.getLeft=function(e){var t=e&&e.parent;return t?e=(e=t.leftOf(e))||C.getLeft(t):null},C.getNext=function(e){var t=e&&e.parent;return t?e=(e=t.nextOf(e))||C.getNext(t):null},C.getPrev=function(e){var t=e&&e.parent;return t?e=(e=t.prevOf(e))||C.getPrev(t):null},C.getLower=function(e){var t=e&&e.parent;return t?e=(e=t.lowerOf(e))||C.getLower(t):null},C.getUpper=function(e){var t=e&&e.parent;return t?e=(e=t.upperOf(e))||C.getUpper(t):null},C.isTop=function(e){for(var t=e&&e.parent;t;){if(t.vertical&&1<t.visibleCount&&0<e.vindex)return!1;t=(e=t).parent}return!0},C.isBottom=function(e){for(var t=e&&e.parent;t;){if(t.vertical&&1<t.visibleCount&&e.vindex<t.visibleCount-1)return!1;t=(e=t).parent}return!0},C.isLeft=function(e){for(var t=e&&e.parent;t;){if(!t.vertical&&1<t.visibleCount&&0<e.vindex)return!1;t=(e=t).parent}return!0},C.isRight=function(e){for(var t=e&&e.parent;t;){if(t.vertical&&1<t.visibleCount&&e.vindex<t.visibleCount-1)return!1;t=(e=t).parent}return!0},C.prototype._doDispose=function(){this._items.forEach(function(e){e&&e.dispose()}),this._visibles=this._items=null,T.prototype._doDispose.call(this)},_dp(C,"name",{get:function(){return this._name}}),_dp(C,"direction",{get:function(){return this._direction},set:function(e){(e=e!=f.VERTICAL?f.HORIZONTAL:e)!=this._direction&&(this._direction=e,this._changed())}}),_dp(C,"vertical",{get:function(){return this._direction==f.VERTICAL}}),_dp(C,"horizontal",{get:function(){return this._direction!=f.VERTICAL}}),_dp(C,"resizable",{get:function(){return this._resizable},set:function(e){this._resizable=e}}),_dp(C,"movable",{get:function(){return this._movable},set:function(e){this._movable=e}}),_dp(C,"hideChildHeaders",{get:function(){return this._hideChildHeaders},set:function(e){e!=this._hideChildHeaders&&(this._hideChildHeaders=e,this._changed())}}),_dp(C,"childColumnMovable",{get:function(){return this._childColumnMovable},set:function(e){this._childColumnMovable=e}}),_dp(C,"count",{get:function(){return this._items.length}}),_dp(C,"items",{get:function(){return this._items.slice()},set:function(e){this._items=e?e.slice():[];for(var t=0,n=this._items;t<n.length;t++)n[t]._parent=this;this._changed()}}),_dp(C,"visibleCount",{get:function(){return this._visibles.length}}),_dp(C,"visibles",{get:function(){return this._visibles.slice()}}),C.prototype.$_isVisible=function(e){return this.visible&&0<this._visibles.length},C.prototype.contains=function(e){for(var t=0,n=this._items;t<n.length;t++)if(n[t]===e)return!0;return!1},C.prototype.indexOf=function(e){for(var t=0;t<this._items.length;t++)if(this._items[t]===e)return t;return-1},C.prototype.getItem=function(e){return this._items[e]},C.prototype.getVisible=function(e){return this._visibles[e]},C.prototype.addColumn=function(e,t){e=new h(e),this.addItem(e,t)},C.prototype.addItem=function(e,t){void 0===t&&(t=this._items.length),null!=e&&0<=t&&t<=this._items.length&&(this._items.splice(t,0,e),(e._parent=this)._changed())},C.prototype.removeColumn=function(e){e=e.layout,this.removeItem(e)},C.prototype.clear=function(e){void 0===e&&(e=!0);for(var t=0,n=this._items;t<n.length;t++){var r=n[t];e&&r instanceof C&&r.clear(),r._detach()}this._items=[],this._visibles=[],this._cols=0,this._rows=0,this._headerRows=0},C.prototype.removeItem=function(e){var t=this.indexOf(e);0<=t&&(this._items.splice(t,1),e._detach(),this._changed())},C.prototype.removeItemAt=function(e){0<=e&&e<this._items.length&&this._items.splice(e,1)[0]._detach()},C.prototype.moveItem=function(e,t){var n=this._items.length;e!=t&&0<=e&&e<n&&0<=t&&t<n&&(n=this._items[e],this._items.splice(e,1),this._items.splice(t,0,n))},C.prototype.getColumn=function(e,t,n){return n=this.$_getLeaf(t,n).column,"string"==typeof n?e.columnByName(n):n},C.prototype.findItem=function(e){if(e)for(var t=0,n=this._items;t<n.length;t++){var r=n[t];if(r instanceof h&&r.column===e)return r;if(r instanceof C){r=r.findItem(e);if(r)return r}}return null},C.prototype.layoutByName=function(e){if(e)for(var t=0,n=this._items;t<n.length;t++){var r=n[t];if(r instanceof h&&r.firstColumn.name===e)return r;if(r instanceof C){if(r.name===e)return r;r=r.layoutByName(e);if(r)return r}}return null},C.prototype.rightOf=function(e){if(this.horizontal)try{var t=this.$_checkVisible(e);if(t<this.visibleCount-1)return e=L(this,t+1)}catch(e){}return null},C.prototype.leftOf=function(e){if(this.horizontal)try{var t=this.$_checkVisible(e);if(0<t)return e=A(this,t-1)}catch(e){}return null},C.prototype.nextOf=function(e){try{var t=this.$_checkVisible(e);if(t<this.visibleCount-1)return e=O(this,t+1)}catch(e){}return null},C.prototype.prevOf=function(e){try{var t=this.$_checkVisible(e);if(0<t)return e=M(this,t-1)}catch(e){}return null},C.prototype.lowerOf=function(e){if(this.vertical)try{var t=this.$_checkVisible(e);if(t<this.count-1)return e=_(this,t+1)}catch(e){}return null},C.prototype.upperOf=function(e){if(this.vertical)try{var t=this.$_checkVisible(e);if(0<t)return e=D(this,t-1)}catch(e){}return null},C.prototype._clearFitWidth=function(){T.prototype._clearFitWidth.call(this);for(var e=0,t=this._visibles;e<t.length;e++)t[e]._clearFitWidth()},_dp(C,"cellWidth",{get:function(){return this.owner.getCellWidths(this._col,this._clen)},set:function(e){var t=!!this.grid&&this.grid.layoutManager.isColumnFitted;this.changeCellWidth(e,t,!0)}}),_dp(C,"cols",{get:function(){return this._cols}}),_dp(C,"headerRows",{get:function(){return this._headerRows}}),_dp(C,"rows",{get:function(){return this._rows}}),_dp(C,"first",{get:function(){return 0<this._visibles.length?this._visibles[0].first:this}}),_dp(C,"last",{get:function(){var e=this._visibles?this._visibles.length:0;return 0<e?this._visibles[e-1].last:this}}),_dp(C,"firstColumn",{get:function(){return this._visibles&&0<this._visibles.length?this._visibles[0].firstColumn:null}}),_dp(C,"lastColumn",{get:function(){for(var e=this._visibles?this._visibles.length-1:-1;0<=e;e--){var t=this._visibles[e].lastColumn;if(t)return t}return null}}),_dp(C,"boundColumn",{get:function(){return this.firstColumn}}),C.prototype._createHeader=function(){return new E(this)},C.prototype.load=function(e){this.clear(),void 0!==e.hideChildHeaders&&(this.hideChildHeaders=e.hideChildHeaders),e.items&&this._loadItems(e.items),T.prototype.load.call(this,e)},C.prototype.findLayout=function(e){for(var t=0,n=this._items;t<n.length;t++){var r=n[t].findLayout(e);if(r)return r}return null},C.prototype.cleanColumns=function(){for(var e=0,t=this.items.length;e<t;e++)this.getItem(e).cleanColumns()},C.prototype._isResizable=function(){return this._resizable},C.prototype._isMovable=function(){for(var e=this._movable,t=this.parent;t;)e=e&&t.childColumnMovable,t=t.parent;return e},C.prototype._setFitWidth=function(e){if(T.prototype._setFitWidth.call(this,e),this.vertical)for(var t=0,n=this._visibles;t<n.length;t++)(a=n[t])instanceof h?(f=a._cellWidth/this.cellWidth*e,a._setFitWidth(f)):a._setFitWidth(e);else{for(var r=0,i=0,s=this._visibles;i<s.length;i++)r+=(a=s[i])._cellWidth;for(var o=0,u=this._visibles;o<u.length;o++){var a,f=(a=u[o])._cellWidth/r*e;a._setFitWidth(f)}}},C.prototype._prepareLayout=function(e,t,n){T.prototype._prepareLayout.call(this,e,t,n);for(var r=0,i=this._visibles;r<i.length;r++)i[r]._prepareLayout(e,t,n)},C.prototype.toString=function(){return this._name||T.prototype.toString.call(this)},C.prototype.clearMergeGrouped=function(){for(var e=0,t=this.items.length;e<t;e++)this.getItem(e).clearMergeGrouped()},C.prototype._loadItems=function(e){for(var t,n=0,r=0,i=e;r<i.length;r++){var s=i[r],u=void 0;n++,"string"==typeof s?t=u=new h(s):"number"==typeof s?(u=new o(t,n))._width=s:s&&(s.items?u=new C(s.name,s.direction):t=u=new h(s.column)),u&&(u._parent=this,u.load(s),this._items.push(u))}},C.prototype.$_bindColumns=function(e,t,n){for(var r=0,i=this._items;r<i.length;r++){var s=i[r];s._root=null,s instanceof C?s.$_bindColumns(e,t,n):s.isProxy||s.$_bindColumn(e,t,n)}},C.prototype.$_parseHeaderCells=function(e,t,n){var r=this._direction===f.HORIZONTAL,i=0,s=this._header.isVisible()?1:0;if(s&&this._hideChildHeaders)return this._cspan=this._clen=this._cols,void (this._hlen=this._headerRows);for(var u=0,a=this._visibles;u<a.length;u++){var l=a[u],c=!l.isProxy&&l.header.isVisible()||l.isProxy&&!r?1:0;if(l._hrow=t,l._hcol=n,l._hspan=c,l._hlen=c,l instanceof C)if(0<c&&(e[t][n]=l),l.$_parseHeaderCells(e,t+c,n),0<c)if(r){n++;for(var h=1;h<l.cols;h++)e[t][n++]=new o(l,h)}else{for(h=1;h<l.cols;h++)e[t][n+h]=new o(l,h);t+=l.headerRows}else r?n+=l.cols:t+=l.headerRows;else if(e[t][n]=l,r){for(h=1;h<this.headerRows-s;h++)e[t+h][n]=new o(l,h),l._hspan++;l._hlen=l._hspan,n+=l.cols}else{for(h=1;h<this.cols;h++)e[t][n+h]=new o(l,h);t+=l.rows}r?i=Math.max(l._hlen,i):i+=l._hlen}this._hlen=r?i+s:Math.max(1,i+s)},C.prototype.$_fillHorz=function(e,t,n,r,i,s,u){for(var a=r+s,f=i,l=f+n-1,c=0,p=t-s;c<p;c++)for(var d=l;f<=d;d--){var v=e[a+c][d];if(null!=v){v instanceof o&&(v=v.source);for(var m=d+1;m<=l;m++){var g=e[a+c][m]=new o(v,m-f);u?(g._hrow=a+c,g._hcol=m):(g._row=a+c,g._col=m,v.row===g.row&&(v._cspan++,v instanceof h&&v._clen++))}break}}},C.prototype.$_fillVert=function(e,t,n,r,i,s,u){for(var a=r+s,f=r+t-1,l=i+n-1,c=i;c<=l;c++)for(var p=f;a<=p;p--){var d=e[p][c];if(null!=d){d instanceof o&&(d=d.source);for(var v=p+1;v<=f;v++){var m=e[v][c]=new o(d,v-a);u?(m._hrow=v,m._hcol=c,d.hcol===m.hcol&&(d._hspan++,d instanceof h&&d._hlen++)):(m._row=v,m._col=c,d.col===m.col&&(d._dspan++,d instanceof h&&d._dlen++))}break}}},C.prototype.$_adjustHeaderCells=function(e){var t=this._header.isVisible()?1:0;if(t&&this._hideChildHeaders){this._hspan=this._hlen;for(var n=0,r=0;r<this._hlen;r++)for(var i,s,u,a=0;a<this._clen;a++)(r||a)&&(i=this._hrow+r,s=this._hcol+a,(u=e[i][s]=new o(this,n++))._hrow=i,u._hcol=s)}else if(this._direction===f.VERTICAL){for(var l=this._clen,c=0,h=this._visibles;c<h.length;c++)(p=h[c])instanceof C&&(p._clen=this._clen,p.$_adjustHeaderCells(e));this.$_fillVert(e,this._hlen,l,this._hrow,this._hcol,t,!0),this.$_fillHorz(e,this._hlen,l,this._hrow,this._hcol,t,!0)}else{for(var p,d=0,v=this._visibles;d<v.length;d++)(p=v[d])instanceof C&&(p._hlen=this._hlen-t,p.$_adjustHeaderCells(e));this.$_fillVert(e,this._hlen,this._cols,this._hrow,this._hcol,t,!0),this.$_fillHorz(e,this._hlen,this._cols,this._hrow,this._hcol,t,!0)}},C.prototype.$_parseDataCells=function(e,t,n){for(var r,i=this._direction!=f.VERTICAL,s=0,u=0,a=0,l=this._visibles;a<l.length;a++){var c=l[a];if(c._row=t,c._col=n,c._dspan=1,c._dlen=1,c._cspan=1,c._clen=1,c instanceof C){if(c.$_parseDataCells(e,t,n),i)n+=c.cols;else if(t+=c.rows,2==this.rows){for(var h=1/0,p=0,d=0,v=this.visibles;d<v.length;d++)var m=v[d],h=Math.min(h,m.cols),p=Math.max(p,m.cols);if(1===h&&1<p)for(var g=0,y=this.visibles;g<y.length;g++)(m=y[g]).ignoreCalcWidth=1===m.cols}}else if(e[t][n]=c,i){for(var b=1;b<this.rows;b++)e[t+b][n]=r=new o(c,b),c._dspan++,r._col=n,r._row=t+b;c._dlen=c._dspan,n+=c.cols}else{for(b=1;b<this.cols;b++)e[t][n+b]=r=new o(c,b),c._cspan++,r._col=n+b,r._row=t;c._clen=c._cspan,t+=c.rows}i?(u+=c._clen,s=Math.max(c._dlen,s)):(u=Math.max(c._clen,u),s+=c._dlen)}i?(u=Math.max(1,u),this._dlen=s):this._dlen=Math.max(1,s),this._cspan=this._clen=u},C.prototype.$_adjustDataCells=function(e){if(this._direction===f.VERTICAL){for(var t=0,n=this._visibles;t<n.length;t++)(r=n[t])instanceof C&&(r._cspan=r._clen=this._clen,r.$_adjustDataCells(e));this.$_fillVert(e,this._dlen,this._clen,this._row,this._col,0,!1),this.$_fillHorz(e,this._dlen,this._clen,this._row,this._col,0,!1)}else{for(var r,i=0,s=this._visibles;i<s.length;i++)(r=s[i])instanceof C&&(r._dlen=this._dlen,r.$_adjustDataCells(e));this.$_fillVert(e,this._dlen,this._clen,this._row,this._col,0,!1),this.$_fillHorz(e,this._dlen,this._clen,this._row,this._col,0,!1)}},C.prototype.$_calcSpans=function(){var e=this._header.isVisible();if(this._direction==f.HORIZONTAL){for(var t=0,n=1,r=1,i=0,s=this._visibles;i<s.length;i++)(a=s[i])instanceof C&&a.$_calcSpans(),t+=a.cols,n=Math.max(n,a.headerRows),r=Math.max(r,a.rows);this._rows=r,this._cols=t,e&&this._hideChildHeaders?this._headerRows=1:this._headerRows=n+(e?1:0)}else{this._cols=1,this._headerRows=e?1:0;for(var o=this._rows=0,u=this._visibles;o<u.length;o++)(a=u[o])instanceof C&&a.$_calcSpans(),this._headerRows+=a.headerRows,this._rows+=a.rows,this._cols=Math.max(a.cols,this._cols);for(var a,l=0,c=this._visibles;l<c.length;l++)(a=c[l])instanceof C&&(a._cols=this._cols);e&&this._hideChildHeaders&&(this._headerRows=1)}},C.prototype.$_resetVisibles=function(e){var t=0,n=0,r=this.visibles;this._visibles=[];for(var i=0,s=this._items;i<s.length;i++){var o=s[i];o._index=t++,o instanceof C&&o.$_resetVisibles(e),o.$_isVisible(e)&&(this._visibles.push(o),o._vindex=n++)}if(!(e||this instanceof j||r.length==this._visibles.length||this.direction!==f.HORIZONTAL))for(var u=this;u;)u._cellWidth=NaN,u.width=NaN,u=u.parent;this.$_calcSpans()},C.prototype.$_getLeaf=function(e,t){for(var n=0,r=this._visibles;n<r.length;n++){var i=r[n];if(i instanceof C){var s=i.row,o=s+i.rows;if(s<=e&&e<o){var u=i.col,o=u+i.cols;if(u<=t&&t<o)return this.$_getLeaf(e-s,t-u)}}else if(i.row===e&&i.col===t)return i}return null},C.prototype.$_collectCellWidths=function(e){for(var t=[],n=0,r=this._visibles;n<r.length;n++){var i,s=r[n],o=s._cellWidth||s.width;s instanceof h&&isNaN(o)&&(o=e),s instanceof C&&(i=s.$_collectCellWidths(e),isNaN(o)&&(o=i)),s._cellWidth=o,t.push(o)}var u=this.width;return u=isNaN(u)?this.vertical?Math.max.apply(null,t):t.reduce(function(e,t){return e+t},0):u},C.prototype.$_arrangeCellWidths=function(){var e=this._visibles.length;if(!(e<1)){var t=this._cellWidth||this.width,n=this._visibles;if(!isNaN(t))if(this.vertical)for(var r=0;r<e;r++)n[r]instanceof C&&(n[r]._cellWidth=t);else{for(var i=0,s=0,o=n;s<o.length;s++)i+=(a=o[s])._cellWidth;for(var u=0,r=0;r<e-1;r++){var a=n[r],f=Math.floor(t*a._cellWidth/i);u+=n[r]._cellWidth=f}n[e-1]._cellWidth=t-u}for(var l=0,c=n;l<c.length;l++)(a=c[l])instanceof C&&a.$_arrangeCellWidths()}},C.prototype.$_calcCellWidths=function(e,t,n){if(!n){for(var r=t.slice(),i=0;i<r.length;i++)r[i]=0;var s=this.owner._moveColumn,o=e.slice();s&&(n=o.splice(s.first.row,1),o.splice(0,0,n[0]));for(var u=0;u<o.length;u++)for(var a=o[u],f=0;f<a.length;f++){var l=a[f];s?t[f]=t[f]||l._cellWidth:l.isProxy&&!(0<l._cellWidth)||l.ignoreCalcWidth||(t[f]+=l._cellWidth,r[f]++)}for(i=0;i<t.length;i++)t[i]=Math.round(t[i]/Math.max(r[i],1))}for(u=0;u<e.length;u++)for(a=e[u],f=0;f<a.length;f++)a[f]._cellWidth=t[f]},C.prototype._childIndexChanged=function(e){this.parent&&this.parent._childIndexChanged(e)},C.prototype._childWidthChanged=function(e){this.parent&&this.parent._childWidthChanged(e)},C.prototype._childFillWidthChanged=function(e){this.parent&&this.parent._childFillWidthChanged(e)},C.prototype.$_checkVisible=function(e){var t;if(!e||(t=e.vindex)<0||e!==this.getVisible(t))throw new Error("Column is not a visible group member");return t},C.prototype.$_collectHorzColumns=function(e,t,n){if(this.horizontal)for(var r=t;r<=n;r++){var i=this._visibles[r];i instanceof C?i.$_collectHorzColumns(e,0,i.visibleCount-1):i instanceof h&&e.push(i._columnObj)}},C.prototype.$_changeChildVIndex=function(e,t){e&&t!=e.vindex&&0<=t&&t<this._visibles.length&&this.$_changeChildIndex(e,this._visibles[t].index)},C.prototype.$_changeChildIndex=function(e,t){if(e){var n=e.index;if(n!=t&&0<=t&&t<this._items.length){t=t<=n?t:t+(this._items[t].getHeaderSpan()-1)-(e.getHeaderSpan()-1);for(var r=this._items.splice(n,e.getHeaderSpan()),i=0;i<r.length;i++)this._items.splice(t+i,0,r[i]);this.$_resetVisibles(),this._childIndexChanged(e)}}},C);t.CellLayoutGroupItem=
N;var k,L=function(e,t){for(var n=t,r=e.visibleCount;n<r;n++){var i=e.getVisible(n);if(i instanceof h)return i;if(i instanceof N&&(i=i.first)instanceof h)return i}return null},A=function(e,t){for(var n=t;0<=n;n--){var r=e.getVisible(n);if(r instanceof h)return r;if(r instanceof N&&(r=r.last)instanceof h)return r}return null},O=function(e,t){for(var n=t,r=e.visibleCount;n<r;n++){var i=e.getVisible(n);if(i instanceof h)return i;if(i instanceof N&&(i=i.first)instanceof h)return i}return null},M=function(e,t){for(var n=t;0<=n;n--){var r=e.getVisible(n);if(r instanceof h)return r;if(r instanceof N&&(r=r.last)instanceof h)return r}return null},_=function(e,t){for(var n=t,r=e.visibleCount;n<r;n++){var i=e.getVisible(n);if(i instanceof h)return i;if(i instanceof N&&(i=i.first)instanceof h)return i}return null},D=function(e,t){for(var n=t;0<=n;n--){var r=e.getVisible(n);if(r instanceof h)return r;if(r instanceof N)for(var i=0;i<r.visibleCount;i++){var s=r.getVisible(i);if(s instanceof h&&s.col==e.col)return s}}return null},P=function(e,t,n){for(var r=n?e.visibleCount:e.count,i=0;i<r;i++){var s,o=n?e.getVisible(i):e.getItem(i);o instanceof h?(s=o._columnObj)&&t.push(s):o instanceof N&&P(o,t,n)}},H=function(e,t,n,r,i){for(var s=r?e.visibleCount:e.count,o=0;o<s;o++){var u,a=r?e.getVisible(o):e.getItem(o);a instanceof h&&!i?(u=a._columnObj)&&t.push(u.name):a instanceof N&&(n&&!i||t.push(a.name),H(a,t,n,r,i))}},B=function(e,t,n){for(var r=n?e.visibleCount:e.count,i=0;i<r;i++){var s,o=n?e.getVisible(i):e.getItem(i);o instanceof h?(s=o._columnObj)instanceof jt.DataColumn&&t.push(s):o instanceof N&&B(o,t,n)}},j=(k=N,l.__extends(F,k),_dp(F,"cellWidth",{get:function(){return this._cellWidth},set:function(e){}}),F.prototype.resetColumns=function(e){0<this.items.length&&(this.$_bindColumns({},e,!1),this.$_resetVisibles(!1))},_dp(F,"grid",{get:function(){return this._owner.grid}}),_dp(F,"owner",{get:function(){return this._owner}}),_dp(F,"root",{get:function(){return this}}),F.prototype._changed=function(){this._owner&&this._owner._changed()},F.prototype._childIndexChanged=function(e){this._owner._itemIndexChanged(e)},F.prototype._childWidthChanged=function(e){this._owner._itemWidthChanged(e)},F.prototype._childFillWidthChanged=function(e){this._owner._itemFillWidthChanged(e)},F.prototype._setColumns=function(e){for(var t=this._items,n=t.length=0,r=e.count;n<r;n++){var i=new h(e.getColumn(n));t.push(i),i._parent=this}this.resetColumns(e)},F),I,r=(I=x.EventAware,l.__extends(q,I),q.prototype._doDispose=function(){this._grid=null,this._root=this._root.dispose(),I.prototype._doDispose.call(this)},_dp(q,"grid",{get:function(){return this._grid}}),_dp(q,"count",{get:function(){return this._root.count}}),_dp(q,"visibleCount",{get:function(){return this._root.visibleCount}}),_dp(q,"headerRows",{get:function(){return this._root._hlen}}),_dp(q,"dataRows",{get:function(){return this._root._dlen}}),_dp(q,"first",{get:function(){return this._root.first}}),_dp(q,"last",{get:function(){return this._root.last}}),_dp(q,"firstColumn",{get:function(){return this._root.firstColumn}}),q.prototype.load=function(e){return this.$_clear(),this._root._loadItems(e),this._changed(),this},q.prototype.resetColumns=function(e){this._root.resetColumns(e)},q.prototype.cleanColumns=function(){this._root.cleanColumns()},q.prototype.invalidate=function(){this._changed()},q.prototype.invalidateIndices=function(e){this.grid.displayOptions.remergeWhenColumnMoved&&this.grid._populateMerges(),this.grid.clearSelection(),this._moveColumn=e,this._changed()},q.prototype.invalidateSize=function(){this._resized||(this._resized=!0,this.grid.invalidateCellLayouts())},q.prototype.getVisible=function(e){return this._root.getVisible(e)},q.prototype.add=function(e,t,n){(e=e||this._root).addColumn(t,n)},q.prototype.remove=function(e,t){(e=e||this._root).removeColumn(t)},q.prototype.setColumns=function(e){this._root._setColumns(e),this._changed()},q.prototype.layoutByColumn=function(e){return e&&this._root.findLayout(e)},q.prototype.layoutByName=function(e){return e&&this._root.layoutByName(e)},q.prototype.getHeaderCellPos=function(e){for(var t=0;t<this._headerCells.length;t++)for(var n=this._headerCells[t],r=0;r<n.length;r++)if(n[r]instanceof h&&n[r]._columnObj===e)return{row:t,col:r}},q.prototype.getDataCellPos=function(e){for(var t=0;t<this._dataCells.length;t++)for(var n=this._dataCells[t],r=0;r<n.length;r++)if(n[r]instanceof h&&n[r]._columnObj===e)return{row:t,col:r}},q.prototype.getDataColumns=function(e){var t=[];return B(this._root,t,e=void 0===e?!0:e),t},q.prototype.collectColumns=function(e,t,n){var r=[];return P(this._root,r,t),r},q.prototype.collectColumnNames=function(e,t,n,r){var i=[],s=this._root;return r?"string"==typeof r?s=function o(e){for(var t=0,n=e.count;t<n;t++){var i=e.getItem(t);if(i instanceof N)return i.name===r?i:o(i)}}(s):r instanceof N&&(s=r):s=this._root,s?(H(s,i,e,t,n),i):null},q.prototype.collectDataColumns=function(e,t){var n=(e.col>t.col?t:e).col,r=(e.col>t.col?e:t).col,i=[];B(this._root,i,!0);for(var s=i.length-1;0<=s;s--){var o=i[s].layout.col;(o<n||r<o)&&i.splice(s,1)}return i},q.prototype.getHorzColumns=function(e,t){void 0===e&&(e=0);var n=null==t?e+this._root.visibleCount-1:e+t-1,t=[];return this._root.$_collectHorzColumns(t,e,n),t},q.prototype.getHomeOf=function(e){return e instanceof o&&(e=e.source),e=(e=this._dataCells[e?e.row:0][0])instanceof o?e.source:e},q.prototype.getEndOf=function(e){e instanceof o&&(e=e.source);var t=this._dataCells,n=e?e.row:t.length-1;return e=(e=t[n][t[n].length-1])instanceof o?e.source:e},q.prototype.getTopOf=function(e){return e=(e=this._dataCells[0][e.col])instanceof o?e.source:e},q.prototype.getBottomOf=function(e,t){var n=this._dataCells;return e=n[n.length-1][e.col],e=!t&&e instanceof o?e.source:e},q.prototype.getLowerOf=function(e){e instanceof o&&(e=e.source);var t=this._dataCells,n=e.row,r=e.col,i=0;return e=n+e.rows<t.length?t[n+e.rows][r]:(i=1,t[0][r]),{dy:i,layout:e=e instanceof o?e.source:e}},q.prototype.getUpperOf=function(e){e instanceof o&&(e=e.source);var t=this._dataCells,n=e.row,r=e.col,i=0;return e=0<n?t[n-1][r]:(i=-1,t[t.length-1][r]),{dy:i,layout:e=e instanceof o?e.source:e}},q.prototype.getRightOf=function(e){var t=this._dataCells[e.row],n=e.col;return n+e.cols<t.length?(e=t[n+e.cspan])instanceof o?e.source:e:null},q.prototype.getLeftOf=function(e){e instanceof o&&(e=e.source);var t=this._dataCells[e.row],n=e.col;return 0<n?(e=t[n-1])instanceof o?e.source:e:null},q.prototype.getCellWidths=function(e,t){for(var n=0,r=0;r<t;r++)n+=this._cellWidths[r+e];return n},q.prototype.getLayout=function(e,t,n,r,i){function s(o){if(o instanceof h){var u=o.firstColumn;if(u)return a=(a=u.visible&&o.visible||n)&&i.indexOf(u.name)<0||0<=r.indexOf(u.name),(c=o.toProxy(!1)).visible=e?a:o.visible,c.width=(e&&t?o._fitWidth:o._cellWidth)||o.width,c.column=u.name,c}else{if(o.isProxy)return(e&&t?o._fitWidth:o._cellWidth)||o.width;if(o instanceof N){var a,f=o._items,l=[];a=(a=o.visible||n)&&i.indexOf(o.name)<0||0<=r.indexOf(o.name);for(var c,p=0,d=f.length;p<d;p++)l.push(s.call(this,f[p]));return(c=o.toProxy(!1)).name=o.name,c.items=l,c.visible=e?a:o.visible,c.header=o.header&&o.header.toProxy(!1),delete c.width,c}}}void 0===r&&(r=[]),void 0===i&&(i=[]),t=t&&!!this.grid.layoutManager.isColumnFitted;for(var o=this._root._items,u=[],a=0,f=o.length;a<f;a++)u.push(s.call(this,o[a]));return u},q.prototype._changed=function(){var e;this._dirty||(this._dirty=!0,(e=this.grid)&&e.invalidateLayout())},q.prototype.$_clear=function(){this._headerCells=[],this._dataCells=[]},q.prototype.$_refresh=function(e,t){this._dirty?(this._root.$_bindColumns({},e),this._root.$_resetVisibles(),this.$_parseCells(this._root,e),this.$_calculateCellWidths(this._root,t),this._dirty=!1):this._resized&&this.$_calculateCellWidths(this._root,t),this._resized=!1,this._moveColumn=null},q.prototype.$_refresh2=function(e,t){this._root.$_bindColumns({},e,!0),this._root.$_resetVisibles(!0),this.$_parseCells(this._root,e),this.$_calculateCellWidths(this._root,t)},q.prototype.$_prepareMerges=function(e){for(var t=this.collectColumns(!0,!0,!1),n=0,r=t.length;n<r;n++){var i=t[n],s=this.layoutByColumn(i);s&&s.canMerge()&&((i=(i=s.merges)||new Bt.ColumnMergeManager(s)).clear(),i.initialize(10),i.refreshRooms(0,e.itemCount-1,!0))}},q.prototype.$_prepareLayout=function(e,t,n){for(var r=0,i=this._root.visibleCount;r<i;r++)this._root.getVisible(r)._prepareLayout(e,r<t,i-n<=r)},q.prototype.$_parseCells=function(e,t){e=e._visibles,this.$_parseHeaderCells(e),this.$_parseDataCells(e)},q.prototype.$_parseHeaderCells=function(e){for(var t=this._headerCells=[],n=0,r=0,i=e;r<i.length;r++)var s=i[r],n=Math.max(n,s.headerRows);for(var o=0;o<n;o++)t.push([]);this._root.$_parseHeaderCells(t,0,0),this._root.$_adjustHeaderCells(t)},q.prototype.$_parseDataCells=function(e){for(var t=this._dataCells=[],n=0,r=0,i=e;r<i.length;r++)var s=i[r],n=Math.max(n,s.rows);for(var o=0;o<n;o++)t.push([]);this._root.$_parseDataCells(t,0,0),this._root.$_adjustDataCells(t);for(var u=0,a=t;u<a.length;u++)for(var f=a[u],l=0;l<f.length;){var c=f[l];if(c._defColSpan=1,c.isNull)l++;else for(;++l<f.length;){var h=f[l];if(!(!h||h.isProxy&&h.source===c||h.isNull&&h.group===c.group))break;c._defColSpan++}}},q.prototype.$_calculateCellWidths=function(e,t){if(this._dirty){this._cellWidths&&!(this._cellWidths.length<=0)&&this._moveColumn||(e.$_collectCellWidths(t),e.$_arrangeCellWidths());for(var n=this._cellWidths=[],r=0,i=e.cols;r<i;r++)n.push(0);e.$_calcCellWidths(this._dataCells,n,!1)}else this._resized&&e.$_calcCellWidths(this._dataCells,this._cellWidths,!0)},q.prototype.$_clearFitWidths=function(){this._root._clearFitWidth()},q.prototype._columnsChanged=function(e){},q.prototype._columnChanged=function(e){},q.prototype._itemIndexChanged=function(e){this.invalidateIndices(e)},q.prototype._itemWidthChanged=function(e){this.invalidateSize()},q.prototype._itemFillWidthChanged=function(e){this.grid.layoutManager.isColumnFitted&&this.invalidateSize()},q.prototype._clearMergeGrouped=function(){this._root.clearMergeGrouped()},q.prototype.$_changeCellWidths=function(e,t,n){for(var r=this._cellWidths,i=[],s=0,o=0;o<t;o++)s+=r[e+o],i.push(s);for(var u=n/s,o=0;o<t-1;o++)i[o]=Math.round(i[o]*u);i[t-1]=n;for(o=t-1;0<o;o--)r[e+o]+=i[o]-i[o-1];r[e]+=i[0],this.invalidateSize()},q.prototype.$_calcGroupWidths=function(){var e=this._cellWidths;!function t(n){for(var r=0,i=0;i<n._clen;i++)r+=e[n.col+i];n._width=n._cellWidth=r;for(var s=0,o=n.visibles;s<o.length;s++){var u=o[s];u instanceof N&&t(u)}}(this._root)},q);t.GridCellLayout=r;var R,r=(R=r,l.__extends(U,R),U.prototype._columnsChanged=function(e){this.setColumns(e),R.prototype._columnsChanged.call(this,e)},U);t.DefaultCellLayout=r});t(Ft),Ft.CellLayoutItem,Ft.ProxyCellLayoutItem,Ft.CellLayoutColumnItem,Ft.ColumnLayoutDirection,Ft.CellLayoutHeader,Ft.CellLayoutGroupHeader,Ft.CellLayoutGroupItem,Ft.GridCellLayout,Ft.DefaultCellLayout;var It=n(function(e,t){function s(e,t,n){void 0===t&&(t=-1);var i=r.call(this,!0)||this;return i._itemIndex=-1,i._grid=e,i._itemIndex=t,i._layout=n instanceof jt.GridColumn?n.layout:n,i}function a(e,t,n){return n=o.call(this,e,t&&t.index,n)||this,n._item=t,n}function p(){var e=f.call(this)||this;return e._row1=0,e._row2=0,e}var n;Object.defineProperty(t,"__esModule",{value:!0}),(u=n=t.VerticalMoveStep||(t.VerticalMoveStep={})).ROW="row",u.CELL="cell";var r,i=(r=y.Base,l.__extends(s,r),s.temp=function(e,t,n){return void 0===t&&(t=0),(s.$_temp=s.$_temp?s.$_temp:new s)._grid=e,s.$_temp._itemIndex=t,s.$_temp._layout=n instanceof Ft.CellLayoutItem?n:n&&n.layout,s.$_temp},s.areEquals=function(e,t){return e==t||e&&t&&e._grid===t._grid&&e._itemIndex===t._itemIndex&&e._layout===t._layout},s.equalsTo=function(e,t,n){return e&&e._itemIndex===t&&e.layout===n},s.clearTemp=function(){s.$_temp&&(s.$_temp=s.$_temp.dispose())},s.compareHorz=function(e,t){if(e&&t)return e.layout.distance-t.layout.distance},s.prototype._doDispose=function(){this._grid=null,this._layout=null,r.prototype._doDispose.call(this)},_dp(s,"grid",{get:function(){return this._grid}}),_dp(s,"itemIndex",{get:function(){return this._itemIndex},set:function(e){this._itemIndex=e}}),_dp(s,"layout",{get:function(){return this._layout},set:function(e){this._layout=e}}),_dp(s,"column",{get:function(){return this._layout&&this._layout.firstColumn},set:function(e){"string"==typeof e&&(e=this.grid&&this.grid.columnByName(e)),this._layout=e&&e.layout}}),_dp(s,"dataColumn",{get:function(){var e=this.column;return e instanceof jt.DataColumn?e:null}}),_dp(s,"valueColumn",{get:function(){var e=this.column;return e instanceof jt.ValueColumn?e:null}}),_dp(s,"dataField",{get:function(){var e=this.dataColumn;return e instanceof jt.DataColumn?e.dataIndex:-1}}),_dp(s,"item",{get:function(){return this._grid&&this._grid.getItem(this._itemIndex)}}),_dp(s,"dataRow",{get:function(){var e=this.item;return e?e.dataRow:-1},set:function(e){!this._grid||(e=this._grid.getItemOfRow(e,!1))&&(this.itemIndex=e.index)}}),_dp(s,"fieldName",{set:function(e){!this._grid||(e=this._grid.columnByField(e))&&(this.column=e)}}),_dp(s,"fieldIndex",{set:function(e){!this._grid||(e=this._grid.columnByField(e))&&(this.column=e)}}),_dp(s,"dataId",{get:function(){var e=this.item;return e?e.dataId:-1}}),_dp(s,"value",{get:function(){var e=this.column;if(e instanceof jt.DataColumn){var t=e.dataIndex;if(t<0)throw new Error("Not exists data field: "+e.fieldName);e=this.item;if(!e)throw new Error("Invalid item index: "+this._itemIndex);return e.getData(t)}}}),_dp(s,"fixed",{get:function(){var e=this._layout;if(this._grid&&e&&e.visible){var t=this._grid.layoutManager,e=e.root.vindex;return e<t.fixedLayoutCount||e>=t.rightFirstLayout||0<=this._itemIndex&&this._itemIndex<t.fixedItemCount}return!1}}),_dp(s,"rowFixed",{get:function(){if(this._grid){var e=this._grid.layoutManager;return 0<=this._itemIndex&&this._itemIndex<e.fixedItemCount}return!1}}),_dp(s,"colFixed",{get:function(){if(this._grid&&this._layout&&this._layout.visible){var e=this._grid.layoutManager;return this._layout.root.vindex<e.fixedLayoutCount}return!1}}),_dp(s,"rightFixed",{get:function(){if(this._grid&&this._layout&&this._layout.visible){var e=this._grid.layoutManager;return this._layout.root.vindex>=e.rightFirstLayout}return!1}}),_dp(s,"isTop",{get:function(){return!this._layout||!this._layout.group||(this.$_isSpanned()?this.grid.$_isTopCell(this):Ft.CellLayoutGroupItem.isTop(this._layout))}}),_dp(s,"isBottom",{get:function(){return!this._layout||!this._layout.group||(this.$_isSpanned()?this.grid.$_isBottomCell(this):Ft.CellLayoutGroupItem.isBottom(this._layout))}}),_dp(s,"isLeft",{get:function(){if(this._layout){var e=this._layout.group;return e?0==e.vindex&&Ft.CellLayoutGroupItem.isLeft(this._layout):0==this._layout.vindex}return!1}}),_dp(s,"isRight",{get:function(){if(this._layout){var e=this._layout.group;return e?0==e.vindex&&Ft.CellLayoutGroupItem.isRight(this._layout):this._layout.vindex==this._grid.visibleLayoutCount-1}return!1}}),_dp(s,"isFirst",{get:function(){if(this._layout&&this._grid&&0<this._grid.visibleLayoutCount){var e=this._grid.getVisibleLayout(0);return(e=e instanceof Ft.CellLayoutColumnItem?e:e.root.first)===this._layout}return!1}}),_dp(s,"isEditableFirst",{get:function(){var e=this._grid;if(e&&this._layout){var t=e.collectColumns(!0,!0,!0),n=t.indexOf(this._layout.firstColumn);if(0<=n){for(var r=n;r--;){var i=t[r];if(i instanceof jt.SeriesColumn)return!1;i=s.temp(e,this.itemIndex,i);if(e.getWritableAt(i))return!1}return!0}}return!1}}),_dp(s,"isEditableLast",{get:function(){var e=this._grid;if(e&&this._layout)for(var t=e.collectColumns(!0,!0,!0),n=t.indexOf(this._layout.firstColumn)+1,r=t.length;n<r;n++){var i=t[n];if(i instanceof jt.SeriesColumn)return!1;i=s.temp(e,this.itemIndex,i);if(e.getWritableAt(i))return!1}return!0}}),_dp(s,"isLast",{get:function(){if(this._layout&&this._grid&&0<this._grid.visibleLayoutCount){var e=this._grid.getVisibleLayout(this._grid.visibleLayoutCount-1);return(e=e instanceof Ft.CellLayoutColumnItem?e:e.root.last)===this._layout}return!1}}),s.prototype.set=function(e,t,n){return void 0!==n&&(this._grid=n),this._itemIndex=e,this._layout=t instanceof jt.GridColumn?t.layout:t,this},s.prototype.assign=function(e){return e?(e.grid&&(this._grid=e._grid),this._itemIndex=e._itemIndex,this._layout=e._layout):(this._itemIndex=-1,this._layout=null),this},s.prototype.reset=function(){return this._itemIndex=-1,this._layout=null,this},s.prototype.clone=function(){return new s(this._grid,this._itemIndex,this._layout)},s.prototype.proxy=function(){return{itemIndex:isNaN(this._itemIndex)?-1:this._itemIndex,column:this.column?this.column.name:null,dataRow:this.dataRow,fieldIndex:this.dataColumn?this.column.dataIndex:-1,fieldName:this.dataColumn?this.column.fieldName:null}},s.prototype.normalize=function(e){return e&&(this._grid=e,this._layout||(this._layout=e.getFirstLayout()),this._itemIndex=Math.max(0,Math.min(this._itemIndex,e.itemCount-1))),this},s.prototype.incRow=function(e){this._grid&&(this._itemIndex=Math.max(0,Math.min(this._grid.itemCount-1,this._itemIndex+e)))},s.prototype.first=function(){this._grid&&(this._itemIndex=0)},s.prototype.last=function(){this._grid&&(this._itemIndex=this._grid.itemCount-1)},s.prototype.right=function(){var e=this._grid&&this.$_gridLayout().getRightOf(this._layout);e&&(this._layout=e)},s.prototype.left=function(){var e=this._grid&&this.$_gridLayout().getLeftOf(this._layout);e&&(this._layout=e)},s.prototype.next=function(){var e=c(this._grid,this._layout);if(e)return this._layout=e,!0},s.prototype.prev=function(){var e=h(this._grid,this._layout);if(e)return this._layout=e,!0},s.prototype.home=function(){this._layout=this._grid&&this.$_gridLayout().getHomeOf(this._layout)},s.prototype.end=function(){this._layout=this._grid&&this.$_gridLayout().getEndOf(this._layout)},s.prototype.down=function(e,t,r){void 0===e&&(e=n.ROW),this._grid&&(e==n.ROW&&!t||this.isBottom||r?this._itemIndex<this._grid.itemCount-1&&(e==n.CELL&&(this._layout=this.$_gridLayout().getTopOf(this._layout)),this.incRow(1)):this._grid.spanned?this._layout=this._grid.$_getLowerOfCell(this):this._layout=this.$_gridLayout().getLowerOf(this._layout).layout)},s.prototype.up=function(e,t,r){void 0===e&&(e=n.ROW),this._grid&&(e==n.ROW&&!t||this.isTop||r?0<this._itemIndex&&(e==n.CELL&&(this._grid.spanned?(e=this._grid.$_getUpperOfCell(this),this._layout=e||this.$_gridLayout().getBottomOf(this._layout)):this._layout=this.$_gridLayout().getBottomOf(this._layout)),this.incRow(-1)):this._grid.spanned?this._layout=this._grid.$_getUpperOfCell(this):this._layout=this.$_gridLayout().getUpperOf(this._layout).layout)},s.prototype.getValue=function(){if(this._grid){var e=this.dataColumn,t=this._grid.getItem(this._itemIndex);return e&&t&&t.getData(e.dataIndex)}},s.prototype.assignFrom=function(e){e instanceof s?(this._grid=e._grid,this._layout=e._layout,this._itemIndex=e._itemIndex):r.prototype.assignFrom.call(this,e)},s.prototype.toString=function(){return"("+this._itemIndex+", "+this.column+")"},s.prototype.$_gridLayout=function(){return this._grid._activeCellLayout},s.prototype.$_isSpanned=function(){return this._grid&&this._grid.spanned},s);t.CellIndex=i;var o,u=(o=i,l.__extends(a,o),a.tempItem=function(e,t,n){return(a.$_itemTemp=a.$_itemTemp?a.$_itemTemp:new a)._grid=e,a.$_itemTemp._item=t,a.$_itemTemp._itemIndex=t.index,a.$_itemTemp._layout=n instanceof Ft.CellLayoutItem?n:n&&n.layout,a.$_itemTemp},_dp(a,"item",{get:function(){return this._item}}),a);t.DummyCellIndex=u;var f,c=function(e,t){if(!e||!t)return null;var n=e.layoutManager,r=Ft.CellLayoutGroupItem.getNext(t);if(r)return r;for(var i=(t.group?t.root:t).vindex+1,s=n.layoutCount;i<s;i++){if((r=n.getLayout(i))instanceof Ft.CellLayoutColumnItem)return r;if(r instanceof Ft.CellLayoutGroupItem&&(r=r.first))return r}},h=function(e,t){if(!e||!t)return null;var n=e.layoutManager,r=Ft.CellLayoutGroupItem.getPrev(t);if(r)return r;for(var i=(t.group?t.root:t).vindex-1;0<=i;i++){if((r=n.getLayout(i))instanceof Ft.CellLayoutColumnItem)return r;if(r instanceof Ft.CellLayoutGroupItem&&(r=r.last))return r}},u=(f=y.Base,l.__extends(p,f),p.$_setRange=function(e,t,n,r,i){return e._row1=t<=r?t:r,e._row2=t<=r?r:t,e._col1=n.col<=i.col?n:i,e._col2=n.col<=i.col?i:n,e},p.create=function(e,t){return t&&e!==t?p.$_setRange(new p,e.itemIndex,e.layout,t.itemIndex,t.layout):(t=new p,t._row1=t._row2=e.itemIndex,t._col1=t._col2=e.layout,t)},p.temp=function(e,t){var n=p.$_TEMP;return t&&e!==t?p.$_setRange(n,e.itemIndex,e.layout,t.itemIndex,t.layout):(n._row1=n._row2=e.itemIndex,n._col1=n._col2=e.layout,n)},p.createRange=function(e,t,n,r){return p.$_setRange(new p,e,t,n,r)},_dp(p,"empty",{get:function(){return this._row2<this._row1||!this._col2&&!this._col2}}),_dp(p,"r1",{get:function(){return this._row1}}),_dp(p,"c1",{get:function(){return this._col1}}),_dp(p,"r2",{get:function(){return this._row2}}),_dp(p,"c2",{get:function(){return this._col2}}),_dp(p,"top",{get:function(){return this._row1<=this._row2?this._row1:this._row2}}),_dp(p,"bottom",{get:function(){return this._row1<=this._row2?this._row2:this._row1}}),_dp(p,"firstCell",{get:function(){var e=new i;return e.itemIndex=this._row1<=this._row2?this._row1:this._row2,this._col1.col===this._col2.col?e.layout=this._col1.row<=this._col2.row?this._col1:this._col2:e.layout=this._col1.col<=this._col2.col?this._col1:this._col2,e}}),_dp(p,"lastCell",{get:function(){var e=new i;return e.itemIndex=this._row1>=this._row2?this._row1:this._row2,this._col1.col===this._col2.col?e.layout=this._col1.row>=this._col2.row?this._col1:this._col2:e.layout=this._col1.col>=this._col2.col?this._col1:this._col2,e}}),p.prototype.contains=function(e,t){return t?(t=t.index,e>=this._row1&&e<=this._row2&&t>=this._col1.col&&t<=this._col2.col):!1},p.prototype.containsIndex=function(e){return e&&this.contains(e.itemIndex,e.layout)},p.prototype.normalize=function(){var e;return this._row1>this._row2&&(e=this._row1,this._row1=this._row2,this._row2=e),this._col1.col<=this._col2.col&&!(this._col1.row>this._col2.row)||(e=this._col1,this._col1=this._col2,this._col2=e),this},p.prototype.normalizeData=function(){return this.normalize(),this},p.prototype.intersectsWith=function(e){return!1},p.NULL=new p,p.$_TEMP=new p,p);t.CellRange=u});t(It),It.VerticalMoveStep,It.CellIndex,It.DummyCellIndex,It.CellRange;var qt=n(function(e,t){function i(){return n.call(this)||this}function u(){return s.call(this)||this}function f(){return a.call(this)||this}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=b.ExpressionRuntime,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},i.prototype.isIdentifier=function(e){return e=e.toLowerCase(),i.IDENTS.hasOwnProperty(e)?i.IDENTS[e]:n.prototype.isIdentifier.call(this,e)},i.prototype.evaluateIdentifier=function(e){switch(e){case i.ID_COUNT:return this._getCount();case i.ID_SUM:return this._getSum();case i.ID_MAX:return this._getMax();case i.ID_MIN:return this._getMin();case i.ID_AVG:return this._getAvg();case i.ID_VAR:return this._getVar();case i.ID_VARP:return this._getVarp();case i.ID_STDEV:return this._getStdev();case i.ID_STDEVP:return this._getStdevp();case i.ID_DATA_COUNT:return this._getDataCount();case i.ID_DATA_AVG:return this._getDataAvg()}throw new b.ExpressionEvaluationError("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(e,t){throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e)},i.prototype.evaluateIndexerS=function(e,t,n){throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e)},i.IDENTS={count:i.ID_COUNT=0,sum:i.ID_SUM=1,max:i.ID_MAX=2,min:i.ID_MIN=3,avg:i.ID_AVG=4,"var":i.ID_VAR=5,varp:i.ID_VARP=6,stdev:i.ID_STDEV=7,stdevp:i.ID_STDEVP=8,datacount:i.ID_DATA_COUNT=9,dataavg:i.ID_DATA_AVG=10},i);t.SummaryExpressionRuntime=r;var s,o=(s=r,l.__extends(u,s),u.prototype._doDispose=function(){this._grid=null,this._ds=null,this._column=null,this._summarizer=null,s.prototype._doDispose.call(this)},u.prototype.setColumn=function(e,t){this._column=e,this._grid=e.grid,this._ds=this._grid.dataSource,this._fieldCount=this._ds.fieldCount,this._summarizer=t},u.prototype.isIdentifier=function(e){return e=e.toLowerCase(),r.IDENTS.hasOwnProperty(e)?r.IDENTS[e]:s.prototype.isIdentifier.call(this,e)},u.prototype.evaluateIndexerI=function(e,t){if(this._summarizer){if(t<0||t>=this._fieldCount)throw new b.ExpressionEvaluationError("Data field index out of bounds: "+t);switch(e){case r.ID_SUM:return this._summarizer.getSum(t);case r.ID_COUNT:return this._summarizer.getCount(t);case r.ID_MAX:return this._summarizer.getMax(t);case r.ID_MIN:return this._summarizer.getMin(t);case r.ID_AVG:return this._summarizer.getAvg(t);case r.ID_VAR:return this._summarizer.getVar(t);case r.ID_VARP:return this._summarizer.getVarp(t);case r.ID_STDEV:return this._summarizer.getStdev(t);case r.ID_STDEVP:return this._summarizer.getStdevp(t);case r.ID_DATA_COUNT:return this._summarizer.getDataCount(t);case r.ID_DATA_AVG:return this._summarizer.getDataAvg(t)}throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e)}switch(e){case r.ID_SUM:case r.ID_COUNT:return 0;case r.ID_MAX:case r.ID_MIN:case r.ID_AVG:case r.ID_VAR:case r.ID_VARP:case r.ID_STDEV:case r.ID_STDEVP:return NaN}},u.prototype.evaluateIndexerS=function(e,t,n){if(this._summarizer&&this._ds){var i=n?this._ds.getFieldIndexC(t):this._ds.getFieldIndex(t);if(i<0||i>=this._fieldCount)throw new b.ExpressionEvaluationError("Data field index out of bounds: "+i);switch(e){case r.ID_SUM:return this._summarizer.getSum(i);case r.ID_COUNT:return this._summarizer.getCount(i);case r.ID_MAX:return this._summarizer.getMax(i);case r.ID_MIN:return this._summarizer.getMin(i);case r.ID_AVG:return this._summarizer.getAvg(i);case r.ID_VAR:return this._summarizer.getVar(i);case r.ID_VARP:return this._summarizer.getVarp(i);case r.ID_STDEV:return this._summarizer.getStdev(i);case r.ID_STDEVP:return this._summarizer.getStdevp(i)}throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e)}switch(e){case r.ID_SUM:case r.ID_COUNT:return 0;case r.ID_MAX:case r.ID_MIN:case r.ID_AVG:case r.ID_VAR:case r.ID_VARP:case r.ID_STDEV:case r.ID_STDEVP:return NaN}},u.prototype._getCount=function(){return this._summarizer?this._summarizer.getCount(this._column.dataIndex):0},u.prototype._getSum=function(){return this._summarizer?this._summarizer.getSum(this._column.dataIndex):0},u.prototype._getMax=function(){return this._summarizer?this._summarizer.getMax(this._column.dataIndex):NaN},u.prototype._getMin=function(){return this._summarizer?this._summarizer.getMin(this._column.dataIndex):NaN},u.prototype._getAvg=function(){return this._summarizer?this._summarizer.getAvg(this._column.dataIndex):NaN},u.prototype._getVar=function(){return this._summarizer?this._summarizer.getVar(this._column.dataIndex):NaN},u.prototype._getVarp=function(){return this._summarizer?this._summarizer.getVarp(this._column.dataIndex):NaN},u.prototype._getStdev=function(){return this._summarizer?this._summarizer.getStdev(this._column.dataIndex):NaN},u.prototype._getStdevp=function(){return this._summarizer?this._summarizer.getStdevp(this._column.dataIndex):NaN},u.prototype._getDataCount=function(){return this._summarizer?this._summarizer.getDataCount(this._column.dataIndex):NaN},u.prototype._getDataAvg=function(){return this._summarizer?this._summarizer.getDataAvg(this._column.dataIndex):NaN},u);t.ColumnSummaryRuntime=o;var a,o=(a=o,l.__extends(f,a),f.prototype._doDispose=function(){a.prototype._doDispose.call(this)},_dp(f,"item",{get:function(){return this._item}}),f.prototype.setItem=function(e){this._item=e},f.prototype._getCount=function(){return this._item.getNumber(this._column.dataIndex)},f.prototype._getSum=function(){return this._item.getSum(this._column.dataIndex)},f.prototype._getMax=function(){return this._item.getMax(this._column.dataIndex)},f.prototype._getMin=function(){return this._item.getMin(this._column.dataIndex)},f.prototype._getAvg=function(){return this._item.getAvg(this._column.dataIndex)},f.prototype._getVar=function(){return this._item.getVar(this._column.dataIndex,1)},f.prototype._getVarp=function(){return this._item.getVar(this._column.dataIndex,0)},f.prototype._getStdev=function(){return this._item.getStdev(this._column.dataIndex,1)},f.prototype._getStdevp=function(){return this._item.getStdev(this._column.dataIndex,0)},f.prototype._getDataCount=function(){return this._item.getDataCount(this._column.dataIndex)},f.prototype._getDataAvg=function(){return this._item.getDataAvg(this._column.dataIndex)},f);t.RowGroupSummaryRuntime=o});t(qt),qt.SummaryExpressionRuntime,qt.ColumnSummaryRuntime,qt.RowGroupSummaryRuntime;var Rt=n(function(e,t){function i(e){var t=n.call(this)||this;return t._columns=[],t._orgColumns=[],t._nameMap={},t._owner=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.prototype._doDispose=function(){this._clearColumn(),this._columns=null,this._owner=null,this._nameMap=null,n.prototype._doDispose.call(this)},_dp(i,"owner",{get:function(){return this._owner}}),_dp(i,"count",{get:function(){return this._columns.length}}),_dp(i,"columns",{get:function(){return this._columns.slice()}}),i.prototype.getColumn=function(e){return this._columns[e]},i.prototype.setColumns=function(e){if(this._columns.length=0,this._nameMap={},e)for(var t=0,n=e;t<n.length;t++){var r=n[t],r=this._addColumn(r);if(!r)throw new Error("column is undefined");r.$_owner=this}this._orgColumns=this._columns.slice()},i.prototype.add=function(e,t){return t=this._addColumn(e,void 0===t?-1:t),null!=t&&(t.$_owner=this),t},i.prototype.remove=function(e){return!!this._removeColumn(e)},i.prototype.resetIndices=function(){if(this._owner)for(var e=0,t=this._columns.length;e<t;e++){var n=this._columns[e];n.$_setIndex(e),n._resetIndices(this._owner)}},i.prototype.resetSortStates=function(){if(this._owner)for(var e=this._owner.getSortDirections(),t=this._owner.getSortFields(),n=0,r=this._columns.length;n<r;n++){var i=this._columns[n];i instanceof jt.DataColumn&&(i.sortOrder=t.indexOf(i.dataIndex),i.sortDirection=e[i.sortOrder])}},i.prototype.columnByName=function(e){return this._nameMap[e]},i.prototype.columnByField=function(e){if(0<=e)for(var t=0,n=this.count;t<n;t++){var r=this.getColumn(t);if(r instanceof jt.DataColumn&&r.dataIndex==e)return r}return null},i.prototype.restoreColumns=function(){this._restoreColumn()},i.prototype._addColumn=function(e,t){void 0===t&&(t=-1);var n=this._columns;if((e=!e||e instanceof jt.GridColumn?e:ir.GridBase.createColumn(e="string"==typeof e?{fieldName:e}:e))instanceof jt.GridColumn){if(0<=n.indexOf(e))throw new Error("column is already contained");t<0?n.push(e):n.splice(t,0,e);var r=e.name;if(!r||this._nameMap[r])if(r=e instanceof jt.DataColumn?e.fieldName:e instanceof jt.SeriesColumn?"series":"column",this._nameMap[r]){for(var i=0;;i++)if(!this._nameMap[r+i]){e.name=r+=i;break}}else e.name=r;return r&&(this._nameMap[r]=e),e}return null},i.prototype._removeColumn=function(e){var t=this._columns.indexOf(e);return 0<=t&&(this._columns.splice(t,1),!(e.$_owner=void 0))},i.prototype._restoreColumn=function(){this._columns=this._orgColumns.slice()},i.prototype._clearColumn=function(){for(var e=0,t=this._columns;e<t.length;e++)t[e].dispose()},i);t.ColumnCollection=r});t(Rt),Rt.ColumnCollection;var Ut=n(function(e,t){function i(){var e=n.call(this,"headerCell")||this;return e._itemOffset=2,e._itemGap=2,e._checkLocation=c.ColumnHeaderItemLocation.NONE,e._checked=!1,e._showTooltip=!0,e}function u(e){return e=s.call(this,e)||this,e._minRowHeight=21,e._minHeight=23,e._height=0,e._resizable=!1,e._itemOffset=2,e._itemGap=2,e._showSelection=!1,e._showTooltip=!1,e._sortWidth=16,e._sortHeight=16,e._filterWidth=16,e._filterHeight=16,e._popupWidth=16,e._popupHeight=16,e._checkWidth=16,e._checkHeight=16,e._showPopupMenu=c.HandleVisibility.VISIBLE,e._cell=new r,e.visible=!0,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Et.GridCell,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(i,"text",{get:function(){return this._text},set:function(e){this._text=e}}),_dp(i,"template",{get:function(){return this._template},set:function(e){this._template=e}}),_dp(i,"itemOffset",{get:function(){return this._itemOffset},set:function(e){this._itemOffset=e}}),_dp(i,"itemGap",{get:function(){return this._itemGap},set:function(e){this._itemGap=e}}),_dp(i,"checkLocation",{get:function(){return this._checkLocation},set:function(e){this._checkLocation=e}}),_dp(i,"checked",{get:function(){return this._checked},set:function(e){this._checked=e}}),_dp(i,"showTooltip",{get:function(){return this._showTooltip},set:function(e){this._showTooltip=e}}),_dp(i,"tooltip",{get:function(){return this._tooltip},set:function(e){this._tooltip=e}}),_dp(i,"edgeMark",{get:function(){return this._edgeMark},set:function(e){this._edgeMark=e}}),i);t.HeaderCell=r;var s,o=(s=bt.VisualObject,l.__extends(u,s),u.prototype._doDispose=function(){this._cell=null,s.prototype._doDispose.call(this)},_dp(u,"minRowHeight",{get:function(){return this._minRowHeight},set:function(e){e!=this._minRowHeight&&(this._minRowHeight=e,this._changed())}}),_dp(u,"minHeight",{get:function(){return this._minHeight},set:function(e){e!=this._minHeight&&(this._minHeight=e,this._changed())}}),_dp(u,"height",{get:function(){return this._height},set:function(e){e!=this._height&&(this._height=e,this._changed())}}),_dp(u,"displayHeight",{get:function(){return this._grid.headerView.height}}),_dp(u,"heights",{get:function(){return this._heights&&this._heights.slice()},set:function(e){if(e!=this._heights){e=p.Utils.makeArray(e,!0),this._heights=e&&e.slice();for(var t=0;t<this._heights.length;t++)this._heights[t]=Math.max(this._minRowHeight,isNaN(this._heights[t])?this._minRowHeight:this._heights[t]);this._changed()}}}),_dp(u,"resizable",{get:function(){return this._resizable},set:function(e){e!=this._resizable&&(this._resizable=e,this._changed())}}),_dp(u,"itemOffset",{get:function(){return this._itemOffset},set:function(e){e!=this._itemOffset&&(this._itemOffset=e,this._changed())}}),_dp(u,"itemGap",{get:function(){return this._itemGap},set:function(e){e!=this._itemGap&&(this._itemGap=e,this._changed())}}),_dp(u,"showTooltip",{get:function(){return this._showTooltip},set:function(e){e!=this._showTooltip&&(this._showTooltip=e,this._changed())}}),_dp(u,"showSelection",{get:function(){return this._showSelection},set:function(e){e!=this._showSelection&&(this._showSelection=e,this._changed())}}),_dp(u,"sortWidth",{get:function(){return this._sortWidth},set:function(e){e!=this._sortWidth&&(this._sortWidth=e,this._changed())}}),_dp(u,"sortHeight",{get:function(){return this._sortHeight},set:function(e){e!=this._sortHeight&&(this._sortHeight=e,this._changed())}}),_dp(u,"filterWidth",{get:function(){return this._filterWidth},set:function(e){e!=this._filterWidth&&(this._filterWidth=e,this._changed())}}),_dp(u,"filterHeight",{get:function(){return this._filterHeight},set:function(e){e!=this._filterHeight&&(this._filterHeight=e,this._changed())}}),_dp(u,"popupWidth",{get:function(){return this._popupWidth},set:function(e){e!=this._popupWidth&&(this._popupWidth=e,this._changed())}}),_dp(u,"popupHeight",{get:function(){return this._popupHeight},set:function(e){e!=this._popupHeight&&(this._popupHeight=e,this._changed())}}),_dp(u,"showPopupMenu",{get:function(){return this._showPopupMenu},set:function(e){e!=this._showPopupMenu&&(this._showPopupMenu=e,this._changed())}}),_dp(u,"checkWidth",{get:function(){return this._checkWidth},set:function(e){e!=this._checkWidth&&(this._checkWidth=e,this._changed())}}),_dp(u,"checkHeight",{get:function(){return this._checkHeight},set:function(e){e!=this._checkHeight&&(this._checkHeight=e,this._changed())}}),_dp(u,"styleName",{get:function(){return this._styleName},set:function(e){e!=this._styleName&&(this._styleName=e,this._changed())}}),_dp(u,"exportStyleName",{get:function(){return this._exportStyleName},set:function(e){this._exportStyleName=e}}),u.prototype.getCell=function(e){var t=this._cell;t.setLayout(e);var n,r,i=(e instanceof Ft.CellLayoutGroupItem?e:e.firstColumn).header;return i&&(t.text=i.displayText,t.template=i.realizeTemplate(),t.showTooltip=i.showTooltip,t.tooltip=i.tooltip,t.edgeMark=i.edgeMark,i instanceof jt.ColumnHeader&&(n=e.firstColumn,r=void 0,t.index.set(-1,e.firstColumn),t.itemOffset=void 0===(r=i.itemOffset)?this._itemOffset:r,t.itemGap=void 0===(r=i.itemGap)?this._itemGap:r,t.checkLocation=i.checkLocation,t.checked=n.checked)),t},u.prototype.getStyleName=function(){return this._styleName},u);t.GridHeader=o});t(Ut),Ut.HeaderCell,Ut.GridHeader;var zt=n(function(e,t){function i(){return n.call(this)||this}function u(e){return e=s.call(this,e)||this,e._childIndex=0,e._error=null,e._errorDetail=null,e}function h(){return a.call(this,"footerCell")||this}function v(e){return e=d.call(this,e)||this,e._minHeight=23,e._height=0,e._formatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},e._childIndex=0,e._displayIndex=0,e._runtime=new r,e._cell=e._createCell(),e.visible=!0,e}function y(e){return m.call(this,e)||this}function E(e){var t=w.call(this,e)||this;return t._items=[],t._visibles=[],e=t._createSummary(e),(e.$_owner=t)._items.push(e),t._visibles.push(t._items[0]),t}function x(){return null!==S&&S.apply(this,arguments)||this}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=b.ExpressionRuntime,l.__extends(i,n),i.prototype._doDispose=function(){this._cell=null,n.prototype._doDispose.call(this)},i.prototype.setCell=function(e){this._cell=e},i.prototype.isIdentifier=function(e){return e=e.toLowerCase(),i.IDENTS.hasOwnProperty(e)?i.IDENTS[e]:n.prototype.isIdentifier.call(this,e)},i.prototype.evaluateIdentifier=function(e){switch(e){case i.ID_VALUE:return this._cell.value;case i.ID_FIELD:return this._cell.index.dataField;case i.ID_LEVEL:return this._cell.level}throw new b.ExpressionEvaluationError("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(e,t){},i.prototype.evaluateIndexerS=function(e,t,n){},i.IDENTS={value:i.ID_VALUE=0,field:i.ID_FIELD=1,level:i.ID_LEVEL=2},i);t.FooterExpressionRuntime=r;var s,o=(s=Et.GridCell,l.__extends(u,s),u.prototype._doDispose=function(){s.prototype._doDispose.call(this)},_dp(u,"level",{get:function(){return 0}}),_dp(u,"error",{get:function(){return this._error}}),_dp(u,"errorDetail",{get:function(){return this._errorDetail}}),u.prototype.calculate=function(){var e=this.dataColumn,t=e&&e.grid;if(this._value=NaN,this._error=null,t&&t.itemSource.summaryMode!=c.SummaryMode.NONE&&0<=e.dataIndex){var n,r=this._getSummary(e,this._childIndex),i=r&&r.expression,s=void 0;try{i&&0<t.dataCount&&((n=t.columnSummaryRuntime).setColumn(e,t.summarizer),s=r.evaluate(n,this._childIndex));var o=r&&r.valueCallback;o&&(s=o(t.handler,e,this._childIndex,r,s)),this._value=s}catch(e){this._error=e,this._errorDetail=e}}},_dp(u,"text",{get:function(){if(this._error)return Et.GridCell.ERROR}}),_dp(u,"value",{get:function(){return this._value}}),u.prototype.getDisplayText=function(e){var t,n,r=this._value,i=this.dataColumn,s="";return void 0!==r&&i&&(i.valueType==c.ValueType.DATETIME?(n=void 0,r instanceof Date&&(n=e.datetimeWriter)?s=n.getText(this._value):r&&(s=r)):(t=void 0,!isNaN(r)&&(t=e.numberFormatter)?(n=parseFloat(r),s=t.getText(n)):isNaN(r)||null==r||(s=r+""))),s&&((r=e.prefix)&&(s=r+s),(r=e.suffix)&&(s+=r)),s=!s&&i?null===(i=this._getSummary(i,this._childIndex))||void 0===i?void 0:i.text:s},u.prototype.getSummary=function(){return this._getSummary(this.valueColumn,this._childIndex)},u.prototype.getTemplate=function(e){var t=this._getSummary(this.valueColumn,this._childIndex);return t?t.realizeSummary(this,e):void 0},u);t.SummaryCell=o;var a,f=(a=o,l.__extends(h,a),h.prototype._doDispose=function(){a.prototype._doDispose.call(this)},_dp(h,"footerIndex",{get:function(){return this._childIndex},set:function(e){e!=this._childIndex&&(this._childIndex=e)}}),h.prototype._getSummary=function(e,t){return e&&e.footers.get(t)},h);t.FooterCell=f;var d,o=(d=bt.VisualObject,l.__extends(v,d),v.prototype._doDispose=function(){d.prototype._doDispose.call(this)},_dp(v,"styleName",{get:function(){return this._styleName},set:function(e){e!=this._styleName&&(this._styleName=e,this._changed())}}),_dp(v,"displayIndex",{get:function(){return this._displayIndex}}),_dp(v,"minHeight",{get:function(){return this._minHeight},set:function(e){(e=Math.max(0,e))!=this._minHeight&&(this._minHeight=e,this._changed())}}),_dp(v,"height",{get:function(){return this._height},set:function(e){(e=Math.max(0,e))!=this._height&&(this._height=e,this._changed())}}),_dp(v,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(e){e!==this._cellStyleCallback&&(this._cellStyleCallback=e,this.refreshOwner())}}),v.prototype.getCell=function(e){var t=this._cell,e=e.firstColumn;return t.index.set(-1,e),t._childIndex=this._childIndex,t.calculate(),t},v.prototype.getCellStyle=function(e,t,n){void 0===n&&(n=!0);var r,i=e.getSummary(),s=this._cellStyleCallback;return s&&(r=s(this._grid.handler,e),t.assign(r)),i&&(s=i.styleCallback)&&(r=s(this._grid.handler,e),t.assign(r)),i=t.styleName||i&&i.styleName||"",n&&(t.styleName=this.getCellStyleName()+" "+i),t},v.prototype.getCellFormatters=function(e,t){return t?(t.numberFormatter=t.numberFormatter||e.numberFormatter,t.datetimeWriter=t.datetimeWriter||e.datetimeWriter,t.booleanFormatter=t.booleanFormatter||e.boolFormatter,t.textFormatter=t.textFormatter||e.textFormatter,t.prefix=t.prefix||e.prefix,t.suffix=t.suffix||e.suffix):((t=this._formatter).numberFormatter=e.numberFormatter,t.datetimeWriter=e.datetimeWriter,t.booleanFormatter=e.boolFormatter,t.textFormatter=e.textFormatter,t.prefix=e.prefix,t.suffix=e.suffix),t},v.prototype._visibleChanged=function(){d.prototype._visibleChanged.call(this),this.$_owner&&this.$_owner.$_visibleChanged(this)},v);t.GridSummaryObject=o;var m,g=(m=o,l.__extends(y,m),_dp(y,"footerIndex",{get:function(){return this._childIndex}}),y.prototype.getCellStyleName=function(){return y.CELL_CSS},y.prototype._createCell=function(){return new f},y.CELL_CSS="rg-footer-cell",y);t.GridFooter=g;var w,o=(w=bt.VisualObject,l.__extends(E,w),E.prototype._doDispose=function(){for(var e=0,t=this._items;e<t.length;e++)t[e].dispose();this._items=null,this._visibles=null,w.prototype._doDispose.call(this)},_dp(E,"canShow",{get:function(){return this.visible&&0<this._visibles.length}}),_dp(E,"count",{get:function(){return this._items.length}}),_dp(E,"visibleCount",{get:function(){return this._visibles.length}}),E.prototype.get=function(e){return this._items[e]},E.prototype.getVisible=function(e){return this._visibles[e]},E.prototype.isVisible=function(){return this.visible&&0<this.visibleCount},E.prototype.assignFrom=function(e){var t;if(w.prototype.assignFrom.call(this,e),e&&e.items?t=p.Utils.makeArray(e.items):p.Utils.isArray(e)&&(t=e),t){for(var n=this._items,r=t.length;n.length>r;)n.pop().dispose();n.length=r;for(var i=0,s=t.length;i<s;i++){var o=t[i];o&&(n[i]||(n[i]=this._createSummary()),n[i].assignFrom(o),n[i].$_owner=this)}this.$_resetVisibles()}},E.prototype.clean=function(){for(var e=0,t=this._items;e<t.length;e++)t[e].clean()},E.prototype.toProxy=function(){for(var e=w.prototype.toProxy.call(this),t=[],n=0;n<this._items.length;n++)t.push(this._items[n].toProxy());return 0<t.length&&(e.items=t.slice()),e},E.prototype.$_visibleChanged=function(e){this.$_resetVisibles()},E.prototype.$_resetVisibles=function(){for(var e=this._visibles.length=0,t=0;e<this._items.length;e++){var n=this._items[e];n._childIndex=e,n.visible&&(this._visibles.push(n),n._displayIndex=t++)}this.owner&&this.owner.refreshView()},E);t.SummaryCollection=o;var S,o=(S=o,l.__extends(x,S),x.prototype._createSummary=function(e){return new g(e||this._grid)},x);t.GridFooterCollection=o});t(zt),zt.FooterExpressionRuntime,zt.SummaryCell,zt.FooterCell,zt.GridSummaryObject,zt.GridFooter,zt.SummaryCollection,zt.GridFooterCollection;var Wt=n(function(e,t){function i(e){return e=n.call(this,e)||this,e._displayOrder=0,e._headText=null,e._footText=null,e._sumText=null,e._headCell=e._createHeadCell(),e._footCell=e._createFootCell(),e._sumCell=e._createSumCell(),e.visible=!0,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=bt.VisualObject,l.__extends(i,n),_dp(i,"displayOrder",{get:function(){return this._displayOrder},set:function(e){e!=this._displayOrder&&(this._displayOrder=e,this._changed())}}),_dp(i,"headText",{get:function(){return this._headText},set:function(e){e!=this._headText&&(this._headText=e,this._changed())}}),_dp(i,"footText",{get:function(){return this._footText},set:function(e){e!=this._footText&&(this._footText=e,this._changed())}}),_dp(i,"sumText",{get:function(){return this._sumText},set:function(e){e!=this._sumText&&(this._sumText=e,this._changed())}}),_dp(i,"popupMenu",{get:function(){return this._popupMenu},set:function(e){e!=this._popupMenu&&(this._popupMenu=e,this._popupMenuName="string"==typeof e?e:null)}}),_dp(i,"popupMenuName",{get:function(){return this._popupMenuName||(this._popupMenu&&this._grid?(this._popupMenuName=this.getHeadStyleName()+"_menu",this._grid.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this._popupMenuName):null)},set:function(e){null!=e&&"string"!=typeof e||(this._popupMenuName=e,this._changed())}}),_dp(i,"visChanged",{get:function(){return this._visChanged},set:function(e){this._visChanged=e}}),_dp(i,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(e){e!==this._cellStyleCallback&&(this._cellStyleCallback=e,this._changed())}}),i.prototype.getHeadCell=function(){return this._headCell},i.prototype.getFootCell=function(){return this._footCell},i.prototype.getSumCell=function(){return this._sumCell},i.prototype._createHeadCell=function(){return new Et.StyledCell(this)},i.prototype._createFootCell=function(){return new Et.StyledCell(this)},i.prototype._createSumCell=function(){return new Et.StyledCell(this)},i.prototype._visibleChanged=function(){n.prototype._visibleChanged.call(this),this._visChanged=!0},i);t.SectionObject=r});t(Wt),Wt.SectionObject;var Xt=n(function(e,t){function o(e){var t=i.call(this,"indicatorCell")||this;return t._itemState=dt.ItemState.NORMAL,t._indicator=e,t}function f(e){return e=u.call(this,e)||this,e._displayValue=n.INDEX,e._zeroBase=!1,e._indexOffset=0,e._rowOffset=0,e._minWidth=32,e._maxWidth=0,e._width=0,e._selectable=!0,e._mark=r.IMAGE,e._showFocus=!0,e._showSelection=!0,e._displayWidth=0,e._cell=new s(e),e.headText="No.",e.footText="\u03a3",e.sumText="\u03a3",e}var n,r;Object.defineProperty(t,"__esModule",{value:!0}),(a=n=t.IndicatorValue||(t.IndicatorValue={})).NONE="none",a.INDEX="index",a.ROW="row",(a=r=t.StateMark||(t.StateMark={})).IMAGE="image",a.TEXT="text",a.NONE="none";var i,s=(i=Et.GridCell,l.__extends(o,i),o.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(o,"indicator",{get:function(){return this._indicator}}),_dp(o,"itemState",{get:function(){return this._itemState},set:function(e){e!=this._itemState&&(this._itemState=e)}}),_dp(o,"text",{get:function(){var e,t=this._indicator,r=this.index,i=r.item,s="";if(i&&i.itemState==dt.ItemState.NORMAL)switch(t.displayValue){case n.INDEX:0<=(e=t.owner.getIndicatorIndex(i))&&(e+=t.indexOffset,t.zeroBase||e++,s=String(e));break;case n.ROW:i.isDataRow&&(e=r.dataRow,e+=t.rowOffset,t.zeroBase||e++,s=String(e))}return s}}),_dp(o,"value",{get:function(){return null}}),o);t.RowIndicatorCell=s;var u,a=(u=Wt.SectionObject,l.__extends(f,u),f.prototype._doDispose=function(){u.prototype._doDispose.call(this)},_dp(f,"displayValue",{get:function(){return this._displayValue},set:function(e){e!=this._displayValue&&(this._displayValue=e,this._changed())}}),_dp(f,"zeroBase",{get:function(){return this._zeroBase},set:function(e){e!=this._zeroBase&&(this._zeroBase=e,this._changed())}}),_dp(f,"indexOffset",{get:function(){return this._indexOffset},set:function(e){e!=this._indexOffset&&(this._indexOffset=e,this._changed())}}),_dp(f,"rowOffset",{get:function(){return this._rowOffset},set:function(e){e!=this._rowOffset&&(this._rowOffset=e,this._changed())}}),_dp(f,"minWidth",{get:function(){return this._minWidth},set:function(e){e!=this._minWidth&&(this._minWidth=e,this._changed())}}),_dp(f,"maxWidth",{get:function(){return this._maxWidth},set:function(e){e!=this._maxWidth&&(this._maxWidth=e,this._changed())}}),_dp(f,"width",{get:function(){return this._width},set:function(e){e!=this._width&&(this._width=e,this._changed())}}),_dp(f,"displayWidth",{get:function(){return this._displayWidth}}),_dp(f,"selectable",{get:function(){return this._selectable},set:function(e){e!=this._selectable&&(this._selectable=e,this._changed())}}),_dp(f,"mark",{get:function(){return this._mark},set:function(e){e!=this._mark&&(this._mark=e,this._changed())}}),_dp(f,"showFocus",{get:function(){return this._showFocus},set:function(e){e!=this._showFocus&&(this._showFocus=e,this._changed())}}),_dp(f,"showSelection",{get:function(){return this._showSelection},set:function(e){e!=this._showSelection&&(this._showSelection=e,this._changed())}}),_dp(f,"staticOrder",{get:function(){return 0}}),f.prototype.getCell=function(e){var t,n=this._cell;return n.setIndex(e),e.item&&((t=e.item.itemState)==dt.ItemState.NORMAL&&this._grid.focusedIndex.itemIndex==e.itemIndex&&(t=dt.ItemState.FOCUSED),n.itemState=t),n},f.prototype.getHeadStyleName=function(){return"rg-rowindicator-head"},f.prototype.getFootStyleName=function(){return"rg-rowindicator-foot"},f.prototype.getSumStyleName=function(){return"rg-rowindicator-sum"},f);t.RowIndicator=a});t(Xt),Xt.IndicatorValue,Xt.StateMark,Xt.RowIndicatorCell,Xt.RowIndicator;var Vt=n(function(e,t){function i(e){var t=n.call(this,"stateBarCell")||this;return t._bar=e,t}function u(e){return e=s.call(this,e)||this,e._width=20,e._mark=Xt.StateMark.IMAGE,e._stateTexts={},e._errorVisible=!1,e._stateTexts[d.RowState.CREATED]="C",e._stateTexts[d.RowState.UPDATED]="U",e._stateTexts[d.RowState.DELETED]="D",e._stateTexts[d.RowState.CREATE_AND_DELETED]="X",e._cell=new r(e),e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Et.GridCell,l.__extends(i,n),i.prototype._doDispose=function(){this._bar=null,n.prototype._doDispose.call(this)},_dp(i,"text",{get:function(){return this._bar._stateTexts[this.item.rowState]}}),_dp(i,"value",{get:function(){return null}}),i);t.StateBarCell=r;var s,o=(s=Wt.SectionObject,l.__extends(u,s),u.prototype._doDispose=function(){s.prototype._doDispose.call(this)},_dp(u,"width",{get:function(){return this._width},set:function(e){e!=this._width&&(this._width=e,this._changed())}}),_dp(u,"mark",{get:function(){return this._mark},set:function(e){e!=this._mark&&(this._mark=e,this._changed())}}),_dp(u,"stateTexts",{get:function(){return l.__assign({},this._stateTexts)},set:function(e){if(e!=this._stateTexts){for(var t in e)this._stateTexts.hasOwnProperty(t)&&(this._stateTexts[t]=e[t]);this._changed()}}}),_dp(u,"errorVisible",{get:function(){return this._errorVisible},set:function(e){e!=this._errorVisible&&(this._errorVisible=e,this._changed())}}),_dp(u,"staticOrder",{get:function(){return 1e3}}),u.prototype.getCell=function(e){var t=this._cell;return t.setIndex(e),t},u.prototype.getHeadStyleName=function(){return"rg-statebar-head"},u.prototype.getFootStyleName=function(){return"rg-statebar-foot"},u.prototype.getSumStyleName=function(){return"rg-statebar-sum"},u);t.StateBar=o});t(Vt),Vt.StateBarCell,Vt.StateBar;var $t=n(function(e,t){function i(){return n.call(this,"checkBarCell")||this}function u(e){return e=s.call(this,e)||this,e._width=20,e._exclusive=!1,e._showAll=!0,e._showGroup=!0,e._visibleOnly=!1,e._checkableOnly=!0,e._syncHeadCheck=!1,e._useImages=!1,e._fieldIndex=-1,e._breakMergeOnEmpty=!1,e._cell=new r,e._merged=!1,e}function c(){var e=a.call(this)||this;return e._row1=0,e._row2=0,e}function d(){var e=h.call(this)||this;return e._item=null,e._ds=null,e._fieldCount=0,e}function w(e){var t=v.call(this)||this;return t._runtime=w.$_runtime=w.$_runtime||new p,t.criteria=e,t}function x(e,t){var n=E.call(this)||this;return n._checkBar=t,n._head=e.top,n._tail=e.bottom,n}function k(e){var t=T.call(this)||this;return t._flags=null,t._fixedRooms=[],t._rooms=[],t._inited=!1,t._fixedCells=[],t._cells=[],(t._checkBar=e)._merges=t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Et.GridCell,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(i,"getText",{get:function(){return String(this.index.dataRow)}}),_dp(i,"value",{get:function(){return this.item.checked}}),i);t.CheckBarCell=r;var s,o=(s=Wt.SectionObject,l.__extends(u,s),u.prototype._doDispose=function(){s.prototype._doDispose.call(this)},_dp(u,"width",{get:function(){return this._width},set:function(e){e!=this._width&&(this._width=e,this._changed())}}),_dp(u,"exclusive",{get:function(){return this._exclusive},set:function(e){e!=this._exclusive&&(this._exclusive=e,this._changed())}}),_dp(u,"showAll",{get:function(){return this._showAll},set:function(e){e!=this._showAll&&(this._showAll=e,this._changed())}}),_dp(u,"showGroup",{get:function(){return this._showGroup},set:function(e){e!=this._showGroup&&(this._showGroup=e,this._changed())}}),_dp(u,"visibleOnly",{get:function(){return this._visibleOnly},set:function(e){e!=this._visibleOnly&&(this._visibleOnly=e,this._changed())}}),_dp(u,"checkableOnly",{get:function(){return this._checkableOnly},set:function(e){e!=this._checkableOnly&&(this._checkableOnly=e,this._changed())}}),_dp(u,"checkableExpression",{get:function(){return this._checkableExpression},set:function(e){e!=this._checkableExpression&&(this._checkableExpression=e,this._grid.itemSource.checkableExpression=e,this._changed())}}),_dp(u,"checkableCallback",{get:function(){return this._checkableCallback},set:function(e){this._checkableCallback=e,this._grid.itemSource.checkableCallback=e,this._changed()}}),_dp(u,"syncHeadCheck",{get:function(){return this._syncHeadCheck},set:function(e){e!=this._syncHeadCheck&&(this._syncHeadCheck=e,this._changed())}}),_dp(u,"fieldName",{get:function(){return this._fieldName},set:function(e){e!=this._fieldName&&(this._fieldName=e,this._fieldIndex=this._grid.dataSource.getFieldIndex(e),this._grid._checkFieldIndex(this._fieldIndex),this._changed())}}),_dp(u,"fieldIndex",{get:function(){return this._fieldIndex}}),_dp(u,"useImages",{get:function(){return this._useImages},set:function(e){this._useImages!==e&&(this._useImages=e,this._changed())}}),_dp(u,"mergeRule",{get:function(){return this._mergeRule},set:function(e){e!=this._mergeRule&&(this._mergeRule=e,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=e?g.createRule(e):null,this._changed(),this.owner._columnMergeRuleChanged(null))}}),_dp(u,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(e){e!=this._breakMergeOnEmpty&&(this._breakMergeOnEmpty=e,this._changed())}}),u.prototype.getCell=function(e){var t=this._cell;return t.setIndex(e),t._exclusive=this._exclusive,t},u.prototype.getHeadStyleName=function(){return"rg-checkbar-head"},u.prototype.getFootStyleName=function(){return"rg-checkbar-foot"},u.prototype.getSumStyleName=function(){return"rg-checkbar-sum"},u.prototype.canMerge=function(){return null!=this._mergeRuleObj},_dp(u,"staticOrder",{get:function(){return 2e3}}),_dp(u,"merges",{get:function(){return this._merges}}),_dp(u,"merged",{get:function(){return this._merged}}),u);t.CheckBar=o;var a,f=(a=y.Base,l.__extends(c,a),c.$_setRange=function(e,t,n){return e._row1=t<=n?t:n,e._row2=t<=n?n:t,e},c.create=function(e,t){return t&&e!==t?c.$_setRange(new c,e.itemIndex,t.itemIndex):(t=new c,t._row1=t._row2=e.itemIndex,t)},c.temp=function(e,t){var n=c.$_TEMP;return t&&e!==t?c.$_setRange(n,e.itemIndex,t.itemIndex):(n._row1=n._row2=e.itemIndex,n)},c.createRange=function(e,t){return c.$_setRange(new c,e,t)},_dp(c,"empty",{get:function(){return this._row2<this._row1}}),_dp(c,"r1",{get:function(){return this._row1}}),_dp(c,"r2",{get:function(){return this._row2}}),_dp(c,"top",{get:function(){return this._row1<=this._row2?this._row1:this._row2}}),_dp(c,"bottom",{get:function(){return this._row1<=this._row2?this._row2:this._row1}}),_dp(c,"firstCell",{get:function(){var e=new It.CellIndex;return e.itemIndex=this._row1<=this._row2?this._row1:this._row2,e}}),_dp(c,"lastCell",{get:function(){var e=new It.CellIndex;return e.itemIndex=this._row1>=this._row2?this._row1:this._row2,e}}),c.prototype.contains=function(e){return e>=this._row1&&e<=this._row2},c.prototype.containsIndex=function(e){return e&&this.contains(e.itemIndex)},c.prototype.normalize=function(){var e;return this._row1>this._row2&&(e=this._row1,this._row1=this._row2,this._row2=e),this},c.prototype.normalizeData=function(){return this.normalize(),this},c.prototype.intersectsWith=function(e){return!1},c.NULL=new c,c.$_TEMP=new c,c);t.IndexRange=f;var h,p=(h=b.ExpressionRuntime,l.__extends(d,h),d.prototype._doDispose=function(){this._item=null,this._ds=null,h.prototype._doDispose.call(this)},d.prototype.setDataSource=function(e){this._ds=e,this._fieldCount=e?e.fieldCount:0},d.prototype.setCell=function(e){this._item=e.item},d.prototype.setItem=function(e){this._item=e},d.prototype.clear=function(){this._item=null,this._ds=null},d.prototype.isIdentifier=function(e){return e=e.toLowerCase(),d.IDENTS.hasOwnProperty(e)?d.IDENTS[e]:h.prototype.isIdentifier.call(this,e)},d.prototype.evaluateIdentifier=function(e){if(this._item){switch(e){case d.ID_ROW:return this._item.index;case d.ID_DATAROW:return this._item.dataRow;case d.ID_GROUP:return this._item.parent}throw new b.ExpressionEvaluationError("Invalid identifier key: "+e)}},d.prototype.evaluateIndexerI=function(e,t){if(this._item){if(e!=d.ID_VALUE&&e!=d.ID_VALUES)throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e);if(t<0||t>=this._fieldCount)throw new b.ExpressionEvaluationError("Data field index out of bounds:"+t);return this._item.getData(t)}},d.prototype.evaluateIndexerS=function(e,t,n){if(e!=d.ID_VALUE&&e!=d.ID_VALUES)throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e);if(this._ds){n=n?this._ds.getFieldIndexC(t):this._ds.getFieldIndex(t);if(n<0||n>=this._fieldCount)throw new b.ExpressionEvaluationError("Data field is not exists:"+t);return this._item.getData(n)}},d.IDENTS={row:d.ID_ROW=0,datarow:d.ID_DATAROW=1,checked:d.ID_CHECKED=2,value:d.ID_VALUE=3,values:d.ID_VALUES=4,group:d.ID_GROUP=5,prevvalues:d.ID_PREV_VALUES=6},d),v,m={},g=(v=Bt.GridMergeRule,l.__extends(w,v),w.createRule=function(e){return e="string"==typeof e?e:e&&e.criteria,e?new w(e):null},w.prototype._doDispose=function(){this._runtime.clear(),this._runtime=null,v.prototype._doDispose.call(this)},_dp(w,"criteria",{get:function(){return this._criteria},set:function(e){(e=e?e.trim():null)!=this._criteria&&(this._criteria=e,this._exprNode=e?b.ExpressionParser.Default.parse(e,null):null,this._changed())}}),w.prototype.parseInit=function(e,t,n,r,i){var s=this._checkBar.breakMergeOnEmpty,o=e.fixedCount,u=e.itemCount,a=e.dataSource.rowCount;if(!((r=Math.min(u-n,r))<1||a<=0)){this._runtime.setDataSource(e.dataSource);for(var f=null,l=n;l<u&&(f=e.getItem(l),!this.$_isRow(f,!1));)i[l]=l+1,l++;if(!(u<=l)){this._runtime.setItem(f);var c=this._exprNode.evaluate(this._runtime),h=f.checked,p=n=l;if(i[p]=p+1,!(f.dataRow>=a)){this._runtime.setItem(f);for(var d=n+1;d<u;d++)if(f=e.getItem(d),this.$_isRow(f,!1)){if(f.dataRow>=a)break;this._runtime.setItem(f);var v=this._exprNode.evaluate(this._runtime),g=f.checked;if(d==o||void 0===v&&s||(v instanceof Date&&c instanceof Date?+v!=+c:v!=c)||g!=h){if(r<=d)break;p=d,c=v,h=g}i[d]=p+1}else{if(r<=d)break;c=m,i[p=d]=p+1}}}}},w.prototype.parseBounds=function(e,t,n,r,i){var s=this._checkBar.breakMergeOnEmpty,o=e.itemCount;if(!(o<1)){var u,a,f,l=e.fixedCount,c=m,h=Math.max(0,n),p=h,d=-1;if(this._runtime.setDataSource(e.dataSource),0<h&&i[h]<=0){var v=e.getItem(h);if(this.$_isRow(v,!1)){for(this._runtime.setItem(v),a=this._exprNode.evaluate(this._runtime),f=v.checked,h--;0<=h&&(v=e.getItem(h),this.$_isRow(v,!1))&&(this._runtime.setItem(v),c=this._exprNode.evaluate(this._runtime),u=v.checked,!(h==l||void 0===c&&s||(c instanceof Date&&a instanceof Date?+c!=+a:c!=a)||f!=u));)h--;for(var g=p-1;h<g;g--)i[g]=h+2;h<p-1&&(d=h+1)}else{i[h]=h+1;for(g=p-1;h<g;g--)i[g]=h+2;for(h+1<p-1&&(d=h+2),h--;0<=h&&i[h]<=0&&!this.$_isRow(e.getItem(h),!1);)i[h]=h+1,h--}}for(h=Math.max(0,n);h<=r&&0<i[h];)h++;for(;h<=r&&!this.$_isRow(e.getItem(h),!1);)i[h]=h+1,h++;if(h<r){p=h,v=e.getItem(h);for(this._runtime.setItem(v),a=this._exprNode.evaluate(this._runtime),f=v.checked,h++;h<o;)if(v=e.getItem(h),this.$_isRow(v,!1)){if(this._runtime.setItem(v),c=this._exprNode.evaluate(this._runtime),u=v.checked,h==l||void 0===c&&s||(c instanceof Date&&a instanceof Date?+c!=+a:c!=a)||f!=u){var y=p;0<=d&&(y=d,d=-1);for(g=p;g<h;g++)i[g]=y+1;if(r<=h)break;a=c,f=u,p=h}else i[h]=p+1;h++}else{y=p,0<=d&&(y=d,d=-1);for(g=p;g<h;g++)i[g]=y+1;for(i[h]=h+1,h++;h<o&&!this.$_isRow(e.getItem(h),!1);)i[h]=h+1,h++;if(r<=(p=h))break}if(h==o&&(c instanceof Date&&a instanceof Date?+c==+a:c==a)||f!=u)for(y=0<=d?d:p,g=p;g<h;g++)i[g]=y+1}}},w.prototype.$_isRow=function(e,t){var n=e instanceof dt.GridRow&&!(e instanceof mt.DummyEditItem);return n=n&&!t?(t=e.parent).expanded||t.firstItem!==e:n},w.$_runtime=null,w);t.CheckBarMergeRule=g;var E,S=(E=Bt.GridMergeRoom,l.__extends(x,E),x.borrow=function(e,t){var n=x.$_rooms.pop();return n?(n._head=e.top,n._tail=e.bottom):n=new x(e,t),n},x.returnTo=function(e){var t;!e||(t=x.$_rooms).indexOf(e)<0&&t.push(e)},_dp(x,"head",{get:function(){return this._head}}),_dp(x,"tail",{get:function(){return this._tail}}),_dp(x,"scope",{get:function(){return this._checkBar}}),_dp(x,"group",{get:function(){return null},set:function(e){}}),x.prototype.getHead=function(e){return e?e.set(this._head,null):e=new It.CellIndex(this._checkBar.owner,this._head,null),e},x.prototype.getTail=function(e){return e?e.set(this._tail,null):e=new It.CellIndex(this._checkBar.owner,this._tail,null),e},x.prototype.isHead=function(e){return e.itemIndex==this._head},x.prototype.isTail=function(e){return e.itemIndex==this._tail},x.prototype.contains=function(e){return e.itemIndex>=this._head&&e.itemIndex<=this._tail},x.$_rooms=new Array,x);t.CheckBarMergeRoom=S;var T,N=0,C=65535,o=(T=y.Base,l.__extends(k,T),k.prototype._doDispose=function(){this._checkBar=null,this._rooms=this._fixedRooms=null,T.prototype._doDispose.call(this)},_dp(k,"count",{get:function(){return this._rooms.length}}),k.prototype.clear=function(){this._flags=null,this._rooms=[],this._inited=!1},k.prototype.initialize=function(e){if(!this._inited){var t=this._checkBar.owner,n=t.itemSource,r=this._checkBar._mergeRuleObj;if(r){for(var i=this._flags=new Array(n.itemCount),t=t.fixedOptions.mergeRows?0:n.fixedCount,s=n.itemCount;s--;)i[s]=0;r._checkBar=this._checkBar,r.parseInit(n,-1,t,e,i)}this._inited=!0}},k.prototype.refreshRooms=function(e,t,n){if(this._inited&&this._flags&&!(t<e)){var r=this._checkBar.owner;if(r){var i,s,o,u=this._rooms,a=r.layoutManager.fixedItemCount,f=r.itemSource,r=this._checkBar._mergeRuleObj,l=0;if(this._fixedRooms.length=0,this._rooms.length=0,r&&(r._checkBar=this._checkBar,r.parseBounds(f,-1,e,t,this._flags)),n)for(;l<a;)(i=this.$_checkFixedMerge(f,l,a))?(o=new S(i,this._checkBar),this._fixedRooms.push(o),l=i.r2+1):l+=1;for(l=e;l<=t;)null!=(i=this.$_checkMerge(f,l,0==u.length,a))?((s=f.getItem(i.r2))instanceof Ht.MergedGroupHeader||s instanceof Ht.MergedGroupFooter||(o=new S(i,this._checkBar),this._rooms.push(o)),l=i.r2+1):l+=1}}},k.prototype.getFixedRooms=function(){return this._fixedRooms.slice()},k.prototype.getRooms=function(){return this._rooms.slice()},k.prototype.scroll=function(e){},k.prototype.getRoom=function(e){for(var t=e.rowFixed?this._fixedRooms:this._rooms,n=t.length-1;0<=n;n--)if(t[n].contains(e))return t[n];return null},k.prototype.prepareCells=function(e,t){if(0<e){for(var n=this._fixedCells,r=0;r<n.length;r++)n[r]=-1;for(;n.length<e;)n.push(-1)}for(var i=this._cells,r=0;r<i.length;r++)i[r]=-1;for(;i.length<t;)i.push(-1)},k.prototype.refreshCells=function(e,t){for(var n=this.getFixedRooms(),r=n.length-1;0<=r;r--){var i=n[r];this.addFixedCells(i.head,i.tail-i.head+1)}for(r=(n=this.getRooms()).length-1;0<=r;r--){var i=n[r],s=Math.max(0,i.head-t-e),o=i.tail-t-e;this.addCells(s,o-s+1)}},k.prototype.addFixedCells=function(e,t){for(var n=this._fixedCells,r=N++,i=e+1;i<e+t;i++)n[i]=r+C;return n[e]=r},k.prototype.addCells=function(e,t){for(var n=this._cells,r=N++,i=e+1;i<e+t;i++)n[i]=r+C;return n[e]=r},k.prototype.isMerged=function(e,t){return e<t?-1<this._fixedCells[e]:-1<this._cells[e-t]},k.prototype.isMergeRoot=function(e,t){return e<t?-1<this._fixedCells[e]&&this._fixedCells[e]<C:-1<this._cells[e-=t]&&this._cells[e]<C},k.prototype.isHidden=function(e,t){return e<t?this._fixedCells[e]>=C:this._cells[e-t]>=C},k.prototype.getMerged=function(e,t){var n=1;if(e<t)for(var r=(s=this._fixedCells)[e],i=e+1;i<s.length&&s[i]-C==r;i++,n++);else for(var s,r=(s=this._cells)[e-=t],i=e+1;i<s.length&&s[i]-C==r;i++,n++);return n},k.prototype.getMerged2=function(e,t,n,r){for(var i=this._cells,s=i[n],o=e.itemSource,u=o.getItem(t++).isData?r:1,a=n+1;a<i.length&&i[a]-C==s;a++)u+=o.getItem(t++).isData?r:1;return u},k.prototype.$_checkFixedMerge=function(e,t,n){if(0<n){var r=t,i=this._flags[r];e.getItem(r);if(i<=0)return null;for(var s=t+1;s<=n;){if(s==n||this._flags[s]>i)return r+1<s?f.createRange(r,s-1):null;s++}}return null},k.prototype.$_checkMerge=function(e,t,n,r){if(0<=t){var i=t,s=this._flags[i];e.getItem(i);if(s<=0)return null;if(n)for(;r<i&&!(this._flags[i-1]<s);)i--;for(var o=e.itemCount,u=t+1;u<o;){if(this._flags[u]>s||this._flags[u]<=0)return i+1<u||!e.getItem(i).isDataRow?f.createRange(i,u-1):null;u++}if(i<u)return i+1<u||!e.getItem(i).isDataRow?f.createRange(i,u-1):null}return null},k.MERGE_ROOMS="mergeRooms",k);t.CheckBarMergeManager=o});t($t),$t.CheckBarCell,$t.CheckBar,$t.IndexRange,$t.CheckBarMergeRule,$t.CheckBarMergeRoom,$t.CheckBarMergeManager;var Jt=n(function(e,t){function i(e){return e=n.call(this,e)||this,e._cellButtonWidth=16,e._cellButtonHeight=16,e._editButtonWidth=16,e._editButtonHeight=16,e._errorIconWidth=16,e._errorIconHeight=16,e._showChangeMarker=!1,e._formatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},e._buttonHeight=16,e._dataCell=new Et.DataCell,e._hiddenCell=new Et.HiddenDataCell,e._literalCell=new Et.LiteralCell,e._seriesCell=new Et.SeriesCell,e._mergedCell=new Et.MergedDataCell,e._rowRuntime=new wt.DataRowExpressionRuntime,e._cellRuntime=new wt.DataCellExpressionRuntime,e._cs=new jt.ColumnStyle,e._rowCs=new dt.RowStyle,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=bt.VisualObject,l.__extends(i,n),i.prototype._doDispose=function(){this._dataCell=this._dataCell.dispose(),this._hiddenCell=this._hiddenCell.dispose(),this._literalCell=this._literalCell.dispose(),this._seriesCell=this._seriesCell.dispose(),this._mergedCell=this._mergedCell.dispose(),this._rowRuntime=this._rowRuntime.dispose(),this._cellRuntime=this._cellRuntime.dispose(),this._cs=null,this._rowCs=null,n.prototype._doDispose.call(this)},_dp(i,"rowRuntime",{get:function(){return this._rowRuntime}}),_dp(i,"cellRunTime",{get:function(){return this._cellRuntime}}),_dp(i,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(e){e!==this._cellStyleCallback&&(this._cellStyleCallback=e,this.refreshOwner())}}),_dp(i,"rowStyleCallback",{get:function(){return this._rowStyleCallback},set:function(e){e!==this._rowStyleCallback&&(this._rowStyleCallback=e,this.refreshOwner())}}),_dp(i,"cellButtonWidth",{get:function(){return this._cellButtonWidth},set:function(e){e!=this._cellButtonWidth&&(this._cellButtonWidth=e,this.refreshOwner())}}),_dp(i,"cellButtonHeight",{get:function(){return this._cellButtonHeight},set:function(e){e!=this._cellButtonHeight&&(this._cellButtonHeight=e,this.$_resetButtonHeight(),this.refreshOwner())}}),_dp(i,"editButtonWidth",{get:function(){return this._editButtonWidth},set:function(e){e!=this._editButtonWidth&&(this._editButtonWidth=e,this.refreshOwner())}}),_dp(i,"editButtonHeight",{get:function(){return this._editButtonHeight},set:function(e){e!=this._editButtonHeight&&(this._editButtonHeight=e,this.$_resetButtonHeight(),this.refreshOwner())}}),_dp(i,"errorIconWidth",{get:function(){return this._errorIconWidth},set:function(e){e!=this._errorIconWidth&&(this._errorIconWidth=e,this.refreshOwner())}}),_dp(i,"errorIconHeight",{get:function(){return this._errorIconHeight},set:function(e){e!=this._errorIconHeight&&(this._errorIconHeight=e,this.$_resetButtonHeight(),this.refreshOwner())}}),_dp(i,"buttonHeight",{get:function(){return this._buttonHeight}}),i.prototype.$_resetButtonHeight=function(){this._buttonHeight=Math.max(this._cellButtonHeight,this._editButtonHeight,this._errorIconHeight)},i.prototype.getCell=function(e,t){return this.getCellAt(e.item,e.column,t)},i.prototype.getCellAt=function(e,t,n){var r,i=this._grid;return n?r=this._mergedCell:t instanceof jt.DataColumn?e.index<0?(r=this._hiddenCell,this._hiddenCell.setItem(e)):r=this._dataCell:r=t instanceof jt.SeriesColumn?this._seriesCell:t instanceof Et.LiteralCell?this._literalCell:this._dataCell,r.setIndex2(i,e?e.index:-1,t),t instanceof jt.DataColumn&&((i=i.validationManager.getError(r.index))?(r.error=i.message,r.errorLevel=i.level):(r.error=null,r.errorLevel=c.ValidationLevel.IGNORE)),r},i.prototype.getHidden=function(e,t){return this._hiddenCell.setIndex(e),this._hiddenCell.setItem(t),this._hiddenCell},i.prototype.getCellSimple=function(e,t){var n=e.column,n=t?this._mergedCell:n instanceof jt.SeriesColumn?this._seriesCell:n instanceof Et.LiteralCell?this._literalCell:this._dataCell;return n.setIndex(e),n},i.prototype.getIndexCellStyle=function(e,t){return e=this.getCell(e,!1),this.getCellStyle(e,this._cs.clear(),!1,t)},i.prototype.getCellStyle=function(e,t,n,r){void 0===r&&(r=!0);var i,s=e.valueColumn,o=this._cellStyleCallback;return o&&(i=o(this._grid.handler,e),t.assign(i)),s&&(i=s.getCellStyle(e),t.assign(i)),s=t.styleName||s&&s.styleName||"",r&&(t.styleName="rg-data-cell "+(n?"rg-merged-cell ":"")+s),t},i.prototype.getCellFormatters=function(e,t,n,r){return t?(t.numberFormatter=t.numberFormatter||e.numberFormatter,t.datetimeWriter=t.datetimeWriter||e.datetimeWriter,t.booleanFormatter=t.booleanFormatter||e.boolFormatter,t.textFormatter=t.textFormatter||e.textFormatter,t.prefix=t.prefix||e.prefix,t.suffix=t.suffix||e.suffix):((t=this._formatter).numberFormatter=e.numberFormatter,t.datetimeWriter=e.datetimeWriter,t.booleanFormatter=e.boolFormatter,t.textFormatter=e.textFormatter,t.prefix=e.prefix,t.suffix=e.suffix),n&&(n=(e=n.grid).body.getCell(n,!1),t=(r=e.body.getCellStyle(n,r)).toFormatter(t)),t},i.prototype.getRowStyle=function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!0);var s,o=this._rowStyleCallback,u=this._grid,a=this._rowCs;return a.clear(),r&&o&&(s=o(u.handler,e,t)||{},a.assign(s)),a.styleName||(s=i.ROW_STYLE,e.index%2&&u.displayOptions.useAlternateRowStyle&&(s+=i.ALTERNATE_ROW_STYLE),t&&(s+=i.FIXED_ROW_STYLE),n||(s+=i.STATE_ROW_STYLES[e.rowState]||""),e.checked&&(s+=i.CHECKED_ROW_STYLE),a.styleName=s),a},i.prototype._prepareUpdate=function(){var e=this._grid=this.owner;this._ds=e.dataSource,this._rowRuntime.setDataSource(this._ds),this._cellRuntime.setDataSource(this._ds),this._showChangeMarker=e.displayOptions.showChangeMarker},i.ROW_STYLE=" rg-data-row",i.ALTERNATE_ROW_STYLE=" rg-alternate-row",i.FIXED_ROW_STYLE=" rg-fixed-row",i.CHECKED_ROW_STYLE=" rg-checked-row",i.STATE_ROW_STYLES={created:" rg-created-row",deleted:" rg-deleted-row",createAndDeleted:" rg-deleted-row",updated:" rg-updated-row"},i);t.GridBody=r});t(Jt),Jt.GridBody;var Kt=n(function(e,t){function i(e){var t=n.call(this)||this;return t._grid=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.prototype._doDispose=function(){return this._grid=null,n.prototype._doDispose.call(this)},_dp(i,"grid",{get:function(){return this._grid}}),i.prototype._changed=function(){this._grid&&this._grid.optionsChanged(this)},i.prototype._invalidateOwner=function(){this._grid&&this._grid.invalidate()},i.prototype._layoutOwner=function(){this._grid&&this._grid.invalidateLayout()},i.prototype._refreshOwner=function(){this._grid&&this._grid.refreshView()},i.prototype._invalidateEditor=function(){},i);t.GridBaseOptions=r});t(Kt),Kt.GridBaseOptions;var Qt=n(function(e,t){function i(e){return e=n.call(this,e)||this,e._colCount=0,e._rightCount=0,e._rowCount=0,e._rightFixed=!0,e._exceptFromFiltering=!0,e._exceptFromSorting=!0,e._editable=!0,e._rowEditable=!0,e._resizable=!1,e._rowResizable=!1,e._movable=!1,e._colBarWidth=3,e._rightBarWidth=3,e._rowBarHeight=3,e._mergeRows=!1,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Kt.GridBaseOptions,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(i,"colCount",{get:function(){return this._colCount},set:function(e){(e=Math.max(0,e))!=this._colCount&&(this._colCount=e,this.grid&&this._refreshOwner())}}),_dp(i,"rightCount",{get:function(){return this._rightCount},set:function(e){(e=Math.max(0,e))!=this._rightCount&&(this._rightCount=e,this.grid&&this._refreshOwner())}}),_dp(i,"rowCount",{get:function(){return this._rowCount},set:function(e){(e=Math.max(0,e))!=this._rowCount&&(this._rowCount=e,this.$_resetItemSource())}}),_dp(i,"rightFixed",{get:function(){return this._rightFixed},set:function(e){e!=this._rightFixed&&(this._rightFixed=e,this._refreshOwner())}}),_dp(i,"exceptFromFiltering",{get:function(){return this._exceptFromFiltering},set:function(e){e!=this._exceptFromFiltering&&(this._exceptFromFiltering=e,this.$_resetItemSource())}}),_dp(i,"exceptFromSorting",{get:function(){return this._exceptFromSorting},set:function(e){e!=this._exceptFromSorting&&(this._exceptFromSorting=e,this.$_resetItemSource())}}),_dp(i,"editable",{get:function(){return this._editable},set:function(e){e!=this._editable&&(this._editable=e,this._refreshOwner())}}),_dp(i,"rowEditable",{get:function(){return this._rowEditable},set:function(e){e!=this._rowEditable&&(this._rowEditable=e,this._refreshOwner())}}),_dp(i,"resizable",{get:function(){return this._resizable},set:function(e){e!=this._resizable&&(this._resizable=e)}}),_dp(i,"rowResizable",{get:function(){return this._rowResizable},set:function(e){e!=this._rowResizable&&(this._rowResizable=e)}}),_dp(i,"movable",{get:function(){return this._movable},set:function(e){e!=this._movable&&(this._movable=e)}}),_dp(i,"colBarWidth",{get:function(){return this._colBarWidth},set:function(e){(e=Math.max(0,e))!=this._colBarWidth&&(this._colBarWidth=e,this._refreshOwner())}}),_dp(i,"rightBarWidth",{get:function(){return this._rightBarWidth},set:function(e){(e=Math.max(0,e))!=this._rightBarWidth&&(this._rightBarWidth=e,this._refreshOwner())}}),_dp(i,"rowBarHeight",{get:function(){return this._rowBarHeight},set:function(e){(e=Math.max(0,e))!=this._rowBarHeight&&(this._rowBarHeight=e,this._refreshOwner())}}),_dp(i,"mergeRows",{get:function(){return this._mergeRows},set:function(e){e!=this._mergeRows&&(this._mergeRows=e,this.grid._columnMergeRuleChanged(null))}}),i.prototype.$_resetItemSource=function(){var e,t=this.grid;t&&(e=t.itemSource)&&e.setFixed(this._rowCount,!this._exceptFromSorting,!this._exceptFromFiltering)},i.ROW_BAR_STYLE="rg-fixed-row-bar",i.ROW_BAR_CELL_STYLE="rg-fixed-row-bar-cell",i.COLUMN_BAR_STYLE="rg-fixed-column-bar",i);t.FixedOptions=r});t(Qt),Qt.FixedOptions;var Gt=n(function(e,t){function r(e,t){void 0===t&&(t=0),this.x=e=void 0===e?0:e,this.y=t}Object.defineProperty(t,"__esModule",{value:!0});var n=(r.empty=function(){return new r},r.create=function(e,t){return new r(e=void 0===e?0:e,t=void 0===t?0:t)},_dp(r,"isEmpty",{get:function(){return 0===this.x||0===this.y}}),r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.equals=function(e){return e===this||e&&this.x===e.x&&this.y===e.y},r.prototype.setEmpty=function(){return this.x=this.y=0,this},r.prototype.set=function(e,t){return this.x=e,this.y=t,this},r.prototype.round=function(){var e=this.clone();return e.x>>>=0,e.y>>>=0,e},r.prototype.toString=function(){return"{x: "+this.x+", y: "+this.y+"}"},r);t.Point=n});t(Gt),Gt.Point;var Yt=n(function(e,t){function i(e,t){void 0===t&&(t=null);var r=n.call(this)||this;return r._x=0,r._y=0,r._width=0,r._height=0,r._visible=!0,r._mouseEnabled=!0,r._elements=null,r._dirty=!0,r._hovered=!1,r._className="",r._name=t,e=r._dom=r._createDom(e),e&&r._initDom(e),r}function o(){return null!==s&&s.apply(this,arguments)||this}function a(e,t){return void 0===t&&(t=!1),e=u.call(this,e)||this,e._active=t,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=x.EventAware,l.__extends(i,n),i.prototype._doDispose=function(){if(this._dom&&(this._removeEventListeners(this._dom),p.Utils.detach(this._dom),this._dom=null),this._elements){for(var e=0,t=this._elements;e<t.length;e++)t[e].dispose();this._elements.length=0}this._parent=null,n.prototype._doDispose.call(this)},_dp(i,"name",{get:function(){return this._name}}),_dp(i,"container",{get:function(){return this._parent&&this._parent.container}}),_dp(i,"parent",{get:function(){return this._parent}}),_dp(i,"childCount",{get:function(){return this._elements?this._elements.length:0}}),_dp(i,"isSingleton",{get:function(){return this._parent&&1==this._parent.childCount&&this._parent._elements[0]===this}}),_dp(i,"x",{get:function(){return this._x},set:function(e){e!=this._x&&(this._x=e,this.invalidate())}}),_dp(i,"y",{get:function(){return this._y},set:function(e){e!=this._y&&(this._y=e,this.invalidate())}}),_dp(i,"width",{get:function(){return this._width},set:function(e){(e=Math.max(0,e))!=this._width&&(this._width=e,this.sizeChanged())}}),_dp(i,"height",{get:function(){return this._height},set:function(e){(e=Math.max(0,e))!=this._height&&(this._height=e,this.sizeChanged())}}),_dp(i,"right",{get:function(){return this._x+this._width}}),_dp(i,"bottom",{get:function(){return this._y+this._height}}),_dp(i,"position",{get:function(){return new Gt.Point(this._x,this._y)}}),_dp(i,"bounds",{get:function(){return new h.Rectangle(this._x,this._y,this._width,this._height)}}),_dp(i,"clientRect",{get:function(){return new h.Rectangle(0,0,this._width,this._height)}}),_dp(i,"visible",{get:function(){return this._visible},set:function(e){e!=this._visible&&(this._visible=e,this._dom&&(this._dom.style.display=this._visible?this._getCssDisplay():"none"),this.invalidate(!0),this._visibleChanged())}}),_dp(i,"mouseEnabled",{get:function(){return this._mouseEnabled},set:function(e){this._mouseEnabled=e}}),_dp(i,"hovered",{get:function(){return this._hovered},set:function(e){e!=this._hovered&&(this._hovered=e,this._hoverChanged())}}),_dp(i,"isLayer",{get:function(){return!1}}),_dp(i,"clickable",{get:function(){return!1}}),_dp(i,"mouseX",{get:function(){var e=this.container;if(e){for(var t=e._currentX,n=this;n&&void 0!==n;)t-=n._x,n=n._parent;return t}return NaN}}),_dp(i,"mouseY",{get:function(){var e=this.container;if(e){for(var t=e._currentY,n=this;n&&void 0!==n;)t-=n._y,n=n._parent;return t}return NaN}}),_dp(i,"doc",{get:function(){return p.getDoc(this._dom)}}),_dp(i,"style",{get:function(){return this._dom&&this._dom.style}}),i.prototype.isDom=function(e){return e===this._dom},i.prototype.canHover=function(){return!0},i.prototype.getChildren=function(){return this._elements&&this._elements.concat()},i.prototype.getChild=function(e){return this._elements[e]},i.prototype.indexOf=function(e){return this._elements?this._elements.indexOf(e):-1},i.prototype.contains=function(e){return this._elements&&0<=this._elements.indexOf(e)},i.prototype.getAncestor=function(e){for(var t=this._parent;t;){if(t instanceof e)return t;t=t._parent}return null},i.prototype.addChild=function(e){return this.insertChild(-1,e)},i.prototype.insertChild=function(e,t){if(!t||this.contains(t))return!1;var n,r=this._elements||[],i=t._dom;return e<0||e>=r.length?(this._dom&&i&&this._dom.appendChild(i),r.push(t)):(i&&(n=this._elements[e]._dom,this._dom&&n&&this._dom.insertBefore(i,n)),r.splice(e,0,t)),this._elements=r,t._parent=this,t.$_attached(this),this.invalidate(),!0},i.prototype.removeChild=function(e){if(e&&this._elements){var t=this._elements.indexOf(e);if(0<=t)return this.removeChildAt(t)===e}return!1},i.prototype.removeChildAt=function(e){if(0<=e&&e<this.childCount){var t=this._elements[e];return this._elements.splice(e,1),this._dom&&t._dom&&this._dom.removeChild(t._dom),t._parent=null,t._dirty=!1,t.$_detached(this),this.invalidate(),t}return null},i.prototype.removeLast=function(){return this._elements&&0<this._elements.length?this.removeChildAt(this._elements.length-1):null},i.prototype.clear=function(){var e=this._elements;if(0<(e?e.length:0)){for(var t=0,n=e;t<n.length;t++){var r=n[t];r._parent=null,r.$_detached(this)}if(this._elements=[],this._dom)for(;this._dom.lastChild;)this._dom.removeChild(this._dom.lastChild);return this.invalidate(),!0}return!1},i.prototype.hideAll=function(){if(this._elements)for(var e=0,t=this._elements;e<t.length;e++)t[e].visible=!1},i.prototype.invalidate=function(e,t){var n;if(void 0===t&&(t=!1),!(e=void 0===e?!1:e)&&this._dirty||(this._dirty=!0,(n=this.container)&&n.invalidateElement(this)),t&&this._elements)for(var r=0,i=this._elements;r<i.length;r++)i[r].invalidate(e,!0)},i.prototype.validate=function(){this._dirty=!1},i.prototype.invalidateLayout=function(){var e=this.container;e&&e.invalidateLayout()},i.prototype.getBounds=function(e){return(e=void 0===e?null:e)?e.set(this._x,this._y,this._width,this._height):new h.Rectangle(this._x,this._y,this._width,this._height)},i.prototype.getClientRect=function(e){return(e=void 0===e?null:e)?e.set(0,0,this._width,this._height):new h.Rectangle(0,0,this._width,this._height)},i.prototype.containsInBounds=function(e,t){return e>=this._x&&e<this._x+this._width&&t>=this._y&&t<this._y+this._height},i.prototype.containsInClient=function(e,t){return 0<=e&&e<this._width&&0<=t&&t<this._height},i.prototype.parentToElement=function(e,t,n){for(var r=this;r&&r!=e;)t-=r._x,n-=r._y,r=r._parent;return new Gt.Point(t,n)},i.prototype.translateBy=function(e,t){var n=e;for(t=(t=void 0===t?null:t)||new h.Rectangle(0,0,this._width,this._height);n&&n!==this;)t.x-=n._x,t.y-=n._y,n=n._parent;return t},i.prototype.topBy=function(e,t){for(var n=this._y+t,r=this._parent;r&&r!==e;)n+=r._y,r=r._parent;return n},i.prototype.boundsBy=function(e,t){var n=this._x,r=this._y,i=this._parent;for((t=void 0===t?null:t)&&(n+=t.x,r+=t.y);i&&i!==e;)n+=i._x,r+=i._y,i=i._parent;return t?new h.Rectangle(n,r,t.width,t.height):new h.Rectangle(n,r,this._width,this._height)},i.prototype.boundsByContainer=function(e){var t=this._x,n=this._y;(e=void 0===e?null:e)&&(t+=e.x,n+=e.y);for(var r=this._parent;r&&void 0!==r._x;)t+=r._x,n+=r._y,r=r._parent;return e?new h.Rectangle(t,n,e.width,e.height):new h.Rectangle(t,n,this._width,this._height)},i.prototype.pointByContainer=function(e,t){for(var n=this._parent;n&&void 0!==n._x;)e+=n._x,t+=n._y,n=n._parent;return new Gt.Point(e+this._x,t+this._y)},i.prototype.containerToElement=function(e,t){for(var n=this;n;)e-=n._x,t-=n._y,n=n._parent;return new Gt.Point(e,t)},i.prototype.boundsByScreen=function(e){return e=this.boundsByContainer(e=void 0===e?null:e),e=this.container.toScreen(e)},i.prototype.hitTest=function(e,t){return 0<=e&&e<this._width&&0<=t&&t<this._height},i.prototype.findChildAt=function(e,t,n){var r=this._elements,i=r?r.length:0;if(0<i)for(var s=i-1;0<=s;s--){var o=r[s];if(o.visible){var u=e-o._x,a=t-o._y;if((n||o._mouseEnabled)&&(o.isLayer||o.hitTest(u,a))){a=o.findChildAt(u,a,n);if(a)return a;if(!o.isLayer&&o._mouseEnabled)return o}}}return null},i.prototype.move=function(e,t){e==this._x&&t==this._y||(this._x=e,this._y=t,this.invalidate())},i.prototype.resize=function(e,t){e==this._width&&t==this._height||(this._width=e,this._height=t,this.invalidate())},i.prototype.setBounds=function(e,t,n,r){e==this._x&&t==this._y&&n==this._width&&r==this._height||(this._x=e,this._y=t,this._width=n,this._height=r,this.sizeChanged())},i.prototype.setBoundsI=function(e,t,n,r){t>>=0,n>>=0,r>>=0,(e>>=0)==this._x&&t==this._y&&n==this._width&&r==this._height||(this._x=e,this._y=t,this._width=n,this._height=r,this.sizeChanged())},i.prototype.setRect=function(e){e.x==this._x&&e.y==this._y&&e.width==this._width&&e.height==this._height||(this._x=e.x,this._y=e.y,this._width=e.width,this._height=e.height,this.sizeChanged())},i.prototype.setRectI=function(e){var t=e.x>>0,n=e.y>>0,r=e.width>>0,e=e.height>>0;t==this._x&&n==this._y&&r==this._width&&e==this._height||(this._x=t,this._y=n,this._width=r,this._height=e,this.sizeChanged())},i.prototype.draw=function(){this._dirty&&this._dom&&(this._beforeDraw(this._dom),this._doDraw(this._dom),this._dirty=!1)},i.prototype.resetSize=function(){this._dom&&this._setSizeStyle(this._dom.style)},i.prototype.getHtml=function(){return this._dom&&this._dom.outerHTML},i.prototype.setImportantStyle=function(e,t){this._dom.style.setProperty(e,t,"important")},i.prototype._createDom=function(e){return e.createElement("div")},i.prototype._initDom=function(e){var t=e.style;t.position="absolute",t.boxSizing="border-box",this._addEventListeners(e)},i.prototype._addEventListeners=function(e){},i.prototype._removeEventListeners=function(e){},i.prototype.$_attached=function(e){this._doAttached(e)},i.prototype._doAttached=function(e){},i.prototype.$_detached=function(e){this._doDetached(e)},i.prototype._doDetached=function(e){},i.prototype._setSizeStyle=function(e){e.width=this._width+"px",e.height=this._height+"px"},i.prototype._getCssDisplay=function(){return"block"},i.prototype.resetStyleName=function(){this._setClassName(this._dom)},i.prototype._setClassName=function(e){var t=this._getCssSelector();t!=this._className&&(this._className=t,(e||this._dom).className=t||"")},i.prototype.applyBounds=function(){var e=this._dom.style;e.left=this._x+"px",e.top=this._y+"px",this._setSizeStyle(e)},i.prototype._beforeDraw=function(e){this._setClassName(e),e=e.style,e.left=this._x+"px",e.top=this._y+"px",this._setSizeStyle(e)},i.prototype._hoverChanged=function(){},i.prototype._visibleChanged=function(){},i.prototype.sizeChanged=function(){this.invalidate(),this._doSizeChanged()},i.prototype._doSizeChanged=function(){},i);t.VisualElement=r;var s,r=(s=r,l.__extends(o,s),_dp(o,"isLayer",{get:function(){return!0}}),o.prototype._getCssSelector=function(){},o.prototype._doDraw=function(e){},o);t.LayerElement=r;var u,r=(u=r,l.__extends(a,u),_dp(a,"active",{get:function(){return this._active}}),a.prototype.$_activateView=function(){this._active||(this._doActivateView(),this._active=!0)},a.prototype.$_deactivateView=function(){void 0!==this.active&&!this._active||(this._dodDeactivateView(),this._active=!1)},a);t.ViewLayer=r});t(Yt),Yt.VisualElement,Yt.LayerElement,Yt.ViewLayer;var Zt=n(function(e,t){function s(e,t){var n=r.call(this)||this;return n._manager=e,n._runStyle=t,n}function a(e){var t=o.call(this)||this;return t._exclusiveMode=!0,t._itemStyle=n.BLOCK,t._items=[],t._locked=!1,t._grid=e,t}function d(e,t,n,r){return t=f.call(this,e,t)||this,t._startIndex=n.clone(),t._endIndex=r.clone(),p.Utils.isDebugging()&&t._startIndex.layout,p.Utils.isDebugging()&&t._endIndex.layout,t}function g(e,t,n,r){return t=v.call(this,e,t)||this,t._startRow=n,t._endRow=r,t}function E(e,t,n,r){return t=b.call(this,e,t)||this,t._startLayout=n,t._endLayout=r,t}function N(e){return S.call(this,e,"selectionView")||this}function L(e){var t=C.call(this,e,"selectionMask")||this;return t._toped=!1,t._bottomed=!1,t._lefted=!1,t._righted=!1,t._view=new T(e),t.addChild(t._view),t}function O(e,t){return t=A.call(this,e.doc,t)||this,t._pool=[],t._views={},t._rangeRect=new h.Rectangle,t._grid=e,t}var n;Object.defineProperty(t,"__esModule",{value:!0}),(u=t.SelectionMode||(t.SelectionMode={})).NONE="none",u.SINGLE="single",(i=n=t.SelectionStyle||(t.SelectionStyle={})).BLOCK="block",i.ROWS="rows",i.COLUMNS="columns",i.SINGLE_ROW="singleRow",i.SINGLE_COLUMN="singleColumn",i.SINGLE="single",i.NONE="none",(u=t.SelectionDisplay||(t.SelectionDisplay={})).CELL="cell",u.CELL_AND_BORDER="cellAndBorder",u.MASK="mask",t.isSingleSelectionStyle=function(e){return e==n.SINGLE_ROW||e==n.SINGLE_COLUMN||e==n.SINGLE},t.isRowSelection=function(e){return e=e&&e.style,e==n.ROWS||e==n.SINGLE_ROW},t.isColumnSelection=function(e){return e=e&&e.style,e==n.COLUMNS||e==n.SINGLE_COLUMN};var r,i=(r=y.Base,l.__extends(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(s,"grid",{get:function(){return this._manager&&this._manager.grid}}),_dp(s,"runStyle",{get:function(){return this._runStyle}}),s.prototype.setValues=function(e){var t=this.grid.dataSource,n=this._getRows();n&&n.rows&&0<n.rows.length&&n.fields&&0<n.fields.length&&t.fillValue(n.rows,n.fields,e)},s.prototype.inflate=function(e,t){switch(e){case"left":this._inflateLeft(t);break;case"right":this._inflateRight(t);break;case"top":this._inflateTop(t);break;case"bottom":this._inflateBottom(t)}},s.prototype.getItems=function(e){void 0===e&&(e=!0);for(var t=this.grid,n=[],r=this.getBounds(),i=r.top,s=r.bottom,o=i;o<=s;o++){var u=t.getItem(o);u&&(!e||0<=u.dataRow)&&n.push(u)}return n},s.prototype.getItemIndices=function(e){void 0===e&&(e=!0);for(var t=this.grid,n=[],r=this.getBounds(),i=r.top,s=r.bottom,o=i;o<=s;o++){var u=t.getItem(o);u&&(!e||0<=u.dataRow)&&n.push(u.index)}return n},s.prototype.getRows=function(){for(var e=this.grid,t=[],n=this.getBounds(),r=n.top,i=n.bottom,s=r;s<=i;s++){var o=e.getItem(s);o&&0<=o.dataRow&&0<=(o=o.dataRow)&&t.push(o)}return t},s.prototype._resized=function(){this._manager&&this._manager.$_itemResized(this)},s.prototype.toProxy=function(){var e=this.grid,t=this.getBounds(),n=e.getItem(t.r1),e=e.getItem(t.r2);return{style:this.style,startItem:t.r1,startRow:n?n.dataRow:-1,startColumn:t.c1.firstColumn.name,endItem:t.r2,endRow:e?e.dataRow:-1,endColumn:t.c2.lastColumn.name,startLayout:t.c1,endLayout:t.c2}},s);t.SelectionItem=i;var o,u=(o=x.EventAware,l.__extends(a,o),a.prototype._doDispose=function(){this._grid=null,this._items=null,o.prototype._doDispose.call(this)},_dp(a,"grid",{get:function(){return this._grid}}),_dp(a,"exclusiveMode",{get:function(){return this._exclusiveMode},set:function(e){e!=this._exclusiveMode&&(this._exclusiveMode=e,this.clear())}}),_dp(a,"itemStyle",{get:function(){return this._itemStyle},set:function(e){e!=this._itemStyle&&(this._itemStyle=e,this.clear())}}),_dp(a,"count",{get:function(){return this._items.length}}),_dp(a,"single",{get:function(){return 1==this._items.length&&this._items[0].single}}),a.prototype.lock=function(){this._locked=!0},a.prototype.unlock=function(){this._locked=!1},a.prototype.getItem=function(e){return this._items[e]},a.prototype.add=function(e,t,r){if(this._locked)return null;if(r==n.NONE)return this.clear(),null;this._exclusiveMode&&r!=this._style&&this.clear();var i=null;switch(r){case n.COLUMNS:i=new w(this,r,e.layout,t.layout);break;case n.SINGLE_COLUMN:i=new w(this,r,e.layout,e.layout);break;case n.ROWS:i=new m(this,r,e.itemIndex,t.itemIndex);break;case n.SINGLE_ROW:i=new m(this,r,e.itemIndex,e.itemIndex);break;case n.BLOCK:i=new c(this,r,e,t);break;case n.SINGLE:i=new c(this,r,e,e)}return i&&this.$_addItem(i)},a.prototype.remove=function(e){var t;this._locked||0<=(t=this._items.indexOf(e))&&(this._items.splice(t,1),this.fireEvent(a.REMOVED,e),this._changed())},a.prototype.clear=function(){this._locked||0<this._items.length&&(this._items.length=0,this.fireEvent(a.CLEARED),this._changed())},a.prototype.selectRow=function(e){this.clear(),this.$_addItem(new m(this,n.ROWS,e,e))},a.prototype.containsItem=function(e){for(var t=0,n=this._items.length;t<n;t++)if(this._items[t].containsItem(e))return!0;return!1},a.prototype.containsLayout=function(e){for(var t=0,n=this._items.length;t<n;t++)if(this._items[t].containsLayout(e))return!0;return!1},a.prototype.containsCell=function(e){return this.contains(e.itemIndex,e.layout)},a.prototype.contains=function(e,t){for(var n=0,r=this._items.length;n<r;n++)if(this._items[n].contains(e,t))return!0;return!1},a.prototype.normalize=function(){},a.prototype.canResize=function(e){return e&&!t.isSingleSelectionStyle(e._runStyle)},a.prototype._changed=function(){this.fireEvent(a.CHANGED)},a.prototype.$_addItem=function(e){if(!e)throw new Error("item is null");return this._items.indexOf(e)<0&&(this._items.push(e),this.fireEvent(a.ADDED,e),this._changed()),e},a.prototype.$_itemResized=function(e){this.fireEvent(a.RESIZED,e),this._changed()},a.prototype.$_ended=function(e){this.fireEvent(a.ENDED,e)},a.CHANGED="onSelectionChanged",a.ADDED="onSelectionAdded",a.REMOVED="onSelectionRemoved",a.CLEARED="onSelectionCleared",a.RESIZED="onSelectionResized",a.ENDED="onSelectionEnded",a);t.SelectionManager=u;var f,c=(f=i,l.__extends(d,f),_dp(d,"startIndex",{get:function(){return this._startIndex}}),_dp(d,"endIndex",{get:function(){return this._endIndex}}),_dp(d,"style",{get:function(){return n.BLOCK}}),_dp(d,"single",{get:function(){return It.CellIndex.areEquals(this._startIndex,this._endIndex)}}),d.prototype.getBounds=function(){var e=this.grid;if(this._startIndex.normalize(e),this._endIndex.normalize(e),It.CellIndex.areEquals(this._startIndex,this._endIndex))return It.CellRange.create(this._startIndex);var t=e.activeCellLayout._dataCells,n=this._startIndex.layout,r=this._endIndex.layout,i=void 0,e=void 0,e=n.col<=r.col?(i=t[0][n.col],t[t.length-1][r.col]):(i=t[0][r.col],t[t.length-1][n.col]);return It.CellRange.createRange(this._startIndex.itemIndex,i,this._endIndex.itemIndex,e)},d.prototype.containsItem=function(e){var t=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),n=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex);return t<=e&&e<=n},d.prototype.containsLayout=function(e){if(!e)return!1;if(this.single)return this._startIndex.layout===e;var t=e.distance,n=this._startIndex.layout.distance,e=this._endIndex.layout.distance;return n<e?n<=t&&t<=e:e<=t&&t<=n},d.prototype.contains=function(e,t){return this.getBounds().contains(e,t)},d.prototype.resizeTo=function(e){this.grid.isValid(e)&&!It.CellIndex.areEquals(e,this._endIndex)&&(this._endIndex.assign(e),this._resized())},d.prototype.moveRow=function(e){this._startIndex.itemIndex+=e,this._endIndex.itemIndex+=e},d.prototype.intersectsWith=function(e){return this.getBounds().intersectsWith(e.getBounds())},d.prototype.mergeWith=function(e){},d.prototype.getData=function(e){if(0==(e=void 0===e?-1:e))return null;var t,n=this.grid,r=n.collectDataColumns(this._startIndex.layout,this._endIndex.layout);if(!r||(t=r.length)<1)return null;for(var i=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),s=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex),o=[],u=i;u<=s;u++){var a=n.getItem(u);if(a&&a.isDataRow){for(var f={},l=0;l<t;l++){var c=r[l];f[c.fieldName]=a.getData(c.dataIndex)}if(o.push(f),0<e&&o.length==e)break}}return o},d.prototype._inflateLeft=function(e){this._startIndex.layout.distance<=this._endIndex.layout.distance?e.layout!==this._startIndex.layout&&(this._startIndex.layout=e.layout,this._resized()):e.layout!==this._endIndex.layout&&(this._endIndex.layout=e.layout,this._resized())},d.prototype._inflateRight=function(e){this._startIndex.layout.distance>this._endIndex.layout.distance?e.layout!==this._startIndex.layout&&(this._startIndex.layout=e.layout,this._resized()):e.layout!==this._endIndex.layout&&(this._endIndex.layout=e.layout,this._resized())},d.prototype._inflateTop=function(e){var t=this.grid,e=Math.max(0,Math.min(t.itemCount-1,e.itemIndex));this._startIndex.itemIndex<=this._endIndex.itemIndex?e!==this._startIndex.itemIndex&&(this._startIndex.itemIndex=e,this._resized()):e!==this._endIndex.itemIndex&&(this._endIndex.itemIndex=e,this._resized())},d.prototype._inflateBottom=function(e){var t=this.grid,e=Math.max(0,Math.min(t.itemCount-1,e.itemIndex));this._startIndex.itemIndex>this._endIndex.itemIndex?e!==this._startIndex.itemIndex&&(this._startIndex.itemIndex=e,this._resized()):e!==this._endIndex.itemIndex&&(this._endIndex.itemIndex=e,this._resized())},d.prototype._getRows=function(){var e=this.grid,t=e.collectDataColumns(this._startIndex.layout,this._endIndex.layout);if(t&&!(t.length<1)){for(var n=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),r=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex),i=[],s=[],o=n;o<=r;o++)i.push(e.getItem(o).dataRow);for(var u=0,a=t;u<a.length;u++){var f=a[u];s.push(f.dataIndex)}return{rows:i,fields:s}}},d.prototype.toString=function(){return this._startIndex+" ~ "+this._endIndex},d);t.BlockSelection=c;var v,m=(v=i,l.__extends(g,v),_dp(g,"startRow",{get:function(){return this._startRow}}),_dp(g,"endRow",{get:function(){return this._endRow}}),_dp(g,"topRow",{get:function(){return Math.min(this._startRow,this._endRow)}}),_dp(g,"bottomRow",{get:function(){return Math.max(this._startRow,this._endRow)}}),_dp(g,"style",{get:function(){return n.ROWS}}),_dp(g,"single",{get:function(){return!1}}),g.prototype.getBounds=function(){var e=this.grid,t=e.itemCount;return this._startRow=Math.max(0,Math.min(t-1,this._startRow)),this._endRow=Math.max(0,Math.min(t-1,this._endRow)),this._startRow<=this._endRow?It.CellRange.createRange(this._startRow,e.activeCellLayout.first,this._endRow,e.activeCellLayout.last):It.CellRange.createRange(this._endRow,e.activeCellLayout.first,this._startRow,e.activeCellLayout.last)},g.prototype.contains=function(e,t){return this.containsItem(e)},g.prototype.containsItem=function(e){return e>=this.topRow&&e<=this.bottomRow},g.prototype.containsLayout=function(e){return!0},g.prototype.resizeTo=function(e){e=Math.max(0,e.itemIndex),e!=this._endRow&&(this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},g.prototype.moveRow=function(e){this._startRow+=e,this._endRow+=e},g.prototype.intersectsWith=function(e){return this.getBounds().intersectsWith(e.getBounds())},g.prototype.mergeWith=function(e){},g.prototype.getData=function(e){if(0==(e=void 0===e?-1:e))return null;var t=this.grid,n=t.collectDataColumns(t.getVisibleLayout(0),t.getVisibleLayout(t.visibleLayoutCount-1));if(!n)return null;var r=n.length;if(r<1)return null;for(var i=Math.max(0,Math.min(this._startRow,this._endRow)),s=Math.min(t.itemCount-1,Math.max(this._startRow,this._endRow)),o=[],u=i;u<=s;u++){var a=t.getItem(u);if(a&&a.isDataRow){for(var f={},l=0;l<r;l++){var c=n[l];f[c.fieldName]=a.getData(c.dataIndex)}if(o.push(f),0<e&&o.length==e)break}}return o},g.prototype._inflateLeft=function(e){},g.prototype._inflateRight=function(e){},g.prototype._inflateTop=function(e){e=e.itemIndex,e!=this.topRow&&(this._startRow<=this._endRow?this._startRow=Math.max(0,Math.min(this.grid.itemCount-1,e)):this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},g.prototype._inflateBottom=function(e){e=e.itemIndex,e!=this.bottomRow&&(this._startRow>this._endRow?this._startRow=Math.max(0,Math.min(this.grid.itemCount-1,e)):this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},g.prototype._getRows=function(){var e=this.grid,t=e.activeCellLayout,n=e.collectDataColumns(t.first,t.last);if(n&&!(n.length<1)){for(var t=Math.max(0,Math.min(this._startRow,this._endRow)),r=Math.min(e.itemCount-1,Math.max(this._startRow,this._endRow)),i=[],s=[],o=t;o<=r;o++)i.push(e.getItem(o).dataRow);for(var u=0,a=n;u<a.length;u++){var f=a[u];s.push(f.dataIndex)}return{rows:i,fields:s}}},g);t.RowSelection=m;var b,w=(b=i,l.__extends(E,b),_dp(E,"startLayout",{get:function()
{return this._startLayout}}),_dp(E,"endLayout",{get:function(){return this._endLayout}}),_dp(E,"leftLayout",{get:function(){return this._startLayout.col<=this._endLayout.col?this._startLayout:this._endLayout}}),_dp(E,"rightLayout",{get:function(){return this._startLayout.col>this._endLayout.col?this._startLayout:this._endLayout}}),_dp(E,"style",{get:function(){return n.COLUMNS}}),_dp(E,"single",{get:function(){return!1}}),E.prototype.getBounds=function(){var e,t=this.grid.activeCellLayout,n=this._startLayout,r=this._endLayout;return r.col>n.col&&(e=n,n=r,r=e),n=t.getTopOf(n),r=t.getBottomOf(r,!0),t=this.grid.itemCount-1,It.CellRange.createRange(0,n,t,r)},E.prototype.contains=function(e,t){return this.containsLayout(t)},E.prototype.containsItem=function(e){return!0},E.prototype.containsLayout=function(e){return e.distance>=this._startLayout.distance&&e.distance<=this._endLayout.distance},E.prototype.resizeTo=function(e){e.layout!==this._endLayout&&(this._endLayout=e.layout,this._resized())},E.prototype.moveRow=function(e){},E.prototype.intersectsWith=function(e){return this.getBounds().intersectsWith(e.getBounds())},E.prototype.mergeWith=function(e){},E.prototype.getData=function(e){if(0==(e=void 0===e?-1:e))return null;var t=this.grid,n=t.collectDataColumns(this._startLayout,this._endLayout);if(!n)return null;for(var r=t.itemCount,i=[],s=0;s<r;s++){var o=t.getItem(s);if(o&&o.isDataRow){for(var u={},a=0,f=n.length;a<f;a++)u[n[a].fieldName]=o.getData(n[a].dataIndex);if(i.push(u),0<e&&i.length==e)break}}return i},E.prototype._inflateLeft=function(e){e=e.layout,e!==this.leftLayout&&(this._startLayout.distance<=this._endLayout.distance?this._startLayout=e:this._endLayout=e,this._resized())},E.prototype._inflateRight=function(e){e=e.layout,e!==this.rightLayout&&(this._startLayout.distance>this._endLayout.distance?this._startLayout=e:this._endLayout=e,this._resized())},E.prototype._inflateTop=function(e){},E.prototype._inflateBottom=function(e){},E.prototype._getRows=function(){var e=this.grid,t=e.collectDataColumns(this._startLayout,this._endLayout);if(t){for(var n=e.itemCount,r=[],i=[],s=0;s<n;s++)r.push(e.getItem(s).dataRow);for(var o=0,u=t;o<u.length;o++){var a=u[o];i.push(a.dataIndex)}return{rows:r,fields:i}}},E);t.ColumnSelection=w;var S,T=(S=Yt.LayerElement,l.__extends(N,S),N.prototype._getCssSelector=function(){return"rg-selection"},N.prototype._initDom=function(e){S.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},N);t.SelectionView=T;var C,k=(C=Yt.LayerElement,l.__extends(L,C),_dp(L,"item",{get:function(){return this._item}}),L.prototype.prepare=function(){this._toped=this._bottomed=this._lefted=this._righted=!1},L.prototype.updateElement=function(){var e=0,t=0,n=this.width,r=this.height;this._lefted&&(e-=10,n+=10),this._righted&&(n+=10),this._toped&&(t-=10,r+=10),this._bottomed&&(r+=10),this._view.setBounds(e,t,n,r)},L.prototype._initDom=function(e){C.prototype._initDom.call(this,e),this.setImportantStyle("overflow","hidden"),this.setImportantStyle("pointer-events","none")},L);t.SelectionMask=k;var A,i=(A=Yt.LayerElement,l.__extends(O,A),O.prototype._doDispose=function(){A.prototype._doDispose.call(this)},O.prototype.addView=function(e){var t=e.$_hash,n=this._views[t];return n||(n=this._pool.pop()||new k(this.doc),this._views[t]=n),n._item=e,this.addChild(n),n},O.prototype.clearViews=function(){for(var e in this._views)e=this._views[e],this.removeChild(e),this._pool.push(e);this._views={}},O.prototype.layout=function(){var e,t=this._grid.layoutManager,n=new h.Rectangle;for(e in this._views){var r=this._views[e],i=r.item,s=!1;i.single||(r.prepare(),i instanceof m?(s=this.$_getSelectionRowsRect(t,i,r,n),r._lefted=!0,r._righted=!0):i instanceof w?(s=this.$_getSelectionColumnsRect(t,i,r,n),r._toped=!0,r._bottomed=!0):s=this.$_getSelectionRangeRect(t,i,r,n),s&&(i=t.contentBounds.y+t.footerBounds.y,n.bottom>i&&(r._bottomed=!0,n.bottom=i))),r.visible=s,r.visible&&(r.setRectI(n),r.updateElement(),r.invalidate())}},O.prototype.$_getSelectionRowsRect=function(e,t,n,r){var i=this._grid,s=t.getBounds(),o=s.r1,u=s.r2,a=e.itemCount,t=e.fixedItemCount,s=i.topIndex;if(0<t){if(s+t+a<=o||u<0||t<=o&&u<s+t)return!1;var f=e.fixedHeight+i.fixedOptions.rowBarHeight;o<t?l=e.getTableItemBounds(Math.max(0,o)):((l=e.getTableItemBounds(Math.max(0,o-s))).y<f&&(n._toped=!0),l.y=Math.max(l.y,f)),u<t?c=e.getTableItemBounds(u):o<=t&&u<t+s?c=e.getTableItemBounds(Math.min(t+s,t)-1):s<=u?(c=e.getTableItemBounds(Math.min(e.itemCount+t-1,u-s))).y=Math.max(c.y,f):c=l}else{if(!(0<a))return!1;if(s+a<=o||u<s)return!1;var f=o-s,l=e.getTableItemBounds(Math.max(0,f)),c=e.getTableItemBounds(Math.min(a-1,u-s));f<0&&(n._toped=!0)}return r.copy(l.union(c)),r.offset(e.fixedContentBounds.x,e.contentBounds.y+e.bodyBounds.y),r.right=(0<e.rightLayoutCount?e.rightContentBounds:e.contentBounds).right,!0},O.prototype.$_getSelectionColumnsRect=function(e,t,n,r,i){var s,o=this._grid,u=t.getBounds(),a=e.fixedLayoutCount,f=e.rightLayoutCount,l=(e.rightFirstLayout,u.c1.col),t=u.c2.col,o=(o.fixedOptions.colBarWidth,e.getDataRect(u.c1)),u=e.getDataRect(u.c2);return r.left=Math.min(o.x,u.x),r.right=Math.max(o.right,u.right),r.y=e.contentBounds.y+e.headerBounds.bottom,r.height=Math.min(e.dataBounds.height,e.footerBounds.y),i&&i.copy(r),a<=l&&(s=e.fixedContentBounds.right,r.x<s&&(n._lefted=!0,r.left=Math.max(r.left,s)),r.right<s&&(n._righted=!0,r.width=0)),0<f&&(s=e.rightFirstLayout,f=e.rightContentBounds,r.left>f.left?r.width=0:t<s&&r.right>=e.rightContentBounds.left&&(r.right=Math.min(r.right,e.rightContentBounds.x),n._righted=!0)),!0},O.prototype.$_getSelectionRangeRect=function(e,t,n,r,i){var s=this._rangeRect;return!!this.$_getSelectionRowsRect(e,t,n,s)&&(r.y=s.y,r.bottom=s.bottom,this.$_getSelectionColumnsRect(e,t,n,s,i),r.x=s.x,r.right=s.right,i&&(i.y=r.y,i.height=r.height),!0)},O);t.SelectionLayer=i});t(Zt),Zt.SelectionMode,Zt.SelectionStyle,Zt.SelectionDisplay,Zt.isSingleSelectionStyle,Zt.isRowSelection,Zt.isColumnSelection,Zt.SelectionItem,Zt.SelectionManager,Zt.BlockSelection,Zt.RowSelection,Zt.ColumnSelection,Zt.SelectionView,Zt.SelectionMask,Zt.SelectionLayer;var en=n(function(e,t){function i(e){var t=n.call(this,e)||this;return t._refreshMode=c.RefreshMode.ALL,t._columnResizable=!0,t._columnMovable=!0,t._minCellWidth=8,t._defaultColumnWidth=100,t._fitStyle=c.GridFitStyle.NONE,t._rowResizable=!1,t._eachRowResizable=!1,t._autoClearHeights=!0,t._rowHeight=0,t._dataHeights=null,t._minTableRowHeight=23,t._minRowHeight=23,t._maxRowHeight=0,t._hscrollBar=!0,t._vscrollBar=!0,t._liveScroll=!0,t._scrollDuration=0,t._hscrollDuration=0,t._hintDelay=0,t._rowChangeDelay=0,t._horzPageScroll=!1,t._emptyMessage="\uc774 \uacf3\uc5d0 \ud45c\uc2dc\ud560 \uba54\uc2dc\uc9c0\ub97c DisplayOptions.emptyMessage \uc18d\uc131\uc73c\ub85c \uc124\uc815\ud569\ub2c8\ub2e4.",t._showEmptyMessage=!1,t._focusVisible=!0,t._focusType="layer",t._rowFocusType=c.RowMaskType.NONE,t._wheelEnabled=!0,t._wheelScrollLines=3,t._wheelScrollHorz=16,t._wheelAccelDelay=0,t._wheelAccelScroll=null,t._wheelEventPropagate=!0,t._rightClickable=!0,t._remergeWhenColumnMoved=!0,t._editItemMerging=!1,t._showInnerFocus=!0,t._toastZIndex=3e3,t._popupDropdownCount=0,t._selectionMode=Zt.SelectionMode.SINGLE,t._selectionStyle=Zt.SelectionStyle.BLOCK,t._selectionDisplay=Zt.SelectionDisplay.CELL,t._spanSelecting=!0,t._rowHoverType=c.RowMaskType.NONE,t._rowBlockType=c.RowMaskType.NONE,t._showEmptyTooltip=!1,t._showChangeMarker=!0,t._showNativeEditButton=!0,t._baseZindex=2e3,t._useAlternateRowStyle=!0,t._useFocusClass=!1,t._watchDisplayChange=!0,p.Utils.isMobile()&&(t._selectionStyle=Zt.SelectionStyle.NONE),(p.Utils.ieNine||p.Utils.ieTen)&&(t._focusType="line"),e.setWatchTimer(t._watchDisplayChange),t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Kt.GridBaseOptions,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(i,"refreshMode",{get:function(){return this._refreshMode},set:function(e){e!=this._refreshMode&&(this._refreshMode=e,this._changed())}}),_dp(i,"columnResizable",{get:function(){return this._columnResizable},set:function(e){e!=this._columnResizable&&(this._columnResizable=e,this._changed())}}),_dp(i,"columnMovable",{get:function(){return this._columnMovable},set:function(e){e!=this._columnMovable&&(this._columnMovable=e,this._changed())}}),_dp(i,"defaultColumnWidth",{get:function(){return this._defaultColumnWidth},set:function(e){e!=this._defaultColumnWidth&&(this._defaultColumnWidth=e,this._changed())}}),_dp(i,"fitStyle",{get:function(){return this._fitStyle},set:function(e){e!=this._fitStyle&&(this._fitStyle=e,this._changed())}}),_dp(i,"rowResizable",{get:function(){return this._rowResizable},set:function(e){e!=this._rowResizable&&(this._rowResizable=e,this._changed())}}),_dp(i,"eachRowResizable",{get:function(){return this._eachRowResizable},set:function(e){e!=this._eachRowResizable&&(this._eachRowResizable=e,this._changed())}}),_dp(i,"autoClearHeights",{get:function(){return this._autoClearHeights},set:function(e){e!=this._autoClearHeights&&(this._autoClearHeights=e,this._changed())}}),_dp(i,"rowHeight",{get:function(){return this._rowHeight},set:function(e){e!=this._rowHeight&&(this._rowHeight=e,this._autoClearHeights&&this.grid&&this.grid.clearRowHeights(!1),this._changed())}}),_dp(i,"dataHeights",{get:function(){return this._dataHeights},set:function(e){e&&0<e.length?this._dataHeights=e.slice():this._dataHeights=null,this._changed()}}),_dp(i,"minTableRowHeight",{get:function(){return this._minTableRowHeight},set:function(e){(e=Math.max(i.MIN_TABLE_ROW_HEIGHT,e))!=this._minTableRowHeight&&(this._minTableRowHeight=e,this._changed())}}),_dp(i,"minRowHeight",{get:function(){return this._minRowHeight},set:function(e){(e=Math.max(i.MIN_TABLE_ROW_HEIGHT,e))!=this._minRowHeight&&(this._minRowHeight=e,this._changed())}}),_dp(i,"maxRowHeight",{get:function(){return this._maxRowHeight},set:function(e){(e=Math.max(0,e))!=this._maxRowHeight&&(this._maxRowHeight=e,this._autoClearHeights&&this.grid&&this.grid.clearRowHeights(!1),this._changed())}}),_dp(i,"minCellWidth",{get:function(){return this._minCellWidth},set:function(e){(e=Math.max(0,e))!=this._minCellWidth&&(this._minCellWidth=e,this._changed())}}),_dp(i,"hscrollBar",{get:function(){return this._hscrollBar},set:function(e){e!=this._hscrollBar&&(this._hscrollBar=e,this._changed())}}),_dp(i,"vscrollBar",{get:function(){return this._vscrollBar},set:function(e){e!=this._vscrollBar&&(this._vscrollBar=e,this._changed())}}),_dp(i,"liveScroll",{get:function(){return this._liveScroll},set:function(e){e!=this._liveScroll&&(this._liveScroll=e,this._changed())}}),_dp(i,"scrollDuration",{get:function(){return this._scrollDuration},set:function(e){e!=this._scrollDuration&&(this._scrollDuration=e,this._changed())}}),_dp(i,"hscrollDuration",{get:function(){return this._hscrollDuration},set:function(e){e!=this._hscrollDuration&&(this._hscrollDuration=e,this._changed())}}),_dp(i,"hintDelay",{get:function(){return this._hintDelay},set:function(e){(e=Math.max(e,0))!=this._hintDelay&&(this._hintDelay=e,this._changed())}}),_dp(i,"rowChangeDelay",{get:function(){return this._rowChangeDelay},set:function(e){e!=this._rowChangeDelay&&(this._rowChangeDelay=e,this._changed())}}),_dp(i,"horzPageScroll",{get:function(){return this._horzPageScroll},set:function(e){e!=this._horzPageScroll&&(this._horzPageScroll=e)}}),_dp(i,"emptyMessage",{get:function(){return this._emptyMessage},set:function(e){e!=this._emptyMessage&&(this._emptyMessage=e,this.grid.setEmptyMessage(e))}}),_dp(i,"showEmptyMessage",{get:function(){return this._showEmptyMessage},set:function(e){e!=this._showEmptyMessage&&(this._showEmptyMessage=e,this._changed())}}),_dp(i,"focusVisible",{get:function(){return this._focusVisible},set:function(e){e!=this._focusVisible&&(this._focusVisible=e,this._changed())}}),_dp(i,"focusType",{get:function(){return this._focusType},set:function(e){e!==this.focusType&&(this._focusType=e,this._changed())}}),_dp(i,"rowFocusType",{get:function(){return this._rowFocusType},set:function(e){e!=this._rowFocusType&&(this._rowFocusType=e,this._changed())}}),_dp(i,"wheelEnabled",{get:function(){return this._wheelEnabled},set:function(e){e!=this._wheelEnabled&&(this._wheelEnabled=e,this._changed())}}),_dp(i,"wheelScrollLines",{get:function(){return this._wheelScrollLines},set:function(e){e!=this._wheelScrollLines&&(this._wheelScrollLines=e)}}),_dp(i,"wheelScrollHorz",{get:function(){return this._wheelScrollHorz},set:function(e){e!=this._wheelScrollHorz&&(this._wheelScrollHorz=e)}}),_dp(i,"wheelAccelDelay",{get:function(){return this._wheelAccelDelay},set:function(e){e!=this._wheelAccelDelay&&(this._wheelAccelDelay=e)}}),_dp(i,"wheelAccelScroll",{get:function(){return this._wheelAccelScroll},set:function(e){e!=this._wheelAccelScroll&&(this._wheelAccelScroll=e)}}),_dp(i,"wheelEventPropagate",{get:function(){return this._wheelEventPropagate},set:function(e){e!=this._wheelEventPropagate&&(this._wheelEventPropagate=e)}}),_dp(i,"rightClickable",{get:function(){return this._rightClickable},set:function(e){e!=this._rightClickable&&(this._rightClickable=e)}}),_dp(i,"remergeWhenColumnMoved",{get:function(){return this._remergeWhenColumnMoved},set:function(e){this._remergeWhenColumnMoved=e}}),_dp(i,"editItemMerging",{get:function(){return this._editItemMerging},set:function(e){e!=this._editItemMerging&&(this._editItemMerging=e,this._changed())}}),_dp(i,"showInnerFocus",{get:function(){return this._showInnerFocus},set:function(e){e!=this._showInnerFocus&&(this._showInnerFocus=e,this._changed())}}),_dp(i,"toastZIndex",{get:function(){return this._toastZIndex},set:function(e){e!=this._toastZIndex&&(this._toastZIndex=e)}}),_dp(i,"popupDropdownCount",{get:function(){return this._popupDropdownCount},set:function(e){e!=this._popupDropdownCount&&(this._popupDropdownCount=e,this._changed())}}),_dp(i,"selectionMode",{get:function(){return this._selectionMode},set:function(e){e!=this._selectionMode&&(this._selectionMode=e,this.grid.clearSelection())}}),_dp(i,"selectionStyle",{get:function(){return this._selectionStyle},set:function(e){var t;e!=this._selectionStyle&&(0<(t=this.grid.selections).count&&(t.getItem(0).getBounds(),t.clear()),this._selectionStyle=e,this._refreshOwner())}}),_dp(i,"selectionDisplay",{get:function(){return this._selectionDisplay},set:function(e){e!=this._selectionDisplay&&(this._selectionDisplay=e,this._refreshOwner())}}),_dp(i,"spanSelecting",{get:function(){return this._spanSelecting},set:function(e){e!=this._spanSelecting&&(this._spanSelecting=e,this._refreshOwner())}}),_dp(i,"rowHoverType",{get:function(){return this._rowHoverType},set:function(e){e!=this._rowHoverType&&(this._rowHoverType=e,this._refreshOwner())}}),_dp(i,"rowBlockType",{get:function(){return this._rowBlockType},set:function(e){e!=this._rowBlockType&&(this._rowBlockType=e,this._refreshOwner())}}),_dp(i,"rowBlockCallback",{get:function(){return this._rowBlockCallback},set:function(e){e!==this._rowBlockCallback&&(this._rowBlockCallback=e,this._rowBlockType!=c.RowMaskType.NONE&&this._refreshOwner())}}),_dp(i,"showEmptyTooltip",{get:function(){return this._showEmptyTooltip},set:function(e){this._showEmptyTooltip=e}}),_dp(i,"showChangeMarker",{get:function(){return this._showChangeMarker},set:function(e){e!=this._showChangeMarker&&(this._showChangeMarker=e,this._refreshOwner())}}),_dp(i,"scrollMessageCallback",{get:function(){return this._scrollMessageCallback},set:function(e){this._scrollMessageCallback=e}}),_dp(i,"showNativeEditButton",{get:function(){return this._showNativeEditButton},set:function(e){e!=this._showNativeEditButton&&(this._showNativeEditButton=e,this._changed())}}),_dp(i,"baseZindex",{get:function(){return this._baseZindex},set:function(e){this._baseZindex=Math.max(e,0)}}),_dp(i,"useAlternateRowStyle",{get:function(){return this._useAlternateRowStyle},set:function(e){e!=this._useAlternateRowStyle&&(this._useAlternateRowStyle=e,this._changed())}}),_dp(i,"useFocusClass",{get:function(){return this._useFocusClass},set:function(e){e!=this._useFocusClass&&(e||(this.grid.setFocusedClass(this.grid.focusedIndex,!1),this.grid.setFocusedRowClass(this.grid.focusedIndex,!1)),this._useFocusClass=e,this._changed())}}),_dp(i,"editButtonHeight",{get:function(){return this.grid.body.editButtonHeight},set:function(e){this.grid.body.editButtonHeight=e}}),_dp(i,"watchDisplayChange",{get:function(){return this._watchDisplayChange},set:function(e){e!=this._watchDisplayChange&&(this._watchDisplayChange=e,this.grid.setWatchTimer(e))}}),i.MIN_TABLE_ROW_HEIGHT=20,i);t.DisplayOptions=r});t(en),en.DisplayOptions;var tn=n(function(e,t){function r(e,t){void 0===t&&(t=0),this.width=e=void 0===e?0:e,this.height=t}Object.defineProperty(t,"__esModule",{value:!0});var n=(r.empty=function(){return new r},r.create=function(e,t){return new r(e=void 0===e?0:e,t=void 0===t?0:t)},_dp(r,"isEmpty",{get:function(){return 0===this.width||0===this.height}}),r.prototype.clone=function(){return new r(this.width,this.height)},r.prototype.equals=function(e){return e===this||e&&this.width===e.width&&this.height===e.height},r.prototype.setEmpty=function(){return this.width=this.height=0,this},r.prototype.set=function(e,t){return this.width=e,this.height=t,this},r.prototype.round=function(){var e=this.clone();return e.width>>>=0,e.height>>>=0,e},r.prototype.toString=function(){return"{width: "+this.width+", height: "+this.height+"}"},r.EMPTY=new r,r);t.Size=n});t(tn),tn.Size;var nn=n(function(e,t){function i(e,t){return n.call(this,e,t=void 0===t?null:t)||this}function u(e,t,n){return n=s.call(this,e,n=void 0===n?null:n)||this,n._ff=p.Utils.isFirefox,n._chromium=p.Utils.isChromium,n._textProp=p.Utils.TextProp,n._cursor="default",n._model=t,n}function f(e){return a.call(this,e,"emptyGridView")||this}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Yt.VisualElement,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(i,"grid",{get:function(){for(var e=this.parent;e;){if(e instanceof ir.GridBase)return e;e=e.parent}return null}}),i.prototype.measure=function(e,t,n){return this._setClassName(this._dom),this._doMeasure(e,t,n)},i.prototype.layoutContent=function(e){this._doPrepareContent(e),this._doLayoutContent(e)},i.prototype._getCssSelector=function(){return""},i.prototype._getCssDisplay=function(){return"table"},i.prototype._doDraw=function(e){this._doRender(e)},i.prototype._doMeasure=function(e,t,n){return new tn.Size(t,n)},i.prototype._doPrepareContent=function(e){},i.prototype._doLayoutContent=function(e){},i.prototype._doRender=function(e){},i);t.GridElement=r,t.isItemElement=function(e){return e&&"itemIndex"in e};var s,o=(s=r,l.__extends(u,s),u.prototype._doDispose=function(){this._model=null,s.prototype._doDispose.call(this)},_dp(u,"model",{get:function(){return this._model}}),u.prototype.setCursor=function(e){e!==this._cursor&&(this._cursor=e,this._dom.style.cursor=e)},u);t.VisualObjectElement=o;var a,r=(a=r,l.__extends(f,a),f.prototype._doDispose=function(){a.prototype._doDispose.call(this)},f.prototype.setMessage=function(e){this._span[p.Utils.TextProp]=e},f.prototype._createDom=function(e){var t=a.prototype._createDom.call(this,e),e=this._span=e.createElement("span");return t.appendChild(e),t},f.prototype._getCssSelector=function(){return"rg-empty-grid"},f.prototype._doDraw=function(e){this.setMessage(this.grid.displayOptions.emptyMessage)},f);t.EmptyGridElement=r});t(nn),nn.GridElement,nn.isItemElement,nn.VisualObjectElement,nn.EmptyGridElement;var rn=n(function(e,t){function i(e,t,r){return r=n.call(this,e,t,r=void 0===r?null:r)||this,r._explicitWidth=NaN,r}function u(){return null!==s&&s.apply(this,arguments)||this}function f(){var e=null!==a&&a.apply(this,arguments)||this;return e._trCount=0,e._trs=1,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=nn.VisualObjectElement,l.__extends(i,n),i.prototype._doDispose=function(){this._tbody=this._thead=this._table=null,n.prototype._doDispose.call(this)},_dp(i,"tableRowCount",{get:function(){return this._tbody.childElementCount}}),i.prototype.getCellPoint=function(e,t){return(t=t||new Gt.Point).x+=e.offsetLeft,t.y+=e.offsetTop,t},i.prototype._createDom=function(e){var t=e.createElement("div"),n=this._table=e.createElement("table"),r=n.style;return r.setProperty("table-layout","fixed","important"),r.setProperty("width","100%","important"),n.className="rg-table",t.appendChild(n),this._thead=e.createElement("thead"),n.appendChild(this._thead),this._tbody=e.createElement("tbody"),n.appendChild(this._tbody),t},i.prototype._clearSpans=function(){},i.prototype._addSpan=function(e,t,n,r){},i.prototype._addColSpan=function(e,t,n){},i.prototype._addRowSpan=function(e,t,n){},i.prototype._initDom=function(e){n.prototype._initDom.call(this,e),e.style.overflow="hidden"},i.prototype._doPrepareContent=function(e){var t=this._getExplicitWidth(e);p.Utils.equalNumbers(t,this._explicitWidth)||(this._table.style.width=0<t?t+"px":"100%",this._explicitWidth=t),this._doPrepareTableExtents(e),this._doPrepareTable(e)},i.prototype._doDraw=function(e){this._doRender(e),this._doRenderTable(this._tbody)},i.prototype._getExplicitWidth=function(e){return NaN},i.prototype._doPrepareTableExtents=function(e){},i.prototype._doPrepareTable=function(e){this._doPrepareTableHead(e,this._thead),this._doPrepareTableRows(e,this._tbody)},i.prototype._doPrepareTableHead=function(e,t){var n,r=p.getDoc(t);0==t.childElementCount?(n=r.createElement("tr"),t.appendChild(n),n.setAttribute("aria-hidden","true"),(o=n.style).setProperty("border","0px none","important")):n=t.lastElementChild;for(var i=this._getCellCount(e);n.childElementCount<i;)(s=r.createElement("th")).scope="col",(o=s.style).setProperty("visibility","hidden","important"),o.setProperty("margin","0px","important"),o.setProperty("padding","0px","important"),o.setProperty("font-size","0px","important"),o.setProperty("line-height","0px","important"),o.height="0px",n.appendChild(s);for(;n.childElementCount>i;)n.removeChild(n.lastChild);for(var s,o,u=n.children,a=0;a<u.length;a++)(o=(s=u[a]).style).width=this._getCellWidth(e,a)+"px"},i.prototype._prepareTableRowCells=function(e,t){for(var n=this._getCellCount(e),r=p.getDoc(t),i=t.childElementCount;i<n;){var s=r.createElement("td");t.appendChild(s);var o=this._prepareCellContent(s,i++);s.appendChild(o)}for(;t.childElementCount>n;)t.removeChild(t.lastChild);return t.childElementCount},i.prototype._isFixedHeight=function(e){return!0},i.prototype._getMinRowHeight=function(e){return e.minRowHeight},i.prototype._doPrepareTableRow=function(e,t,n,r){this._prepareTableRowCells(e,r);var i=this._isFixedHeight(e),s=r.children,n=i?this._getTableRowHeight(e,n):this._getMinRowHeight(e),o=n-1+"px",e=r.style;r[c.T_VIEW]=this[c.T_HASH],r[c.T_FIX]=i,r[c.T_HEI]=i?n:0,e.height=n+"px",e.display="";for(var u=0,a=s.length;u<a;u++){var f=s[u];this._ff&&(f.style.height="100%");var l=f.firstElementChild;l||(l=this._prepareCellContent(f,u),f.appendChild(l)),f=l.style,l=i?o:"",l!=f.maxHeight&&(f.maxHeight=l),"hidden"!==f.overflow&&(f.overflow="hidden")}},i.prototype._doRenderTable=function(e){for(var t=e.children,n=0;n<t.length;n++){var r=t[n];this._renderRow(r,n)}},i.prototype._renderRow=function(e,t){this._doDrawRow(t,e);for(var n=e.children,r=0;r<n.length;r++){var i=n[r];this._renderCell(i.lastElementChild,t,r)}},i.prototype._renderCell=function(e,t,n){this._doDrawCell(t,n,e)},i.prototype._prepareCellContent=function(e,t){return p.getDoc(e).createElement("div")},i.prototype._doDrawRow=function(e,t){},i.prototype._doDrawCell=function(e,t,n){},i.prototype._getTableRow=function(e,t){return this._tbody.children[t]},i.prototype._getTableRows=function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(this._tbody.children[t+i]);return r},i.prototype._getTableCell=function(e,t){return this._tbody.children[e].children[t]},i.prototype.getCellContent=function(e,t){return this._tbody.children[e].children[t].firstElementChild},i.prototype.getContentAt=function(e){var t=e.grid.layoutManager,n=t.fixedItemCount,r=e.column?e.column.index:0,t=0<n?e.itemIndex<n?e.itemIndex:e.itemIndex-t.topIndex+1:e.itemIndex-t.topIndex;return this.getCellContent(t,r)},i);t.TableBaseElement=r;var s,o=(s=r,l.__extends(u,s),u.prototype._doPrepareTableRows=function(e,t){for(var n=this._getTableRowCount(e),r=p.getDoc(t);t.childElementCount<n;){var i=r.createElement("tr");t.appendChild(i)}for(;t.childElementCount>n;)t.removeChild(t.lastChild);for(var s=t.children,o=0;o<n;o++)(i=s[o]).style.height=this._getTableRowHeight(e,o)+"px",this._doPrepareTableRow(e,o,o,i)},u.prototype._getTableRowCount=function(e){return 1},u);t.SimpleTableElement=o;var a,r=(a=r,l.__extends(f,a),f.prototype._getTrs=function(e){return 1},f.prototype._getTableRowCount=function(e){var t=e.fixedItemCount,e=t+e.itemCount;return e*=this._trs,e+=0<t?1:0},f.prototype.$_getTableIndex=function(e,t){var n=e.fixedItemCount,e=t*this._trs;return 0<n&&n<=t?1+e:e},f.prototype._getTableRow=function(e,t){return t=this.$_getTableIndex(e,t),this._tbody.children[t]},f.prototype.$_getTableRowAt=function(e,t){return t=this.$_getTableIndex(e,t),this._tbody.children[t]},f.prototype._getTableRowInternal=function(e,t,n){return t=this.$_getTableIndex(e,t),this._tbody.children[t+n]},f.prototype._doPrepareTableRows=function(e,t){for(var n=e.$_getItems(),r=this._trs=this._getTrs(e),i=e.fixedItemCount,s=e.itemCount+i,o=this._trCount=this._getTableRowCount(e),u=p.getDoc(t);t.childElementCount<o;){var a=u.createElement("tr");t.appendChild(a)}for(;t.childElementCount>o;)t.removeChild(t.lastChild);var f=t.children,l=0,c=0;if(0<i){for(l=0;l<i;l++)for(var h=0;h<r;h++,c++)this._doPrepareTableRow(e,l,c,f[c]);this.$_prepareFixedBar(e,f[c++])}for(;l<s&&c<o;l++)for(var d=n[l].isData?r:1,h=0;h<d&&c<o;h++,c++)this._doPrepareTableRow(e,l,c,f[c])},f.prototype.$_prepareFixedBar=function(e,t){var n=p.getWin(t),r=this._prepareTableRowCells(e,t),i=e.fixedBarHeight,s=t.style;0<i?s.height=e.fixedBarHeight+"px":s.display="none";for(var o=t.children,u=0;u<r;u++){var a=o[u];a instanceof n.HTMLTableCellElement&&(a.rowSpan=1,a.style.display=""),(a=o[u].firstElementChild)&&(a.style.maxHeight="0px",a.style.overflow="hidden")}return i},f.prototype._getTableRowHeight=function(e,t){return e.getTableRowHeight(t,1)},f.prototype._getCellContent=function(e){return e.firstElementChild},f.prototype._updateCellContent=function(e,t,n){this._doUpdateCellContent(e,t,this._getCellContent(n))},f.prototype._doUpdateCellContent=function(e,t,n){},f);t.DataTableElement=r});t(rn),rn.TableBaseElement,rn.SimpleTableElement,rn.DataTableElement;var sn=n(function(e,t){function i(e,t){return t=n.call(this,e,t=void 0===t?null:t)||this,t._fixed=!1,t._index=new It.CellIndex,t}function o(e,t){return s.call(this,e,t=void 0===t?null:t)||this}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=nn.GridElement,l.__extends(i,n),i.prototype._doDispose=function(){this._index&&this._index.dispose(),this._index=null,this._cellDom&&this._cellDom.parentElement.removeChild(this._cellDom),this._cellDom=null,n.prototype._doDispose.call(this)},_dp(i,"fixed",{get:function(){return this._fixed}}),_dp(i,"index",{get:function(){return this._index},set:function(e){It.CellIndex.areEquals(this._index,e)||(this._index.assignFrom(e),this._changed())}}),_dp(i,"item",{get:function(){return this._index.item}}),i.prototype.updateCell=function(e,t,n){n!=this._cellDom&&(n&&this._clearCellDom(n),this._clearCellCache(),this._cellDom=n),this.index=t.index,this._doPrepareValue(e,t),this._doUpdateContent(e,t,this._cellDom)},i.prototype.removeCellDom=function(e){(e=void 0===e?!1:e)&&this._cellDom&&this._clearCellDom(this._cellDom),this._cellDom=null,this._clearCellCache()},i.prototype._createDom=function(e){return null},i.prototype._clearCellDom=function(e){e.innerHTML=""},i.prototype._clearCellCache=function(){},_dp(i,"valueColumn",{get:function(){return this._index.valueColumn}}),_dp(i,"dataColumn",{get:function(){return this._index.dataColumn}}),i.prototype._changed=function(){this.invalidate()},i.prototype._doPrepareValue=function(e,t){},i.prototype._doUpdateContent=function(e,t,n){},i.prototype._doLayoutContent=function(e){},i);t.CellElement=r;var s,r=(s=r,l.__extends(o,s),o.prototype._doPrepareValue=function(e,t){},o);t.ValueCellElement=r});t(sn),sn.CellElement,sn.ValueCellElement;var on=n(function(e,t){function i(){var e=n.call(this)||this;return e._valueSeparator=",",e}function o(){return s.call(this)||this}function a(){var e=u.call(this)||this;return e._baseValue=NaN,e.$_render=function(e,t,n,r){var i=this._values;if(i&&i.length){for(var s=i.length,o=i[0],u=i[0],a=1;isNaN(o)&&a<s;)u=o=i[a++];for(;a<s;a++){var f=i[a];isNaN(f)||(f<o&&(o=f),u<f&&(u=f))}var l=isNaN(this._baseValue)?o:this._baseValue;isNaN(o)||this._renderChart(t,i,o,u,l)}}.bind(e),e}function h(){var e=f.call(this)||this;return e._chartStyle=h.CHART_STYLE,e._curved=!1,e.lastStyle=h.LAST_STYLE,e.highStyle=h.HIGH_STYLE,e.lowStyle=h.LOW_STYLE,e}function m(){var e=d.call(this)||this;return e._chartStyle=m.CHART_STYLE,e._barWidth=.8,e.lastStyle=m.LAST_STYLE,e.highStyle=m.HIGH_STYLE,e.lowStyle=m.LOW_STYLE,e}function b(){var e=g.call(this)||this;return e._chartStyle=b.CHART_STYLE,e._barWidth=.8,e._belowHeight=.4,e.belowStyle=b.BELOW_STYLE,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Ct.TextCellRenderer,l.__extends(i,n),_dp(i,"valueSeparator",{get:function(){return this._valueSeparator},set:function(e){e!=this._valueSeparator&&(this._valueSeparator=e,this._changed())}}),_dp(i,"type",{get:function(){return i.SERIES_TYPE}}),i.prototype._makeText=function(e,t){return t.getDisplayText(e,this._valueSeparator)||""},i.SERIES_TYPE="series",i);t.SeriesTextCellRenderer=r;var s,r=(s=Ct.DataCellRenderer,l.__extends(o,s),o.prototype._getValues=function(e){return e.value||[]},o),u,r=(u=r,l.__extends(a,u),a.interfaced=function(e){return e=e.type,!!e&&(e==c.TYPE||e==v.TYPE||e==y.TYPE)},_dp(a,"baseValue",{get:function(){return this._baseValue},set:function(e){e!=this._baseValue&&(this._baseValue=e,this._changed())}}),_dp(a,"firstStyle",{get:function(){return this._firstStyle},set:function(e){e!=this._firstStyle&&(this._firstStyle=e,this._changed())}}),_dp(a,"lastStyle",{get:function(){return this._lastStyle},set:function(e){e!=this._lastStyle&&(this._lastStyle=e,this._changed())}}),_dp(a,"highStyle",{get:function(){return this._highStyle},set:function(e){e!=this._highStyle&&(this._highStyle=e,this._changed())}}),_dp(a,"lowStyle",{get:function(){return this._lowStyle},set:function(e){e!=this._lowStyle&&(this._lowStyle=e,this._changed())}}),_dp(a,"belowStyle",{get:function(){return this._belowStyle},set:function(e){e!=this._belowStyle&&(this._belowStyle=e,this._changed())}}),_dp(a,"pointStyle",{get:function(){return this._pointStyle},set:function(e){e!=this._pointStyle&&(this._pointStyle=e,this._changed())}}),a.prototype._doInitContent=function(e){var t=p.getDoc(e),t=this._div=t.createElement("div");t.style.position="relative",t.style.height="100%",e.appendChild(t),t=(this._svg=xt.SvgElement.createSVG(t)).style,t.position="absolute",t.left="0px",t.top="0px",t.width="100%",t.height="100%"},a.prototype._doRenderCell=function(e,t,n,r,i){this._div;var s=this._svg;s.setAttribute("class",this._getChartStyle()),this._values=this._getValues(t),xt.SvgElement.renderSVG2(e,s,this.$_render)},a.prototype._getPoints=function(e,t,n){for(var r=e.length,i=[],s=n-t,o=0;o<r;o++){var u=e[o],a=5+o/(r-1)*90,u=10+(isNaN(u)||0==s?80:80*(1-(u-t)/s));i.push(a,u)}return i},a.prototype._getBasePoint=function(e,t,n){return t-=e,0+(isNaN(n)||0==t?100:100*(1-(n-e)/t))},a);t.SparkChartRenderer=r;var f,c=(f=r,l.__extends(h,f),h.interfaced=function(e){return e=e.type,!!e&&e==h.TYPE},_dp(h,"chartStyle",{get:function(){return this._chartStyle},set:function(e){e!=this._chartStyle&&(this._chartStyle=e,this._changed())}}),_dp(h,"curved",{get:function(){return this._curved},set:function(e){e!=this._curved&&(this._curved=e,this._changed())}}),_dp(h,"type",{get:function(){return h.TYPE}}),_dp(h,"styleName",{get:function(){return h.STYLE_NAME}}),h.prototype._getChartStyle=function(){return this._chartStyle},h.prototype._renderChart=function(e,t,n,r,i){for(var s,o=isNaN(i)?r:Math.max(r,i),i=isNaN(i)?n:Math.min(n,i),u=this._getPoints(t,i,o),a=t.length,f=0;f<a-1;f++)e.sline(null,u[2*f]+"%",u[2*f+1]+"%",u[2*(f+1)]+"%",u[2*(f+1)+1]+"%"),(s=this.pointStyle)&&(l=u[2*f],c=u[2*f+1],e.scircle(s,l+"%",c+"%","2"));if((s=this.firstStyle)&&(l=u[0],c=u[1],e.scircle(s,l+"%",c+"%","2")),(s=this.lastStyle)&&(l=u[2*(a-1)],c=u[2*(a-1)+1],e.scircle(s,l+"%",c+"%","2")),s=this.highStyle)for(f=0;f<a;f++)t[f]>=r&&(l=u[2*f],c=u[2*f+1],e.scircle(s,l+"%",c+"%","2"));if(s=this.lowStyle)for(var l,c,f=0;f<a;f++)t[f]<=n&&(l=u[2*f],c=u[2*f+1],e.scircle(s,l+"%",c+"%","2"))},h.TYPE="sparkline",h.STYLE="rg-sparkline-renderer",h.CHART_STYLE="rg-sparkline-renderer-chart",h.LAST_STYLE="rg-sparkline-renderer-last",h.HIGH_STYLE="rg-sparkline-renderer-high",h.LOW_STYLE="rg-sparkline-renderer-low",h.STYLE_NAME="rg-renderer "+h.STYLE,h);t.SparkLineRenderer=c;var d,v=(d=r,l.__extends(m,d),m.interfaced=function(e){return e=e.type,!!e&&e==m.TYPE},_dp(m,"chartStyle",{get:function(){return this._chartStyle},set:function(e){e!=this._chartStyle&&(this._chartStyle=e,this._changed())}}),_dp(m,"barWidth",{get:function(){return this._barWidth},set:function(e){(e=Math.max(0,e))!=this._barWidth&&(this._barWidth=e,this._changed())}}),_dp(m,"type",{get:function(){return m.TYPE}}),_dp(m,"styleName",{get:function(){return m.STYLE_NAME}}),m.prototype._getChartStyle=function(){return this._chartStyle},m.prototype._renderChart=function(e,t,n,r,i){for(var s=isNaN(i)?r:Math.max(r,i),o=isNaN(i)?n:i,u=t.length,a=this._getBasePoint(o,s,i),f=100/u,l=0+f/2,c=s-o,h=f*this._barWidth,p=0;p<u;p++){var d,v=t[p];isNaN(v)||(d=v<=n&&this.lowStyle?this.lowStyle:r<=v&&this.highStyle?this.highStyle:v<i&&this.belowStyle?this.belowStyle:0==p&&this.firstStyle?this.firstStyle:p==u-1&&this.lastStyle?this.lastStyle:null,v=0==c?1:Math.max(1,Math.floor(100*(v-o)/c)),e.pbounds(d,l-h/2,a,h,-v)),l+=f}},m.TYPE="sparkcolumn",m.STYLE="rg-sparkcolumn-renderer",m.CHART_STYLE="rg-sparkcolumn-renderer-chart",m.LAST_STYLE="rg-sparkcolumn-renderer-last",m.HIGH_STYLE="rg-sparkcolumn-renderer-high",m.LOW_STYLE="rg-sparkcolumn-renderer-low",m.STYLE_NAME="rg-renderer "+m.STYLE,m);t.SparkColumnRenderer=v;var g,y=(g=r,l.__extends(b,g),b.interfaced=function(e){return e=e.type,!!e&&e==b.TYPE},_dp(b,"chartStyle",{get:function(){return this._chartStyle},set:function(e){e!=this._chartStyle&&(this._chartStyle=e,this._changed())}}),_dp(b,"barWidth",{get:function(){return this._barWidth},set:function(e){(e=Math.max(0,e))!=this._barWidth&&(this._barWidth=e,this._changed())}}),_dp(b,"belowHeight",{get:function(){return this._belowHeight},set:function(e){(e=Math.max(0,e))!=this._belowHeight&&(this._belowHeight=e,this._changed())}}),_dp(b,"type",{get:function(){return b.TYPE}}),_dp(b,"styleName",{get:function(){return b.STYLE_NAME}}),b.prototype._getChartStyle=function(){return this._chartStyle},b.prototype._renderChart=function(e,t,n,r,i){for(var s=t.length,o=100/s,u=0+o/2,a=o*this._barWidth,f=0+100*(1-this._belowHeight),l=0;l<s;l++){var c,h=t[l];isNaN(h)||h==i||(c=null,h<i&&this.belowStyle&&(c=this.belowStyle),h=h<i?100:0,e.pbounds(c,Math.floor(u-a/2),Math.floor(h),Math.floor(a),Math.floor(f-h))),u+=o}},b.TYPE="sparkwinloss",b.STYLE="rg-sparkwinloss-renderer",b.CHART_STYLE="rg-sparkwinloss-renderer-chart",b.BELOW_STYLE="rg-sparkwinloss-renderer-below",b.STYLE_NAME="rg-renderer "+b.STYLE,b);t.SparkWinLossRenderer=y});t(on),on.SeriesTextCellRenderer,on.SparkChartRenderer,on.SparkLineRenderer,on.SparkColumnRenderer,on.SparkWinLossRenderer;var un=n(function(e,t){function s(e,t){return n.call(this,e,t||"dataCellView")||this}function a(e,t){return t=o.call(this,e,t=void 0===t?null:t)||this,t._domIndex=-1,t._trs=1,t._fixedHeight=!1,t}function v(e,t){return f.call(this,e,t=void 0===t?null:t)||this}function g(){return null!==m&&m.apply(this,arguments)||this}function b(){return null!==y&&y.apply(this,arguments)||this}Object.defineProperty(t,"__esModule",{value:!0});var n,r=jt,i=(n=sn.ValueCellElement,l.__extends(s,n),_dp(s,"text",{get:function(){return this._text}}),s.prototype._doUpdateContent=function(e,t,n){n[p.Utils.TextProp]=this._text},s);t.DataCellElement=i;var o,u=(o=nn.GridElement,l.__extends(a,o),a.prototype._doDispose=function(){this._item=null,o.prototype._doDispose.call(this)},_dp(a,"itemIndex",{get:function(){return this._item.index}}),a.prototype.updateItem=function(e,t,n,r){this._item=e,this._domIndex=t,this._trs=n,this._fixedHeight=r},a.prototype.clearContent=function(e,t){},a.prototype._createDom=function(){return null},a.prototype.$_getDefaultRenderer=function(e,t){return Ct.TextCellRenderer.TYPE},a.prototype._changed=function(){this.invalidate()},a.prototype._getTableRow=function(e,t){return this.parent._getTableRow(e,this._domIndex)},a.prototype._getTableRows=function(e){return this.parent._getTableRows(e,this._domIndex,this._trs)},a.prototype._getCellContent=function(e){return this.parent.getCellContent(this._domIndex,e)},a);t.ItemElement=u;var f,h="rg-expander-expanded",d="rg-expander-collapsed",i=(f=u,l.__extends(v,f),v.isExpander=function(e){return e=e.className,e==h||e==d},v.prototype.resetButtons=function(e){for(var t=e.layoutManager,n=this._trs,i=this.parent._cells,s=this._getFirstCell(t),o=this._getStartCell(t)-s,u=this._getEndCell(t)-s,a=0;a<n;a++)for(var f=i[this._domIndex+a],l=o;l<=u;l++){var c=f[l],h=c.layout,p=h.firstColumn;!h.isProxy&&this._item.isDataRow&&p instanceof r.ValueColumn&&this.$_setButtons(e,c,c.cell.firstElementChild)}},v.prototype.moveCellButtons=function(e,t,n){var r,i,s=Math.min(n-t.item.index,t.rowSpan-1);s!=t.buttonsOffset&&(i=(r=t.rowIndex)+s,n=e.getTableItemBounds(r),r=e.grid.body.buttonHeight,i=e.getTableItemBounds(i).y-n.y,i=Math.floor(i+(n.height-r)/2),t.buttons.style.top=i+"px",t.buttonsOffset=s)},v.prototype.cellRefresh=function(e,t,n,r,i){var s=e.layoutManager;this._updateDataCell(e,s,t,n,r,i)},v.prototype.clearContent=function(e,t){for(var n=this.parent,r=this._getFirstCell(e),i=this._getStartCell(e)-r,s=this._getEndCell(e)-r,o=0;o<t;o++)for(var u=n._cells[this._domIndex+o],a=i;a<=s;a++){var f=u[a],l=f.renderer2;l&&l.clearContent(),f.setBorderBottom(1)}},v.prototype._doLayoutContent=function(e){var t,n=e.grid,i=this._trs,s=n.body,o=this.parent._cells,u=this._getFirstCell(e),a=this._getStartCell(e)-u,f=this._getEndCell(e)-u,u=n.focusedIndex,l=u&&u.itemIndex==this._item.index,c=u.column,u=this._item.index;this._item instanceof Ht.MergedGroupFooter&&(f=Math.min(f,this._item.parent.level-1),0<=(u=(t=this._item.parent.firstDataItem).index)&&(t=null));for(var h=It.CellIndex.temp(n,u),p=0;p<i;p++)for(var d=o[this._domIndex+p],v=a;v<=f;v++){var m,g=d[v],y=g.layout;y.isProxy||(m=y.firstColumn,g.focused=l&&c===m,g.mouseEntered=!1,h.layout=y,y=t?s.getHidden(h,t):s.getCellAt(this._item,m,!1),g.visible?(g.width=e.getCellWidth(v),g.height=e.getTableRowHeightFixed(g.trow,g.rowSpan),m instanceof r.ValueColumn?this._updateDataCell(n,e,s,y,m,g):this._clearDataCell(g)):m instanceof r.ValueColumn&&this._updateDataCell(n,e,s,y,m,g,!1))}},v.prototype._getFirstCell=function(e){return e._firstCell},v.prototype._getLastCell=function(e){return e._lastCell},v.prototype._getStartCell=function(e){return e.getStartCell()},v.prototype._getEndCell=function(e){return this._item instanceof Ht.MergedGroupHeader?Math.min(e.getStartCell()+this._item.groupLevel,e.getEndCell()):e.getEndCell()},v.prototype._createRenderer=function(e,t,n,r,i){return e.delegate.createRenderer(n,r,i)},v.prototype.$_getRenderer=function(e,t,n,r,i){var s,o,u,a,f=t.valueColumn.renderer,n=n.renderer;"string"==typeof n?u=n:n&&(u=n.type,a=n),"string"==typeof f?s=f:f&&(s=f.type,o=f),r=u||s||(r instanceof jt.SeriesColumn?on.SeriesTextCellRenderer.SERIES_TYPE:this.$_getDefaultRenderer(e,t));if(!i.renderer2||i.rendererChanged||i.renderer2.type!=r)return this._createRenderer(e,t,r,o,a);i.renderer2&&n&&i.renderer2.assignFrom(n)},v.prototype.$_getCellWidth2=function(e,t,n){return e.getCellWidth2(t,n)},v.prototype._renderDataCell=function(e,t,n,r,i,s){var o=i.cell,u=e.doc,a=!1,f=this.$_getRenderer(e,n,r,s,i);f&&(i.renderer2&&i.renderer2.clearAndDispose(),i.renderer2=f,a=!(i.rendererChanged=!1));var l=o.firstElementChild,c=i.renderer2;(i.heighted=this._fixedHeight)&&(l.style.maxHeight=i.height-1+"px",p.Utils.ieTen&&(l.style.height=i.height-1+"px")),!a&&c&&c._dom!=l&&(c.clearContent(),a=!0),this.$_setButtons(e,i,l);var v=!1,f=i.merged&&e.findGroupItem(i.item,s.dataIndex);f&&e.rowGroup.$_isMergeExpanderVisible(f)&&(!s||s.mergeGrouped)?((m=i.expander)||((m=i.expander=u.createElement("span")).style.position="absolute",m.style.display="inline-block",m.style.top="2px",m.style.left="2px",o.appendChild(m)),v=f.expanded,m.className=v?h:d):i.clearExpander();var m=c.styleName;i.expander&&(m+=" "+(v?"rg-expanded-cell":"rg-collapsed-cell")),a?c.initContent(n._index,l,m):c.checkClassName(m)?(c.clearContent(),c.initContent(n._index,l,m)):c.index.assign(n._index),c.renderCell(e,n,i),t=t._showChangeMarker&&n.isValueChanged(),t!=i.valueChanged&&(t?((n=i.changedMarker)||((n=i.changedMarker=u.createElement("div")).className="rg-changed-marker",n.style.position="absolute",n.style.display="block",n.style.top="0px",i.changedMarker=n),o.appendChild(n)):i.changedMarker&&i.valueChanged&&o.removeChild(i.changedMarker),i.valueChanged=t),fn.TableCell.addEdgeMark(r.edgeMark||s.edgeMark,i,u)},v.prototype._clearDataCell=function(e){e.setClassName(""),e.setEditor(null,null),e.button=c.CellButton.NONE,e.error=void 0,e.editable=!1,e.readonly=!0,e.setBorderBottom(1);var t=e.cell.firstElementChild;this._fixedHeight&&(t.style.maxHeight=e.height-1+"px",p.Utils.ieTen&&(t.style.height=e.height-1+"px")),e.renderer2&&e.renderer2.clearContent(),e.valueChanged=!1},v.prototype._updateDataCell=function(e,t,n,r,i,s,o){void 0===o&&(o=!0);var u=n.getCellStyle(r,s.style.clear(),s.merged);(null==r.value||""==r.value)&&i instanceof jt.DataColumn&&i.placeHolder&&(u.styleName+=" "+(r.dataColumn.placeHolderStyleName||"rg-data-empty-cell")),u.style&&p.Utils.setStyle(u.style,s.cell),s.refreshFormatters(u),n.getCellFormatters(i,s),s.setEditor(u.editor,i.editor),s.button=i.button,s.error=r.error,s.errorLevel=r.errorLevel;var a=It.CellIndex.temp(e,s.item.index,s.dataColumn);if(s.editable=e.getEditableAt(a,s.style),s.readonly=e.getReadOnlyAt(a,s.style),s.editable&&!s.readonly||(u.styleName+=" rg-data-readonly-cell"),s.setClassName(u.styleName),!s.merged&&i instanceof jt.DataColumn&&i.layout.blanked)switch(r.getBlankState()){case c.BlankState.HEAD:case c.BlankState.BODY:s.setBorderBottom(0);break;case c.BlankState.TAIL:case c.BlankState.NONE:s.setBorderBottom(1)}else s.setBorderBottom(1);o?this._renderDataCell(e,n,r,u,s,i):s.renderer2&&(s.renderer2=s.renderer2&&s.renderer2.clearAndDispose())},v.prototype.$_getButtonVisible=function(e,t,n,r){if(r){var i=e.getIndex(t.item.index,t.dataColumn);return r(e.handler,i.proxy(),t.focused,t.mouseEntered)}switch(n){case c.ButtonVisibility.ALWAYS:return!0;case c.ButtonVisibility.HIDDEN:return!1;case c.ButtonVisibility.VISIBLE:return t.focused;case c.ButtonVisibility.ROWFOCUSED:return e.focusedRow==t.item.index||t.mouseEntered;case c.ButtonVisibility.DEFAULT:default:return t.focused||t.mouseEntered}},v.prototype.$_buttonWidth=function(e,t){var n,r=0;return t.button!=c.CellButton.NONE&&(n=t.layout.getDataColumn(),this.$_getButtonVisible(e,t,n.buttonVisibility,n.buttonVisibleCallback)&&(r=e.body.cellButtonWidth)),r},v.prototype.$_editButtonWidth=function(e,t){var n,r,i,s,o=0;return t.editable&&!t.readonly&&(r=(n=t.layout).getDataColumn(),s=t.editorType,i=e.delegate.getCellEditor(s),s=t.editor||r.editor,i.hasButton(e.displayOptions.showNativeEditButton,s)&&(s=!1,((s=It.CellIndex.equalsTo(e.focusedIndex,t.item.index,n)?!!i&&i.listing:s)||this.$_getButtonVisible(e,t,r.editButtonVisibility,null))&&(o=e.body.editButtonWidth))),o},v.prototype.$_editButtonCount=function(e,t){return t=t.editorType,t=e.delegate.getCellEditor(t),t?t.buttonCount:0},v.prototype.$_editButtonVerti=function(e,t){if("number"===t.editorType)return t=t.editor||t.dataColumn.editor||{},null==t.direction||"horizontal"!==t.direction},v.prototype.$_errorWidth=function(e,t){return t.error?e.body.errorIconWidth:0},v.prototype.$_setButtons=function(e,t,n){var r,i,s,o,u,a,f=t.cell,l=e.doc,c=e.layoutManager,h=this.$_buttonWidth(e,t),p=this.$_editButtonWidth(e,t),d=this.$_errorWidth(e,t),v=p&&this.$_editButtonCount(e,t),m=p&&this.$_editButtonVerti(e,t),g=0,y=0,b=void 0;0<h&&y++,0<p&&(y+=v),0<d&&y++,t.merged&&(f=(t=t.head).cell,n=t.cell.firstElementChild),0<y?((b=t.buttons)||((b=t.buttons=l.createElement("div")).className="rg-cell-buttons",b.style.position="absolute",b.style.overflow="hidden",f.appendChild(b)),r=e.body.buttonHeight,i=t.height,u=void 0,(a=b.style).height=r+"px",a.right="0px",t.merged?(s=t.rowIndex,o=c.getTableItemBounds(s),f=void 0,f=t.contains(e.focusedIndex)?s+(e.focusedRow-t.item.index):s+Math.floor((t.rows-1)/2),u=c.getTableItemBounds(f).y-o.y,u=Math.floor(u+(o.height-r)/2),t.buttonsOffset=f-s):(u=Math.floor((i-r)/2),t.buttonsOffset=0),a.top=Math.floor(u)+"px",g=b.childElementCount):t.buttons&&(t.clearButtons(),n.style.maxWidth="");for(var w=g;w<y;w++){var E=l.createElement("span"),S=E.style;S.position="absolute",S.display="inline-block",S.height="100%",S.top="0px",b.appendChild(E)}for(w=g;y<w;w--)b.removeChild(b.lastElementChild);var x,T=0<y?b.children:null,y=0;if(0<h?(t.cellButton=T[y++],(x=t.cellButton.style).right="0px",x.width=h+"px",t.resetButtonClass(),t.buttonWidth=h):(t.cellButton=null,t.buttonWidth=0),0<p){t.editButtons=[];for(var g=t.editorType,N=e.delegate.getCellEditor(g),w=0;w<v;w++){var C=T[y++];N.setButtonStyle(C,w,m,h,p)||((x=C.style).right=h+p*w+"px",x.width=p+"px",t.resetEditClass(C,w)),t.editButtons.push(C)}t.editWidth=p*(m?1:v),It.CellIndex.equalsTo(e.editController.editIndex,t.item.index,t.layout),this.$_setButtonZIndex(e,t,It.CellIndex.equalsTo(e.editController.editIndex,t.item.index,t.layout))}else t.editButtons=null,t.editWidth=0;0<d?(t.errorIcon=T[y++],(x=t.errorIcon.style).right=h+t.editWidth+"px",x.width=d+"px",t.resetErrorClass(),t.errorWidth=d):(t.errorIcon=null,t.errorWidth=0),b?(d=t.buttonWidth+t.editWidth+t.errorWidth,c=this.$_getCellWidth2(c,t.tcol,t.colSpan),a.width=d+"px",n.style.maxWidth=c-d+"px"):n.style.maxWidth=""},v.prototype.$_setButtonZIndex=function(e,t,n){function i(e){n?e.zIndex=String(r+1):e.removeProperty("z-index")}var t=t.merged?t.head:t,r=e.displayOptions.baseZindex;t.editButtons&&t.editButtons.forEach(function(e){i(e.style)}),t.cellButton&&i(t.cellButton.style),t.errorIcon&&i(t.errorIcon.style)},v);t.RowElement=i;var m,u=(m=i,l.__extends(g,m),g.prototype._getFirstCell=function(e){return this._getStartCell(e)},g.prototype._getLastCell=function(e){return this._getEndCell(e)},g.prototype._getStartCell=function(e){return 0},g.prototype._getEndCell=function(e){return e.fixedCellCount-1},g.prototype.$_getCellWidth2=function(e,t,n){return e.getFixedCellWidth2(t,n)},g);t.FixedRowElement=u;var y,i=(y=i,l.__extends(b,y),b.prototype._getFirstCell=function(e){return this._getStartCell(e)},b.prototype._getLastCell=function(e){return this._getEndCell(e)},b.prototype._getStartCell=function(e){return e.cellCount-e.rightCellCount},b.prototype._getEndCell=function(e){return e.cellCount-1},b.prototype.$_getCellWidth2=function(e,t,n){return e.getRightCellWidth2(t,n)},b);t.RightRowElement=i});t(un),un.DataCellElement,un.ItemElement,un.RowElement,un.FixedRowElement,un.RightRowElement;var an=n(function(e,t){function s(e,t){var r=n.call(this)||this;return r._textCase=c.TextInputCase.DEFAULT,r._readOnly=!1,r._textReadOnly=!1,r._allowEmpty=!1,r._keydowned=!1,r._isMobile=p.Utils.isMobile(),r._started=!1,r._dateConverter=_.DateTimeConverter.Default,r._boolConverter=v.BooleanConverter.Default,r._cellBounds=new h.Rectangle,r._checkHangeul=!1,r._composing=!1,r._grid=e,r._options=e.editorOptions,r._parentElement=t,r._editor=r._createEditor(t),r._editor.className=s.EDITOR_CSS+r._getInputSelector(),r._container&&(r._container.className=s.CONTAINER_CSS),(r._editor.$_owner=r)._editIndex=e.getIndex(),r._editor&&((e=e.container).$_addListener(r._editor,"focus",function(e){this._grid.$_setEditFocused(!0,e)}.bind(r),!1),e.$_addListener(r._editor,"focusin",function(e){this._grid.$_setEditFocused(!0,e)}.bind(r),!1),e.$_addListener(r._editor,"blur",function(e){this._grid.$_setEditFocused(!1,e)}.bind(r),!1),e.$_addListener(r._editor,"focusout",function(e){this._grid.$_setEditFocused(!1,e)}.bind(r),!1)),r.setVisible(!1,!0),r.$_setEditorId(r._editor),r}function u(e,t){this._includedFormat=!1,this._showInvalidFormatMessage=!0,this._overwrite=!1,this._allowEmpty=!1,this._restrictNull=!1,this._definitions={9:new RegExp("[0-9 ]"),0:new RegExp("[0-9]"),a:new RegExp("[A-Za-z]"),"*":new RegExp("[A-Za-z0-9]")},this._tests=null,this._defBuffer=[],this._editor=e,t&&this.setOptions(t)}function d(){var e=null!==a&&a.apply(this,arguments)||this;return e._maxLength=0,e._fontSize=0,e._modified=!1,e}function y(){return null!==m&&m.apply(this,arguments)||this}function E(e,t){return b.call(this,e,t)||this}function T(e,t){return S.call(this,e,t)||this}function k(e,t){return t=N.call(this,e,t)||this,t._minHeight=0,t._altEnterNewLine=!1,t}function O(e,t){return t=L.call(this,e,t)||this,t._addString="000",t._maxIntegerLength=0,t._step=1,t._delay=100,t._regxAll=/[0-9]|,|\.|\-|\+|e|E/,t._regxPos=/[0-9]|,|\.|\+|e|E/,t._regxInt=/[0-9]|,|\+|\-/,t._regxPosInt=/[0-9]|,|\+/,t._regx=t._regxAll,t._decLen=void 0,t._decimalFormatter=void 0,t._isMultiple=!1,t._decSep=".",t._groupSep=",",t._active=!1,t._stepChanged=!1,t._editor.style["ime-mode"]="disabled",t._editor.style["-webkit-ime-mode"]="disabled",t._editor.style["-moz-ime-mode"]="disabled",t._editor.style["-ms-ime-mode"]="disabled",t}function P(){return null!==M&&M.apply(this,arguments)||this}function B(e,t){return e=H.call(this,e,t)||this,e._isMobile&&(t=p.getDoc(t),e._marquee=new D(t)),e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=p.Utils.isSafari?1:0,i=(n=x.EventAware,l.__extends(s,n),s.getEditorType=function(e){return"string"==typeof e?e:e?e.type:"line"},s.getEditorType2=function(e,t){return"string"==typeof e?e:e&&e.type?e.type:"string"==typeof t?t:t&&t.type?t.type:"line"},s.prototype._doDispose=function(){this.unprepare(),this._editor&&this._editor.parentElement.removeChild(this._editor),this._editor=null,this._container&&this._container.parentElement.removeChild(this._container),this._container=null,this._grid=null,this._controller=null,n.prototype._doDispose.call(this)},_dp(s,"native",{get:function(){return!1}}),_dp(s,"buttonCount",{get:function(){return 0}}),_dp(s,"hasList",{get:function(){return!1}}),_dp(s,"emptyValue",{get:function(){return this._emptyValue},set:function(e){e!=this._emptyValue&&(this._emptyValue=e,this._changed())}}),_dp(s,"textCase",{get:function(){return this._textCase},set:function(e){e!=this._textCase&&(this._textCase=e,this._changed())}}),_dp(s,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(e){e!=this._datetimeFormat&&((this._datetimeFormat=e)?(this._saveDateConverter||(this._saveDateConverter=new _.DateTimeConverter(e)),this._saveDateConverter.format=e,this._dateConverter=this._saveDateConverter):this._dateConverter=_.DateTimeConverter.Default)}}),_dp(s,"todayChar",{get:function(){return this._todayChar},set:function(e){e!=this._todayChar&&(this._todayChar=e,this._changed())}}),_dp(s,"nowChar",{get:function(){return this._nowChar},set:function(e){e!=this._nowChar&&(this._nowChar=e,this._changed())}}),_dp(s,"booleanFormat",{get:function(){return this._booleanFormat},set:function(e){e!=this._booleanFormat&&((this._booleanFormat=e)?(this._saveBoolConverter||(this._saveBoolConverter=new v.BooleanConverter(e)),this._saveBoolConverter.format=e,this._boolConverter=this._saveBoolConverter):this._boolConverter=v.BooleanConverter.Default)}}),_dp(s,"editor",{get:function(){return this._editor}}),_dp(s,"visible",{get:function(){return parseInt(this._container.style.width)>r&&parseInt(this._container.style.height)>r}}),s.prototype.setVisible=function(e,t){void 0===t&&(t=!1);var n=p.getWin(this._container),i=t?!e:this.visible;this._editor instanceof n.HTMLInputElement&&(e&&this._isEmptyTextValue?this._editor.value="":e||null!=this._editor.value&&null!=this._editor.value&&""!=this._editor.value||(this._isEmptyTextValue=!0,this._grid.$_editFocused&&this.selectAll(),this._keydowned=!1)),e||(this._container.style.width=r+"px",this._container.style.height=r+"px",p.Utils.isMobile()&&((t=this._grid)?(n=t.container._containerDom,t=p.getDoc(this._container),this._editor===t.activeElement&&n&&n.focus()):this._editor.blur())),e!=i&&this._doVisibleChanged(e)},s.prototype._doVisibleChanged=function(e){this.setEditorZIndex(e)},_dp(s,"readOnly",{get:function(){return this._readOnly},set:function(e){var t=p.getWin(this._container);this._editor instanceof t.HTMLInputElement&&(this._editor.readOnly=this._readOnly=e)}}),_dp(s,"textReadOnly",{get:function(){return this._textReadOnly}}),s.prototype._setTextReadOnly=function(e){e!=this._textReadOnly&&(this._textReadOnly=e,this._changed())},_dp(s,"allowEmpty",{get:function(){return this._allowEmpty}}),s.prototype._setAllowEmpty=function(e){e!=this._allowEmpty&&(this._allowEmpty=e,this._changed())},_dp(s,"editing",{get:function(){return this._started}}),_dp(s,"editIndex",{get:function(){return this._editIndex}}),_dp(s,"value",{get:function(){return this._editor.value}}),_dp(s,"listing",{get:function(){return!1}}),s.prototype.hasButton=function(e,t){return!1},s.prototype.applyOptions=function(e){e&&this.assignFrom(e)},s.prototype.setEditIndex=function(e){this._editIndex.assign(e)},s.prototype.setController=function(e){this._controller=e},s.prototype.prepare=function(){!this.native&&this._editor&&this._editor.removeAttribute("type")},s.prototype.unprepare=function(){},s.prototype.beginEdit=function(e,t){this._started||(this._started=this._doBeginEdit())&&(e&&this.clear(),t&&this.selectAll())},s.prototype.endEdit=function(){this._started&&(this._doEndEdit(),this._started=!1)},s.prototype.isEdited=function(){return!1},s.prototype.isDisabled=function(){return!this._grid||this._grid.container.disabled},s.prototype.caretToLast=function(){},s.prototype.commit=function(){this._doCommit()},s.prototype.setReadOnly=function(e){this._editor.readOnly=this._readOnly=e},s.prototype.getEditValue=function(e,t){},s.prototype.setEditValue=function(e){this._oldValue=e},s.prototype.setCellEditValue=function(e,t){!this.readOnly&&this._requestStart(t)&&(this.setEditValue(e),this._doChanged())},s.prototype.getEditText=function(){return""},s.prototype.selectAll=function(e){void 0===e&&(e=!1),this._grid.$_editFocused&&(!e&&p.Utils.isMobile()||this._selectAll())},s.prototype.clear=function(){var e=p.getWin(this._container);this._editor instanceof e.HTMLInputElement&&(this._editor.value="",this._isEmptyTextValue=!0)},s.prototype.setFocus=function(){this._grid.handler._draggable||this._editor.focus({preventScroll:!0})},s.prototype.setEditorTitle=function(e){},s.prototype.setBounds=function(e,t,n,r,i){},s.prototype.setCellBounds=function(e,t,n,r){this._cellBounds.set(e,t,n,r)},s.prototype.closeList=function(e){},s.prototype.dropDownList=function(e){},s.prototype.buttonClicked=function(e,t){},s.prototype.buttonDown=function(e,t){},s.prototype.buttonUp=function(e,t){},s.prototype.setButtonStyle=function(e,t,n,r,i){return!1},s.prototype.isEmptyTextValue=function(){return this._editor&&this._isEmptyTextValue},s.prototype.initOptions=function(){this._emptyValue=void 0,this.booleanFormat=null,this._todayChar=null,this._nowChar=null,this.datetimeFormat=null,this._textCase=c.TextInputCase.DEFAULT,this._checkHangeul=!1},s.prototype.$_setEditorId=function(e){},s.prototype._changed=function(){},s.prototype.$_setController=function(e){this._controller=e},s.prototype._editField=function(){return this._grid.dataSource?this._grid.dataSource.getField(this._editIndex.dataField):null},s.prototype._isDateEditor=function(){return!1},s.prototype._requestStart=function(e){return this._started||(this.selectAll(),this._controller.onEditorStart(this))},s.prototype._valToStr=function(e){var t=this.editIndex,n="";try{if(void 0!==e||this._mask){var r=t.grid.dataSource.getField(t.dataField);if(r)switch(r.dataType){case c.ValueType.DATETIME:e&&(n=this._dateConverter.getText(e)),this._mask&&(n=this._mask.writeBuffer(n));break;case c.ValueType.BOOLEAN:n=this._boolConverter.toText(e);break;case c.ValueType.NUMBER:isNaN(e)||(n=p.Utils.toStr(e));break;case c.ValueType.OBJECT:var i=t.column._objectKey||r.objectKey;e&&(n=i&&e.hasOwnProperty(i)?e[i]:null!=e&&"object"==typeof e?JSON.stringify(e):"");break;default:n=this._mask?this._mask.writeBuffer(e):e}else n=e}}catch(t){n=e}return null===n?"":n},s.prototype._strToVal=function(e){e=p.Utils.toStr(e);var t=this._editIndex,n=t.dataColumn&&this._textCase==c.TextInputCase.DEFAULT?t.dataColumn.textInputCase:this._textCase;try{var r=t.grid.dataSource.getField(t.dataField);if(r){var i=r.dataType;if(i==c.ValueType.DATETIME||e&&this._isDateEditor()&&i==c.ValueType.TEXT){var s=i==c.ValueType.DATETIME,o=null;return!(o=e&&e==this._nowChar?new Date:o)&&e&&e==this._todayChar&&(o=new Date).setHours(0,0,0,0),o||(this._mask&&(e=this._mask.getStripValue()),o=this._dateConverter.getDate(e)),s?!o||isNaN(o.getFullYear())?void 0:o:o?this._dateConverter.getText(o):void 0}if(i==c.ValueType.BOOLEAN)return this._boolConverter.toBoolEx(e);if(i==c.ValueType.NUMBER)return parseFloat(e);i==c.ValueType.TEXT&&this._mask&&(e=this._mask.getStripValue())}return n===c.TextInputCase.UPPER?e&&e.toLocaleUpperCase():n===c.TextInputCase.LOWER?e&&e.toLocaleLowerCase():e}catch(e){return}},s.prototype._dispatchKeyDown=function(e){return this._controller,this._controller.onEditorKeyDown(this,e)},s.prototype._dispatchKeyPress=function(e){return this._controller,this._controller.onEditorKeyPress(this,e)},s.prototype._dispatchKeyUp=function(e){return this._controller,this._controller.onEditorKeyUp(this,e)},s.prototype._dispatchChange=function(){this._controller.onEditorChange(this)},s.prototype._dispatchSearch=function(e){this._controller.onEditorSearch(this,e)},s.prototype._dispatchSearchCellButtonClick=function(e){return this._controller.onSearchCellButtonClick(this,e)},s.prototype._dispatchCommit=function(){this._controller.onEditorCommit(this)},s.prototype._sendToParent=function(e,t,n){var r=p.Utils.isMac&&e.metaKey||!p.Utils.isMac&&e.ctrlKey;if(2==(t=void 0===t?void 0:t)){if(this._dispatchKeyPress(e))return e.preventDefault&&(e.preventDefault(),e.stopImmediatePropagation()),!0}else if(3==t){if(this._dispatchKeyUp(e))return e.preventDefault&&(e.preventDefault(),e.stopImmediatePropagation()),!0;try{var i=this._controller._grid,s=i.editOptions;if(s.maxLengthToNextCell){var o=s.skipReadOnly,u=i.activeTool,a=this.maxLength,f=this.editIndex.clone(),l=p.Utils.included(e.keyCode,38,33,40,34,113,9,13);if(!this._checkHangeul&&!l&&!r&&!e.altKey&&i&&i.isEditing(f)&&0<a&&!this._composing&&47<e.keyCode){var c=this._mask?this._mask.getStripValue():this._editor.value;if(c&&c.length>=a)return i.getBodyViewAt(f).spanRight(i.layoutManager,f),f.right(),o&&u._checkReadOnly(f)&&(u._skipReadOnly(f,1)||(f=this.editIndex.clone())),It.CellIndex.areEquals(f,this.editIndex)||u.setFocused(f,!0),!0}}}catch(e){if(e instanceof Dt.ValidationError)throw e;return!0}}else if(this._dispatchKeyDown(e))return e.preventDefault&&(e.preventDefault(),e.stopImmediatePropagation()),!0;return!1},s.prototype._commitListValue=function(e){this._editIndex&&this._grid._editorStarted(this,this._editIndex)&&this._grid.setCellValue(this._editIndex,e);var t=this._grid;t?(e=t.container._containerDom,t=p.getDoc(e),this._editor==t.activeElement&&e&&e.focus()):this._editor.blur()},s.Unselected={},s.InvalidFormat={},s.EDITOR_CSS="rg-editor ",s.CONTAINER_CSS="rg-editor-container",s);t.CellEditor=i;var o=(u.prototype.dispose=function(){this._definitions=null,this._tests=null,this._editor._editor&&(this._editor._editor.onclick=null),this._editor=null},_dp(u,"includedFormat",{get:function(){return this._includedFormat},set:function(e){e!=this._includedFormat&&(this._includedFormat=e,this._changed())}}),_dp(u,"placeHolder",{get:function(){return this._placeHolder},set:function(e){e!=this._placeHolder&&(this._placeHolder=e,this._changed())}}),_dp(u,"editMask",{get:function(){return this._editMask},set:function(e){e!=this._editMask&&(this._editMask=e,this._changed())}}),_dp(u,"definitions",{get:function(){return this._definitions},set:function(e){e!=this._definitions&&(this._definitions=e,this._changed())}}),_dp(u,"invalidFormatMessage",{get:function(){return this._invalidFormatMessage},set:function(e){e!=this._invalidFormatMessage&&(this._invalidFormatMessage=e,this._changed())}}),_dp(u,"showInvalidFormatMessage",{get:function(){return this._showInvalidFormatMessage},set:function(e){e!=this._showInvalidFormatMessage&&(this._showInvalidFormatMessage=e,this._changed())}}),_dp(u,"overWrite",{get:function(){return this._overwrite},set:function(e){e!=this._overwrite&&(this._overwrite=e,this._changed())}}),_dp(u,"allowEmpty",{get:function(){return this._allowEmpty},set:function(e){e!=this._allowEmpty&&(this._allowEmpty=e,this._changed())}}),_dp(u,"restrictNull",{get:function(){return this._restrictNull},set:function(e){e!=this._restrictNull&&(this._restrictNull=e,this._changed())}}),u.prototype.clickHandler=function(e){this.restrictNull&&this._moveCaret()},u.prototype.clearBuffer=function(e,t){e=0<arguments.length?e:0,t=1<arguments.length?t:this._tests.length;for(var n=e;n<t;n++)this._buffer[n]=this.$_getPlaceHolder(n),this._defBuffer[n]=""},u.prototype.writeBuffer=function(e,t){if(void 0===t&&(t=!1),e){t&&this.clearBuffer();for(var n=0,r=0,i=this._tests.length;n<i;n++)if(this._tests[n]&&this._tests[n]instanceof RegExp)for(var s;s=e[r++];)if(this._tests[n].test(s)){this._buffer[n]=s,this._defBuffer[n]=s;break}}return this._buffer&&this._buffer.join("")},u.prototype.getStripValue=function(){var e=[],t=[];if(""==this._defBuffer.join(""))return null;if(this.includedFormat)for(var n=0,r=this._buffer.length;n<r;n++){var i=this._buffer[n];!this._tests[n]||this._tests[n].test(i)?e.push(i):i==this.$_getPlaceHolder(n)&&this._tests[n].test(" ")&&e.push(" ")}else for(n=0,r=this._buffer.length;n<r;n++)(this._tests[n]&&this._tests[n]instanceof RegExp&&this._tests[n].test(this._buffer[n])||this._tests[n]&&"function"==typeof this._tests[n])&&(0<t.length&&(e=e.concat(t),t=[]),e.push(this._buffer[n]));return e.join("")},u.prototype.setOptions=function(e){"string"==typeof e?this.$_parseMask(e):(e.definitions&&this.$_parseDefinitions(e.definitions),e.placeHolder&&(this._placeHolder=e.placeHolder),e.editMask&&this.$_parseMask(e.editMask),null!=e.includedFormat&&(this._includedFormat=e.includedFormat),e.invalidFormatMessage&&(this._invalidFormatMessage=e.invalidFormatMessage),null!=e.allowEmpty&&(this._allowEmpty=e.allowEmpty),null!=e.showInvalidFormatMessage&&(this._showInvalidFormatMessage=e.showInvalidFormatMessage),null!=e.overwrite&&(this._overwrite=e.overwrite),null!=e.overWrite&&(this._overwrite=e.overWrite),this._restrictNull&&this._editor&&((e=this._editor._editor).onclick||(e.onclick=this.clickHandler.bind(this))))},u.prototype.checkValid=function(){var e=[];if(this.allowEmpty){for(var t=0,n=this._tests.length;t<n;t++)e[t]=this.$_getPlaceHolder(t);if(e.join("")===this._buffer.join(""))return!0}for(t=0,n=this._tests.length;t<n;t++){var r=this._buffer[t];if(this._tests[t]&&!this._tests[t].test(r)&&r==this.$_getPlaceHolder(t)&&!this._tests[t].test(" "))return!1}return!0},u.prototype._changed=function(){},u.prototype._moveCaret=function(e,t){for(var n=this._editor._editor,r=e=0<arguments.length?e:n.selectionStart,i=t=1<arguments.length?t:n.selectionEnd,s=e-1;0<=s;s--){if(this._tests[s]&&this._tests[s].test(this._buffer[s])){r=s+1;break}r=s}for(s=t-1;0<=s;s--){if(this._tests[s]&&this._tests[s].test(this._buffer[s])){i=s+1;break}i=s}if(r==e&&i==t)return r!=e||i!=t;for(s=r;s<=e&&!this._tests[s];s++)r++;for(s=i;s<=t&&!this._tests[s];s++)i++;return n.setSelectionRange(r,i),!0},u.prototype.$_setCaret=function(e,t){this._editor._editor.setSelectionRange(e,t)},u.prototype.$_parseDefinitions=function(e){for(var t in e)"string"==typeof e[t]&&(this._definitions[t]=new RegExp(e[t]))},u.prototype.$_parseMask=function(e){var t=this._tests=[],n=this._definitions,r=e.split("");this._editMask=e,this._buffer=[];for(var i=0,s=r.length;i<s;i++)t.push(n[r[i]]),this._buffer.push(n[r[i]]?this.$_getPlaceHolder(i):r[i])},u.prototype.$_getPlaceHolder=function(e){return this._placeHolder&&this._placeHolder.length>e?this._placeHolder[e]:!this._tests[e]&&this._editMask&&this._editMask.length>e?this._editMask[e]:"_"},u.prototype.$_seekPrev=function(e){for(;0<=--e&&!this._tests[e];);return e},u.prototype.$_seekNext=function(e){for(;++e<this._editMask.length&&!this._tests[e];);return e},u.prototype.$_shiftL=function(e,t){var n=this._editMask.length,r=this._buffer;if(0<=e)for(var i=e,s=this.$_seekNext(t);i<n;i++)if(this._tests[i]){if(!(s<n&&this._tests[i].test(r[s])))break;r[i]=r[s],this._defBuffer[i]=this._defBuffer[s],r[s]=this.$_getPlaceHolder(s),this._defBuffer[s]="",s=this.$_seekNext(s)}},u.prototype.$_shiftR=function(e){for(var t,n,r=this._editMask.length,i=this._buffer,s=e,o=this.$_getPlaceHolder(e);s<r;s++)if(this._tests[s]){if(t=this.$_seekNext(s),n=i[s],this._defBuffer[s]=o,i[s]=o,!(t<r&&this._tests[t].test(n)))break;o=n}},u.prototype.keydown=function(e){var t=this._editor.editor;if(!t.readOnly){var n=e.which||e.keyCode,r=t.selectionStart,e=t.selectionEnd;if(46===n||8===n)r==e&&(r=46!==n?this.$_seekPrev(r):e=this.$_seekNext(r-1),e=46===n?this.$_seekNext(e):e),this.clearBuffer(r,e),this._overwrite||this.$_shiftL(r,e-1),t.value=this.writeBuffer(),this.$_setCaret(Math.max(0,r),Math.max(0,r));else if(39===n||35===n)return this._moveCaret();this._pStart=t.selectionStart}},u.prototype.keyPress=function(e){var t,n,r,i=this._editor.editor;i.readOnly||(this.restrictNull&&this._moveCaret(),t=i.selectionStart,r=i.selectionEnd,e=e.which||e.keyCode,this.clearBuffer(t,r),t!==r&&this.$_shiftL(t,r-1),r=this.$_seekNext(t-1),this._editMask&&this._editMask.length>r&&this._tests[r]&&this._tests[r].test(n=String.fromCharCode(e))&&(this._overwrite||this.$_shiftR(t),this._buffer[r]=n,this._defBuffer[r]=n,i.value=this.writeBuffer(),r=this.$_seekNext(r),this.$_setCaret(Math.max(0,r),Math.max(0,r))),this._pStart=i.selectionStart)},u.prototype.input=function(e){var t,n=this._editor.editor;n.readOnly||(t=n.value,/[\u3131-\u314e\u314f-\u3163\uac00-\ud79d]/.test(t)&&(n.value=n.value.replace(/[\u3131-\u314e\u314f-\u3163\uac00-\ud79d]/g,""),null!=this._pStart&&n.setSelectionRange(this._pStart,this._pStart)))},u);t.EditMask=o;var a,f=(a=i,l.__extends(d,a),_dp(d,"maxLength",{get:function(){return this._maxLength},set:function(e){e!=this._maxLength&&(this._maxLength=e,this._changed())}}),_dp(d,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize=isNaN(e)?0:Math.max(0,e)}}),d.prototype.initOptions=function(){a.prototype.initOptions.call(this),this._maxLength=0},_dp(d,"readonly",{set:function(e){this._editor.readOnly=this._readOnly=e}}),d.prototype.isEdited=function(){return this._modified},d.prototype.setVisible=function(e,t){a.prototype.setVisible.call(this,e,t),t=this._container.style;if(e?(t.border="",t.boxShadow=""):e||(t.border="none",t.boxShadow="none",this._keydowned=!1),p.Utils.isWinSafari){try{this._editor.style.width=this._container.getBoundingClientRect().width+"px",this._container.style.cssText=this._container.style.cssText.replace(/border-width: initial; border-color: initial; /g,"")}catch(e){}setTimeout(function(){this._editor.style.width="100%"}.bind(this),0)}},d.prototype.setEditIndex=function(e){a.prototype.setEditIndex.call(this,e);var t=this._editor.style;p.Utils.isMobile()?t.fontSize=Math.max(this.fontSize,16)+"px":0<this.fontSize&&(t.fontSize=this.fontSize+"px"),e=e.valueColumn;if(e)switch(this._textCase==c.TextInputCase.DEFAULT?e.textInputCase:this._textCase){case c.TextInputCase.LOWER:this._editor.style.textTransform="lowercase";break;case c.TextInputCase.UPPER:this._editor.style.textTransform="uppercase";break;default:this._editor.style.textTransform="none"}},d.prototype.getEditText=function(){return this._editor.value},d.prototype.setEditValue=function(e){a.prototype.setEditValue.call(this,e),this._editor.value=this._valToStr(e),this._isEmptyTextValue=!1},d.prototype.getEditValue=function(e,t){void 0===e&&(e=!0);var n=this._editField(),r=this._emptyValue;try{var s=n.dataType,o=this._editor.value;if(s==c.ValueType.TEXT)o||void 0===this._emptyValue||(o=this._emptyValue),void 0===(r=this._strToVal(o))&&(r="");else{if(s===c.ValueType.OBJECT){var u=this._editIndex.dataColumn.objectKey||n.objectKey,a=this._editIndex.item.getData(n.index)||{};return a[u]=o,a}if(p.Utils.isWhiteSpace(o))if(void 0!==this._emptyValue)r=this._strToVal(this._emptyValue);else switch(s){case c.ValueType.NUMBER:isNaN(this._oldValue)&&(r=NaN);break;case c.ValueType.DATETIME:null===this._oldValue&&(r=null);break;case c.ValueType.BOOLEAN:}else r=this._strToVal(o)}if(r===i.InvalidFormat)return r;r=n.readValue(r)}catch(t){if(e)throw t;r=this._emptyValue}return r},d.prototype._selectAll=function(){this._editor.select&&this._editor.select()},d.prototype._setSelectionRange=function(e,t){try{this._editor.setSelectionRange(0,0)}catch(e){}},d.prototype._doBeginEdit=function(){if(this._modified=!1,this.visible)return this._editor.value||this._setSelectionRange(0,0),!0},d.prototype._doEndEdit=function(){this._modified=!1},d.prototype._doCommit=function(){},d);t.TextCellEditorBase=f;var m,g=(m=f,l.__extends(y,m),y.prototype._doDispose=function(){this._editor.$_owner=null,this._editor.onkeydown=null,this._editor.onkeyup=null,this._editor.onkeypress=null,this._editor.oninput=null,this._editor.onpaste=null,this._editor.oncopy=null,m.prototype._doDispose.call(this)},_dp(y,"mask",{get:function(){return this._mask}}),_dp(y,"text",{get:function(){return this._editor.value},set:function(e){!this._editor||e==this._editor.value&&e==this._controller.getData(this._editIndex)||(this._editor.value=e,this._isEmptyTextValue=!1,this._doChanged())}}),y.prototype.setMask=function(e){this._mask=null,e&&(this._mask=new o(this,e))},y.prototype.setAlignment=function(e){this._container.style.textAlign="left"},y.prototype._createContainer=function(e){var t=e.createElement("div"),e=t.style;return t.spellcheck=!1,t.setAttribute("aria-hidden","true"),e.position="absolute",e.width="0px",e.height="0px",e.padding="0px",e.margin="0px",t},y.prototype._createEditor=function(e){var t=p.getDoc(e);return this._container=this._createContainer(t),e.appendChild(this._container),e=t.createElement("input"),t=e.style,e.setAttribute("aria-hidden","true"),e.autocomplete="off",t.position="absolute",t.boxSizing="border-box",t.margin="0px",t.padding="0px 2px",t.wordWrap="normal",t.overflow="hidden",t.resize="none",t.border="none",t.outline="none",t.left="0px",t.top="0px",t.width="100%",t.height="100%",t["-webkit-user-modify"]="read-write-plaintext-only",t["white-space"]="pre",t["-webkit-transform"]="translateZ(0)",e.tabIndex=-1,e.onkeydown=this._keyDownHandler.bind(this),e.onkeyup=this._keyUpHandler.bind(this),e.onkeypress=this._keyPressHandler.bind(this),e.oninput=this._inputHandler.bind(this),e.onpaste=this._pasteHandler.bind(this),e.oncopy=this._copyHandler.bind(this),t=this._grid.container,t.$_addListener(e,"compositionstart",this._compositionstartHandler.bind(this),!1),t.$_addListener(e,"compositionupdate",this._compositionupdateHandler.bind(this),!1),t.$_addListener(e,"compositionend",this._compositionendHandler.bind(this),!1),t.$_addListener(e,"text",this._textHandler.bind(this),!1),this._container.appendChild(e),this._defMaxLength=0<e.maxLength?e.maxLength:1e6,e},y.prototype.initOptions=function(){m.prototype.initOptions.call(this),this._editor.readOnly=this._readOnly=!1,this._mask&&(this._mask.dispose(),this._mask=null)},y.prototype.applyOptions=function(e){m.prototype.applyOptions.call(this,e),e.mask&&this.setMask(e.mask)},y.prototype.caretToLast=function(){var e=p.Utils.toStr(this._editor.value).length;this._setSelectionRange(e,e)},y.prototype.setEditIndex=function(e){m.prototype.setEditIndex.call(this,e),this._editor.maxLength=0<this.maxLength?this.maxLength:this._defMaxLength},y.prototype.setEditorZIndex=function(e){var t=this._editor.style,n=this._grid.displayOptions.baseZindex;e?t.zIndex=String(n+0):t.removeProperty("z-index")},y.prototype._doChanged=function(){this._requestStart(),this._started&&(this._textReadOnly||!this._editor.readOnly||this.allowEmpty&&""===this.text)&&(this._modified=!0,this._isEmptyTextValue=!1,this._dispatchChange())},y.prototype.setBounds=function(e,t,n,r,i){p.Utils.setBounds(this._container,e,t,n,r),0==n||0==r?this._editor.style.width="100%":0<i&&(this._editor.style.height=Math.round(r-4)+"px",this._editor.style.width=i+"px")},y.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var t,n=this._editor,r=e.keyCode;if((p.Utils.isIE||p.Utils.isEdge)&&!this.visible&&e.ctrlKey&&90==r)return!1;if(p.Utils.isIE&&e.ctrlKey&&86==e.keyCode&&n.readOnly)return e.preventDefault(),this._pasteHandler(e),!1;if(p.Utils.isIE&&e.ctrlKey&&(67==e.keyCode||45==e.keyCode)&&""==this._editor.value)return e.preventDefault(),void p.getDoc(this._editor).execCommand("copy");switch(this._inputValue=n.value,this._keydowned=!0,r){case 8:case 46:this._sendToParent(e)||(!this.visible&&this._requestStart()?n.readOnly&&!this.allowEmpty||!this._controller._getData(this._editIndex)||(this._mask?(e.preventDefault(),e.stopImmediatePropagation(),this._mask.keydown(e),this._doChanged()):this.text=""):this._mask&&(e.preventDefault(),e.stopImmediatePropagation(),this._mask.keydown(e),this._doChanged()),8===r&&n.readOnly&&(e.preventDefault(),e.stopImmediatePropagation()));break;case 9:return!this._sendToParent(e);case 37:if(!this.visible||0==n.selectionEnd&&n.selectionEnd==n.selectionStart)return!this._sendToParent(e);if(n.readOnly&&p.Utils.isChrome)return!this._sendToParent(e);e.stopImmediatePropagation();break;case 39:if(!this.visible||n.selectionEnd==n.value.length&&n.selectionEnd==n.selectionStart)return!this._sendToParent(e);if(n.readOnly&&p.Utils.isChrome)return!this._sendToParent(e);e.altKey||e.ctrlKey||e.shiftKey||!this._mask||!this._mask.restrictNull||(t=n.selectionStart,this._mask._moveCaret(t+1,t+1)&&(e.preventDefault(),e.stopImmediatePropagation())),e.stopImmediatePropagation();break;case 36:if(!this.visible)return!this._sendToParent(e);e.stopImmediatePropagation();break;case 35:if(!this.visible)return!this._sendToParent(e);this._mask&&this._mask.restrictNull&&(t=n.value?n.value.length-1:0,this._mask._moveCaret(t,t)&&(e.preventDefault(),e.stopImmediatePropagation())),e.stopImmediatePropagation();break;case 32:if(!this.visible)return!this._sendToParent(e);break;case 38:case 33:case 40:case 34:case 13:case 27:case 113:case 45:return e.preventDefault(),e.stopImmediatePropagation(),!this._sendToParent(e);case 229:this._sendToParent(e);break;default:return!this._sendToParent(e,null,!0)}return p.Utils.isFirefox?!e.ctrlKey&&!e.altKey&&229!==r&&32<=r&&(r<112||130<r)&&this._requestStart():p.Utils.isIE,!0}},y.prototype._keyUpHandler=function(e){if(!this.isDisabled()){var t=e.keyCode;switch(8!=t&&46!=t||p.Utils.ieOld&&this.visible&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),e.keyCode){case 37:case 39:case 36:case 35:case 32:this.visible||this._sendToParent(e,3);break;default:this._sendToParent(e,3)}}},y.prototype._keyPressHandler=function(e){var t;this.isDisabled()||(t=e.which||e.keyCode,this._sendToParent(e,2),p.Utils.isFirefox?e.ctrlKey||e.altKey||!(0==t||32<=t)||(this._requestStart()?this._mask&&(this._mask._pStart=e.target.selectionStart,this._mask.keyPress(e),this._doChanged(),e.preventDefault()):e.preventDefault()):p.Utils.isMac&&e.metaKey&&(122===t||121===t)?e.preventDefault():p.Utils.isMac&&e.metaKey&&(99===t||118===t)||32<=t&&(this._requestStart()?this._mask&&(this._mask._pStart=e.target.selectionStart,this._mask.keyPress(e),this._doChanged(),e.preventDefault()):e.preventDefault()))},y.prototype._textHandler=function(){this.isDisabled()||this._requestStart()},y.prototype._compositionstartHandler=function(e){this.isDisabled()||(this._composing=!0,this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange(),this._checkHangeul=!0))},y.prototype._compositionendHandler=function(){this._composing=!1},y.prototype._compositionupdateHandler=function(){this._composing=!0},y.prototype._changeHandler=function(e){},y.prototype._inputHandler=function(e){if(!this.isDisabled()){if(p.Utils.isIE){if(this._isEmptyTextValue&&!this._keydowned)return;if((null==this._inputValue||null==this._inputValue?"":this._inputValue)===this._editor.value)return}"historyUndo"!==e.inputType&&"historyRedo"!==e.inputType&&(this._mask&&this._mask.input(e),this._doChanged())}},y.prototype._pasteHandler=function(e){if(!this.isDisabled()){var t=this._grid.pasteOptions;try{var n,r,i,s,o=void 0,u=(e.originalEvent||e).clipboardData;if(null!=(o=u?u.getData("text/plain"):window.clipboardData.getData("text"))){if(this.visible)return this._mask&&(e.preventDefault(),s=(n=this._editor).value,r=n.selectionStart,i=n.selectionEnd,s=s.substr(0,r)+o+s.substr(i),n.value=this._mask.writeBuffer(s,!0)),void this._doChanged();e.preventDefault(),this._grid.pasteFromClipboard(o,e)}}catch(e){if(e instanceof Dt.ValidationError){if(t.throwValidationError)throw e}else if(e instanceof Dt.AbortError)alert(e.message);else if(e)throw e}}},y.prototype._copyHandler=function(e){if(!this.isDisabled()&&!this.editing){var t=this._grid.copyToClipboard(e,null);return null!=t&&(window.clipboardData?window.clipboardData.setData("Text",t):e.clipboardData.setData("text/plain",t)),e.preventDefault()}},y.prototype._getInputSelector=function(){return null},y);t.TextCellEditor=g;var b,w=(b=g,l.__extends(E,b),_dp(E,"inputCharacters",{get:function(){return this._inputCharacters},set:function(e){e!=this._inputCharacters&&(this._inputCharacters=e)}}),_dp(E,"ignoreCharacters",{get:function(){return this._ignoreCharacters},set:function(e){e!=this._ignoreCharacters&&(this._ignoreCharacters=e)}}),E.prototype.initOptions=function(){this._inputCharacters=null,this._ignoreCharacters=null,b.prototype.initOptions.call(this)},E.prototype._inputHandler=function(e){this.$_resetValue(),b.prototype._inputHandler.call(this,e)},E.prototype._keyDownHandler=function(e){return this._pStart=e.target.selectionStart,b.prototype._keyDownHandler.call(this,e)},E.prototype._createEditor=function(e){return e=b.prototype._createEditor.call(this,e),e.tabIndex=-1,e},E.prototype._getInputSelector=function(){return E.INPUT_CSS},E.prototype.$_resetValue=function(){var e,t,n=this._editor,r=n.value;this.visible&&((e=this.inputCharacters)&&(t=new RegExp("[^"+e+"]","g")).test(r)&&(n.value=r=r.replace(t,""),null!=this._pStart&&n.setSelectionRange(this._pStart,this._pStart)),(e=this.ignoreCharacters)&&(t=new RegExp("["+e+"]","g")).test(r)&&(n.value=n.value.replace(t,""),null!=this._pStart&&n.setSelectionRange(this._pStart,this._pStart)),this._pStart=null)},E.INPUT_CSS="rg-text-editor",E);t.LineCellEditor=w;var S,w=(S=g,l.__extends(T,S),T.prototype._createEditor=function(e){return e=S.prototype._createEditor.call(this,e),e.setAttribute("type","password"),e.tabIndex=-1,e},T.prototype._getInputSelector=function(){return T.INPUT_CSS},T.prototype.prepare=function(){},T.INPUT_CSS="rg-password-editor",T);t.PasswordCellEditor=w;var N,f=(N=f,l.__extends(k,N),k.prototype._doDispose=function(){this._editor.onkeydown=null,this._editor.onkeyup=null,this._editor.onkeypress=null,this._editor.oninput=null,this._editor.onpaste=null,this._editor.oncopy=null,N.prototype._doDispose.call(this)},_dp(k,"minHeight",{get:function(){return this._minHeight},set:function(e){e!=this._minHeight&&(this._minHeight=e,this._changed())}}),_dp(k,"altEnterNewLine",{get:function(){return this._altEnterNewLine},set:function(e){e!=this._altEnterNewLine&&(this._altEnterNewLine=e,this._changed())}}),_dp(k,"text",{get:function(){return this._editor.value}}),k.prototype.setAlignment=function(e){this._container.style.textAlign="left"},k.prototype.initOptions=function(){N.prototype.initOptions.call(this),this._minHeight=0,this.setReadOnly(!1)},k.prototype.setEditIndex=function(e){N.prototype.setEditIndex.call(this,e),this._editor.maxLength=0<this.maxLength?this.maxLength:2e9},k.prototype.setCellEditValue=function(e){N.prototype.setCellEditValue.call(this,e,!1)},k.prototype.setEditorZIndex=function(e){var t=this._editor.style,n=this._grid.displayOptions.baseZindex;e?t.zIndex=String(n+0):t.removeProperty("z-index")},k.prototype._doChanged=function(){this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._isEmptyTextValue=!1,this._dispatchChange(),this.$_resetBounds())},k.prototype.$_resetBounds=function(){var e=p.Utils.getClientRect(this._container),t=e.cx,n=e.cy,r=e.width,i=Math.round(e.height),s=this._isEmptyTextValue;!s&&this._editor.scrollWidth>r&&(r=this._editor.scrollWidth+6),!s&&this._editor.scrollHeight>i&&(i=this._editor.scrollHeight+6),s=isNaN(this._minHeight)?0:this._minHeight,0<s&&(i=Math.max(i,s)),e=p.Utils.getClientRect(this._parentElement),r=Math.min(e.width,r),i=Math.min(e.height,i),t+r>e.width&&(t=e.width-r),n+i>e.height&&(n=e.height-i),p.Utils.setBounds(this._container,Math.max(t,0),Math.max(n,0),r,i)},k.prototype.$_createContainer=function(e){var t=e.createElement("div"),e=t.style;return t.spellcheck=!1,t.setAttribute("aria-hidden","true"),e.position="absolute",e.width="0px",e.height="0px",e.padding="0px",e.margin="0px",t},k.prototype._createEditor=function(e){var t=p.getDoc(e);return this._container=this.$_createContainer(t),e.appendChild(this._container),e=t.createElement("textarea"),t=e.style,e.autocomplete="off",e.setAttribute("aria-hidden","true"),t.position="absolute",t.margin="0px",t.padding="0px",t.wordWrap="normal",t.overflow="hidden",t.resize="none",t.border="none",t.outline="none",t.left="0px",t.top="0px",t.width="100%",t.height="100%",t["-webkit-user-modify"]="read-write-plaintext-only",t["white-space"]="pre",t["-webkit-transform"]="translateZ(0)",e.tabIndex=-1,e.onkeydown=this._keyDownHandler.bind(this),e.onkeyup=this._keyUpHandler.bind(this),e.onkeypress=this._keyPressHandler.bind(this),e.oninput=this._inputHandler.bind(this),e.onpaste=this._pasteHandler.bind(this),e.oncopy=this._copyHandler.bind(this),t=this._grid.container,t.$_addListener(e,"compositionstart",this._compositionstartHandler.bind(this),!1),t.$_addListener(e,"compositionupdate",this._compositionupdateHandler.bind(this),!1),t.$_addListener(e,"compositionend",this._compositionendHandler.bind(this),!1),t.$_addListener(e,"text",this._textHandler.bind(this),!1),this._container.appendChild(e),e},k.prototype.setBounds=function(e,t,n,r){p.Utils.setBounds(this._container,e,t,n,r),e>p.Utils.$_INVISIBLE_EDIT_BOUNDS.x&&this.$_resetBounds()},k.prototype._getInputSelector=function(){return k.INPUT_CSS},k.prototype._textHandler=function(){this.isDisabled()||this._requestStart()},k.prototype._compositionstartHandler=function(e){this.isDisabled()||(this._composing=!0,this._requestStart())},k.prototype._compositionendHandler=function(){this._composing=!1},k.prototype._compositionupdateHandler=function(){this._composing=!0},k.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var t=this._editor,n=e.keyCode;if((p.Utils.isIE||p.Utils.isEdge)&&!this.visible&&e.ctrlKey&&90==n)return!1;if(p.Utils.isIE&&e.ctrlKey&&(67==e.keyCode||45==e.keyCode)&&""==this._editor.value)return e.preventDefault(),void p.getDoc(this._editor).execCommand("copy");switch(this._keydowned=!0,n){case 8:case 46:this._sendToParent(e)||!this.visible&&this._requestStart()&&(e.preventDefault(),e.stopImmediatePropagation(),!this._editor.readOnly&&this._controller.getData(this._editIndex)&&(this._editor.value="",this._isEmptyTextValue=!1,this._modified=!0,this._dispatchChange()));break;case 9:return!this._sendToParent(e);case 37:if(!this.visible||0==t.selectionEnd&&t.selectionEnd==t.selectionStart)return!this._sendToParent(e);break;case 39:if(!this.visible||t.selectionEnd==t.value.length&&t.selectionEnd==t.selectionStart)return!this._sendToParent(e);break;case 36:case 35:if(!this.visible)return!this._sendToParent(e);e.stopImmediatePropagation();break;case 38:case 33:if(!this.visible)return!this._sendToParent(e);e.stopImmediatePropagation();break;case 40:case 34:if(!this.visible)return!this._sendToParent(e);e.stopImmediatePropagation();break;case 32:if(!this.visible)return!this._sendToParent(e);break;case 13:var r,i=e.ctrlKey||p.Utils.isMac&&e.metaKey;if(this.altEnterNewLine){if(!(e.altKey&&this.editing||e.shiftKey))return!this._sendToParent(e)}else if(!(i&&this.editing||e.shiftKey))return!this._sendToParent(e);(this.altEnterNewLine&&e.altKey||!this.altEnterNewLine&&i)&&!e.shiftKey&&(e.preventDefault(),e.stopImmediatePropagation(),(r=this._isEmptyTextValue?"":t.value)&&(i=t.selectionEnd,r=r.substring(0,i)+"\r\n"+r.substring(i),t.value=r,this._isEmptyTextValue=!1,t.setSelectionRange(i+1,i+1),this._doChanged()));break;case 27:case 113:case 45:return e.preventDefault(),e.stopImmediatePropagation(),!this._sendToParent(e);case 229:break;default:return this._sendToParent(e,null,!0),!0}return e.keyCode,!0}},k.prototype._keyUpHandler=function(e){if(!this.isDisabled()){var t=e.keyCode;switch(8!=t&&46!=t||p.Utils.ieOld&&this.visible&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),e.keyCode){case 37:case 39:case 36:case 35:case 32:this.visible||this._sendToParent(e,3);break;default:this._sendToParent(e,3)}}},k.prototype._keyPressHandler=function(e){var t=e.which||e.keyCode;this.isDisabled()||(p.Utils.isMac&&e.metaKey&&(122===t||121===t)?e.preventDefault():p.Utils.isMac&&e.metaKey&&(99===t||118===t)||32<=t&&(this._requestStart()||e.preventDefault()))},k.prototype._inputHandler=function(e){this.isDisabled()||"historyUndo"!==e.inputType&&"historyRedo"!==e.inputType&&this._doChanged()},k.prototype._pasteHandler=function(e){if(!this.isDisabled())if(this.visible)this._doChanged();else{e.preventDefault();var t=this._grid.pasteOptions;try{var n=void 0,r=(e.originalEvent||e).clipboardData;null!=(n=r?r.getData("text/plain"):window.clipboardData.getData("text"))&&this._grid.pasteFromClipboard(n,e)}catch(e){if(e instanceof Dt.ValidationError){if(t.throwValidationError)throw e}else if(e instanceof Dt.AbortError)alert(e.message);else if(e)throw e}}},k.prototype._copyHandler=function(e){if(!this.isDisabled()&&!this.editing){var t=this._grid.copyToClipboard(e,null);return null!=t&&(window.clipboardData?window.clipboardData.setData("Text",t):e.clipboardData.setData("text/plain",t)),e.preventDefault()}},k.INPUT_CSS="rg-multiline-editor",k);t.MultiLineCellEditor=f;var L,A=/[\u3131-\u314e\u314f-\u3163\uac00-\ud79d]/g,f=(L=g,l.__extends(O,L),_dp(O,"positiveOnly",{get:function(){return this._positiveOnly},set:function(e){e!=this._positiveOnly&&(this._positiveOnly=e,this.$_resetRistrict())}}),_dp(O,"integerOnly",{get:function(){return this._integerOnly},set:function(e){e!=this._integerOnly&&(this._integerOnly=e,this.$_resetRistrict())}}),_dp(O,"editFormat",{get:function(){return this._editFormat},set:function(e){e!=this._editFormat&&((this._editFormat=e)?(e=this._decimalFormatter=new C.DecimalFormatter(e))&&(this._decSep=e.separator||".",this._groupSep=e.groupSep||",",this._decLen=Math.max(e.minDigits,e.maxDigits)):(this._decimalFormatter=void 0,this._decSep=".",this._groupSep=",",this._decLen=void 0))}}),_dp(O,"multipleChar",{get:function(){return this._multipleChar},set:function(e){e!=this._multipleChar&&(this._multipleChar=e,this._changed())}}),_dp(O,"addString",{get:function(){return this._addString},set:function(e){e!=this._addString&&(this._addString=e,this._changed())}}),_dp(O,"maxLengthExceptComma",{get:function(){return this._maxLengthExceptComma},set:function(e){e!=this._maxLengthExceptComma&&(this._maxLengthExceptComma=e,this._changed())}}),_dp(O,"maxIntegerLength",{get:function(){return this._maxIntegerLength},set:function(e){e!=this._maxIntegerLength&&(this._maxIntegerLength=e,this._changed())}}),_dp(O,"blankWhenSpace",{get:function(){return this._blankWhenSpace},set:function(e){e!=this._blankWhenSpace&&(this._blankWhenSpace=e,this._changed())}}),_dp(O,"step",{get:function(){return this._step},set:function(e){e!==this._step&&0!=e&&(this._step=e,this._changed())}}),_dp(O,"max",{get:function(){return this._max},set:function(e){this._max=e}}),_dp(O,"min",{get:function(){return this._min},set:function(e){this._min=e}}),_dp(O,"delay",{get:function(){return this._delay},set:function(e){e!==this._delay&&(this._delay=e)}}),_dp(O,"textReadOnly",{get:function(){return this._textReadOnly},set:function(e){this._setTextReadOnly(e)}}),_dp(O,"direction",{get:function(){return this._direction},set:function(e){this._direction=e}}),_dp(O,"showStepButton",{get:function(){return this._showStepButton},set:function(e){this._showStepButton=e}}),O.prototype.setMask=function(e){this._mask=null},O.prototype.initOptions=function(){L.prototype.initOptions.call(this),this.editFormat=void 0,this._positiveOnly=!1,this._integerOnly=!1,this._multipleChar=void 0,this._addString="000",this._blankWhenSpace=!1,this._maxLengthExceptComma=!1,this._maxIntegerLength=0,this._step=1,this._min=this._max=void 0,this._delay=100,this._active=!1,this._direction="vertical",this._showStepButton=!1,this._textReadOnly=!1,this.$_resetRistrict()},O.prototype.hasButton=function(e,t){return null!=t.showStepButton&&t.showStepButton},_dp(O,"buttonCount",{get:function(){return 2}}),O.prototype.setEditIndex=function(e){L.prototype.setEditIndex.call(this,e),this._editor.maxLength=this.maxLengthExceptComma||this.maxLength<=0?this._defMaxLength:this.maxLength},O.prototype._inputHandler=function(e){this._editFormat&&(e.target,this.$_editFormatting(e)),L.prototype._inputHandler.call(this,e)},O.prototype._keyPressHandler=function(e){var t,n,r,i,s,o,u;p.Utils.isFirefox&&(e.ctrlKey||0===e.charCode)||(t=!0,n=String.fromCharCode(e.keyCode||e.charCode),(!this._regx.test(n)||e.target.value&&0<=e.target.value.indexOf(this._decSep)&&n==this._decSep)&&(this._multipleChar&&n===this._multipleChar||(t=!1,this.blankWhenSpace&&" "===n||e.preventDefault())),r=e.target.selectionStart,i=e.target.selectionEnd,s=e.target.value,o=new RegExp("\\"+this._groupSep,"g"),(u=s?s.split(""):[]).splice(r,i-r,n===this._multipleChar?this._addString:n),u=u.join("").replace(o,""),0<this.maxLength&&t&&this.maxLengthExceptComma&&s&&!this._isEmptyTextValue&&u.length>this.maxLength&&e.preventDefault(),0<this._maxIntegerLength&&n!==this._decSep&&(u=Math.floor(this.$_strToNum(u)),isNaN(u)||(u=Math.abs(u).toString().length,this._maxIntegerLength<u&&e.preventDefault())),this._isMultiple=n==this._multipleChar),L.prototype._keyPressHandler.call(this,e)},O.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var t=e.keyCode||e.charCode;if(this._isMultiple=!1,(8===t||46===t)&&this.editing&&this._editFormat){var n=e.target,r=n.value,i=r.length,s=r&&r.split(""),o=n.selectionStart,u=n.selectionEnd;if(o!==u)return L.prototype._keyDownHandler.call(this,e);var a=r[8===t?o-1:o];a!==this._groupSep&&a!==this._decSep||a===this._decSep&&o===(8===t?r.length:r.length-1)||(s.splice(8===t?o-2:o+1,1),n.value=s.join(""),this.$_editFormatting(e),s=n.value,i-=8===t?s.length:i,n.setSelectionRange(o-i,u-i),this._doChanged(),e.preventDefault())}return L.prototype._keyDownHandler.call(this,e)}},O.prototype._dispatchChange=function(){this.visible&&(this.$_resetValue(),L.prototype._dispatchChange.call(this))},O.prototype.setEditValue=function(e){e=parseFloat(e),isNaN(e)?this._editor.value="":this._editFormat&&"number"==typeof e?this._editor.value=this.$_formatNum(e,this._decimalFormatter.minDigits,this._decimalFormatter._maxDigits):this._editor.value=e,this._isEmptyTextValue=!1},O.prototype.getEditValue=function(e,t){void 0===e&&(e=!0),this.$_resetValue();var n=this._editField().nullValue;try{var r,i,s=this._editor.value;(s=s&&s.trim())&&(r=new RegExp("\\"+this._groupSep,"g"),i=new RegExp("[\\"+this._decSep+"]+","g"),s=(s=(s=(s=(s=(s=s.replace(r,"")).replace(i,".")).replace(/\++/g,"+")).replace(/\-+/g,"-")).replace(/\+\-/g,"+")).replace(/\-\+/g,"-")),n=s?parseFloat(s):void 0}catch(t){if(e)throw t}return n},O.prototype.setCellEditValue=function(e){!this.readOnly&&this._requestStart()&&("string"!=typeof e&&"number"!=typeof e||(e=this.$_strToNum(e),this.setEditValue(e),this._doChanged()))},O.prototype.buttonDown=function(e,t){var n,r=t.target;p.Utils.stopEvent(t),"up"===r.$_editButtonType?n=this.step:"down"===r.$_editButtonType&&(n=-this.step),n&&(this.$_changeStepValue(n),this._active=!0,setTimeout(function(){this._active&&!this._stepTimer&&(this._stepTimer=setInterval(function(){this.$_changeStepValue(n)}.bind(this),this._delay))}.bind(this),300))},O.prototype.buttonUp=function(e,t){this._active=!1,clearInterval(this._stepTimer),this._stepTimer=null},O.prototype.setButtonStyle=function(e,t,n,r,i){var s=e.style;return n?(0===t?s.top="0px":s.removeProperty("top"),0===t?s.removeProperty("bottom"):s.bottom="0px",s.right=r+"px",s.height="9px"):(s.top="0px",s.removeProperty("bottom"),s.right=r+i*t+"px",s.height="100%"),s.width=i+"px",e.className=0===t?"rg-button-step-up":"rg-button-step-down",e.$_editButtonType=0===t?"up":"down",!0},O.prototype._getInputSelector=function(){return O.INPUT_CSS},O.prototype.setFocus=function(){this._stepChanged||L.prototype.setFocus.call(this)},O.prototype.$_strToNum=function(e){e=""+e;var t=new RegExp("\\"+this._decSep,"g"),n=new RegExp("\\"+this._groupSep,"g"),r="-"===e[0];return e=e.replace(n,"").replace(t,".").replace(/\+/g,""),e=parseFloat(e),isNaN(e)?NaN:r?-Math.abs(e):e},O.prototype.$_formatNum=function(e,t,n){var r=e,i=r<0||0==r&&1/r==-1/0?"-":"",s=Math.max(t,n),s=isNaN(s)?2:s,e=parseInt(r=Math.abs(+r||0).toFixed(s))+"",n=3<e.length?e.length%3:0;if(0<=r.indexOf(".")){for(var o=r.split(".")[1].split("");0<o.length&&"0"===o[o.length-1]&&o.length>t;)o.splice(o.length-1,1);r=o.join(""),s=o.length}return i+(n?e.substr(0,n)+this._groupSep:"")+e.substr(n).replace(/(\d{3})(?=\d)/g,"$1"+this._groupSep)+(s?this._decSep+r:"")},O.prototype.$_editFormatting=function(e){this._editor;var t=e.target.value,n=t&&t[t.length-1]==this._decSep,r=e.target.selectionStart,i=e.target.selectionEnd;t=this._isMultiple&&this._addString?t.replace(new RegExp("\\"+this._multipleChar,"gi"),this._addString):t,this._isMultiple&&this._addString&&(r+=this._addString.length,i+=this._addString.length);var s=t.split(this._decSep),o=0;1<s.length&&(s.length=2,s[1]=s[1].substr(0,this._decimalFormatter._maxDigits),o=s[1].length,t=s.join(this._decSep));var o=2==s.length?Math.min(s[1].length,null!=this._decLen?this._decLen:99):0,u=this.$_strToNum(t);isNaN(u)||((0<this.maxLength||0<this.maxIntegerLength)&&(s=String(u).split("."),0<this.maxIntegerLength&&(s[0]=s[0].substr(0,this.maxIntegerLength)),s=s.join("."),0<this.maxLength&&(s=s.substr(0,this.maxLength)),u=parseFloat(s)),t=this.$_formatNum(u,o,this._decimalFormatter.maxDigits),o=(t=n&&this._decLen&&t.indexOf(this._decSep)<0?t+this._decSep:t).length,n=e.target.value.length,1==Math.abs(o-n)&&(n<o?(r++,i++):t.indexOf(this._decSep)>=r&&(r--,i--)),e.target.value=t,e.target.setSelectionRange(r,i))},O.prototype.$_resetValue=function(){var e,t,n,r;this.visible&&(t=(e=this._editor).selectionStart,n=e.selectionEnd,r=e.value?e.value.length:0,e.value=e.value.replace(A,"").trim(),(e.value?e.value.length:0)==r?e.setSelectionRange(t,n):e.setSelectionRange(n,n))},O.prototype.$_resetRistrict=function(){this._positiveOnly&&this._integerOnly?this._regx=this._regxPosInt:this._positiveOnly?this._regx=this._regxPos:this._integerOnly?this._regx=this._regxInt:this._regx=this._regxAll},O.prototype.$_changeStepValue=function(e){var t=null==(t=this.getEditValue())||t==isNaN(t)?0:t;t+=e,null!=this._max&&(t=Math.min(this._max,t)),null!=this._min&&(t=Math.max(this._min,t)),this.setEditValue(t),this._stepChanged=!0,this._doChanged(),this._stepChanged=!1},O.INPUT_CSS="rg-number-editor",O);t.NumberCellEditor=f;var M,D=(M=Yt.VisualElement,l.__extends(P,M),P.prototype._getCssSelector=function(){return"rg-editor-marquee"},P.prototype._initDom=function(e){M.prototype._initDom.call(this,e)},P.prototype._doDraw=function(e){},P.prototype.spread=function(){var e=this._dom,t=e.style,n=e.parentElement.getBoundingClientRect();t.left="0",t.top="0",t.width=n.width+"px",t.height=n.height+"px",this._setClassName(e)},P);t.EditorMarquee=D;var H,g=(H=g,l.__extends(B,H),B.prototype.hasButton=function(e){return!0},_dp(B,"buttonCount",{get:function(){return 1}}),_dp(B,"hasList",{get:function(){return!0}}),B.prototype._showMarquee=function(e){this._marquee&&(e.appendChild(this._marquee._dom),this._marquee.spread())},B.prototype._centerPopup=function(e,t){var n=t.getBoundingClientRect(),r=e.getBoundingClientRect();e.appendChild(t),t.style.left=(r.width-n.width)/2+"px",t.style.top=(r.height-n.height)/2+"px"},B.prototype._closeMarquee=function(){this._marquee&&p.Utils.detach(this._marquee._dom)},B.prototype._isMarquee=function(e){return this._marquee&&e===this._marquee._dom},_dp(B,"textReadOnly",{get:function(){return this._textReadOnly},set:function(e){this._setTextReadOnly(e)}}),_dp(B,"allowEmpty",{get:function(){return this._allowEmpty},set:function(e){this._setAllowEmpty(e)}}),B);t.PopupCellEditor=g});t(an),an.CellEditor,an.EditMask,an.TextCellEditorBase,an.TextCellEditor,an.LineCellEditor,an.PasswordCellEditor,an.MultiLineCellEditor,an.NumberCellEditor,an.EditorMarquee,an.PopupCellEditor;var fn=n(function(e,t){function s(e){this.cell=null,this.layout=null,this.visible=void 0,this.spanned=!1,this.rowSpan=1,this.colSpan=1,this.className="",this.width=0,this.height=0,this.text=void 0,this.cell=e}function a(e){var t=o.call(this,e)||this;return t.cellButton=null,t.editButtons=null,t.errorIcon=null,t.buttons=null,t.changedMarker=null,t.expander=null,t.item=null,t.grouped=!1,t.rowIndex=-1,t.rows=0,t.trow=-1,t.tcol=-1,t.head=null,t.merged=!1,t.spanHead=null,t.heighted=!1,t.buttonsOffset=0,t.template=void 0,t.marginRight=-1,t.style=new jt.ColumnStyle,t.rendererChanged=!1,t.valueChanged=!1,t.mouseEntered=!1,t.focused=!1,t.borderBottom=1,t.readonly=void 0,t.editable=void 0,t.error=void 0,t.errorLevel=c.ValidationLevel.IGNORE,t.errorWidth=0,t.button=c.CellButton.NONE,t.buttonWidth=0,t.editWidth=0,t.edgeMarker=null,t.text=e[p.Utils.TextProp],t}function d(e,t){return t=f.call(this,e,t,"bodyView")||this,t._itemViews=[],t._cells=[],t._spanned=!1,t}function m(){return null!==v&&v.apply(this,arguments)||this}function y(){return null!==g&&g.apply(this,arguments)||this}Object.defineProperty(t,"__esModule",{value:!0});var n="rowspan",r="colspan",i=(s.addEdgeMark=function(e,t,n){if(e!==t.edgeMark){var r=t.cell;if(e){var i=(i=t.edgeMarker)||(t.edgeMarker=n.createElement("div"));switch(e){case"leftTop":i.className="rg-edgemarker-lefttop";break;case"leftBottom":i.className="rg-edgemarker-leftbottom";break;case"rightTop":i.className="rg-edgemarker-righttop";break;case"rightBottom":i.className="rg-edgemarker-rightbottom";break;default:i.className=e}r.appendChild(i)}else t.edgeMarker&&r.removeChild(t.edgeMarker);t.edgeMark=e}},s.prototype.dispose=function(){this.cell=null},s.prototype.setColSpan=function(e){return this.colSpan!=e&&(1<(this.colSpan=e)?this.cell.colSpan=e:this.cell.removeAttribute(r)),this},s.prototype.setRowSpan=function(e){return this.rowSpan!=e&&(1<(this.rowSpan=e)?this.cell.rowSpan=e:this.cell.removeAttribute(n)),this},s.prototype.setVisible=
function(e){return e!==this.visible&&(this.visible=e,this.cell.style.display=e?"":"none"),this},s.prototype.set=function(e,t,i){return this.colSpan!=e&&(1<(this.colSpan=e)?this.cell.colSpan=e:this.cell.removeAttribute(r)),this.rowSpan!=t&&(1<(this.rowSpan=t)?this.cell.rowSpan=t:this.cell.removeAttribute(n)),this.visible!==i&&(this.visible=i,this.cell.style.display=i?"":"none"),this},s.prototype.clear=function(e){return 1<this.colSpan&&(this.colSpan=1,this.cell.removeAttribute(r)),1<this.rowSpan&&(this.rowSpan=1,this.cell.removeAttribute(n)),this.visible!==e&&(this.visible=e,this.cell.style.display=e?"":"none"),this},s);t.TableCell=i;var o,u=(o=i,l.__extends(a,o),a.prototype.dispose=function(){o.prototype.dispose.call(this),this.renderer2=this.renderer2&&this.renderer2.clearAndDispose(),this.item=null,this.editButtons&&this.editButtons.forEach(function(e){p.Utils.detach(e)}),this.buttons=this.cellButton=this.editButtons=this.errorIcon=null,this.changedMarker=this.expander=null,this.layout=null},_dp(a,"dataColumn",{get:function(){return this.layout.getDataColumn()}}),a.prototype.reset=function(e){return this.cell=e,this.className="",this.text=void 0,this.visible=void 0,this.readonly=void 0,this.editable=void 0,this},a.prototype.span=function(e){this.spanned=!0,this.spanHead=e,this.clear(!1)},a.prototype.refreshFormatters=function(e){var t;this.textFormatter=null,this.numberFormatter=null,this.datetimeWriter=null,this.booleanFormatter=null,(t=e.textFormat)&&(this.textFormatter&&this.textFormatter.format==t||(this.textFormatter=Pt.TextFormatter.getFormatter(t))),(t=e.numberFormat)&&(this.numberFormatter&&this.numberFormatter.format==t||(this.numberFormatter=C.DecimalFormatter.getFormatter(t))),(t=e.datetimeFormat)&&(this.datetimeWriter&&this.datetimeWriter.format==t||(this.datetimeWriter=T.DateTimeWriter.getFormatter(t))),(t=e.booleanFormat)&&(this.booleanFormatter&&this.booleanFormatter.format==t||(this.booleanFormatter=N.BooleanFormatter.getFormatter(t))),this.prefix=e.prefix,this.suffix=e.suffix},a.prototype.setClassName=function(e){return e!=this.className&&(this.cell.className=this.className=e,!0)},a.prototype.setEditor=function(e,t){this.editor=e,this.editorType=an.CellEditor.getEditorType2(e,t)},a.prototype.setBorderBottom=function(e){e!=this.borderBottom&&(this.borderBottom=e,this.cell.style.borderBottom=0==e?"0":"")},a.prototype.setMarginRight=function(e,t){t!=this.marginRight&&(this.marginRight=t,e.style.marginRight=t<=0?"":t+"px")},a.prototype.isCellButton=function(e){return e===this.cellButton},a.prototype.isEditButton=function(e){return this.editButtons&&this.editButtons.some(function(t){return t===e})},a.prototype.isButton=function(e){return e===this.cellButton||this.isEditButton(e)},a.prototype.resetButtonClass=function(){var e=this.button==c.CellButton.POPUP?"rg-button-popup":"rg-button-action";this.cellButton.className=e},a.prototype.resetEditClass=function(e,t){var n;switch(this.editorType){case"date":case"btdate":case"ndate":n="rg-button-calendar";break;default:n="rg-button-list"}e.className=n},a.prototype.resetErrorClass=function(){var e;switch(this.errorLevel){case c.ValidationLevel.ERROR:e="rg-validation-error";break;case c.ValidationLevel.WARNING:e="rg-validation-warning";break;case c.ValidationLevel.INFO:e="rg-validation-info";break;default:e=""}this.errorIcon.className=e},a.prototype.clearExpander=function(){this.expander&&(this.cell.removeChild(this.expander),this.expander=null)},a.prototype.clearButtons=function(){this.buttons&&(this.cell.removeChild(this.buttons),this.buttons=null,this.errorWidth=this.buttonWidth=this.editWidth=0)},a.prototype.getEditIndex=function(e){var t=this.item.index;return this.merged&&(t+=this.buttonsOffset),e.set(t,this.layout.firstColumn)},a.prototype.contains=function(e){if(e.layout!==this.layout)return!1;var t=e.itemIndex,n=this.item.index,e=n+this.rowSpan/this.layout.getDataSpan();return n<=t&&t<e},a.prototype.toString=function(){return"Body Cell("+this.layout.col+", "+this.item.index+", "+this.layout.row+")"},a);t.BodyTableCell=u;var f,h=(f=rn.DataTableElement,l.__extends(d,f),d.prototype._doDispose=function(){for(var e=0;e<this._cells.length;e++)for(var t=this._cells[e],n=0;n<t.length;n++)t[n].dispose(),t[n]=null;this._cells=null,f.prototype._doDispose.call(this)},_dp(d,"fixed",{get:function(){return!1}}),_dp(d,"rightFixed",{get:function(){return!1}}),_dp(d,"firstCell",{get:function(){return this._cells[0][0]}}),_dp(d,"lastCell",{get:function(){return this._cells[this.tableRowCount-1][0]}}),_dp(d,"spanned",{get:function(){return this._spanned}}),d.prototype.bodyCellByCell=function(e){for(var t=e.parentElement[c.T_ROW],n=0;n<this._cells.length;n++){var r=this._cells[n],i=r[0].item;if(i&&i.index==t)for(var s=0;s<r.length;s++){var o=r[s];if(o&&o.cell===e)return o}}},d.prototype.bodyCellAt=function(e){for(var t=0;t<this._cells.length;t++){var n=this._cells[t],r=n[0].item;if(r&&r.index==e.itemIndex)for(var i=0;i<n.length;i++){var s=n[i];if(s&&s.layout===e.layout)return s}}},d.prototype.layoutByCell=function(e){return e=this.bodyCellByCell(e),e&&e.layout},d.prototype.columnByCell=function(e){return e=this.bodyCellByCell(e),e&&e.layout&&e.layout._columnObj},d.prototype.cellByLayout=function(e,t,n){void 0===n&&(n=0);for(var r=t=void 0===t?0:t;r<this._cells.length;r++)for(var i=this._cells[r],s=n;s<i.length;s++){var o=i[s];if(o&&o.layout===e)return o}},d.prototype.getCellRectAt=function(e,t,n){return t=this.getCellAt(e,t),t&&this.getCellRect(e,t,n)},d.prototype.getCellRect=function(e,t,n){var r=(t=n&&t.merged?t.head:t).layout,i=t.trow,s=t.rowSpan,r=n||1<s&&s==r.getDataSpan()?s:t.item.isData?r._dspan:1,i=e.getTableRowBounds(i,r),r=t.tcol,t=t.colSpan;return this.fixed?(i.x=e.getFixedCellPoint(r),i.width=e.getFixedCellWidth2(r,t)):this.rightFixed?(i.x=e.getRightCellPoint(r),i.width=e.getRightCellWidth2(r,t)):(i.x=e.getCellPoint(r),i.width=e.getCellWidth2(r,t)),i},d.prototype.getRowView=function(e){for(var t=0,n=this.childCount;t<n;t++){var r=this.getChild(t);if(r._item===e)return r}},d.prototype.getRowIndex=function(e){return this._cells[e][0].item.index},d.prototype.getViewIndex=function(e){return this._cells[e][0].rowIndex},d.prototype.cleanRows=function(e,t){this.$_cleanRowViews(e),this.$_cutTailBodyCells(t),this.$_cleanTableRows(t)},d.prototype.getCheckedLayout=function(e){return e=e.spanned?this.getUpperOf(e):e},d.prototype.getLowerOf=function(e){for(var t=this._cells,n=e.trow,r=e.tcol,i=n+1;i<t.length;i++){var s=t[i][r];if(!s.spanned)return s;if(s.spanHead.trow===s.trow)return s.spanHead}},d.prototype.isBottomCell=function(e){for(var t=this._cells,n=e.rowIndex,r=e.trow,i=e.tcol,s=r+1;s<t.length;s++){var o=t[s][i];if(o.rowIndex!=n)break;if(!o.spanned)return!1;if(o.spanHead.trow===o.trow)return!1}return!0},d.prototype.getUpperOf=function(e){for(var t=this._cells,n=e.trow,r=e.tcol,i=n-1;0<=i;i--){var s=t[i][r];if(!s.spanned)return s;if(s.spanHead.trow===s.trow)return s.spanHead}},d.prototype.isTopCell=function(e){for(var t=this._cells,n=e.rowIndex,r=e.trow,i=e.tcol,s=r-1;0<=s;s--){var o=t[s][i];if(o.rowIndex!=n)break;if(!o.spanned)return!1;if(o.rowIndex===e.rowIndex&&o.trow!==e.trow&&o.layout.source)return!1}return!0},d.prototype.getNextVisibleCell=function(e){for(var t=this.bodyCellAt(e);t&&t.spanned;){if(!e.next())return!1;t=this.bodyCellAt(e)}return null!=t},d.prototype.getPrevVisibleCell=function(e){for(var t=this.bodyCellAt(e);t&&t.spanned;){if(!e.prev())return!1;t=this.bodyCellAt(e)}return null!=t},d.prototype._getCssSelector=function(){return"rg-body"},d.prototype._isFixedHeight=function(e){return!e.isAutoRowHeights()},d.prototype._getTrs=function(e){return e.trs},d.prototype._getTableRowCount=function(e){if(e.isAutoRowHeights())return Math.max(0,Math.ceil(e._itemsBounds/e.grid.displayOptions.minTableRowHeight)+this._trs-1);if(e.isRowGrouped()){for(var t=e.fixedItemCount,n=t+e.itemCount,r=this._trs,i=0,s=0;s<n;s++)i+=e.getItem(s).isData?r:1;return i+=t?1:0}return f.prototype._getTableRowCount.call(this,e)},d.prototype.$_getTableIndex=function(e,t){var n=e.fixedItemCount;if(n<=t&&e.isRowGrouped()){var r=this._trs,i=n*r;0<n&&i++;for(var s=n;s<t;s++)e.getItem(s).isData?i+=r:i++;return i}return i=t*this._trs,0<n&&n<=t?i+1:i},d.prototype._prepareCellContent=function(e,t){return this.grid.doc.createElement("div")},d.prototype._doMeasure=function(e,t,n){return this._spanned=!1,new tn.Size},d.prototype.$_refreshRowCells=function(e,t,n,r,i,s,o){for(var a=this._cells,f=o.children,l=this._getFirstCell(e),c=this._getLastCell(e)-l+1,h=a.length,d=r+s;h<d;h++)a.push([]);for(var v=0;v<s;v++){for(var m=a[r],g=f[r].children,y=i[v],b=0;b<c;b++){var w=g[b],E=y[b+l],S=m[b];S?S.cell!==w?S.reset(w):S.layout!==E&&(S.rendererChanged=!0,S.layout=E,S.clear(!0)):(S=m[b]=new u(w)).layout=E,S.spanned=!1,S.item=t,S.rowIndex=n,S.trow=r,S.tcol=b}r++;for(b=c;b<m.length;b++)p.Utils.isDebugging()&&m[b],m[b].dispose();m.length=c}},d.prototype.layoutRow=function(e,t,n,r,i){var s,o=e.lm,u=e.fixedItemCount,a=this.model,f=o.cellLayouts._dataCells,l=this._tbody.rows,h=i.isData?this._trs:1;this.$_refreshRowCells(o,i,n,r,f,h,this._tbody),this.childCount<=n?(s=this.$_borrowView(i),this.addChild(s)):s=this.getChild(n),this.$_setRowCellsDisplay(o,e,t,this._cells,i,n,r,h);var d=i.index,t=l[r];if(t.style.display="",t[c.T_ROW]=d,t[c.T_IDX]=r,s.updateItem(i,r,h,this._isFixedHeight(o)),i.isDataRow||i instanceof Ht.MergedGroupHeader){n=o.getItemBounds(n),n.width=this.width,s.setRect(n);var u=a.getRowStyle(i,d<u),v=u.styleName;if(i.isDataRow){i.setEditable(u.editable,u.readOnly);for(var m=1;m<this._trs;m++)(g=l[r+m])[c.T_IDX]=r+m,g[c.T_ROW]=d,p.Utils.setClassName(g,v)}s.layoutContent(o),p.Utils.setClassName(t,v)}else if(i.isData){for(var g,m=1;m<this._trs;m++)(g=l[r+m])[c.T_IDX]=r+m,g[c.T_ROW]=d;s.clearContent(o,1),i instanceof Ht.MergedGroupFooter&&s.layoutContent(o)}else s.clearContent(o,1)},d.prototype.layoutFixedBar=function(e,t){var n=e.cellLayouts._dataCells,r=this._tbody,i=r.rows[t],s=this.$_prepareFixedBar(e,i),o=e.grid.hoveredCell;o&&o.trow==t&&o.rowIndex==e.fixedItemCount&&e.grid.$_setHoveredCell(null,-1),i[c.T_IDX]=t,i[c.T_ROW]=-99,i.style.display="",p.Utils.setClassName(i,Qt.FixedOptions.ROW_BAR_STYLE),this.$_refreshRowCells(e,null,-1,t,n,1,r),this.$_setFixedBarCellsDisplay(e,this._cells,t);for(var u=0,a=this._cells[t];u<a.length;u++){var f=a[u];f.className="",f.clearExpander(),f.clearButtons()}return s},d.prototype._doRender=function(e){},d.prototype._getCellCount=function(e){return e.cellCount-e.fixedCellCount-e.rightCellCount},d.prototype._getCellWidth=function(e,t){return e.getCellWidth(t)},d.prototype._getTableRowHeight=function(e,t){return e.getTableRowHeight(t,1)},d.prototype._doDrawCell=function(e,t,n){},d.prototype.getCellAt=function(e,t){var n=t.layout,r=e.fixedItemCount,i=e.topIndex,s=t.itemIndex;if((0<r&&s<r||i<=s&&r<=s-i&&s-i<r+e.itemCount)&&(r<=s&&(s-=i),(s=this.$_getTableIndex(e,s))<this._cells.length))for(var o=0;o<this._trs;o++){var u=this._cells[s+o];if(u)for(var a=0;a<u.length;a++){var f=u[a];if(f&&f.layout===n)return f}}return null},d.prototype.getCellView=function(e,t){return t=this.getCellAt(e,t),t&&t.cell},d.prototype.spanRight=function(e,t){!t||(e=(e=this.getCellAt(e,t))&&(e.spanned?e.spanHead:e))&&(t.layout=this._cells[e.trow][e.tcol+e.colSpan-1].layout)},d.prototype.spanHead=function(e,t){!t||(e=(e=this.getCellAt(e,t))&&(e.spanned?e.spanHead:e))&&(t.layout=e.layout)},d.prototype._getFirstCell=function(e){return e._firstCell},d.prototype._getLastCell=function(e){return e._lastCell},d.prototype._getStartCell=function(e){return e.getStartCell()},d.prototype._getEndCell=function(e){return e.getEndCell()},d.prototype.$_removeView=function(e){e=this.removeChildAt(e),e.validate(),this._itemViews.push(e)},d.prototype.$_borrowView=function(e){return this._itemViews.pop()||this.createRowElement()},d.prototype.createRowElement=function(){return new un.RowElement(this.doc)},d.prototype.$_setFixedBarCellsDisplay=function(e,t,n){for(var r=this._getFirstCell(e),i=this._getFirstCell(e)-r,s=this._getLastCell(e)-r,o=t[n],u=Qt.FixedOptions.ROW_BAR_CELL_STYLE,a=i;a<=s;a++){var f=o[a];f.clear(!0),p.Utils.setClassName(f.cell,u)}},d.prototype.$_setRowCellsDisplay=function(e,t,n,r,i,s,o,u){var a=this._getFirstCell(e),f=this._getFirstCell(e)-a,l=this._getLastCell(e)-a,c=t.grid,h=t.fixedItemCount,p=n,d=i.isData,v=i.level;if(d||t.mergedRowGrouped)for(var m=0;m<u;m++)for(var g=(B=r[o+m]).length,y=f;y<=l;y++){var b=(H=B[y]).layout,w=b.getDataColumn(),E=b.parent,S=E&&E.vertical;if(H.merged=!1,H.head=null,H.grouped=!1,!H.spanned)if(b.isProxy){for(var x=void 0,T=o;T<o+u;T++){var N=r[T];if(!N)break;for(var C=0;C<N.length;C++)if(N[C].layout===b.source){x=N[C];break}if(x)break}x?H.span(x):H.clear(!1)}else if(!d&&v<=y+a)H.grouped=!0,H.clear(!0);else{var k=void 0,L=1;w&&w.mergeGrouped&&w.groupLevel<=i.parent.level?L=1:i.isDataRow?void 0===(L=(k=b.spanCallback)?k(c.handler,b,H.item.index):void 0)&&(L=b.getDataSpan()):i instanceof dt.GroupFooter&&(L=1);var A=0;if(1<L){var O,M=0,_=b.vindex+1;if(L--,S)for(;M++<L&&M<u;){if(!(O=E.getVisible(_++)))break;A+=O._dspan,this._cells[o+m+M][y].span(H),this._spanned=!0}else for(;M++<L&&y-f+M<g&&_<E.visibleCount;){if(!(O=E.getVisible(_++)))break;A+=O._cspan,B[y+M].span(H),this._spanned=!0}}var D=b._cspan,P=b._dspan,w=b.merged&&b.merges;(w=w&&i instanceof Ht.MergedGroupFooter&&y>=i.parent.level?null:w)?(H.merged=w.isMerged(s,h),w.isHidden(s,h)?(H.set(D+A,P,!1),H.head=p[y-f]):(k=void 0,k=i.isData?(H.rows=w.getMerged(s,h))*P:w.getMerged2(c,i.index,s-h,P),H.set(D+A,k,!0),p[y-f]=H.head=H)):S?H.set(D,P+A,!0):H.set(D+A,P,!0)}}else for(var H,B=r[o],y=f;y<=l;y++)(H=B[y]).clear(!1),H.merged=!1,H.grouped=!0},d.prototype.$_refreshSpans=function(e,t,n){},d.prototype.$_cleanRowViews=function(e){for(;this.childCount>e;)this.$_removeView(this.childCount-1)},d.prototype.$_cutTailBodyCells=function(e){for(var t=this._cells,n=e;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)r[i].dispose(),r[i]=null;t.length=e},d.prototype.$_cleanTableRows=function(e){for(var t=this._tbody.rows,i=t.length-1;i>=this._cells.length;i--)for(var s=t[i].cells,o=s.length;o--;){for(var u=s[o];1<u.childElementCount;)u.removeChild(u.lastElementChild);u.removeAttribute(n),u.removeAttribute(r)}for(i=t.length-1;e<=i;i--){var a=t[i];a[c.T_IDX]=-1,a.style.display="none"}},d.prototype.$_resetHeights=function(e,t){var n=this._tbody.children,r=0;if(0<e.length){for(var i=1;i<e.length;i++)n[r++].style.height=e[i]-e[i-1]+"px";r++}for(i=1;i<t.length;i++)n[r++].style.height=t[i]-t[i-1]+"px"},d.prototype.$_resetCellStyleHeights=function(e,t){var n=this._tbody.children,r=0;if(0<e.length){for(var i=1;i<e.length;i++)for(var s=e[i]-e[i-1],o=n[r++].cells,u=0;u<o.length;u++)o[u].style.height=s+"px";r++}for(i=1;i<t.length;i++)for(s=t[i]-t[i-1],o=n[r++].cells,u=0;u<o.length;u++)o[u].style.height=s+"px"},d.prototype.$_resetCellHeights2=function(e,t){for(var n=e.grid.body.buttonHeight,r=0,i=this._cells.length;r<i;r++)for(var s=this._cells[r],o=(s.length,0),u=s.length;o<u;o++){var a=s[o],f=a.height,l=e.getTableRowHeightFixed(a.trow,a.rowSpan);f!=l&&(a.height=l,(0<a.buttonWidth||0<a.editWidth)&&a.buttons&&(a.buttons.style.top=Math.floor((l-n)/2)+"px")),t&&!a.heighted&&(a.cell.firstElementChild.style.maxHeight=a.height-1+"px",p.Utils.ieTen&&(a.cell.firstElementChild.style.maxHeight=a.height-1+"px"))}},d.prototype.$_focusChanged=function(e,t,n){this.$_cellStateChanged(e,t,"focused",n)},d.prototype.$_mouseEnteredChanged=function(e,t,n){var r;t.merged&&t.contains(e.focusedIndex)&&(r=t.trow+(e.focusedRow-t.item.index)*e.layoutManager.trs,this._cells[r]&&(t=this._cells[r][t.tcol])),this.$_cellStateChanged(e,t,"mouseEntered",n)},d.prototype.$_cellStateChanged=function(e,t,n,r){var i,s,o,u,a,f=t&&t.item;t&&r!=t[n]&&f.isDataRow&&(i=this.getRowView(t.item))instanceof un.ItemElement&&(s=this.model,o=t.dataColumn,t[n]=r,o&&t.item.isDataRow&&(u=s.getCellAt(t.item,o,!1),i.$_setButtons(e,t,t.cell.firstElementChild),t.merged&&t.head&&(a=t.head,f=e.layoutManager,r=this.getCellRect(f,t,!1),f=this.getCellRect(f,t,!0),a=a.renderer2,t.focused?(f=r.top-f.top+r.height/2-f.height/2,a.moveClickElement(f,t.item.index)):t.mouseEntered||a.moveClickElement(0,-1)),i instanceof un.RowElement&&t.renderer2&&"focused"===n&&t.renderer2.refreshFocusChanged&&i.cellRefresh(e,s,u,o,t)))},d.prototype.$_buttonZIndexChanged=function(e,t,n){var r=t&&t.item;r&&r.isDataRow&&(r=this.getRowView(r))instanceof un.ItemElement&&t.dataColumn&&r.$_setButtonZIndex(e,t,n)},d.prototype.$_rendererChanged=function(e){for(var t=this._cells,n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)r[i].layout===e&&(r[i].rendererChanged=!0)},d);t.GridBodyElement=h;var v,i=(v=h,l.__extends(m,v),_dp(m,"fixed",{get:function(){return!0}}),m.prototype._getCssSelector=function(){return"rg-fixed-body"},m.prototype._getExplicitWidth=function(e){return e.fixedWidth-e.fixedBarWidth},m.prototype._getFirstCell=function(e){return this._getStartCell(e)},m.prototype._getLastCell=function(e){return this._getEndCell(e)},m.prototype._getStartCell=function(e){return 0},m.prototype._getEndCell=function(e){return e.fixedCellCount-1},m.prototype._getCellCount=function(e){return e.fixedCellCount},m.prototype._getCellWidth=function(e,t){return e.getFixedCellWidth(t)},m.prototype.createRowElement=function(){return new un.FixedRowElement(this.doc)},m);t.FixedBodyElement=i;var g,h=(g=h,l.__extends(y,g),_dp(y,"rightFixed",{get:function(){return!0}}),y.prototype._getCssSelector=function(){return"rg-fixed-body"},y.prototype._getFirstCell=function(e){return this._getStartCell(e)},y.prototype._getLastCell=function(e){return this._getEndCell(e)},y.prototype._getStartCell=function(e){return e.cellCount-e.rightCellCount},y.prototype._getEndCell=function(e){return e.cellCount-1},y.prototype.createRowElement=function(){return new un.RightRowElement(this.doc)},y.prototype._getCellCount=function(e){return e.rightCellCount},y.prototype._getCellWidth=function(e,t){return e.getRightCellWidth(t)},y);t.RightBodyElement=h});t(fn),fn.TableCell,fn.BodyTableCell,fn.GridBodyElement,fn.FixedBodyElement,fn.RightBodyElement;var ln=n(function(e,t){function i(e){var t=n.call(this,e)||this;return t.check=null,t.sort=null,t.filter=null,t.popup=null,t.textSpan=null,t.rendererClass="",t.html=void 0,t.showTooltip=!0,t.tooltip="",t.sortWidth=0,t.filterWidth=0,t.checkWidth=0,t.popupWidth=0,t.marginLeft=0,t.marginRight=0,t.marginTop=0,t.marginBottom=0,t.edgeMarker=null,t.textSpan=e.firstElementChild.firstElementChild,t}function u(e,t){return t=s.call(this,e,t,"headerView")||this,t._rowPoints=[],t._cells=[],t._heights=[],t}function h(){return null!==a&&a.apply(this,arguments)||this}function v(){return null!==d&&d.apply(this,arguments)||this}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=fn.TableCell,l.__extends(i,n),i.prototype.dispose=function(){n.prototype.dispose.call(this),this.textSpan=this.cell=this.check=this.sort=this.filter=null,this.layout=null},i.prototype.span=function(){this.spanned=!0,this.clear(!1)},i.prototype.clear=function(e){n.prototype.clear.call(this,e);var t=this.cell.firstElementChild,r=this.textSpan,e=t.style;return 0<this.checkWidth&&(t.removeChild(this.check),this.check=null,this.checkWidth=0),0<this.filterWidth&&(t.removeChild(this.filter),this.filter=null,this.filterWidth=0),0<this.sortWidth&&(t.removeChild(this.sort),this.sort=null,this.sortWidth=0),0<this.popupWidth&&(t.removeChild(this.popup),this.popup=null,this.popupWidth=0),this.className&&(this.cell.className=this.className=""),this.rendererClass&&(t.className=this.rendererClass=""),0!=this.marginLeft&&(e.marginLeft="",this.marginLeft=0),0!=this.marginRight&&(e.marginRight="",this.marginRight=0),0!=this.marginTop&&(e.marginTop="",this.marginTop=0),0!=this.marginBottom&&(e.marginBottom="",this.marginBottom=0),this.text&&(r[p.Utils.TextProp]=this.text=""),this.html&&(r.innerHTML=this.html=""),this},i.prototype.setText=function(e,t){t!=this.text&&(e[p.Utils.TextProp]=this.text=t)},i.prototype.setHtml=function(e,t){t!=this.html&&(e.innerHTML=this.html=t)},i.prototype.setClassName=function(e){return e!=this.className&&(this.cell.className=this.className=e,!0)},i.prototype.setRendererClassName=function(e,t){t!=this.rendererClass&&(e.className=this.rendererClass=t)},i.prototype.setDivMarigns=function(e,t,n,r,i){t!=this.marginLeft&&(e.marginLeft=t?t+"px":"",this.marginLeft=t),n!=this.marginRight&&(e.marginRight=n?n+"px":"",this.marginRight=n),r!=this.marginTop&&(e.marginTop=r?r+"px":"",this.marginTop=r),i!=this.marginBottom&&(e.marginBottom=i?i+"px":"",this.marginBottom=i)},i.prototype.getIndex=function(e){return e.set(-1,this.layout.firstColumn)},i.prototype.isClickableElt=function(e){return e===this.filter||e===this.popup||e===this.check},i);t.HeaderTableCell=r;var s,o=(s=rn.SimpleTableElement,l.__extends(u,s),u.renderCell=function(e,t){t[p.Utils.TextProp]=e.text||""},u.prototype._doDispose=function(){for(var e=0;e<this._cells.length;e++)for(var t=this._cells[e],n=0;n<t.length;n++)t[n].dispose(),t[n]=null;this._cells=null,s.prototype._doDispose.call(this)},u.prototype.tableCellByCell=function(e){for(var t=0;t<this._cells.length;t++)for(var n=this._cells[t],r=0;r<n.length;r++){var i=n[r];if(i&&i.cell===e)return i}},u.prototype.tableCellByLayout=function(e){for(var t=0;t<this._cells.length;t++)for(var n=this._cells[t],r=0;r<n.length;r++)if(n[r].layout===e)return n[r]},u.prototype.tableCellByLayout2=function(e,t){var n=this._cells,r=n.length;if(!(r<1)){for(var i=n[0].length,s=this._getFirstCell(e),o=this._getStartCell(e)-s,u=this._getEndCell(e)-s,a=o;a<=u;a++)for(var f=0;f<r;f++)if(n[f][a].layout===t)return n[f][a];for(a=o-1;0<=a;a--)for(f=0;f<r;f++)if(n[f][a].layout===t)return n[f][a];for(a=1+u;a<i;a++)for(f=0;f<r;f++)if(n[f][a].layout===t)return n[f][a]}},u.prototype.layoutByCell=function(e){return e=this.tableCellByCell(e),e&&e.layout},u.prototype.columnByCell=function(e){return e=this.layoutByCell(e),e&&e._columnObj},u.prototype.getSpanRoot=function(e){for(var t=0;t<this._cells.length;t++)for(var n=this._cells[t],r=0;r<n.length;r++){var i=n[r];if(i.layout===e){if(i.spanned)if(i.layout.parent.vertical){for(var s=t-1;0<=s;s--)if(!this._cells[s][r].spanned)return this._cells[s][r].layout}else for(s=r-1;0<=s;s--)if(!n[s].spanned)return n[s].layout;return e}}},u.prototype.refresh=function(e){for(var t=e.focusedColumn,n=e.layoutManager,e=this._getFirstCell(n),r=this._getLastCell(n)-e+1,i=0;i<this._cells.length;i++)for(var s=this._cells[i],o=0;o<r;o++){var u=s[o],a=u.layout;u.visible&&a instanceof Ft.CellLayoutColumnItem&&((u=u.cell)[c.T_FOC]=a.isColumn(t),p.Utils.setClassName(u,this.$_getCellSelector(a,u)))}},u.prototype.getRowAt=function(e){for(var t=1;t<this._rowPoints.length-1;t++)if(e<this._rowPoints[t])return t-1;return this._rowPoints.length-2},u.prototype.getLayoutHeight=function(e,t,n){var r,e=e instanceof Ft.CellLayoutGroupItem?(r=e.hrow,n?e.hlen:e.hspan):(r=e.hrow,n?t.rowSpan:e.hspan);return this._rowPoints[r+e]-this._rowPoints[r]},u.prototype.getLayoutPos=function(e){return this._rowPoints[e.hrow]},u.prototype._getCssSelector=function(){return"rg-header"},u.prototype._isFixedHeight=function(){return this._fixedHeight},u.prototype._getMinRowHeight=function(e){return this._minRowHeight},u.prototype._prepareCellContent=function(e,t){var n=p.getDoc(e),e=n.createElement("div"),n=n.createElement("span");return e.appendChild(n),e},u.prototype._doMeasure=function(e,t,n){var r=this.model,i=e.layoutManager.headerRows,s=r.height,o=r.heights,u=this._heights=[];if(this._minRowHeight=r.minRowHeight,o&&0<o.length){for(var a=0,f=0;f<i;f++)a+=u[f]=Math.max(o[f]||this._minRowHeight,this._minRowHeight);s=a}return s=s<=0?Math.max(this._minRowHeight,e.heightMeasurer.headerHeight)*i:Math.max(this._minRowHeight*i,s),this._fixedHeight=0<=s,s=Math.max(this._minRowHeight*i,r.minHeight,s),tn.Size.create(t,s)},u.prototype._doPrepareTableExtents=function(e){this.model;var t=this._rowPoints,n=this.height,r=this._heights,i=Math.floor(n/e.headerRows);if(t.length=this._getTableRowCount(e)+1,(t[0]=0)<t.length){for(var s=1;s<t.length-1;s++)t[s]=t[s-1]+(r[s-1]||i);t[s]=n}},u.prototype._doLayoutContent=function(e){var t=e.grid,n=t.focusedColumn,r=this.model,i=e.cellLayouts._headerCells,s=i.length,o=this._getFirstCell(e),u=this._getStartCell(e)-o,a=this._getEndCell(e)-o;this.$_refreshCells(e,i,this._tbody),this.$_refreshSpans(e,s);for(var f=0;f<s;f++)for(var l=this._cells[f],h=u;h<=a;h++){var p,d,v,m=l[h];!m.visible&&h!==u||(p=void 0,m.layout.isProxy?(p=m.layout.source,m=this.tableCellByLayout(p)):p=m.layout,(d=m.cell)[c.T_FOC]=p.isColumn(n),m.setClassName(this.$_getCellSelector(p,d)),p.isNull?m.setText(m.textSpan,p.header.getDisplayText()):p instanceof Ft.CellLayoutGroupItem?(v=r.getCell(p),this._updateGroupCell(t,r,v,m)):(v=r.getCell(p),this._updateCell(t,r,v,m)))}},u.prototype._doRender=function(e){},u.prototype._getTableRowCount=function(e){return e.headerRows},u.prototype._getTableRowHeight=function(e,t){return this._rowPoints[t+1]-this._rowPoints[t]},u.prototype.$_getCellHeight=function(e){var t=e.layout.hrow,n=this._rowPoints[t];return this._rowPoints[t+e.rowSpan]-n},u.prototype._getCellCount=function(e){return e.cellCount-e.fixedCellCount-e.rightCellCount},u.prototype._getCellWidth=function(e,t){return e.getCellWidth(t)},u.prototype._getCellWidth2=function(e,t,n){return e.getCellWidth2(t,n)},u.prototype._doDrawCell=function(e,t,n){},u.prototype._doPrepareTableRow=function(e,t,n,r){s.prototype._doPrepareTableRow.call(this,e,t,n,r),n=this.model,p.Utils.setClassName(r,n.getStyleName())},u.prototype.$_getCellSelector=function(e,t){var n="",r=e.header.styleName;return e instanceof Ft.CellLayoutGroupItem?(n="rg-header-group-cell",r&&(n+=" "+r)):(n="rg-header-cell",t[c.T_FOC]?n+=" rg-header-focus":this.grid.isSelectedLayout(e)&&(n+=" rg-header-select"),e=e.firstColumn,(r=r||e&&e.header.styleName)&&(n+=" "+r)),n},u.prototype._getFirstCell=function(e){return e._firstCell},u.prototype._getLastCell=function(e){return e._lastCell},u.prototype._getStartCell=function(e){return e.getStartCell()},u.prototype._getEndCell=function(e){return e.getEndCell()},u.prototype.$_refreshCells=function(e,t,n){for(var i=this._cells,s=n.children,o=s.length,u=this._getFirstCell(e),a=this._getLastCell(e)-u+1,f=i.length;f<o;f++)i.push([]);for(var l=0;l<o;l++){for(var c=i[l],h=s[l].children,p=t[l],d=0;d<a;d++){var v=h[d],m=p[d+u],g=c[d];g?g.cell!==v||g.layout!=m&&(g.layout=m,g.clear(!0)):(g=c[d]=new r(h[d])).layout=m,g.height=this.$_getCellHeight(g),g.width=this._getCellWidth(e,d),g.spanned=!1}for(d=a;d<c.length;d++)c[d].dispose();c.length=a}for(l=o;l<i.length;l++)for(var y=i[l],d=0;d<y.length;d++)y[d].dispose(),y[d]=null;i.length=o},u.prototype.$_refreshSpans=function(e,t){for(var n=this._getFirstCell(e),r=this._getFirstCell(e)-n,i=this._getLastCell(e)-n,s=0;s<t;s++)for(var o=this._cells[s],u=o.length,a=r;a<=i;a++){var f=o[a],l=f.layout,c=l.parent,h=c&&c.vertical;if(!f.spanned)if(l.isProxy)f.clear(!1);else{var p=0,d=l.getHeaderSpan()-1;if(0<d){var v=0,m=l.vindex+1;if(h)for(;v++<d&&v<t;)p+=c.getVisible(m++)._hspan,this._cells[s+v][a].span();else for(;v++<d&&a-r+v<u&&m<c.visibleCount;)p+=c.getVisible(m++)._cspan,o[a+v].span()}(l instanceof Ft.CellLayoutGroupItem||l.isNull)&&f.clear(!0),h?f.set(l._cspan,l._hspan+p,!0):f.set(l._cspan+p,l._hspan,!0),f.width=this._getCellWidth2(e,a,f.colSpan)}}},u.prototype._updateCell=function(e,t,n,r){var i=e.doc,s=e.sortingOptions,o=e.filteringOptions,a=r.layout.firstColumn,f=n.checkLocation,l=f&&f!=c.ColumnHeaderItemLocation.NONE?t.checkWidth:0,h=0<l?t.checkWidth:0,d=a&&this.$_canSortHandleVisible(s,a),v=a&&a.sortDirection||c.SortDirection.NONE,m=d?t.sortWidth:0,g=a&&this.$_canFilterHandleVisible(o,a)?t.filterWidth:0,y=a&&this.$_canPopupHandleVisible(t,a)?t.popupWidth:0,b=r.cell.firstElementChild,e=r.textSpan,w=r.width,E=this.$_getCellHeight(r),S=0,x=0,T=0,N=0,C=b.style;r.setRendererClassName(b,u.RENDERER_STYLE),C.maxHeight=Math.max(E-1,0)+"px";var k=r.check;if(0<l){var L=e.style;k?C=k.style:(k=i.createElement("input"),(r.check=k).type="checkbox",k.className="rg-header-check",(C=k.style).position="absolute",C.display="inline-block",C.verticalAlign="middle"),r.checkWidth<=0&&(b.appendChild(k),r.checkWidth=l),k.checked=a.checked;var A=-1,O=-1;switch(L.removeProperty("display"),f){case c.ColumnHeaderItemLocation.LEFT:case c.ColumnHeaderItemLocation.LEFT_EDGE:b.insertBefore(k,r.textSpan),f===c.ColumnHeaderItemLocation.LEFT?(C.position="relative",C.removeProperty("left"),C.removeProperty("top")):(C.position="absolute",S+=l,A=0,O=Math.floor((E-t.checkHeight)/2));break;case c.ColumnHeaderItemLocation.RIGHT:case c.ColumnHeaderItemLocation.RIGHT_EDGE:b.insertBefore(r.textSpan,k),f===c.ColumnHeaderItemLocation.RIGHT?(C.position="relative",C.removeProperty("left"),C.removeProperty("top")):(C.position="absolute",x+=l,A=w-l,O=Math.floor((E-t.checkHeight)/2));break;case"top":case"topEdge":b.insertBefore(k,r.textSpan),f===c.ColumnHeaderItemLocation.TOP?(L.display="block",C.position="relative",C.removeProperty("left"),C.removeProperty("top")):(C.position="absolute",T+=h,A=Math.floor((w-m-g-t.checkWidth)/2),O=0);break;case"bottom":case"bottomEdge":b.insertBefore(r.textSpan,k),f===c.ColumnHeaderItemLocation.BOTTOM?(L.display="block",C.position="relative",C.removeProperty("left"),C.removeProperty("top")):(C.position="absolute",N+=h,A=Math.floor((w-m-g-t.checkWidth)/2),O=E-t.checkHeight)}-1<A&&(C.left=A+"px"),-1<O&&(C.top=O+"px")}else 0<r.checkWidth&&(b.removeChild(k),r.checkWidth=0);o=r.filter,0<g?(o?C=o.style:(o=i.createElement("span"),(C=(r.filter=o).style).position="absolute",C.display="inline-block"),r.filterWidth<=0&&(b.appendChild(o),r.filterWidth=g),o.className="rg-header-filtering"+(a.isFiltered()?" filter-activated":""),C.left=w-(x+=g)+"px",C.top=Math.floor((E-t.filterHeight)/2)+"px",C.width=g+"px",C.height=t.filterWidth+"px"):0<r.filterWidth&&(b.removeChild(o),r.filterWidth=0);var M=r.sort;if(d){switch(M?C=M.style:(M=i.createElement("span"),(C=(r.sort=M).style).position="absolute",C.display="inline-block"),r.sortWidth<=0&&(b.appendChild(M),r.sortWidth=m),v){case c.SortDirection.DESCENDING:M.className="rg-header-sort-descending";break;case c.SortDirection.ASCENDING:M.className="rg-header-sort-ascending";break;default:M.className="rg-header-sort-none"}C.left=w-(x+=m)+"px",C.width=m+"px",s.showSortOrder&&0<=a.sortOrder?(M[p.Utils.TextProp]=(a.sortOrder+1).toString(),C.top=Math.max(0,Math.floor((E-t.sortHeight-10)/2))+"px",C.height=Math.min(r.height,t.sortHeight+10)+"px",C.backgroundPositionY=p.Utils.isIE?"5px":"70%",C.lineHeight=p.Utils.isIE?"1.5em":"1em"):(M[p.Utils.TextProp]="",C.backgroundPositionY="center",C.top=Math.floor((E-t.sortHeight)/2)+"px",C.height=t.sortHeight+"px")}else 0<r.sortWidth&&(b.removeChild(M),r.sortWidth=0);a=r.popup,0<y?(a?C=a.style:(a=i.createElement("span"),(C=(r.popup=a).style).position="absolute",C.display="inline-block"),r.popupWidth<=0&&(b.appendChild(a),r.popupWidth=y),a.className="rg-header-popup",C.left=w-(x+=y)+"px",C.top=Math.floor((E-t.popupHeight)/2)+"px",C.width=y+"px",C.height=t.popupWidth+"px"):0<r.popupWidth&&(b.removeChild(a),r.popupWidth=0),C=b.style,r.showTooltip=n.showTooltip,r.tooltip=n.tooltip,r.setDivMarigns(C,S,x,T,N),a=n.template,a?r.setHtml(e,a):r.setText(e,n.text||""),fn.TableCell.addEdgeMark(n.edgeMark,r,i)},u.prototype._updateGroupCell=function(e,t,n,r){var i=e.doc,s=r.cell.firstElementChild,o=r.textSpan,e=this.$_getCellHeight(r),s=s.style;s.maxHeight=Math.max(e-1,0)+"px",r.showTooltip=n.showTooltip,r.tooltip=n.tooltip,r.setDivMarigns(s,0,0,0,0),s=n.template,s?r.setHtml(o,s):r.setText(o,n.text||""),fn.TableCell.addEdgeMark(n.edgeMark,r,i)},u.prototype.$_canPopupHandleVisible=function(e,t){if(null==t.header.popupMenuName)return!1;switch(e.showPopupMenu){case c.HandleVisibility.VISIBLE:return!0;case c.HandleVisibility.HOVERED:return this.hovered;case c.HandleVisibility.ALWAYS:return!0;case c.HandleVisibility.HIDDEN:return!1}},u.prototype.$_canFilterHandleVisible=function(e,t){return t=e.enabled&&t.hasFilters&&t.filterable,t=t&&e.handleVisibility===c.HandleVisibility.HIDDEN?!1:t},u.prototype.$_canSortHandleVisible=function(e,t){switch(e.handleVisibility){case c.HandleVisibility.VISIBLE:return 0<=t.sortOrder;case c.HandleVisibility.HOVERED:return this.hovered&&0<=t.sortOrder;case c.HandleVisibility.ALWAYS:return!0;case c.HandleVisibility.HIDDEN:return!1}return 0<=t.sortOrder},u.prototype.$_canCheckHandleVisible=function(e,t){return!1},u.prototype.$_checkHeight=function(){return this._table.offsetHeight!=this._rowPoints[this._rowPoints.length-1]},u.prototype.$_getHeights=function(e){var t=this._tbody.rows;if(0==e.length)for(var n=0,r=this._rowPoints.length-1;n<r;n++)e[n]=0;for(n=0;n<e.length;n++)e[n]=Math.max(e[n],t[n]?t[n].offsetHeight:0)},u.prototype.$_adjustHeights=function(e){for(var t=this._tbody.rows,n=this._rowPoints,r=n[0]=0,i=n.length-1;r<i;r++)t[r].style.height=e[r]+"px",n[r+1]=n[r]+e[r];return n[n.length-1]},u.prototype.$_distributeHeights=function(e,t){for(var n=t.length,r=0,i=0;i<n;i++)r+=t[i];if(r<e){for(var s=this._tbody.rows,o=e-r,u=o,i=0;i<n-1;i++){var a=Math.floor(o*t[i]/r);t[i]+=a,s[i].style.height=t[i]+"px",u-=a}t[i]+=u,s[i]&&(s[i].style.height=t[i]+"px")}},u.RENDERER_STYLE="rg-header-renderer",u);t.HeaderElement=o;var a,f=(a=o,l.__extends(h,a),h.prototype._getExplicitWidth=function(e){return e.fixedWidth-e.fixedBarWidth},h.prototype._getFirstCell=function(e){return this._getStartCell(e)},h.prototype._getLastCell=function(e){return this._getEndCell(e)},h.prototype._getStartCell=function(e){return 0},h.prototype._getEndCell=function(e){return e.fixedCellCount-1},h.prototype._getCellCount=function(e){return e.fixedCellCount},h.prototype._getCellWidth=function(e,t){return e.getFixedCellWidth(t)},h.prototype._getCellWidth2=function(e,t,n){return e.getFixedCellWidth2(t,n)},h.prototype.tableCellByLayout2=function(e,t){return this.tableCellByLayout(t)},h);t.FixedHeaderElement=f;var d,o=(d=o,l.__extends(v,d),v.prototype._getFirstCell=function(e){return this._getStartCell(e)},v.prototype._getLastCell=function(e){return this._getEndCell(e)},v.prototype._getStartCell=function(e){return e.cellCount-e.rightCellCount},v.prototype._getEndCell=function(e){return e.cellCount-1},v.prototype._getCellCount=function(e){return e.cellCount-1},v.prototype._getCellWidth=function(e,t){return e.getRightCellWidth(t)},v.prototype._getCellWidth2=function(e,t,n){return e.getRightCellWidth2(t,n)},v.prototype.tableCellByLayout2=function(e,t){return this.tableCellByLayout(t)},v);t.RightHeaderElement=o});t(ln),ln.HeaderTableCell,ln.HeaderElement,ln.FixedHeaderElement,ln.RightHeaderElement;var cn=n(function(e,t){function i(e){var t=n.call(this)||this;return t._zoom=NaN,t._refreshMode=c.RefreshMode.ALL,t._leftPos=0,t._rightFixed=!0,t._footerCount=0,t._headerSummaryCount=0,t._layoutCount=0,t._fixedLayoutCount=0,t._rightLayoutCount=0,t._firstLayout=0,t._lastLayout=0,t._layoutsLength=0,t._layouts=[],t._layoutPoints=[],t._fixedLayoutPoints=[],t._rightLayoutPoints=[],t._cellCount=0,t._fixedCellCount=0,t._rightCellCount=0,t._firstCell=0,t._lastCell=0,t._startCell=0,t._endCell=0,t._cellCounts=[],t._fixedCellCounts=[],t._rightCellCounts=[],t._cellPoints=[],t._fixedCellPoints=[],t._rightCellPoints=[],t._trs=1,t._rowGrouped=!1,t._items=[],t._topIndex=0,t._itemCount=0,t._fixedItemCount=0,t._fullItemCount=0,t._fixedItemPoints=[],t._itemPoints=[],t._fixedTableRowCount=0,t._tableRowCount=0,t._fixedTableRowPoints=[],t._tableRowPoints=[],t._fixedTableItemPoints=[],t._tableItemPoints=[],t._fixedDataHeight=0,t._dataRowHeights=[],t._dataHeight=0,t._fixedBarWidth=0,t._rightBarWidth=0,t._fixedBarHeight=0,t._columnMerged=!1,t._fixedColumnMerged=!1,t._rightColumnMerged=!1,t._itemsBounds=0,t._fixedWidth=0,t._rightWidth=0,t._fixedHeight=0,t._autoRowHeights=!1,t._minRowHeight=en.DisplayOptions.MIN_TABLE_ROW_HEIGHT,t._minItemHeight=en.DisplayOptions.MIN_TABLE_ROW_HEIGHT,t._maxHeight=en.DisplayOptions.MIN_TABLE_ROW_HEIGHT,t._itemHeight=0,t._hscrolled=!1,t._vscrolled=!1,t._hscrollBar=!1,t._vscrollBar=!1,t._scrollBarWidth=0,t._scrollBarHeight=0,t._scrollWidth=0,t._fitStyle=void 0,t._fitStyleChanged=!1,t._grid=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.prototype._doDispose=function(){this._grid=null,this._rs=null,n.prototype._doDispose.call(this)},_dp(i,"zoomed",{get:function(){return!isNaN(this._zoom)&&1!=this._zoom}}),_dp(i,"grid",{get:function(){return this._grid}}),_dp(i,"footerCount",{get:function(){return this._footerCount}}),_dp(i,"headerSummaryCount",{get:function(){return this._headerSummaryCount}}),_dp(i,"vscrollBar",{get:function(){return this._vscrollBar}}),_dp(i,"hscrollBar",{get:function(){return this._hscrollBar}}),_dp(i,"scrollBarWidth",{get:function(){return this._scrollBarWidth}}),_dp(i,"scrollBarHeight",{get:function(){return this._scrollBarHeight}}),_dp(i,"dataBounds",{get:function(){return this._dataBounds}}),_dp(i,"bodyBounds",{get:function(){return this._bodyBounds}}),_dp(i,"fixedBodyBounds",{get:function(){return this._fixedBodyBounds}}),_dp(i,"gridBounds",{get:function(){return this._gridBounds}}),_dp(i,"headerBounds",{get:function(){return this._headerBounds}}),_dp(i,"summaryBounds",{get:function(){return this._summaryBounds}}),_dp(i,"footerBounds",{get:function(){return this._footerBounds}}),_dp(i,"topContentBounds",{get:function(){return this._topContentBounds}}),_dp(i,"leftContentBounds",{get:function(){return this._leftContentBounds}}),_dp(i,"rowBarBounds",{get:function(){return this._rowBarBounds}}),_dp(i,"sideContentBounds",{get:function(){return this._sideContentBounds}}),_dp(i,"contentBounds",{get:function(){return this._contentBounds}}),_dp(i,"fixedContentBounds",{get:function(){return this._fixedContentBounds}}),_dp(i,"nonFixedBounds",{get:function(){return this._nonFixedBounds}}),_dp(i,"rightContentBounds",{get:function(){return this._rightContentBounds}}),_dp(i,"headBounds",{get:function(){return this._headBounds}}),_dp(i,"sumBounds",{get:function(){return this._sumBounds}}),_dp(i,"footBounds",{get:function(){return this._footBounds}}),_dp(i,"fixedWidth",{get:function(){return this._fixedWidth}}),_dp(i,"rightWidth",{get:function(){return this._rightWidth}}),_dp(i,"defaultItemHeight",{get:function(){return this._itemHeight}}),_dp(i,"topIndex",{get:function(){return this._topIndex}}),_dp(i,"itemCount",{get:function(){return this._itemCount}}),_dp(i,"fixedItemCount",{get:function(){return this._fixedItemCount}}),_dp(i,"fullItemCount",{get:function(){return this._fullItemCount}}),_dp(i,"fixedTableRowCount",{get:function(){return this._fixedTableRowCount}}),_dp(i,"tableRowCount",{get:function(){return this._tableRowCount}}),_dp(i,"trs",{get:function(){return this._cellLayouts.dataRows}}),_dp(i,"leftPos",{get:function(){return this._leftPos}}),_dp(i,"cellLayouts",{get:function(){return this._cellLayouts}}),_dp(i,"layoutCount",{get:function(){return this._layoutCount}}),_dp(i,"fixedLayoutCount",{get:function(){return this._fixedLayoutCount}}),_dp(i,"rightLayoutCount",{get:function(){return this._rightLayoutCount}}),_dp(i,"firstLayout",{get:function(){return this._firstLayout}}),_dp(i,"lastLayout",{get:function(){return this._lastLayout}}),_dp(i,"rightFirstLayout",{get:function(){return this._layoutCount-this._rightLayoutCount}}),_dp(i,"layoutsLength",{get:function(){return this._layoutsLength}}),_dp(i,"cellCount",{get:function(){return this._cellCount}}),_dp(i,"fixedCellCount",{get:function(){return this._fixedCellCount}}),_dp(i,"rightCellCount",{get:function(){return this._rightCellCount}}),_dp(i,"firstCell",{get:function(){return this._firstCell}}),_dp(i,"lastCell",{get:function(){return this._lastCell}}),_dp(i,"startCell",{get:function(){return this._startCell}}),_dp(i,"endCell",{get:function(){return this._endCell}}),_dp(i,"isColumnFitted",{get:function(){return!!this._fitStyle}}),_dp(i,"scrollWidth",{get:function(){return this._scrollWidth}}),_dp(i,"fixedBarWidth",{get:function(){return this._fixedBarWidth}}),_dp(i,"rightBarWidth",{get:function(){return this._rightBarWidth}}),_dp(i,"fixedHeight",{get:function(){return this._fixedHeight}}),_dp(i,"fixedBarHeight",{get:function(){return this._fixedBarHeight}}),_dp(i,"rowGrouped",{get:function(){return!1}}),_dp(i,"mergedRowGrouped",{get:function(){return!1}}),_dp(i,"rowGroupFields",{get:function(){return null}}),_dp(i,"rowGroupLevels",{get:function(){return 0}}),_dp(i,"columnMerged",{get:function(){return this._columnMerged}}),_dp(i,"fixedColumnMerged",{get:function(){return this._fixedColumnMerged}}),_dp(i,"rightColumnMerged",{get:function(){return this._rightColumnMerged}}),_dp(i,"clientRect",{get:function(){return this._clientRect}}),_dp(i,"headerRows",{get:function(){return this._cellLayouts.headerRows}}),_dp(i,"headerSummaryRows",{get:function(){return this._cellLayouts.dataRows}}),_dp(i,"footerRows",{get:function(){return this._cellLayouts.dataRows}}),_dp(i,"topPanelVisible",{get:function(){return!1}}),_dp(i,"minRowHeight",{get:function(){return this._minRowHeight}}),_dp(i,"minItemHeight",{get:function(){return this._minItemHeight}}),_dp(i,"fitStyle",{get:function(){return this._fitStyle}}),_dp(i,"fitStyleChanged",{get:function(){return this._fitStyleChanged}}),i.prototype.requestZoom=function(){this._zoom=NaN,(p.Utils.isChromium||p.Utils.isSafari)&&this.grid.clearRowHeights(!0)},i.prototype.getStartCell=function(){return this._refreshMode==c.RefreshMode.VISIBLE_ONLY?this._startCell:this._firstCell},i.prototype.getEndCell=function(){return this._refreshMode==c.RefreshMode.VISIBLE_ONLY?this._endCell:this._lastCell},i.prototype.getLayout=function(e){return this._layouts[e]},i.prototype.getLayoutBounds=function(e){return new h.Rectangle(this._layoutPoints[e],0,this._layoutPoints[e+1]-this._layoutPoints[e],0)},i.prototype.getLayoutWidth=function(e){return this._layoutPoints[e+1]-this._layoutPoints[e]},i.prototype.getPositionToVIndex=function(e){for(var t=this._layoutPoints,n=0;n<t.length-1;n++)if(e>=t[n]&&e<t[n+1])return n;return-1},i.prototype.getFixedLayoutWidth=function(e){return this._fixedLayoutPoints[e+1]-this._fixedLayoutPoints[e]},i.prototype.getRightLayoutWidth=function(e){return this._rightLayoutPoints[e+1]-this._rightLayoutPoints[e]},i.prototype.getCellIndex=function(e){for(var t=this._cellPoints,n=0;n<t.length-1;n++)if(e>=t[n]&&e<t[n+1])return n;return-1},i.prototype.getHorzColumnIndex=function(e){for(var t=e,n=0;t;)n+=!t.group||t.group.horizontal?t.vindex:0,t=t.group;return n},i.prototype.getLeftCell=function(){return this.getCellIndex(this._leftPos)},i.prototype.getCellPoint=function(e){return this._cellPoints[e]},i.prototype.getCellWidth=function(e){return this._cellPoints[e+1]-this._cellPoints[e]},i.prototype.getCellWidth2=function(e,t){var n=this._cellPoints;return n[Math.min(n.length-1,e+t)]-n[e]},i.prototype.getFixedCellPoint=function(e){return this._fixedCellPoints[e]},i.prototype.getFixedCellWidth=function(e){return this._fixedCellPoints[e+1]-this._fixedCellPoints[e]},i.prototype.getFixedCellWidth2=function(e,t){var n=this._fixedCellPoints;return n[Math.min(n.length-1,e+t)]-n[e]},i.prototype.getRightCellPoint=function(e){return this._rightCellPoints[e]},i.prototype.getRightCellWidth=function(e){return this._rightCellPoints[e+1]-this._rightCellPoints[e]},i.prototype.getRightCellWidth2=function(e,t){var n=this._rightCellPoints;return n[Math.min(n.length-1,e+t)]-n[e]},i.prototype.$_getItems=function(){return this._items},i.prototype.getItem=function(e){return this._items[e]},i.prototype.getDataRowHeights=function(e){var t=this.grid.displayOptions,n=[],r=t.dataHeights;if(r&&0<r.length)for(var i=0;i<e;i++){var s=Math.floor(Math.max(t.minTableRowHeight,r[i]||t.minTableRowHeight));n.push(s)}return n.slice()},i.prototype._calcDefaultRowHeight=function(e){var t=this.grid.displayOptions.rowHeight,n=this._dataRowHeights=this.getDataRowHeights(this._trs);return(t=n&&0<n.length?n.reduce(function(e,t){return e+t},0):t)<=0&&(t=e.heightMeasurer.rowHeight*this._trs),0<n.length&&0<this._maxHeight&&(t>this._maxHeight||t<this._minItemHeight)&&(this._dataRowHeights=[]),0<this._maxHeight&&(t=Math.min(this._maxHeight,t)),t=Math.max(this._minItemHeight,t)},i.prototype.measure=function(e,t,n,r,i){var s=this._grid;this._rs=s.itemSource,this._offsetBody=null,this._cellLayouts=s._activeCellLayout,this._footerCount=s.footers.visibleCount,this._headerSummaryCount=s.headerSummaries.visibleCount,this._leftPos=t,this._topIndex=n,this._columnMerged=!1,this._fixedColumnMerged=!1,this._rightColumnMerged=!1,this._focusIndex&&!s.isValid(this._focusIndex)&&this._focusIndex.normalize(s),this._doMeasure(e,r,i)},i.prototype.layout=function(e){var t=this._grid;this._doLayout(t,e),this._adjustLayout(t,this._gridBounds.clone()),this._prevFocused=this._focusIndex,this._focusIndex=null},i.prototype.getItemHeight=function(e){return e=e.index,e<this._fixedItemCount?this._fixedItemPoints[e+1]-this._fixedItemPoints[e]:(e-=this._fixedItemCount-this._topIndex,this._itemPoints[e+1]-this._itemPoints[e])},i.prototype.getTableItemHeight=function(e){return e<this._fixedItemCount?this._fixedTableItemPoints[e+1]-this._fixedTableItemPoints[e]:(e-=this._fixedItemCount,this._tableItemPoints[e+1]-this._tableItemPoints[e])},i.prototype.getTableItemIndex=function(e){for(var t=0;t<this._fixedItemCount;t++)if(e<=this._fixedTableItemPoints[t+1])return t;for(t=0;t<this._itemCount;t++)if(e<=this._tableItemPoints[t+1])return t+this._fixedItemCount;return-1},i.prototype.getTableItemTop=function(e){return e<this._fixedItemCount?this._fixedTableItemPoints[e]:(e-=this._fixedItemCount,this._tableItemPoints[e])},i.prototype.getTableItemBottom=function(e){return e<this._fixedItemCount?this._fixedTableItemPoints[e+1]:(e-=this._fixedItemCount,this._tableItemPoints[e+1])},i.prototype.getItemBounds=function(e){var t,e=0<this._fixedItemCount&&e<this._fixedItemCount?(t=this._fixedItemPoints[e],this._fixedItemPoints[e+1]-t):(e-=this._fixedItemCount,t=this._itemPoints[e],this._itemPoints[e+1]-t);return new h.Rectangle(0,t,1e3,e)},i.prototype.getItemRect=function(e,t){var n,t=((t=void 0===t?!1:t)?this._fixedContentBounds:this._bodyBounds).y,t=0<this._fixedItemCount&&e<this._fixedItemCount?(n=this._fixedItemPoints[e]+t,this._fixedItemPoints[e+1]+t-n):(e-=this._fixedItemCount,n=this._itemPoints[e]+t,this._itemPoints[e+1]+t-n);return new h.Rectangle(0,n,1e3,t)},i.prototype.getTableItemBounds=function(e){var t,e=0<this._fixedItemCount&&e<this._fixedItemCount?(t=this._fixedTableItemPoints[e],this._fixedTableItemPoints[e+1]-t):(e-=this._fixedItemCount,t=this._tableItemPoints[e],this._tableItemPoints[e+1]-t);return new h.Rectangle(0,t,1e3,e)},i.prototype.getTableRowHeightFixed=function(e,t){var n=this._fixedTableRowPoints.length;return e<n-1?this._fixedTableRowPoints[Math.min(e+t,n-1)]-this._fixedTableRowPoints[e]:(1<n&&(e-=n),this._tableRowPoints[Math.min(e+t,this._tableRowPoints.length-1)]-this._tableRowPoints[e])},i.prototype.getTableRowHeight=function(e,t){return e<this._fixedTableRowCount?this._fixedTableRowPoints[Math.min(e+t,this._fixedTableRowPoints.length-1)]-this._fixedTableRowPoints[e]:(0<this._fixedItemCount&&(e-=this._fixedItemCount*this._trs+1),this._tableRowPoints[Math.min(e+t,this._tableRowPoints.length-1)]-this._tableRowPoints[e])},i.prototype.getTableRowBounds=function(e,t){var n,t=0<this._fixedTableRowCount&&e<this._fixedTableRowCount?(n=this._fixedTableRowPoints[e],this._fixedTableRowPoints[Math.min(e+t,this._fixedTableRowCount)]-n):(0<this._fixedTableRowCount&&(e-=this._fixedTableRowCount+1),n=this._tableRowPoints[e],this._tableRowPoints[Math.min(e+t,this._tableRowCount)]-n);return new h.Rectangle(0,n,1e3,t)},i.prototype.getTableRowIndex=function(e){e-=this.contentBounds.y+this.bodyBounds.y;for(var t=0;t<this._fixedTableRowCount;t++)if(e<=this._fixedTableRowPoints[t+1])return t;for(t=0;t<this._tableRowCount;t++)if(e<=this._tableRowPoints[t+1])return t+(0<this._fixedTableRowCount?this._fixedTableRowCount+1:0);return-1},i.prototype.setLeftPos=function(e,t){var n=this._grid;this._leftPos=t,this.$_calcLeftPos(),n.contentPane.x=this._contentBounds.x=this.fixedContentBounds.right-this._leftPos},i.prototype.isMergedCell=function(e){return!1},i.prototype.getMergeRoom=function(e){var t=e.layout;return t instanceof Ft.CellLayoutColumnItem&&t.canMerge()?(t=t.merges,t&&t.getRoom(e)):null},i.prototype.getHeaderCellAt=function(e,t,n){void 0===n&&(n=!1);var r,i=this._grid,s=this._cellLayouts._headerCells,o=-1;if(e<this._fixedContentBounds.right){r=i.fixedHeaderView,e-=this._fixedContentBounds.x;for(var u=0;u<this._fixedCellCount;u++)if(e>=this._fixedCellPoints[u]&&e<this._fixedCellPoints[u+1]){o=u;break}}else if(e>this._rightContentBounds.x){r=i.rightHeaderView,e-=this._rightContentBounds.x;for(u=0;u<this._rightCellCount;u++)if(e>=this._rightCellPoints[u]&&e<this._rightCellPoints[u+1]){o=u+this._cellCount-this._rightCellCount;break}}else{r=i.headerView,e-=this._contentBounds.x;for(u=0;u<this._cellPoints.length;u++)if(e>=this._cellPoints[u]&&e<this._cellPoints[u+1]){o=u+this._fixedCellCount;break}}if(0<=o)return t=s[r.getRowAt(t-this._headerBounds.y-this._contentBounds.y)][o],(t=r.getSpanRoot(t))&&!n?t.source:t},i.prototype.getHeaderCellRect=function(e,t){void 0===t&&(t=!1);var n,r,i,s,o=this.grid,u=e.hcol,a=this.cellCount-this.rightCellCount;return(i=u<this._fixedCellCount?(r=this._fixedContentBounds.x,s=(n=o.fixedHeaderView.tableCellByLayout(e))?n.colSpan:e.cols,new h.Rectangle(this._fixedCellPoints[i=u]+r,0,this._fixedCellPoints[i+s]-this._fixedCellPoints[i],0)):a<=u?(r=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,i=u-a,s=(n=o.rightHeaderView.tableCellByLayout(e))?n.colSpan:e.cols,new h.Rectangle(this._rightCellPoints[i]+r,0,this._rightCellPoints[i+s]-this._rightCellPoints[i],0)):(r=this._contentBounds.x,i=u-this._fixedCellCount,s=(n=o.headerView.tableCellByLayout(e))?n.colSpan:e.cols,new h.Rectangle(this._cellPoints[i]+r,0,this._cellPoints[i+s]-this._cellPoints[i],0))).y=this._contentBounds.y+o.headerView.getLayoutPos(e),i.height=o.headerView.getLayoutHeight(e,n,t),i},i.prototype.getLayoutRect=function(e){var t,n,r=this.rightFirstLayout;return e<this._fixedLayoutCount?(t=this._fixedContentBounds.x,new h.Rectangle(this._fixedLayoutPoints[n=e]+t,0,this._fixedLayoutPoints[n+1]-this._fixedLayoutPoints[n],0)):r<=e?(t=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,new h.Rectangle(this._rightLayoutPoints[n=e-r]+t,0,this._rightLayoutPoints[n+1]-this._rightLayoutPoints[n],0)):(t=this._contentBounds.x,n=e-this._fixedLayoutCount,new h.Rectangle(this._layoutPoints[n]+t,0,this._layoutPoints[n+1]-this._layoutPoints[n],0))},i.prototype.getDataRect=function(e){var t,n,r=e.col,i=e._clen,e=this.cellCount-this.rightCellCount;return r<this._fixedCellCount?(t=this._fixedContentBounds.x,new h.Rectangle(this._fixedCellPoints[n=r]+t,0,this._fixedCellPoints[n+i]-this._fixedCellPoints[n],0)):e<=r?(t=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,new h.Rectangle(this._rightCellPoints[n=r-e]+t,0,this._rightCellPoints[n+i]-this._rightCellPoints[n],0)):(t=this._contentBounds.x,n=r-this._fixedCellCount,new h.Rectangle(this._cellPoints[n]+t,0,this._cellPoints[n+i]-this._cellPoints[n],0))},i.prototype.getBodyView=function(e){var t=this.rightFirstLayout,e=(e instanceof Ft.CellLayoutItem?e:e.layout).root.vindex;return e<this._fixedLayoutCount?this._grid.fixedBodyView:t<=e?this._grid.rightBodyView:this._grid.bodyView},i.prototype.mouseToIndex=function(e,t,n,r){if(r.set(-1,null),this._layoutCount<1)return r;var i=this.grid,s=this._summaryBounds.bottom,o=-1;if(s<=(n-=this._contentBounds.y)&&n<this._footerBounds.y){for(var u=0;u<this._fixedItemCount;u++)if(n>=s+this._fixedItemPoints[u]&&n<s+this._fixedItemPoints[u+1]){n-=s+this._fixedItemPoints[o=u];break}if(o<0&&0<this._itemCount){for(u=0;u<this._itemCount;u++)if(n>=s+this._itemPoints[u]&&n<s+this._itemPoints[u+1]){n-=s+this._itemPoints[o=u];break}0<=o&&(o+=i.topItem)}}else n>=this._footerBounds.y?o=-2:n<this._headerBounds.y&&(o=-3);if(r.itemIndex=o,e){e=i.getCellViewOf(e),i=e&&i.getBodyView(e),e=i instanceof fn.GridBodyElement&&i.layoutByCell(e);if(e)return r.layout=e,r}return r},i.prototype.mouseToIndexEx=function(e,t,n,r){if(this._layoutCount<1)return r;var i=this.grid,s=this._topIndex+this._fixedItemCount,o=this._summaryBounds.bottom,u=0;if((n-=this._contentBounds.y)<o)u=-1;else if(n>=this._bodyBounds.bottom&&n<this._footerBounds.y)u=s+this._fullItemCount;else if(n>=this._footerBounds.y)u=s+this._fullItemCount;else{u=-1,n-=o;for(var a=0;a<this._fixedItemCount;a++)if(n>=this._fixedItemPoints[a]&&n<this._fixedItemPoints[a+1]){u=a;break}if(u<0&&0<this._itemCount){for(a=0;a<this._itemCount;a++)if(n>=this._itemPoints[a]&&n<this._itemPoints[a+1]){u=a;break}0<=u&&(u+=s)}}r.itemIndex=u;var f=-1,s=this._gridBounds.x;if(t<s)f=Math.max(0,this._firstLayout-1);else if(t>=this._bodyBounds.right&&t<this._clientRect.right)f=i.visibleLayoutCount-1;else{t-=s;for(a=0;a<this._fixedLayoutCount;a++)if(t>=this._fixedLayoutPoints[a]&&t<this._fixedLayoutPoints[a+1]){f=a;break}if(f<0&&0<this._rightLayoutCount)for(var l=t-this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth+s,a=0;a<this._rightLayoutCount;a++)if(l>=this._rightLayoutPoints[a]&&l<this._rightLayoutPoints[a+1]){f=a+this.rightFirstLayout;break}if(f<0){t=t-this._fixedWidth+this._leftPos;for(a=this._firstLayout;a<=this._lastLayout;a++)if(t>=this._layoutPoints[a-this._fixedLayoutCount]&&t<this._layoutPoints[a-this._fixedLayoutCount+1]){f=a;break}}}return 0<=f&&f<i.visibleLayoutCount?r.layout=i.getVisibleLayout(f):r.layout=null,r},i.prototype.cellIsVisible=function(e){var t=e.itemIndex,n=this._fixedItemCount;if(n<=t){if(t<this._topIndex+n)return!1;if(0==this._fullItemCount&&t==this._topIndex+n)return!0;if(t>=this._topIndex+n+this._fullItemCount)return!1}t=e.layout,e=t.col;if((n=this._fixedLayoutCount)<=e){if(e=t.col-this._fixedCellCount,this._cellPoints[e]<this._leftPos)return!1;if(this._cellPoints[e+t.cols]-this._leftPos>this._nonFixedBounds.width)return!1}return!0},i.prototype.clearFocusRequest=function(){this._focusIndex=null},i.prototype.focusIsVisible=function(e){return(e=e||this._focusIndex)&&this.cellIsVisible(e)},i.prototype.makeCellVisible=function(e){this._focusIndex=e.clone()},i.prototype.isAutoRowHeights=function(){return this._autoRowHeights},i.prototype.isRowGrouped=function(){return this._rowGrouped},i.prototype.scrollToNextCell=function(){for(var e=0;e<this._cellCount;e++)if(this._cellPoints[e]>this._leftPos)return this._cellPoints[e];return this._leftPos},i.prototype.scrollToPrevCell=function(){for(var e=this._cellCount-1;0<=e;e--)if(this._cellPoints[e]<this._leftPos)return this._cellPoints[e];return this._leftPos},i.prototype.needRelayout=function(){return this._autoRowHeights&&this._fitStyleChanged&&this._fitStyle==c.GridFitStyle.EVEN_FILL},i.prototype.$_calcFixedCellPoints=function(e,t){var n=this._layoutCount=t.visibleCount,r=t._cellWidths,i=this._fixedLayoutCount=Math.min(e.colCount,n);if(this._rightLayoutCount=Math.max(0,Math.min(e.rightCount,n-i-1)),this._rightFixed=e.rightFixed,this._cellCount=0,this._fixedCellCount=0,this._rightCellCount=0,this._layouts=[],this._fixedLayoutPoints=[],this._fixedWidth=0,this._rightWidth=0,this._rightBarWidth=0,this._fixedCellPoints=[],this._fixedCellCounts=[],0<i){var s=this._layouts,o=this._fixedLayoutPoints,u=this._fixedCellPoints,a=this._fixedCellCounts,f=0,l=0;o.push(f),u.push(f),a.push(l);for(var c=0;c<i;c++){for(var h=t.getVisible(c),p=h.cols,d=0;d<p;d++)f+=r[l++],u.push(f);s.push(h),o.push(f),a.push(l)}this._fixedCellCount=this._cellCount=l,this._fixedWidth=o[i]+(this._fixedBarWidth=e.colBarWidth)}},i.prototype.$_calcCellPoints=function(e){var t=e.visibleCount-this._fixedLayoutCount-this._rightLayoutCount,n=e._cellWidths,r=this._layoutPoints=[],i=this._cellPoints=[],s=this._cellCounts=[],o=this._fixedLayoutCount,u=this._layouts;if(this._firstCell=this._lastCell=this._cellCount,(this._layoutsLength=0)<t){var a=0,f=this._cellCount;r.push(a),i.push(a),s.push(f);for(var l=0;l<t;l++){for(var c=e.getVisible(l+o),h=c.cols,p=0;p<h;p++)a+=n[f++],i.push(a);u.push(c),r.push(a),s.push(f)}this._layoutsLength=a,this._cellCount=f,this._lastCell=f-1}},i.prototype.$_calcRightCellPoints=function(e,t){var n=t._cellWidths,r=this._layoutCount,i=this._rightLayoutPoints=[],s=this._rightCellPoints=[],o=this._rightCellCounts=[],u=this._layouts;if(0<this._rightLayoutCount){var a=0,f=this._cellCount;i.push(a),s.push(a),o.push(f);for(var l=r-this._rightLayoutCount;l<r;l++){for(var c=t.getVisible(l),h=c.cols,p=0;p<h;p++)a+=n[f++],s.push(a);u.push(c),i.push(a),o.push(f)}this._rightCellCount=f-this._cellCount,this._cellCount=f,this._rightWidth=i[this._rightLayoutCount]+(this._rightBarWidth=e.rightBarWidth)}},i.prototype.$_calcScrollWidth=function(e){this._scrollWidth=e.width-this._leftContentBounds.width-this._sideContentBounds.width-this._fixedContentBounds.width-this._rightContentBounds.width},i.prototype.$_calcLeftPos=function(){var e,t,n,r,i=this._focusIndex&&this._focusIndex.layout;i&&(n=i.root.vindex,e=this._cellPoints,r=this.grid,n>=this._fixedLayoutCount&&n<this.rightFirstLayout&&(n=e[t=i.col-this._fixedCellCount],r=r.displayOptions.horzPageScroll&&"keydown"===r._eventFrom&&r._prevTop===this._topIndex,n<this._leftPos?(r&&this._leftPos>=e[1+t]&&(n=n-(this.gridBounds.width+e[t]-e[1+t])+(this._fixedContentBounds.width+this._rightContentBounds.width)),this._leftPos=n):(i=e[t+i.cols]-this._leftPos-this._scrollWidth,0<(i=r&&e[t]-this._leftPos>=this._scrollWidth?Math.max(e[t]-e[this.getLeftCell()],i):i)&&(this._leftPos=Math.min(n,this._leftPos+i))))),this._leftPos=Math.max(0,Math.min(this._leftPos,this._layoutsLength-this._scrollWidth)),this._firstLayout=this._fixedLayoutCount,this._lastLayout=0<this._layoutCount?this._layoutCount-this._rightLayoutCount-1:-1},i.prototype.$_checkFitting=function(e,t){var n=e.fitStyle;if(n!=c.GridFitStyle.NONE){var r=this._cellPoints,e=r.length;if(0<e)return n==c.GridFitStyle.EVEN_FILL||0<t-r[e-1]?n:void 0}},i.prototype.$_fitColumns=function(e,t,n){for(var r=this._layoutsLength,i=this._layoutPoints,s=i.length,o=this._fixedLayoutCount,u=[],a=1;a<i.length;a++)u.push(i[a]-i[a-1]);if(0<s){var e=e.fitStyle,f=this._layouts;if(e==c.GridFitStyle.EVEN||e==c.GridFitStyle.EVEN_FILL)for(a=1;a<s;a++)i[a]=i[a]*n/r;else if(e==c.GridFitStyle.FILL){for(var l=0,h=0,a=0;a<s-1;a++){var p=f[a+o].fillWidth;0<p?h+=p:l+=u[a]}if(0<h)for(l=n-l,a=1;a<s;a++){var d=(w=f[a-1+o]).fillWidth;i[a]=0<d?i[a-1]+d*l/h:i[a-1]+u[a-1]}else for(a=1;a<s;a++)i[a]=i[a]*n/r}for(var v=0,a=0;a<s-1;a++)i[a]=Math.round(i[a]);for(a=1;a<s-1;a++){var m=i[a]-i[a-1];m<2?i[a]+=v=2-m:0<v&&2+v<m&&(i[a]-=v,v=0)}var g=this._cellPoints=[],y=t._cellWidths,b=0;g.push(b);for(a=0;a<s-1;a++){var w,E=(w=this._cellLayouts.getVisible(a+o))._cellWidth,S=i[a+1]-i[a],x=S/E,T=w.hcol,N=w.cols,C=b;w._setFitWidth(S);for(var k=0;k<N-1;k++)C+=y[T+k]*x,g.push(Math.round(C));b+=S,g.push(Math.round(b))}g[g.length-1]=i[s-1]}this._layoutsLength=i[s-1]=n},i.prototype.$_measureTopPane=function(e){this._doMeasureTopPane(e,this._topContentBounds)},i.prototype._doMeasureTopPane=function(e,t){t.height=0},i.prototype.$_measureViewHeights=function(e,t){var n=0;e.header.visible?(this._headerBounds=t.clone(),n=e.headerView.measure(e,t.width,t.height).height,this._headerBounds.height=n):this._headerBounds?this._headerBounds.setEmpty():this._headerBounds=new h.Rectangle,this._fixedHeaderBounds=this._headerBounds.clone(),this._rightHeaderBounds=this._headerBounds.clone(),this._headBounds.y=t.y,this._headBounds.height=n,t.topBy(n),n=0,e.headerSummaries.canShow?(this._summaryBounds=t.clone(),n=e.headerSummaryView.measure(e,t.width,t.height).height,e.fixedHeaderSummaryView,this._summaryBounds.height=n):this._summaryBounds?this._summaryBounds.setEmpty():this._summaryBounds=new h.Rectangle,this._fixedSummaryBounds=this._summaryBounds.clone(),this._rightSummaryBounds=this._summaryBounds.clone(),this._sumBounds.y=t.y,this._sumBounds.height=n,t.topBy(n),n=0,e.footers.canShow?(this._footerBounds=t.clone(),n=e.footerView.measure(e,t.width,t.height).height,this._footerBounds.height=n):this._footerBounds?this._footerBounds.setEmpty():this._footerBounds=new h.Rectangle,this._fixedFooterBounds=this._footerBounds.clone(),this._rightFooterBounds=this._footerBounds.clone(),this._footBounds.y=t.bottom-this._footerBounds.height,this._footBounds.height=n,t=this._sumBounds.bottom,n=this._footBounds.y-t,this._rowBarBounds.y=t,this._rowBarBounds.height=n},i.prototype.$_sortSections=function(e){return e=[e.rowIndicator,e.stateBar,e.checkBar],e.sort(function(e,t){var n=e.displayOrder,r=t.displayOrder;return n==r?e.staticOrder-t.staticOrder:n-r}),e},_dp(i,"sectionObjects",{get:function(){return this._sectionObjects}}),i.prototype.$_measureLeftPane=function(e){this._sectionObjects=this.$_sortSections(e);var t=this._leftContentBounds.clone().move();this._headBounds=t.clone(),this._sumBounds=t.clone(),this._footBounds=t.clone(),e=e.rowBarContainer.measure(e,t.width,t.height),this._rowBarBounds=t.clone(),this._rowBarBounds.width=e.width,this._leftContentBounds.width=e.width,t.leftBy(e.width),this._headBounds.width=this._leftContentBounds.width,this._sumBounds.width=this._leftContentBounds.width,this._footBounds.width=this._leftContentBounds.width},i.prototype._measureSidePane=function(e){var t;e.isSidePaneVisible()?(t=this._sideContentBounds.clone(),t=e.sideContentPane.measure(e,t.width,t.height),this._sideContentBounds.width=t.width):this._sideContentBounds.width=0},i.prototype.$_measureFixedPane=function(e){var t=this._fixedContentBounds.width=this._fixedWidth,n=this._fixedContentBounds.clone().move();this._fixedHeaderBounds.x=n.x,this._fixedHeaderBounds.y=n.y,this._fixedHeaderBounds.width=n.width,n.topBy(this._fixedHeaderBounds.height),this._fixedSummaryBounds.x=n.x,this._fixedSummaryBounds.y=this._fixedHeaderBounds.bottom,this._fixedSummaryBounds.width=n.width,n.topBy(this._fixedSummaryBounds.height),0<t&&(e.fixedHeaderSummaryView._rowPoints=e.headerSummaryView._rowPoints.slice()),this._fixedFooterBounds.x=n.x,this._fixedFooterBounds.y=n.bottom-this._fixedFooterBounds.height,this._fixedFooterBounds.width=n.width,n.bottomBy(-this._fixedFooterBounds.height),0<t&&(e.fixedFooterView._rowPoints=e.footerView._rowPoints.slice()),this._fixedBodyBounds=n},i.prototype.$_measureRightPane=function(e){var t=this._rightWidth;this._rightContentBounds.width=t;var n=this._rightContentBounds.clone();n.x=this._rightBarWidth,n.y=0,n.width-=n.x,this._rightHeaderBounds.x=n.x,this._rightHeaderBounds.y=n.y,this._rightHeaderBounds.width=n.width,n.topBy(this._rightHeaderBounds.height),this._rightSummaryBounds.x=n.x,this._rightSummaryBounds.y=this._rightHeaderBounds.bottom,this._rightSummaryBounds.width=n.width,n.topBy(this._rightSummaryBounds.height),0<t&&(e.rightHeaderSummaryView._rowPoints=e.headerSummaryView._rowPoints.slice()),this._rightFooterBounds.x=n.x,this._rightFooterBounds.y=n.bottom-this._rightFooterBounds.height,this._rightFooterBounds.width=n.width,n.bottomBy(-this._rightFooterBounds.height),0<t&&(e.rightFooterView._rowPoints=e.footerView._rowPoints.slice()),this._rightBodyBounds=n},i.prototype.$_measureContentPane=function(e){var t=this._layoutsLength;this._contentBounds.width=t,t=this._contentBounds.clone(),t.x=t.y=0,this._headerBounds&&(this._headerBounds.x=t.x,this._headerBounds.y=t.y,this._headerBounds.width=t.width,t.topBy(this._headerBounds.height)),this._summaryBounds&&(this._summaryBounds.x=t.x,this._summaryBounds.y=this._headerBounds.bottom,this._summaryBounds.width=t.width,t.topBy(this._summaryBounds.height)),this._dataBounds=t.clone(),this._footerBounds&&(this._footerBounds.x=t.x,this._footerBounds.y=t.bottom-this._footerBounds.height,this._footerBounds.width=t.width,t.bottomBy(-this._footerBounds.height)),this._bodyBounds=t},i.prototype.$_getItemHeight=function(e,t){return t=e.getItem(t).height,isNaN(t)?this._autoRowHeights?this._minItemHeight:this._itemHeight:t},i.prototype.$_calcItemPoints=function(e){var t=this.grid;if("mousedown"===t._eventFrom&&this._focusIndex&&this._topIndex<this._focusIndex.itemIndex-this._fixedItemCount-Math.max(0,this._fullItemCount-1))return;e=null==e||e;var n=t.itemSource,r=this._itemsBounds,i=0,s=n?Math.min(n.fixedCount,n.itemCount):0;if(this._fixedItemCount=0,this._fixedBarHeight=0,this._fixedHeight=0,this._fixedItemPoints=[],0<s){this._fixedItemPoints.push(i);for(var o=0;o<s&&i<r;o++)i+=this.$_getItemHeight(t,o),this._fixedItemPoints.push(i),this._fixedItemCount++;this._fixedHeight=i,i+=this._fixedBarHeight=t.fixedOptions.rowBarHeight}var u=t.itemCount-this._fixedItemCount;if(this._itemPoints=[i],this._itemCount=0,(this._fullItemCount=0)<u&&i<r){for(var a=this._topIndex,n=-1,o=a=this._focusIndex&&(n=this._focusIndex.itemIndex)>=this._fixedItemCount&&n<a+this._fixedItemCount?this._topIndex=n-this._fixedItemCount:a;o<u&&i<r;o++)i+=this.$_getItemHeight(t,o+this._fixedItemCount),this._itemCount++,this._itemPoints.push(i);if(this._fullItemCount=this._itemCount-(r<i?1:0),e&&n>=this._topIndex+this._fixedItemCount+this._fullItemCount){i=0<this.fixedItemCount?this._fixedHeight+t.fixedOptions.rowBarHeight:0,this._topIndex=n-this._fixedItemCount-Math.max(0,this._fullItemCount-1),this._itemPoints=[i],this._itemCount=0,this._fullItemCount=0;for(var f=t.itemCount-this._fixedItemCount,o=this._topIndex;o<f&&i<r;o++)i+=this.$_getItemHeight(t,o+this._fixedItemCount),this._itemCount++,this._itemPoints.push(i);this._fullItemCount=this._itemCount-(r<=i?1:0)}}else this._topIndex=0},i.prototype.$_updateScrollInfo=function(e,t,n){var r=this._reqScrollBarWidth,i=this._reqScrollBarHeight,s=(n=void 0===n?!1:n)?this._tableItemPoints:this._itemPoints,o=s[s.length-1],n=this._layoutsLength,s=t.fitStyle==c.GridFitStyle.EVEN_FILL;this._hscrolled=n>this._scrollWidth,this._vscrolled=0<this._topIndex||e.itemCount>this._itemCount+this._fixedItemCount||o>this._bodyBounds.height,t=0<i&&this._hscrolled&&!s,e=0<r&&this._vscrolled,t!=e&&(t?0<r&&(e=o>this._bodyBounds.height-i):0<i&&!s&&(t=n>this._scrollWidth-r)),this._hscrollBar=t,this._vscrollBar=e,this._hscrolled=this._hscrolled||t,this._vscrolled=this._vscrolled||e,this._scrollBarWidth=e?r:0,this._scrollBarHeight=t?i:0,this._scrollWidth-=this._scrollBarWidth},i.prototype.$_recalcScrollInfo=function(e){this._scrollWidth+=this._scrollBarWidth,this._bodyBounds.height+=this._scrollBarHeight,this._gridBounds.height+=this._scrollBarHeight,this._clientRect.height+=this._scrollBarHeight,this.$_updateScrollInfo(e,e.displayOptions,!0),this._bodyBounds.height-=this._scrollBarHeight,this._gridBounds.height-=this._scrollBarHeight,this._clientRect.height-=this._scrollBarHeight},i.prototype.$_adjustVerticals=function(){var e=this._scrollBarHeight,t=this._itemPoints;if(0<e){this._leftContentBounds.height-=e,this._footBounds.y-=e,this._rowBarBounds.height-=e,this._sideContentBounds.height-=e,this._fixedContentBounds.height-=e,this._fixedFooterBounds.y-=e,this._fixedBodyBounds.height-=e,this._nonFixedBounds.height-=e,this._contentBounds.height-=e,this._footerBounds.y-=e,this._bodyBounds.height-=e,this._rightContentBounds.height-=e,this._rightFooterBounds.y-=e,this._rightBodyBounds.height-=e;for(var n=this._bodyBounds.height;t[t.length-2]>n;)this._itemCount--,t.pop();this._fullItemCount=this._itemCount-(t[this._itemCount]>=n?1:0),e=this._focusIndex?this._focusIndex.itemIndex:-1;if(0<=e&&this._itemCount>this._fullItemCount&&e>=this._topIndex+this._fixedItemCount+this._fullItemCount){for(var r=this.grid,i=t[this._itemCount],s=0;n<i;)i-=t[++s];var o=r._prevTop+1!==this._topIndex;if(0<s&&"mousedown"!==r._eventFrom){t.splice(0,s),this._topIndex+=s,this._itemCount-=s,this._fullItemCount-=s;for(var i=t[0],u=0;u<t.length;u++)t[u]-=i;if(i=t[t.length-1],r.itemCount<this._topIndex+this._fixedItemCount+this._itemCount)this._itemCount--;else for(;i<n&&this._topIndex+this._fixedItemCount+this._itemCount<r.itemCount;)t.push(i+=this.$_getItemHeight(r,this._topIndex+this._fixedItemCount+this._itemCount)),this._itemCount++,this._fullItemCount++;o&&(this._topIndex,this._fixedItemCount,this._fullItemCount)}}}this._dataBounds.height=t[t.length-1],this._fullItemCount==this._itemCount&&(o=t[t.length-1],this._rowBarBounds.height=o)},i.prototype.$_adjustHorizontals=function(e){this._rightContentBounds.x-=this._scrollBarWidth,this.$_calcLeftPos();var t=this._cellPoints,n=t.length,r=this._leftPos,i=r+this._nonFixedBounds.width;this._startCell=this._endCell=this._firstCell;for(var s=0;s<n;s++)if(t[s]>r){this._startCell+=s-1;break}for(s=n-2;0<=s;s--)if(t[s]<i){this._endCell+=s;break}},i.prototype.$_calcTableRowPoints=function(){var e=this._trs,t=this._items,n=this._fixedItemCount,r=this._itemCount+n,i=this._fixedTableRowPoints=[],s=this._tableRowPoints=[],o=this._dataRowHeights,u=0;if(this._fixedTableRowCount=this._tableRowCount=0,(this._fixedDataHeight=this._dataHeight=0)<n){for(var a=this._fixedItemPoints;u<n;u++){var f=this._fixedItemPoints[u];if(i.push(f),this._fixedTableRowCount++,t[u].isData)for(var l=Math.floor((this._fixedItemPoints[u+1]-f)/e),c=Math.round(this._fixedItemPoints[u+1]-f)/e,h=1;h<e;h++)i.push(f+=o[h-1]||(h%2?l:c)),this._fixedTableRowCount++}i.push(this._fixedDataHeight=this._fixedItemPoints[n])}if(0<this.itemCount){for(a=this._itemPoints;u<r;u++){f=a[u-n],l=a[u-n+1]-f;if(s.push(f),this._tableRowCount++,t[u].isData)for(var p=Math.floor(l/e),c=Math.round(l/e),h=1;h<e;h++)s.push(f+=o[h-1]||(h%2?p:c)),this._tableRowCount++}s.push(this._dataHeight=a[this._itemCount]),this._dataHeight+=this._fixedDataHeight}},i.prototype._doMeasure=function(e,t,n){var r=this._grid,i=r.displayOptions,s=r.fixedOptions,o=e.clone();this._refreshMode=i.refreshMode,this._autoRowHeights=i.rowHeight<0,this._items=[],this._trs=this._cellLayouts.dataRows,this._rowGrouped=this.rowGrouped||this.mergedRowGrouped,this._hscrolled=this._vscrolled=!1,this._hscrollBar=this._vscrollBar=!1,this._reqScrollBarWidth=t,this._reqScrollBarHeight=n,this._minRowHeight=i.minTableRowHeight,this._maxHeight=i.maxRowHeight,this._minItemHeight=Math.max(this._minRowHeight*this._trs,i.minRowHeight),1==this._trs&&(this._minRowHeight=this.minItemHeight),r.heightMeasurer.measure(r),this.$_calcFixedCellPoints(s,this._cellLayouts),this.$_calcCellPoints(this._cellLayouts),this.$_calcRightCellPoints(s,this._cellLayouts),this._topContentBounds=o.clone(),this.$_measureTopPane(r),o.topBy(this.topPanelVisible?this._topContentBounds.height:0),this._leftContentBounds=o.clone(),this.$_measureLeftPane(r),o.leftBy(this._leftContentBounds.width),this._sideContentBounds=o.clone(),this._measureSidePane(r),o.leftBy(this._sideContentBounds.width),this.$_measureViewHeights(r,o.clone().move()),this._fixedContentBounds=o.clone(),this.$_measureFixedPane(r),o.leftBy(this._fixedContentBounds.width),this._rightContentBounds=o.clone(),this.$_measureRightPane(r),this._rightContentBounds.x=o.right-this._rightContentBounds.width,o.width-=this._rightContentBounds.width,this._contentBounds=o.clone(),this.$_measureContentPane(r),this._clientRect=e.clone(),this._nonFixedBounds=new h.Rectangle(this._fixedContentBounds.right,this._fixedContentBounds.y,e.width-this._fixedContentBounds.right-this.rightContentBounds.width,this._fixedContentBounds.height),this._itemHeight=this._calcDefaultRowHeight(r),this._itemsBounds=e.height-this._topContentBounds.height-this._headerBounds.height-this._summaryBounds.height-this._footBounds.height+1,this.$_calcItemPoints(),this.$_calcScrollWidth(e),this.$_updateScrollInfo(r,i),o=this._fitStyle,(this._fitStyle=this.$_checkFitting(i,this._scrollWidth))?(this.$_fitColumns(i,this.cellLayouts,this.scrollWidth),this._contentBounds.width=this._layoutsLength):r._activeCellLayout.$_clearFitWidths(),(this._fitStyleChanged=this._fitStyle!=o)&&r.clearRowHeights(!1),this.$_adjustVerticals(),this.$_adjustHorizontals(e),this._gridBounds=new h.Rectangle(this._fixedContentBounds.x,this._fixedContentBounds.y,e.right-this._fixedContentBounds.x-this._scrollBarWidth,+this._footerBounds.y),this._clientRect.width-=this._scrollBarWidth,this._clientRect.height-=this._scrollBarHeight,this._nonFixedBounds.width-=this._scrollBarWidth,this._topContentBounds.width-=this._scrollBarWidth},i.prototype.$_layoutTopPane=function(e,t){var n=this._topContentBounds;this.topPanelVisible?t.setRect(n):t.setBounds(-10,-10,1,1),this._doLayoutTopPane(e,t)},i.prototype._doLayoutTopPane=function(e,t){},i.prototype.$_layoutLeftPane=function(e,t){var n=this._leftContentBounds;(t.visible=!n.isEmpty)&&(t.setRect(n),(n=e.headView).visible=e.header.visible,((n=e.sumView).visible=e.headerSummaries.visible)&&(n.setRect(this._sumBounds),n.layoutContent(this)),((n=e.footView).visible=e.footers.visible)&&(n.setRect(this._footBounds),n.layoutContent(this)),e.rowBarContainer.visible=e.rowIndicator.visible||e.stateBar.visible||e.checkBar.visible)},i.prototype._layoutSidePane=function(e,t){var n=this._sideContentBounds;t.setRect(n),(t.visible=!n.isEmpty)&&t.layoutContent(this,n.width,n.height)},i.prototype._prepareItems=function(){for(var e=this._topIndex+this._fixedItemCount,t=0;t<this._fixedItemCount;t++){var n=this._rs.getItem(t);this._items.push(n)}for(t=0;t<this._itemCount;t++)n=this._rs.getItem(t+e),this._items.push(n)},i.prototype.$_layoutFixedPane=function(e,t){var n,r=this._fixedContentBounds;(t.visible=!r.isEmpty)?(t.setRect(r),((n=e.fixedHeaderView).visible=e.header.visible)&&(n.setRect(this._fixedHeaderBounds),n.layoutContent(this)),((n=e.fixedHeaderSummaryView).visible=e.headerSummaries.canShow)&&(n.setRect(this._fixedSummaryBounds),n.layoutContent(this)),((n=e.fixedFooterView).visible=e.footers.canShow)&&(n.setRect(this._fixedFooterBounds),n.layoutContent(this)),(n=e.fixedBodyView).visible=!0,this._offsetBody||(this._offsetBody=n),t.layoutContent(this,r.width,r.height)):(e.fixedHeaderView.visible=!1,e.fixedHeaderSummaryView.visible=!1,e.fixedFooterView.visible=!1,e.fixedBodyView.visible=!1)},i.prototype.$_layoutRightPane=function(e,t){var n,r=this._rightContentBounds;(t.visible=!r.isEmpty)?(this._rightFixed||this._hscrolled||(r.x=this._contentBounds.right),t.setRect(r),((n=e.rightHeaderView).visible=e.header.visible)&&(n.setRect(this._rightHeaderBounds),n.layoutContent(this)),((n=e.rightHeaderSummaryView).visible=e.headerSummaries.canShow)&&(n.setRect(this._rightSummaryBounds),n.layoutContent(this)),((n=e.rightFooterView).visible=e.footers.canShow)&&(n.setRect(this._rightFooterBounds),n.layoutContent(this)),(n=e.rightBodyView).visible=!0,this._offsetBody||(this._offsetBody=n),t.layoutContent(this,r.width,r.height)):(e.rightHeaderView.visible=!1,e.rightHeaderSummaryView.visible=!1,e.rightFooterView.visible=!1,e.rightBodyView.visible=!1)},i.prototype.$_layoutContentPane=function(e,t){var n,r=this._contentBounds;(t.visible=!r.isEmpty)?(r.x-=this._leftPos,t.setRect(r),((n=e.headerView).visible=e.header.visible)&&(this._headerBounds.width=r.width,n.setRect(this._headerBounds),n.layoutContent(this)),((n=e.headerSummaryView).visible=e.headerSummaries.canShow)&&(this._summaryBounds.width=r.width,n.setRect(this._summaryBounds),n.layoutContent(this)),((n=e.footerView).visible=e.footers.canShow)&&(this._footerBounds.width=r.width,n.setRect(this._footerBounds),n.layoutContent(this)),(n=e.bodyView).visible=!0,this._bodyBounds.width=r.width,this._offsetBody||(this._offsetBody=n),t.layoutContent(this,r.width,r.height)):e.headerView.visible=e.headerSummaryView.visible=e.footerView.visible=e.bodyView.visible=!1},i.prototype.$_layoutWatingPane=function(e,t){e=e.bounds.clone(),t.setRect(e),t.layoutContent(this,e.width,e.height)},i.prototype._doLayout=function(e,t){this._prepareItems(),this.$_calcTableRowPoints(),r=e._topContentPane,this.$_layoutTopPane(e,r),r=e._leftContentPane,this.$_layoutLeftPane(e,r);var n=Date.now(),r=e._fixedContentPane;this.$_layoutFixedPane(e,r),r=e._rightContentPane,this.$_layoutRightPane(e,r),r=e._contentPane,this.$_layoutContentPane(e,r),p.Utils.trace("LAYOUT CONTENTS: "+(Date.now()-n))},i.prototype.$_adjustHeader=function(e,t,n,r){var i=e.fixedHeaderView,s=e.rightHeaderView,o=e.headerView,u=e.header.height,a=o.height,f=0,l=!1;return(l=!(l=!(l=n?i.$_checkHeight():l)&&r?s.$_checkHeight():l)&&t?o.$_checkHeight():l)&&(e=[],l=0,n&&(i.$_getHeights(e),0<u?i.$_distributeHeights(u,e):l=Math.max(l,i.$_adjustHeights(e))),r&&(s.$_getHeights(e),0<u?s.$_distributeHeights(u,e):l=Math.max(l,s.$_adjustHeights(e))),t&&(o.$_getHeights(e),0<u?o.$_distributeHeights(u,e):l=Math.max(l,o.$_adjustHeights(e))),u<0&&(f+=l-a,this._headBounds.height=l,n&&this._fixedHeaderBounds.height!=l&&(this._fixedHeaderBounds.height=l,i.setRect(this._fixedHeaderBounds),i.$_adjustHeights(e)),r&&this._rightHeaderBounds.height!=l&&(this._rightHeaderBounds.height=l,s.setRect(this._rightHeaderBounds),s.$_adjustHeights(e)),t&&this._headerBounds.height!=l&&(this._headerBounds.height=l,o.setRect(this._headerBounds),o.$_adjustHeights(e)))),f},i.prototype._adjustLayout=function(e,t){var n=this._autoRowHeights,r=e._fixedContentPane,i=e._rightContentPane,s=e._contentPane,o=e.fixedHeaderView,u=e.rightHeaderView,a=e.headerView,f=e.headView.visible,l=r.visible,c=i.visible,r=s.visible,i=0,s=0,u=this.$_adjustHeader(e,r,l&&a.visible&&o.visible,c&&u.visible);0!=u&&(this._fixedSummaryBounds.y=this._rightSummaryBounds.y=this.summaryBounds.y=this._sumBounds.y+=u),e.headerSummaries.canShow&&0!=u&&(l&&(e.fixedHeaderSummaryView.y=this._fixedSummaryBounds.y),c&&(e.rightHeaderSummaryView.y=this._rightSummaryBounds.y),r&&(e.headerSummaryView.y=this._summaryBounds.y),f&&(e.sumView.y=this._sumBounds.y)),t.topBy(this._headBounds.height+this._sumBounds.height),0!=u&&(s=this._sumBounds.bottom,i=Math.min(t.height,this._rowBarBounds.height),this._fixedBodyBounds.y=this.bodyBounds.y=this._rightBodyBounds.y=s,this._fixedBodyBounds.height=this._bodyBounds.height=this._rightBodyBounds.height=i),(f=e.fixedBodyView).visible&&f.setRect(this._fixedBodyBounds),(f=e.bodyView).visible&&f.setRect(this._bodyBounds),(f=e.rightBodyView).visible&&f.setRect(this._rightBodyBounds),this.$_layoutBodyRows(e,l,r,c,this._bodyBounds.height),this.$_adjustTableRowHeights(),n&&this.$_recalcScrollInfo(e),0<this._topIndex&&(u=n?this._minItemHeight:this._itemHeight,this._contentBounds.y+this._dataBounds.bottom+u<=this._gridBounds.bottom&&(n?this.$_fillBottomAuto(e,l,r,c,this._bodyBounds.height):this.$_fillBottomFixed(e,l,r,c,this._bodyBounds.height)),0==this._topIndex&&(u=this._vscrollBar,this.$_recalcScrollInfo(e),this._vscrollBar!=u&&this._fitStyle&&(this.$_layoutBodyRows(e,l,r,c,this._bodyBounds.height,!1),this.$_adjustTableRowHeights()))),e.fixedBodyView.visible&&e.fixedBodyView.$_resetCellHeights2(this,n),e.bodyView.visible&&e.bodyView.$_resetCellHeights2(this,n),e.rightBodyView.visible&&e.rightBodyView.$_resetCellHeights2(this,n),n=this._tableItemPoints,this._dataBounds.height=n[n.length-1],s=this._sumBounds.bottom,i=Math.min(t.height,this._dataBounds.height),this._rowBarBounds.y=s,this._rowBarBounds.height=i,l&&e._fixedContentPane.layoutBars(this,this._fixedContentBounds.width,this._fixedContentBounds.height),c&&(this._fixedContentBounds,e._rightContentPane.layoutBars(this,this._rightContentBounds.width,this._rightContentBounds.height)),(f=e.headView).visible&&(f.setRect(this._headBounds),f.layoutContent(this)),e.rowBarContainer.setRect(this._rowBarBounds),e.rowBarContainer.layoutContent(this)},i.prototype.$_layoutBodyRows=function(e,t,n,r,i,s){var o=t&&0<this._fixedCellCount?e.fixedBodyView:null,u=n&&0<this.cellCount?e.bodyView:null,a=0<(r&&this._rightCellCount)?e.rightBodyView:null,f=this._dataRowHeights;if((s=void 0===s?!0:s)&&this.$_checkColumnMerging(e),o&&o._doPrepareContent(this),a&&a._doPrepareContent(this),u&&u._doPrepareContent(this),s=u||o||a){var l,c,h,d,v,m=e.itemSource,g=m?Math.min(m.fixedCount,m.itemCount):0,y=this._autoRowHeights,b={lm:this,grid:e,topIndex:this._topIndex,fixedItemCount:g,mergeFixed:e.fixedOptions.mergeRows,mergedRowGrouped:this.mergedRowGrouped,rowGroupFields:this.rowGroupFields},w=u&&[],E=o&&[],S=a&&[],x=this._minRowHeight,T=s._trs,N=0<this._maxHeight?Math.min(Math.max(this._maxHeight,x*T),i):i,C=0,k=0,L=0;this._fixedItemCount=0,this._itemCount=0,this._fixedHeight=0;var A=[],O=[],M=[];if(this._fixedTableRowCount=0,this._tableRowCount=0,this._fixedDataHeight=this._dataHeight=0,this._items=[],0<g){A.push(k),O.push(L);for(var _=this,D=0;D<g&&k<i;D++)!function(e){v=m.getItem(e),_._items.push(v);var t=T;if(o&&o.layoutRow(b,E,e,C,v),u&&u.layoutRow(b,w,e,C,v),a&&a.layoutRow(b,S,e,C,v),y){if(c=v.height,isNaN(c)){h=[];for(var n=0;n<t;n++)h[n]=0;v.heights=h,[o,u,a].forEach(function(e){for(var n=e&&e._tbody.children,r=0;n&&r<t;r++)h[r]=Math.round(Math.max(h[r],x,n[C+r].offsetHeight))})}else h=v.heights=v.heights||[c];c=0;var r=h.reduce(function(e,t){return e+t},0)+3;if(N<r){for(var i=N/r,r=N,s=0;s<h.length-1;s++)r-=h[s]=Math.max(x,Math.floor(h[s]*i));h[h.length-1]=Math.max(x,r)}for(n=0;n<t;n++)c+=h[n],O.push(L+=h[n]);m.setRowHeight(v,c,!1)}else{l=L,c=_._fixedItemPoints[e+1]-_._fixedItemPoints[e],d=Math.floor(c/t);for(var p=Math.round(c/t),n=0;n<t-1;n++)O.push(L+=f[n]||(n%2?p:d));O.push(L=l+c)}_._fixedTableRowCount+=t,k+=c,A.push(k),_._fixedItemCount++,_._fixedDataHeight=k,C+=t}(D);(this._fixedHeight=k)<i&&(c=0,o&&(c=o.layoutFixedBar(this,C)),u&&(c=u.layoutFixedBar(this,C)),a&&(c=a.layoutFixedBar(this,C)),C++,k+=c,L+=c)}var P=e.itemCount-this._fixedItemCount,H=[k];if(M.push(k),this._itemCount=0,(this._fullItemCount=0)<P&&k<i){var B=this._topIndex;this._focusIndex&&(F=this._focusIndex.itemIndex)>=this._fixedItemCount&&F<B+this._fixedItemCount&&(B=this._topIndex=F-this._fixedItemCount);for(var j=this,D=B;D<P&&k<i;D++)!function(e){v=m.getItem(e+g),j._items.push(v);var t=v.isData?T:1,n=j._fixedItemCount+e-B;if(o&&o.layoutRow(b,E,n,C,v),u&&u.layoutRow(b,w,n,C,v),a&&a.layoutRow(b,S,n,C,v),v.isData)if(y){if(c=v.height,isNaN(c)){v.heights=h=[];for(var r=0;r<t;r++)h[r]=0;[o,u,a].forEach(function(e){for(var n=e&&e._tbody.children,r=0;n&&r<t;r++)h[r]=Math.round(Math.max(h[r],x,n[C+r].offsetHeight))})}else h=v.heights=v.heights||[c];c=0;var i=h.reduce(function(e,t){return e+t},0)+3;if(N<i){for(var s=N/i,i=N,p=0;p<h.length-1;p++)i-=h[p]=Math.max(x,Math.floor(h[p]*s));h[h.length-1]=Math.max(x,i)}for(r=0;r<t;r++)c+=h[r],M.push(L+=h[r]);m.setRowHeight(v,c,!1)}else{l=L,c=j._itemPoints[e-B+1]-j._itemPoints[e-B],d=Math.floor(c/t);for(var A=Math.round(c/t),r=0;r<t-1;r++)M.push(L+=f[r]||(r%2?A:d));M.push(L=l+c)}else c=j._itemPoints[e-B+1]-j._itemPoints[e-B],M.push(L+=c);j._tableRowCount+=t,k+=c,H.push(k),j._itemCount++,j._dataHeight=k,C+=t}(D);this._fullItemCount=this._itemCount-(i<k?1:0),y&&(o&&o.$_resetHeights(O,M),u&&u.$_resetHeights(O,M),a&&a.$_resetHeights(O,M)),p.Utils.ieOld&&(o&&o.$_resetCellStyleHeights(O,M),u&&u.$_resetCellStyleHeights(O,M),a&&a.$_resetCellStyleHeights(O,M))}this._fixedItemPoints=A,this._itemPoints=H,this._fixedTableRowPoints=O,this._tableRowPoints=M,this._dataBounds.height=H[H.length-1];var F=this._items.length=this.fixedItemCount+this._itemCount;t&&o.cleanRows(F,C),n&&u.cleanRows(F,C),r&&a.cleanRows(F,C)}},i.prototype.$_adjustTableRowHeights=function(){if(this.fixedItemCount+this._itemCount!=0){var e=this._items,t=this._trs;if(this._offsetBody&&(p.Utils.isChromium||p.Utils.isSafari)){var n=this._offsetBody._tbody.rows,r=n[0];if(isNaN(this._zoom)&&(h=Math.round(1e3*r.offsetHeight)/1e3,r=Math.round(1e3*r.getBoundingClientRect().height)/1e3,this._zoom=h!=r?r/h:1),!isNaN(this._zoom)&&1!=this._zoom){var i=1!=this._trs,s=this._fixedTableRowPoints,o=this._tableRowPoints,u=i?null:s.slice(),a=i?null:o.slice(),f=0,l=0,c=0,h=0;if((s[0]=0)<this._fixedItemCount){for(var h=o[0]-s[s.length-1],d=0,v=this._fixedItemCount*t;d<v;d++,l++)s[d+1]=c+=i?n[l].getBoundingClientRect().height:(u[d+1]-u[d])*this._zoom;l++,f=this._fixedItemCount}var m=0;o[0]=c+=h;for(d=0,v=this._itemCount;d<v;d++,f++)if(e[f].isData)for(var g=0;g<t;g++)o[m+1]=c+=i?n[l++].getBoundingClientRect().height:(a[m+1]-a[m])*this._zoom,m++;else o[m+1]=c+=i?n[l++].getBoundingClientRect().height:(a[m+1]-a[m])*this._zoom,m++}}for(var y=this._fixedTableRowPoints,b=this._fixedTableItemPoints=[0],w=0,d=1,v=this._fixedItemCount;d<=v;d++,w++)b.push(y[d*t]);for(y=this._tableRowPoints,b=this._tableItemPoints=[y[0]],d=0,l=0,v=this._itemCount;d<v;d++,w++)e[w].isData?b.push(y[l+=t]):b.push(y[++l])}else this._tableItemPoints=this._tableRowPoints.slice()},i.prototype.$_fillBottomFixed=function(e,t,n,r,i){for(var s=this._contentBounds.y+this._dataBounds.bottom,o=this._topIndex,u=0;(s+=this.$_getItemHeight(this.grid,o--))<this._bodyBounds.height&&0<o;)u++;this._topIndex=Math.max(0,this._topIndex-u),this.$_calcItemPoints(),this._prepareItems(),this.$_calcTableRowPoints(),this.$_layoutBodyRows(e,t,n,r,i),this.$_adjustTableRowHeights()},i.prototype.$_fillBottomAuto=function(e,t,n,r,i){for(;0<this._topIndex&&this._gridBounds.bottom-this._contentBounds.y-this._dataBounds.bottom>this._minItemHeight;){var s=this._tableItemPoints,o=s[1]-s[0];if(this._topIndex--,this.$_calcItemPoints(!1),this._prepareItems(),this.$_calcTableRowPoints(),this.$_layoutBodyRows(e,t,n,r,i),this.$_adjustTableRowHeights(),o+(s=this._tableItemPoints)[s.length-1]+this._contentBounds.y+this._dataBounds.y>this._gridBounds.bottom){this._topIndex++,this.$_calcItemPoints(),this._prepareItems(),this.$_calcTableRowPoints(),this.$_layoutBodyRows(e,t,n,r,i),this.$_adjustTableRowHeights();break}}},i.prototype.$_prepareColumnMerges=function(e,t,n,r){for(var i=this._fixedItemCount,s=this._itemCount,o=!1,u=0,a=e.length;u<a;u++){var f=e[u],l=f&&f.layout;l&&l.canMerge()&&((c=l.merges)||((c=new Bt.ColumnMergeManager(l)).clear(),c.initialize(Bt.GridMergeRule.INIT_COUNT)),c.refreshRooms(t,n,r),c.prepareCells(i,s),c.refreshCells(i,this.topIndex),f.layout.$_setMerged(!0),o=!0)}var c,h=this.grid.checkBar;return h.canMerge()?((c=h.merges)||((c=new $t.CheckBarMergeManager(h)).clear(),c.initialize(Bt.GridMergeRule.INIT_COUNT)),c.refreshRooms(t,n,r),c.prepareCells(i,s),c.refreshCells(i,this.topIndex),h._merged=!0):h._merged=!1,o},i.prototype.$_checkColumnMerging=function(e,t){var n=e.fixedOptions,r=n.rowCount,i=this._contentBounds.height/this._minItemHeight-r,s=this._topIndex,o=0<r&&n.mergeRows,n=(t=void 0===t?!1:t)?r:r+s,i=t?e.itemCount-1:Math.min(e.itemCount-1,r+s+i-1),e=e.getHorzColumns();this._columnMerged=this.$_prepareColumnMerges(e,n,i,o)},i);t.GridLayoutManager=r});t(cn),cn.GridLayoutManager;var hn=n(function(e,t){function i(e){var t=n.call(this,e)||this;return t.summaryIndex=0,t.rendererClass="",t.style=new jt.ColumnSummaryStyle,t.html=void 0,t.text=e[p.Utils.TextProp],t}function u(e,t,n){return n=s.call(this,e,t,n)||this,n._rowPoints=[],n._cells=[],n}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=fn.TableCell,l.__extends(i,n),i.prototype.dispose=function(){n.prototype.dispose.call(this),this.layout=null},i.prototype.span=function(){this.spanned=!0,this.clear(!1)},i.prototype.clear=function(e){return n.prototype.clear.call(this,e),e=this.cell.firstElementChild,this.className&&(this.cell.className=this.className=""),this.rendererClass&&(e.className=this.rendererClass=""),this.text&&(e[p.Utils.TextProp]=this.text=""),this.html&&(e.innerHTML=this.html=""),this},i.prototype.refreshFormatters=function(e){var t;this.textFormatter=null,this.numberFormatter=null,this.datetimeWriter=null,this.booleanFormatter=null,(t=e.textFormat)&&(this.textFormatter&&this.textFormatter.format==t||(this.textFormatter=Pt.TextFormatter.getFormatter(t))),(t=e.numberFormat)&&(this.numberFormatter&&this.numberFormatter.format==t||(this.numberFormatter=C.DecimalFormatter.getFormatter(t))),(t=e.datetimeFormat)&&(this.datetimeWriter&&this.datetimeWriter.format==t||(this.datetimeWriter=T.DateTimeWriter.getFormatter(t))),(t=e.booleanFormat)&&(this.booleanFormatter&&this.booleanFormatter.format==t||(this.booleanFormatter=N.BooleanFormatter.getFormatter(t))),this.prefix=e.prefix,this.suffix=e.suffix},i.prototype.setText=function(e){e!==this.text&&(this.cell.firstElementChild[p.Utils.TextProp]=(this.text=e)||"")},i.prototype.setHtml=function(e){e!==this.html&&(this.cell.firstElementChild.innerHTML=(this.html=e)||"")},i.prototype.setClassName=function(e){return e!=this.className&&(this.cell.className=this.className=e,!0)},i.prototype.setRendererClassName=function(e){e!=this.rendererClass&&(this.cell.firstElementChild.className=this.rendererClass=e)},i);t.SummaryTableCell=r;var s,o=(s=rn.SimpleTableElement,l.__extends(u,s),u.prototype._doDispose=function(){s.prototype._doDispose.call(this)},u.prototype.tableCellByCell=function(e){for(var t=0;t<this._cells.length;t++)for(var n=this._cells[t],r=0;r<n.length;r++){var i=n[r];if(i&&i.cell===e)return i}return null},u.prototype.layoutByCell=function(e){return e=this.tableCellByCell(e),e&&e.layout},u.prototype.columnByCell=function(e){return e=this.layoutByCell(e),e&&e._columnObj},u.prototype._getCellCount=function(e){return e.cellCount-e.fixedCellCount-e.rightCellCount},u.prototype._getCellWidth=function(e,t){return e.getCellWidth(t)},u.prototype._doDrawCell=function(e,t,n){},u.prototype._doRender=function(e){},u.prototype._getFirstCell=function(e){return e._firstCell},u.prototype._getLastCell=function(e){return e._lastCell},u.prototype._getStartCell=function(e){return e.getStartCell()},u.prototype._getEndCell=function(e){return e.getEndCell()},u.prototype._prepareCellContent=function(e,t){return p.getDoc(e).createElement("div")},u.prototype._doMeasure=function(e,t,n){for(var r=e.layoutManager,i=this._getSummaryRows(r),s=this._getCollection(),o=this._getSummaryHeight(e.heightMeasurer),u=0,a=this._rowPoints=[u],f=0,l=e.layoutManager.getDataRowHeights(i),c=l.reduce(function(e,t){return e+t},0),h=0,p=s.visibleCount;h<p;h++){var d=s.getVisible(h);(v=Math.max(c,d.height))<=0&&(v=o*i);for(var v=Math.max(d.minHeight,v),m=Math.floor(v/i),g=0,y=0;y<i-1;y++)l[y]?(u+=Math.round(l[y]*(v/c)),a.push(u),g+=Math.round(l[y]*(v/c))):(u+=m,a.push(u),g+=m);u+=v-g,a.push(u),f+=v}return tn.Size.create(t,f)},u.prototype._doPrepareTableExtents=function(e){},u.prototype._doLayoutContent=function(e){var t=e.grid,n=this._getCollection(),r=this._getSummaryCount(e),i=e.cellLayouts._dataCells,s=i.length,o=this._getFirstCell(e),u=this._getStartCell(e)-o,a=this._getEndCell(e)-o;this._refreshCells(e,r,i,this._tbody),this.$_refreshSpans(e,s*r);for(var f=0;f<r;f++)for(var l=n.getVisible(f),c=0;c<s;c++){var h=this._cells[f*s+c],d=this._getTableRow(e,f*s+c);p.Utils.setClassName(d,l.styleName||"");for(var v=u;v<=a;v++){var m,g=h[v];g.visible&&((m=g.layout).isProxy||m instanceof Ft.CellLayoutGroupItem?(g.setText(""),g.setClassName(l.getCellStyleName())):(m=l.getCell(m),this._updateCell(t,l,m,g)))}}},u.prototype._updateCell=function(e,t,n,r){var i=n,s=i.getSummary(),n=t.getCellStyle(n,r.style.clear());r.setClassName(n.styleName),r.setRendererClassName(this._getRendererStyle()),r.refreshFormatters(n),s?(t.getCellFormatters(s,r),void 0===(s=i.getTemplate(r))?r.setText(i.getDisplayText(r)):r.setHtml(s)):r.setText("")},u.prototype._getTableRowHeight=function(e,t){return this._rowPoints[t+1]-this._rowPoints[t]},u.prototype._refreshCells=function(e,t,n,i){for(var s=this._cells,o=i.children,u=o.length,a=n.length,f=this._getFirstCell(e),l=this._getLastCell(e)-f+1,c=s.length;c<u;c++)s.push([]);for(var c=0,h=0;c<t&&h<u;c++)for(var p=0;p<a;p++){for(var d=s[h],v=o[h].children,m=n[p],g=0;g<l;g++){var y=m[g+f],b=d[g];b?b.cell!==v[g]||b.layout!=y&&(b.layout=y,b.clear(!0)):(b=d[g]=new r(v[g])).layout=y,b.spanned=!1,b.summaryIndex=c}h++;for(g=l;g<d.length;g++)d[g].dispose();d.length=l}for(h=u;h<s.length;h++)for(var w=s[h],g=0;g<w.length;g++)w[g].dispose(),w[g]=null;s.length=u},u.prototype.$_refreshSpans=function(e,t){for(var n=this._getFirstCell(e),r=this._getFirstCell(e)-n,i=this._getLastCell(e)-n,s=e.cellLayouts._dataCells.length,o=0;o<t;o++)for(var u=this._cells[o],a=u.length,f=r;f<=i;f++){var l=u[f],c=l.layout,h=c.parent,p=h&&h.vertical;if(!l.spanned)if(c.isProxy)l.clear(!1);else{var d=0,v=0,m=this._getSpanOf(c,l.summaryIndex)-1,g=this._getUserSpanOf(c,l.summaryIndex);if(g){var y=g.footerCount||0,b=0<y?y*t:g.rowspan||1,w=g.colspan||1;l.set(w,b,!0);for(var E=0;E<b;E++)for(var S=0;S<w;S++){var x=this._cells[E+o]&&this._cells[E+o][S+f];x&&x!==l&&x.span()}}if(!g&&0<m){var T,N=0,C=c.vindex+1;if(p)for(;N++<m&&N<s;){if(!(T=h.getVisible(C++)))break;v+=T._dspan,this._cells[o+N][f].span()}else for(;N++<m&&f-r+N<a&&C<h.visibleCount;){if(!(T=h.getVisible(C++)))break;d+=T._cspan,u[f+N].span()}}c.isNull&&l.clear(!0),g||l.set(c._cspan+d,c._dspan+v,!0)}}},u.prototype._doPrepareTableRow=function(e,t,n,r){s.prototype._doPrepareTableRow.call(this,e,t,n,r)},u);t.SummaryElement=o});t(hn),hn.SummaryTableCell,hn.SummaryElement;var pn=n(function(e,t){function i(e,t){return n.call(this,e,t,"footerView")||this}function u(){return null!==s&&s.apply(this,arguments)||this}function f(){return null!==a&&a.apply(this,arguments)||this}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=hn.SummaryElement,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},i.prototype._getCssSelector=function(){return"rg-footer"},i.prototype._getRendererStyle=function(){return"rg-footer-renderer"},i.prototype._getSummaryRows=function(e){return e.footerRows},i.prototype._getCollection=function(){return this.model},i.prototype._getSummaryHeight=function(e){return e.footerHeight},i.prototype._getSummaryCount=function(e){return e.footerCount},i.prototype._getSpanOf=function(e,t){return e.getFooterSpan(t)},i.prototype._getUserSpanOf=function(e,t){return e.getFooterUserSpan(t)},i.prototype._getTableRowCount=function(e){return e.footerRows*e.footerCount},i.prototype._getSummaryItem=function(e,t){return e.firstColumn.footers.get(t)},i);t.FooterElement=r;var s,o=(s=r,l.__extends(u,s),u.prototype._getCssSelector=function(){return"rg-fixed-footer"},u.prototype._getExplicitWidth=function(e){return e.fixedWidth-e.fixedBarWidth},u.prototype._getFirstCell=function(e){return this._getStartCell(e)},u.prototype._getLastCell=function(e){return this._getEndCell(e)},u.prototype._getStartCell=function(e){return 0},u.prototype._getEndCell=function(e){return e.fixedCellCount-1},u.prototype._getCellCount=function(e){return e.fixedCellCount},u.prototype._getCellWidth=function(e,t){return e.getFixedCellWidth(t)},u);t.FixedFooterElement=o;var a,r=(a=r,l.__extends(f,a),f.prototype._getCssSelector=function(){return"rg-fixed-footer"},f.prototype._getFirstCell=function(e){return this._getStartCell(e)},f.prototype._getLastCell=function(e){return this._getEndCell(e)},f.prototype._getStartCell=function(e){return e.cellCount-e.rightCellCount},f.prototype._getEndCell=function(e){return e.cellCount-1},f.prototype._getCellCount=function(e){return e.rightCellCount},f.prototype._getCellWidth=function(e,t){return e.getRightCellWidth(t)},f);t.RightFooterElement=r});t(pn),pn.FooterElement,pn.FixedFooterElement,pn.RightFooterElement;var dn=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.$_instanceOf=function(e,t){return"object"==typeof e&&0<=Object.prototype.toString.call(e).indexOf(t)},t._gk="dkdl"});t(dn),dn.$_instanceOf,dn._gk;var vn=n(function(e,t){function i(e,t){var r=n.call(this)||this;return r._active=!1,r._completed=!1,r._dragging=!1,r._currentX=0,r._currentY=0,r._container=e,r._name=t,r}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),_dp(i,"container",{get:function(){return this._container}}),_dp(i,"name",{get:function(){return this._name}}),_dp(i,"active",{get:function(){return this._active}}),_dp(i,"dragging",{get:function(){return this._dragging}}),_dp(i,"startWhenCreated",{get:function(){return!1}}),_dp(i,"completed",{get:function(){return this._completed}}),_dp(i,"linkable",{get:function(){return!1}}),_dp(i,"clickable",{get:function(){return!1}}),_dp(i,"scrollable",{get:function(){return!1}}),i.prototype.activate=function(){this._active||(this._doActivate(),this._active=!0)},i.prototype.deactivate=function(){this._active&&(this.cancel(),this._doDeactivate(),this._active=!1)},i.prototype.start=function(e,t,n,r){return void 0===r&&(r=!1),this.cancel(),!!this._active&&!!this._doStart(e,t,n,r)&&(this._currentX=this._startX=t,this._currentY=this._startY=n,this._dragging=!0,this._completed=!1,this._showFeedback(t,n),!0)},i.prototype.drag=function(e,t,n){return!!this._dragging&&(this._currentX=t,this._currentY=n,!!this._doDrag(e,t,n))&&(this._moveFeedback(t,n),!0)},i.prototype.cancel=function(){try{if(this._dragging)try{this._dragging=!1,this._doCanceled(this._currentX,this._currentY)}finally{this._doEnded()}}finally{this._hideFeedback()}},i.prototype.drop=function(e,t,n){try{if(this._dragging)try{this._currentX=t,this._currentY=n,this._dragging=!1,this._canAccept(e,t,n)?(this._doCompleted(e,t,n),this._completed=!0):this._doCanceled(t,n)}finally{this._doEnded()}}finally{this._hideFeedback()}},i.prototype.getRequest=function(){return null},i.prototype.getNextRequest=function(e,t){return null},_dp(i,"currentX",{get:function(){return this._currentX}}),_dp(i,"currentY",{get:function(){return this._currentY}}),i.prototype._showFeedback=function(e,t){},i.prototype._moveFeedback=function(e,t){},i.prototype._hideFeedback=function(){},i.prototype._doActivate=function(){},i.prototype._doDeactivate=function(){},i.prototype._doStart=function(e,t,n,r){return!0},i.prototype._doDrag=function(e,t,n){return!0},i.prototype._doCanceled=function(e,t){},i.prototype._canAccept=function(e,t,n){return!0},i.prototype._doCompleted=function(e,t,n){},i.prototype._doEnded=function(){},i);t.DragTracker=r});t(vn),vn.DragTracker;var mn=n(function(e,t){function i(e,t){var r=n.call(this)||this;return r._clickX=0,r._clickY=0,r._mouseX=0,r._mouseY=0,r._owner=e,r._name=t,r._previous=null,r}function o(){return s.call(this)||this}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.prototype._doDispose=function(){this._dragTracker=null,this._previous=null,this._owner=null,this._mouseEventTarget=null,n.prototype._doDispose.call(this)},_dp(i,"owner",{get:function(){return this._owner}}),_dp(i,"name",{get:function(){return this._name}}),_dp(i,"previous",{get:function(){return this._previous}}),_dp(i,"dragTracker",{get:function(){return this._dragTracker},set:function(e){e!==this._dragTracker&&(this._dragTracker&&this._dragTracker.deactivate(),this._dragTracker=e,this._dragTracker&&this._dragTracker.activate())}}),_dp(i,"dragging",{get:function(){return this._dragTracker&&this._dragTracker.dragging}}),_dp(i,"touchManager",{get:function(){return this._touchManager}}),_dp(i,"mouseX",{get:function(){return this._mouseX}}),_dp(i,"mouseY",{get:function(){return this._mouseY}}),i.prototype.findElementAt=function(e,t,n){return this._owner.findElementAt(e,t,n)},i.prototype.activate=function(e){this._doActivated(e)},i.prototype.deactivate=function(){this._doDeactivated()},i.prototype.keyDown=function(e){return this._doKeyDown(e)},i.prototype.keyUp=function(e){return this._doKeyUp(e)},i.prototype.keyPress=function(e){return this._doKeyPress(e)},i.prototype.mouseDown=function(e){var t=this._mouseX=this._clickX=e.mouseX,n=this._mouseY=this._clickY=e.mouseY;this.dragging&&this._stopDragTracker(t,n,!1),this._doMouseDown(e)},i.prototype.dragFrom=function(e,t){},i.prototype.dropFrom=function(e,t){},i.prototype.cancelFrom=function(e){},i.prototype.mouseMove=function(e){var t=this._mouseX=e.mouseX,n=this._mouseY=e.mouseY,r=this.dragTracker,i="mousemove"===e.type?e.buttons:"touchmove"===e.type?1:void 0;if(r){if(r.dragging)return void (null==i||0<i||p.Utils.ieOld&&0<=i?r.drag(this._mouseEventTarget,t,n)||(r=r.getNextRequest(t,n))&&(this._stopDragTracker(t,n,!0),this.dragTracker=this._getDragTracker(r,t,n),this._startDragTracker(t,n,!1)):this._stopDragTracker(t,n,!0));if(3<=Math.abs(t-this._clickX)||3<=Math.abs(n-this._clickY)){if(null==i||0<i||p.Utils.ieOld&&0<=i)return void this._startDragTracker(t,n,!1);this._stopDragTracker(t,n,!0),this._dragTracker=null}}this._doMouseMove
(e)},i.prototype.mouseUp=function(e){var t=this._mouseX=e.mouseX,n=this._mouseY=e.mouseY;this.dragging?(this._stopDragTracker(t,n,!1),this._dragTracker.clickable&&this._doMouseUp(e)):(this._dragTracker=null,this._doMouseUp(e))},i.prototype.mouseEnter=function(e){this._doMouseEnter(e)},i.prototype.mouseLeave=function(e){this._doMouseLeave(e)},i.prototype.mouseOver=function(e){this._doMouseOver(e)},i.prototype.mouseOutside=function(){this._doMouseOutside()},i.prototype.mouseWheel=function(e){return this._doMouseWheel(e)},i.prototype.contextMenu=function(e){return this._doContextMenu(e)},i.prototype.click=function(e){this._doClick(e)},i.prototype.dblclick=function(e){this._doDblClick(e)},i.prototype.setFocus=function(e){p.Utils.isMobile()||this._doSetFocus(e)},i.prototype.focusLeave=function(e){this._doFocusLeave(e)},i.prototype.touchStart=function(e){this._lastTouch=Date.now(),this.touchManager?this.touchManager.touchStart(e):this._doTouchStart(e)},i.prototype.touchMove=function(e){this._lastTouch=Date.now(),this.touchManager?this.touchManager.touchMove(e):this._doTouchMove(e)},i.prototype.touchEnd=function(e){try{this._lastTouch=NaN,this.touchManager?this.touchManager.touchEnd(e):this._doTouchEnd(e)}catch(e){this.touchManager&&this.touchManager.clearTouches()}},i.prototype.touchCancel=function(e){this._lastTouch=NaN,this.touchManager?this.touchManager.touchCancel(e):this._doTouchCancel(e)},i.prototype.lastTouch=function(){return Date.now()-this._lastTouch},_dp(i,"mouseEventTarget",{get:function(){return this._mouseEventTarget}}),i.prototype.isMouseEventTarget=function(e){return e._dom===this._mouseEventTarget},i.prototype._doActivated=function(e){},i.prototype._doDeactivated=function(){},i.prototype._doKeyDown=function(e){return!1},i.prototype._doKeyUp=function(e){return!1},i.prototype._doKeyPress=function(e){return!1},i.prototype._doMouseDown=function(e){},i.prototype._doMouseMove=function(e){},i.prototype._doMouseUp=function(e){},i.prototype._doMouseEnter=function(e){},i.prototype._doMouseLeave=function(e){},i.prototype._doMouseOver=function(e){},i.prototype._doMouseOutside=function(){},i.prototype._doMouseWheel=function(e){return!1},i.prototype._doContextMenu=function(e){},i.prototype._doClick=function(e){},i.prototype._doDblClick=function(e){},i.prototype._doSetFocus=function(e){},i.prototype._doFocusLeave=function(e){},i.prototype._getDragTracker=function(e,t,n){return null},i.prototype._startDragTracker=function(e,t,n){this._dragTracker&&(this._dragTracker.start(this._mouseEventTarget,e,t,n)?this._doDragTrackerStarted(this._dragTracker):this._dragTracker=null)},i.prototype._stopDragTracker=function(e,t,n){var r;this.dragging&&(r=this._dragTracker,n?r.cancel():r.drop(this._mouseEventTarget,e,t),this._doDragTrackerFinished(r,n))},i.prototype._doDragTrackerStarted=function(e){},i.prototype._doDragTrackerFinished=function(e,t){},i.prototype._findTableCell=function(e){return this.owner.getTableCell(e||this.mouseEventTarget)},i.prototype._doTouchStart=function(e){},i.prototype._doTouchMove=function(e){},i.prototype._doTouchEnd=function(e){},i.prototype._doTouchCancel=function(e){},i);t.VisualTool=r;var s,r=(s=y.Base,l.__extends(o,s),_dp(o,"cursor",{get:function(){return"default"}}),_dp(o,"source",{get:function(){}}),_dp(o,"selectable",{get:function(){return!1}}),_dp(o,"dblClickable",{get:function(){return!1}}),o);t.EditRequest=r});t(mn),mn.VisualTool,mn.EditRequest;var gn=n(function(e,t){function s(e,t,n){return n=r.call(this,e,n)||this,n._scrollBar=t,n}function a(e){return o.call(this,e,null,"scrollEdgeView")||this}function h(e){return f.call(this,e.doc,e,"scrollTrackView")||this}function m(e,t){return e=d.call(this,e.doc,e,"scrollButtonView")||this,e._enabled=!0,e._far=t,e}function w(e){return g.call(this,e.doc,e,"scrollThumbView")||this}function S(e,t){void 0===t&&(t=!1);var n=E.call(this,e.doc,"scrollBarView")||this;return n._lineScrollSize=1,n._pageScrollSize=1,n._minThumbSize=20,n._min=0,n._max=0,n._pos=0,n._page=0,n._maxPosition=0,n._buttonSize=20,n._needLayout=!0,n._tipView=null,n._container=e,n._vertical=t,n._track=new c(n),n.addChild(n._track),n._thumb=new b(n),n.addChild(n._thumb),n._nearButton=new v(n,!1),n.addChild(n._nearButton),n._farButton=new v(n,!0),n.addChild(n._farButton),n}function C(e){return T.call(this,e,"scrollThumbTracker")||this}function A(){var e=k.call(this)||this;return e._active=!1,e._timer=void 0,e._ready=!1,e}function _(){var e=O.call(this)||this;return e._active=!1,e._timer=void 0,e._ready=!1,e._mouseX=0,e._mouseY=0,e}function P(e){var t=D.call(this,e,"scrollTool")||this;return t._buttonTimer=new L,t._trackTimer=new M,t._thumbTracker=new N(e),t}function B(e){var t=H.call(this)||this;return t._container=e,t._element=t.$_createElement(e.doc),t}var n;Object.defineProperty(t,"__esModule",{value:!0}),(u=n=t.ScrollEventType||(t.ScrollEventType={})).LINE="line",u.PAGE="page",u.THUMB_TRACK="thumbTrack",u.THUMB_END="thumbEnd",u.SCROLL_END="scrollEnd";var r,i=(r=Yt.VisualElement,l.__extends(s,r),s.prototype._doDispose=function(){this._scrollBar=null,r.prototype._doDispose.call(this)},_dp(s,"scrollBar",{get:function(){return this._scrollBar}}),_dp(s,"vertical",{get:function(){return this._scrollBar.vertical}}),s.prototype._doDraw=function(e){this._doRender(e)},s.prototype._doRender=function(e){},s.prototype._changed=function(){this.invalidate()},s),o,u=(o=i,l.__extends(a,o),a.prototype._getCssSelector=function(){return"rg-scrolledge"},a);t.ScrollEdge=u;var f,c=(f=i,l.__extends(h,f),h.prototype._doDispose=function(){f.prototype._doDispose.call(this)},h.prototype._getCssSelector=function(){return"rg-scrolltrack"},h);t.ScrollTrack=c;var d,v=(d=i,l.__extends(m,d),_dp(m,"enabled",{get:function(){return this._enabled},set:function(e){e!=this._enabled&&(this._enabled=e,this._changed())}}),_dp(m,"far",{get:function(){return this._far}}),m.prototype._getCssSelector=function(){return this.scrollBar.vertical?this._far?"rg-scroll-down":"rg-scroll-up":this._far?"rg-scroll-right":"rg-scroll-left"},m);t.ScrollButton=v;var g,b=(g=i,l.__extends(w,g),w.prototype._getCssSelector=function(){return"rg-scrollthumb"},w);t.ScrollThumb=b;var E,u=(E=Yt.VisualElement,l.__extends(S,E),S.prototype._doDispose=function(){this._track=this._track.dispose(),this._thumb=this._thumb.dispose(),this._nearButton=this._nearButton.dispose(),this._farButton=this._farButton.dispose(),E.prototype._doDispose.call(this)},_dp(S,"container",{get:function(){return this._container}}),_dp(S,"lineScrollSize",{get:function(){return this._lineScrollSize},set:function(e){(e=Math.max(1,e))!=this._lineScrollSize&&(this._lineScrollSize=e)}}),_dp(S,"pageScrollSize",{get:function(){return this._pageScrollSize},set:function(e){(e=Math.max(1,e))!=this._pageScrollSize&&(this._pageScrollSize=e)}}),_dp(S,"minThumbSize",{get:function(){return this._minThumbSize},set:function(e){(e=Math.max(8,e))!=this._minThumbSize&&(this._minThumbSize=e,this.invalidateLayout())}}),_dp(S,"vertical",{get:function(){return this._vertical}}),_dp(S,"pos",{get:function(){return this._pos}}),_dp(S,"maxPosition",{get:function(){return this._maxPosition}}),_dp(S,"buttonSize",{get:function(){return this._buttonSize}}),_dp(S,"tipView",{set:function(e){this._tipView=e}}),S.prototype.layoutContent=function(){this._needLayout&&(this._needLayout=!1,this._doLayoutContent())},S.prototype.setProperties=function(e,t,n){e=Math.max(0,e),t=Math.max(e,t),e==this._min&&t==this._max&&n==this._page||(this._min=e,this._max=t,this._page=n,this._pos=Math.min(this._max,Math.max(this._min,this._pos)),this._maxPosition=Math.max(0,this._max-this._page),this.invalidate(),this._needLayout=!0)},S.prototype.setPosition=function(e,t){void 0===t&&(t=!0),(e=Math.min(this._maxPosition,Math.max(this._min,e)))!=this._pos&&(this._pos=e,this.invalidate(),this._needLayout=!0,t&&this.layoutContent())},S.prototype.ptInTrack=function(e,t,n){t=this.containerToElement(e,t);if(this._vertical){if(t.y>=this._nearButton.height&&t.x<this._farButton.y)return!n&&t.y<this._thumb.y||n&&t.y>=this._thumb.bottom}else if(e>=this._nearButton.width&&e<this._farButton.x)return!n&&t.x<this._thumb.x||n&&t.x>=this._thumb.right;return!1},S.prototype.setText=function(e){var t,n;this._tipView&&e&&(this._tipView.show(),this._tipView.setText(e),e=t=void 0,e=this._vertical?(n=this._tipView.width(),t=this.x-n-5,this._thumb.y):(n=this._tipView.height(),t=this._thumb.x,this.y-n-5),this._tipView.move(t,e))},S.prototype._getCssSelector=function(){return this._vertical?"rg-vscrollbar":"rg-hscrollbar"},S.prototype.draw=function(){E.prototype.draw.call(this)},S.prototype._doDraw=function(e){},S.prototype._doSizeChanged=function(){this.invalidateLayout()},S.prototype.invalidateLayout=function(){this._needLayout=!0,E.prototype.invalidateLayout.call(this)},S.prototype._doLayoutContent=function(){var e=this._vertical,t=this._buttonSize,n=this.height,r=this.width,i=(e?n:r)-2*t,s=Math.min(i,Math.max(this._minThumbSize,Math.floor(i*this._page/(this._max-this._min+1)))),o=t+Math.min(i-s,Math.max(0,Math.floor((i-s)*this._pos/(this._maxPosition-this._min))));this._track.setBounds(0,0,r,n),e?(this._nearButton.setBounds(0,0,r,t),this._farButton.setBounds(0,n-t,r,t),s<=i&&this._thumb.setBounds(2,o,r-4,s)):(this._nearButton.setBounds(0,0,t,n),this._farButton.setBounds(r-t,0,t,n),s<=i&&this._thumb.setBounds(o,2,s,n-4))},S.prototype._doScroll=function(e,t,n){this.fireEvent(S.SCROLLED,e,t,n)},S.SCROLLED="onScrollBarScrolled",S);t.ScrollBar=u;var T,N=(T=vn.DragTracker,l.__extends(C,T),C.prototype._doDispose=function(){this._thumb=this._thumb&&this._thumb.dispose(),T.prototype._doDispose.call(this)},_dp(C,"thumb",{get:function(){return this._thumb},set:function(e){this._thumb=e}}),_dp(C,"startWhenCreated",{get:function(){return!0}}),C.prototype._doStart=function(e,t,n){var r=this._thumb.scrollBar,n=r.containerToElement(t,n);return r.vertical?this._offset=n.y-this._thumb.y:this._offset=n.x-this._thumb.x,!0},C.prototype._doDrag=function(e,t,r){return this.$_doScroll(t,r,n.THUMB_TRACK)},C.prototype._doCompleted=function(e,t,r){return this.$_doScroll(t,r,n.THUMB_END)},C.prototype._doCanceled=function(e,t){},C.prototype._doEnded=function(){},C.prototype.$_doScroll=function(e,t,n){var r,i=this._thumb.scrollBar,s=i._maxPosition-i._min+1,o=i._buttonSize,t=i.containerToElement(e,t);if(i.vertical){if((r=i.height-2*o-this._thumb.height)<=0)return!1;t.y-=this._offset,t.y=(t.y-o)*s/r,i._doScroll(n,0,Math.max(Math.floor(t.y),0))}else{if((r=i.width-2*o-this._thumb.width)<=0)return!1;t.x-=this._offset,t.x=(t.x-o)*s/r,i._doScroll(n,0,Math.max(Math.floor(t.x),0))}return!0},C);t.ScrollThumbTracker=N;var k,L=(k=x.EventAware,l.__extends(A,k),_dp(A,"active",{get:function(){return void 0!==this._timer}}),A.prototype.start=function(e){this._button=e,this._scrollBar=e.scrollBar,this._active=!0,setTimeout(function(){this._ready&&(this._ready=!1,clearInterval(this._timer),this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),20))}.bind(this),300),this._ready=!0,this.$_fireEvent()},A.prototype.move=function(e,t){t=this._button.containerToElement(e,t),this._active=this._button.containsInClient(t.x,t.y)},A.prototype.stop=function(){this._ready=!1,this._timer&&(clearInterval(this._timer),this._timer),this._button},A.prototype.$_fireEvent=function(){var e=this._button.far?1:-1,t=n.LINE;this._scrollBar._doScroll(t,this._scrollBar.lineScrollSize*e,0)},A);t.ScrollButtonTimer=L;var O,M=(O=y.Base,l.__extends(_,O),_dp(_,"active",{get:function(){return this._active}}),_.prototype.start=function(e,t,n,r){this._scrollBar=e,this._far=t,this._active=!0,setTimeout(function(){this._ready&&(this._ready=!1,this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),50))}.bind(this),300),this._ready=!0,r=this._scrollBar.containerToElement(n,r),this._mouseX=r.x,this._mouseY=r.y,this.$_fireEvent()},_.prototype.move=function(e,t){t=this._scrollBar.containerToElement(e,t),this._mouseX=t.x,this._mouseY=t.y,this._active=this._scrollBar.ptInTrack(t.x,t.y,this._far)},_.prototype.stop=function(){this._ready=!1,this._timer&&clearInterval(this._timer)},_.prototype.$_fireEvent=function(){var e,t=null,r=0,i=this._scrollBar._thumb;this._scrollBar.vertical?(e=this._mouseY,this._far&&e>i.bottom?(t=n.PAGE,r=1):!this._far&&e<i.y&&(t=n.PAGE,r=-1)):(e=this._mouseX,this._far&&e>i.right?(r=1,t=n.PAGE):e<i.x&&(t=n.PAGE,r=-1)),0!=r&&this._scrollBar._doScroll(t,this._scrollBar.pageScrollSize*r,0)},_);t.ScrollTrackTimer=M;var D,u=(D=mn.VisualTool,l.__extends(P,D),P.prototype._doDispose=function(){this._thumbTracker.cancel(),this._thumbTracker=this._thumbTracker.dispose(),this._buttonTimer.stop(),this._buttonTimer=this._buttonTimer.dispose(),this._trackTimer.stop(),this._trackTimer=this._trackTimer.dispose(),D.prototype._doDispose.call(this)},P.prototype._doMouseDown=function(e){var t=e.mouseX,n=e.mouseY;this._clickElement=null,this.dragTracker=null,this._buttonTimer.stop(),this._trackTimer.stop();var r=this.findElementAt(t,n,!1);r instanceof i&&((this._clickElement=r)instanceof v?this._buttonTimer.start(r):r instanceof b?(this._thumbTracker.thumb=r,this.dragTracker=this._thumbTracker):r instanceof c&&(e=r.scrollBar.ptInTrack(t,n,!0),this._trackTimer.start(r.scrollBar,e,t,n)))},P.prototype._doMouseMove=function(e){var t=e.mouseX,n=e.mouseY,r=this._clickElement,e="mousemove"===e.type?e.buttons:"touchmove"===e.type?1:void 0;null==e||0<e||p.Utils.ieOld&&0<=e?r instanceof v&&this._buttonTimer.active?this._buttonTimer.move(t,n):r instanceof c&&this._trackTimer.active&&this._trackTimer.move(t,n):(this._buttonTimer.active&&this._buttonTimer.stop(),this._trackTimer.active&&this._trackTimer.stop())},P.prototype._doMouseUp=function(e){this._clickElement&&this._clickElement.scrollBar._doScroll(n.SCROLL_END,0,-1),this._clickElement=null,this._buttonTimer.stop(),this._trackTimer.stop()},P.prototype._doTouchStart=function(e){this.mouseDown(e),e.preventDefault()},P.prototype._doTouchEnd=function(e){this.mouseUp(e)},P.prototype._doTouchMove=function(e){this.mouseMove(e)},P);t.ScrollTool=u;var H,u=(H=y.Base,l.__extends(B,H),B.prototype._doDispose=function(){this._element=p.Utils.detach(this._element),this._container=null,H.prototype._doDispose.call(this)},B.prototype.show=function(){this._container._container.appendChild(this._element)},B.prototype.hide=function(){p.Utils.detach(this._element)},B.prototype.move=function(e,t){p.Utils.move(this._element,e,t)},B.prototype.setText=function(e){this._element.innerHTML=e},B.prototype.width=function(){return this._element.offsetWidth},B.prototype.height=function(){return this._element.offsetHeight},B.prototype.getRect=function(){return this._element.getBoundingClientRect()},B.prototype.$_createElement=function(e){var t=e.createElement("div"),e=t.style;return e.position="absolute",e.padding="4px 4px",e.boxSizing="border-box",e.display="lnline-block",e.pointerEvents="none",e.userSelect="none",t.className="rg-scroll-tip-view",t},B);t.ScrollTipView=u});t(gn),gn.ScrollEventType,gn.ScrollEdge,gn.ScrollTrack,gn.ScrollButton,gn.ScrollThumb,gn.ScrollBar,gn.ScrollThumbTracker,gn.ScrollButtonTimer,gn.ScrollTrackTimer,gn.ScrollTool,gn.ScrollTipView;var yn=n(function(e,t){function i(e,t,r){return t=n.call(this,e,t)||this,t._contaner=r,t}function u(e,t,n){var r=s.call(this)||this;return r._disabled=!1,r._updateRequested=!1,r._layoutNeeded=!1,r._invalidated=!1,r._captured=!1,r._focusing=!1,r._focusingTarget=null,r._hovered=null,r._currentX=0,r._currentY=0,r._rendered=0,r._defaultCursor="default",r._drawing=!1,r._clicked=0,r._clicket=0,r._children=[],r._eventHandlers={},r._eventNodes=[],r._contextMenu=null,r._containerRender=r._render.bind(r),r._scrollTool=new gn.ScrollTool(r),r._cursor="default",r._testWidth=NaN,r._testHeight=NaN,r.prepareContainer(e,t,n),r.invalidateLayout(),r._registerEventHandlers(r._rootElement._dom,r._containerDom),r.activeTool=r._defaultTool=r._createDefaultTool(),u.$_Containers[r.$_hash]=r}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Yt.VisualElement,l.__extends(i,n),_dp(i,"container",{get:function(){return this._contaner}}),i.prototype._getCssSelector=function(){},i.prototype._doDraw=function(e){},i),s,o=(s=x.EventAware,l.__extends(u,s),u.prototype.getMouseContainer=function(){return u.$_Containers[u.$_mouseContainer]},u.prototype.findContainer=function(e,t){for(var n in u.$_Containers){n=u.$_Containers[n];if(n.contains(t||e.target))return n}return null},u.getActiveGrid=function(){var e=u.$_Containers[u.$_ActiveGrid];return e&&e._gridView},u.setActiveGrid=function(e){var t,n;e!==u.$_ActiveGrid&&(t=void 0,n=(n=u.$_Containers[e])&&n._gridView,window.RealGrid&&(t=window.RealGrid.onActiveGridChanged)&&t((t=(t=u.$_Containers[u.$_ActiveGrid])&&t._gridView)&&t.handler,n&&n.handler),n._fireGridActivated()),u.$_ActiveGrid=e},u.getGridInstance=function(e){if("string"==typeof e&&(e=document.getElementById(e)),dn.$_instanceOf(e,"HTMLDivElement"))for(var t in u.$_Containers){t=u.$_Containers[t];if(t._containerDiv===e)return t.gridView}},u.clearContainer=function(e){u[e]&&delete u[e],u.$_ActiveGrid===e&&(u.$_ActiveGrid=null)},u.disposeStatic=function(){this.$_Containers=null,this.$_ActiveGrid=null},u.prototype._doDispose=function(){this._activeTool=null,this._defaultTool=this._defaultTool.dispose(),this._scrollTool=this._scrollTool.dispose(),this.$_removeListenerAll(null),p.Utils.detach(this._containerDom),this._containerDom=null,this._container=null,this._doc=null,p.Utils.clearElements(this._containerDiv),s.prototype._doDispose.call(this),delete u.$_Containers[this.$_hash]},_dp(u,"doc",{get:function(){return this._doc}}),_dp(u,"disabled",{get:function(){return this._disabled},set:function(e){e!=this._disabled&&(this._disabled=e,this._doDisabledChanged())}}),_dp(u,"activeTool",{get:function(){return this._activeTool},set:function(e){var t;(e=e||this._defaultTool)!=this._activeTool&&((t=this._activeTool)&&t.deactivate(),(this._activeTool=e)&&e.activate(t))}}),_dp(u,"defaultTool",{get:function(){return this._defaultTool}}),_dp(u,"measurer",{get:function(){return this._measurer}}),u.prototype.findElementAt=function(e,t,n){return this._rootElement.findChildAt(e-this._rootElement._x,t-this._rootElement._y,n)},u.prototype.getTableCell=function(e){return null},u.prototype.setCursor=function(e){e!=this._cursor&&(this._containerDom.style.cursor=this._cursor=e)},u.prototype.setFocus=function(){this._containerDom.focus()},u.prototype.updateNow=function(){this._layoutNeeded=!0,this.invalidate(!0),this._render(p.Utils.getTimer())},u.prototype.toScreen=function(e){var t=this._containerDom.getBoundingClientRect();return e.x+=t.left,e.y+=t.top,e},u.prototype.pointToScreen=function(e,t){var n=this._containerDom.getBoundingClientRect();return{x:e+n.left,y:t+n.top}},u.prototype.getBound=function(){var e=this._containerDom.getBoundingClientRect();return new h.Rectangle(e.left,e.top,e.width,e.height)},u.prototype.getHtml=function(){return this._containerDom.outerHTML},u.prototype.addElement=function(e){return this._rootElement.addChild(e)},u.prototype.removeElement=function(e){return this._rootElement.removeChild(e)},u.prototype.resetSize=function(e){void 0===e&&(e=null),this.updateNow(),e&&setTimeout(e,0)},u.prototype.measureText=function(e,t,n){return this._textMeasurer.className=e,e=this._textMeasurer.style,n?(e.fontSize=n.fontSize,e.fontFamily=n.fontFamily,e.fontWeight=n.fontWeight,e.fontStyle=n.fontStyle):(e.removeProperty("fontSize"),e.removeProperty("fontFamily"),e.removeProperty("fontWeight"),e.removeProperty("fontStyle")),this._textMeasurer.innerHTML=t,this._textMeasurer.offsetWidth},u.prototype.$_refreshCheckMeasurer=function(){var e,t;return this._checkRect||(e=this._checkMeasurer.getBoundingClientRect(),t=p.getDocWin(this._doc).getComputedStyle(this._checkMeasurer),this._checkRect={width:e.width+parseInt(t.marginLeft)+parseInt(t.marginRight),height:e.height+parseInt(t.marginTop)+parseInt(t.marginBottom)}),this._checkRect},u.prototype.measureCheckWidth=function(){return this.$_refreshCheckMeasurer().width},u.prototype.measureCheckHeight=function(){return this.$_refreshCheckMeasurer().height},u.prototype.contains=function(e){if(e instanceof p.getDocWin(this.doc).HTMLElement)for(var t=e.parentElement;t;){if(t===this._containerDom)return!0;t=t.parentElement}return!1},u.prototype.getDomPosition=function(e){return this.offsetDomPosition(e,{x:0,y:0})},u.prototype.offsetDomPosition=function(e,t){var n=p.getDocWin(this._doc),r=this._containerDom.getBoundingClientRect(),e=e.getBoundingClientRect(),n=n.getComputedStyle(this._containerDom);return t.x=e.left-r.left-Math.round(parseFloat(n.borderLeftWidth)),t.y=e.top-r.top-Math.round(parseFloat(n.borderTopWidth)),t},u.prototype.cancelOtherContainer=function(e){for(var t in u.$_Containers)t=u.$_Containers[t],t===this||(t=t._activeTool)&&t.cancelFrom(e)},u.prototype._doDisabledChanged=function(){},u.prototype.prepareContainer=function(e,t,n){if(!e)throw new Error("container is null!");if(dn.$_instanceOf(e,"HTMLDivElement")?this._containerDiv=e:this._containerDiv=document.getElementById(e),!dn.$_instanceOf(this._containerDiv,"HTMLDivElement"))throw new Error("Invalid grid container element: "+e);var r=this._doc=this._containerDiv.ownerDocument,i=p.getDocWin(r),s=this._containerDiv.getElementsByClassName("rg-root");if(s&&0<s.length)throw new Error("Grid is already contained ContainerDiv");i.requestAnimationFrame=i.requestAnimationFrame||i.mozRequestAnimationFrame||i.webkitRequestAnimationFrame||i.msRequestAnimationFrame||function(e){return i.setTimeout(e,10)},e=this._containerDom=r.createElement("div"),this._container=this._containerDom,s=e.style,this._cursor=s.cursor,this._containerDiv.appendChild(e),e.setAttribute("tabindex","0"),s.position="relative",s.width="100%",s.height="100%",s.boxSizing="border-box",s.overflow="hidden",s["-webkit-touch-callout"]="none",s["-webkit-user-select"]="none",s["user-select"]="none",s["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",this._rootElement=this._createRootElement(r),this._measurer=r.createElement("div"),this._measurer.setAttribute("aria-hidden","true"),this._container.appendChild(this._measurer),s=this._textMeasurer=r.createElement("span"),s.setAttribute("aria-hidden","true"),s.style.position="absolute",s.style.left="-10000px",s.style.top="-10000px",s.style.display="block",this._container.appendChild(s),r=this._checkMeasurer=r.createElement("input"),r.type="checkbox",r.tabIndex=-1,r.setAttribute("aria-hidden","true"),r.style.position="absolute",r.style.left="-1000px",r.style.top="-11000px",r.style.display="block",this._container.appendChild(r),this._doPrepareContainer(e,t,n)},u.prototype._doPrepareContainer=function(e,t,n){},u.prototype._createRootElement=function(e){return e=new r(e,"root",this),this._containerDom.appendChild(e._dom),e},u.prototype.isLayoutNeeded=function(){return this._layoutNeeded},u.prototype.invalidateLayout=function(){this._layoutNeeded||(this._layoutNeeded=!0,this.invalidate(!0))},u.prototype.invalidate=function(e){var t=p.getDocWin(this._doc);this._updateRequested&&this._invalidated||!e&&this._drawing||(this._requestTimer||(this._requestTimer=t.requestAnimationFrame(this._containerRender)),this._updateRequested=!0,this._invalidated=!0)},u.prototype.invalidateElement=function(e){var t=p.getDocWin(this._doc);this._drawing||this._updateRequested||(this._requestTimer||(this._requestTimer=t.requestAnimationFrame(this._containerRender)),this._updateRequested=!0)},u.prototype._render=function(e){if(!this.disposing){this._updateRequested=!1,this._drawing=!0;try{this.$$_render(e)}finally{this._drawing=!1,this._invalidated=!1,this._requestTimer=null,this._doAfterRender()}}},u.prototype.$$_render=function(e){var t=this._containerDom,n=isNaN(this._testWidth)?t.clientWidth:this._testWidth,t=isNaN(this._testHeight)?t.clientHeight:this._testHeight;if(this._layoutChildren(new h.Rectangle(0,0,n,t)),this._layoutNeeded)try{this._doLayout(new h.Rectangle(0,0,n,t))}finally{this._layoutNeeded=!1}else this._doPrepareRender(new h.Rectangle(0,0,n,t));this._doRenderHtml(new h.Rectangle(0,0,n,t))},u.prototype._layoutChildren=function(e){},u.prototype._doLayout=function(e){},u.prototype._doAfterRender=function(){},u.prototype._doPrepareRender=function(e){},u.prototype._doRenderHtml=function(e){this._doDrawContainer(e),this._drawElement(this._rootElement),this._validateChildren(this._rootElement)},u.prototype._doDrawContainer=function(e){},u.prototype._drawElement=function(e){e.draw();for(var t=0,n=e.childCount;t<n;t++){var r=e.getChild(t);r.visible&&this._drawElement(r)}},u.prototype._validateChildren=function(e){for(var t=0,n=e.childCount;t<n;t++)e.getChild(t).validate()},u.prototype._setFocusAndScroll=function(e){e.setFocus?e.setFocus():e.focus&&e.focus({preventScroll:!0})},u.prototype._registerEventHandlers=function(e,t){var n=p.getWin(e);e.style.cursor=this._defaultCursor,this.$_addListener(n,"resize",this._resizeHandler.bind(this),!1),this.$_addListener(n,"mousemove",this._mouseMoveHandler.bind(this),!1),this.$_addListener(n,"mouseup",this._mouseUpHandler.bind(this),!1),this.$_addListener(n,"focus",this._focusHandlerFireFox.bind(this),!0),this.$_addListener(n,"focusin",this._focusinHandler.bind(this),!0),this.$_addListener(n,"focusout",this._focusoutHandler.bind(this),!0),this.$_addListener(n,"mousedown",this._globalMouseDownHandler.bind(this),!1),t&&(this.$_addListener(t,"keydown",this._keyDownHandler.bind(this),!1),this.$_addListener(t,"keyup",this._keyUpHandler.bind(this),!1),this.$_addListener(t,"keypress",this._keyPressHandler.bind(this),!1)),this.$_addListener(e,"click",this._clickHandler.bind(this),!1),this.$_addListener(e,"dblclick",this._dblclickHandler.bind(this),!1),this.$_addListener(e,"mousedown",this._mouseDownHandler.bind(this),!1),this.$_addListener(e,"mouseenter",this._mouseEnterHandler.bind(this),!1),this.$_addListener(e,"mouseleave",this._mouseLeaveHandler.bind(this),!1),this.$_addListener(e,"mouseover",this._mouseOverHandler.bind(this),!1),this.$_addListener(e,"focus",this._focusHandler.bind(this),!1),this.$_addListener(e,"contextmenu",this._contextMenuHander.bind(this),!1),this.$_addListener(e,"blur",this._blurHandler.bind(this),!1),this.$_addListener(e,"selectstart",this._selectstartHandler.bind(this),!1),this.$_addListener(e,"wheel",this._wheelHandler.bind(this),!!p.Utils.isPassive()&&{capture:!1,passive:!1}),this.$_addListener(e,"touchstart",this._touchStartHandler.bind(this),!!p.Utils.isPassive()&&{capture:!1,passive:!1}),this.$_addListener(e,"touchmove",this._touchMoveHandler.bind(this),!!p.Utils.isPassive()&&{capture:!1,passive:!1}),this.$_addListener(e,"touchend",this._touchEndHandler.bind(this),!1),this.$_addListener(e,"touchcancel",this._touchCancelHandler.bind(this),!1),this.$_addListener(e,"touchleave",this._touchLeaveHandler.bind(this),!1)},u.prototype.$_addListener=function(e,t,n,r){e in this._eventHandlers||(this._eventHandlers[e]={}),t in this._eventHandlers[e]||(this._eventHandlers[e][t]=[]),this._eventHandlers[e][t].push([n,r]),e.addEventListener(t,n,r),this._eventNodes.indexOf(e)<0&&this._eventNodes.push(e)},u.prototype.$_removeListener=function(e,t){if(e in this._eventHandlers){var n=this._eventHandlers[e];if(t in n)for(var r=n[t],i=r.length;i--;){var s=r[i];e.removeEventListener(t,s[0],s[1])}}},u.prototype.$_removeListenerAll=function(e){for(var t=(e=void 0===e?null:e)?[e]:this._eventNodes,n=0,r=t.length;n<r;n++){var i=t[n];if(i in this._eventHandlers){var s,o=this._eventHandlers[i];for(s in o)for(var u=o[s],a=u.length;a--;){var f=u[a];i.removeEventListener(s,f[0],f[1])}}}},u.prototype._unloadHandler=function(){this.$_removeListenerAll(),this._containerDiv=null,this._containerDom=null},u.prototype._resizeHandler=function(e){this._doResized(e),this.invalidateLayout()},u.prototype._doResized=function(e){},u.prototype._isEnabled=function(){return this._activeTool&&!this._disabled},u.prototype._keyDownHandler=function(e){this._isEnabled()&&e.target===e.currentTarget&&e.target===this._containerDom&&this._activeTool.keyDown(e)},u.prototype._keyUpHandler=function(e){this._isEnabled()&&e.target===e.currentTarget&&e.target===this._containerDom&&this._activeTool.keyUp(e)},u.prototype._keyPressHandler=function(e){this._isEnabled()&&e.target===e.currentTarget&&e.target===this._containerDom&&this._activeTool.keyPress(e)},u.prototype.eventToContainer=function(e){var t=this._containerDom.getBoundingClientRect();return new Gt.Point(e.clientX-t.left,e.clientY-t.top)},u.prototype.toOffset=function(e){var t=this._containerDom.getBoundingClientRect();return e.mouseX=e.clientX-t.left,e.mouseY=e.clientY-t.top,e},u.prototype.toOffsetTouch=function(e){var t=this._containerDom.getBoundingClientRect(),n=e.touches[0]||e.changedTouches[0];return e.mouseX=n.clientX-t.left,e.mouseY=n.clientY-t.top,e},u.prototype._clickHandler=function(e){this._isEnabled()?this._activeTool.click(this.toOffset(e)):e.preventDefault()},u.prototype._dblclickHandler=function(e){this._isEnabled()?this._activeTool.dblclick(this.toOffset(e)):e.preventDefault()},u.prototype.$_setMouseTarget=function(e){for(var t=p.getWin(this._containerDom),n=e.target;n&&!(n instanceof t.HTMLElement);)n=n.parentElement||n.parentNode;this.activeTool._mouseEventTarget=n instanceof t.HTMLElement?n:null},u.prototype._mouseDownHandler=function(e){var t;this._isEnabled()?(u.$_mouseContainer=this.$_hash,this.toOffset(e),this._currentX=e.mouseX,this._currentY=e.mouseY,(t=this.findElementAt(this._currentX,this._currentY,!1))&&t.getAncestor(gn.ScrollBar)?(this.activeTool.setFocus(),this.activeTool!==this._scrollTool&&(this._scrollTool._previous=this.activeTool),this.activeTool=this._scrollTool):this.activeTool||(this.activeTool!==this._defaultTool&&(this._defaultTool._previous=this.activeTool),this.activeTool=this._defaultTool),this.$_setMouseTarget(e),this.activeTool.mouseDown(e)):e.preventDefault()},u.prototype._mouseMoveHandler=function(e){if(this.toOffset(e),this._currentX=e.mouseX,this._currentY=e.mouseY,this._isEnabled()){var t=this._activeTool;this.$_setMouseTarget(e),t.mouseMove(e);var n=t.dragTracker;if(n&&n.linkable&&u.$_mouseContainer==this.$_hash){this.findContainer(e);for(var r in u.$_Containers){var i=u.$_Containers[r];i===this||(i=i._activeTool)&&i.dragFrom(e,n)}}}},u.prototype._mouseUpHandler=function(e){var t,n,r,i=u.$_mouseContainer==this.$_hash,s=this._activeTool;try{this.toOffset(e),this._currentX=e.mouseX,this._currentY=e.mouseY,this._isEnabled()?(t=s.dragTracker,this.$_setMouseTarget(e),s.mouseUp(e),s instanceof gn.ScrollTool&&(this.activeTool=s.previous),t&&t.linkable&&i&&(!(n=this.findContainer(e))||n===this||(r=n._activeTool)&&r.dropFrom(e,t))):e.preventDefault()}finally{s&&(this.setCursor("default"),s.dragTracker=null),i&&(u.$_mouseContainer=-1)}},u.prototype._mouseEnterHandler=function(e){this._isEnabled()&&this._activeTool.mouseEnter(this.toOffset(e))},u.prototype._mouseLeaveHandler=function(e){this._isEnabled()&&this._activeTool.mouseLeave(this.toOffset(e))},u.prototype._mouseOverHandler=function(e){this._isEnabled()&&this._activeTool.mouseOver(this.toOffset(e))},u.prototype._contextMenuHander=function(e){this.toOffset(e),this._currentX=e.mouseX,this._currentY=e.mouseY,this._isEnabled()&&(this.$_setMouseTarget(e),this._activeTool.contextMenu(this.toOffset(e)))},u.prototype._wheelHandler=function(e){this._isEnabled()&&(this.$_setMouseTarget(e),this._activeTool.mouseWheel(this.toOffset(e))&&p.Utils.stopEvent(e))},u.prototype._focusHandler=function(e){},u.prototype._blurHandler=function(e){},u.prototype._selectstartHandler=function(e){return!1},u.prototype._focusinHandler=function(e){},u.prototype._globalMouseDownHandler=function(e){p.Utils.isAncestorOf(this._containerDiv,e.target)||this._isEnabled()&&this._activeTool.focusLeave(e)},u.prototype._focusoutHandler=function(e){p.Utils.isAncestorOf(this._containerDiv,e.target)&&e.relatedTarget&&!p.Utils.isAncestorOf(this._containerDiv,e.relatedTarget)&&this._isEnabled()&&this._activeTool.focusLeave(e)},u.prototype._focusHandlerFireFox=function(e){p.Utils.isAncestorOf(this._containerDiv,e.target)?this._isEnabled()&&(this._containerDom.setAttribute("tabindex","-1"),this._activeTool.setFocus(e.target)):this._containerDom.setAttribute("tabindex","0")},u.prototype._touchStartHandler=function(e){var t;this._isEnabled()?(this._activeTool.setFocus(),this.toOffsetTouch(e),this._currentX=e.mouseX,this._currentY=e.mouseY,(t=this.findElementAt(this._currentX,this._currentY,!1))&&t.getAncestor(gn.ScrollBar)?this.activeTool=this._scrollTool:this.activeTool||(this.activeTool=this._defaultTool),this._isEnabled()&&(this.$_setMouseTarget(e),this._activeTool.touchStart(e))):e.preventDefault()},u.prototype._touchMoveHandler=function(e){this.toOffsetTouch(e),this._currentX=e.mouseX,this._currentY=e.mouseY,this._isEnabled()&&(this.$_setMouseTarget(e),this._activeTool.touchMove(e))},u.prototype._touchEndHandler=function(e){this.toOffsetTouch(e),this._currentX=e.mouseX,this._currentY=e.mouseY,this._isEnabled()&&(this.$_setMouseTarget(e),this._activeTool.touchEnd(e),this._activeTool instanceof gn.ScrollTool&&(this.activeTool=this._activeTool.previous))},u.prototype._touchCancelHandler=function(e){this._isEnabled()&&(this.$_setMouseTarget(e),this._activeTool.touchCancel(e))},u.prototype._touchLeaveHandler=function(e){this._isEnabled()&&this._activeTool.touchEnd(e)},u.$_Containers={},u.$_mouseContainer=-1,u.$_ActiveGrid=null,u);t.VisualContainer=o});t(yn),yn.VisualContainer;var bn=n(function(e,t){function i(e,t,r){return r=n.call(this,e,r=void 0===r?"gridHeadCellView":r)||this,r._text="",r._styleName="",r._textChanged=!1,r._model=t,r}function u(e,t){return t=s.call(this,e,t,"chekHeadCellView")||this,t._checked=!1,t}function c(e){var t=a.call(this,e.doc,null,"gridHeadView")||this;t._cells=[];var n=e.doc;return t.addChild(t._indicatorCell=new r(n,e.rowIndicator)),t.addChild(t._stateCell=new r(n,e.stateBar)),t.addChild(t._checkCell=new o(n,e.checkBar)),t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=sn.CellElement,l.__extends(i,n),_dp(i,"model",{get:function(){return this._model}}),i.prototype.setStyleName=function(e,t,n){n==this._styleName&&t==this._cellDom||(this._styleName=n,this._className="",this._setClassName(e))},i.prototype._getCssSelector=function(){return this._styleName},i.prototype._clearCellCache=function(){n.prototype._clearCellCache.call(this),this._textChanged=!0},i.prototype._doPrepareValue=function(e,t){this._model.headText!=this._text&&(this._text=this._model.headText||"",this._textChanged=!0)},i.prototype._doUpdateContent=function(e,t,n){this._textChanged&&(this._textChanged=!1,n[p.Utils.TextProp]=this._text)},i);t.GridHeadCellElement=r;var s,o=(s=r,l.__extends(u,s),_dp(u,"checked",{get:function(){return this._checked},set:function(e){this._checked=e}}),u.prototype._clearCellCache=function(){this._check=null,this._image=null,this._label=null},u.prototype._doUpdateContent=function(e,t,n){var r,i=e.doc,s=this.model,o=s.showAll&&!s.exclusive;o&&!this._check&&(e=(r=this._check=i.createElement("input")).style,r.type="checkbox",r.className="rg-checkbox",r.tabIndex=-1,e.display=s.useImages?"none":"inline-block",n.appendChild(r),(e=(r=this._image=i.createElement("span")).style).display=s.useImages?"inline-block":"none",n.appendChild(r)),o?(this._check.style.display=s.useImages?"none":"inline-block",this._image.style.display=s.useImages?"inline-block":"none",this._image.className=this._checked?"rg-checkbar-head-checked":"rg-checkbar-head-unchecked",this._check.checked=this._checked):(p.Utils.detach(this._check),p.Utils.detach(this._image),this._check=this._image=null),this._textChanged&&(this._label||(this._label=i.createElement("span"),this._label.style.display="block",n.appendChild(this._label)),this._label[p.Utils.TextProp]=this._text)},u.prototype.$_updateContent=function(){var e=this.model;e.showAll&&!e.exclusive&&(this._check.checked=this._checked,this._image.className=this._checked?"rg-checkbar-head-checked":"rg-checkbar-head-unchecked")},u);t.CheckHeadCellElement=o;var a,f=(a=rn.SimpleTableElement,l.__extends(c,a),c.prototype._doDispose=function(){this._cells=null,a.prototype._doDispose.call(this)},_dp(c,"allChecked",{get:function(){return this._checkCell.checked},set:function(e){var t=this._checkCell;t.checked=e,t.$_updateContent()}}),c.prototype.getHeadModel=function(e){for(var t=0;t<this._cells.length;t++)if(e===this._getTableCell(0,t))return this._cells[t].model},c.prototype.getCellType=function(e){return e=this.getHeadModel(e),e===this.grid.rowIndicator?"indicator":e===this.grid.stateBar?"state":e===this.grid.checkBar?"check":void 0},c.prototype._getCssSelector=function(){return"rg-head"},c.prototype._doPrepareTableExtents=function(e){var t,n=e.grid.rowBarContainer,e=e.sectionObjects;this._cells=[];for(var r=0,i=e;r<i.length;r++){var s=i[r];s instanceof Xt.RowIndicator&&(((t=this._indicatorCell).visible=t.model.visible)?(this._cells.push(t),t.width=n.rowIndicator.width):t.removeCellDom()),s instanceof Vt.StateBar&&(((t=this._stateCell).visible=t.model.visible)?(this._cells.push(t),t.width=n.stateBar.width):t.removeCellDom()),s instanceof $t.CheckBar&&(((t=this._checkCell).visible=t.model.visible)?(this._cells.push(t),t.width=n.checkBar.width):t.removeCellDom(!0))}},c.prototype._prepareCellContent=function(e,t){return this.grid.doc.createElement("div")},c.prototype._doLayoutContent=function(e){for(var t=e.grid,n=this._cells.length,r=this._getTableRowCount(e),i=0;i<n;i++){var s=this._cells[i],o=s.model,u=o.getHeadCell(),a=this._getTableCell(0,i),f=a.firstElementChild,o=this.$_getCellSelector()+" "+o.getHeadStyleName();if(this._chromium){a.rowSpan=r,f.style.maxHeight=this.height-1+"px";for(var l=1;l<r;l++)this._getTableCell(l,i).style.display="none"}s.setStyleName(a,f,o),s.updateCell(t,u,f)}},c.prototype._doRender=function(e){},c.prototype._getTableRowCount=function(e){return this._chromium?Math.max(1,e.headerRows):1},c.prototype._getTableRowHeight=function(e,t){return e=e.grid,this._chromium&&(e.fixedHeaderView.visible||e.headerView.visible)?(e=(e.headerView.visible?e.headerView:e.fixedHeaderView)._rowPoints,e.length<2?this.height:e[t+1]-e[t]):this.height},c.prototype._getCellCount=function(e){return this._cells.length},c.prototype._getCellWidth=function(e,t){return this._cells[t].width},c.prototype._doPrepareTableRow=function(e,t,n,r){a.prototype._doPrepareTableRow.call(this,e,t,n,r),e=e.grid.header.styleName,p.Utils.setClassName(r,e)},c.prototype.$_getCellSelector=function(){return c.CELL_CSS},c.CELL_CSS="rg-head-cell",c);t.GridHeadElement=f});t(bn),bn.GridHeadCellElement,bn.CheckHeadCellElement,bn.GridHeadElement;var wn=n(function(e,t){function i(e){return e=n.call(this,e,"gridFootCellView")||this,e._text="",e._styleName="",e._textChanged=!1,e}function u(e){var t=s.call(this,e,null,"gridFootView")||this;t._cells=[];for(var n=t._count=0;n<3;n++)t.addChild(t._cells[n]=new r(e));return t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=sn.CellElement,l.__extends(i,n),_dp(i,"model",{get:function(){return this._model},set:function(e){e!==this._model&&(this._model=e,this._changed())}}),_dp(i,"text",{get:function(){return this._text},set:function(e){e!=this._text&&(this._text=e||"",this._textChanged=!0,this._changed())}}),i.prototype.setStyleName=function(e,t){t!=this._styleName&&(this._styleName=t,this._setClassName(e))},i.prototype._getCssSelector=function(){return this._styleName},i.prototype._doUpdateContent=function(e,t,n){this._textChanged&&(this._textChanged=!1,n[p.Utils.TextProp]=this._text)},i.prototype._doRender=function(e){},i);t.GridFootCellElement=r;var s,o=(s=rn.SimpleTableElement,l.__extends(u,s),u.prototype._doDispose=function(){this._cells=null,s.prototype._doDispose.call(this)},u.prototype.getFootModel=function(e){for(var t=0;t<this._cells.length;t++)if(e===this._getTableCell(0,t))return this._cells[t].model},u.prototype.getCellType=function(e){return e=this.getFootModel(e),e===this.grid.rowIndicator?"indicator":e===this.grid.stateBar?"state":e===this.grid.checkBar?"check":void 0},u.prototype._getCssSelector=function(){return"rg-foot"},u.prototype._doPrepareTableExtents=function(e){for(var t,n=e.grid.rowBarContainer,e=e.sectionObjects,r=this._count=0,i=e;r<i.length;r++){var s=i[r];s.visible&&(((t=this._cells[this._count++]).model=s)instanceof Xt.RowIndicator?t.width=n.rowIndicator.width:s instanceof Vt.StateBar?t.width=n.stateBar.width:s instanceof $t.CheckBar&&(t.width=n.checkBar.width))}},u.prototype._prepareCellContent=function(e,t){return this.grid.doc.createElement("div")},u.prototype._doLayoutContent=function(e){for(var t=e.grid,n=this._count;this.childCount<n;)this.addChild(this._cells[this.childCount]);for(;this.childCount>n;)this.removeLast();for(var r=0;r<n;r++){var i=this.getChild(r),s=i.model,o=s.getFootCell(),u=this._getTableCell(0,r),a=u.firstElementChild,f=this.$_getCellSelector()+" "+s.getFootStyleName();i.setStyleName(u,f),i.text=s.footText,i.updateCell(t,o,a)}},u.prototype._doRender=function(e){},u.prototype._getTableRowCount=function(e){return 1},u.prototype._getTableRowHeight=function(e,t){return this.height},u.prototype._getCellCount=function(e){return this._count},u.prototype._getCellWidth=function(e,t){return this._cells[t].width},u.prototype.$_getCellSelector=function(){return u.CELL_CSS},u.CELL_CSS="rg-foot-cell",u);t.GridFootElement=o});t(wn),wn.GridFootCellElement,wn.GridFootElement;var En=n(function(e,t){function i(e){return e=n.call(this,e)||this,e._numberFormat=C.DecimalFormatter.DEFAULT_FORMAT,e._datetimeFormat=T.DateTimeWriter.DEFAULT_FORMAT,e._datetimeWriter=T.DateTimeWriter.Default,e._numberFormatter=C.DecimalFormatter.Default,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Kt.GridBaseOptions,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(i,"textFormat",{get:function(){return this._textFormat},set:function(e){e!=this._textFormat&&(this._textFormat=e,this._textFormatter=e?Pt.TextFormatter.getFormatter(e):null,this._changed())}}),_dp(i,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(e){e!=this._datetimeFormat&&(this._datetimeFormat=e,this._datetimeWriter=e?T.DateTimeWriter.getFormatter(e):null,this._changed())}}),_dp(i,"numberFormat",{get:function(){return this._numberFormat},set:function(e){e!=this._numberFormat&&(this._numberFormat=e,this._numberFormatter=e?C.DecimalFormatter.getFormatter(e):null,this._changed())}}),_dp(i,"booleanFormat",{get:function(){return this._booleanFormat},set:function(e){e!=this._booleanFormat&&(this._booleanFormat=e,this._boolFormatter=e?N.BooleanFormatter.getFormatter(e):null,this._changed())}}),_dp(i,"textFormatter",{get:function(){return this._textFormatter}}),_dp(i,"numberFormatter",{get:function(){return this._numberFormatter}}),_dp(i,"datetimeWriter",{get:function(){return this._datetimeWriter}}),_dp(i,"boolFormatter",{get:function(){return this._boolFormatter}}),i);t.FormatOptions=r});t(En),En.FormatOptions;var Sn=n(function(e,t){function i(e){var t=n.call(this)||this;return t._message="",t._visible=!0,t._zIndex=void 0,t._styleName="rg-toast",e&&t.assignFrom(e),t}function u(e){var t=s.call(this)||this;return t._minWidth=0,t._maxWidth=0,t._dropdownCount=8,t._showing=!1,t._container=e,t._element=t.$_createElement(e.doc),t}function c(e){var t=a.call(this)||this;return t._active=!1,t._container=e.container,t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(i,"message",{get:function(){return this._message},set:function(e){this._message=e}}),_dp(i,"visible",{get:function(){return this._visible},set:function(e){e!=this._visible&&(this._visible=e)}}),_dp(i,"zIndex",{get:function(){return this._zIndex},set:function(e){e!=this._zIndex&&(this._zIndex=e)}}),_dp(i,"styleName",{get:function(){return this._styleName},set:function(e){this._styleName=e}}),i.prototype.assignFrom=function(e){"string"==typeof e?(this._message=e,this._message&&(this._visible=!0)):"boolean"==typeof e?this._visible=e:n.prototype.assignFrom.call(this,e)},i);t.ToastOptions=r;var s,o=(s=y.Base,l.__extends(u,s),u.prototype._doDispose=function(){s.prototype._doDispose.call(this)},_dp(u,"minWidth",{get:function(){return this._minWidth},set:function(e){this._minWidth=e}}),_dp(u,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth=e}}),_dp(u,"dropDownCount",{get:function(){return this._dropdownCount},set:function(e){this._dropdownCount=e}}),u.prototype.show=function(e){this._showing=!0;try{this.$_show(e)}finally{this._showing=!1}},u.prototype.hide=function(){var e=this._element;e&&e.parentNode&&this._container._container.removeChild(e)},u.prototype.$_createElement=function(e){var t=e.createElement("div");return t.onkeydown=function(e){27==e.keyCode&&this.hide()}.bind(this),this.$_disableSelection(t),e=this._span=e.createElement("span"),this.$_disableSelection(e),t.appendChild(e),t},u.prototype.$_show=function(e){var t,n,r,i=e.message;!i||(t=this._element)&&(r=this._span,n=this._container._gridView.displayOptions,r.innerHTML=i,t.className=e.styleName,t.style.position="absolute",t.style.overflow="hidden",t.style.zIndex=null!=e.zIndex?e.zIndex:n.toastZIndex,this._container._container.appendChild(t),r=p.Utils.getBoundingClientRect2(t),i=p.Utils.getBoundingClientRect2(this._container._container),e=r.width+10,n=r.height+10,r=i.width,i=i.height,t.style.left=(r-e)/2+"px",t.style.top=(i-n)/2+"px")},u.prototype.$_disableSelection=function(e){void 0!==e.onselectstart?e.onselectstart=function(){return!1}:void 0!==e.style.MozUserSelect?e.style.MozUserSelect="none":e.onmousedown=function(){return!1}},u);t.ToastView=o;var a,f=(a=y.Base,l.__extends(c,a),c.prototype._doDispose=function(){a.prototype._doDispose.call(this)},_dp(c,"visible",{get:function(){return this._active}}),c.prototype.show=function(e,t,n){if((!this._active||t)&&(this.close(),(e=e instanceof r?e:e?new r(e):null)&&e.visible))return this._toast||(this._toast=new o(this._container)),this._toast.show(e),this._active=!0,void (n&&setTimeout(function(){try{n()}finally{this.close()}}.bind(this),0));n&&n()},c.prototype.close=function(){this._active&&(this._toast&&this._toast.hide(),this._active=!1)},c);t.ToastManager=f});t(Sn),Sn.ToastOptions,Sn.ToastView,Sn.ToastManager;var xn=n(function(e,t){function i(e){return e=n.call(this,e)||this,e._enabled=!0,e._style=c.SortStyle.EXCLUSIVE,e._handleVisibility=c.HandleVisibility.VISIBLE,e._commitBeforeSorting=!0,e._toast=new Sn.ToastOptions({visible:!1,message:"Sorting..."}),e._keepFocusedRow=!1,e._textCase=c.SortCase.SENSITIVE,e._showSortOrder=!1,e._pageSorting=!1,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Kt.GridBaseOptions,l.__extends(i,n),i.prototype._doDispose=function(){this._toast=this._toast.dispose(),n.prototype._doDispose.call(this)},_dp(i,"enabled",{get:function(){return this._enabled},set:function(e){e!=this._enabled&&(this._enabled=e,this._changed())}}),_dp(i,"style",{get:function(){return this._style},set:function(e){e!=this._style&&(this._style=e,this._changed())}}),_dp(i,"handleVisibility",{get:function(){return this._handleVisibility},set:function(e){e!=this._handleVisibility&&(this._handleVisibility=e,this._refreshOwner())}}),_dp(i,"commitBeforeSorting",{get:function(){return this._commitBeforeSorting},set:function(e){e!=this._commitBeforeSorting&&(this._commitBeforeSorting=e,this._changed())}}),_dp(i,"keepFocusedRow",{get:function(){return this._keepFocusedRow},set:function(e){e!=this._keepFocusedRow&&(this._keepFocusedRow=e,this._changed())}}),_dp(i,"textCase",{get:function(){return this._textCase},set:function(e){e!=this._textCase&&(this._textCase=e,this._changed())}}),_dp(i,"showSortOrder",{get:function(){return this._showSortOrder},set:function(e){e!=this._showSortOrder&&(this._showSortOrder=e,this._changed())}}),_dp(i,"pageSorting",{get:function(){return this._pageSorting},set:function(e){e!=this._pageSorting&&(this._pageSorting=e,this._changed())}}),_dp(i,"toast",{get:function(){return this._toast}}),i);t.SortingOptions=r});t(xn),xn.SortingOptions;var Tn=n(function(e,t){function i(e,t){return n.call(this,e,t=void 0===t?null:t)||this}function u(){return null!==s&&s.apply(this,arguments)||this}function f(){return null!==a&&a.apply(this,arguments)||this}function p(e){var t=c.call(this,e.doc,"fixedColumnBar")||this;return t._grid=e,t}function v(e,t){return d.call(this,e,t=void 0===t?null:t)||this}function y(){return null!==m&&m.apply(this,arguments)||this}function w(){return null!==b&&b.apply(this,arguments)||this}function S(e,t){return t=E.call(this,e,t=void 0===t?null:t)||this,t.visible=!1,t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Yt.LayerElement,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(i,"grid",{get:function(){for(var e=this.parent;e;){if(e instanceof ir.GridBase)return e;e=e.parent}return null}}),i.prototype.measure=function(e,t,n){return this._doMeasure(e,t,n)},i.prototype.layoutContent=function(e,t,n){this._doLayoutContent(e,t,n)},i.prototype._doMeasure=function(e,t,n){return new tn.Size(t,n)},i.prototype._doLayoutContent=function(e,t,n){},i);t.ContentPane=r;var s,o=(s=r,l.__extends(u,s),u.prototype._initDom=function(e){s.prototype._initDom.call(this,e)},u);t.LeftContentPane=o;var a,o=(a=r,l.__extends(f,a),f);t.DataContentPane=o;var c,h=(c=Yt.LayerElement,l.__extends(p,c),p.prototype._getCssSelector=function(){return Qt.FixedOptions.COLUMN_BAR_STYLE},p),d,o=(d=o,l.__extends(v,d),v.prototype._doDispose=function(){d.prototype._doDispose.call(this)},v.prototype.layoutBars=function(e,t,n){this._layoutBars(e,t,n)},v.prototype._doLayoutContent=function(e,t,n){this._barView||(this._barView=this._createBar(e.grid),this.addChild(this._barView),this._barView2=this._createBar(e.grid),this.addChild(this._barView2)),d.prototype._doLayoutContent.call(this,e,t,n)},v.prototype._createBar=function(e){return new h(e)},v.prototype._layoutBars=function(e,t,n){var r=e.fixedBarWidth,i=e.footBounds.height;this._barView.visible=0<r,this._barView2.visible=!1,this._barView.visible&&(e=Math.min(n-i,e.dataBounds.bottom),this._barView.setBounds(t-r,0,r,e),0<i&&(this._barView2.visible=!0,this._barView2.setBounds(t-r,n-i,r,i)))},v);t.FixedContentPane=o;var m,g=(m=Yt.LayerElement,l.__extends(y,m),y.prototype._getCssSelector=function(){return"rg-right-column-bar"},y),b,o=(b=o,l.__extends(w,b),w.prototype._createBar=function(){return new g(this.doc,"rightColumnBar")},w.prototype._layoutBars=function(e,t,n){var r=e.rightBarWidth,i=e.footBounds.height;this._barView.visible=0<r,this._barView2.visible=!1,this._barView.visible&&(e=Math.min(n-i,e.dataBounds.bottom),this._barView.setBounds(0,0,r,e),0<i&&(this._barView2.visible=!0,this._barView2.setBounds(0,n-i,r,i)))},w);t.RightContentPane=o;var E,r=(E=r,l.__extends(S,E),_dp(S,"message",{get:function(){return this._message},set:function(e){e!=this._message&&(this._message=e,this._dom.innerHTML=e,this.invalidate())}}),S.prototype._getCssSelector=function(){return"rg-message-pane"},S.prototype._doLayoutContent=function(e,t,n){E.prototype._doLayoutContent.call(this,e,t,n)},S);t.MessagePane=r});t(Tn),Tn.ContentPane,Tn.LeftContentPane,Tn.DataContentPane,Tn.FixedContentPane,Tn.RightContentPane,Tn.MessagePane;var Nn=n(function(e,t){function u(e){var t=s.call(this)||this;return t._minWidth=0,t._maxWidth=0,t._dropDownCount=8,t._caseSensitive=!1,t._partialMatch=!1,t._sortStyle=r.NONE,t._items=null,t._itemIndex=-1,t._dropDownPosition=n.BUTTON,t._dropDownWidth=-1,t._displayLabels=null,t._separator=null,t._itemColumned=!1,t._viewGridInside=!1,t._trimLabelText=!0,t._initCount=0,t._moreItemCount=25,t._moreText=null,t._selected=!1,t._clickHandler=function(e){e=e.currentTarget,e=p.Utils.getChildIndex(e),0<=e&&(this._itemIndex=e,this._selected=!0,this.fireEvent(u.CLOSE_UP,!0))}.bind(t),t._nextClickHandler=function(e){e=e.currentTarget,this.$_addMoreItems(e)}.bind(t),t._container=e,t._element=t._createList(e.doc),t}function c(e,t){return t=a.call(this,e,t)||this,t._values=null,t._items=null,t._labels=null,t._displayLabels=i.LABEL,t._domainOnly=!1,t._dropDownWidth=-1,t._dropDownPosition=n.BUTTON,t._dropDownCount=8,t._itemSortStyle=r.NONE,t._caseSensitive=!1,t._partialMatch=!1,t._commitOnSelect=!0,t._dropDownWhenClick=!1,t._trimLabelText=!0,t._separator=null,t._itemColumned=!1,t._lookup=!1,t._labeling=!1,t._domain=null,t._closing=!1,t._selectedIndex=-1,t._globalMouseHandler=function(e){var t=e.target;if(this._isMarquee(t))this.closeUp(!1);else{for(;t;){if(t==this._list._element)return;t=t.parentElement}this.closeUp(!0)}}.bind(t),t._list=t._createDropDown(e.container),t._list.addListener(t),t}function v(e){return e=h.call(this,e)||this,e._selectItemIndices=[],e._acceptText=null,e._cancelText=null,e._showButtons=!1,e._showAllCheck=!1,e._acceptClickHandler=function(e){this.fireEvent(v.CLOSE_UP_2,!0)}.bind(e),e._cancelClickHandler=function(e){this.fireEvent(v.CANCEL,!1)}.bind(e),e._checkClickHandler=function(e){e.stopImmediatePropagation();var t=e.currentTarget,n=t.parentElement;n&&(e=p.Utils.getChildIndex(n),t=t.checked,this.$_changeCheckIndex(n,e,t,!0))}.bind(e),e._allCheckClickHandler=function(e){e.stopImmediatePropagation(),2==e.eventPhase&&e.currentTarget==this._allCheckElement?(this._allCheck.checked=!this._allCheck.checked,this.$_toggleAllCheck()):2==e.eventPhase&&e.currentTarget==this._allCheck&&this.$_toggleAllCheck()}.bind(e),e._clickHandler=function(e){var t=e.currentTarget;if(2==e.eventPhase){for(var e=p.Utils.getChildIndex(t),n=void 0,r=t.getElementsByTagName("input"),i=0,s=r.length;i<s;i++)if("checkbox"==r[i].type){n=r[i];break}n&&(n.checked=!n.checked),this.$_changeCheckIndex(t,e,n.checked,!0)}}.bind(e),e}function y(e,t){return t=m.call(this,e,t)||this,t._showButtons=!0,t._showAllCheck=!1,t}function w(e,t){return t=b.call(this,e,t)||this,t._searchLength=1,t._searchDelay=1e3,t._useCtrlEnterKey=!1,t._useEnterKey=!1,t._initCount=0,t._moreItemCount=25,t._reInquery=!0,t._timer=void 0,t}function S(e,t){return t=E.call(this,e,t)||this,t._values=null,t._items=null,t._labels=null,t._sortStyle=r.NONE,t._itemIndex=-1,t._displayLabels=null,t._separator=null,t._itemColumned=!1,t._trimLabelText=!0,t.$_selectChanged=null,t._handled=!1,t._globalKeyDownHandler=function(e){return this._keyDownHandler(e)}.bind(t),t}var n,r,i;Object.defineProperty(t,"__esModule",{value:!0}),(g=n=t.DropDownPosition||(t.DropDownPosition={})).BUTTON="button",g.EDITOR="editor",(f=r=t.DropDownSortStyle||(t.DropDownSortStyle={})).NONE="none",f.ASCENDING="ascending",f.DESCENDING="descending",(g=i=t.DropDownValueLabel||(t.DropDownValueLabel={})).VALUE="value",g.LABEL="label",g.VALUE_LABEL="valueLabel",g.LABEL_VALUE="labelValue";var s,o=(s=x.EventAware,l.__extends(u,s),u.prototype._doDispose=function(){this._container=null,this._containerElement=null,this._items=null,p.Utils.clearElements(this._element),this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._element=null,s.prototype._doDispose.call(this)},_dp(u,"minWidth",{get:function(){return this._minWidth},set:function(e){e!=this._minWidth&&(this._minWidth=e,this._changed())}}),_dp(u,"maxWidth",{get:function(){return this._maxWidth},set:function(e){e!=this._maxWidth&&(this._maxWidth=e,this._changed())}}),_dp(u,"dropDownCount",{get:function(){return this._dropDownCount},set:function(e){e!=this._dropDownCount&&(this._dropDownCount=e,this._changed())}}),_dp(u,"caseSensitive",{get:function(){return this._caseSensitive},set:function(e){e!=this._caseSensitive&&(this._caseSensitive=e,this._changed())}}),_dp(u,"partialMatch",{get:function(){return this._partialMatch},set:function(e){e!=this._partialMatch&&(this._partialMatch=e,this._changed())}}),_dp(u,"sortStyle",{get:function(){return this._sortStyle},set:function(e){e!=this._sortStyle&&(this._sortStyle=e,this._changed())}}),_dp(u,"items",{get:function(){return this._items},set:function(e){if(this._items=[],e)for(var t=0,n=e.length;t<n;t++)this._items.push({label:e[t].label,value:e[t].value,index:t})}}),_dp(u,"itemIndex",{get:function(){return this._itemIndex}}),_dp(u,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(e){e!=this._dropDownPosition&&(this._dropDownPosition=e,this._changed())}}),_dp(u,"dropDownWidth",{get:function(){return this._dropDownWidth},set:function(e){e!=this._dropDownWidth&&(this._dropDownWidth=e,this._changed())}}),_dp(u,"displayLabels",{get:function(){return this._displayLabels},set:function(e){e!==this._displayLabels&&(this._displayLabels=e,this._changed())}}),_dp(u,"separator",{get:function(){return this._separator},set:function(e){e!=this._separator&&(this._separator=e,this._changed())}}),_dp(u,"itemColumned",{get:function(){return this._itemColumned},set:function(e){e!=this._itemColumned&&(this._itemColumned=e,this._changed())}}),_dp(u,"viewGridInside",{get:function(){return this._viewGridInside},set:function(e){e!=this._viewGridInside&&(this._viewGridInside=e,this._changed())}}),_dp(u,"trimLabelText",{get:function(){return this._trimLabelText},set:function(e){e!=this._trimLabelText&&(this._trimLabelText=e,this._changed())}}),_dp(u,"initCount",{get:function(){return this._initCount},set:function(e){e!=this._initCount&&(this._initCount=e,this._changed())}}),_dp(u,"moreItemCount",{get:function(){return this._moreItemCount},set:function(e){e!=this._moreItemCount&&(this._moreItemCount=e,this._changed())}}),_dp(u,"moreText",{get:function(){return this._moreText},set:function(e){e!=this._moreText&&(this._moreText=e,this._changed())}}),_dp(u,"listing",{get:function(){return this._containerElement&&this._containerElement.contains(this._element)}}),_dp(u,"itemCount",{get:function(){return 0==this.initCount?this._items&&this._items.length:this._element.children.length}}),_dp(u,"valueIndex",{get:function(){var e=this._items,t=this._itemIndex;return e&&0<=t&&t<e.length?e[t].index:-1},set:function(e){if(e=Math.max(-1,e),this._itemIndex=-1,0<=e)for(var t=0,n=this._items.length;t<n;t++)if(this._items[t].index==e){this._itemIndex=e;break}this.listing&&this._refreshItems()}}),_dp(u,"selected",{get:function(){return this._selected}}),u.prototype.hasButton=function(e){return null!=e?e:p.Utils.isMobile()&&p.Utils.isiOS},u.prototype.setItemIndex=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=this._element.childNodes;(e=Math.max(-1,e))<this._items.length&&(t||e!=this._itemIndex||e>=r.length-1)&&(n&&e>=r.length-1&&(n=r[r.length-1]).isMoreButton&&(r=e-(r.length-1),r=(Math.floor(r/this.moreItemCount)+1)*this.moreItemCount,this.$_addMoreItems(n,r)),this._itemIndex=e,this.listing&&this._refreshItems(),this._selected=0<=e)},u.prototype.setZIndex=function(e){this._element.style.zIndex=String(e)},u.prototype.show=function(e,t,n,i,s){this._containerElement=this._viewGridInside?this._container._container:e,this._sortStyle!=r.NONE&&this.$_sortItems(),this._show(t,n,i,s)},u.prototype.hide=function(){p.Utils.detach(this._element),this._containerElement=null},u.prototype.currentIsMore=function(e){return e=this._element.childNodes[null!=e?e:this._itemIndex],e&&e.isMoreButton},u.prototype.addMoreItems=function(){var e;this.currentIsMore(null)&&(e=this._element.childNodes[this._itemIndex],this.$_addMoreItems(e,0))},u.prototype._changed=function(){},u.prototype._createList=function(e){return e=e.createElement("div"),e.className="rg-dropdownlist",e.onkeydown=function(e){27==e.keyCode&&this.fireEvent(u.CLOSE_UP,!1)}.bind(this),e},u.prototype.$_sortItems=function(){this._sortStyle==r.ASCENDING?this._items.sort(function(e,t){return e.label<t.label?-1:e.label>t.label?1:0}):this._items.sort(function(e,t){return e.label>t.label?-1:e.label<t.label?1:0})},u.prototype._show=function(e,t,n,r){var i,s=this._element;s&&((i=s.style).position="absolute",i.cssFloat="none",i.clear="both",i.boxSizing="border-box",i.minWidth="20px",i.minHeight="10px",i.overflow="auto",this._firstChild=null,p.Utils.clearChildren(s),p.Utils.disableSelection(s),this._containerElement.appendChild(s),this._cellWidth=n,this._editBounds=r,i.width="10px",this._buildItems(),this.$_resetHeight(),this._resetWidth(n),this.$_resetPosition(e,t,n,r),this._selected=!1)},u.prototype._getListElement=function(){return this._element},u.prototype.$_resetHeight=function(){var e,t,n,r,i=this._getListElement();this._firstChild?(n=p.getWin(this._firstChild),e=p.Utils.getClientRect(this._firstChild),r=this._firstChild.currentStyle||n.getComputedStyle(this._firstChild),t=parseInt(r.marginTop.replace("px","")),t=isNaN(t)?0:t,n=parseInt(r.marginBottom.replace("px","")),n=isNaN(n)?0:n,r=0<this._dropDownCount?Math.min(this._dropDownCount,this._items.length):this._items.length,i.style.height=(e.height+t)*r+4+n+"px"):i.style.height="10px"},u.prototype._resetWidth=function(e){var t=this._element,n=p.Utils.getClientRect(t),r=this._dropDownWidth,i=t.offsetWidth?t.offsetWidth+(p.Utils.ieOld&&"border-box"===t.style.boxSizing?17:0):0;(f=r)<0?f=e:0==f&&(f=10),t.style.width=f+"px";var s=0;if(this._firstChild){for(var e=p.getWin(this._firstChild),o=this._firstChild.currentStyle||e.getComputedStyle(this._firstChild),e=parseInt(o.marginLeft.replace("px","")),e=isNaN(e)?0:e,o=parseInt(o.marginRight.replace("px","")),o=isNaN(o)?0:o,u=t.childNodes,a=0;a<u.length;a++)s=Math.max(s,u[a].scrollWidth);s+=t.offsetWidth-t.clientWidth+e+o+2}r<0&&(s=Math.max(s,f));var o=p.Utils.getBrowserSize(),f=s=Math.min(s,o.width);p.Utils.ieOld&&(0<=r||f<s)&&(f+=20),f<n.width?t.style.overflowX="hidden":t.style.overflowX="auto",t.style.width=Math.max(f,i)+"px"},u.prototype.$_resetPosition=function(e,t,r,i){var s=p.getDoc(this._element),o=p.getWin(this._element),u=p.Utils.getBrowserSize(),a=p.Utils.getClientRect(this._containerElement),f=p.Utils.getClientRect(this._container._container),l=u.width,c=u.height,h=p.Utils.getClientRect(this._element),u=o.pageXOffset||s.documentElement.scrollLeft,o=o.pageYOffset||s.documentElement.scrollTop;s.documentElement.scrollWidth>s.documentElement.clientWidth&&(c-=18),s.documentElement.scrollHeight>s.documentElement.clientHeight&&(l-=18),e+=f.left-a.left,t+=f.top-a.top,(p.Utils.ieTen||p.Utils.ieOld||p.Utils.ieLeg)&&(e+=s.documentElement.scrollLeft,t+=s.documentElement.scrollTop),t+h.height>c+o&&i&&(t=t-i.height-h.height)<0&&(t=c-h.height-2),this._dropDownPosition!=n.EDITOR?e=Math.max(0,e+r-h.width):e+h.width>l+u&&(e=l-h.width),!p.Utils.isMobile()&&this._viewGridInside&&i&&(t=i.bottom-a.top+2,(a.bottom<i.bottom+h.height||c+o<i.bottom+h.height)&&(t=i.top-h.height-a.top-2)),p.Utils.isMobile()||this._element.offsetParent||(e+=s.documentElement.offsetLeft,t+=s.documentElement.offsetTop),p.Utils.move(this._element,Math.max(0,e),Math.max(0,t))},u.prototype._resetItems=function(e,t,n,r){p.Utils.clearChildren(this._element),this._firstChild=null,this._buildItems(),this.$_resetHeight(),this._resetWidth(n),this.$_resetPosition(e,t,n,r)},u.prototype._buildItems=function(e,t){function n(e,t){var n=t&&t.value?t.value.toString():"";return(t=o.createElement("span")).style.whiteSpace="pre",t.innerHTML=n?p.Utils.htmlEncode(n):"&nbsp;",t.tabIndex=-1,t.className="rg-dropdown-value",p.Utils.disableSelection(t),e.appendChild(t),t}function r(e,t){var n=o.createElement("span");n.style.whiteSpace="pre",n.innerHTML=t?p.Utils.htmlEncode(t):"&nbsp;",n.tabIndex=-1,n.className="rg-dropdown-seperator",p.Utils.disableSelection(n),e.appendChild(n)}void 0===e&&(e=0),void 0===t&&(t=0);var s,o=p.getDoc(this._element),u=0,a=function(e,t){var n=t&&t.label?t.label.toString():"",n=this._trimLabelText?n.trim():n,t=o.createElement("span");return this._trimLabelText||(t.style.whiteSpace="pre"),t.innerHTML=n?p.Utils.htmlEncode(n):"&nbsp;",t.tabIndex=-1,t.className="rg-dropdown-label",p.Utils.disableSelection(t),e.appendChild(t),t}.bind(this),f=this._items,l=t||(0<this._element.children.length?this.moreItemCount:this.initCount);if(f&&!(f.length<1)){for(var c,h,d=e,v=f.length;d<v;d++){if(this._initCount&&l<=d-e&&d<v){var m=o.createElement("div"),g=m.style;g.position="relative",g.cssFloat="none",g.paddingTop="1px",g.paddingBottom="1px",g.paddingLeft="2px",g.paddingRight="2px",g.whiteSpace="nowrap",g.cursor="pointer",g.textAlign="center",p.Utils.disableSelection(m),m.nextIndex=d,m.onclick=this._nextClickHandler,m.isMoreButton=!0,m.className="rg-dropdown-more",a(m,{label:this.moreText}),this._element.appendChild(m);break}var y=f[d],b=o.createElement("div"),m=b.style;m.position="relative",m.cssFloat="none",m.paddingTop="1px",m.paddingBottom="1px",m.paddingLeft="2px",m.paddingRight="2px",m.whiteSpace="nowrap",m.cursor="default",b.className=d==this._itemIndex?"rg-dropdown-select rg-dropdown-item":"rg-dropdown-item",p.Utils.disableSelection(b),this._element.appendChild(b),0==d&&(this._firstChild=b),b.onclick=this._clickHandler;var w=null;switch(this.displayLabels){case i.LABEL:a(b,y);break;case i.VALUE:n(b,y);break;case i.LABEL_VALUE:w=a(b,y),r(b,this._separator),n(b,y);break;case i.VALUE_LABEL:w=n(b,y),r(b,this._separator),a(b,y)}w&&this._itemColumned&&(c=w,h=void 0,h=p.Utils.getTextLength(c.textContent),u<h&&(s=c,u=h))}if(this._itemColumned&&s)for(var E=Math.ceil(s.getBoundingClientRect().width),d=0,v=this._element.childNodes.length;d<v;d++)(w=this._element.childNodes[d].firstChild).style.display="inline-block",w.style.width=E+"px"}},u.prototype.$_addMoreItems=function(e,t){var n=e.nextIndex;e.parentNode&&e.parentNode.removeChild(e),this._buildItems(n,t),this._resetWidth(this._cellWidth),this.fireEvent(u.EDITOR_FOCUS)},u.prototype._refreshItems=function(){for(var e=this._element.childNodes,t=0;t<e.length;t++)(n=e[t]).className=t==this._itemIndex?"rg-dropdown-select":"rg-dropdown-item";var n,r=this._itemIndex;0<=r&&r<e.length&&((n=e[r]).offsetTop<this._element.scrollTop?this._element.scrollTop=n.offsetTop:(r=n.offsetTop+p.Utils.getSize(n).height)>=this._element.scrollTop+this._element.clientHeight&&(this._element.scrollTop=r-this._element.clientHeight))},u.prototype.$_search=function(e,t){void 0===t&&(t=!1);try{if(this._items&&0<this._items.length&&e){for(var n=this._items,r=n.length,i=this._caseSensitive?e:e.toLowerCase(),s=[],o=0;o<r;o++){if(l=n[o].label.toString())if(l=this._caseSensitive?l:l.toLowerCase(),this._partialMatch){for(var u="",a=0;a<l.length;a++){var f=p.Utils.hangulToChosung(l[a]);u+=p.Utils.hangulToChosung(i[a]).org?f.org:f.cho}if(u==i)return void this.setItemIndex(o,t,!0)}else if(l==i)return void this.setItemIndex(o,t,!0);s.push(l)}for(o=0;o<r;o++){var l=s[o];if(this._partialMatch){for(var c=!1,a=0;a<i.length;a++){var h=p.Utils.hangulToChosung(l[a]);if(!(h.org&&h.org==i[a]||h.cho&&h.cho==i[a])){c=!1;break}c=!0}if(c)return void this.setItemIndex(o,t,!0)}else if(l&&0==l.indexOf(i))return void this.setItemIndex(o,t,!0)}for(o=0;o<r;o++){l=s[o];if(this._partialMatch){var d=p.Utils.hangulToChosungAll(l),v=p.Utils.hangulToChosungAll(i),m=d.indexOf(v),u=l.substr(0,m);if(~m)for(var a=0,g=m,y=i.length;a<y;a++,g++)f=p.Utils.hangulToChosung(l[g]),u+=p.Utils.hangulToChosung(i[a]).org?f.org:f.cho;if(u&&0<u.indexOf(i))return void this.setItemIndex(o,t,!0)}else if(l&&0<l.indexOf(i))return void this.setItemIndex(o,t,!0)}}this.setItemIndex(-1)}finally{t&&(this._selected=!0)}},u.CLOSE_UP="onDropDownListCloseUp",u.EDITOR_FOCUS="onDropDownListEditorFocus",u);t.DropDownList=o;var a,f=(a=an.PopupCellEditor,l.__extends(c,a),c.prototype._doDispose=function(){this._globalMouseHandler=null,this._list.removeListener(this),this._list.dispose(),this._list=this._items=this._values=this._labels=null,a.prototype._doDispose.call(this)},_dp(c,"values",{get:function(){return this._values},set:function(e){(e=p.Utils.makeArray(e,!0))?this._values=e.map(function(e){return null!=e?String(e):e}):this._values=[]}}),_dp(c,"labels",{get:function(){return this._labels},set:function(e){this._labels=e?e.slice():[]}}),_dp(c,"displayLabels",{get:function(){return this._displayLabels},set:function(e){e!=this._displayLabels&&(this._displayLabels=e,this._changed())}}),_dp(c,"domainOnly",{get:function(){return this._domainOnly},set:function(e){e!=this._domainOnly&&(this._domainOnly=e,this._changed())}}),_dp(c,"dropDownWidth",{get:function(){return this._dropDownWidth},set:function(e){e!=this._dropDownWidth&&(this._dropDownWidth=e,this._changed())}}),_dp(c,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(e){e!=this._dropDownPosition&&(this._dropDownPosition=e,this._changed())}}),_dp(c,"dropDownCount",{get:function(){return this._dropDownCount},set:function(e){e!=this._dropDownCount&&(this._dropDownCount=e,this._changed())}}),_dp(c,"itemSortStyle",{get:function(){return this._itemSortStyle},set:function(e){e!=this.itemSortStyle&&(this._itemSortStyle=e,this._changed())}}),_dp(c,"caseSensitive",{get:function(){return this._caseSensitive},set:function(e){e!=this._caseSensitive&&(this._caseSensitive=e,this._changed())}}),_dp(c,"partialMatch",{get:function(){return this._partialMatch},set:function(e){e!=this._partialMatch&&(this._partialMatch=e,this._changed())}}),_dp(c,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(e){e!=this._commitOnSelect&&(this._commitOnSelect=e,this._changed())}}),_dp(c,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(e){e!=this._dropDownWhenClick&&(this._dropDownWhenClick=e,this._changed())}}),_dp(c,"trimLabelText",{get:function(){return this._trimLabelText},set:function(e){e!=this._trimLabelText&&(this._trimLabelText=e,this._changed())}}),_dp(c,"separator",{get:function(){return this._separator},set:function(e){e!=this._separator&&(this._separator=e,this._changed())}}),_dp(c,"itemColumned",{get:function(){return this._itemColumned},set:function(e){e!=this._itemColumned&&(this._itemColumned=e,this._changed())}}),_dp(c,"listing",{get:function(){return this._list.listing}}),c.prototype.dropDown=function(e){if(void 0===e&&(e=!1),!this.readOnly&&!this.listing&&!this._closing){this._refreshItems();var t=p.getDoc(this._container),n=p.getWin(this._container);if(e||this._items&&0<this._items.length){var r=this._list,i=this._options,s=t.documentElement,e=p.Utils.getClientRect(this._container);return r.viewGridInside=i.viewGridInside,r.displayLabels=this.displayLabels,r.separator=this.separator,r.itemColumned=this.itemColumned,r.items=this._items,this._saveIndex=this._selectedIndex,this._saveText=this._editor.value,r.caseSensitive=this._caseSensitive,r.partialMatch=this._partialMatch,r.dropDownCount=this._dropDownCount,r.dropDownWidth=this._dropDownWidth,r.dropDownPosition=this._dropDownPosition,r.sortStyle=this._itemSortStyle,r.valueIndex=this._selectedIndex,r.trimLabelText=this._trimLabelText,this._isMobile?(this._showMarquee(s),r.viewGridInside=!1,r.show(s,0,0,0,null),this._centerPopup(s,r._element)):(s=this._grid.displayOptions,r.setZIndex(s.baseZindex+3),r.show(t.documentElement,e.cx+1,e.cy+e.height,this._cellBounds.width,p.Utils.getClientRect(this._editor))),r.$_search(this._editor.value,!0),n.addEventListener("mousedown",this._globalMouseHandler),!0}}return!1},c.prototype.closeUp=function(e){if(this.listing){this._closing=!0;try{p.getWin(this._container).removeEventListener("mousedown",this._globalMouseHandler),this._closeMarquee(),this._list.hide();var t,n=void 0;e&&this._list.selected&&0<=(n=this._list.valueIndex)&&this._items&&this._items.length>n?(this._selectedIndex=this._list.valueIndex,t=!this._isMobile&&this._labeling?this._items[n].label:this._items[n].value,this._isMobile?this._commitListValue(t):(this._editor.value=t,n==this._saveIndex&&t==this._saveText||this._dispatchChange(),this._commitOnSelect&&this._dispatchCommit())):this._selectedIndex=-1}finally{this._closing=!1}return!0}},c.prototype.initOptions=function(){a.prototype.initOptions.call(this),this._values=[],this._labels=[],this._displayLabels=i.LABEL,this._separator=" - ",this._itemColumned=!1,this._domainOnly=!1,this._textReadOnly=!1,this._dropDownWidth=-1,this._dropDownPosition=n.BUTTON,this._dropDownCount=8,this._itemSortStyle=r.NONE,this._caseSensitive=!1,this._partialMatch=!1,this._commitOnSelect=!0,this._dropDownWhenClick=!1,this._viewGridInside=!1,this._initCount=0,this._moreItemCount=25,this._moreText=window.RG_CONST&&window.RG_CONST.MORETEXT||"\ub354\ubcf4\uae30"},c.prototype.setEditIndex=function(e){a.prototype.setEditIndex.call(this,e),this._lookup=!1,this._labeling=!1,this._domain=null,this._items=null,this._refreshItems()},c.prototype.setEditValue=function(e){var t=-1;if(this._value=e,this._lookup){var n,r=this._domain;r?n=0<=(i=t=r.keys?r.keys.indexOf(e):-1)&&r.values&&r.values.length>i?r.values[i]:e:t=this._editIndex.dataColumn.getLookupIndex(e),this._labeling?(n=r?0<=t&&r.values&&r.values.length>t?r.values[t]:e:0<=t?this._editIndex.dataColumn.getLookupLabel(e):e,a.prototype.setEditValue.call(this,n)):a.prototype.setEditValue.call(this,e)}else if(this._values){for(var i=0,s=this._values.length;i<s;i++)if(e==this._values[i]){t=i;break}this._labeling&&this._labels&&(t<0||this._labels.length>t)?(n=0<=t?this._labels[i]:e,a.prototype.setEditValue.call(this,n)):a.prototype.setEditValue.call(this,e)}else a.prototype.setEditValue.call(this,e);this._selectedIndex=t},c.prototype.isEdited=function(){var e=a.prototype.isEdited.call(this);return e=e&&this.domainOnly?void 0!==this.$_getEditValue(!1):e},c.prototype._getInputSelector=function(){return c.INPUT_CSS},c.prototype._createDropDown=function(e){return new o(e)},c.prototype.setCellEditValue=function(e,t){a.prototype.setCellEditValue.call(this,e,t)},c.prototype.getEditValue=function(e,t){return void 0===e&&(e=!0),!this.isEdited()&&this._selectedIndex<0?this._value:this.$_getEditValue(e,t)},c.prototype.setBounds=function(e,t,n,r,i){a.prototype.setBounds.call(this,e,t,n,r,i)},c.prototype._createEditor=function(e){return a.prototype._createEditor.call(this,e)},c.prototype._textHandler=function(){this._requestStart()},c.prototype._compositionstartHandler=function(e){a.prototype._compositionstartHandler.call(this,e)},c.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var t=this._list,n=t.itemIndex;switch(e.keyCode){case 8:case 46:if((e.ctrlKey||e.shiftKey||!this.domainOnly||!this.allowEmpty)&&!e.ctrlKey&&!e.shiftKey&&this.textReadOnly)return this._requestStart(),e.preventDefault(),!0;break;case 32:if(this.listing&&t.currentIsMore(n))return t.addMoreItems(),e.preventDefault(),!0;break;case 13:if(this.listing&&t.currentIsMore(n))return t.addMoreItems(),e.preventDefault(),!0;if(this.closeUp(!0))return!this._sendToParent(e);break;case 27:if(this.closeUp(!1))return e.preventDefault(),!0;break;case 40:if(e.altKey&&!this.listing)return this._requestStart(),e.preventDefault(),!0;if(this.listing)return this._list.setItemIndex(Math.min(t.itemCount-1,n+1)),e.preventDefault(),!0;break;case 34:if(this.listing)return this._list.setItemIndex(Math.min(t.itemCount-1,n+t.dropDownCount)),e.preventDefault(),!0;break;case 38:if(e.altKey&&this.listing)return this.closeUp(!1),e.preventDefault(),!0;if(this.listing)return this._list.setItemIndex(Math.max(0,n-1)),e.preventDefault(),!0;break;case 33:if(this.listing)return this._list.setItemIndex(Math.max(0,n-t.dropDownCount)),e.preventDefault(),!0}return a.prototype._keyDownHandler.call(this,e)}},c.prototype._keyPressHandler=function(e){this.isDisabled()||(a.prototype._keyPressHandler.call(this,e),e.keyCode&&this.textReadOnly&&e.preventDefault())},c.prototype._inputHandler=function(e){this.isDisabled()||(this.textReadOnly&&(e.target.value=this._oldValue||""),a.prototype._inputHandler.call(this,e))},c.prototype._pasteHandler=function(e){this.isDisabled()||a.prototype._pasteHandler.call(this,e)},c.prototype._copyHandler=function(e){this.isDisabled()||a.prototype._copyHandler.call(this,e)},c.prototype._requestStart=function(e){return!!a.prototype._requestStart.call(this,e)&&(this._isMobile?e&&this.dropDown():!1!==e&&this.dropDown(),!0)},c.prototype._doChanged=function(){this._selectedIndex=-1,a.prototype._doChanged.call(this),this.listing&&this._list.$_search(this._editor.value)},c.prototype.dropDownList=function(e){this.dropDown(e)},c.prototype.closeList=function(e){this.closeUp(e)},c.prototype.buttonClicked=function(e){this.listing?this.closeUp(!1):this.dropDown()},c.prototype.$_setItems=function(e,t){this._items=[];for(var n=0,r=e.length;n<r;n++)this._items.push({value:e[n],label:(t&&t.length>n?t:e)[n]})},c.prototype._refreshItems=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var n=this.editIndex,r=n.item;if(this._values&&(0<this._values.length||t))this.$_setItems(this._values,this._labels),this._labeling=this.displayLabels!==i.VALUE&&this._labels&&this._labels.length>=this._values.length;else if(n.dataColumn&&n.item&&(0<=n.dataRow||dt.ItemState_isEditing(r.itemState))){t=n.dataColumn;if(t.lookupSource){for(var s=t.lookupKeyFieldIds,o=[],u=0;u<s.length-1;u++)o.push(r.getData(s[u]));n=t.lookupSource.getTextDomain(o),n&&n.values&&0<n.values.length&&(this.$_setItems(n.keys,n.values),this._labeling=!0,this._lookup=!0,this._domain=n)}else t.values&&0<t.values.length&&(this.$_setItems(t.values,t.labels),this._labeling=this.displayLabels!==i.VALUE&&t.labels&&t.labels.length>=t.values.length,this._lookup=!0)}e&&this.listing&&(this._list.items=this._items,e=p.Utils.getClientRect(this._container),this._list._resetItems(e.cx-1,e.cy+e.height,this._cellBounds.width,p.Utils.getClientRect(this._editor)))},c.prototype.$_getEditValue=function(e,t){var n,r=this.text,i=an.TextCellEditor.prototype.getEditValue.call(this,e=void 0===e?!0:e,t=void 0===t?!1:t),s=i,o=this._editIndex.dataColumn,e=this._selectedIndex,t=0<=e;if(this._lookup){if(this._domain){if(this._labeling&&(s=0<=(n=t?e:this._domain.values?this._domain.values.indexOf(r):-1)&&this._domain.keys&&this._domain.keys.length>n?this._domain.keys[n]:s),this.domainOnly&&s&&(!this._domain.keys||this._domain.keys.indexOf(s)<0))return an.CellEditor.Unselected}else if(this._labeling&&(s=t?o.getLookupValue(e):o.getSourceValue(r)||i),this.domainOnly&&s&&(!o.values||o.values.indexOf(s)<0))return an.CellEditor.Unselected}else if(this._labeling&&0<=(n=t?e:this._labels?this._labels.indexOf(r):-1)&&n<this._values.length&&(s=this._values[n]),this.domainOnly&&s&&(!this._values||this._values.indexOf(s)<0))return an.CellEditor.Unselected;return s},c.prototype.onDropDownListCloseUp=function(e,t){this.closeUp(t),p.Utils.isMobile()||this.setFocus()},c.prototype.onDropDownListEditorFocus=function(){this.setFocus()},c.INPUT_CSS="rg-list-editor",c);t.DropDownCellEditor=f;var h,d=(h=o,l.__extends(v,h),_dp(v,"valueIndices",{get:function(){return this._selectItemIndices.slice()},set:function(e){this._selectItemIndices=[],null!=e&&(this._selectItemIndices=e.slice(),this.listing&&this._refreshItems(),this._selected=!1)}}),v.prototype.changeCheckIndex=function(e,t,n){var r=this._listElement.childNodes;if(0<=e&&e<r.length){for(var r=r[e],i=r.getElementsByTagName("input"),s=void 0,o=0,u=i.length;o<u;o++)if("checkbox"==i[o].type){s=i[o];break}s&&(s.checked=null!=t?t:!s.checked,this.$_changeCheckIndex(r,e,s.checked,n))}},v.prototype.$_changeCheckIndex=function(e,t,n,r){var i=this._selectItemIndices;t<0||t>=this._items.length||(t=this._items[t].index,n?i.indexOf(t)<0&&i.push(t):0<=i.indexOf(t)&&i.splice(i.indexOf(t),1),e.className="rg-multicheck-item"+(n?" rg-multicheck-select":""),this._selected=!0,r&&this.fireEvent(v.CHECK_CLICK,!1))},v.prototype._createList=function(){var e=this._container.doc,t=e.createElement("div");t.className="rg-multicheck";var n=e.createElement("div");return n.className="rg-multicheck-allcheck",(this._allCheckElement=n).style.paddingLeft="2px",p.Utils.disableSelection(n),t.appendChild(n),n=e.createElement("div"),n.className="rg-multicheck-list",this._listElement=n,t.appendChild(n),e=e.createElement("div"),e.style.textAlign="center",e.style.whiteSpace="nowrap",e.className="rg-multicheck-button",(this._buttonElement=e).style.margin="2px",p.Utils.disableSelection(e),t.appendChild(e),t.onkeydown=function(e){27==e.keyCode&&this.fireEvent(v.CLOSE_UP_2,!1)}.bind(this),t},v.prototype._getListElement=function(){return this._listElement},v.prototype.setZIndex=function(e){var t=this._element.style;t.zIndex=String(e),(t=this._listElement.style).zIndex=String(e)},v.prototype.$_toggleAllCheck=function(){for(var e=this._listElement.childElementCount,t=this._allCheck.checked,n=0;n<e;n++)this.changeCheckIndex(n,t,!1);this.fireEvent(v.CHECK_CLICK,!1)},v.prototype._show=function(e,t,n,r){var i,s=this._element;s&&((i=s.style).position="absolute",i.cssFloat="none",i.clear="both",i.boxSizing="border-box",i.minWidth="20px",i.minHeight="10px",i.overflow="visible",(i=this._listElement.style).position="relative",i.cssFloat="none",i.clear="both",i.boxSizing="border-box",i.minWidth="20px",i.minHeight="10px",i.overflow="auto",(i=this._buttonElement.style).position="relative",i.cssFloat="none",i.clear="both",i.boxSizing="border-box",i.marginLeft="0px",i.marginRight="0px",this._firstChild=null,p.Utils.clearChildren(this._listElement),p.Utils.disableSelection(this._listElement),this._containerElement.appendChild(s),this._buildItems(),this.$_buildButtons(),this.$_resetHeight(),this._resetWidth(n),this.$_resetPosition(e,t,n,r),0<this._selectItemIndices.length&&this._itemIndex<0&&this.setItemIndex(this._selectItemIndices[0]),this._selected=!1)},v.prototype._resetWidth=function(e){h.prototype._resetWidth.call(this,e);var t=this._element,n=Math.floor(this._buttonElement.getBoundingClientRect().width),e=t.getBoundingClientRect().width;isNaN(n)||(e=Math.max(e,n)),t.style.width=e+"px"},v.prototype._resetItems=function(e,t,n,r){p.Utils.clearChildren(this._listElement),this._firstChild=null,this._buildItems(),this.$_buildButtons(),this.$_resetHeight(),this._resetWidth(n),this.$_resetPosition(e,t,n,r)},v.prototype._buildItems=function(){var e,t=this._container.doc,n=0,r=function(e,n,r){var i=n?n.value.toString():"",n=t.createElement("label");return n.style.whiteSpace="pre",n.innerHTML=i?p.Utils.htmlEncode(i):"&nbsp;",n.htmlFor=r&&r.id,n.tabIndex=-1,n.className="rg-dropdown-value",p.Utils.disableSelection(n),e.appendChild(n),n}.bind(this),s=function(e,n,r){var i=n?n.label.toString():"",i=this._trimLabelText?i.trim():i,n=t.createElement("label");return this._trimLabelText||(n.style.whiteSpace="pre"),n.innerHTML=i?p.Utils.htmlEncode(i):"&nbsp;",n.htmlFor=r&&r.id,n.tabIndex=-1,n.className="rg-dropdown-label",p.Utils.disableSelection(n),e.appendChild(n),n}.bind(this),o=function(e,n){var r=t.createElement("span");r.style.whiteSpace="pre",r.innerHTML=n?p.Utils.htmlEncode(n):"&nbsp;",r.tabIndex=-1,r.className="rg-dropdown-separator",p.Utils.disableSelection(r),e.appendChild(r)}.bind(this),u=function(t){var r=p.Utils.getTextLength(t.textContent);n<r&&(e=t,n=r)}.bind(this),a=this._items;if(a&&!(a.length<1)){for(var f=0,l=a.length;f<l;f++){var c=a[f],h=t.createElement("div"),d=h.style;d.position="relative",d.cssFloat="none",d.paddingTop="1px",d.paddingBottom="1px",d.paddingLeft="2px",d.paddingRight="2px",d.whiteSpace="nowrap",d.cursor="default",d=0<=this._selectItemIndices.indexOf(a[f].index),h.className="rg-multicheck-item"+(d?" rg-multicheck-select":""),p.Utils.disableSelection(h),this._listElement.appendChild(h),0==f&&(this._firstChild=h),h.onclick=this._clickHandler;var m=t.createElement("input");m.id="$multiCheck_item_"+v.$_checkId++,m.type="checkBox",m.onclick=this._checkClickHandler,m.checked=d,h.appendChild(m);var g=null;switch(this.displayLabels){case i.LABEL:s(h,c,m);break;case i.VALUE:r(h,c,m);break;case i.LABEL_VALUE:g=s(h,c,m),o(h,this.separator),r(h,c,m);break;case i.VALUE_LABEL:g=r(h,c,m),o(h,this.separator),s(h,c,m)}g&&this.itemColumned&&(u(g),h._span=g)}if(this.itemColumned&&e){var y=Math.ceil(e.getBoundingClientRect().width);if(0<y)for(var b=0,w=this._listElement.childNodes.length;b<w;b++)(g=this._listElement.childNodes[b]._span)&&(g.style.display="inline-block",g.style.width=y+"px")}}},v.prototype.setButtonOptions=function(e,t,n,r,i){this._acceptText=e,this._cancelText=t,this._showButtons=n,this._showAllCheck=r,this._allCheckText=i,this.$_buildButtons()},v.prototype.$_buildButtons=function(){var e,t,n=this._container.doc;this._buttonElement&&(this._buttonElement.style.display=this._showButtons?"":"none",p.Utils.clearChildren(this._buttonElement),e=(t=n.createElement("label")).style,t.innerHTML=this._acceptText,t.onclick=this._acceptClickHandler,t.className="rg-multicheck-accept",e.cursor="pointer",p.Utils.disableSelection(t),this._buttonElement.appendChild(t),e=(t=n.createElement("label")).style,t.innerHTML=this._cancelText,t.onclick=this._cancelClickHandler,t.className="rg-multicheck-cancel",e.marginLeft="2px",e.cursor="pointer",p.Utils.disableSelection(t),this._buttonElement.appendChild(t),(e=this._allCheckElement).onclick=this._allCheckClickHandler,p.Utils.clearChildren(e),this._showAllCheck?(e.style.display="",(t=n.createElement("input")).type="checkbox",t.id="$multiCheck_item_"+v.$_checkId++,t.onclick=this._allCheckClickHandler,this._allCheck=t,e.appendChild(t),(n=n.createElement("label")).innerHTML=this._allCheckText,n.htmlFor=t.id,n.tabIndex=-1,p.Utils.disableSelection(n),e.appendChild(n)):e.style.display="none")},v.prototype._refreshItems=function(){for(var e,t=this._listElement.childNodes,n=-1,r=0;r<t.length;r++){var n=r<this._items.length?this._items[r].index:-1,i=t[r];r===this._itemIndex?p.Utils.addClassName(i,"rg-multicheck-selectitem"):p.Utils.removeClassName(i,"rg-multicheck-selectitem")}0<=(n=this._itemIndex)&&n<t.length&&((i=t[n]).offsetTop<this._listElement.scrollTop?this._listElement.scrollTop=i.offsetTop:(e=i.offsetTop+p.Utils.getSize(i).height)>=this._listElement.scrollTop+this._listElement.clientHeight&&(this._listElement.scrollTop=e-this._listElement.clientHeight))},v.CLOSE_UP_2="onMultiCheckListCloseUp",v.CANCEL="onMultiCheckListCancel",v.CHECK_CLICK="onMultiCheckListCheckClick",v.$_checkId=0,v),m,g=(m=f,l.__extends(y,m),_dp(y,"showButtons",{get:function(){return this._showButtons},set:function(e){this._showButtons=e}}),_dp(y,"acceptText",{get:function(){return this._acceptText},set:function(e){this._acceptText=e}}),_dp(y,"cancelText",{get:function(){return this._cancelText},set:function(e){this._cancelText=e}}),_dp(y,"allCheckText",{get:function(){return this._allCheckText},set:function(e){this._allCheckText=e}}),_dp(y,"showAllCheck",{get:function(){return this._showAllCheck},set:function(e){this._showAllCheck=e}}),y.prototype._createDropDown=function(e){return new d(e)},y.prototype.setMask=function(e){this._mask=null},y.prototype.dropDown=function(e){if(void 0===e&&(e=!1),!this.readOnly&&!this.listing&&!this._closing){this._refreshItems();var t=p.getDoc(this._container),n=p.getWin(this._container);if(e||this._items&&0<this._items.length){var r=this._list,e=this._options;this._selectedIndices=this._selectedIndices||[],r.viewGridInside=e.viewGridInside,r.displayLabels=this.displayLabels,r.separator=this.separator,r.itemColumned=this.itemColumned,r.items=this._items;var i,e=p.Utils.getClientRect(this._container);return this._saveIndices=this._selectedIndices.slice(),this._saveText=this._editor.value,r.caseSensitive=this.caseSensitive,r.dropDownCount=this.dropDownCount,r.dropDownWidth=this.dropDownWidth,r.dropDownPosition=this.dropDownPosition,r.setButtonOptions(this.acceptText,this.cancelText,this.showButtons,this.showAllCheck,this.allCheckText),r.sortStyle=this.itemSortStyle,r.valueIndices=this._selectedIndices.slice(),r.trimLabelText=this.trimLabelText,this._isMobile?(i=t.documentElement,r.viewGridInside=!1,this._showMarquee(i),r.show(i,0,0,0,null),this._centerPopup(i,r._element)):(i=this._grid.displayOptions,r.setZIndex(i.baseZindex+3),r.show(t.documentElement,e.cx+1,e.cy+e.height,this._cellBounds.width,p.Utils.getClientRect(this._editor))),n.addEventListener("mousedown",this._globalMouseHandler),!0}}return!1},y.prototype.getCheckValues=function(e,t,n){for(var r=[],i=0,s=e.length;i<s;i++)0<=e[i]&&e[i]<t.length&&r.push(this._labeling&&!n?t[e[i]].label:t[e[i]].value);return r},y.prototype.closeUp=function(e){if(this.listing){this._closing=!0;try{var t,n=this._list,r=this.editIndex&&this.editIndex.dataColumn;p.getWin(this._container).removeEventListener("mousedown",this._globalMouseHandler),this._closeMarquee(),n.hide(),e&&n.selected?(this._selectedIndices=n.valueIndices.slice(),this._editor.value=this.getCheckValues(this._selectedIndices,this._items).join(r.valueSeparator),p.Utils.equalArrays(this._saveIndices,this._selectedIndices)&&this._editor.value==this._saveText||(this._isMobile?(t=this.getCheckValues(this._selectedIndices,this._items,!0).join(r.valueSeparator),this._commitListValue(t)):(this._dispatchChange(),this.commitOnSelect&&this._dispatchCommit()))):this._selectedIndices=this._saveIndices.slice()}finally{this._closing=!1}return!0}return!1},y.prototype.initOptions=function(){m.prototype.initOptions.call(this),this._showButtons=!0,this._showAllCheck=!1,this._acceptText=window.RG_CONST&&window.RG_CONST.MULTICHECKACCEPT?window.RG_CONST.MULTICHECKACCEPT:"Accept",this._cancelText=window.RG_CONST&&window.RG_CONST.MULTICHECKCANCEL?window.RG_CONST.MULTICHECKCANCEL:"Cancel",this._allCheckText=window.RG_CONST&&window.RG_CONST.MULTICHECKALLCHECK?window.RG_CONST.MULTICHECKALLCHECK:"Check All"},y.prototype.applyOptions=function(e){m.prototype.applyOptions.call(this,e)},y.prototype.setEditValue=function(e){var t,n=[],r=[],i=-1,s=p.Utils.isArray(e)?e:e?e.split(this._editIndex.dataColumn.valueSeparator):[];if(this._value=e,this._lookup){var o=this._domain;if(o)for(var u=0,a=s.length;u<a;u++)0<=(i=o.keys.indexOf(s[u]))&&(n.push(i),r.push(i<o.values.length?o.values[i]:s[u]));else n=this._editIndex.dataColumn.getLookupIndices(e);this._labeling?(t=o?r.join(this._editIndex.dataColumn.valueSeparator):0<n.length?this._editIndex.dataColumn.getLookupLabel(e):e,m.prototype.setEditValue.call(this,t)):m.prototype.setEditValue.call(this,e)}else if(this._values){for(var f=0,l=s.length;f<l;f++)0<=(i=this._values.indexOf(s[f]))&&(n.push(i),r.push(this._labels&&0<=i&&this._labels.length>i?this._labels[i]:s[f]));this._labeling&&this._labels?(t=r.join(this._editIndex.dataColumn.valueSeparator),m.prototype.setEditValue.call(this,t)):m.prototype.setEditValue.call(this,e)}else m.prototype.setEditValue.call(this,e);this._selectedIndices=n},y.prototype.setCellEditValue=function(e,t){m.prototype.setCellEditValue.call(this,e,t)},y.prototype.getEditValue=function(e,t){return void 0===e&&(e=!0),void 0===t&&(t=!1),this.isEdited()||this._list.selected?this.$_getEditValue(e,t):this._value},y.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var t=this._list;return e.ctrlKey&&65==e.keyCode&&this.listing?(e.preventDefault(),t._allCheck.checked=!t._allCheck.checked,t.$_toggleAllCheck(),!0):32===e.keyCode&&this.listing?(t.changeCheckIndex(t.itemIndex,null,!0),e.preventDefault(),!0):m.prototype._keyDownHandler.call(this,e)}},y.prototype.$_getEditValue=function(e,t){function n(e,t,n,r,i){var s=[],o=t&&t.split(i.valueSeparator());if(o&&0<o.length)for(var u=0,a=o.length;u<a;u++)0<=r.indexOf(o[u])&&r.indexOf(o[u])<n.length||0<=n.indexOf(o[u])?s.push(n[u]):e.isDomainOnly()||s.push(o[u]);return s}this._list;var r=this.text,e=an.TextCellEditor.prototype.getEditValue.call(this,e=void 0===e?!1:e,t=void 0===t?!1:t),i=e,s=this._editIndex.dataColumn,o=this._selectedIndices.slice(),u=[],t=this._list.selected;if(this._lookup){if(this._domain){if(this._labeling){if(t)for(var a=0,f=o.length;a<f;a++)o[a]<this._domain.keys.length&&u.push(this._domain.keys[o[a]]);else r&&(u=n(this,r,this._domain.keys,this._domain.values,s));i=u.join(s.valueSeparator)}}else if(this._labeling&&void 0===(i=t?s.getLookupValues(o):s.getSourceValues(r))&&(i=e),this.domainOnly&&i){if(!s.values)return an.CellEditor.Unselected;for(var l=(i=p.Utils.isArray(i)?i:i&&i.split?i.split(s.valueSeparator):[i]).length-1;0<=l;l--)s.values.indexOf(i[l])<0&&i.splice(l,1)}}else{if(this._labeling){if(t)for(var c=0,f=o.length;c<f;c++)o[c]<this._values.length&&u.push(this._values[o[c]]);else r&&(u=n(this,r,this._values,this._labels,s));i=u.join(s.valueSeparator)}if(this.domainOnly&&i){if(!s.values)return an.CellEditor.Unselected;for(l=(i=p.Utils.isArray(i)?i:i&&i.split?i.split(s.valueSeparator):[i]).length-1;0<=l;l--)s.values.indexOf(i[l])<0&&i.splice(l,1)}}return p.Utils.isArray(i)?i.join(s.valueSeparator):i},y.prototype._getInputSelector=function(){return y.INPUT_CSS},y.prototype.onMultiCheckListCloseUp=function(e,t){this.closeUp(t),this._isMobile||this.setFocus()},y.prototype.onMultiCheckListCheckClick=function(e){this._editor.value=this.getCheckValues(e._selectItemIndices,this._items).join(this.editIndex.dataColumn.valueSeparator),this._selectedIndices=e._selectItemIndices.slice(),this._saveIndices=e._selectItemIndices.slice(),this._modified=!0,this._dispatchChange(),this._isMobile||this._editor.focus()},y.prototype.onMultiCheckListCancel=function(){this._isMobile?this._controller.closeList(!1):this._controller.cancelEditor(!0)},y.INPUT_CSS="rg-multicheck-editor",y);t.MultiCheckCellEditor=g;var b,f=(b=f,l.__extends(w,b),_dp(w,"searchLength",{get:function(){return this._searchLength},set:function(e){e!=this._searchLength&&(this._searchLength=e,this._changed())}}),_dp(w,"searchDelay",{get:function(){return this._searchDelay},set:function(e){e!=this._searchDelay&&(this._searchDelay=e,this._changed())}}),_dp(w,"useCtrlEnterKey",{get:function(){return this._useCtrlEnterKey},set:function(e){e!=this._useCtrlEnterKey&&(this._useCtrlEnterKey=e,this._changed())}}),_dp(w,"useEnterKey",{get:function(){return this._useEnterKey},set:function(e){e!=this._useEnterKey&&(this._useEnterKey=e,this._changed())}}),_dp(w,"initCount",{get:function(){return this._initCount},set:function(e){e!=this._initCount&&(this._initCount=e,this._changed())}}),_dp(w,"moreItemCount",{get:function(){return this._moreItemCount},set:function(e){e!=this._moreItemCount&&(this._moreItemCount=e,this._changed())}}),_dp(w,"moreText",{get:function(){return this._moreText},set:function(e){e!=this._moreText&&(this._moreText=e,this._changed())}}),_dp(w,"reInquery",{get:function(){return this._reInquery},set:function(e){e!=this._reInquery&&(this._reInquery=e,this._changed())}}),w.prototype.fillItems=function(e,t,n){return!!this.listing&&e==this.getEditText()&&(this.values=t,this.labels=n,this._refreshItems(!0,!0),this._list.$_search(this._editor.value,!0),!0)},w.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var t=13==e.keyCode;return(t=t&&(e.ctrlKey?this.useCtrlEnterKey:this.useEnterKey&&(!this._items||this._items.length<1)))&&this.editing?(e.preventDefault(),e.stopImmediatePropagation(),this.$_stopTimer(),t=this.getEditText(),t&&t!=this._searchKey&&(this._searchKey=t,this._dispatchSearch(t)),!0):b.prototype._keyDownHandler.call(this,e)}},w.prototype._keyUpHandler=function(e){this.isDisabled()||(b.prototype._keyUpHandler.call(this,e),p.Utils.isChrome&&this.$_search())},w.prototype._inputHandler=function(e){this.isDisabled()||(b.prototype._inputHandler.call(this,e),p.Utils.isChrome||this.$_search())},w.prototype._doEndEdit=function(){b.prototype._doEndEdit.call(this),this.$_stopTimer(),this._searchKey=null},w.prototype.dropDown=function(e){var t=this._list;return t&&(t.initCount=this.initCount,t.moreItemCount=this.moreItemCount,t.moreText=this.moreText),b.prototype.dropDown.call(this,!0)},w.prototype.buttonClicked=function(e){var t,n;this.listing?this.closeUp(!1):(this.dropDown(),t=this.getEditText(),(n=this._dispatchSearchCellButtonClick(t))&&"object"==typeof n&&n.values&&this.fillItems(t,n.values,n.labels))},w.prototype._getInputSelector=function(){return w.INPUT_CSS},w.prototype.$_search=function(){var e=this.getEditText();e&&e.length>=this._searchLength?this.$_startTimer():this.$_stopTimer()},w.prototype.$_startTimer=function(){this.$_stopTimer(),!this.reInquery&&this.listing&&0<this._list._items.length||(this._timer=setInterval(function(){var e=this.getEditText();e&&e!=this._searchKey&&(this._searchKey=e,this.$_stopTimer(),this._dispatchSearch(e,!0))}.bind(this),this._searchDelay))},w.prototype.$_stopTimer=function(){this._timer&&clearInterval(this._timer)},w.INPUT_CSS="rg-search-editor",w.SEARCH="onSearchCellEditorSearch",w);t.SearchCellEditor=f;var E,f=(E=an.TextCellEditor,l.__extends(S,E),S.prototype._dodispose=function(){this._editor&&this._editor.removeEventListener("change",this.$_selectChanged),this._values=null,this._labels=null,this._items=null,E.prototype.dispose.call(this)},_dp(S,"hasList",{get:function(){return!0}}),_dp(S,"native",{get:function(){return!0}}),S.prototype._createEditor=function(e){var t=p.getDoc(e);return this._container=this._createContainer(t),e.appendChild(this._container),e=t.createElement("select"),t=e.style,e.setAttribute("aria-hidden","true"),t.position="absolute",t.boxSizing="border-box",t.margin="0px",t.padding="0px",t.wordWrap="normal",t.overflow="hidden",t.resize="none",t.border="none",t.outline="none",t.left="0px",t.top="0px",t.width="100%",t.height="100%",this.$_selectChanged=function(e){e=e.target,this._itemIndex!==e.selectedIndex&&(this._dispatchChange(),this._dispatchCommit())}.bind(this),e.addEventListener("change",this.$_selectChanged),this._container.appendChild(e),e},S.prototype._getInputSelector=function(){return S.INPUT_CSS},S.prototype.initOptions=function(){E.prototype.initOptions.call(this),this._values=[],this._labels=[],this._items=[],this._itemIndex=-1},S.prototype.setEditIndex=function(e){E.prototype.setEditIndex.call(this,e),this._refreshItems(),this._resetPosition()},S.prototype.setEditValue=function(e){E.prototype.setEditValue.call(this,e),this._itemIndex=-1;for(var t=this._editor.options,n=0,r=t.length;n<r;n++)t[n].value===e?t[this._itemIndex=n].selected=!0:t[n].selected=!1},S.prototype.prepare=function(){var e=p.getWin(this._container);this._handled||(e.addEventListener("keydown",this._globalKeyDownHandler),this._handled=!0)},S.prototype.unprepare=function(){p.getWin(this._container).removeEventListener("keydown",this._globalKeyDownHandler),this._handled=!1},S.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var t=e.keyCode,n=p.Utils.isIE&&this.visible;switch(t){case 40:if(e.altKey)return this._requestStart(),!0;if(n)return!1;break;case 13:case 38:case 33:case 34:case 36:case 35:if(n)return!1}return E.prototype._keyDownHandler.call(this,e)}},S.prototype._resetPosition=function(){var e=this._grid;e.editorLender||((e=e.getEditCellBounds(this,this._editIndex)).x--,e.y--,this.setBounds(e.x,e.y,0,0,0))},S.prototype._refreshItems=function(e,t){void 0===t&&(t=!1);var n=this.editIndex,r=n.item;if(this._values&&(0<this._values.length||t))this.$_setItems(this._values,this._labels);else if(n.dataColumn&&n.item&&(0<=n.dataRow||dt.ItemState_isEditing(r.itemState))){t=n.dataColumn;if(t.lookupSource){for(var i=t.lookupKeyFieldIds,s=[],o=0;o<i.length-1;o++)s.push(r.getData(i[o]));n=t.lookupSource.getTextDomain(s),n&&n.values&&0<n.values.length&&this.$_setItems(n.keys,n.values)}else t.values&&0<t.values.length&&this.$_setItems(t.values,t.labels)}},S.prototype.$_setItems=function(e,t){this._items=[];for(var n=this._editor,r=n.options,i=p.getDoc(n),s=r.length-1;0<=s;s--)r.remove(s);for(var o=0,u=e.length;o<u;o++){var a=i.createElement("option");a.value=e[o],a.text=(t&&t.length>o?t:e)[o],this._items.push({value:a.value,label:a.text}),n.options.add(a,null)}},S.prototype.getEditValue=function(){return this.$_getEditValue()},S.prototype.$_getEditValue=function(){return this._editor.value},S.INPUT_CSS="rg-nlist-editor",S);t.NativeListCellEditor=f});t(Nn),Nn.DropDownPosition,Nn.DropDownSortStyle,Nn.DropDownValueLabel,Nn.DropDownList,Nn.DropDownCellEditor,Nn.MultiCheckCellEditor,Nn.SearchCellEditor,Nn.NativeListCellEditor;var Cn=n(function(e,t){function n(e,t,n){function r(e){var n=new Date(e),r=(r=n.getDay())<t?-3-r:4-r,e=n.getDate();return n.setDate(e+r),n}void 0===n&&(n=!1);var i=e.getFullYear(),s=r(new Date(i,0,1)),o=r(new Date(i,e.getMonth(),e.getDate())),u=s.getFullYear(),u=(e=o.getFullYear())<i?(s=r(new Date(u,0,1)),Math.ceil((o.valueOf()-s.valueOf())/6048e5)+(s.getFullYear
()===e?1:0)):i<e?1:Math.ceil((o.valueOf()-s.valueOf())/6048e5)+(u===e?1:0);return String(e)+(n?"-":"")+(u<10?"0"+u:String(u))}function u(e){var t=r.call(this)||this;return t._tooltips=[],t._items=[],t._enabled=!0,t._owner=e,t}function h(e,t){return e=a.call(this,e)||this,t&&e.load(t),e}function m(e,t){return e=d.call(this,e)||this,t&&e.load(t),e}function w(){var e=g.call(this)||this;return e._items=[],e._count=-1,e}function T(e,t){var n=E.call(this)||this;n._month=-1,n._clickHandler=function(e){p.Utils.stopEvent(e,!0),e=e.currentTarget,e=p.Utils.getChildIndex(e),0<=e&&(this._month=e,this.fireEvent(T.CLOSE_UP,this._month)),this.hide()}.bind(n);var r=p.getDoc(t);return n._listElement=t,n._months=e.months,n._element=n.$_createPicker(r),n._element.style.zIndex=String(e._baseZindex+2),n}function k(e,t){var n=N.call(this)||this;return n._minWidth=0,n._maxWidth=0,n._yearNavigation=!1,n._dropDownPosition=Nn.DropDownPosition.BUTTON,n._showToday=!0,n._viewGridInside=!1,n._showWeeks=!1,n._startWeek=0,n._weekSelectable=!1,n._weekSeparator="",n._date=new Date,n._selected=!1,n._focused=!0,n._canceled=!1,n._clickHandler=function(e){var t=this.$_getCellDate(this._currDate,e.currentTarget.$_day+1);this._editor.containsRange(t)&&((e=this._holidays&&this._holidays.contains(t))&&!e.enabled||(this.date=new Date(t),this._selected=!0,this.focused=!0,this._editor.$_selectDate(this._date),this.showButtons||this.fireEvent(k.CLOSE_UP,!0)))}.bind(n),n._dblClickHandler=function(e){this.fireEvent(k.CLOSE_UP,!0)}.bind(n),n._yearWeekClickHandler=function(e){var t,e=e.currentTarget.$_yearWeek;(t=e?s(e):t)&&this._editor.containsRange(t)&&(this._date=new Date(t),this._selected=!0)}.bind(n),n._keydownHandler=function(e){27==e.keyCode&&(this.isMonthLisiting()?this.closeMonth():this.fireEvent(Nn.DropDownList.CLOSE_UP,!1))}.bind(n),n._mouseupHandler=function(e){this._isMobile||this._editor.setFocus()}.bind(n),e.doc,n._editor=t,n._container=e,n._yearDisplayFormat=t.yearDisplayFormat,n._monthDisplayFormat=t.monthDisplayFormat,n._months=t.months,n._weekDays=p.Utils.week_days,n._element=n.$_createPicker(t),n._element.addEventListener("keydown",n._keydownHandler),n._element.addEventListener("mouseup",n._mouseupHandler),n._monthPicker=new S(t,n._element),n._monthPicker.addListener(n),n}function A(e,t){var n=L.call(this,e,t)||this;return n._minDate=new Date(1970,0,1),n._maxDate=new Date(2100,11,31),n._yearNavigation=!1,n._dropDownPosition=Nn.DropDownPosition.BUTTON,n._dropDownWhenClick=!1,n._showToday=!0,n._yearDisplayFormat="{Y}\ub144",n._monthDisplayFormat="{M}\uc6d4",n._months=null,n._weekDays=null,n._showWeeks=!1,n._startWeek=0,n._weekSelectable=!1,n._weekSeparator="",n._commitOnSelect=!1,n._holidays=null,n._showButtons=!0,n._saveLabel="Save",n._cancelLabel="Cancel",n._deleteLabel="Delete",n._holidayCollection=new b,n._closing=!1,n._regx=/[0-9]|\.|\-|\/|a|A|p|P|m/,n._globalMouseHandler=function(e){var t=e.target;if(this._isMarquee(t))this.closeUp(!1);else{for(;t;){if(t===this._list._element)return void this._list._monthPicker.hide();if(t===this._list._monthPicker._element)return;t=t.parentElement}this.closeUp(!0)}}.bind(n),t=e.editorOptions,n._yearDisplayFormat=t.yearDisplayFormat,n._monthDisplayFormat=t.monthDisplayFormat,n._months=t.months,n._weekDays=t.weekDays,n._baseZindex=e.displayOptions.baseZindex,n._list=new C(e.container,n),n._list.addListener(n),n}function D(e,t,n){var r=O.call(this)||this;r._dropDownPosition=Nn.DropDownPosition.BUTTON,r._viewGridInside=!1,r._selected=!1,r._focused=!1;var i=p.getDocWin(e.doc);return r._jquery=i&&i.jQuery,r._jquery,r._editor=t,r._container=e,r._btOptions=n,r._element=r.$_createList(e.doc),r}function H(e,t){return t=P.call(this,e,t)||this,t._minDate=new Date(1970,0,1),t._maxDate=new Date(2100,11,31),t._dropDownPosition=Nn.DropDownPosition.BUTTON,t._dropDownWhenClick=!1,t._commitOnSelect=!1,t._regx=/[0-9]|\.|\-|\/|a|A|p|P|m/,t._closing=!1,t._globalMouseHandler=function(e){var t=e.target;if(this._isMarquee(t))this.closeUp(!1);else{for(;t;){if(t==this._list._element)return;t=t.parentNode}this.closeUp(!0)}}.bind(t),t}function j(e,t){return t=B.call(this,e,t)||this,t._minDate=new Date(1970,0,1),t._maxDate=new Date(2100,11,31),t}Object.defineProperty(t,"__esModule",{value:!0});var r,i=/[\u3131-\u314e\u314f-\u3163\uac00-\ud79d]/g,s=function(e){if(!e)return null;(e=String(e))&&(e=e.replace(/[^0-9]/g,""));var t=parseInt(e.substr(0,4)),n=parseInt(e.substr(4,2));if(isNaN(t)||t<=0||isNaN(n)||n<0)return null;var r=new Date(t,0,1),e=4-r.getDay()+1;return r.setDate(e),r.getFullYear()==t&&n--,e=7*n,r.setDate(r.getDate()+e),r},o=(r=y.Base,l.__extends(u,r),u.prototype._doDispose=function(){this._owner=null,this._tooltips=null,this._items=null,r.prototype._doDispose.call(this)},_dp(u,"tooltips",{get:function(){return this._tooltips},set:function(e){this._tooltips=e}}),_dp(u,"items",{get:function(){return this._items},set:function(e){this._items=e.slice()}}),_dp(u,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e}}),_dp(u,"count",{get:function(){return this._items&&this._items.length}}),_dp(u,"styleName",{get:function(){return this._styleName||""},set:function(e){this._styleName=e}}),u.prototype.load=function(e){this.clear()},u.prototype.clear=function(){this._items=[],this._tooltips=[]},u.prototype.contains=function(e){return!1},u.prototype.getTooltip=function(e){return null},u);t.Holiday=o;var a,f=(a=o,l.__extends(h,a),h.prototype._doDispose=function(){a.prototype._doDispose.call(this)},h.prototype.load=function(e){if(a.prototype.load.call(this,e),e){var t=p.Utils.makeArray(e.dates,!0);e.tooltips=p.Utils.makeArray(e.tooltips,!0);for(var n=0,r=t.length;n<r;n++){var i=t[n],s=void 0;if(i instanceof Date)(s=new Date(i)).setHours(0,0,0,0);else if("number"==typeof i)(s=new Date(i)).setHours(0,0,0,0);else if("string"==typeof i){var o=(i=4!==i.length&&8!==i.length||!/^[0-9]*$/.test(i)?i:4===i.length?i.replace(/(\d{2})(\d{2})/,"$1/$2"):i.replace(/(\d{4})(\d{2})(\d{2})/,"$1/$2/$3")).split(/[.//-]/);if(2==o.length)try{s=parseInt(o[0]).toString()+"/"+parseInt(o[1]).toString()}catch(e){}else 3==o.length&&(s=_.DateTimeConverter.getSimpleDateNull(i))}s&&(this._items.push(s),e.tooltips[n]&&this._tooltips.push(e.tooltips[n]))}null!=e.enabled&&(this.enabled=!!e.enabled),this.styleName=e.styleName}},h.prototype.getItemIndex=function(e){for(var t=0,n=this._items.length;t<n;t++){var r=this._items[t];if(r instanceof Date&&r.getFullYear()===e.getFullYear()&&r.getMonth()===e.getMonth()&&r.getDate()===e.getDate())return t;if(r===e.getMonth()+1+"/"+e.getDate())return t}return-1},h.prototype.contains=function(e){return 0<=this.getItemIndex(e)},h.prototype.getTooltip=function(e){return e=this.getItemIndex(e),0<=e?this._tooltips[e]:null},h),d,v=(d=o,l.__extends(m,d),m.prototype._doDispose=function(){d.prototype._doDispose.call(this)},m.prototype.load=function(e){d.prototype.load.call(this,e),e&&(this._items=p.Utils.makeArray(e.days,!0),this._tooltips=p.Utils.makeArray(e.tooltips,!0),this.enabled=!!e.enabled,this.styleName=e.styleName)},m.prototype.contains=function(e){return e instanceof Date&&0<=this._items.indexOf(e.getDay())},m.prototype.getTooltip=function(e){return e=e instanceof Date?this._items.indexOf(e.getDay()):this._items.indexOf(e),0<=e?this._tooltips[e]:null},m),g,b=(g=y.Base,l.__extends(w,g),w.prototype._doDispose=function(){this._editor=null,this._items=null,g.prototype._doDispose.call(this)},_dp(w,"items",{get:function(){return this._items},set:function(e){this._items=e}}),_dp(w,"editor",{get:function(){return this._editor},set:function(e){this._editor=e}}),_dp(w,"isNull",{get:function(){return-1==this._count}}),_dp(w,"count",{get:function(){return this._count}}),w.prototype.setNull=function(){this.clear()},w.prototype.getDateConvert=function(){return this._editor&&this._editor._dateConverter},w.prototype.clear=function(){for(var e=0,t=this._items.length;e<t;e++)this._items[e].clear();this._items=[],this._count=-1},w.prototype.load=function(e){if(this.clear(),e){for(var t=0,n=(e=p.Utils.isArray(e)?e:[e]).length;t<n;t++){var r=e[t],i=void 0;switch(r.type){case"day":i=new v(this,r);break;case"date":i=new f(this,r)}0<i.count&&this._items.push(i)}this._count=this._items.length}else this._count=-1},w.prototype.contains=function(e){for(var t=0,n=this._items.length;t<n;t++)if(this._items[t].contains(e))return this._items[t];return null},w);t.HolidayCollection=b;var E,S=(E=x.EventAware,l.__extends(T,E),T.prototype._doDispose=function(){this._listElement=null,p.Utils.detach(this._element),E.prototype._doDispose.call(this)},_dp(T,"month",{get:function(){return this._month},set:function(e){this._month=e}}),_dp(T,"listElement",{get:function(){return this._listElement}}),_dp(T,"listing",{get:function(){return this._container&&this._container.contains(this._element)}}),T.prototype.show=function(e,t,n,r){var i;(this._container=e)&&(e.appendChild(this._element),i=p.getDoc(e),e=p.Utils.getClientRect(this._element),i=p.Utils.getScrolled(i),r&&this._listElement&&(r=this._listElement.getBoundingClientRect().width,t=parseInt(this._listElement.style.left.replace("px",""))+r/2,n=parseInt(this._listElement.style.top.replace("px",""))),t=Math.max(i.sx,t-e.width-2),n=Math.max(i.sy,n-e.height/2+13),p.Utils.move(this._element,t,n))},T.prototype.hide=function(){p.Utils.detach(this._element),this._container=null},T.prototype.$_createPicker=function(e){var t=e.createElement("div"),n=t.style;n.position="absolute",n.cssFloat="none",n.clear="both",n.boxSizing="border-box",t.className="rg-cal-month-picker",t.onkeydown=function(e){27==e.keyCode&&this.hide()}.bind(this);for(var r=1;r<=12;r++){var i=e.createElement("div"),s=i.style;s.position="relative",s.cssFloat="none",i.className="rg-cal-month-picker-item",p.Utils.disableSelection(i),t.appendChild(i),i.onclick=this._clickHandler,i.onmouseup=this._clickHandler,s=e.createElement("span"),s.innerHTML=p.Utils.htmlEncode((this._months?this._months[r-1]:r)+" "),s.tabIndex=-1,p.Utils.disableSelection(s),i.appendChild(s)}return t},T.CLOSE_UP="onMonthPickerCloseUp",T),N,C=(N=x.EventAware,l.__extends(k,N),k.prototype._doDispose=function(){this._monthPicker=this._monthPicker&&this._monthPicker.dispose(),this._element&&(this._element.removeEventListener("keydown",this._keydownHandler),this._element.removeEventListener("mouseup",this._mouseupHandler),p.Utils.detach(this._element)),N.prototype._doDispose.call(this)},_dp(k,"minWidth",{get:function(){return this._minWidth},set:function(e){e!=this._minWidth&&(this._minWidth=e,this._changed())}}),_dp(k,"maxWidth",{get:function(){return this._maxWidth},set:function(e){e!=this._maxWidth&&(this._maxWidth=e,this._changed())}}),_dp(k,"minDate",{get:function(){return this._minDate},set:function(e){e!=this._minDate&&(this._minDate=e,this._changed())}}),_dp(k,"maxDate",{get:function(){return this._maxDate},set:function(e){e!=this._maxDate&&(this._maxDate=e,this._changed())}}),_dp(k,"yearNavigation",{get:function(){return this._yearNavigation},set:function(e){e!=this._yearNavigation&&(this._yearNavigation=e,this._changed())}}),_dp(k,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(e){e!=this._dropDownPosition&&(this._dropDownPosition=e,this._changed())}}),_dp(k,"showToday",{get:function(){return this._showToday},set:function(e){e!=this._showToday&&(this._showToday=e,this._changed())}}),_dp(k,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(e){e!=this._yearDisplayFormat&&(this._yearDisplayFormat=e,this._changed())}}),_dp(k,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(e){e!=this._monthDisplayFormat&&(this._monthDisplayFormat=e,this._changed())}}),_dp(k,"months",{get:function(){return this._months},set:function(e){e!=this._months&&(this._months=e,this._changed())}}),_dp(k,"viewGridInside",{get:function(){return this._viewGridInside},set:function(e){e!=this._viewGridInside&&(this._viewGridInside=e,this._changed())}}),_dp(k,"showWeeks",{get:function(){return this._showWeeks},set:function(e){e!=this._showWeeks&&(this._showWeeks=e,this._changed())}}),_dp(k,"startWeek",{get:function(){return this._startWeek},set:function(e){e!=this._startWeek&&(this._startWeek=e,this._changed())}}),_dp(k,"weekSelectable",{get:function(){return this._weekSelectable},set:function(e){e!=this._weekSelectable&&(this._weekSelectable=e,this._changed())}}),_dp(k,"weekSeparator",{get:function(){return this._weekSeparator},set:function(e){e!=this._weekSeparator&&(this._weekSeparator=e,this._changed())}}),_dp(k,"holidays",{get:function(){return this._holidays},set:function(e){e!=this._holidays&&(this._holidays=e,this._changed())}}),_dp(k,"date",{get:function(){return this._date},set:function(e){e?this._date&&this._date.getTime()===e.getTime()||(this._currDate=new Date(e),this._date=new Date(e),this.listing&&this.$_buildCalendar()):null===e&&(this._date=null)}}),_dp(k,"listing",{get:function(){return this._containerElement&&this._containerElement.contains(this._element)}}),_dp(k,"monthListing",{get:function(){return this._monthPicker.listing}}),_dp(k,"selected",{get:function(){return this._selected}}),_dp(k,"canceled",{get:function(){return this._canceled}}),_dp(k,"focused",{get:function(){return this._focused},set:function(e){e!=this._focused&&(this._focused=e,this._element.style.border=e?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=e?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px",this._headerElement.style.backgroundColor=e?"rgba(0, 200, 200, 0.1)":"#e8e8e8",this._headElement.style.opacity=e?"1.0":"0.5")}}),_dp(k,"today",{get:function(){return this.date=new Date}}),_dp(k,"showButtons",{get:function(){return this._showButtons},set:function(e){e!=this._showButtons&&(this._footer&&(this._footer.style.display=e?"":"none"),this._showButtons=e),this._showButtons=e}}),_dp(k,"saveLabel",{get:function(){return this._saveLabel},set:function(e){e!=this._saveLabel&&(this._saveElement&&(this._saveElement.textContent=e),this._saveLabel=e)}}),_dp(k,"cancelLabel",{get:function(){return this._cancelLabel},set:function(e){e!=this._cancelLabel&&(this._cancelElement&&(this._cancelElement.textContent=e),this._cancelLabel=e)}}),_dp(k,"deleteLabel",{get:function(){return this._deleteLabel},set:function(e){e!=this._deleteLabel&&(this._deleteElement&&(this._deleteElement.textContent=e),this._deleteLabel=e)}}),k.prototype.setWeekDays=function(e){e!=this._weekDays&&(p.Utils.isArray(e)&&7<=e.length?this._weekDays=e:this._weekDays=p.Utils.week_days)},k.prototype.closeMonth=function(){this._monthPicker.hide()},k.prototype.show=function(e,t,n,r,i){this._containerElement=!p.Utils.isMobile()&&this._viewGridInside?this._container._container:e,this.$_show(t,n,r,i)},k.prototype.hide=function(){this.focused=!1,this._monthPicker.hide(),p.Utils.detach(this._element),this._containerElement=null},k.prototype.incDay=function(e){var t;return this._date.getMonth()==this._currDate.getMonth()?(t=new Date(this._date),this._date&&t.setDate(this._date.getDate()+e)):(t=this._currDate,t=new Date(t.getFullYear(),t.getMonth(),1)),this.date=t},k.prototype.incMonth=function(e){var t;return this._date.getMonth()==this._currDate.getMonth()?(t=new Date(this._date),this._date&&p.Utils.incMonth(t,e)):(t=this._currDate,t=new Date(t.getFullYear(),t.getMonth(),1)),this.date=t},k.prototype.firstDay=function(){var e=new Date(this._currDate);return this._date&&e.setDate(1),this.date=e},k.prototype.lastDay=function(){var e,t,n=new Date(this._currDate);return this._date&&(e=n.getFullYear(),t=n.getMonth(),t=p.Utils.month_days[p.Utils.isLeapYear(e)?1:0][t],n.setDate(t)),this.date=n},k.prototype._changed=function(){},k.prototype.$_getCellDate=function(e,t){return e=new Date(e),e.setDate(t),e},k.prototype.$_createPicker=function(e){var t=this._container.doc,n=t.createElement("div"),r=n.style;return r.position="absolute",r.cssFloat="none",r.clear="both",r.boxSizing="border-box",r.margin="0px",r.overflow="auto",r.zIndex=String(e._baseZindex+2),n.className="rg-calendar",this._header=this.$_createHeader(t),n.appendChild(this._header),this._calendar=this.$_createCalendar(t),n.appendChild(this._calendar),this._footer=this.$_createFooter(t),n.appendChild(this._footer),n},k.prototype.$_createHeader=function(e){var t=this,n=this._headerElement=e.createElement("div"),r=n.style;r.position="relative",n.className="rg-cal-header";var i=e.createElement("div");(r=i.style).position="relative",r.textAlign="center",r.height="100%",n.appendChild(n.$_title=i),i.className="rg-cal-yearmonth";var s=e.createElement("span");return(r=s.style).position="relative",r.verticalAlign="top",r.height="16px",s.className="rg-cal-year",i.appendChild(i.$_year=s),s.innerHTML="2020\ub144",s.onclick=function(e){},s=this.$_createYearSpin(e),i.appendChild(i.$_yearSpin=s),s=e.createElement("span"),(r=s.style).position="relative",r.verticalAlign="top",s.className="rg-cal-month",i.appendChild(i.$_month=s),s.innerHTML="1\uc6d4",s.onmousedown=function(e){p.Utils.stopEvent(e,!0),e=p.Utils.getOffset(this._headerElement.$_title.$_month),this._monthPicker.show(this._containerElement,e.x,e.y,!p.Utils.isMobile()&&this._viewGridInside)}.bind(this),s=e.createElement("span"),(r=s.style).position="absolute",r.left="4px",r.minWidth="17px",r.minHeight="17px",s.className="rg-cal-prev-month",n.appendChild(n.$_prev=s),s.onclick=function(e){p.Utils.incMonth(this._currDate,-1),this.$_buildCalendar()}.bind(this),s=e.createElement("span"),(r=s.style).position="absolute",r.right="4px",r.minWidth="17px",r.minHeight="17px",s.className="rg-cal-next-month",n.appendChild(n.$_next=s),s.onclick=function(e){p.Utils.incMonth(this._currDate,1),this.$_buildCalendar()}.bind(this),e=this._todayElement=e.createElement("span"),(r=e.style).position="absolute",r.right="35px",r.top="2px",e.className="rg-cal-today-button",n.appendChild(e),e.innerHTML="Today",e.onclick=function(e){var n=new Date;t.focused=!0,t.date=n,t._selected=!0,t._editor.$_selectDate(t._currDate)},n},k.prototype.$_createYearSpin=function(e){var t=e.createElement("div"),n=t.style;n.display="inline-block",n.visibility="hidden",n.position="relative",n.width="15px",n.height="100%",n.marginRight="2px";var r=e.createElement("span");return(n=r.style).position="absolute",n.top="10%",n.left="0px",n.width="15px",n.height="40%",n.display="block",r.className="rg-cal-next-year",t.appendChild(r),r.onclick=function(e){this._currDate.setFullYear(this._currDate.getFullYear()+1),this.$_buildCalendar()}.bind(this),e=e.createElement("span"),(n=e.style).position="absolute",n.top="50%",n.left="0px",n.width="15px",n.height="40%",n.display="block",e.className="rg-cal-prev-year",t.appendChild(e),e.onclick=function(e){this._currDate.setFullYear(this._currDate.getFullYear()-1),this.$_buildCalendar()}.bind(this),t},k.prototype.$_createFooter=function(e){var t,n=e.createElement("div"),r=n.style;return r.display="none",n.className="rg-cal-buttons",t=this._deleteElement=e.createElement("span"),this._deleteLabel&&(t.textContent=this._deleteLabel),t.className="rg-cal-delete-button",(r=t.style).float="left",t.onclick=function(e){this._selected=!0,this.date=null,this._editor.$_selectDate(null)}.bind(this),n.appendChild(t),t=this._saveElement=e.createElement("span"),this._saveLabel&&(t.textContent=this._saveLabel),t.className="rg-cal-save-button",(r=t.style).float="right",t.onclick=function(e){this.fireEvent(k.CLOSE_UP,!0)}.bind(this),n.appendChild(t),t=this._cancelElement=e.createElement("span"),this._cancelLabel&&(t.textContent=this._cancelLabel),t.className="rg-cal-cancel-button",(r=t.style).float="right",t.onclick=function(e){this._selected=!1,this._canceled=!0,this.fireEvent(k.CLOSE_UP,!1)}.bind(this),n.appendChild(t),n},k.prototype.$_createCalendar=function(e){var t=["sun","mon","tue","wed","thu","fri","sat"],n=e.createElement("table");(f=n.style).margin="2px",n.className="rg-cal-days-table";var r=this._headElement=e.createElement("thead");r.className="rg-cal-weeks",n.appendChild(n.$_head=r);var i=e.createElement("tr");r.appendChild(i);var s=[],o=e.createElement("th");(f=o.style).minWidth="20px",f.textAlign="center",o.className="rg-cal-week-year-week",i.appendChild(o);var u=e.createElement("span");o.appendChild(u),r.$_weeks=o;for(var a=0;a<7;a++){var f,l=e.createElement("th");(f=l.style).minWidth="20px",f.textAlign="center",l.className="rg-cal-week-"+t[a],i.appendChild(l);var c=e.createElement("span");c.innerHTML=p.Utils.htmlEncode(this._weekDays[a]),l.appendChild(c),s.push(c)}r.$_cells=s;var h=e.createElement("tbody");h.className="rg-cal-days",n.appendChild(n.$_body=h);for(var d=h.$_rows=[],v=h.$_yearweeks=[],m=0;m<6;m++){var g=e.createElement("tr");h.appendChild(g),d.push(g),g.$_cells=s=[];var y=e.createElement("td");(f=y.style).padding="1px",g.appendChild(y);var b=e.createElement("span");y.appendChild(y.$_span=b),v.push(y);for(a=0;a<7;a++){var w=e.createElement("td");(f=w.style).padding="1px",w.className="rg-cal-day rg-cal-week-"+t[(a+this._startWeek)%7],g.appendChild(w),w.onclick=this._clickHandler,w.ondblclick=this._dblClickHandler;var E=e.createElement("span");w.appendChild(w.$_span=E),s.push(w)}}return n},k.prototype.$_show=function(e,t,n,r){var i=p.getDoc(this._element),s=p.getDocWin(i);this.focused=!1,this._selected=!1,this._canceled=!1,this._header.$_title.$_yearSpin.style.visibility=this._yearNavigation?"visible":"hidden",this._footer.style.display=this.showButtons?"":"none",this._todayElement.style.display=this._showToday?"initial":"none",this._header.$_title.style.marginRight=this._showToday?"70px":"40px";var o=this._date;this._currDate=o?new Date(o):new Date,this._today=new Date,this.$_buildCalendar(),p.Utils.disableSelection(this._element),this._containerElement.appendChild(this._element);var u=p.Utils.getBrowserSize(),a=p.Utils.getClientRect(this._containerElement),f=p.Utils.getClientRect(this._container._container),l=u.width,c=u.height,o=p.Utils.getClientRect(this._element),u=s.pageXOffset||i.documentElement.scrollLeft,s=s.pageYOffset||i.documentElement.scrollTop;i.documentElement.scrollWidth>i.documentElement.clientWidth&&(c-=18),i.documentElement.scrollHeight>i.documentElement.clientHeight&&(l-=18),e+=f.left-a.left,t+=f.top-a.top,(p.Utils.ieTen||p.Utils.ieOld||p.Utils.ieLeg)&&(e+=i.documentElement.scrollLeft,t+=i.documentElement.scrollTop),t+o.height>c+s&&(t=t-r.height-o.height)<0&&(t=c-o.height-2),this._dropDownPosition!=Nn.DropDownPosition.EDITOR?e=Math.max(0,e+n-o.width):e+o.width>l+u&&(e=l-o.width),!p.Utils.isMobile()&&this._viewGridInside&&(t=r.bottom-a.top+2,(a.bottom<r.bottom+o.height||c+s<r.bottom+o.height)&&(t=r.top-o.height-a.top-2)),p.Utils.isMobile()||this._element.offsetParent||(e+=i.documentElement.offsetLeft,t+=i.documentElement.offsetTop),p.Utils.move(this._element,Math.max(0,e),Math.max(0,t))},k.prototype.$_checkFocusedWeek=function(e,t,n){e=this.$_isFocusedWeek(e,t.$_yearWeek),t.className="rg-cal-week-year-week "+(e?"rg-cal-week-year-focusweek":"")},k.prototype.$_isFocusedWeek=function(e,t){return e&&t&&n(e,this._startWeek)==t},k.prototype.$_isFocusedDay=function(e,t){var n=this._date;return n&&e.getFullYear()==n.getFullYear()&&e.getMonth()==n.getMonth()&&t==n.getDate()},k.prototype.$_isToday=function(e,t){var n=this._today;return n&&e.getFullYear()==n.getFullYear()&&e.getMonth()==n.getMonth()&&t==n.getDate()},k.prototype.$_buildCalendar=function(){var e,t,r=["sun","mon","tue","wed","thu","fri","sat"],i=this._header,s=this._currDate,o=i.$_prev,u=i.$_next,a=i.$_title,f=s.getFullYear(),i=s.getMonth();a.$_year.innerHTML=(this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",f+""):f+"\ub144")+"&nbsp;",this._months&&0<this._months.length?a.$_month.innerHTML=this._months[i]:a.$_month.innerHTML=this._monthDisplayFormat?this._monthDisplayFormat.replace("{M}",(i+1).toString()):i+1+"\uc6d4",o.title=0==i?f-1+"/12":f+"/"+p.Utils.pad(i),u.title=11==i?f+1+"/01":f+"/"+p.Utils.pad(i+2);for(var l=this._calendar.$_head.$_cells,c=0;c<7;c++){var h=l[(c+7-this._startWeek)%7];h.innerHTML=p.Utils.htmlEncode(this._weekDays[c]),h.parentElement.className="rg-cal-week-"+r[c]}this._calendar.$_head.$_weeks.style.display=this.showWeeks?"":"none";for(var u=this._calendar.$_body,d=u.$_yearweeks,c=0,v=d.length;c<v;c++)d[c].style.display=this.showWeeks?"":"none",d[c].onclick=this.weekSelectable?this._yearWeekClickHandler:null;var m=u.$_rows,g=p.Utils.month_days[p.Utils.isLeapYear(f)?1:0][i],y=new Date(s);y.setDate(1);var b=(y.getDay()+7-this._startWeek)%7;30==g&&6==b||31==g&&5<=b?p.Utils.addChild(u,m[5]):p.Utils.removeChild(u,m[5]),28==g&&0==b?p.Utils.removeChild(u,m[4]):p.Utils.addChild(u,m[4]);var w=0,E=d[0];if(l=m[0].$_cells,0<b){f=f,i-=1,i<0&&(f--,i=11);for(var S=p.Utils.month_days[p.Utils.isLeapYear(f)?1:0][i],c=0;c<b;c++){(k=l[c]).removeAttribute("title");var x=new Date(this._currDate);k.$_day=c-b,x.setDate(k.$_day+1);var T=this._editor.containsRange(x);0===c&&(E.$_yearWeek=n(x,this._startWeek),E.$_span.innerText=E.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,E,T)),k.$_span.innerHTML=S-b+c+1,k.className="rg-cal-day rg-cal-prev-day "+(T?"":"rg-cal-disable-day ")+"rg-cal-week-"+r[(c+this._startWeek)%7]}}for(c=b;c<7;c++)(k=l[c]).removeAttribute("title"),k.$_day=w++,k.$_span.innerHTML=w,(y=new Date(this._currDate)).setDate(w),T=this._editor.containsRange(y),0===c&&(E.$_yearWeek=n(y,this._startWeek),E.$_span.innerText=E.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,E,T)),e="rg-cal-day "+(this.$_isFocusedDay(s,w)?"rg-cal-focusday ":""),e+=this.$_isToday(s,w)?"rg-cal-today ":"",e+=(t=this._holidays&&this._holidays.contains(y))?t.styleName+" rg-cal-holiday ":"",e+=T?"":"rg-cal-disable-day ",e+="rg-cal-week-"+r[(c+this._startWeek)%7],k.className=e,t&&(e=t.getTooltip(this.$_getCellDate(s,w)))&&(k.title=e);for(var N=1;N<6&&w<g;N++)for(var l=m[N].$_cells,C=d[N],c=0;c<7;c++)if(w<g)(k=l[c]).removeAttribute("title"),k.$_day=w++,(y=new Date(this._currDate)).setDate(w),T=this._editor.containsRange(y),0===c&&(C.$_yearWeek=n(y,this._startWeek),C.$_span.innerText=C.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,C,T)),k.$_span.innerHTML=w,e="rg-cal-day "+(this.$_isFocusedDay(s,w)?"rg-cal-focusday ":""),e+=this.$_isToday(s,w)?"rg-cal-today ":"",e+=(t=this._holidays&&this._holidays.contains(y))?t.styleName+" rg-cal-holiday ":"",e+=T?"":"rg-cal-disable-day ",e+="rg-cal-week-"+r[(c+this._startWeek)%7],k.className=e,t&&(e=t.getTooltip(this.$_getCellDate(s,w)))&&(k.title=e);else for(var k,L=1;c<7;c++)(k=l[c]).removeAttribute("title"),k.$_day=w++,(y=new Date(this._currDate)).setDate(w),T=this._editor.containsRange(y),k.$_span.innerHTML=L++,k.className="rg-cal-day rg-cal-next-day "+(T?"":"rg-cal-disable-day ")+"rg-cal-week-"+r[(c+this._startWeek)%7]},k.prototype.onMonthPickerCloseUp=function(e,t){t-=this._currDate.getMonth(),t&&(p.Utils.incMonth(this._currDate,t),this.$_buildCalendar()),p.Utils.isMobile()||this._editor.setFocus()},k.CLOSE_UP="onDatePickerCloseUp",k),L,o=(L=an.PopupCellEditor,l.__extends(A,L),A.prototype._doDispose=function(){this._globalMouseHandler=null,this._holidayCollection=this._holidayCollection.dispose(),this._list=this._list&&this._list.dispose(),L.prototype._doDispose.call(this)},_dp(A,"editFormat",{get:function(){return this._editFormat},set:function(e){e!=this._editFormat&&(this._editFormat=e,this.datetimeFormat=e,this._changed())}}),_dp(A,"minDate",{get:function(){return this._minDate},set:function(e){e!=this._minDate&&(this._minDate=e?e instanceof Date?e:"string"==typeof e?this._dateConverter.getDateNull(e):null:null,this._minDate&&this._minDate.setHours(0,0,0,0),this._changed())}}),_dp(A,"maxDate",{get:function(){return this._maxDate},set:function(e){e!=this._maxDate&&(this._maxDate=e?e instanceof Date?e:"string"==typeof e?this._dateConverter.getDateNull(e):null:null,this._maxDate&&this._maxDate.setHours(23,59,59),this._changed())}}),_dp(A,"yearNavigation",{get:function(){return this._yearNavigation},set:function(e){e!=this._yearNavigation&&(this._yearNavigation=e,this._changed())}}),_dp(A,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(e){e!=this._dropDownPosition&&(this._dropDownPosition=e,this._changed())}}),_dp(A,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(e){e!=this._dropDownWhenClick&&(this._dropDownWhenClick=e,this._changed())}}),_dp(A,"showToday",{get:function(){return this._showToday},set:function(e){e!=this._showToday&&(this._showToday=e,this._changed())}}),_dp(A,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(e){e!=this._yearDisplayFormat&&(this._yearDisplayFormat=e,this._changed())}}),_dp(A,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(e){e!=this._monthDisplayFormat&&(this._monthDisplayFormat=e,this._changed())}}),_dp(A,"months",{get:function(){return this._months},set:function(e){e!=this._months&&(this._months=e,this._changed())}}),_dp(A,"weekDays",{get:function(){return this._weekDays},set:function(e){e!=this._weekDays&&(this._weekDays=e,this._changed())}}),_dp(A,"showWeeks",{get:function(){return this._showWeeks},set:function(e){e!=this._showWeeks&&(this._showWeeks=e,this._changed())}}),_dp(A,"startWeek",{get:function(){return this._startWeek},set:function(e){(e=null==e||isNaN(e=Math.floor(e))?0:e)!==this._startWeek&&(this._startWeek=e,this._changed())}}),_dp(A,"weekSelectable",{get:function(){return this._weekSelectable},set:function(e){e!=this._weekSelectable&&(this._weekSelectable=e,this._changed())}}),_dp(A,"weekSeparator",{get:function(){return this._weekSeparator},set:function(e){e!=this._weekSeparator&&(this._weekSeparator=e,this._changed())}}),_dp(A,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(e){e!=this._commitOnSelect&&(this._commitOnSelect=e,this._changed())}}),_dp(A,"defaultShowDate",{get:function(){return this._defaultShowDate},set:function(e){e!=this._defaultShowDate&&(this._defaultShowDate=e,this._changed())}}),_dp(A,"defaultDate",{get:function(){return this._defaultDate},set:function(e){e!=this._defaultDate&&(this._defaultDate=e instanceof Date?new Date(e):e,this._changed())}}),_dp(A,"holidays",{get:function(){return this._holidays},set:function(e){(this._holidays=e)?(this._holidayCollection=this._holidayCollection||new b,(this._holidayCollection.editor=this)._holidayCollection.load(e)):this._holidayCollection.setNull(),this._changed()}}),_dp(A,"listing",{get:function(){return this._list.listing}}),_dp(A,"monthListing",{get:function(){return this._list.monthListing}}),_dp(A,"showButtons",{get:function(){return this._showButtons},set:function(e){this._showButtons=e}}),_dp(A,"saveLabel",{get:function(){return this._saveLabel},set:function(e){this._saveLabel}}),_dp(A,"cancelLabel",{get:function(){return this._cancelLabel},set:function(e){this._cancelLabel=e}}),_dp(A,"deleteLabel",{get:function(){return this._deleteLabel},set:function(e){this._deleteLabel=e}}),A.prototype.dropDown=function(){if(!(this.readOnly||this._controller._readOnly||this.listing||this._closing)){var e=p.getDoc(this._container),t=p.getDocWin(e),n=this._grid.editorOptions,r=this._list,i=e.documentElement,e=p.Utils.getClientRect(this._container);return r.viewGridInside=n.viewGridInside,r.yearNavigation=this._yearNavigation,r.dropDownPosition=this._dropDownPosition,r.showToday=this._showToday,r.yearDisplayFormat=this._yearDisplayFormat,r.monthDisplayFormat=this._monthDisplayFormat,r.months=this._months,r.minDate=this._minDate,r.maxDate=this._maxDate,r.showWeeks=this._showWeeks,r.startWeek=this._startWeek||0,r.weekSelectable=this.weekSelectable,r.weekSeparator=this.weekSeparator,r.showButtons=this.showButtons,r.saveLabel=this.saveLabel,r.cancelLabel=this.cancelLabel,r.deleteLabel=this.deleteLabel,r.holidays=(this._holidayCollection.isNull?n:this)._holidayCollection,this._weekDays&&0<this._weekDays.length&&r.setWeekDays(this._weekDays),this.$_setListDate(),this._isMobile?(this._showMarquee(i),r.show(i,0,0,0,null),this._centerPopup(i,r._element)):r.show(i,e.cx+1,e.cy+e.height,this._cellBounds.width,p.Utils.getClientRect(this._editor)),t.addEventListener("mousedown",this._globalMouseHandler),!0}},A.prototype.closeUp=function(e){if(this.listing){var t=p.getDoc(this._container),t=p.getDocWin(t);this._closing=!0;try{t.removeEventListener("mousedown",this._globalMouseHandler),this._closeMarquee(),this._list.hide(),e&&this._list.selected?this._isMobile?(this._started=!0,this.$_selectDate(this._list.date),this._dispatchCommit()):(this.$_selectDate(this._list.date),this._commitOnSelect&&this._dispatchCommit()):this._list.canceled&&this._controller.cancelEditor(!1)}finally{this._closing=!1}return!0}},A.prototype.containsRange=function(e){return(!this._minDate||e>=this._minDate)&&(!this._maxDate||e<=this._maxDate)},A.prototype.initOptions=function(){L.prototype.initOptions.call(this),this._dropDownWhenClick=!1,this._yearNavigation=!1,this._textReadOnly=!1,this._showToday=!0,this._minDate=new Date(1970,0,1),this._maxDate=new Date(2100,11,31),this._showWeeks=!1,this._startWeek=0,this._weekSelectable=!1,this._weekSeparator="",this._commitOnSelect=!1,this._defaultShowDate=c.DefaultShowDate.NORMAL,this._holidayCollection&&this._holidayCollection.setNull(),this._showButtons=!0,this._cancelLabel="Cancel",this._saveLabel="Save",this._deleteLabel="Delete"},A.prototype.setEditIndex=function(e){L.prototype.setEditIndex.call(this,e),e=this._editField().dataType,this._weekSelectable=this._weekSelectable&&e!==c.ValueType.DATE&&e!==c.ValueType.DATETIME},A.prototype.setEditValue=function(e){L.prototype.setEditValue.call(this,e),this.weekSelectable?this._date=s(e):this._date="string"==typeof e?this._dateConverter.getDateNull(e):e},A.prototype.getEditValue=function(e,t){void 0===t&&(t=!1);var n=L.prototype.getEditValue.call(this,e=void 0===e?!0:e),e=this._editField().dataType;return n&&t&&(e==c.ValueType.DATE||e==c.ValueType.DATETIME)&&(n=this._minDate?Math.max(this._minDate.getTime(),n):n,n=(n=this._maxDate?Math.min(this._maxDate.getTime(),n):n)&&new Date(n)),n},A.prototype._createEditor=function(e){return L.prototype._createEditor.call(this,e)},A.prototype._textHandler=function(){this._requestStart(!1)},A.prototype._compositionstartHandler=function(e){this.isDisabled()||this._requestStart(!1)},A.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var t=this._list;if(t.monthListing)return 27==e.keyCode&&(this.closeMonthList(),p.Utils.stopEvent(e,!0),!0);var n=this.listing,r=n&&t.focused;switch(e.keyCode){case 13:if(this.closeUp(!0))return p.Utils.stopEvent(e,!0),!this._sendToParent(e);break;case 27:if(this.closeUp(!1))return p.Utils.stopEvent(e,!0),!0;break;case 36:if(r)return e.preventDefault(),p.Utils.stopEvent(e,!0),!0;break;case 35:if(r)return p.Utils.stopEvent(e,!0),this.$_selectDate(t.lastDay()),!0;break;case 37:if(r)return p.Utils.stopEvent(e,!0),this.$_selectDate(t.incDay(-1)),!0;break;case 39:if(r)return p.Utils.stopEvent(e,!0),this.$_selectDate(t.incDay(1)),!0;break;case 33:if(r)return p.Utils.stopEvent(e,!0),this.$_selectDate(t.incMonth(-1)),!0;break;case 34:if(r)return p.Utils.stopEvent(e,!0),this.$_selectDate(t.incMonth(1)),!0;break;case 40:if(e.altKey&&!n)return this._requestStart(),p.Utils.stopEvent(e,!0),!0;if(n)return p.Utils.stopEvent(e,!0),r?this.$_selectDate(t.incDay(7)):(this._list.focused=!0,this.$_setListDate()),!0;break;case 38:if(e.altKey&&n)return this.closeUp(!1),p.Utils.stopEvent(e,!0),!0;if(n)return p.Utils.stopEvent(e,!0),!r||t.date.getDate()<=7?this._list.focused=!1:this.$_selectDate(t.incDay(-7)),!0;break;case 84:(e.altKey||e.altKey&&e.ctrlKey)&&n&&(p.Utils.stopEvent(e,!0),this._list.date=new Date,this.$_selectDate(this._list.date))}return L.prototype._keyDownHandler.call(this,e)}},A.prototype._keyPressHandler=function(e){if(!this.isDisabled()){var t=this._list,n=e.keyCode||e.which,r=String.fromCharCode(n);if(r.toLocaleLowerCase()==this.todayChar){if(p.Utils.stopEvent(e,!0),this.listing)return t.focused=!0,this.$_selectDate(t.today),!0}else{if(p.Utils.isFirefox&&(e.ctrlKey||0===n))return void L.prototype._keyPressHandler.call(this,e);if(p.Utils.isMac&&e.metaKey&&p.Utils.included(n,99,118))return void L.prototype._keyPressHandler.call(this,e);if(!this._regx.test(r))return void e.preventDefault()}L.prototype._keyPressHandler.call(this,e),e.keyCode&&this.textReadOnly&&e.preventDefault()}},A.prototype.$_resetValue=function(e){var t,n,r,s;void 0===e&&(e=!1),(this.visible||e)&&(n=(t=this._editor).selectionStart,r=t.selectionEnd,s=t.value?t.value.length:0,t.value=t.value.replace(i,""),e=t.value?t.value.length:0,this._isMobile||(e==s?t.setSelectionRange(n,r):t.setSelectionRange(r,r)))},A.prototype._dispatchChange=function(){this._isMobile?(this.$_resetValue(!0),L.prototype._dispatchChange.call(this)):this.visible&&(this.$_resetValue(),L.prototype._dispatchChange.call(this))},A.prototype._changeHandler=function(e){L.prototype._changeHandler.call(this,e)},A.prototype._pasteHandler=function(e){L.prototype._pasteHandler.call(this,e)},A.prototype._copyHandler=function(e){L.prototype._copyHandler.call(this,e)},A.prototype._requestStart=function(e){return!!L.prototype._requestStart.call(this)&&(this._isMobile?e&&this.dropDown():!1!==e&&this.dropDown(),!0)},A.prototype.setBounds=function(e,t,n,r,i){L.prototype.setBounds.call(this,e,t,n,r,i)},A.prototype._doChanged=function(){this._isMobile?!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()):(this._started||this._requestStart(),this._started&&!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()))},A.prototype.dropDownList=function(e){this.dropDown()},A.prototype.closeList=function(e){this.closeUp(e)},A.prototype.closeMonthList=function(){this._list.closeMonth()},A.prototype.buttonClicked=function(e){this.listing?this.closeUp(!1):this.dropDown()},A.prototype._getInputSelector=function(){return A.INPUT_CSS},A.prototype._isDateEditor=function(){var e=this._editField().dataType;return e==c.ValueType.DATE||e==c.ValueType.DATETIME||!this.weekSelectable},A.prototype.$_selectDate=function(e){var t;e?(this._date=e,this.containsRange(e)&&(t=void 0,t=this.weekSelectable?n(e,this._startWeek,!!this.weekSeparator):this._dateConverter.getText(this._date),this._mask&&(t=this._mask.writeBuffer(t)),this._editor.value=t,this._isEmptyTextValue=!1,this._doChanged())):(this._date=null,this._mask&&this._mask.clearBuffer(),this._editor.value="",this._doChanged())},A.prototype.$_setListDate=function(){var e,t=this._defaultDate instanceof Date?new Date(this._defaultDate):this._dateConverter.getDateNull(this._defaultDate),n=this.isEmptyTextValue()?"":this._editor.value;switch(this._mask&&(n=this._mask.getStripValue()),e=this.weekSelectable?s(n):this._dateConverter.getDateNull(n),this._defaultShowDate){case c.DefaultShowDate.TODAY:e=new Date;break;case c.DefaultShowDate.NORMAL:break;case c.DefaultShowDate.TODAY_WHEN_NULL:e=e||new Date;break;case c.DefaultShowDate.DEFAULT_WHEN_NULL:e=e||t;break;case c.DefaultShowDate.DEFAULT:e=t}e&&(this._list.date=e)},A.prototype.onDatePickerCloseUp=function(e,t){this.closeUp(t),this._isMobile||this.setFocus()},A.INPUT_CSS="rg-date-editor",A);t.DateCellEditor=o;var O,M=(O=x.EventAware,l.__extends(D,O),D.prototype._doDispose=function(){this._jquery=null,this._editor=null,this._container=null,this._containerElement=null,O.prototype._doDispose.call(this)},_dp(D,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(e){this._dropDownPosition=e}}),_dp(D,"date",{get:function(){return this._date},set:function(e){(this._date=e).getTime()!==this._date.getTime()&&(this._currDate=new Date(e),this._date=new Date(e),this.listing&&(e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),this._jquery&&this._jquery(this._element).datepicker("update",e)))}}),_dp(D,"minDate",{get:function(){return this._minDate},set:function(e){this._minDate=e}}),_dp(D,"maxDate",{get:function(){return this._maxDate},set:function(e){this._maxDate=e}}),_dp(D,"viewGridInside",{get:function(){return this._viewGridInside},set:function(e){this._viewGridInside=e}}),_dp(D,"listing",{get:function(){return this._jquery&&this._jquery(this._element).data("datepicker")}}),_dp(D,"selected",{get:function(){return this._selected}}),_dp(D,"focused",{get:function(){return this._focused},set:function(e){e!=this._focused&&(this._focused=e,this._element.style.border=e?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=e?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px")}}),D.prototype.$_destroy=function(){this._jquery&&this._jquery(this._element).datepicker("destroy")},D.prototype.keydown=function(e){this._jquery&&(this._jquery(this._element).datepicker("keydown",e),(e=this._jquery(this._element).data("datepicker").viewDate)instanceof Date&&(this.date=e,this._editor&&this._editor.selectDate(this._date)))},D.prototype.$_createList=function(e){var t=e.createElement("div"),e=t.style;return e.position="absolute",e.cssFloat="none",e.clear="both",e.boxSizing="border-box",e.zIndex=String(this._editor._baseZindex+2),e.margin="0px",e.overflow="auto",t.className="rg-calendar",t},D.prototype.show=function(e,t,n,r,i){if(this._containerElement=p.Utils.isMobile()&&this._viewGridInside?this._container._container:e,!this.$_createCalendar())return alert("BootStrap DatePicker Not Include"),!1;this.$_show(t,n,r,i)},D.prototype.$_createCalendar=function(){var e,t=this._element,n=this._btOptions;return this._date&&(e=new Date(this._date.getFullYear(),this._date.getMonth(),this._date.getDate())),!!this._jquery&&(this._jquery(t).datepicker&&this._jquery(t).datepicker(n).datepicker("setDate",e).on("changeDate",function(e){e=e.date,e&&!this._editor.containsRange(e)||(this._date=e?new Date(e):void 0,this._selected=!0,this.fireEvent(C.CLOSE_UP,!0))}.bind(this)),!0)},D.prototype.$_show=function(e,t,n,r){var i=this._container.doc,s=p.getDocWin(i);this.focused=!1,this._selected=!1,this._containerElement.appendChild(this._element);var o=this._date;this._currDate=o?new Date(o):new Date;var u=p.Utils.getBrowserSize(),a=p.Utils.getClientRect(this._containerElement),f=p.Utils.getClientRect(this._container._container),l=u.width,c=u.height,o=p.Utils.getClientRect(this._element),u=s.pageXOffset||i.documentElement.scrollLeft,s=s.pageYOffset||i.documentElement.scrollTop;i.documentElement.scrollWidth>i.documentElement.clientWidth&&(c-=18),i.documentElement.scrollHeight>i.documentElement.clientHeight&&(l-=18),e+=f.left-a.left,t+=f.top-a.top,(p.Utils.ieTen||p.Utils.ieOld||p.Utils.ieLeg)&&(e+=i.documentElement.scrollLeft,t+=i.documentElement.scrollTop),t+o.height>c+s&&r&&(t=t-r.height-o.height)<0&&(t=c-o.height-2),this._dropDownPosition!=Nn.DropDownPosition.EDITOR?e=Math.max(0,e+n-o.width):e+o.width>l+u&&(e=l-o.width),!p.Utils.isMobile()&&this._viewGridInside&&r&&(t=r.bottom-a.top+2,(a.bottom<r.bottom+o.height||c+s<r.bottom+o.height)&&(t=r.top-o.height-a.top-2)),p.Utils.isMobile()||this._element.offsetParent||(e+=i.documentElement.offsetLeft,t+=i.documentElement.offsetTop),p.Utils.move(this._element,Math.max(0,e),Math.max(0,t))},D.prototype.today=function(){return this.date=new Date},D.prototype.incDay=function(e){var t;return this._date.getMonth()==this._currDate.getMonth()?(t=new Date(this._date),this._date&&t.setDate(this._date.getDate()+e)):(t=this._currDate,t=new Date(t.getFullYear(),t.getMonth(),1)),this.date=t},D.prototype.incMonth=function(e){var t;return this._date.getMonth()==this._currDate.getMonth()?(t=new Date(this._date),this._date&&p.Utils.incMonth(t,e)):(t=this._currDate,t=new Date(t.getFullYear(),t.getMonth(),1)),this.date=t},D.prototype.firstDay=function(){var e=new Date(this._currDate);return this._date&&e.setDate(1),this.date=e},D.prototype.lastDay=function(){var e,t,n=new Date(this._currDate);return this._date&&(e=n.getFullYear(),t=n.getMonth(),t=p.Utils.month_days[p.Utils.isLeapYear(e)?1:0][t],n.setDate(t)),this.date=n},D),P,o=(P=an.PopupCellEditor,l.__extends(H,P),H.prototype._doDispose=function(){this._globalMouseHandler=null,P.prototype._doDispose.call(this)},_dp(H,"list",{get:function(){return this._list},set:function(e){this._list=e}}),_dp(H,"btOptions",{get:function(){return this._btOptions},set:function(e){this._btOptions=e}}),_dp(H,"editFormat",{get:function(){return this.datetimeFormat},set:function(e){this.datetimeFormat=e}}),_dp(H,"minDate",{get:function(){return this._minDate},set:function(e){this._minDate=e?e instanceof Date?e:"string"==typeof e?this._dateConverter.getDateNull(e):null:null,this._minDate&&this._minDate.setHours(0,0,0,0)}}),_dp(H,"maxDate",{get:function(){return this._maxDate},set:function(e){this._maxDate=e?e instanceof Date?e:"string"==typeof e?this._dateConverter.getDateNull(e):null:null,this._maxDate&&this._maxDate.setHours(23,59,59)}}),_dp(H,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(e){this._dropDownPosition=e}}),_dp(H,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(e){this._dropDownWhenClick=e}}),_dp(H,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(e){this._commitOnSelect=e}}),H.prototype.dropDown=function(){if(this.readOnly||this._controller._readOnly||this.listing||this._closing)return!1;var e=p.getDoc(this._container),t=p.getDocWin(e),n=this._grid,r=this._list=new M(n.container,this,this._btOptions),i=e.documentElement,n=p.Utils.getBounds(this._container);return r.addListener(this),r.viewGridInside=this._options&&this._options.viewGridInside,r.dropDownPosition=this._dropDownPosition,r.minDate=this._minDate,r.maxDate=this._maxDate,this.$_setListDate(),this._isMobile?(this._showMarquee(i),r.show(i,0,0,0,null),this._centerPopup(i,r._element)):r.show(e.documentElement,n.x+1,n.y+n.height,this._cellBounds.width,p.Utils.getClientRect(this._editor)),t.addEventListener("mousedown",this._globalMouseHandler),!0},H.prototype.closeUp=function(e){if(this.listing){var t=p.getDoc(this._container),t=p.getDocWin(t);this._closing=!0;try{t.removeEventListener("mousedown",this._globalMouseHandler),this._closeMarquee(),e&&this._list.selected&&(this._isMobile?(this._started=!0,this.$_selectDate(this._list.date),this._dispatchCommit()):(this.$_selectDate(this._list.date),this._commitOnSelect&&this._dispatchCommit()))}finally{this.$_listDestroy(),this._closing=!1}return!0}return!1},H.prototype.buttonClicked=function(e){this.listing?this.closeUp(!1):this.dropDown()},H.prototype.dropDownList=function(){this.dropDown()},H.prototype.closeList=function(e){this.closeUp(e)},H.prototype.$_setListDate=function(){var e=this._editor.value;e&&this._mask&&(e=this._mask.getStripValue()),e=this._dateConverter.getDateNull(e),e&&(this._list.date=e)},H.prototype.selectDate=function(e){this.$_selectDate(e)},H.prototype.$_selectDate=function(e){var t;e&&e!=this._date?(this._date=e,this.containsRange(e)&&(t=this._dateConverter.getText(this._date),this._mask&&(t=this._mask.writeBuffer(t)),this._editor.value=t,this._isEmptyTextValue=!1,this._doChanged())):void 0===e&&(this._editor.value=this._mask?(this._mask.clearBuffer(),this._mask.writeBuffer(null)):"",this._isEmptyTextValue=!1,this._doChanged())},H.prototype.containsRange=function(e){return(!this._minDate||e>=this._minDate)&&(!this._maxDate||e<=this._maxDate)},_dp(H,"listing",{get:function(){return!!this._list&&this._list.listing}}),H.prototype.initOptions=function(){P.prototype.initOptions.call(this),this._dropDownWhenClick=!1,this._textReadOnly=!1,this._viewGridInside=!1,this._minDate=new Date(1970,0,1),this._maxDate=new Date(2100,11,31),this._commitOnSelect=!1},H.prototype._isDateEditor=function(){return!0},H.prototype.setEditValue=function(e){P.prototype.setEditValue.call(this,e),this._date="string"==typeof e?this._dateConverter.getDateNull(e):e},H.prototype.getEditValue=function(e,t){var n=P.prototype.getEditValue.call(this,e),e=this._editField().dataType;return n&&t&&(e==c.ValueType.DATE||e==c.ValueType.DATETIME)&&(n=n.getTime(),n=this._minDate?Math.max(this._minDate.getTime(),n):n,n=(n=this._maxDate?Math.min(this._maxDate.getTime(),n):n)&&new Date(n)),n},H.prototype._requestStart=function(e){return!!P.prototype._requestStart.call(this,e)&&(this._isMobile?e&&this.dropDown():!1!==e&&this.dropDown(),!0)},H.prototype._textHandler=function(){this._requestStart()},H.prototype._compositionstartHandler=function(){this._requestStart()},H.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var t=this._list,n=this.listing,r=n&&t.focused;switch(e.keyCode){case 13:if(this.closeUp(!0))return p.Utils.stopEvent(e,!0),!this._sendToParent(e);break;case 27:if(this.closeUp(!1))return p.Utils.stopEvent(e,!0),!0;break;case 36:if(r)return p.Utils.stopEvent(e,!0),this.$_selectDate(t.firstDay()),!0;break;case 35:if(r)return p.Utils.stopEvent(e,!0),this.$_selectDate(t.lastDay()),!0;break;case 37:case 39:if(r)return p.Utils.stopEvent(e,!0),t&&t.keydown(e),!0;break;case 33:if(r)return p.Utils.stopEvent(e,!0),this.$_selectDate(t.incMonth(-1)),!0;break;case 34:if(r)return p.Utils.stopEvent(e,!0),this.$_selectDate(t.incMonth(1)),!0;break;case 40:if(e.altKey&&!n)return this._requestStart(),p.Utils.stopEvent(e,!0),!0;if(n)return p.Utils.stopEvent(e,!0),r?t.keydown(e):(t.focused=!0,this.$_setListDate()),!0;break;case 38:if(e.altKey&&n)return this.closeUp(!1),p.Utils.stopEvent(e,!0),!0;if(n)return p.Utils.stopEvent(e,!0),!r||t.date.getDate()<=7?t.focused=!1:t.keydown(e),!0;break;case 84:(e.altKey||e.altKey&&e.ctrlKey)&&n&&(p.Utils.stopEvent(e,!0),t.date=new Date,this.$_selectDate(t.date))}return P.prototype._keyDownHandler.call(this,e)}},H.prototype._keyPressHandler=function(e){if(!this.isDisabled()){var t=this._list,n=String.fromCharCode(e.keyCode||e.charCode);if(n.toLocaleLowerCase()==this.todayChar){if(p.Utils.stopEvent(e,!0),this.listing)return t.focused=!0,this.$_selectDate(t.today()),!0}else{if(p.Utils.isFirefox&&(e.ctrlKey||0===e.charCode))return P.prototype._keyPressHandler.call(this,e);if(!this._regx.test(n))return void e.preventDefault()}P.prototype._keyPressHandler.call(this,e),e.keyCode&&this.textReadOnly&&e.preventDefault()}},H.prototype.$_resetValue=function(e){var t,n,r,s;void 0===e&&(e=!1),(this.visible||e)&&(n=(t=this._editor).selectionStart,r=t.selectionEnd,s=t.value?t.value.length:0,t.value=t.value.replace(i,""),e=t.value?t.value.length:0,this._isMobile||(e==s?t.setSelectionRange(n,r):t.setSelectionRange(r,r)))},H.prototype.setBounds=function(e,t,n,r,i){P.prototype.setBounds.call(this,e,t,n,r,i)},H.prototype._doChanged=function(){this._isMobile?!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()):(this._started&&this._requestStart(),this._started&&!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()))},H.prototype._dispatchChange=function(){this._isMobile?(this.$_resetValue(!0),P.prototype._dispatchChange.call(this)):this.visible&&(this.$_resetValue(),P.prototype._dispatchChange.call(this))},H.prototype.onDatePickerCloseUp=function(e,t){this.closeUp(t),this._isMobile||this.setFocus()},H.prototype._getInputSelector=function(){return H.INPUT_CSS},H.prototype.$_listDestroy=function(){var e=this._list&&this._list._element.parentElement;this._list&&(this._list.$_destroy(),e.removeChild(this._list._element),this._list.dispose(),delete this._list)},H.INPUT_CSS="rg-btdate-editor",H);t.BTDateCellEditor=o;var B,o=(B=an.TextCellEditor,l.__extends(j,B),_dp(j,"minDate",{get:function(){return this._minDate},set:function(e){e!=this._minDate&&(this._minDate=e?e instanceof Date?e:"string"==typeof e?this._dateConverter.getDateNull(e):null:null,this._minDate&&this._minDate.setHours(0,0,0,0),this._changed())}}),_dp(j,"maxDate",{get:function(){return this._maxDate},set:function(e){e!=this._maxDate&&(this._maxDate=e?e instanceof Date?e:"string"==typeof e?this._dateConverter.getDateNull(e):null:null,this._maxDate&&this._maxDate.setHours(23,59,59),this._changed())}}),_dp(j,"hasList",{get:function(){return!0}}),_dp(j,"native",{get:function(){return!0}}),j.prototype._createEditor=function(e){return e=B.prototype._createEditor.call(this,e),e.setAttribute("type","date"),e.tabIndex=this._isMobile?-1:0,e},j.prototype._getInputSelector=function(){return j.INPUT_CSS},j.prototype.initOptions=function(){B.prototype.initOptions.call(this)},j.prototype.hasButton=function(e){return null==e||e},j.prototype.setVisible=function(e,t){B.prototype.setVisible.call(this,e,t=void 0===t?!1:t),this.visible&&this._editor.click()},j.prototype.setEditIndex=function(e){B.prototype.setEditIndex.call(this,e),e=this._editor,e.min=this._minDate?this.$_toInputDate(this._minDate):"",e.max=this._maxDate?this.$_toInputDate(this._maxDate):""},j.prototype.setEditValue=function(e){this._date="string"==typeof e?this._dateConverter.getDateNull(e):e,this._editor.value=this.$_toInputDate(this._date),this._isEmptyTextValue=!1},j.prototype._keyDownHandler=function(e){if(!this.isDisabled())return 40===e.keyCode&&e.altKey?(this._requestStart(),!0):B.prototype._keyDownHandler.call(this,e)},j.prototype.setBounds=function(e,t,n,r,i){B.prototype.setBounds.call(this,e,t,n,r,0),this._editor&&p.Utils.isiOS&&(this._editor.style.minWidth=n+"px",this._editor.style.width=n+"px")},j.prototype.$_toInputDate=function(e){return e?j.Formatter.getText(e):""},j.INPUT_CSS="rg-ndate-editor",j.Formatter=new _.DateTimeConverter("yyyy-MM-dd"),j);t.NativeDateCellEditor=o});t(Cn),Cn.Holiday,Cn.HolidayCollection,Cn.DateCellEditor,Cn.BTDateCellEditor,Cn.NativeDateCellEditor;var kn=n(function(e,t){function i(e){return e=n.call(this,e)||this,e._readOnly=!1,e._editable=!p.Utils.isMobile(),e._checkable=!0,e._updatable=!0,e._appendable=!1,e._insertable=!1,e._deletable=!1,e._revertable=!1,e._erasable=!1,e._movable=!1,e._commitByCell=!1,e._editWhenFocused=!1,e._commitWhenNoEdit=!1,e._commitWhenExitLast=!1,e._commitWhenLeave=!1,e._crossWhenExitLast=!1,e._validateOnEdited=!0,e._validateOnExit=!1,e._hintOnError=!0,e._deleteRowsMessage=window.RG_CONST&&window.RG_CONST.DELETEROWSMESSAGE?window.RG_CONST.DELETEROWSMESSAGE:"\uc120\ud0dd\ub41c \ud589(\ub4e4)\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c??",e._invalidFormatMessage=window.RG_CONST&&window.RG_CONST.INVALIDFORMATMESSAGE?window.RG_CONST.INVALIDFORMATMESSAGE:"\uc798\ubabb\ub41c \uc785\ub825 \uc720\ud615\uc785\ub2c8\ub2e4.",e._showInvalidFormatMessage=!0,e._confirmWhenDelete=!0,e._editWhenClickFocused=!1,e._commitLevel=c.ValidationLevel.IGNORE,e._useTabKey=!0,e._useArrowKeys=!0,e._skipReadOnly=!1,e._skipReadOnlyCell=!1,e._verticalMoveStep=It.VerticalMoveStep.CELL,e._enterToTab=!1,e._enterToNextRow=!1,e._enterToEdit=!1,e._maxLengthToNextCell=!1,e._forceInsert=!1,e._forceAppend=!1,e._checkDiff=!1,e._checkCellDiff=!1,e._strictDiff=!1,e._deletableWhenEdit=!0,e._showCommitError=!1,e._firstCellWhenInsert=!1,e._appendWhenInsertKey=!1,e._appendWhenExitLast=!1,e._showOnlyValidationMessage=!0,e._displayEmptyEditRow=!1,e._buttonClickWhenSpace=!1,e._exitGridWhenTab=c.ExitGridWhenTab.NONE,e._cancelWhenLastUndo=!1,e._exceptDataClickWhenButton=!1,e._removeValidateOnCommit=!1,e._validateOnlyEditColumn=!1,e._columnEditableFirst=!1,e}function u(){return s.call(this)||this}function f(e){return e=a.call(this,e)||this,e._yearDisplayFormat=window.RG_CONST&&window.RG_CONST.YEARDISPLAYFORMAT?window.RG_CONST.YEARDISPLAYFORMAT:"{Y}\ub144",e._monthDisplayFormat=window.RG_CONST&&window.RG_CONST.MONTHDISPLAYFORMAT?window.RG_CONST.MONTHDISPLAYFORMAT:"{M}\uc6d4",e._months=null,e._weekDays=null,e._viewGridInside=!1,e._holidays=null,e._titleExprRuntime=new o,e}function d(e){return e=h.call(this,e)||this,e._enabled=!0,e}function y(e){return e=m.call(this,e)||this,e._enabled=!0,e._startEdit=!0,e._commitEdit=!0,e._enableAppend=!0,e._numberCharsOfCols={},e._numberSeparatorOfCols={},e._stopOnError=!0,e._throwValidationError=!0,e}function E(e){return e=w.call(this,e)||this,e._longTapDuration=500,e._doubleTapInterval=300,e._tapThreshold=4,e._showEditCommander=!0,e._showTooltip=!1,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Kt.GridBaseOptions,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(i,"readOnly",{get:function(){return this._readOnly},set:function(e){e!=this._readOnly&&(this._readOnly=e,this._refreshOwner(),this._invalidateEditor())}}),_dp(i,"editable",{get:function(){return this._editable},set:function(e){e!=this._editable&&(this._editable=e,this._refreshOwner(),this._invalidateEditor())}}),_dp(i,"columnEditableFirst",{get:function(){return this._columnEditableFirst},set:function(e){e!=this._columnEditableFirst&&(this._columnEditableFirst=e,this._refreshOwner(),this._invalidateEditor())}}),_dp(i,"checkable",{get:function(){return this._checkable},set:function(e){e!=this._checkable&&(this._checkable=e,this._changed())}}),_dp(i,"updatable",{get:function(){return this._updatable},set:function(e){e!=this._updatable&&(this._updatable=e,this._changed())}}),_dp(i,"appendable",{get:function(){return this._appendable},set:function(e){e!=this._appendable&&(this._appendable=e,this.displayEmptyEditRow=this._displayEmptyEditRow,this._changed())}}),_dp(i,"insertable",{get:function(){return this._insertable},set:function(e){e!=this._insertable&&(this._insertable=e,this._changed())}}),_dp(i,"deletable",{get:function(){return this._deletable},set:function(e){e!=this._deletable&&(this._deletable=e,this._changed())}}),_dp(i,"revertable",{get:function(){return this._revertable},set:function(e){e!=this._revertable&&(this._revertable=e,this._changed())}}),_dp(i,"erasable",{get:function(){return this._erasable},set:function(e){e!=this._erasable&&(this._erasable=e,this._changed())}}),_dp(i,"movable",{get:function(){return this._movable},set:function(e){e!=this._movable&&(this._movable=e,this._changed())}}),_dp(i,"commitByCell",{get:function(){return this._commitByCell},set:function(e){e!=this._commitByCell&&(this._commitByCell=e,this._changed())}}),_dp(i,"editWhenFocused",{get:function(){return this._editWhenFocused},set:function(e){this._editWhenFocused=e}}),_dp(i,"commitWhenNoEdit",{get:function(){return this._commitWhenNoEdit},set:function(e){this._commitWhenNoEdit=e}}),_dp(i,"commitWhenExitLast",{get:function(){return this._commitWhenExitLast},set:function(e){this._commitWhenExitLast=e}}),_dp(i,"commitWhenLeave",{get:function(){return this._commitWhenLeave},set:function(e){this._commitWhenLeave=e}}),_dp(i,"crossWhenExitLast",{get:function(){return this._crossWhenExitLast},set:function(e){this._crossWhenExitLast=e}}),_dp(i,"validateOnEdited",{get:function(){return this._validateOnEdited},set:function(e){this._validateOnEdited=e}}),_dp(i,"validateOnExit",{get:function(){return this._validateOnExit},set:function(e){this._validateOnExit=e}}),_dp(i,"hintOnError",{get:function(){return this._hintOnError},set:function(e){this._hintOnError=e}}),_dp(i,"removeValidateOnCommit",{get:function(){return this._removeValidateOnCommit},set:function(e){this._removeValidateOnCommit=e}}),_dp(i,"validateOnlyEditColumn",{get:function(){return this._validateOnlyEditColumn},set:function(e){this._validateOnlyEditColumn=e}}),_dp(i,"deleteRowsMessage",{get:function(){return this._deleteRowsMessage},set:function(e){this._deleteRowsMessage=e}}),_dp(i,"invalidFormatMessage",{get:function(){return this._invalidFormatMessage},set:function(e){this._invalidFormatMessage=e}}),_dp(i,"showInvalidFormatMessage",{get:function(){return this._showInvalidFormatMessage},set:function(e){this._showInvalidFormatMessage=e}}),_dp(i,"confirmWhenDelete",{get:function(){return this._confirmWhenDelete},set:function(e){this._confirmWhenDelete=e}}),_dp(i,"editWhenClickFocused",{get:function(){return this._editWhenClickFocused},set:function(e){this._editWhenClickFocused=e}}),_dp(i,"commitLevel",{get:function(){return this._commitLevel},set:function(e){this._commitLevel=e}}),_dp(i,"useTabKey",{get:function(){return this._useTabKey},set:function(e){this._useTabKey=e}}),_dp(i,"useArrowKeys",{get:function(){return this._useArrowKeys},set:function(e){this._useArrowKeys=e}}),_dp(i,"skipReadOnly",{get:function(){return this._skipReadOnly},set:function(e){this._skipReadOnly=e}}),_dp(i,"skipReadOnlyCell",{get:function(){return this._skipReadOnlyCell},set:function(e){this._skipReadOnlyCell=e}}),_dp(i,"verticalMoveStep",{get:function(){return this._verticalMoveStep},set:function(e){this._verticalMoveStep=e}}),_dp(i,"enterToTab",{get:function(){return this._enterToTab},set:function(e){this._enterToTab=e}}),_dp(i,"enterToNextRow",{get:function(){return this._enterToNextRow},set:function(e){this._enterToNextRow=e}}),_dp(i,"enterToEdit",{get:function(){return this._enterToEdit},set:function(e){this._enterToEdit=e}}),_dp(i,"maxLengthToNextCell",{get:function(){return this._maxLengthToNextCell},set:function(e){this._maxLengthToNextCell=e}}),_dp(i,"forceInsert",{get:function(){return this._forceInsert},set:function(e){this._forceInsert=e}}),_dp(i,"forceAppend",{get:function(){return this._forceAppend},set:function(e){this._forceAppend=e}}),_dp(i,"checkDiff",{get:function(){return this._checkDiff},set:function(e){this._checkDiff=e}}),_dp(i,"checkCellDiff",{get:function(){return this._checkCellDiff},set:function(e){this._checkCellDiff=e}}),_dp(i,"strictDiff",{get:function(){return this._strictDiff},set:function(e){this._strictDiff=e}}),_dp(i,"deletableWhenEdit",{get:function(){return this._deletableWhenEdit},set:function(e){this._deletableWhenEdit=e}}),_dp(i,"showCommitError",{get:function(){return this._showCommitError},set:function(e){this._showCommitError=e}}),_dp(i,"firstCellWhenInsert",{get:function(){return this._firstCellWhenInsert},set:function(e){this._firstCellWhenInsert=e}}),_dp(i,"appendWhenInsertKey",{get:function(){return this._appendWhenInsertKey},set:function(e){this._appendWhenInsertKey=e}}),_dp(i,"appendWhenExitLast",{get:function(){return this._appendWhenExitLast},set:function(e){this._appendWhenExitLast=e}}),_dp(i,"showOnlyValidationMessage",{get:function(){return this._showOnlyValidationMessage},set:function(e){this._showOnlyValidationMessage=e}}),_dp(i,"displayEmptyEditRow",{get:function(){return this._displayEmptyEditRow},set:function(e){var t=this.grid;this._displayEmptyEditRow=e,this._displayEmptyEditRow&&this._appendable?t.itemSource.appendDummy():t.itemSource.cancelDummy(),this._refreshOwner()}}),_dp(i,"buttonClickWhenSpace",{get:function(){return this._buttonClickWhenSpace},set:function(e){this._buttonClickWhenSpace=e}}),_dp(i,"exitGridWhenTab",{get:function(){return this._exitGridWhenTab},set:function(e){this._exitGridWhenTab=e}}),_dp(i,"cancelWhenLastUndo",{get:function(){return this._cancelWhenLastUndo},set:function(e){this._cancelWhenLastUndo=e}}),_dp(i,"exceptDataClickWhenButton",{get:function(){return this._exceptDataClickWhenButton},set:function(e){this._exceptDataClickWhenButton=e}}),i.prototype.isWritable=function(){return this._editable&&!this._readOnly},i.prototype.canUpdate=function(e){return!this._readOnly&&(e||this._updatable)},i.prototype.canInsert=function(){return!this._readOnly&&this._insertable},i.prototype.canAppend=function(){return!this._readOnly&&this._appendable},i.prototype.canDelete=function(){return!this._readOnly&&this._deletable},i);t.EditOptions=r;var s,o=(s=b.ExpressionRuntime,l.__extends(u,s),u.prototype._doDispose=function(){this._cell=null,s.prototype._doDispose.call(this)},_dp(u,"value",{set:function(e){this._value=e}}),_dp(u,"cell",{set:function(e){this._cell=e}}),u.prototype.isIdentifier=function(e){return e=e.toLowerCase(),u.IDENTS.hasOwnProperty(e)?u.IDENTS[e]:s.prototype.isIdentifier.call(this,e)},u.prototype.evaluateIdentifier=function(e){switch(e){case u.ID_VALUE:return this._value;case u.ID_ROW:return this._cell.itemIndex+1;case u.ID_COLUMN_HEADER:var t=this._cell&&this._cell.column;return t&&t.header&&t.header.text?t.header.text:t.displayText}throw new b.ExpressionEvaluationError("Invalid identifier key: "+e)},u.IDENTS={value:u.ID_VALUE=0,row:u.ID_ROW=1,dcount:u.ID_COLUMN_HEADER=2},u);t.EditorTitleExpressionRuntime=o;var a,r=(a=Kt.GridBaseOptions,l.__extends(f,a),f.prototype._doDispose=function(){a.prototype._doDispose.call(this)},_dp(f,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(e){e!=this._yearDisplayFormat&&(this._yearDisplayFormat=e,this._changed())}}),_dp(f,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(e){e!=this._monthDisplayFormat&&(this._monthDisplayFormat=e,this._changed())}}),_dp(f,"months",{get:function(){return this._months},set:function(e){e!=this._months&&(this._months=e,this._changed())}}),_dp(f,"weekDays",{get:function(){return this._weekDays},set:function(e){e!=this._weekDays&&(this._weekDays=e,this._changed())}}),_dp(f,"viewGridInside",{get:function(){return this._viewGridInside},set:function(e){e!=this._viewGridInside&&(this._viewGridInside=e,this._changed())}}),_dp(f,"titleStatement",{get:function(){return this._titleStatement},set:function(e){e!=this._titleStatement&&((this._titleStatement=e)?this._titleExprStatement?this._titleExprStatement.source=e:this._titleExprStatement=new gt.ExpressionStatement(e):this._titleExprStatement=null,this._changed())}}),_dp(f,"holidays",{get:function(){return this._holidays},set:function(e){e!=this._holidays&&((this._holidays=e)?(this._holidayCollection=this._holidayCollection||new Cn.HolidayCollection,this._holidayCollection.load(e)):this._holidayCollection&&this._holidayCollection.clear(),this._changed())}}),f);t.EditorOptions=r;var h,r=(h=Kt.GridBaseOptions,l.__extends(d,h),d.prototype._doDispose=function(){h.prototype._doDispose.call(this)},_dp(d,"enabled",{get:function(){return this._enabled},set:function(e){e!=this._enabled&&(this._enabled=e)}}),_dp(d,"singleMode",{get:function(){return this._singleMode},set:function(e){e!=this._singleMode&&(this._singleMode=e)}}),_dp(d,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(e){e!=this._datetimeFormat&&(this._datetimeFormat=e)}}),_dp(d,"booleanFormat",{get:function(){return this._booleanFormat},set:function(e){e!=this._booleanFormat&&(this._booleanFormat=e)}}),_dp(d,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(e){e!=this._lookupDisplay&&(this._lookupDisplay=e)}}),_dp(d,"copyDisplayText",{get:function(){return this._copyDisplayText},set:function(e){this._copyDisplayText=e}}),_dp(d,"includeHeaderText",{get:function(){return this._includeHeaderText},set:function(e){this._includeHeaderText=e}}),_dp(d,"copyTextCallback",{get:function(){return this._copyTextCallback},set:function(e){this._copyTextCallback=e}}),d);t.CopyOptions=r;var m,r=(m=Kt.GridBaseOptions,l.__extends(y,m),y.prototype._doDispose=function(){m.prototype._doDispose.call(this)},_dp(y,"enabled",{get:function(){return this._enabled},set:function(e){e!=this._enabled&&(this._enabled=e,this._changed())}}),_dp(y,"singleMode",{get:function(){return this._singleMode},set:function(e){e!=this._singleMode&&(this._singleMode=e,this._changed())}}),_dp(y,"startEdit",{get:function(){return this._startEdit},set:function(e){e!=this._startEdit&&(this._startEdit=e,this._changed())}}),_dp(y,"commitEdit",{get:function(){return this._commitEdit},set:function(e){e!=this._commitEdit&&(this._commitEdit=e,this._changed())}}),_dp(y,"enableAppend",{get:function(){return this._enableAppend},set:function(e){e!=this._enableAppend&&(this._enableAppend=e,this._changed())}}),_dp(y,"fillFieldDefaults",{get:function(){return this._fillFieldDefaults},set:function(e){e!=this._fillFieldDefaults&&(this._fillFieldDefaults=e,this._changed())}}),_dp(y,"fillColumnDefaults",{get:function(){return this._fillColumnDefaults},set:function(e){e!=this._fillColumnDefaults&&(this._fillColumnDefaults=e,this._changed())}}),_dp(y,"forceRowValidation",{get:function(){return this._forceRowValidation},set:function(e){e!=this._forceRowValidation&&(this._forceRowValidation=e,this._changed())}}),_dp(y,"forceColumnValidation",{get:function(){return this._forceColumnValidation},set:function(e){e!=this._forceColumnValidation&&(this._forceColumnValidation=e,this._changed())}}),_dp(y,"datetimeFormats",{get:function(){return this._datetimeFormats},set:function(e){if(e!==this._datetimeFormats)if(this._datetimeFormats=e&&e.concat(),e){this._dateReaders=[];for(var t=0;t<this._datetimeFormats.length;t++)this._dateReaders.push(new g.DateTimeReader(this._datetimeFormats[t]))}else this._dateReaders=null}}),_dp(y,"dateReaders",{get:function(){return this._dateReaders}}),_dp(y,"booleanFormat",{get:function(){return this._booleanFormat},set:function(e){e!=this._booleanFormat&&(this._booleanFormat=e,this._boolReader=e&&new v.BooleanConverter(e))}}),_dp(y,"boolReader",{get:function(){return this._boolReader}}),_dp(y,"numberChars",{get:function(){return this._numberChars},set:function(e){if(e!==this._numberChars)if((this._numberChars=e)&&0<e.length){for(var t="[",n=0;n<e.length;n++){var r=e[n];t+="\\"==r?"\\"+r:r}t+="]",this._numberCharExp=new RegExp(t,"g")}else this._numberCharExp=null}}),_dp(y,"numberSeparator",{get:function(){return this._numberSeparator},set:function(e){e!=this._numberSeparator&&(this._numberSeparator=e,this._changed())}}),_dp(y,"numberCharsOfCols",{get:function(){return this._numberCharsOfCols},set:function(e){if(e!==this._numberCharsOfCols&&(this._numberCharsOfCols=e,this._numberCharExpOfCols={},e))for(var t in e){var n=e[t];if(n instanceof Array&&0<n.length){for(var r="[",i=0,s=n.length;i<s;i++){var o=n[i];r+="\\"==o?"\\"+o:o}r+="]",this._numberCharExpOfCols[t]=new RegExp(r,"g")}else this._numberCharExpOfCols[t]=null}}}),_dp(y,"numberCharExp",{get:function(){return this._numberCharExp}}),_dp(y,"numberSeparatorOfCols",{get:function(){return this._numberSeparatorOfCols},set:function(e){e!==this._numberSeparatorOfCols&&(this._numberSeparatorOfCols=e,this._changed())}}),_dp(y,"selectionBase",{get:function(){return this._selectionBase},set:function(e){e!=this._selectionBase&&(this._selectionBase=e,this._changed())}}),_dp(y,"selectBlockPaste",{get:function(){return this._selectBlockPaste},set:function(e){e!=this._selectBlockPaste&&(this._selectBlockPaste=e,this._changed())}}),_dp(y,"stopOnError",{get:function(){return this._stopOnError},set:function(e){e!=this._stopOnError&&(this._stopOnError=e,this._changed())}}),_dp(y,"noEditEvent",{get:function(){return this._noEditEvent},set:function(e){e!=this._noEditEvent&&(this._noEditEvent=e,this._changed())}}),_dp(y,"noDataEvent",{get:function(){return this._noDataEvent},set:function(e){e!=this._noDataEvent&&(this._noDataEvent=e,this._changed())}}),_dp(y,"eventEachRow",{get:function(){return this._eventEachRow},set:function(e){e!=this._eventEachRow&&(this._eventEachRow=e,this._changed())}}),_dp(y,"checkReadOnly",{get:function(){return this._checkReadOnly},set:function(e){e!=this._checkReadOnly&&(this._checkReadOnly=e,this._changed())}}),_dp(y,"checkDomainOnly",{get:function(){return this._checkDomainOnly},set:function(e){e!=this._checkDomainOnly&&(this._checkDomainOnly=e,this._changed())}}),_dp(y,"convertLookupLabel",{get:function(){return this._convertLookupLabel},set:function(e){e!=this._convertLookupLabel&&(this._convertLookupLabel=e,this._changed())}}),_dp(y,"applyNumberFormat",{get:function(){return this._applyNumberFormat},set:function(e){e!=this._applyNumberFormat&&(this._applyNumberFormat=e,this._changed())}}),_dp(y,"applyEditMask",{get:function(){return this._applyEditMask},set:function(e){e!=this._applyEditMask&&(this._applyEditMask=e,this._changed())}}),_dp(y,"applyMaxLength",{get:function(){return this._applyMaxLength},set:function(e){e!=this._applyMaxLength&&(this._applyMaxLength=e,this._changed())}}),_dp(y,"applyInputChars",{get:function(){return this._applyInputChars},set:function(e){e!=this._applyInputChars&&(this._applyInputChars=e)}}),_dp(y,"throwValidationError",{get:function(){return this._throwValidationError},set:function(e){e!=this._throwValidationError&&(this._throwValidationError=e,this._changed())}}),y.prototype.numberCharExpOfCol=function(e){return e&&this._numberCharExpOfCols&&this._numberCharExpOfCols[e]?this._numberCharExpOfCols[e]:this._numberCharExp},y.prototype.numberSeparatorOfCol=function(e){return e&&this._numberSeparatorOfCols&&this._numberSeparatorOfCols[e]?this._numberSeparatorOfCols[e]:this._numberSeparator},y);t.PasteOptions=r;var w,r=(w=Kt.GridBaseOptions,l.__extends(E,w),E.prototype._doDispose=function(){w.prototype._doDispose.call(this)},_dp(E,"longTapDuration",{get:function(){return this._longTapDuration},set:function(e){e!=this._longTapDuration&&(this._longTapDuration=e,this._changed())}}),_dp(E,"doubleTapInterval",{get:function(){return this._doubleTapInterval},set:function(e){e!=this._doubleTapInterval&&(this._doubleTapInterval=e,this._changed())}}),_dp(E,"tapThreshold",{get:function(){return this._tapThreshold},set:function(e){e!=this._tapThreshold&&(this._tapThreshold=e,this._changed())}}),_dp(E,"showEditCommander",{get:function(){return this._showEditCommander},set:function(e){e!=this._showEditCommander&&(this._showEditCommander=e,this._changed())}}),_dp(E,"showTooltip",{get:function(){return this._showTooltip},set:function(e){e!=this._showTooltip&&(this._showTooltip=e,this._changed())}}),_dp(E,"scrollOnEditing",{get:function(){return this._scrollOnEditing},set:function(e){this._scrollOnEditing=e}}),E);t.MobileOptions=r});t(kn),kn.EditOptions,kn.EditorTitleExpressionRuntime,kn.EditorOptions,kn.CopyOptions,kn.PasteOptions,kn.MobileOptions;var Ln=n(function(e,t){function i(e){var t=n.call(this)||this;return t._grid=e,t}function u(e){var t=s.call(this,e.grid)||this;return t._index=e,t}function f(e,t){return e=a.call(this,e)||this,e._style=t,e}function h(e){return c.call(this,e)||this}function d(e){return p.call(this,e)||this}function m(e){return e=v.call(this,e)||this,e._itemIndex=-1,e._variable=!1,e._rowTop=0,e._offset=0,e}function y(e){return e=g.call(this,e)||this,e._offset=0,e._top=0,e}function w(e){return e=b.call(this,e)||this,e._itemIndex=-1,e._offset=0,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=mn.EditRequest,l.__extends(i,n),i.prototype._doDispose=function(){this._grid=null,n.prototype._doDispose.call(this)},_dp(i,"grid",{get:function(){return this._grid}}),i.prototype.canFocus=function(){return!0},i);t.GridEditRequest=r;var s,o=(s=r,l.__extends(u,s),u.prototype._doDispose=function(){this._index.dispose(),this._index=null,s.prototype._doDispose.call(this)},_dp(u,"index",{get:function(){return this._index}}),u);t.CellRequest=o;var a,o=(a=o,l.__extends(f,a),f.prototype._doDispose=function(){a.prototype._doDispose.call(this)},_dp(f,"style",{get:function(){return this._style}}),_dp(f,"manager",{get:function(){return this.grid.selections}}),_dp(f,"selectable",{get:function(){return!0}}),f);t.SelectRequest=o;var c,o=(c=r,l.__extends(h,c),h.prototype._doDispose=function(){this._layout=null,c.prototype._doDispose.call(this)},_dp(h,"layout",{get:function(){return this._layout}}),_dp(h,"x",{get:function(){return this._x}}),_dp(h,"y",{get:function(){return this._y}}),_dp(h,"offset",{get:function(){return this._offset}}),h.prototype.init=function(e,t,n,r){return this._layout=e,this._x=t,this._y=n,this._offset=r,this},_dp(h,"cursor",{get:function(){return"col-resize"}}),h);t.ColumnResizeRequest=o;var p,o=(p=r,l.__extends(d,p),d.prototype._doDispose=function(){this._layout=null,p.prototype._doDispose.call(this)},_dp(d,"layout",{get:function(){return this._layout}}),_dp(d,"x",{get:function(){return this._x}}),_dp(d,"y",{get:function(){return this._y}}),_dp(d,"offset",{get:function(){return this._offset}}),d.prototype.init=function(e,t,n,r){return this._layout=e instanceof Ft.ProxyCellLayoutItem?e.source:e,this._x=t,this._y=n,this._offset=r,this},_dp(d,"cursor",{get:function(){return"default"}}),d);t.ColumnMoveRequest=o;var v,o=(v=r,l.__extends(m,v),m.prototype._doDispose=function(){v.prototype._doDispose.call(this)},_dp(m,"itemIndex",{get:function(){return this._itemIndex}}),_dp(m,"variable",{get:function(){return this._variable}}),_dp(m,"rowTop",{get:function(){return this._rowTop}}),_dp(m,"offset",{get:function(){return this._offset}}),m.prototype.init=function(e,t,n,r){return this._itemIndex=e,this._variable=t,this._rowTop=n,this._offset=r,this},_dp(m,"cursor",{get:function(){return"row-resize"}}),m);t.RowResizeRequest=o;var g,o=(g=r,l.__extends(y,g),y.prototype._doDispose=function(){g.prototype._doDispose.call(this)},_dp(y,"top",{get:function(){return this._top}}),_dp(y,"offset",{get:function(){return this._offset}}),y.prototype.init=function(e,t){return this._top=e,this._offset=t,this},_dp(y,"cursor",{get:function(){return"row-resize"}}),y);t.HeaderResizeRequest=o;var b,r=(b=r,l.__extends(w,b),w.prototype._doDispose=function(){b.prototype._doDispose.call(this)},_dp(w,"itemIndex",{get:function(){return this._itemIndex}}),_dp(w,"offset",{get:function(){return this._offset}}),w.prototype.init=function(e,t){return this._selStyle=e&&e.style,this._selStyle==Zt.SelectionStyle.COLUMNS||this._selStyle==Zt.SelectionStyle.SINGLE_COLUMN?(this._itemIndex=t,this._offset=0):(this._itemIndex=this._selStyle?e.getBounds().top:t,this._offset=t-this._itemIndex),this},_dp(w,"cursor",{get:function(){return"move"}}),w.prototype.canFocus=function(){return this._selStyle==Zt.SelectionStyle.COLUMNS||this._selStyle==Zt.SelectionStyle.SINGLE_COLUMN},w);t.RowMoveRequest=r});t(Ln),Ln.GridEditRequest,Ln.CellRequest,Ln.SelectRequest,Ln.ColumnResizeRequest,Ln.ColumnMoveRequest,Ln.RowResizeRequest,Ln.HeaderResizeRequest,Ln.RowMoveRequest;var An=n(function(e,t){function i(e,t){return t=n.call(this,e.container,t)||this,t._grid=e,t}function u(e,t){var n=s.call(this,e.layout.grid,"columnResizeTracker")||this;return n._request=e,n._feedback=t,t=e.layout,n._layoutX=e.x+e.offset-t.domWidth,n._offset=e.offset,n}function f(e,t,n){var r=a.call(this,e.layout.grid,"columnMoveTracker")||this;return r._timer=null,r._colLoop=0,r._colPrevLoop=0,r._interval=0,r._request=e,r._layout=e.layout,r._cellFeedback=t,r._feedback=n,r}function h(e,t){var n=c.call(this,e.grid,"rowResizeTracker")||this;return n._request=e,n._feedback=t,n}function v(e,t){var n=d.call(this,e.grid,"rowResizeTracker")||this;return n._request=e,n._feedback=t,n}function g(e,t,n){var r=m.call(this,e.grid,"rowMoveTracker")||this;return r._targetRow=-1,r._timer=null,r._request=e,r._proxy=t,r._line=n,r}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=vn.DragTracker,l.__extends(i,n),i.prototype._doDispose=function(){this._grid=null,n.prototype._doDispose.call(this)},_dp(i,"grid",{get:function(){return this._grid}}),_dp(i,"startWhenCreated",{get:function(){return!1}}),i);t.GridDragTracker=r;var s,o=(s=r,l.__extends(u,s),u.prototype._doDispose=function(){this._request=null,this._feedback=null,s.prototype._doDispose.call(this)},u.prototype.getRequest=function(){return this._request},u.prototype._doStart=function(e,t,n,r){var i=this.grid.layoutManager,s=i.contentBounds.y,i=i.contentBounds.bottom;return this._feedback.resize(2,i-s),this._feedback.move(t-this._offset,s),this.grid.addFeedbackElement(this._feedback),!0},u.prototype._doDrag=function(e,t,n){this._request.layout;var r=this.grid.displayOptions.minCellWidth;return(t-=this._offset)>=this._layoutX+r&&t<this._layoutX+1e6&&(this._feedback.x=t,!0)},u.prototype._doEnded=function(){var e=this.grid.displayOptions.minCellWidth,e=Math.max(e,this._feedback.x-this._layoutX);this.grid.removeFeedbackElement(this._feedback),this._request.layout.changeCellWidth(e,this.grid.layoutManager.isColumnFitted),this.grid.container.setCursor("default")},u);t.ColumnResizeTracker=o;var a,o=(a=r,l.__extends(f,a),f.prototype._doDispose=function(){this._request=this._layout=this._cellFeedback=this._feedback=this._target=null,a.prototype._doDispose.call(this)},f.prototype.getRequest=function(){return this._request},f.prototype._doStart=function(e,t,n,r){var i=this.grid,s=i.layoutManager,o=this._layout.parent,s=s.getHeaderCellRect(this._layout,!0);return o.horizontal?(this._offset=t-s.x,this._feedback.setBounds(s.x,s.y,f.WING_SIZE,s.height)):(this._offset=n-s.y,this._feedback.setBounds(s.x,s.y,s.width,f.WING_SIZE)),this._feedback.visible=!1,this._cellFeedback.setBounds(s.x,s.y,s.width,s.height),this._cellFeedback.model=i.header.getCell(this._layout),this._cellFeedback.dragging=!1,i.addFeedbackElement(this._cellFeedback),i.addFeedbackElement(this._feedback),i=this._feedback._dom.style,!(i.borderLeft=i.borderRight=i.borderTop=i.borderBottom="")},f.prototype._doDrag=function(e,t,n){var r=this.grid,i=this._layout.parent,s=this.grid.layoutManager;return!(n<s.contentBounds.y&&r.canGrouping())&&(t<s.gridBounds.x||t>s.clientRect.right?this.$_startTimer():(this.$_stopTimer(),s=s.getHeaderCellAt(t,n),s=this.$_findTarget(s),p.Utils.trace("MOVE: ",this._layout.displayText+" => "+(null==s?void 0:s.displayText)),s&&!r.canMoveToLayout(s)&&(s=null),this.$_setTarget(s),this._cellFeedback.dragging=!0,i.horizontal?this._cellFeedback.x=t-this._offset:this._cellFeedback.y=n-this._offset),!0)},f.prototype._doCanceled=function(){this.$_stopTimer()},f.prototype._doCompleted=function(){this.$_stopTimer(),this._target&&(this._layout.vindex=this._target.vindex)},f.prototype._doEnded=function(){this.$_stopTimer(),this.grid.removeFeedbackElement(this._feedback),this.grid.removeFeedbackElement(this._cellFeedback)},f.prototype.getNextRequest=function(e,t){return this.grid.activeTool.getNextRequest(this._request,this._cellFeedback,e,t)},f.prototype.$_startTimer=function(){this._timer||(this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this.$_timerHandler.bind(this),60))},f.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},f.prototype.$_timerHandler=function(){var e=this._grid,t=this.currentX,n=e.layoutManager,r=0;t>n.clientRect.right?(r=Math.max(0,Math.min(3,(t-n.clientRect.right)/40)),this._interval=4-r,this._colLoop++):t<n.gridBounds.x&&(r=Math.max(0,Math.min(3,(n.gridBounds.x-t)/40)),this._interval=4-r,this._colLoop++),0<r&&(this._interval=4-r),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,t>n.clientRect.right?e.leftCell+=1:t<n.gridBounds.left&&0<e.leftPos&&--e.leftCell),this.$_setTarget(null)},f.prototype.$_findTarget=function(e){if(e)for(var t=this._layout.parent;e;){if(e.parent===t)return e;e=e.parent}},f.prototype.$_setTarget=function(e){var t=this._request.layout,n=t.parent,r=this._feedback,i=r._dom.style,s=this.grid.layoutManager;this.currentX,this.currentY,this._target=e,(r.visible=null!=e&&e.parent===n&&e!==t)&&(s=s.getHeaderCellRect(e,!0),n.horizontal?(n=t.hcol,i.height=s.height+"px",e.hcol<n?(i.borderRight="none",i.borderLeft="",r.x=s.x):e.hcol>n&&(i.borderLeft="none",i.borderRight="",r.x=s.right-r.width),this.grid.makeLayoutVisible(e)):(t=t.row,i.width=s.width+"px",e.row<t?(i.borderBottom="none",i.borderTop="",r.y=s.y):e.row>t&&(i.borderTop="none",i.borderBottom="",r.y=s.bottom-r.height)))},f.WING_SIZE=7,f);t.ColumnMoveTracker=o;var c,o=(c=r,l.__extends(h,c),h.prototype._doDispose=function(){this._request=null,this._feedback=null,c.prototype._doDispose.call(this)},h.prototype.getRequest=function(){return this._request},h.prototype._doStart=function(e,t,n,r){var i=this.grid.layoutManager,s=i.leftContentBounds.x,i=i.rightContentBounds.right;return this._feedback.resize(i-s,2),this._feedback.move(s,n-this._request.offset),this.grid.addFeedbackElement(this._feedback),!0},h.prototype._doDrag=function(e,t,n){return n-this._request.offset-this._request.rowTop>=this.grid.displayOptions.minRowHeight&&(this._feedback.y=n-this._request.offset,!0)},h.prototype._doCompleted=function(e,t,n){var r=this.grid,i=r.displayOptions,n=Math.max(i.minRowHeight,n-this._request.offset-this._request.rowTop);(n=0===i.maxRowHeight?n:Math.min(i.maxRowHeight,n))>=r.layoutManager.bodyBounds.height&&(n=r.layoutManager.bodyBounds.height-1),this._request.variable?r.setRowHeight(this._request.itemIndex,n):i.rowHeight=n},h.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},h);t.RowResizeTracker=o;var d,o=(d=r,l.__extends(v,d),v.prototype._doDispose=function(){this._request=null,this._feedback=null,d.prototype._doDispose.call(this)},v.prototype.getRequest=function(){return this._request},v.prototype._doStart=function(e,t,n,r){var i=this.grid.layoutManager,s=i.leftContentBounds.x,i=i.rightContentBounds.right;return this._feedback.resize(i-s,2),this._feedback.move(s,n-this._request.offset),this.grid.addFeedbackElement(this._feedback),!0},v.prototype._doDrag=function(e,t,n){return n-this._request.offset-this._request.top>=this.grid.header.minHeight&&(this._feedback.y=n-this._request.offset,!0)},v.prototype._doCompleted=function(e,t,n){var r=this.grid.header,n=Math.max(r.minHeight,n-this._request.offset-this._request.top);r.height=n},v.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},v);t.HeaderResizeTracker=o;var m,r=(m=r,l.__extends(g,m),g.updateLineFeedback=function(e,t,n,r,i,s,o){if(i<0||s<0||i>=e.width||s>=e.height)return r.visible=!1,-1;var u=e.layoutManager;s-=u.contentBounds.y;var a,f,l=u.contentBounds.right,c=-1,h=-1;return s<u.summaryBounds.bottom?(h=Math.max(0,u.topIndex-1),c=u.getTableItemTop(0)):s>=u.footerBounds.y?(h=u.topIndex+u.fullItemCount,c=u.getTableItemBottom(u.fullItemCount)):(a=s-u.summaryBounds.bottom,f=u.getTableItemIndex(a),i=u.getTableItemHeight(f),(h=f)>=u.fixedItemCount&&(h+=u.topIndex),h!=t&&(a<u.getTableItemTop(f)+i/2?(c=u.getTableItemTop(f),t<h&&(h=Math.max(u.topIndex,h-1))):0<=(c=-1<f?u.getTableItemBottom(f):o?0:-1)&&h<t&&h++)),c+=u.contentBounds.y+u.summaryBounds.bottom,r.visible=t<h?t+n-1<h:0<=h&&h!=t,r.visible?(r.resize(+l,2),0==e.itemCount&&(c+=u.defaultItemHeight),r.move(0,c)):h=-1,s<u.summaryBounds.bottom?e.topIndex--:s>=u.footerBounds.y&&e.topIndex++,h},g.prototype._doDispose=function(){this._request=null,this._proxy=null,this._line=null,m.prototype._doDispose.call(this)},_dp(g,"request",{get:function(){return this._request}}),_dp(g,"sourceItems",{get:function(){return this._sourceItems}}),g.prototype.setEnabled=function(e){this._proxy.setEnabled(e)&&this._proxy.draw()},g.prototype.setLabel=function(e){this._proxy.setLabel(e)&&this._proxy.draw()},_dp(g,"startWhenCreated",{get:function(){return!0}}),_dp(g,"linkable",{get:function(){return!0}}),g.prototype.getRequest=function(){return this._request},g.prototype._doStart=function(e,t,n,r){var i=this.grid,s=p.getDoc(e),o=0==i.selections.count;o||(e=i.selections.getItem(0),o=Zt.isColumnSelection(e)||!e.containsItem(this._request.itemIndex)),o&&(i.setFocusedItem(this._request.itemIndex),i.selections.selectRow(this._request.itemIndex));for(var u=this._sourceItems=i.getSelectedItemIndices(),a=i.getItem(u[0]).level,f=1;f<u.length;f++)if(i.getItem(u[f]).level<a){u.splice(f,u.length-f);break}for(f=u.length-1;0<f;f--)if(i.getItem(u[f]).level>a){u.splice(f,1);break}return s.body.appendChild(this._proxy._dom),i.addFeedbackElement(this._line),s=this.$_updateLine(t,n),this._proxy.setZIndex(i.displayOptions.baseZindex+6),this.$_updateProxy(t,n,s,!1),!0},g.prototype._doDrag=function(e,t,n){var r=this.grid,i=r.layoutManager,s=this.$_updateLine(t,n),e=r.container.findContainer(null,e);return this.$_updateProxy(t,n,s,r.container!==e),(n-=i.contentBounds.y)>i.footerBounds.y||n<i.summaryBounds.bottom?this.$_startTimer():this.$_stopTimer(),!0},g.prototype._doCompleted=function(e,t,n){var r,i,s;0<=this._targetRow&&(r=this.grid).canMoveRow(!0,!1)&&r.dataDropOptions.getEnabled(r,this._sourceItems,this._targetRow)&&(i=this._request.itemIndex,(s=r.dataDropOptions.callback)?s(r.handler,this._sourceItems,r.handler,this._targetRow):this._targetRow>i?r.moveSelection(this._targetRow-(i+this._sourceItems.length-1)):this._targetRow<i&&r.moveSelection(this._targetRow-i))},g.prototype._doCanceled=function(e,t){},g.prototype._doEnded=function(){var e=this.grid;this.$_stopTimer(),e.removeFeedbackElement(this._line),e.doc.body.removeChild(this._proxy._dom)},g.prototype.$_updateLine=function(e,t){return this._targetRow=g.updateLineFeedback(this.grid,this._request.itemIndex,this._sourceItems.length,this._line,e,t,!1)},g.prototype.$_updateProxy=function(e,t,n,r){var i=this.grid,s=p.Utils.getOffset(i.container._containerDom);s.y+=t,s.x+=e+20,r=i.canMoveRow(!0,r)&&(r||i.dataDropOptions.getEnabled(i,this._sourceItems,n)),i=i.dataDropOptions.getLabel(i,this._sourceItems,n),this._proxy.move(s.x,s.y),this._proxy.setEnabled(void 0!==r?r:0<=n),this._proxy.setLabel(i),this._proxy.draw()},g.prototype.$_startTimer=function(){this._timer||(this._timer=setInterval(this.$_timerHandler.bind(this),100))},g.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},g.prototype.$_timerHandler=function(){var e=this.currentX,t=this.currentY;this.$_updateLine(e,t)},g);t.RowMoveTracker=r});t(An),An.GridDragTracker,An.ColumnResizeTracker,An.ColumnMoveTracker,An.RowResizeTracker,An.HeaderResizeTracker,An.RowMoveTracker;var On=n(function(e,t){function i(e,t,r,i){return t=n.call(this,e.index.grid,t)||this,t._request=e,t._currX=r,t._currY=i,t}function u(e,t,n){return n=s.call(this,e,"blockSelectTracker",t,n)||this,n._timer=null,n._rowPrevLoop=0,n._rowLoop=0,n._colPrevLoop=0,n._colLoop=0,n._interval=0,n}function f(e,t,n){return n=a.call(this,e,"rowsSelectTracker",t,n)||this,n._timer=null,n._prevLoop=0,n._loop=0,n._colPrevLoop=0,n._colLoop=0,n._interval=0,n}function h(e,t,n){return n=c.call(this,e,"columnsSelectTracker",t,n)||this,n._timer=null,n._prevLoop=0,n._loop=0,n._rowPrevLoop=0,n._rowLoop=0,n._interval=0,n}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=An.GridDragTracker,l.__extends(i,n),i.prototype._doDispose=function(){this._request.dispose(),this._request=null,n.prototype._doDispose.call(this)},_dp(i,"startWhenCreated",{get:function(){return!1}}),_dp(i,"clickable",{get:function(){return!0}}),_dp(i,"scrollable",{get:function(){var e=this._getItem().getBounds();return e.top===e.bottom}}),i.prototype.getRequest=function(){return this._request},i.prototype._doCanceled=function(){},i.prototype._doEnded=function(){var e=this._getItem();this.grid.selections.$_ended(e)},i.prototype.spanHome=function(e){var t=this.grid;t.displayOptions.spanSelecting&&t.getBodyViewAt(e).spanHead(t.layoutManager,e)},i.prototype.spanRight=function(e){var t=this.grid;t.displayOptions.spanSelecting&&t.getBodyViewAt(e).spanRight(t.layoutManager,e)},i);t.SelectTracker=r;var s,o=(s=r,l.__extends(u,s),u.prototype._doDispose=function(){s.prototype._doDispose.call(this)},u.prototype._getItem=function(){return this._item},u.prototype._doStart=function(e,t,n,r){var i=this.grid,s=i.selections,o=i.layoutManager,u=this._request.index;return(!o.isMergedCell(u)||!!(u=i.pointToIndex(e,t,n,!0)).layout)&&(s.itemStyle=Zt.SelectionStyle.BLOCK,r?this._item=0<s.count&&s.getItem(0):(s.clear(),this._item=s.add(u,u,Zt.SelectionStyle.BLOCK)),null!=this._item)},u.prototype._doDrag=function(e,t,n){if(this._item){var r=this.grid,i=r.layoutManager;return this._currX=t,(this._currY=n)-i.contentBounds.y>i.footerBounds.y||n<i.gridBounds.y||t<i.gridBounds.x||t>i.clientRect.right?this.$_startTimer():(this.$_stopTimer(),(n=r.pointToIndex(e,t,n,!0)).column&&0<=n.itemIndex&&(0<=It.CellIndex.compareHorz(n,this._item.startIndex)?(this.spanRight(n),this.spanHome(this._item.startIndex)):this.spanRight(this._item.startIndex),this._item.resizeTo(n))),!0}},u.prototype._doEnded=function(){this.$_stopTimer(),s.prototype._doEnded.call(this)},u.prototype.$_startTimer=function(){this._timer||(this._rowLoop=this._rowPrevLoop=this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},u.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},u.prototype.$_timerHandler=function(){var e=this._grid,t=this._currX,n=this._currY,r=e.layoutManager,i=0,s=0;n>r.footerBounds.y?(s=Math.max(0,Math.min(3,(n-r.footerBounds.y)/40)),this._interval=4-s,this._rowLoop++):n<r.gridBounds.y&&(s=Math.max(0,Math.min(3,(r.gridBounds.y-n)/40)),this._interval=4-s,this._rowLoop++),t>r.clientRect.right?(i=Math.max(0,Math.min(3,(t-r.clientRect.right)/40)),this._interval=4-i,this._colLoop++):t<r.gridBounds.x&&(i=Math.max(0,Math.min(3,(r.gridBounds.x-t)/40)),this._interval=4-i,this._colLoop++);var o=!1;0<Math.max(i,s)&&(this._interval=4-Math.max(i,s)),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,n>r.footerBounds.y?e.topItem+r.fullItemCount<e.itemCount&&(e.topIndex=e.topIndex+1,o=!0):n<r.gridBounds.y&&e.topItem>r.fixedItemCount&&(e.topIndex=e.topIndex-1,o=!0)),o||this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,t>r.clientRect.right?(e.leftPos+=t-r.clientRect.right,o=!0):t<r.gridBounds.left&&0<e.leftPos&&(e.leftPos-=r.gridBounds.left-t,o=!0)),!o||(n=e.pointToIndex(null,t,n,!1)).column&&(n.itemIndex=Math.min(Math.max(0,n.itemIndex,e.topIndex),e.itemCount-1),this._item.resizeTo(n))},u);t.BlockSelectTracker=o;var a,o=(a=r,l.__extends(f,a),f.prototype._doDispose=function(){a.prototype._doDispose.call(this)},f.prototype._getItem=function(){return this._item},f.prototype._doStart=function(e,t,n,r){var i=this.grid,s=i.selections,o=i.layoutManager,u=this._request.index;return o.isMergedCell(u)&&(u=i.pointToIndex(e,t,n,!0)),s.itemStyle=Zt.SelectionStyle.ROWS,r?this._item=0<s.count&&s.getItem(0):(s.clear(),this._item=s.add(u,u,Zt.SelectionStyle.ROWS)),Boolean(this._item)},f.prototype._doDrag=function(e,t,n){if(this._item){var r=this.grid.layoutManager;return this._currX=t,(this._currY=n)>r.footerBounds.y||n<r.gridBounds.y||t<0||t>r.clientRect.right?this.$_startTimer():(this.$_stopTimer(),0<=(n=this.grid.pointToIndex(e,t,n,!1)).itemIndex&&this._item.resizeTo(n)),!0}return!1},f.prototype._doEnded=function(){this.$_stopTimer(),a.prototype._doEnded.call(this)},f.prototype.$_startTimer=function(){this._timer||(this._loop=this._prevLoop=this._colLoop=this._colPrevLoop=0,this._interval=1,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},f.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},f.prototype.$_timerHandler=function(){var e,t,n=this._grid,r=this._currX,i=this._currY,s=n.layoutManager;i>s.footerBounds.y?(e=Math.max(0,Math.min(3,(i-s.footerBounds.y)/40)),this._interval=4-e,this._loop++):i<s.gridBounds.y&&(e=Math.max(0,Math.min(3,(s.gridBounds.y-i)/40)),this._interval=4-e,this._loop++),this._loop-this._prevLoop>=this._interval?(this._prevLoop=this._loop,i>s.footerBounds.y?n.topIndex=n.topIndex+1:i<s.gridBounds.y&&(n.topIndex=n.topIndex-1),(t=n.pointToIndex(null,this._currX,this._currY,!1)).itemIndex=Math.min(Math.max(0,t.itemIndex,n.topIndex),n.itemCount-1),this._item.resizeTo(t)):(r>s.clientRect.right?(e=Math.max(0,Math.min(3,(r-s.clientRect.right)/40)),this._interval=4-e,this._colLoop++):r<0&&(e=Math.max(0,Math.min(3,(s.gridBounds.x-r)/40)),this._interval=4-e,this._colLoop++),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,r>s.clientRect.right?n.leftLayout=n.leftLayout+1:r<s.gridBounds.x&&0<n.leftPos&&(n.leftLayout=n.leftLayout-1),0<=(t=n.pointToIndex(null,this._currX,this._currY,!1)).itemIndex&&(t.itemIndex=Math.min(Math.max(0,t.itemIndex,n.topIndex),n.itemCount-1),this._item.resizeTo(t))))},f);t.RowsSelectTracker=o;var c,r=(c=r,l.__extends(h,c),h.prototype._doDispose=function(){c.prototype._doDispose.call(this)},_dp(h,"startWhenCreated",{get:function(){return!0}}),h.prototype._getItem=function(){return this._item},h.prototype._doStart=function(e,t,n,r){var i=this.grid,s=i.selections,o=i.layoutManager,u=this._request.index;return o.isMergedCell(u)&&(u=i.pointToIndex(e,t,n,!0)),s.itemStyle=Zt.SelectionStyle.ROWS,r?this._item=0<s.count&&s.getItem(0):(s.clear(),this._item=s.add(u,u,Zt.SelectionStyle.COLUMNS)),Boolean(this._item)},h.prototype._doDrag=function(e,t,n){if(this._item){var r=this.grid.layoutManager;return this._currX=t,this._currY=n,t<r.gridBounds.x||t>r.clientRect.right||n>r.footerBounds.y||n<0?this.$_startTimer():(this.$_stopTimer(),null!=(n=this.grid.pointToIndex(e,t,n,!0)).column&&this._item.resizeTo(n)),!0}return!1},h.prototype._doEnded=function(){this.$_stopTimer(),c.prototype._doEnded.call(this)},h.prototype.$_startTimer=function(){this._timer||(this._loop=this._prevLoop=this._rowLoop=this._rowPrevLoop=0,this._interval=1,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},h.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},h.prototype.$_timerHandler=function(){var e,t,n=this._grid,r=this._currX,i=this._currY,s=n.layoutManager;r>s.clientRect.right?(e=Math.max(0,Math.min(3,(r-s.clientRect.right)/40)),this._interval=4-e,this._loop++):r<s.gridBounds.x&&(e=Math.max(0,Math.min(3,(s.gridBounds.x-r)/40)),this._interval=4-e,this._loop++),this._loop-this._prevLoop>=2*this._interval?(this._prevLoop=this._loop,r>s.clientRect.right?n.leftLayout=n.leftLayout+1:r<s.gridBounds.x&&0<n.leftPos&&(n.leftLayout=n.leftLayout-1),(t=n.pointToIndex(null,this._currX,this._currY,!1)).column&&this._item.resizeTo(t)):(i>s.footerBounds.y?(e=Math.max(0,Math.min(3,(i-s.footerBounds.y)/40)),this._interval=4-e,this._rowLoop++):i<0&&(e=Math.max(0,Math.min(3,(s.gridBounds.y-i)/40)),this._interval=4-e,this._rowLoop++),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,i>s.footerBounds.y?n.topIndex=n.topIndex+1:i<s.gridBounds.y&&(n.topIndex=n.topIndex-1),(t=n.pointToIndex(null,this._currX,this._currY,!1)).column&&this._item.resizeTo(t)))},h);t.ColumnsSelectTracker=r});t(On),On.SelectTracker,On.BlockSelectTracker,On.RowsSelectTracker,On.ColumnsSelectTracker;var Mn=n(function(e,t){function i(e){var t=n.call(this)||this;return t._visible=!0,e&&t.assignFrom(e),t}function u(e){var t=s.call(this)||this;return t._minWidth=0,t._maxWidth=0,t._dropDownCount=8,t._showing=!1,t.$_touchendHandler=null,t._container=e,t._element=t.$_createElement(e.doc),t.$_touchendHandler=function(e){e.preventDefault(),this.hide()}.bind(t),p.Utils.isMobile()&&t._element.addEventListener("touchend",t.$_touchendHandler,!1),t}function c(e){var t=a.call(this)||this;return t._active=!1,t._pos=new Gt.Point,t._container=e.container,t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(i,"visible",{get:function(){return this._visible},set:function(e){this._visible=e}}),_dp(i,"message",{get:function(){return this._message},set:function(e){this._message=e}}),i.prototype.assignFrom=function(e){"string"==typeof e?(this._message=e,this._message&&(this._visible=!0)):"boolean"==typeof e?this._visible=e:e&&n.prototype.assignFrom.call(this,e)},i);t.TooltipOptions=r;var s,o=(s=y.Base,l.__extends(u,s),u.prototype._doDispose=function(){s.prototype._doDispose.call(this),this._element&&this._element.removeEventListener("touchend",this.$_touchendHandler),p.Utils.detach(this._element)},_dp(u,"minWidth",{get:function(){return this._minWidth},set:function(e){this._minWidth=e}}),_dp(u,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth=e}}),_dp(u,"dropDownCount",{get:function(){return this._dropDownCount},set:function(e){this._dropDownCount=e}}),u.prototype.show=function(e,t,n,r,i){this._showing=!0;try{this.$_show(e,t,n,r,i)}finally{this._showing=!1}},u.prototype.hide=function(){var e=this._element;e&&e.parentNode&&this._container._container.removeChild(e)},u.prototype.$_createElement=function(e){var t=e.createElement("div");return t.style.pointerEvents="none",t.onkeydown=function(e){27==e.keyCode&&this.hide()}.bind(this),this.$_disableSelection(t),this._span=e.createElement("span"),t.appendChild(this._span),this.$_disableSelection(this._span),t},u.prototype.$_disableSelection=function(e){void 0!==
e.onselectstart?e.onselectstart=function(){return!1}:void 0!==e.style.MozUserSelect?e.style.MozUserSelect="none":e.onmousedown=function(){return!1}},u.prototype.$_show=function(e,t,n,r,i){var s=this._container.gridView.displayOptions.baseZindex+4,o=this._element,e=e.message;o&&e&&(this._span.innerHTML=e.replace(/\n/g,"<br>"),p.Utils.setClassName(o,"rg-tooltip"),(e=o.style).position="absolute",e.left=t+"px",e.top=n+"px",e.overflow="hidden",e.zIndex=String(s),this._container._container.appendChild(o),t=o.getBoundingClientRect(),s=this._container._container.getBoundingClientRect(),e.left=t.right>s.right?Math.max(s.right-t.width-s.left-2,0)+"px":o.style.left,t.bottom>s.bottom&&(o.style.top=i?Math.max(0,n-(t.bottom-s.bottom))+"px":Math.max(n-t.height-r,0)+"px"),e.visibility="visible")},u);t.ToolTipView=o;var a,f=(a=y.Base,l.__extends(c,a),c.prototype._doDispose=function(){this._container=null,a.prototype._doDispose.call(this)},_dp(c,"visible",{get:function(){return this._active}}),c.prototype.show=function(e,t,n,i,s){return!this._active&&(this.close(),(e=e instanceof r?e:e?new r(e):null)&&e.visible)?(this._tipView||(this._tipView=new o(this._container)),this._tipView.show(e,t,n,i,s),s=this._container.gridView,s&&this._pos.set(s.mouseX,s.mouseY),this._active=!0):!1},c.prototype.close=function(e,t){if(this._active&&void 0!==e){var n=this._pos;if(Math.abs(n.x-e)<4&&Math.abs(n.y-t)<4)return!1}return this._timer&&clearTimeout(this._timer),!!this._active&&(this._tipView&&this._tipView.hide(),!(this._active=!1))},c);t.TooltipManager=f});t(Mn),Mn.TooltipOptions,Mn.ToolTipView,Mn.TooltipManager;var _n=n(function(e,t){function i(e){var t=n.call(this)||this;return t._container=e,t}function o(e){return e=s.call(this,e)||this,e._touchId=void 0,e._started=null,e._seconded=null,e._startX=NaN,e._startY=NaN,e._tapped=0,e._dragging=!1,e._prevX=NaN,e._prevY=NaN,e._longTapTimer=void 0,e._tracker=null,e._events=[],e._touches=[],e._longTapDuration=500,e._doubleTapInterval=300,e._tapThreshold=4,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.prototype._doDispose=function(){this._container=null,n.prototype._doDispose.call(this)},i.prototype._touchToOffset=function(e,t){return e=e._containerDom.getBoundingClientRect(),t.x=t.clientX-e.left,t.y=t.clientY-e.top,t},i.prototype._toOffset=function(e){return this._touchToOffset(this._container,e)},i);t.TouchManager=r;var s,r=(s=r,l.__extends(o,s),o.prototype._doDispose=function(){s.prototype._doDispose.call(this)},_dp(o,"touchHandler",{get:function(){return this._touchHandler},set:function(e){this._touchHandler=e}}),_dp(o,"dragHandler",{get:function(){return this._dragHandler},set:function(e){this._dragHandler=e}}),_dp(o,"dragStartHandler",{get:function(){return this._dragStartHandler},set:function(e){this._dragStartHandler=e}}),_dp(o,"dragEndHandler",{get:function(){return this._dragEndHandler},set:function(e){this._dragEndHandler=e}}),_dp(o,"swipeHandler",{get:function(){return this._swipeHandler},set:function(e){this._swipeHandler=e}}),_dp(o,"tapHandler",{get:function(){return this._tapHandler},set:function(e){this._tapHandler=e}}),_dp(o,"doubleTapHandler",{get:function(){return this._doubleTapHandler},set:function(e){this._doubleTapHandler=e}}),_dp(o,"longTapHandler",{get:function(){return this._longTapHandler},set:function(e){this._longTapHandler=e}}),_dp(o,"touchEndHandler",{get:function(){return this._touchEndHandler},set:function(e){this._touchEndHandler=e}}),_dp(o,"touchEndt",{get:function(){return this._touchEndt}}),o.prototype.isSingleTouch=function(){return 1==this._touches.length},o.prototype.clearTouches=function(){this._touches=[]},o.prototype.removeTouches=function(e){for(var t,n=0,r=e.length;n<r;n++)t=e[n],-1<(t=this._touches.indexOf(t.identifier))&&this._touches.splice(t,1)},o.prototype.touchStart=function(e){clearTimeout(this._longTapTimer);var t,n=e.changedTouches;if(1<e.touches.length||0<this._touches.length)for(var r=0,i=n.length;r<i;r++)t=n[r],this._touches.push(t.identifier);else 0<n.length?(t=this._toOffset(n[0]),this._tracker&&(this._tracker.stop&&this._tracker.stop(t.x,t.y),this._tracker=null),this._touchId=t.identifier,this._touches.push(t.identifier),this._dragging=!1,this._touchHandler&&(this._tracker=this._touchHandler(e,t.x,t.y)),0==this._tapped?(this._started=p.Utils.getTimer(),this._prevX=this._startX=t.x,this._prevY=this._startY=t.y):(this._seconded=p.Utils.getTimer(),this._prevX=t.x,this._prevY=t.y),this._events=[],this._events.push({x:t.x,y:t.y,t:e.timeStamp}),this._longTapTimer=setTimeout(function(){this._longTapHandler&&this._longTapHandler(e,this._startX,this._startY)&&(this._touchId=void 0,this._tapped=0)}.bind(this),this._longTapDuration)):alert("no touch ?")},o.prototype.touchMove=function(e){var t,n=this.$_findTouch(e);n&&this.isSingleTouch()&&(t=!1,this._dragging&&this._tracker?t=this._dragHandler&&this._dragHandler(this._prevX,this._prevY,n.x,n.y):(Math.abs(this._prevX-n.x)>this._tapThreshold||Math.abs(this._prevY-n.y)>this._tapThreshold)&&(clearTimeout(this._longTapTimer),this._tapped=0,this._dragging=!0,t=this._tracker=this._dragStartHandler&&this._dragStartHandler(this._startX,this._startY,n.x,n.y)),t&&e.cancelable&&e.preventDefault(),this._prevX=n.x,this._prevY=n.y,this._events.push({x:n.x,y:n.y,t:e.timeStamp}),30<this._events.length&&this._events.splice(0,15))},o.prototype.touchEnd=function(e){if(clearTimeout(this._longTapTimer),void 0===this._touchId)return this._touchEndHandler&&this._touchEndHandler(e),void this.clearTouches();var t,n,r=this.$_findTouch(e);r&&this.isSingleTouch()?(n=(t=this._container)._currentX=r.x,r=t._currentY=r.y,this._dragging&&this._tracker?(this._touchId=void 0,this._tapped=0,this._swipeHandler&&this.$_checkSwipe(e)||this._dragEndHandler&&this._dragEndHandler(n,r,!1)):0==this._tapped?(this._tapped=1,this._tapHandler&&this._tapHandler(e,this._startX,this._startY)):1==this._tapped?(this._touchId=void 0,p.Utils.getTimer()-this._started<this._doubleTapInterval?(this._tapped=0,this._doubleTapHandler&&this._doubleTapHandler(e,this._prevX,this._prevY)):(this._tapped=1,this._started=this._seconded,this._startX=this._prevX,this._startY=this._prevY,this._tapHandler&&this._tapHandler(e,this._prevX,this._prevY))):alert("touch end")):this._dragEndHandler&&this._dragEndHandler(null,null,!1),this._tracker=null,e.touches.length<=0&&this.clearTouches(),this.removeTouches(e.changedTouches),p.Utils.isiOS&&(this._touchEndt=p.Utils.getTimer())},o.prototype.touchCancel=function(e){this.clearTouches(),clearTimeout(this._longTapTimer),this._dragEndHandler&&this._dragEndHandler(null,null,!0),this._tracker=null},o.prototype.$_findTouch=function(e){for(var t=e.changedTouches,n=0;n<t.length;n++){var r=t[n];if(r.identifier==this._touchId)return this._toOffset(r)}return null},o.prototype.$_checkSwipe=function(e){var t=this._events,n=t.length;if(!(n<2)){for(var r=t[n-1],i=t[n-2],s=n-3;0<=s&&!(100<r.t-i.t);s--)i=t[s];var o=i.x,u=i.y,a=r.x,f=r.y,l=Math.sqrt(Math.pow(o-a,2)+Math.pow(u-f,2))/Math.max(16,r.t-i.t);if(.1<l){var c=Math.log(.1/l)/Math.log(.998),n=l*(1-Math.pow(.998,1+c))/(1-.998),l="right",o=Math.round(180*Math.atan2(f-u,a-o)/Math.PI);return 45<(o=o<0?360+o:o)&&o<=135?l="bottom":135<o&&o<=225?l="left":225<o&&o<=315&&(l="top"),this._swipeHandler(c,n,l,e)}}},o);t.SingleTouchManager=r});t(_n),_n.TouchManager,_n.SingleTouchManager;var Dn=n(function(e,t){function i(e){var t=n.call(this)||this;return t._type=e,t}function o(e,t){var n=s.call(this)||this;return n._inputFocusable=!1,e&&"function"==typeof e.render?(n._impl=e,n._impl.type=t,n.assignFrom(n._impl)):n._impl=null,n._itemClickable=!0,n}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Ct.DataCellRenderer,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(i,"type",{get:function(){return this._type}}),i);t.CustomCellRenderer=r;var s,r=(s=Ct.DataCellRenderer,l.__extends(o,s),o.prototype._doDispose=function(){s.prototype._doDispose.call(this)},_dp(o,"inputFocusable",{get:function(){return this._inputFocusable},set:function(e){this._inputFocusable!==e&&(this._inputFocusable=e)}}),_dp(o,"type",{get:function(){return this._impl&&this._impl.type}}),o.prototype._doInitContent=function(e){this._impl&&this._impl.initContent&&this._impl.initContent.call(this,e)},o.prototype._doClearContent=function(e){this._impl&&this._impl.clearContent&&this._impl.clearContent.call(this,e)},o.prototype._doRenderCell=function(e,t,n,r,i){var s={};s.focused=n.focused,this._impl&&this._impl.render&&this._impl.render.call(this,e.handler,t,r,i,s)},o.prototype.preventDefaultEditClick=function(e){return(this._impl&&this._impl.preventEditClick?this._impl.preventEditClick:s.prototype.preventDefaultEditClick).call(this,e)},o.prototype._doEditClick=function(e,t,n){return(this._impl&&this._impl.editClick?this._impl.editClick:s.prototype._doEditClick).call(this,e,t,n)},o.prototype.preventDefaultClick=function(e){return(this._impl&&this._impl.preventClick?this._impl.preventClick:s.prototype.preventDefaultClick).call(this,e)},o.prototype._doClick=function(e,t){return this._impl&&this._impl.click?this._impl.click.call(this,t):s.prototype._doClick.call(this,e,t)},o.prototype._doEditKey=function(e,t,n){return this._impl&&this._impl.editKey?this._impl.editKey.call(this,t,n):s.prototype._doEditKey.call(this,e,t,n)},o.prototype.canClick=function(e){return(this._impl&&this._impl.canClick?this._impl:s.prototype).canClick.call(this,e)},o.prototype.canEdit=function(){return(this._impl&&this._impl.canEdit?this._impl:s.prototype).canEdit.call(this)},o.prototype.canEditKey=function(e){return(this._impl&&this._impl.canEditKey?this._impl:s.prototype).canEditKey.call(this,e)},o);t.CustomCellRendererImpl=r});t(Dn),Dn.CustomCellRenderer,Dn.CustomCellRendererImpl;var Pn=n(function(e,t){function i(e,t,r,i){var s=n.call(this)||this;return s._row=e,s._field=t,s._value=r,s._column=i,s._oldValue=p.Utils.deepCopy(e.getData(t)),s}function u(e){var t=s.call(this)||this;return t._editIndex=new It.CellIndex,t._editors=[],t._starting=!1,t._editRow=-1,t._needPrepare=!1,t._modified=!1,t._commiting=!1,t._canceling=!1,t._resetting=!1,t._dirty=!1,t._editable=!1,t._readOnly=!1,t.$_editFocused=!1,t._resetFocused=!1,t._grid=e,t._defaultEditor=e.delegate.getDefaultCellEditor(),t._defaultEditor&&t._defaultEditor.setController(t),t._defaultEditor&&t._internalHideEditor(t._defaultEditor),t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=P.EditCommand,l.__extends(i,n),i.prototype.undo=function(){this._row.setData(this._field,this._oldValue),this.$_focusCell()},i.prototype.redo=function(){this._row.setData(this._field,this._value),this.$_focusCell()},i.prototype.$_focusCell=function(){var e=this._column.grid,t=e.focusedIndex.clone();t.layout=this._column.layout,e.setFocusedIndex(t),e.makeCellVisible(t)},i);t.EditValueCommand=r;var s,o=(s=y.Base,l.__extends(u,s),u.prototype._doDispose=function(){this._grid=null,this._editIndex&&this._editIndex.dispose(),this._editIndex=null,this._editor&&this._editor.dispose(),this._editor=null,this._defaultEditor&&this._defaultEditor.dispose(),this._defaultEditor=null,this._editors=null,s.prototype._doDispose.call(this)},_dp(u,"readOnly",{get:function(){return this._readOnly}}),_dp(u,"editable",{get:function(){return this._editable}}),u.prototype.onEditorStart=function(e){if(!e.visible&&!this._commiting&&!this._canceling)return this._activateEditor(!1,!1)},u.prototype.onEditorKeyDown=function(e,t){var n=t.ctrlKey;return this._editor&&(this._editor.textReadOnly||n||t.altKey||!this._isEditKey(t.keyCode)?this._editor.textReadOnly?this._editor._editor.readOnly=this._editor.textReadOnly:229==t.keyCode&&this._editor.setReadOnly(this._readOnly):this._editor.setReadOnly(this._readOnly)),this._grid.activeTool.keyDown(t)},u.prototype.onEditorKeyPress=function(e,t){return this._grid.activeTool.keyPress(t)},u.prototype.onEditorKeyUp=function(e,t){return this._grid.activeTool.keyUp(t)},u.prototype.onEditorChange=function(e){var t;this._modified||(this._modified=!0,this._grid._editorStarted(e,this._editIndex)),this.editing&&(this._grid.makeCellVisible(this._editIndex),t=(t=e.getEditValue(!1,!1))===an.CellEditor.Unselected?e.getEditText():t,this._grid._editorChange(e,this._editIndex,t))},u.prototype.onEditorSearch=function(e,t){this._grid._editorSearch(this._editor,this._editIndex,t)},u.prototype.onSearchCellButtonClick=function(e,t){return this._grid._searchCellButtonClick(this._editor,this._editIndex,t)},u.prototype.onEditorCommit=function(e){return this.commitEditor(!0)},_dp(u,"editIndex",{get:function(){return this._editIndex.clone()}}),_dp(u,"editing",{get:function(){return this._editor&&this._editor.editing}}),_dp(u,"editValue",{get:function(){return this._editor&&this._editor.value}}),u.prototype.setFocus=function(e,t){if(t&&(!this._editor||t!==this._editor.editor)){var n=p.getWin(t);if(t instanceof n.HTMLInputElement||t instanceof n.HTMLSelectElement){n=this._grid.focusedIndex.clone(),n=this._grid.getBodyCellAt(n,!0),n=n&&n.renderer2;if((n instanceof kt.TemplateCellRenderer||n instanceof Dn.CustomCellRendererImpl)&&n.inputFocusable)return}}this.$_focusToEditor(e,t)},u.prototype.resetEditor=function(e){if(this.editing){if(this._grid.isValid(this._editIndex)){if(this._resetBounds(),e&&this.editing){e=this.getData(this._editIndex),this._resetting=!0;try{this._editor.setEditValue(e),this._editor.beginEdit(!1,!0)}finally{this._resetting=!1}}}else this.hideEditor();return!0}},u.prototype.reprepareEditor=function(e){It.CellIndex.areEquals(e,this._editIndex)&&(this.editing?this._editor.selectAll():(this._needPrepare=!0,this._prepareEditor(e)))},u.prototype.invalidateEditor=function(){this._dirty=!0},u.prototype.closeList=function(e){this._editor&&this._editor.closeList(e)},u.prototype.focusedIndexChanging=function(){return!this.editing||(this.closeList(!0),this.commitEditor(!0))},u.prototype.focusedIndexChanged=function(e,t,n){this._hideEditor(),this._grid.isValid(t)&&(n?this._prepareEditor(t):this._needPrepare=!0)},u.prototype.prepareEditor=function(e){this._needPrepare&&(this._needPrepare=!1,this._grid.isValid(e)&&this._prepareEditor(e))},u.prototype.requestPrepareEditor=function(){this._needPrepare=!0},u.prototype.dataColumnChanged=function(e){e&&this._editor&&this._editIndex&&this._editIndex.dataColumn===e&&(e=!e.isWritable()||e.readOnly)!=(!this._editable||this._readOnly)&&(this.editing?this._editor.setReadOnly(e):this._prepareEditor(this._editIndex))},u.prototype.showEditor=function(e,t){var n=this._grid;if(n&&n.isValid(e)&&e.item.canEdit())return this._editor&&this._editor.editing?(n.makeCellVisible(e),!0):this._editor&&!this._editor.editing&&(this._showEditorTimer||this._prepareEditor(e),n.makeCellVisible(e),this._activateEditor(!1,!0,t))?(n.editorLender&&n.editorLender.editorShow(e),!0):void 0},u.prototype.showList=function(e){var t=this._grid,n=this._editor;if(n&&n.editing&&(t.makeCellVisible(e),this.cancelEditor(!0)),t&&t.isValid(e)&&(this._prepareEditor(e),t.makeCellVisible(e),n&&this._editable&&!n.editing))return n.dropDownList(!0),!0},u.prototype.caretToLast=function(){this._editor&&this._editor.caretToLast()},u.prototype.hideEditor=function(){if(this.editing){this._modified=!1,this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}},u.prototype.commitEditor=function(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!0),!this.editing||this._commiting)return!0;var r=this._editor;if(!r)return!1;var i,s,o=this._grid,u=o.editOptions,a=this._editIndex,f=a.dataColumn,l=!0,c=r._mask;this._commiting=!0;try{if(r.commit(),(this._modified||r.isEdited())&&f&&0<=f.dataIndex)try{try{(s=c&&!c.checkValid()?an.CellEditor.InvalidFormat:r.getEditValue(!0,!0))===an.CellEditor.InvalidFormat?(l=!1,u.showInvalidFormatMessage&&c&&c.showInvalidFormatMessage&&alert(c&&c.invalidFormatMessage||u.invalidFormatMessage)):l=s===an.CellEditor.Unselected?!(this._modified=!1):(i={text:r.getEditText(),value:s},this._grid.getEditValue(r,a,i),s=i.value,this._grid.editorCommit(a,this._getData(a),s))}catch(e){l=!1}this._grid.isItemEditing()?l&&s!==an.CellEditor.Unselected&&(this._setData(a,s),this._grid.isItemEditing(a.item)&&(s=this._getData(a),this._grid.validateCellCommit(a,s)),this._modified=!1):this._modified=!1}catch(e){h=e,l=!1}if(this._resetting=!0,e)try{this._internalHideEditor(r),this._prepareEditor(a,n),r.isEdited()||this._grid.activeTool.resetFocused()}finally{this._resetting=!1}if(h){if(t)throw h;u.showCommitError&&alert(h.message||h)}}finally{this._commiting=!1}if(l&&o.isCellEditing()){var r=o.itemSource,t=r.editingItem.invalidFields,h=o.validationManager.getError(a);if(h)return t.push(f.dataIndex),u.showCommitError&&alert(h.userMessage||h.message||h),!1;if(0<=t.indexOf(f.dataIndex)&&t.splice(t.indexOf(f.dataIndex),1),o.validationManager.clearInvalidCell(a),0<t.length)return!0;if(!r.commit())return r.cancel(),!0}return l},u.prototype.cancelEditor=function(e){if(this.editing){this._canceling=!0;try{try{this._modified=!1,this._grid.editorCancel(this._editor,this._editIndex)}catch(e){throw e}this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}finally{this._canceling=!1,this._grid.editorCanceled()}var t;!this._grid.editOptions.commitByCell||(t=this._grid.itemSource).isUpdating&&t.cancel()}},u.prototype.fillSearchItems=function(e,t,n,r){this.editing&&this._editIndex.column===e&&this._editor instanceof Nn.SearchCellEditor&&this._editor.fillItems(t,n,r)},u.prototype.buttonClicked=function(e,t){this._editor&&It.CellIndex.areEquals(this._editIndex,e)&&this._editor.hasButton&&(p.Utils.isMobile()&&this._editor.hasList||this._editor.buttonClicked(this._editIndex,t))},u.prototype.buttonDown=function(e,t){this._editor&&this._editor.buttonDown(e,t)},u.prototype.buttonUp=function(e,t){this._editor&&this._editor.buttonUp(e,t)},u.prototype.getData=function(e){},u.prototype.setEditValue=function(e,t){this._editor&&this._editor.setCellEditValue(e,t)},u.prototype._internalHideEditor=function(e){this.closeList(!1),e.setVisible(!1,!1),e.endEdit(),this._grid._loading||this._grid._fireHideEditor(e.editIndex),this._grid.editorLender&&this._grid.editorLender.editorHide(this._editIndex)},u.prototype.$_hideEdit=function(e,t){t&&(t.setEditIndex(e),t.setVisible(!1),this.$_focusToEditor())},u.prototype.$_getCellEditor=function(e){var t,n=this._grid;return(t=n.editorLender?n.editorLender.getEditor(e):(t=n.getBodyCellAt(e))&&t.editor)||(e=e.valueColumn)&&(t=e.editor),n=n.delegate.getCellEditor(an.CellEditor.getEditorType(t)),n&&(n.initOptions(),t&&n.applyOptions(t),n.setController(this)),n},u.prototype.resetEditable=function(e){var t=this._editor;if(!t)return!1;var n=this._grid;if(t.setReadOnly(!1),n.editorLender)return this._editor.setEditIndex(e),this._editable=!0;var r=n.editorOptions,i=e.valueColumn,s=e.item,t=n.canEditAt(e);return(r._titleExprStatement&&this._editor.setEditorTitle(e),!t)?(this._editable=!1,this.$_hideEdit(e,this._editor),!1):(n=!n.canWriteAt(e),n||(n=!(s=(s=s.dataSource)?s.getField(e.dataField):null)||s.dataType==c.ValueType.OBJECT&&null==(i.objectKey||s.objectKey)),this._readOnly=n,this._editor.setReadOnly(this._readOnly),this._editor.setEditIndex(e),this._editable=!0)},u.prototype._prepareEditor=function(e,t){void 0===t&&(t=!0);var n,r=this._grid,i=r.editOptions;(r.active||r.editorLender)&&(this._dirty=!1,this._grid.isValid(e)&&e.item.canEdit()&&(this._hideEditor(t),this._editor=this.$_getCellEditor(e),this._editor&&(this._editIndex.assign(e),n=this._getData(e),this.resetEditable(e)?(this._editor.prepare(),this._editor.setEditValue(n),this._editor.selectAll(),i.editWhenFocused&&!this._editor.editing?(this._showEditorTimer&&clearTimeout(this._showEditorTimer),this._canceling||this._resetting||(this._showEditorTimer=setTimeout(function(){r.showEditor(),this._showEditorTimer=null}.bind(this),100))):this._editor.setVisible(!1),t&&this.$_focusToEditor()):this._editor&&(this._editor.editor.value=this._editor._valToStr(n)))))},u.prototype._hideEditor=function(e){if(void 0===e&&(e=!0),this._editor)try{this._editor.setVisible(!1)}finally{this._editor.unprepare(),this._editor.endEdit(),this._editor=null,this._editable=!1,e&&this.$_focusToEditor()}},u.prototype._initEditor=function(e,t,n){this._dirty&&(this._dirty=!1,this._starting||this._prepareEditor(this._editIndex));var r=this._editor;r&&(r.endEdit(),this._resetBounds(),r.setVisible(!0,!0),r.beginEdit(e,t),e&&r.clear(),t&&r.selectAll(),n&&r.dropDownList(!1),this.$_focusToEditor(!0))},u.prototype.$_setEditorAttrs=function(e){var t=this._editor;if(t){for(var n in e)"callback"!=n&&t._editor.setAttribute(n,e[n]);"function"==typeof e.callback&&e.callback()}},u.prototype._editorActivated=function(e){this._grid.editorActivated(e)},u.prototype._activateEditor=function(e,t,n){void 0===n&&(n=!1);var r=this._grid,i=this._editor,s=this._editIndex,o={},u={};return this._editable&&i&&!i.editing&&r.$_canShowEditor(s,o,u)?(o.type&&(i=this._editor=r.delegate.getCellEditor(an.CellEditor.getEditorType(o.type))||i),p.Utils.isEmpty(o)||(i.applyOptions(o),i.setEditIndex(s)),s=i._editor,i.textReadOnly?i.textReadOnly&&s&&(s.readOnly=i.textReadOnly):i.setReadOnly(this._readOnly),this._initEditor(e,t,n),p.getDoc(s).activeElement!==s&&s.focus(),this._modified=!1,this._editorActivated(this._editor),this.$_setEditorAttrs(u),!0):!1},u.prototype._resetBounds=function(){var e,t;this._editor&&(e=this._grid.getEditCellBounds(this._editor,this._editIndex),t=this._grid.getEditBounds(this._editor,this._editIndex).width,e.x--,e.y--,e.width++,e.height++,p.Utils.isMobile()&&(--e.y,e.height+=2),this._editor.setBounds(e.x,e.y,e.width,e.height,t),e=this._grid.getEditCellBounds(this._editor,this._editIndex),this._editor.setCellBounds(e.x,e.y,e.width,e.height),e.x<0&&(this._resetFocused=!0))},u.prototype.$_focusToEditor=function(e,t){var n=this._grid;(e||n.$_editFocused)&&(e=this._editor||this._defaultEditor,n.$_showFocusCell=n.$_showFocusCell||t&&e&&t!==e._editor,n.container._setFocusAndScroll(e),this.editing||this._editor&&this._editor.selectAll())},u.prototype.$_focusToContainer=function(){},u.prototype._getData=function(e){var t=e.dataColumn,e=e.item;if(t&&e&&e.isDataRow){t=t.dataIndex;if(0<=t)return e.getData(t)}},u.prototype._setData=function(e,t){var n,i=e.item;!i||0<=(n=e.dataColumn.dataIndex)&&(this._grid.undoable?this._grid.execute(new r(e.item,n,t,e.column)):i.setData(n,t))},u.prototype._isEditKey=function(e){return 8==e||46<=e&&e<=90||96<=e&&e<=111||186<=e&&e<=222||13==e&&this._grid.editOptions.enterToEdit},u);t.DefaultEditController=o});t(Pn),Pn.EditValueCommand,Pn.DefaultEditController;var Hn=n(function(e,t){function i(e,t,r){return r=n.call(this,e,t,r)||this,r._col=-1,r._colChanged=!1,r}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=nn.VisualObjectElement,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},i.prototype.getCellIndex=function(e){return e.parentElement[c.T_ROW]},i.prototype._createDom=function(){return null},i.prototype._prepareContent=function(e,t){return e=p.getDoc(e).createElement("div"),this._prepareCellContent(e),e},i.prototype._clearCellContent=function(e){e=e.firstElementChild,e&&p.Utils.detach(e)},i.prototype._prepareCellContent=function(e){},i.prototype._updateCellContent=function(e,t,n){n[this._textProp]=t.text},i.prototype._doRender=function(e){},i.prototype.$_setCol=function(e){(this._colChanged=e!=this._col)&&(this._col=e)},i.prototype._layoutCell=function(e,t,n){this._colChanged&&(n.removeAttribute("rowspan"),n.style.removeProperty("display"),n=n.firstElementChild,this._clearCellContent(n),this._prepareCellContent(n))},i.prototype._getTableCell=function(e){return this.parent._tbody.children[e].children[this._col]},i.prototype.$_getCellSelector=function(e,t){var n=this.model.cellStyleCallback,r=this.grid,i=e.parentElement[c.T_ROW],i=r.getItem(i),e=r.getCellType(e);return n?(i=n(this.grid.handler,e,null==i?void 0:i.index),i?" "+i:""):""},i);t.RowBarElement=r});t(Hn),Hn.RowBarElement;var Bn=n(function(e,t){function i(e,t){return n.call(this,e,t,"rowIndicatorView")||this}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Hn.RowBarElement,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},i.prototype.refresh=function(e,t){for(var n=0;n<t;n++){var r=this._getTableCell(n);r[c.T_FOC]=e.isFocusedRow(r.parentElement[c.T_ROW]),p.Utils.setClassName(r,this.$_getCellSelector(r))}},i.prototype._getCssSelector=function(){return"rg-rowindicator"},i.prototype.measureWidth=function(e){var t,n=this.model,r=n.width;return 0==r&&e.dataSource&&(t=e.dataSource.rowCount+"",r=e.container.measureText("rg-rowindicator-cell",t)+1),r=Math.max(0<n.minWidth?n.minWidth:r,Math.min(0<n.maxWidth?n.maxWidth:r)),n._displayWidth=r},i.prototype._layoutCell=function(e,t,r){n.prototype._layoutCell.call(this,e,t,r),t=this.model.getCell(t),p.Utils.setClassName(r,this.$_getCellSelector(r)),this._updateCellContent(e,t,r.firstElementChild)},i.prototype.$_getCellSelector=function(e,t){var r=this.grid,i=e.parentElement[c.T_ROW],s=e[c.T_FOC],o=this.model,u="rg-rowindicator-cell";return-99===i?Qt.FixedOptions.ROW_BAR_CELL_STYLE:(s?(u+=o.showFocus?" rg-rowindicator-focus":"",s=r.getItem(i),p.Utils.isDebugging(),s=s&&s.itemState,dt.ItemState_isInserting(s)?u+=" rg-rowindicator-inserting":s==dt.ItemState.UPDATING&&(u+=" rg-rowindicator-editing")):r.isSelectedItem(i)&&o.showSelection&&(u+=" rg-rowindicator-select"),u+=n.prototype.$_getCellSelector.call(this,e,t))},i);t.RowIndicatorElement=r});t(Bn),Bn.RowIndicatorElement;var jn=n(function(e,t){function i(e,t){return t=n.call(this,e,t,"stateBarView")||this,t._textMark=!1,t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Hn.RowBarElement,l.__extends(i,n),i.prototype.rowOf=function(e){return e.parentElement[c.T_ROW]},i.prototype._getCssSelector=function(){return"rg-statebar"},i.prototype.measureWidth=function(e){return e.stateBar.width},i.prototype._layoutCell=function(e,t,r){n.prototype._layoutCell.call(this,e,t,r);var i=this.model,s=i.mark,o=s==Xt.StateMark.IMAGE;this._textMark=s==Xt.StateMark.TEXT,t=i.getCell(t),p.Utils.setClassName(r,this.$_getCellSelector(r,o)),this._updateCellContent(e,t,r.firstElementChild)},i.prototype._updateCellContent=function(e,t,n){n[p.Utils.TextProp]=this._textMark&&t.text||""},i.prototype.$_getCellSelector=function(e,t){var r=this.grid,i=r.getItem(e.parentElement[c.T_ROW]),s=i.dataRow,o="rg-statebar-cell ";if(r.isItemEditing(i)&&this._error&&this.model.errorVisible)switch(this._error.level){case c.ValidationLevel.INFO:o+=" rg-statebar-info";break;case c.ValidationLevel.WARNING:o+=" rg-statebar-warning";break;case c.ValidationLevel.ERROR:o+=" rg-statebar-error"}else if(0<=s&&t)switch(i.rowState){case d.RowState.UPDATED:o+=" rg-statebar-updated";break;case d.RowState.CREATED:o+=" rg-statebar-created";break;case d.RowState.DELETED:o+=" rg-statebar-deleted";break;case d.RowState.CREATE_AND_DELETED:o+=" rg-statebar-create-and-deleted"}return o+=n.prototype.$_getCellSelector.call(this,e,t)},i);t.StateBarElement=r});t(jn),jn.StateBarElement;var Fn=n(function(e,t){function i(e,t){return t=n.call(this,e,t,"checkBarView")||this,t._fixedCount=0,t._prevChecked=-1,t._exclusive=!1,t._typeChanged=!1,t._useImage=!1,t._imageChanged=!1,t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Hn.RowBarElement,l.__extends(i,n),i.prototype.rowOf=function(e){return e.parentElement[c.T_ROW]},i.prototype._getCssSelector=function(){return"rg-checkbar"},i.prototype._doPrepareContent=function(e){e=e.grid.checkBar,(this._typeChanged=e.exclusive!==this._exclusive)&&(this._exclusive=e.exclusive),(this._imageChanged=e.useImages!==this._useImage)&&(this._useImage=e.useImages)},i.prototype._clearCellContent=function(e){e[this._textProp]="",n.prototype._clearCellContent.call(this,e)},i.prototype._prepareCellContent=function(e){var t=p.getDoc(e),n=t.createElement("input"),r=n.style;n.type=this._exclusive?"radio":"checkbox",n.tabIndex=-1,n.className=this._exclusive?"rg-radio":"rg-checkbox",r.display=this._useImage?"none":"inline-block",e.appendChild(n),t=t.createElement("span"),(r=t.style).display=this._useImage?"inline-block":"none",e.appendChild(t)},i.prototype.measureWidth=function(e){return this.model.width},i.prototype._layoutCell=function(e,t,r){n.prototype._layoutCell.call(this,e,t,r);var i=this.model.getCell(t);p.Utils.setClassName(r,this.$_getCellSelector(r)),r.style.display="",r.removeAttribute("rowspan");var s=e.fixedOptions.rowCount,o=e.checkBar;o._merged&&(o=o._merges,t=(t=t.itemIndex)<s?t:t-e.layoutManager.topIndex,o.isMerged(t,s)?o.isHidden(t,s)?(r.style.display="none",r.removeAttribute("rowspan")):(s=o.getMerged(t,s),r.rowSpan=s):r.removeAttribute("rowspan")),this._updateCellContent(e,i,r.firstElementChild.firstElementChild)},i.prototype._updateCellContent=function(e,t,n){t=t.item,e=e.checkBar,n.checked=t&&t.checked,n.disabled=t&&!t.checkable,n.style.visibility=t instanceof dt.GridRow||t instanceof Ot.TreeItem||e.showGroup&&e.fieldIndex<0&&!e.merged?"visible":"hidden",t=this._useImage,this._typeChanged&&(n.setAttribute("type",this._exclusive?"radio":"checkbox"),n.className=this._exclusive?"rg-radio":"rg-checkbox"),e=n.nextElementSibling,this._imageChanged&&e&&(n.style.display=t?"none":"inline-block",e.style.display=t?"inline-block":"none"),t&&e&&(t=n.checked?this._exclusive?"rg-checkbar-radio-checked":"rg-checkbar-checked":this._exclusive?"rg-checkbar-radio-unchecked":"rg-checkbar-unchecked",t+=n.disabled?" disabled":"",e.className=t)},i.prototype.getCheckBox=function(e){return e.firstElementChild.firstElementChild},i.prototype.$_getCellSelector=function(e,t){var r=i.CELL_CSS,s=e.parentElement[c.T_ROW],s=this.grid.getItem(s);return r+=s&&s.checkable?"":" rg-checkbar-disabled",r+=n.prototype.$_getCellSelector.call(this,e,t)},i.prototype.$_setPrevChecked=function(e){this._prevChecked=e},i.CELL_CSS="rg-checkbar-cell",i);t.CheckBarElement=r});t(Fn),Fn.CheckBarElement;var In=n(function(e,t){function i(e){var t=n.call(this,e.doc,null,"rowBarContainer")||this;t._count=0;var r=e.doc;return t._bars=[e.rowIndicator,e.stateBar,e.checkBar],t.addChild(t._indicatorView=new Bn.RowIndicatorElement(r,e.rowIndicator)),t.addChild(t._stateView=new jn.StateBarElement(r,e.stateBar)),t.addChild(t._checkView=new Fn.CheckBarElement(r,e.checkBar)),t._views=[t._indicatorView,t._stateView,t._checkView],t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=rn.DataTableElement,l.__extends(i,n),i.prototype._doDispose=function(){this._bars=this._views=null,n.prototype._doDispose.call(this)},_dp(i,"rowIndicator",{get:function(){return this._indicatorView}}),_dp(i,"stateBar",{get:function(){return this._stateView}}),_dp(i,"checkBar",{get:function(){return this._checkView}}),_dp(i,"stateError",{get:function(){return this._stateView._error},set:function(e){this._stateView._error=e}}),i.prototype.getCellIndex=function(e){return e.parentElement[c.T_ROW]},i.prototype.refresh=function(e){this._indicatorView.visible&&this._indicatorView.refresh(e,this._count)},i.prototype.rowOf=function(e){return e.parentElement[c.T_ROW]},i.prototype.getCheckBox=function(e){return this._checkView.getCheckBox(e)},i.prototype.getCellType=function(e){return e=this._views[e.cellIndex],e instanceof Bn.RowIndicatorElement?"indicator":e instanceof jn.StateBarElement?"state":e instanceof Fn.CheckBarElement?"check":void 0},i.prototype.isRowIndicator=function(e){return this._views[e.cellIndex]instanceof Bn.RowIndicatorElement},i.prototype._getCssSelector=function(){return"rg-rowbarcontainer"},i.prototype._isFixedHeight=function(){return!0},i.prototype._doPrepareContent=function(e){for(var t=0,r=this._views;t<r.length;t++)r[t]._doPrepareContent(e);n.prototype._doPrepareContent.call(this,e)},i.prototype._prepareCellContent=function(e,t){return this._views[t]._prepareContent(e,t)},i.prototype._getTableRowHeight=function(e,t){var n=e.fixedItemCount;return 0<n&&n<t?e.getTableItemHeight(t-1):e.getTableItemHeight(t)},i.prototype._doMeasure=function(e,t,n){this.$_prepareBars(e);for(var r=0,i=0,s=this._views;i<s.length;i++){var o=s[i];r+=o.width=o.measureWidth(e)}return new tn.Size(r,n)},i.prototype._doLayoutContent=function(e){for(var t=e.grid,n=e.topIndex,r=e.itemCount,i=e.fixedItemCount,s=this._count=i+r,o=this._bars.length,u=t.focusedRow,a=this._views,f=0;f<s;f++){var l=f<i?f:f+n,h=It.CellIndex.temp(t,l),d=this._getTableRow(e,f);p.Utils.setClassName(d,this.getStyleName(h.item)),d[c.T_ROW]=l;for(var v=0;v<o;v++){var m=d.cells[v];m[c.T_FOC]=l==u,a[v]._layoutCell(t,h,m)}}0<i&&this._layoutFixedBar(t.fixedOptions,i)},i.prototype._doUpdateCellContent=function(e,t,n){n[this._textProp]=t.text},i.prototype._doRender=function(e){},i.prototype._getCellCount=function(e){return this._bars.length},i.prototype._getCellWidth=function(e,t){return this._views[t].width},i.prototype.$_prepareBars=function(e){var t=this._bars=[],n=this._views=[];e.rowIndicator.visible&&t.push(e.rowIndicator),e.stateBar.visible&&t.push(e.stateBar),e.checkBar.visible&&t.push(e.checkBar),1<t.length&&t.sort(function(e,t){var n=e.displayOrder,r=t.displayOrder;return n==r?e.staticOrder-t.staticOrder:n-r});for(var r=0,i=t.length;r<i;r++){var s=t[r],o=void 0;(o=s instanceof Xt.RowIndicator?this._indicatorView:s instanceof Vt.StateBar?this._stateView:this._checkView).$_setCol(r),o._colChanged=o._colChanged||s.visChanged,n.push(o),s.visChanged=!1}this._indicatorView.visible=0<=n.indexOf(this._indicatorView),this._stateView.visible=0<=n.indexOf(this._stateView),this._checkView.visible=0<=n.indexOf(this._checkView)},i.prototype._layoutFixedBar=function(e,t){var n=this._tbody.children[t];n[c.T_IDX]=t,n[c.T_ROW]=-99,p.Utils.setClassName(n,Qt.FixedOptions.ROW_BAR_STYLE);for(var r=0;r<n.childElementCount;r++){var i=n.children[r];i[c.T_FOC]=!1,p.Utils.setClassName(i,Qt.FixedOptions.ROW_BAR_CELL_STYLE)}},i.prototype.getStyleName=function(e){var t=i.ROW_STYLE;return(t+=Jt.GridBody.STATE_ROW_STYLES[e.rowState]||"").trim()},i.ROW_STYLE="rg-row-bar",i);t.RowBarContainer=r});t(In),In.RowBarContainer;var qn=n(function(e,t){function r(){}function o(e,t){return e=i.call(this,e,"focusView")||this,e._editing=!1,e._focusType="layer",e._buttonWidth=0,e._isLeftImageButton=!1,e._inner=t,e}function f(e,t){void 0===t&&(t=!1);var n=u.call(this,e,"focusMask")||this;return n._focusType="layer",n._focusView=new s(e,t),n.addChild(n._focusView),n}function m(e){return e=d.call(this,e,"rowBlockView")||this,e.visible=!1,e}function b(e){return g.call(this,e,"headerCellResizer")||this}function S(e){return e=w.call(this,e,"headerCellFeedback")||this,e._modelChanged=!1,e.dragging=!1,e}function N(e){return x.call(this,e,"headerCellMover")||this}function L(e){return C.call(this,e,"rowMoverLine")||this}function M(e){return e=A.call(this,e,"rowMover")||this,e._enabled=!0,e._label="1\ud589 \uc774\ub3d9",e}function P(e,t){var n=_.call(this,e,t)||this;return n._rowBlockStart=-1,n._rowBlockEnd=-1,t=e.doc,e=n._grid=e.gridView,n._skipIndex=e.getIndex(),n._tempIndex=e.getIndex(),n._tempInnerIndex=e.getIndex(),e.addFeedbackElement(n._rowBlockMask=new v(t)),e.addFeedbackElement(n._rowFocusView=new I(t)),e.addFeedbackElement(n._focusMask=new a(t)),e.addFeedbackElement(n._innerFocusMask=new a(t,!0)),n}function j(e){return e=H.call(this,e,"rowHoverView")||this,e.visible=!1,e}function q(e){return e=F.call(this,e,"rowFocusView")||this,e.visible=!1,e}function U(e,t){var n=R.call(this,e,t)||this;n._tooltipOptions=new Mn.TooltipOptions,n._checkScroll=Date.now(),n._prevScroll=Date.now(),n._tempRect=new h.Rectangle,n._reqPoint=new Gt.Point,n._swipeTimer=null,n._swipeDistance=0,n._swipeDuration=0,n._swipeStarted=null,n._swipePrev=void 0,n._swipeAmount=0,n._tapX=NaN,n._tapY=NaN;var r=e.doc,t=n.grid;return n._cellResizer=new y(r),n._cellMover=new T(r),n._cellFeedback=new E(r),n._rowMoverLine=new k(r),n._rowMoverProxy=new O(r),n._colResizeReq=new Ln.ColumnResizeRequest(t),n._colMoveReq=new Ln.ColumnMoveRequest(t),n._rowResizeReq=new Ln.RowResizeRequest(t),n._headerResizeReq=new Ln.HeaderResizeRequest(t),n._rowMoveReq=new Ln.RowMoveRequest(t),n._tooltipIndex=new It.CellIndex(t),n._touchManager=n.$_createTouchManager(e),n}Object.defineProperty(t,"__esModule",{value:!0});var n=(r.getData=function(e){var t=new r;return t.cellType=e,t},r.getSub=function(e,t){var n=new r;return n.cellType=e,n.subType=t,n},r.getField=function(e,t,n){var i=new r;return i.cellType=e,i.field=i.fieldIndex=t,i.fieldName=n,i},r.getItem=function(e,t,n){var i=new r;return i.cellType=e,i.itemIndex=t,null!=n&&(i.dataRow=n),i},r.getLayout=function(e,t){var n=new r;return n.cellType=e,t instanceof Ft.CellLayoutGroupItem?(n.subType="layoutHeader",n.column=t.name):(n.column=t.firstColumn&&t.firstColumn.name,t.firstColumn instanceof jt.DataColumn&&(n.field=n.fieldIndex=t.firstColumn.dataIndex,n.fieldName=t.firstColumn.fieldName)),n},r.getCell=function(e,t){var n=new r;"data"===e&&(n.editable=t.editable,n.readOnly=t.readonly);var i=t.layout;return n.cellType=e,n.itemIndex=t.item.index,n.dataRow=t.item.dataRow,n.column=t.layout.firstColumn&&t.layout.firstColumn.name,i.firstColumn instanceof jt.DataColumn&&(n.field=n.fieldIndex=i.firstColumn.dataIndex,n.fieldName=i.firstColumn.fieldName),n},r.getGroupFooter=function(e,t,n){var i=new r,n=n.firstColumn;return i.cellType=e,i.itemIndex=t,i.index=n&&n.grid&&n.grid.getItem(t).footerIndex,i.column=n&&n.name,n instanceof jt.DataColumn&&(i.field=i.fieldIndex=n.dataIndex,i.fieldName=n.fieldName),i},r.getSummary=function(e,t,n){var i=new r;return i.cellType=e,i.index=t,i.column=n.firstColumn&&n.firstColumn.name,n.firstColumn instanceof jt.DataColumn&&(i.field=i.fieldIndex=n.firstColumn.dataIndex,i.fieldName=n.firstColumn.fieldName),i},r.getGroupElt=function(e,t){var n=new r;return n.cellType=e,n.groupLevel=t,n},r);t.ClickData=n;var i,s=(i=Yt.LayerElement,l.__extends(o,i),_dp(o,"focusType",{get:function(){return this._focusType},set:function(e){e!==this._focusType&&(this._focusType=e,this.$_typeChanged(e))}}),o.prototype.$_createLine=function(e){function t(e,t,n){return e=e.createElement("div"),e.className=t?"rg-focus-inner-line":"rg-focus-line",t=e.style,t.display="none",t.position="absolute",t.boxSizing="border-box",t.left="0px",t.top="0px",1!==n&&(t.borderTop="none"),2!==n&&(t.borderBottom="none"),3!==n&&(t.borderLeft="none"),4!==n&&(t.borderRight="none"),e}var n=p.getDoc(e);e.appendChild(this._topLine=t(n,this._inner,1)),e.appendChild(this._bottomLine=t(n,this._inner,2)),e.appendChild(this._leftLine=t(n,this._inner,3)),e.appendChild(this._rightLine=t(n,this._inner,4))},o.prototype.$_typeChanged=function(e){var t=this._dom.style;this._topLine||this.$_createLine(this._dom),"line"===e?(t.height="0px",t.width="0px",t.border="none",this._topLine.style.display=this._bottomLine.style.display=this._leftLine.style.display=this._rightLine.style.display="block",this.invalidate()):(t.removeProperty("border"),this._topLine.style.display=this._bottomLine.style.display=this._leftLine.style.display=this._rightLine.style.display="none")},o.prototype.$_linePosition=function(e,t,n,r){var i=this._topLine.style,s=this._bottomLine.style,o=this._leftLine.style,u=this._rightLine.style,a=this.parent.width,f=this.parent.height;s.left=i.left=-e+"px",s.width=i.width=a+e+"px",s.top=r-2+"px",u.height=o.height=f+"px",u.left=n-2+"px",s.display=f<r?"none":"block",o.display=e<0?"none":"block",u.display=a<n?"none":"block"},o.prototype.setEditing=function(e,t,n){e!=this._editing&&(this._editing=e,this._buttonWidth=t,this._isLeftImageButton=n,this.resetStyleName())},o.prototype._getCssSelector=function(){return this._inner?"rg-focus-inner":this._editing?"rg-focus-editing":"rg-focus"},o.prototype.setBounds=function(e,t,n,r){var s;"line"===this._focusType?((s=this._dom.style).left=e+"px",s.top=t+"px",this.width=n,this.height=r,this.$_linePosition(e,t,n,r)):(this.x++,i.prototype.setBounds.call(this,e,t,n,r))},o.prototype._initDom=function(e){i.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},o.prototype._beforeDraw=function(e){var t;"line"===this._focusType?(this._setClassName(e),(t=e.style).left=this.x+"px",t.top=this.y+"px"):i.prototype._beforeDraw.call(this,e)},o);t.FocusView=s;var u,a=(u=Yt.LayerElement,l.__extends(f,u),f.prototype._doDispose=function(){this._focusView&&this._focusView.dispose(),this._focusView=null,u.prototype._doDispose.call(this)},_dp(f,"focusType",{get:function(){return this._focusType},set:function(e){e!==this._focusType&&(this._focusType=e,this._focusView.focusType=e,this.$_typeChanged(e))}}),f.prototype.$_typeChanged=function(e){var t=this._dom.style;"line"===e?(t.removeProperty("overflow"),t.width="0px",t.height="0px"):(t.overflow="hidden",t.width=this.width+"px",t.height=this.height+"px")},f.prototype.updateElement=function(e,t,n,r,i){this._focusView.setBounds(e,t,n,r),this._focusView.setEditing(i,0,!1)},f.prototype._getCssSelector=function(){return"rg-focus-mask"},f.prototype._initDom=function(e){u.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none"),this.setImportantStyle("background","none"),this.setImportantStyle("border","none"),this.setImportantStyle("overflow","hidden")},f.prototype._beforeDraw=function(e){var t;"line"===this._focusType?(this._setClassName(e),(t=e.style).left=this.x+"px",t.top=this.y+"px"):u.prototype._beforeDraw.call(this,e)},f.prototype.setRect=function(e){"line"===this._focusType?e.x==this.x&&e.y==this.y&&e.width==this.width&&e.height==this.height||(this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height):u.prototype.setRect.call(this,e)},f);t.FocusMask=a;var d,v=(d=Yt.LayerElement,l.__extends(m,d),m.prototype._doDispose=function(){d.prototype._doDispose.call(this)},m.prototype._getCssSelector=function(){return"rg-rowblock"},m.prototype._initDom=function(e){d.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},m);t.RowBlockView=v;var g,y=(g=Yt.LayerElement,l.__extends(b,g),b.prototype._getCssSelector=function(){return"_rg-col-resizer_"},b.prototype._initDom=function(e){g.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},b);t.HeaderCellResizer=y;var w,E=(w=Yt.LayerElement,l.__extends(S,w),S.prototype._doDispose=function(){this._model=null,w.prototype._doDispose.call(this)},_dp(S,"model",{set:function(e){this._model=e,this._modelChanged=!0}}),S.prototype._createDom=function(e){var t=e.createElement("table");t.style.setProperty("table-layout","fixed","important");var n=e.createElement("tbody");t.appendChild(n);var r=e.createElement("tr");return n.appendChild(r),e=this._cell=e.createElement("td"),r.appendChild(e),e.className="rg-header rg-header-cell _rg-header-cell-feedback_",t},S.prototype._getCssSelector=function(){return"rg-table"},S.prototype._doDraw=function(e){this.dragging&&!this._modelChanged||(ln.HeaderElement.renderCell(this._model,this._cell),this._modelChanged=!1)},S);t.HeaderCellFeedback=E;var x,T=(x=Yt.LayerElement,l.__extends(N,x),N.prototype._getCssSelector=function(){return"_rg-header-cell-mover_"},N.prototype._initDom=function(e){x.prototype._initDom.call(this,e)},N.prototype._doDraw=function(e){},N);t.HeaderCellMover=T;var C,k=(C=Yt.LayerElement,l.__extends(L,C),L.prototype._getCssSelector=function(){return"_rg-row-mover-line_"},L.prototype._initDom=function(e){C.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},L);t.RowMoverLine=k;var A,O=(A=Yt.LayerElement,l.__extends(M,A),M.prototype.setEnabled=function(e){if(e!=this._enabled)return this._enabled=e,this.invalidate(),!0},M.prototype.setLabel=function(e){if(e!=this._label)return this._label=e,this.invalidate(),!0},M.prototype.setZIndex=function(e){this._dom.style.zIndex=String(e)},M.prototype._getCssSelector=function(){var e="_rg-row-mover-proxy_";return this._enabled||(e+=" _rg-row-mover-proxy-disabled_"),e},M.prototype._initDom=function(e){A.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none"),e.style.whiteSpace="nowrap"},M.prototype._setSizeStyle=function(e){},M.prototype._doDraw=function(e){e[p.Utils.TextProp]=this._label},M);t.RowMoverProxy=O;var _,D=(_=mn.VisualTool,l.__extends(P,_),P.prototype._doDispose=function(){this._skipIndex&&this._skipIndex.dispose(),this._skipIndex=null,this._tempInnerIndex=this._tempInnerIndex.dispose(),this._focusMask=this._focusMask.dispose(),this._innerFocusMask=this._innerFocusMask.dispose(),this._rowFocusView&&this._rowFocusView.dispose(),this._rowFocusView=null,this._rowBlockMask&&this._rowBlockMask.dispose(),this._rowBlockMask=null,this._grid=null,_.prototype._doDispose.call(this)},_dp(P,"grid",{get:function(){return this._grid}}),_dp(P,"focused",{get:function(){return this._grid.focusedIndex}}),P.prototype.setFocused=function(e,t){var n=this._grid;if(n.isValid(e)){var r=n.getItem(e.itemIndex);return!n.isEditing()&&r instanceof mt.DummyEditItem&&n.append(),this._grid.setFocusedIndex(e,t,!0)}return!1},P.prototype.layoutChanged=function(){this.$_resetFocusView(),this.$_resetRowBlockMask(),this._doLayoutChanged()},P.prototype.resetFocused=function(){this.$_resetFocusView()},P.prototype.focusedIndexChanging=function(e){},P.prototype.focusedIndexChanged=function(e,t){var n=this.grid,r=n.layoutManager,i=r.fixedItemCount,s=t.itemIndex;this.grid.setFocusedClass(e,!1),e.itemIndex!==t.itemIndex&&this.grid.setFocusedRowClass(e,!1),(!this.grid.isValid(t)||0<i&&s<i||s>=r.topIndex+i&&s<=i+r.topIndex+r.fullItemCount)&&this.$_resetFocusView(),!n.isEditing()&&t.item instanceof mt.DummyEditItem&&n.append()},P.prototype.currentRowChanged=function(e,t){var n,r=this.grid,i=r.displayOptions;this._rowBlockStart=-1,this._rowBlockEnd=-1,i.rowBlockType==c.RowMaskType.NONE||(n=i.rowBlockCallback)&&(i=null,(i=n(r.handler,r.getItemIndexOfRow(t)))?(this._rowBlockStart=i.start,this._rowBlockEnd=i.end):this._rowBlockStart=this._rowBlockEnd=-1),this.$_resetRowBlockMask()},P.prototype.getNextRequest=function(e,t,n,r){return null},P.prototype.isMouseEventTarget=function(e){if(e instanceof sn.CellElement){var t=e.getAncestor(rn.TableBaseElement);if(t)return t.getContentAt(e.index)==this.mouseEventTarget}return _.prototype.isMouseEventTarget.call(this,e)},P.prototype._doSetFocus=function(e){this.grid.setFocus(e)},P.prototype._doFocusLeave=function(e){if(this.grid.editOptions.commitWhenLeave&&this.grid.isEditing()){for(var t=e.target;t;){if(0<=(t.className||"").indexOf("rg-"))return;t=t.parentElement}this.grid.commit(!1,void 0,!1)}},P.prototype._doLayoutChanged=function(){},P.prototype.$_resetFocusView=function(){var e,t,n,r,i,s,o,u,a,f,l=this._grid,h=l.layoutManager,p=l.displayOptions,d=l.focusedIndex,v=this._tempInnerIndex.assign(d),m=!1,g=!1,y=!1;p.focusVisible&&l.isValid(v)&&!l.isEditing()&&(b=v.item,(o=i=(e=l.getBodyViewAt(v)).getCellAt(h,v))||!v.layout.merged||(r=h.getMergeRoom(v))&&(v.itemIndex=h.fixedItemCount+h.topIndex,(i=r.contains(v)?e.getCellAt(h,v):i)||(v.itemIndex=h.fixedItemCount+h.topIndex+h.itemCount-1,r.contains(v)&&(i=e.getCellAt(h,v)))),i&&!i.grouped?(t=l.isEditing(),w=e.getCellRectAt(h,v,!0),0<(w=e.boundsByContainer(w)).width&&0<w.height&&(n=0,r=w.width,v.colFixed||v.rightFixed||(s=h.fixedContentBounds,n=Math.max(0,s.right-w.x),r=Math.max(0,w.width-n),s=h.rightContentBounds,r-=w.right-s.x),0<r&&(t&&(w.y--,w.height+=1),i=w.clone(),(s=h.footerBounds.clone()).y+=h.contentBounds.y,Math.max(0,w.bottom-s.y),w.width=Math.min(w.width,r),w.x+=n,w.bottom=Math.min(w.bottom,s.y),this._focusMask.setRect(w),this._focusMask.focusType=p.focusType,this._focusMask.updateElement(-n,0,i.width,i.height,t),m=!0,o&&o.merged?p.showInnerFocus&&(u=e.getCellRectAt(h,v,!1)).height<w.height&&(this._innerFocusMask.focusType=p.focusType,u.height=Math.min(u.height,w.height),a=(u=e.boundsByContainer(u)).width-8,f=u.height-8,u.bottom=Math.min(w.bottom+4,u.bottom),this._innerFocusMask.setRect(u.inflate(-4,-4,-4,-4)),this._innerFocusMask.updateElement(0,0,a,f,t),y=!0):(o=e.getCellAt(h,v))&&o.renderer2&&o.editable&&o.renderer2.canShowInnerFocus()&&(u=e.getCellRectAt(h,v,!1),a=(u=e.boundsByContainer(u)).width-8,f=u.height-8,u.bottom=Math.min(w.bottom+4,u.bottom),this._innerFocusMask.setRect(u.inflate(-4,-4,-4,-4)),this._innerFocusMask.updateElement(0,0,a,f,t),y=!0)))):b.isData||(E=l.getRowView(e,b))&&(w=E.boundsByContainer(),this._focusMask.updateElement(0,0,w.width,w.height,!1),w.x<h.leftContentBounds.right&&(w.x=h.leftContentBounds.right,w.width-=h.leftContentBounds.right-w.x),this._focusMask.setRect(w),m=!0));var b=p.rowFocusType;if(b!=c.RowMaskType.NONE){var w,E=h.footerBounds.y+h.contentBounds.y,p=h.fixedItemCount,v=v.itemIndex;if(0<=(v=p<=v?v-h.topIndex:v)&&v<=h.itemCount-1){switch((w=h.getTableItemBounds(v)).y+=h.contentBounds.y+h.bodyBounds.y,w.bottom>E&&(w.bottom=E),b){case c.RowMaskType.DATA:w.x=l.fixedContentPane.x,w.right=(l.rightContentPane.width?l.rightContentPane:l.contentPane).right;break;case c.RowMaskType.FILL:w.x=0,w.width=l.width;break;case c.RowMaskType.ROW:w.x=0,w.right=(l.rightContentPane.width?l.rightContentPane:l.contentPane).right}this._rowFocusView.setRect(w),g=!0}else g=!1}this._rowFocusView.visible=g,this._focusMask.visible=m,this._innerFocusMask.visible=y,this._focusMask.visible,l.setFocusedClass(d,!0),l.setFocusedRowClass(d,!0)},P.prototype.$_resetRowBlockMask=function(){var e=this.grid,t=e.layoutManager,n=t.fixedItemCount,r=e.topItem,i=this._rowBlockMask,s=e.displayOptions.rowBlockType,o=this._rowBlockStart,u=this._rowBlockEnd,a=Math.max(o-r+n,n),n=Math.min(Math.max(u-r+n),t.itemCount+n-1);if(i.visible=s&&s!=c.RowMaskType.NONE&&0<=a&&0<=n&&a<t.itemCount&&a<=n&&o!==u,i.visible){var u=t.footerBounds.y+t.contentBounds.y,f=t.getTableItemBounds(a),n=t.getTableItemBounds(n);switch((f=f.union(n)).y+=t.contentBounds.y+t.bodyBounds.y,f.bottom>u&&(f.bottom=u),s){case c.RowMaskType.DATA:f.x=e.fixedContentPane.x,f.right=(e.rightContentPane.width?e.rightContentPane:e.contentPane).right;break;case c.RowMaskType.FILL:f.x=0,f.width=e.width;break;case c.RowMaskType.ROW:f.x=0,f.right=(e.rightContentPane.width?e.rightContentPane:e.contentPane).right}i.setRect(f)}},P.prototype._doCancel=function(e){if(e.closeFilterSelector(),e.isEditing())e.cancelEditor(!0);else if(e.isItemEditing())e.itemEditCancel()&&e.cancel();else if(this.dragging&&this.dragTracker)try{this._stopDragTracker(null,null,!0),this.dragTracker.cancel(),this.dragTracker.linkable&&e.container.cancelOtherContainer(this.dragTracker)}catch(e){throw e}finally{this.dragTracker=null}},P.prototype._doEnter=function(e,t,n){var r=e.isEditing();if(r&&!t.enterToTab)e.commitEditor(!0);else{var i=n.clone(),s=t.skipReadOnly,o=t.skipReadOnlyCell;if(e.isValid(i))if(t.enterToNextRow&&i.itemIndex<e.itemCount-1)i.down(),o&&this._checkReadOnly(i)&&(this._skipReadOnlyCell(i,1)||i.assign(n));else if((!t.enterToEdit||r)&&t.enterToTab&&t.crossWhenExitLast&&(i.isLast||t.skipReadOnly&&i.isEditableLast)&&i.itemIndex<e.itemCount-1)i.down(),i.home(),s&&this._skipReadOnly(i,1);else if((!r||t.enterToTab)&&t.commitWhenExitLast&&i.isLast){try{e.commit(t.commitWhenNoEdit)}catch(n){throw n instanceof Dt.ValidationError&&(n=e._fireValidationFail(i.item.index,n.column,n))&&alert(t.showOnlyValidationMessage&&n.userMessage?n.userMessage:n.toString()),n}t.appendWhenExitLast&&(e.append(),e.isItemEditing()&&(i.down(),i.home()))}else t.enterToTab&&(e.isEditing()||this._checkReadOnly(i))?(e.isEditing()&&e.commitEditor(!0),i.next(),this._getNextVisible(e,i),s&&!this._skipReadOnly(i,1)&&i.assign(n)):t.enterToEdit||(i.next(),this._getNextVisible(e,i),s&&!this._skipReadOnly(i,1)&&i.assign(n));else i.normalize(e);It.CellIndex.areEquals(i,n)?e.isValid(i)&&t.enterToEdit&&!r&&!e.isEditing()&&n&&n.dataColumn&&!this._checkReadOnly(n)&&e.showEditor(n):this.setFocused(i,!0)}return!0},P.prototype._doTab=function(e,t,n,r,i,s){var o=n.clone(),u=!1;if(e.isValid(o)){if(t.useTabKey){var a=t.exitGridWhenTab;if(i){if(t.crossWhenExitLast&&(o.isFirst||t.skipReadOnly&&o.isEditableFirst)&&0<o.itemIndex?(o.up(),o.end()):(o.prev(),this._getPrevVisible(e,o)),t.skipReadOnly&&!this._skipReadOnly(o,-1)&&o.assign(n),It.CellIndex.areEquals(o,n)&&a){switch(a){case"row":u=!0;break;case"grid":u=o.itemIndex<=0}if(u)return p.Utils.isMobile()||e.container._containerDom.setAttribute("tabindex","-1"),!1}}else{if(t.crossWhenExitLast&&(o.isLast||t.skipReadOnly&&o.isEditableLast)&&o.itemIndex<e.itemCount-1)o.down(null,t.skipReadOnly&&o.isEditableLast&&t.crossWhenExitLast),o.home();else if(t.commitWhenExitLast&&o.isLast){try{e.commit(t.commitWhenNoEdit)}catch(n){throw n instanceof Dt.ValidationError&&(n=e._fireValidationFail(o.itemIndex,n.column,n))&&alert(t.showOnlyValidationMessage&&n.userMessage?n.userMessage:n.toString()),n}t.appendWhenExitLast&&(e.append(),e.isItemEditing()&&(o.down(),o.home()))}else o.next(),this._getNextVisible(e,o);if(t.skipReadOnly&&!this._skipReadOnly(o,1)&&o.assign(n),It.CellIndex.areEquals(o,n)&&a){switch(a){case"row":u=!0;break;case"grid":u=o.itemIndex>=e.itemCount-1}if(u)return!1}}return It.CellIndex.areEquals(o,n)||this.setFocused(o,!0),(p.Utils.isMobile()||e.handler._draggable)&&s&&s.preventDefault&&s.preventDefault(),!0}}else o.normalize(e),this._skipReadOnly(o,1);return i&&!p.Utils.isMobile()&&e.container._containerDom.setAttribute("tabindex","-1"),!1},P.prototype._getNextVisible=function(e,t){e.getBodyViewAt(t).getNextVisibleCell(t)},P.prototype._getPrevVisible=function(e,t){e.getBodyViewAt(t).getPrevVisibleCell(t)},P.prototype._checkReadOnly=function(e){var t=this.grid;return t.isValid(e)?(t=t.getWritableAt(e),null!=t?!t:!e.dataColumn.isWritable()):!0},P.prototype._skipReadOnly=function(e,t){var n=!1;if(this.grid.editOptions.skipReadOnly){var r=this._skipIndex;if(r.assign(e),!(n=!this._checkReadOnly(r)))if(0<t){for(;r.next();)if(!this._checkReadOnly(r)){e.assign(r),n=!0;break}}else for(;r.prev();)if(!this._checkReadOnly(r)){e.assign(r),n=!0;break}}return n},P.prototype._skipReadOnlyCell=function(e,t,n){var r=this.grid,i=!e.dataColumn.isWritable()&&!0;return!i&&r.editOptions.skipReadOnlyCell&&((r=this._skipIndex).assign(e),i=!this._checkReadOnly(r)),i},P.prototype._commitCancel=function(e,t){var n=this.grid;try{switch(e.itemState){case dt.ItemState.INSERTING:return n.commit(t.forceInsert)||n.cancel(!0),!0;case dt.ItemState.APPENDING:return n.commit(t.forceAppend)||n.cancel(!0),!0;case dt.ItemState.UPDATING:return n.commit(t.commitWhenNoEdit)||n.cancel(!0),!0}}catch(r){if(r instanceof Dt.ValidationError)return(r=n._fireValidationFail(e.index,r.column,r))&&alert(t.showOnlyValidationMessage&&r.userMessage?r.userMessage:r.toString()),!1;if(r instanceof Dt.AbortError)return!1;throw r}return!1},P.prototype._doColumnHeaderClicked=function(e,t){},P.prototype._editButtonClicked=function(e,t){},P);t.GridTool=D;var H,B=(H=Yt.LayerElement,l.__extends(j,H),j.prototype._doDispose=function(){H.prototype._doDispose.call(this)},j.prototype._getCssSelector=function(){return"rg-rowhover"},j.prototype._initDom=function(e){H.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},j);t.RowHoverView=B;var F,I=(F=Yt.LayerElement,l.__extends(q,F),q.prototype._doDispose=function(){F.prototype._doDispose.call(this)},q.prototype._getCssSelector=function(){return"rg-rowfocus"},q.prototype._initDom=function(e){F.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},q);t.RowFocusView=I;var R,D=(R=D,l.__extends(U,R),U.prototype._doDispose=function(){this._clickCell=null,this._clickElement=null,this._cellResizer=this._cellResizer.dispose(),this._cellMover=this._cellMover.dispose(),this._cellFeedback=this._cellFeedback.dispose(),this._rowMoverLine=this._rowMoverLine.dispose(),this._rowMoverProxy=this._rowMoverProxy.dispose(),this._colResizeReq=this._colResizeReq.dispose(),this._colMoveReq=this._colMoveReq.dispose(),this._rowMoveReq=this._rowMoveReq.dispose(),this._rowResizeReq=this._rowResizeReq.dispose(),this._headerResizeReq=this._headerResizeReq.dispose(),this._touchManager=this._touchManager&&this._touchManager.dispose(),R.prototype._doDispose.call(this)},U.prototype._doDeactivated=function(){this._clickCell=this._clickElement=null},U.prototype._doDragTrackerFinished=function(e,t){e.clickable||(this._clickCell=this._clickElement=null)},U.prototype.$_getIndexAt=function(e,t,n,r,i){return e=e.getDataCellIndex(r,this._tempIndex),r=n.getCellAt(t,e),r&&r.merged&&(i=t.getTableRowIndex(i),i=n.getRowIndex(i),e.itemIndex=Math.min(Math.max(r.item.index,i),r.item.index+r.rowSpan-1)),e},U.prototype._doMouseDown=function(e){var t=e.mouseX,n=e.mouseY,r=e.ctrlKey||e.metaKey,i=e.shiftKey,s=e.altKey,o="mousedown"===e.type?e.button:0,u=this.grid,a=u.layoutManager,f=u.editOptions,l=u.focusedIndex.clone();this._hideTooltip(),u.closePopups(),u.setEventFrom("mousedown");var h,p;this._clickCell=null,this._clickElement=null;if(0==o||u.displayOptions.rightClickable){var d=this._tempIndex,v=this.mouseEventTarget,m=0==o&&(this._getEditRequest(v,l,t,n,r,i,s)||this._getSelectRequest(v,t,n,r,i,s));if(!(m instanceof Ln.GridEditRequest)||m.canFocus())if(h=this._clickCell=this._findTableCell(),p=this._clickElement=this.findElementAt(t,n,!1),h){var g=u.getTableView(h),y=g instanceof ln.HeaderElement,l=g instanceof fn.GridBodyElement,v=g instanceof In.RowBarContainer&&g.isRowIndicator(h);if(y||l||v){s=u.getSelection();if(l?d=this.$_getIndexAt(u,a,g,h,n):y?(d.assign(u.focusedIndex),d.layout=g.layoutByCell(h)):(d.assign(u.focusedIndex),d.itemIndex=h.parentElement[c.T_ROW]),y){if(r&&i)s&&this.$_resizeSelection(s,d,Zt.SelectionStyle.COLUMNS);else if(i)return}else{if(i&&s)return y=y?Zt.SelectionStyle.COLUMNS:v?Zt.SelectionStyle.ROWS:null,void this.$_resizeSelection(s,d,y);if(l){if(this.$_checkAppending(u.focusedIndex,!0,d))return this._clickElement=null,void (this._clickCell=null);a=g.getCellAt(a,d),g=g.bodyCellByCell(this._clickCell),g&&a&&0===o&&g.isEditButton(e.target)?this.setFocused(d,!0)&&a.editable&&!a.readonly&&u.editController.buttonDown(d,e):It.CellIndex.areEquals(d,this.focused)&&f.editWhenClickFocused?u.showEditor():this.setFocused(d,!0)}else!v||!u.rowIndicator.selectable||m instanceof Ln.RowResizeRequest||(null==d.column&&d.item.isDataRow&&(d.layout=u.getFirstLayout()),this.setFocused(d,!0),m instanceof Ln.SelectRequest&&(this.setFocused(d,!0),1===(s=s&&Zt.isRowSelection(s)?s.getRows():[]).length&&s[0]===d.itemIndex||u.selections.selectRow(d.itemIndex)))}}}else p instanceof un.ItemElement&&(d.assign(u.focusedIndex),d.itemIndex=p.itemIndex,this.setFocused(d,!0));!m||u.isItemEditing()&&m.selectable||(this.dragTracker=this._getDragTracker(m,t,n))}u.$_resetHovering(t,n),u=this.dragTracker,u&&u.startWhenCreated&&(u instanceof On.SelectTracker&&e.shiftKey?this._startDragTracker(t,n,i):this._startDragTracker(t,n,!1))},U.prototype.$_checkOtherGridRowMoving=function(e,t){var n=this.grid,r=n.container,i=r.getMouseContainer();if(i&&i!==r)if(r.findContainer(e)!==r)n.removeFeedbackElement(this._rowMoverLine);else if(t instanceof An.RowMoveTracker){var s=r.eventToContainer(e),e=r.findElementAt(s.x,s.y,!1);if(0==n.itemCount||e instanceof un.RowElement||e instanceof Hn.RowBarElement||e instanceof In.RowBarContainer)return r=An.RowMoveTracker.updateLineFeedback(n,Number.MAX_VALUE,1,this._rowMoverLine,s.x,s.y,!0),s=n.canMoveRow(!0,!0)&&n.dataDropOptions.getEnabled(i.gridView,t.sourceItems,r),i=n.dataDropOptions.getLabel(i.gridView,t.sourceItems,r),t.setEnabled(s),t.setLabel(i),n.addFeedbackElement(this._rowMoverLine),s?r:-1;e&&t.setEnabled(!1),n.removeFeedbackElement(this._rowMoverLine)}return-1},U.prototype.dragFrom=function(e,t){t instanceof An.RowMoveTracker&&this.$_checkOtherGridRowMoving(e,t)},U.prototype.dropFrom=function(e,t){var n;t instanceof An.RowMoveTracker&&(e=0==(n=this.grid).itemCount?0:this.$_checkOtherGridRowMoving(e,t),n.removeFeedbackElement(this._rowMoverLine),0<=e&&n.$_dropData(t.grid,t.sourceItems,e))},U.prototype.cancelFrom=function(e){var t=this.grid;e instanceof An.RowMoveTracker&&t.removeFeedbackElement(this._rowMoverLine)},U.prototype._doMouseMove=function(e){var t=e.mouseX,n=e.mouseY,r=e.ctrlKey||e.metaKey,i=e.shiftKey,s=e.altKey,o=this.grid,e=o.layoutManager;o.$_resetHovering(t,n)||this._hideTooltip();var u,t=this._getEditRequest(this.mouseEventTarget,o.focusedIndex,t,n,r,i,s);t&&t.cursor?o.setCursor(this.mouseEventTarget,t.cursor):o.setCursor(this.mouseEventTarget,"default"),t||this.dragging||(i=(r=this._findTableCell())&&o.getTableView(r))instanceof fn.GridBodyElement&&(s=i.bodyCellByCell(r))&&s.merged&&(t=s.head||s,n=this.$_getIndexAt(o,e,i,r,n),t.contains(o.focusedIndex)||(!s.buttons||(u=i.getRowView(t.item))instanceof un.RowElement&&u.moveCellButtons(e,t,n.itemIndex),t.renderer2&&t.renderer2.refreshFocusChanged&&(u=i.getCellRectAt(e,n,!1),e=i.getCellRect(e,t,!0),t=t.renderer2,e=u.top-e.top+u.height/2-e.height/2,t.moveClickElement(e,n.itemIndex))))},U.prototype._doMouseUp=function(e){var t=e.mouseX,n=e.mouseY,r=(this.findElementAt(t,n,!1),this._findTableCell()),i=this.grid;i.setEventFrom("mouseup");var s=i.layoutManager;i.setCursor(this.mouseEventTarget,"default"),i.editController.buttonUp(null,e),!i.isValid(i.focusedIndex)||s.focusIsVisible(i.focusedIndex)||this.dragTracker&&!this.dragTracker.scrollable||(s.makeCellVisible(i.focusedIndex),i.invalidateLayout()),r&&r==this._clickCell&&"header"===i.getCellType(r)&&(this._getEditRequest(this.mouseEventTarget,i.focusedIndex,t,n,!1,!1,!1)instanceof Ln.ColumnResizeRequest||(r=i.getHeaderView(r).columnByCell(r))&&this.$_columnHeaderClicked(e,r))},U.prototype._doClick=function(e,t,r){t=t||e.mouseX,r=r||e.mouseY;var i=this.grid;i.setEventFrom(null);var s,o=this.focused,r=this.findElementAt(t,r,!1),u=this._findTableCell();p.getWin(e.target);if(u&&u==this._clickCell){var a,f=i.getCellType(u),l=void 0;switch(f){case"head":this.$_gridCellClicked(s=n.getSub(f,i.headView.getCellType(u))),"check"===s.subType&&(d=i.headView._checkCell,e.target!==d._check&&e.target!==d._image||this._checkAllClicked());break;case"foot":this.$_gridCellClicked(n.getSub(f,i.footView.getCellType(u)));break;case"indicator":case"state":case"check":"check"===f&&this.$_checkCellClicked2(u,e),a=i.rowBarContainer.rowOf(u),l=i.getRowOfItem(a),this.$_gridCellClicked(n.getItem(f,a,l));break;case"header":var h=i.getHeaderView(u),d=i.headerView.tableCellByCell(u);d&&d.isClickableElt(e.target)||this.$_gridCellClicked(n.getLayout(f,h.layoutByCell(u)));break;case"data":var v=i.getBodyView(u).bodyCellByCell(u);if(It.CellIndex.equalsTo(o,v.item.index,v.layout)||v.contains(o))if(v.grouped)this.$_gridCellClicked(n.getItem("groupHeader",v.item.index,null));else{if(v.isCellButton(e.target))return this.$_cellButtonClicked(v),void (i.editOptions.exceptDataClickWhenButton||this.$_gridCellClicked(n.getCell(f,v)));h=i.editController._editor;if(v.isEditButton(e.target)||!v.readonly&&h&&h.dropDownWhenClick)return v.getEditIndex(this._tempIndex),p.Utils.isMobile()&&h.hasList?i.showEditList(this._tempIndex):this._editButtonClicked(this._tempIndex,e),void this.$_gridCellClicked(n.getCell(f,v));h=v.renderer2;if(h&&this.$_performRendererClick(v,e))return void (i.editOptions.exceptDataClickWhenButton&&h.itemClickable||this.$_gridCellClicked(n.getCell(f,v)));this.$_gridCellClicked(n.getCell(f,v))}break;case"footer":v=i.getFooterView(u).tableCellByCell(u),this.$_gridCellClicked(n.getSummary(f,v.summaryIndex,v.layout));break;case"summary":var m=i.getSummaryView(u).tableCellByCell(u);this.$_gridCellClicked(n.getSummary(f,m.summaryIndex,m.layout));break;case"sum":this.$_gridCellClicked(n.getSub(f,i.sumView.getCellType(u)));break;case"groupFooter":m=i.getBodyView(u).bodyCellByCell(u),this.$_gridCellClicked(n.getGroupFooter(f,m.item.index,m.layout));break;case"groupHead":case"groupFoot":var g=u[c.T_LEV];this.$_gridCellClicked(n.getGroupElt(f,g));break;case"groupBar":g=u[c.T_ROW],l=this.grid.getRowOfItem(g),this.$_gridCellClicked(n.getItem(f,g,l))}}else!r||r!==this._clickElement||(r=this._getClickData(r,e))&&this.$_gridCellClicked(r)},U.prototype._getClickData=function(e,t){},U.prototype.$_commitRendererEdit=function(e,t,n){var r=t.item,i=t.dataField,s=t.dataColumn,o=!1;try{(o=e.editorCommit(t,r.getData(i),n))&&(e.undoable?e.execute(new Pn.EditValueCommand(t.item,i,n,t.column)):r.setData(i,n),e.isItemEditing(t.item)&&e.validateCellCommit(t,n))}catch(t){if(!e.editOptions.showCommitError)throw t;alert(t.message||t)}if(o&&e.isCellEditing()){i=e.itemSource,n=i.editingItem.invalidFields,o=e.validationManager.getError(t);if(o)return n.push(s.dataIndex),void (e.editOptions.showCommitError&&alert(o.userMessage||o.message||o));0<=n.indexOf(s.dataIndex)&&n.splice(n.indexOf(s.dataIndex),1),e.validationManager.clearInvalidCell(t),0<n.length||i.commit()||i.cancel()}},U.prototype.$_performRendererClick=function(e,t){var n,r=e.renderer2,i=this.grid,s=i.layoutManager;if(r){n=e.merged?(t.mouseX,o=t.mouseY,e=(n=this._findTableCell())&&i.getTableView(n),this.$_getIndexAt(i,s,e,n,o)):r.index;var o=i.canWriteAt(n)&&r.canEdit();if(o&&It.CellIndex.areEquals(n,i.focusedIndex)&&r.canEditClickAt(t)&&i.edit(n)){var u=r.editClick(n,t);if(u)return u.commit&&this.$_commitRendererEdit(i,n,u.value),!0}if(r.canClick(t)){u=r.click(n,t);if(u)return!1===i._fireCellItemClicked(n,u)&&r.preventDefaultClick(t),!0}return r.preventDefaultEditClick(t),!1}},U.prototype.$_performRendererKey=function(e,t){var r=e.renderer2,i=e.head;if(r)s=r.index;else{if(!i||!(r=i.renderer2))return;var s,o=e.rowIndex-i.rowIndex;(s=r.index.clone()).incRow(o)}i=this.grid,o=i.canWriteAt(s)&&r.canEdit();if(It.CellIndex.areEquals(s,i.focusedIndex))if(o&&r.canEditKey(t)){if(i.edit(s)){var u=r.editKey(s,t);if(u)return u.commit&&this.$_commitRendererEdit(i,s,u.value),!0}}else if(r.canClickSpaceKey(t)){u=r.click(s,t);if(u)return!1!==i._fireCellItemClicked(s,u)&&r.itemClick(),!0}else if(32===t.keyCode&&i.editOptions.buttonClickWhenSpace)return e.button===c.CellButton.ACTION||e.button===c.CellButton.POPUP?(i.closePopups(),this.$_cellButtonClicked(e)):this.$_gridCellClicked(n.getCell(i.getCellType(e.cell),e)),!0},U.prototype._doDblClick=function(e){var t=e.mouseX,r=e.mouseY,i=e.ctrlKey||e.metaKey,s=e.shiftKey,o=e.altKey,u=this.grid,a=u.layoutManager,f=this.focused,l=this.findElementAt(t,r,!1),h=this._findTableCell();if(u.setEventFrom(null),h&&h==this._clickCell){var p,d=u.getCellType(h),v=void 0;switch(d){case"head":this.$_gridCellDblClicked(n.getSub(d,u.headView.getCellType(h)));break;case"foot":this.$_gridCellDblClicked(n.getSub(d,u.footView.getCellType(h)));break;case"indicator":case"state":case"check":p=u.rowBarContainer.rowOf(h),v=u.getRowOfItem(p),this.$_gridCellDblClicked(n.getItem(d,p,v));break;case"header":var m=u.getHeaderView(h),g=u.headerView.tableCellByCell(h);g&&g.isClickableElt(e.target)||this.$_gridCellDblClicked(n.getLayout(d,m.layoutByCell(h))),m=this._getEditRequest(this.mouseEventTarget,u.focusedIndex,t,r,i,s,o),m instanceof Ln.ColumnResizeRequest&&(b=m.layout).firstColumn&&u.fitLayoutWidth(b);break;case"data":var y=u.getBodyView(h),b=y.bodyCellByCell(h),y=this.$_getIndexAt(u,a,y,h,r);b.grouped?this.$_gridCellDblClicked(n.getItem("groupHeader",b.item.index,null)):(this.$_gridCellDblClicked(n.getCell(d,b)),It.CellIndex.areEquals(y,f)&&u.showEditor(y));break;case"footer":y=u.getFooterView(h).tableCellByCell(h),this.$_gridCellDblClicked(n.getSummary(d,y.summaryIndex,y.layout));break;case"summary":var w=u.getSummaryView(h).tableCellByCell(h);this.$_gridCellDblClicked(n.getSummary(d,w.summaryIndex,w.layout));break;case"sum":this.$_gridCellDblClicked(n.getSub(d,u.sumView.getCellType(h)));break;case"groupFooter":w=u.getBodyView(h).bodyCellByCell(h),this.$_gridCellDblClicked(n.getGroupFooter(d,w.item.index,w.layout));break;case"groupHead":case"groupFoot":var E=h[c.T_LEV];this.$_gridCellDblClicked(n.getGroupElt(d,E));break;case"groupBar":E=h[c.T_ROW],v=u.getRowOfItem(E),this.$_gridCellDblClicked(n.getItem(d,E,v))}}else!l||l!==this._clickElement||(l=this._getClickData(l,e))&&this.$_gridCellDblClicked(l)},U.prototype._doMouseWheel=function(e){var t=this.grid;t.setEventFrom(null);var n=t.displayOptions;if(!n.wheelEnabled||e.ctrlKey)return!1;if((e.shiftKey||Math.abs(e.deltaX)>Math.abs(e.deltaY))&&0!==n.wheelScrollHorz){var r=t.leftPos,i=Math.abs(n.wheelScrollHorz||16)*(0<(e.deltaX||e.deltaY)?1:-1);return t.leftPos=r+i,!0}var s=t.topIndex,o=Date.now(),u=Math.abs(n.wheelScrollLines);return u=u||3,0<n.wheelAccelDelay&&(o>this._prevScroll+300?this._checkScroll=o:this._checkScroll+n.wheelAccelDelay<o&&(t.itemCount,(r=n.wheelAccelScroll)&&!isNaN(r)?u=parseInt(r):"string"!=typeof r||0<(i=r.trim()).indexOf("%")&&(r=t.itemCount,u=parseInt(i.substr(0,i.length-1))/100*r))),this._prevScroll=o,t.topIndex=t.topIndex+(0<e.deltaY?u:-u),!n.wheelEventPropagate||s!=t.topIndex},U.prototype._doMouseEnter=function(e){},U.prototype._doMouseLeave=function(e){var t=e.mouseX,e=e.mouseY;this._hideTooltip(),this.$_setHoveredHeaderCell(null,t,e),this.$_setHoveredCell(null,t,e)},U.prototype._doMouseOver=function(e){},U.prototype._doContextMenu=function(e){return this.grid.doContextMenu(e)},U.prototype.$_doHome=function(e,t,n){var r=e.clone();if(e.first(),n&&this._checkReadOnly(e)&&!this._skipReadOnlyCell(e,1,r))return e.assign(t),!0},U.prototype.$_doEnd=function(e,t,n){var r=e.clone();if(e.last(),n&&this._checkReadOnly(e)&&!this._skipReadOnlyCell(e,-1,r))return e.assign(t),!0},U.prototype._doKeyDown=function(e){var t,n=e.keyCode,r=e.ctrlKey,i=p.Utils.isMac,s=i&&e.metaKey||!i&&e.ctrlKey,o=e.shiftKey,u=e.altKey,a=this.grid,f=a.editOptions,l=a.layoutManager,c=a.popupMenuManager,h=f.skipReadOnly,d=f.skipReadOnlyCell,v=a.focusedIndex,m=v.clone(),g=f.verticalMoveStep;if(!a._fireKeyDown(e))return!0;if(v){var y=a.getBodyCellAt(v);if(y&&this.$_performRendererKey(y,e))return!0}if(c.isShow()&&p.Utils.included(n,37,39,38,40,13,32))return c.keyDown(e),!0;if(a.setEventFrom("keydown"),27==n)a.closePopups(),this._doCancel(a);else{if(13==n)return this._doEnter(a,f,m);if(9==n)return this._doTab(a,f,m,r,o,e);if(113==n)!a.isEditing()&&m.dataColumn&&a.showEditor(m,o);else{if(p.Utils.isMac&&e.metaKey&&e.shiftKey&&90===e.keyCode)return a.redo();if(90==n&&s)return a.undo();if(89==n&&s)return a.redo();if(45==n)f.appendWhenInsertKey||0==a.itemCount?a.append():a.insert(m.item,e.shiftKey,r);else{if(46==n)return r&&o?(a.revertSelection(),!0):r?(a.deleteSelection(),!0):!!o&&(a.eraseSelection(),!0);if(u&&o&&40==n)a.moveSelection(1);else if(u&&o&&38==n)a.moveSelection(-1);else if(32==n&&o&&s&&a.rowBarContainer.rowIndicator.visible)u=a.selections.getItem(0),u=u&&(u.style===Zt.SelectionStyle.BLOCK||u.style===Zt.SelectionStyle.ROWS)&&u.getItems(a.checkBar.merged||0<=a.checkBar.fieldIndex),u||a.checkBar.merged?(u=u||[m.item],a.toggleChecks(u,m.item)):a.toggleCheck(m.itemIndex);else if(p.Utils.included(n,36,35,39,37,40,38,34,33)){p.Utils.isMobile()&&e&&e.preventDefault&&e.preventDefault();var b=a.itemCount;if(40==n&&0==b)return a.append(),!0;if(!a.isValid(m))return m.normalize(a),this.setFocused(m,!0),!0;if((p.Utils.included(n,40,34)||35==n&&r)&&m.isBottom&&this.$_checkAppending(m))return!0;if((p.Utils.included(n,38,33)||36==n&&r)&&m.isTop&&this.$_checkAppending(m,!0))return!0;var w=a.getBodyViewAt(m);if(!w)return!0;switch(n){case 36:if(r){if(this.$_doHome(m,v,h))break}else m.home(),this._skipReadOnly(m,1);break;case 35:if(r){if(this.$_doEnd(m,v,h))break}else m.end(),this._skipReadOnly(m,-1);break;case 39:if(w.spanRight(l,m),m.right(),h&&this._checkReadOnly(m)&&!this._skipReadOnly(m,1)){m.assign(v);break}break;case 37:if(m.left(),h&&this._checkReadOnly(m)&&!this._skipReadOnly(m,-1)){m.assign(v);break}break;case 38:if(i&&s){this.$_doHome(m,v,h);break}try{if(0==m.itemIndex&&m.isTop){if(this.$_commitCancel(m.item,f))return!0;r&&i?m.first():m.up(g)}else r&&i?m.first():r?a.topIndex--:m.up(g,a.isItemEditing(m.item))}finally{d&&this._checkReadOnly(m)&&(this._skipReadOnlyCell(m,-1)||m.assign(v))}break;case 33:if(r&&!i)return a.topIndex=a.topIndex-l.fullItemCount,!0;if(t=m.clone(),m.incRow(-l.fullItemCount),h&&this._checkReadOnly(m)&&!this._skipReadOnlyCell(m,1,t)){m.assign(v);break}break;case 40:if(i&&s){this.$_doEnd(m,v,h);break}try{if(m.itemIndex!=b-1||!m.isBottom&&g!=It.VerticalMoveStep.ROW)if(r&&i)m.last();else{if(r)return a.topIndex=a.topIndex+1,!0;m.down(g,a.isItemEditing(m.item))}else{if(m.isBottom&&this._commitCancel(m.item,f))return!0;a.append(),r&&i?m.last():m.down(g,a.isItemEditing(m.item))}}finally{d&&this._checkReadOnly(m)&&(this._skipReadOnlyCell(m,1)||m.assign(v))}break;case 34:if(m.itemIndex==a.itemCount-1&&m.isBottom&&dt.ItemState_isInserting(m.item.itemState))return a.commit(f.forceAppend),!0;if(r&&!i)return a.topIndex=a.topIndex+l.fullItemCount,!0;if(t=m.clone(),m.incRow(l.fullItemCount),h&&this._checkReadOnly(m)&&!this._skipReadOnlyCell(m,-1,t)){m.assign(v);break}}return w.spanHead(l,m),o&&0<a.selections.count&&!Zt.isSingleSelectionStyle(a.displayOptions.selectionStyle)?(this.setFocused(m,!1),a.selections.getItem(0).resizeTo(m)):this.setFocused(m,!0),!0}}}}return R.prototype._doKeyDown.call(this,e)},U.prototype._doKeyPress=function(e){this.grid._fireKeyPress(e)},U.prototype._doKeyUp=function(e){var t,n,r;p.Utils.isIE&&(t=e.ctrlKey,n=e.keyCode,r=this.grid,90===n&&t&&r.undo()),this.grid._fireKeyUp(e)},U.prototype._editButtonClicked=function(e,t){this.grid.makeCellVisible(e),this.grid.showEditor(e)&&this.grid.editorButtonClicked(e,t),R.prototype._editButtonClicked.call(this,e,t)},U.prototype._getSelectRequest=function(e,t,n,r,i,s){var o=this.grid,u=o.displayOptions,a=u.selectionMode,f=u.selectionStyle,u=this._findTableCell(e);if(!u)return null;e=o.getCellType(u);if("indicator"==e){if(o.rowIndicator.selectable&&a!=Zt.SelectionMode.NONE&&f!=Zt.SelectionStyle.NONE&&!Zt.isSingleSelectionStyle(f))return new Ln.SelectRequest(o.getIndex(o.rowBarContainer.getCellIndex(u)),Zt.SelectionStyle.ROWS)}else if("header"==e){if(r){r=o.headerView.columnByCell(u);if(o.rowIndicator.selectable&&a!=Zt.SelectionMode.NONE&&f!=Zt.SelectionStyle.NONE&&!Zt.isSingleSelectionStyle(f))return new Ln.SelectRequest(o.getIndex(-1,r),Zt.SelectionStyle.COLUMNS)}}else if("data"==e){u=o.getDataCellIndex(u,this._tempIndex);if(a!=Zt.SelectionMode.NONE&&f!=Zt.SelectionStyle.NONE&&!Zt.isSingleSelectionStyle(f)&&!p.Utils.isMobile())return new Ln.SelectRequest(u.clone(),f)}return null},U.prototype._getEditRequest=function(e,t,n,r,i,s,o){var u=p.getDocWin(this.grid.doc),a=this.grid,f=a.layoutManager,l=a.displayOptions,c=this._findTableCell(e);if(!c)return null;var h=a.getTableView(c),s=this.$_getRowResizeRequest(h,c,n,r,i,s,o);if(s)return s;if(h instanceof In.RowBarContainer&&h.isRowIndicator(c)){if((o=o&&(p.Utils.isIE||p.Utils.isEdge)?i:o)&&a.canMoveRow(!1,!1)){var d=a.getSelection(),v=a.rowBarContainer.rowOf(c),s=!1;if(d?s=d.containsItem(v):v==t.itemIndex&&(s=!0),s)return this._rowMoveReq.init(d,v)}}else if(h instanceof ln.HeaderElement){if(e instanceof u.HTMLInputElement)return null;if(!i){u=h.layoutByCell(c);if(u){var m=a.cellToContainer(c,this._reqPoint.setEmpty());if(l.columnResizable&&u._isResizable()&&(a.fixedOptions.resizable||u.root.vindex>=f.fixedLayoutCount&&u.root.vindex<f.rightFirstLayout)){var g=a.headerView.tableCellByLayout2(f,u);if(m.x+=g?g.width:u.domWidth,n>=m.x-3&&n<=m.x+3)return this._colResizeReq.init(u,n,r,n-m.x)}if(l.columnMovable&&u._isMovable()&&(!u.isRoot||a.canMoveLayout(u)))return this._colMoveReq.init(u,n,r,n-m.x)}}}else if(h instanceof fn.GridBodyElement){m=a.getDataCellIndex(c,this._tempIndex),v=m&&m.itemIndex;if(a.canMoveRow(!1,!1)&&0<=v)return c=!1,d=a.getSelection(),(g=a.getBodyCellAt(m,!0)).expander===e?null:(o&&(p.Utils.isIE||p.Utils.isEdge)&&(o=i),d?(c=d.containsItem(v))&&!o&&(c=d.containsLayout(m.layout)&&this._canMoveRowAt(h,m,n)):t&&v==t.itemIndex&&(c=!!o||It.CellIndex.areEquals(m,t)&&this._canMoveRowAt(h,m,n)),c?this._rowMoveReq.init(a.getSelection(),v):void 0)}else if(h instanceof bn.GridHeadElement){h=h.boundsByContainer();if(a.header.resizable&&r<=h.bottom+1&&r>=h.bottom-2)return this._headerResizeReq.init(h.top,r-h.bottom-1)}},U.prototype.$_resizeSelection=function(e,t,n){var r=this.grid.selections,i=e?e.runStyle:n;!Zt.isSingleSelectionStyle(i)&&p.Utils.included(n,Zt.SelectionStyle.ROWS,Zt.SelectionStyle.COLUMNS,Zt.SelectionStyle.SINGLE_COLUMN)&&(i=n),e?(e.runStyle!=i&&(this.grid.selections.clear(),n=e.getBounds(),e=r.add(n.firstCell,n.lastCell,i)),r.canResize(e)&&e.resizeTo(t)):e=r.add(t,t,i)},U.prototype._canMoveRowAt=function(e,t,n){return n<e.boundsByContainer(e.getCellRectAt(this.grid.layoutManager,t,!1)).x+20},U.prototype.$_getRowResizeRequest=function(e,t,n,r,i,s,o){var u=-1;if((u=e instanceof In.RowBarContainer?t.parentElement.$_row:u)<0)return null;var a=this.grid,f=a.layoutManager,t=a.displayOptions,l=t.eachRowResizable&&!i,c=f.fixedItemCount,h=f.contentBounds.y,p=e.boundsByContainer(this._tempRect.setWidth(e.width));if(p.width<=0||n<p.x||n>=p.right)return null;if(u<c){if(a.fixedOptions.rowResizable&&(!t.dataHeights||t.dataHeights.length<=0)&&((p=f.getItemRect(u)).y+=h,r<=p.bottom+1&&r>=p.bottom-2))return this._rowResizeReq.init(u,l,p.y,r-p.bottom-1)}else if(t.rowResizable&&(!t.dataHeights||t.dataHeights.length<=0))for(var d=f.itemCount,v=a.topIndex,m=0;m<d;m++){var g=m+v+c;if(g==u&&((p=f.getItemRect(m+c)).y+=h,r<=p.bottom+1&&r>=p.bottom-2))return this._rowResizeReq.init(g,l,p.y,r-p.bottom-1)}return null},U.prototype._getDragTracker=function(e,t,n){if(e instanceof Ln.SelectRequest)switch(e.style){case Zt.SelectionStyle.ROWS:return new On.RowsSelectTracker(e,t,n);case Zt.SelectionStyle.COLUMNS:return new On.ColumnsSelectTracker(e,t,n);case Zt.SelectionStyle.BLOCK:return new On.BlockSelectTracker(e,t,n)}else{if(e instanceof Ln.ColumnResizeRequest)return new An.ColumnResizeTracker(e,this._cellResizer);if(e instanceof Ln.ColumnMoveRequest)return new An.ColumnMoveTracker(e,this._cellFeedback,this._cellMover);if(e instanceof Ln.RowResizeRequest)return new An.RowResizeTracker(e,this._cellResizer);if(e instanceof Ln.RowMoveRequest)return new An.RowMoveTracker(e,this._rowMoverProxy,this._rowMoverLine);if(e instanceof Ln.HeaderResizeRequest)return new An.HeaderResizeTracker(e,this._cellResizer)}return null},U.prototype.$_checkCellClicked2=function(e,t){if(e!==t.target){var n=p.getWin(e),r=this.grid,i=r.rowBarContainer.getCheckBox(e),s=r.getEditItem(),e=r.getItem(e.parentElement[c.T_ROW]);if(s&&s.dataRow!==e.dataRow){var o=r.editOptions;switch(s.itemState){case dt.ItemState.APPENDING:r.commit(o.forceAppend);break;case dt.ItemState.INSERTING:r.commit(o.forceInsert);break;case dt.ItemState.UPDATING:r.commit(o.commitWhenNoEdit)}}t.target instanceof n.HTMLSpanElement&&(i.checked=!i.checked),this._doCheck(i,e,t.shiftKey)}},U.prototype._doCheck=function(e,t,n){var r=this.grid,i=r.checkBar,s=r.rowBarContainer.checkBar;if(r.editOptions.checkable){var o=r.checkBar;if(t.checkable&&(o.showGroup||0<=t.dataRow)&&e){var u=t.index,a=s._prevChecked,f=void 0,l=void 0,c=[],h=-1,p=-1,d=void 0;if(r.makeItemVisible(u),n&&0<=a&&!i.exclusive||o.merged){n&&0<=a?(f=It.CellIndex.temp(r,a,null),l=r.getItem(a).checked,p=o.merged?(h=(d=o.merges.getRoom(f))?d.head:a,d?d.tail:a):(h=a,t.index)):(l=e.checked,h=p=t.index,s.$_setPrevChecked(t.index),i.exclusive&&r.itemSource._clearChecked());for(var p=o.merged?(f=It.CellIndex.temp(r,t.index,null),d=o.merges.getRoom(f),h=Math.min(d?d.head:t.index,h),Math.max(d?d.tail:t.index,p)):(h=Math.min(h,t.index),Math.max(h,p)),v=h;v<=p;v++){var m=r.getItem(v);m.checkable&&0<=m.dataRow&&c.push(m)}0<c.length&&r.itemSource.checkItems(c,l,!0)}else r.itemSource.checkItem(t,e.checked,o.exclusive,!0),s.$_setPrevChecked(t.index)}}},U.prototype._checkAllClicked=function(){var e,t,n=this.grid;!n.empty&&n.editOptions.checkable&&(e=n.checkBar,t=n.headView,e.showAll&&!e.exclusive&&(t.allChecked=!t.allChecked,n.itemSource.checkAll(t.allChecked,e.visibleOnly,e.checkableOnly,!0,e.showGroup&&!e.merged&&e.fieldIndex<0)))},U.prototype._doColumnHeaderClicked=function(e,t){var n,r,i;R.prototype._doColumnHeaderClicked.call(this,e,t),2==e.button||(r=this.grid,(n=t)&&(i=r.getHeaderView(this._clickCell).tableCellByCell(this._clickCell),e.target===i.check?(i.check.checked=n.checked=!n.checked,r._columnCheckedChanged(n)):e.target===i.filter&&n.hasFilters?r.selectColumnFilters(i):e.target===i.popup?(t=t.header.popupMenuName,i=r.getCellViewOf(i.cell),t&&i&&r.popupMenuManager.show(t,i,null)):n.sortable&&r.sortingOptions.enabled&&r.sortColumn(n,e)))},U.prototype.$_columnHeaderClicked=function(e,t){e.button,this._doColumnHeaderClicked(e,t),e.preventDefault()},U.prototype.$_gridCellClicked=function(e){this.grid._fireCellClicked(e)},U.prototype.$_gridCellDblClicked=function(e){this.grid._fireCellDblClicked(e)},U.prototype.$_setHoveredCell=function(e,t,n){var r,i,s,o=this.grid,u=this._findTableCell();e&&u&&(r=o.getTableView(u),i=this.$_getIndexAt(o,o.layoutManager,r,u,n),e===this._tooltipCell&&It.CellIndex.areEquals(this._tooltipIndex,i)||(this._hideTooltip(t,n),this._tooltipShowTimer&&clearTimeout(this._tooltipShowTimer),o=o.displayOptions.hintDelay,e&&(0<o?(s=this)._tooltipShowTimer=setTimeout(function(){s.$_showTooltip2(e,i)}.bind(s),o):this.$_showTooltip2(e,i))))},U.prototype._hideTooltip=function(e,t){this.grid.tooltipManager.close(e,t),this._tooltipCell=null,this._tooltipIndex.reset()},U.prototype.$_showTooltip2=function(e,t){p.Utils.trace("TOOLTIP...");var n=this.grid,r=n.validationManager.getError(t),i=this._tooltipOptions;n.editOptions.hintOnError&&r?(i.message=r&&r.message,this.$_showTooltip(e,t,i)):(i=e.renderer2,(e.item.isDataRow||e.item instanceof Ht.MergedGroupHeader)&&i&&i.showTooltip&&!It.CellIndex.areEquals(t,this._tooltipIndex)&&(!(i=i.getTooltip(e,t))&&!n.displayOptions.showEmptyTooltip||(i=n._fireShowTooltip(t,i))&&(this._tooltipOptions.assignFrom(i),this.$_showTooltip(e,t,this._tooltipOptions))))},U.prototype.$_showTooltip=function(e,t,n){var r,i=this.grid,s=i.tooltipManager,o=i.layoutManager;s.visible&&this._tooltipCell==e||(this._hideTooltip(),i=(r=i.getBodyView(e.cell)).getCellRectAt(o,t,!1),o=(i=r.boundsByContainer(i)).x,r=i.y+i.height,s.show(n,o,r,i.height,!1),this._tooltipCell=e,this._tooltipIndex.assign(t))},U.prototype.$_showStateError=function(e,t){var n=this.grid,r=n.tooltipManager,i=n.layoutManager,s=this._tooltipOptions;e!==this._tooltipCell&&(this._hideTooltip(),s.message=t,t=n.focusedIndex.itemIndex,n=n.rowBarContainer.boundsByContainer(),i=i.getItemBounds(t<i.fixedItemCount?t:t-i.topIndex),r.show(s,n.x,n.y+i.bottom,i.height,!0),this._tooltipCell=e,this._tooltipIndex.assign(null))},U.prototype.$_setHoveredHeaderCell=function(e,t,n){var r;e!=this._tooltipCell&&(this._hideTooltip(t,n),this._tooltipShowTimer&&clearTimeout(this._tooltipShowTimer),0<(n=this.grid.displayOptions.hintDelay)?(r=this)._tooltipShowTimer=setTimeout(function(){r.$_showHeaderTooltip2(e)}.bind(r),n):this.$_showHeaderTooltip2(e))},U.prototype.$_showHeaderTooltip2=function(e){var t,n=this.grid;n.header.showTooltip&&this._tooltipCell!=e&&e&&e.showTooltip&&(!(t=e.tooltip||e.text)||(t=n._fireShowHeaderTooltip(e.layout.firstColumn,t))&&(this._tooltipOptions.assignFrom(t),this.$_showHeaderTooltip(e,this._tooltipOptions)))},U.prototype.$_showHeaderTooltip=function(e,t){var n=this.grid,r=n.tooltipManager,i=n.layoutManager;r.visible&&this._tooltipCell==e||(this._hideTooltip(),i=(n=i.getHeaderCellRect(e.layout,!0)).x,n=n.y+n.height,r.show(t,i,n,0,!0),this._tooltipCell=e)},U.prototype.$_cellButtonClicked=function(e){var t=this.grid,n=e.layout.firstColumn;if(n){var r=t.layoutManager,i=e.getEditIndex(this._tempIndex);r.getMergeRoom(i);switch(n.button){case c.CellButton.POPUP:var s=n.popupMenuName,o=t.getCellViewOf(e.cell);s&&o&&t.popupMenuManager.show(s,o,i);break;case c.CellButton.ACTION:t._doCellButtonClicked(i)}}},U.prototype.$_commitCancel=function(e,t){var n=this.grid;try{switch(e.itemState){case dt.ItemState.INSERTING:return n.commit(t.forceInsert)||n.cancel(!0),!0;case dt.ItemState.APPENDING:return n.commit(t.forceAppend)||n.cancel(!0),!0;case dt.ItemState.UPDATING:return n.commit(t.commitWhenNoEdit)||n.cancel(!0),!0}}catch(r){if(r instanceof Dt.ValidationError)return(r=n._fireValidationFail(e.index,r.column,r))&&alert(t.showOnlyValidationMessage&&r.userMessage?r.userMessage:r.toString()),!1;if(r instanceof Dt.AbortError)return!1;throw r}return!1},U.prototype.$_checkAppending=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null);var r=this.grid;if(e.itemIndex==r.itemCount-1&&dt.ItemState_isInserting(e.item.itemState)){var i=e.itemIndex;if(!n||n.itemIndex!=i){try{r.commit(r.editOptions.forceAppend,!0)?((e=e.clone()).itemIndex=i,r.isValid(e)||(e.itemIndex=r.getItemIndexOfRow(r.dataSource.rowCount-1)),this.setFocused(e,!0)):t&&(r.cancel(!0),n&&this.setFocused(n,!0))}catch(e){if(e instanceof Dt.ValidationError)return(e=r._fireValidationFail(i,e.column,e))&&alert(r.editOptions.showOnlyValidationMessage&&e.userMessage?e.userMessage:e.toString()),!0;if(e instanceof Dt.AbortError)return!0;throw e}return!0}}return!1},U.prototype._stopTapTracker=function(e){if(this.dragTracker)try{this.dragTracker=null}catch(e){throw e}},U.prototype._getTouchTracker=function(e,t,n){return null},U.prototype.onTouch=function(e,t,n){clearInterval(this._swipeTimer),this.touchManager.swipeHandler=null,this._stopTapTracker(!1);var r=this.grid,i=this._clickCell=r.getCellViewOf(e.target);return i&&r.getCellType(i)&&r.container._containerDom.focus({preventScroll:!0}),r.closePopups(),this._getTouchTracker(e,t,n),this.dragTracker||null},U.prototype.onTouchEnd=function(e,t,n){var r=this.grid.cellToIndex(e.target);this.grid.editController.buttonUp(r,e)},U.prototype.onTap=function(e,t,n){if(p.Utils.isiOS&&this.touchManager){var r=p.Utils.getTimer();if(this.touchManager.touchEndt+50>r)return}var i=this.grid,r=this._clickCell=i.getCellViewOf(e.target),e=i.getTableView(r);r&&e instanceof fn.GridBodyElement&&i.cellToIndex(r),this._hideTooltip(),i.closeFilterSelector(),i.getCellType(r)},U.prototype.onDoubleTapHandler=function(e,t,n){var r=this.focused,i=this.grid,s=this._clickCell,o=i.getTableView(s);"data"===i.getCellType(s)&&(e.mouseX=t,e.mouseY=n,this.dblclick(e),o.bodyCellByCell(s),s=i.cellToIndex(s),i.isValid(r)&&!i.isEditing()&&It.CellIndex.areEquals(s,r)&&i.showEditor(s.clone()))},U.prototype.onLongTapHandler=function(e,t,n){var r=this.grid,i=r.cellToIndex(e.target),s=this.grid.getBodyCellbyCell(e.target);if(s&&s.isEditButton(e.target))return this.setFocused(i,!0),s.editable&&!s.readonly&&r.editController.buttonDown(i,e),!0},U.prototype.onDragStartHandler=function(e,t,n,r){var i=this.dragTracker;return i&&i.start(null,n,r)?i:null},U.prototype.onDragHandler=function(e,t,n,r){var i=this.dragTracker,s=!1;if(i&&i.dragging&&!(s=i.drag(this.mouseEventTarget,n,r))){var o=i.getNextRequest(n,r);if(o)return this._stopDragTracker(n,r,!0),this.dragTracker=this._getDragTracker(o,n,r),this._startDragTracker(n,r,!1),!!this.dragTracker;this._stopDragTracker(n,r,!0),i.cancel()}return s},U.prototype.onDragEndHandler=function(e,t,n){this._stopDragTracker(e,t,n)},U.prototype.onSwipeHandler=function(e,t,n,r){var i=this.grid;i.getCellType(this._clickCell);if(i.getTableView(this._clickCell)instanceof fn.GridBodyElement){var s=1;switch(n){case"right":i.leftPos=i.leftPos-t/20;break;case"left":i.leftPos=i.leftPos+t/20;break;case"bottom":s=-1;case"top":this._swipeDistance=s*t/20,this._swipeDuration=e,this._swipePrev=this._swipeStarted=p.Utils.getTimer(),this._swipeAmount=0,this._swipeTimer=setInterval(this.$_scrollRow.bind(this),50)}}},U.prototype.$_scrollRow=function(){var e,t=p.Utils.getTimer();t-this._swipeStarted<this._swipeDuration?(e=t-this._swipePrev,e=Math.floor((this._swipeDistance-this._swipeAmount)*e/this._swipeDuration),this._swipeAmount-=e,this._swipePrev=t,this.grid.topIndex+=e):clearInterval(this._swipeTimer)},U.prototype.$_createTouchManager=function(e){return p.Utils.isMobile()?(e=new _n.SingleTouchManager(e),e.touchEndHandler=this.onTouchEnd.bind(this),e.touchHandler=this.onTouch.bind(this),e.tapHandler=this.onTap.bind(this),e.doubleTapHandler=this.onDoubleTapHandler.bind(this),e.longTapHandler=this.onLongTapHandler.bind(this),e.dragStartHandler=this.onDragStartHandler.bind(this),e.dragHandler=this.onDragHandler.bind(this),e.dragEndHandler=this.onDragEndHandler.bind(this),e):null},U);t.GridSelectionTool=D});t(qn),qn.ClickData,qn.FocusView,qn.FocusMask,qn.RowBlockView,qn.HeaderCellResizer,qn.HeaderCellFeedback,qn.HeaderCellMover,qn.RowMoverLine,qn.RowMoverProxy,qn.GridTool,qn.RowHoverView,qn.RowFocusView,qn.GridSelectionTool;var Rn=n(function(e,t){function i(e){var t=n.call(this)||this;return t._cellEditors={},t._customRenderers={},t._grid=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.prototype._doDispose=function(){this._grid=null,n.prototype._doDispose.call(this)},_dp(i,"grid",{get:function(){return this._grid}}),i.prototype.getDefaultCellEditor=function(){var e;return this._defaultEditor||(e=this._grid.container._container,this._defaultEditor=new an.LineCellEditor(this._grid,e),this._defaultEditor.setController(this._grid.editController)),this._defaultEditor},i.prototype.getCellEditor=function(e){var t=this._grid.container._container,n=this._cellEditors[e];if(!n){switch(e){case"list":case"dropdown":n=new Nn.DropDownCellEditor(this._grid,t);break;case"nlist":n=new Nn.NativeListCellEditor(this._grid,t);break;case"multiline":n=new an.MultiLineCellEditor(this._grid,t);break;case"number":n=new an.NumberCellEditor(this._grid,t);break;case"date":n=new Cn.DateCellEditor(this._grid,t);break;case"btdate":n=new Cn.BTDateCellEditor(this._grid,t);break;case"search":n=new Nn.SearchCellEditor(this._grid,t);break;case"checklist":n=new Nn.MultiCheckCellEditor(this._grid,t);break;case"password":n=new an.PasswordCellEditor(this._grid,t);break;case"ndate":n=new Cn.NativeDateCellEditor(this._grid,t);break;case"line":default:n=this.getDefaultCellEditor()}(this._cellEditors[e]=n)&&n.setController(this._grid.editController)}return n},i.prototype.$_checkFlexible=function(e,t){if(!p.Utils.ieOld&&!p.Utils.ieTen)return e&&e.flexible||t&&t.flexible},i.prototype.createRenderer=function(e,t,n){var r,i=null;if(e){switch(e){case Ct.TextCellRenderer.TYPE:i=new Ct.TextCellRenderer;break;case Ct.BarCellRenderer.TYPE:i=new Ct.BarCellRenderer;break;case Ct.ImageCellRenderer.TYPE:i=new Ct.ImageCellRenderer;break;case Ct.IconCellRenderer.TYPE:i=new(this.$_checkFlexible(t,n)?Ct.FlexIconCellRenderer:Ct.IconCellRenderer);break;case Ct.CheckCellRenderer.TYPE:i=new(this.$_checkFlexible(t,n)?Ct.FlexCheckCellRenderer:Ct.CheckCellRenderer);break;case Ct.ButtonCellRenderer.TYPE:i=new Ct.ButtonCellRenderer;break;case Ct.ShapeCellRenderer.TYPE:i=new(this.$_checkFlexible(t,n)?Ct.FlexShapeCellRenderer:Ct.ShapeCellRenderer);break;case Ct.LinkCellRenderer.TYPE:i=new Ct.LinkCellRenderer;break;case Ct.SignalBarCellRenderer.TYPE:i=new Ct.SignalBarCellRenderer;break;case Ct.Code39CellRenderer.TYPE:i=new Ct.Code39CellRenderer;break;case Ct.Code128CellRenderer.TYPE:i=new Ct.Code128CellRenderer;break;case on.SeriesTextCellRenderer.SERIES_TYPE:i=new on.SeriesTextCellRenderer;break;case on.SparkLineRenderer.TYPE:i=new on.SparkLineRenderer;break;case on.SparkColumnRenderer.TYPE:i=new on.SparkColumnRenderer;break;case on.SparkWinLossRenderer.TYPE:i=new on.SparkWinLossRenderer;break;case kt.TemplateCellRenderer.TYPE:i=new kt.TemplateCellRenderer}(i=i?i:"function"==typeof (r=this._customRenderers[e])?new r(e):new Dn.CustomCellRendererImpl(r,e))||(p.Utils.log("Renderer type is invalid: "+e),i=new Ct.TextCellRenderer),t&&i.assignFrom(t),n&&i.assignFrom(n)}return i},i.prototype.addCustomRenderer=function(e,t){e&&t&&(this._customRenderers[e]=t)},i.prototype.removeCustomRenderer=function(e){delete this._customRenderers[e]},i.prototype.existsCustomRenderer=function(e){return this._customRenderers.hasOwnProperty(e)},i.prototype.clearCustomRenderers=function(){this._customRenderers={}},i);t.GridDelegate=r});t(Rn),Rn.GridDelegate;var Un=n(function(e,t){function i(e){var t=n.call(this)||this;return t._id=e,t}function u(e,t,n){void 0===t&&(t=0),void 0===n&&(n=!1),e=s.call(this,e)||this;if(t<1)throw"LookupTable levels must be equals or greater than 1";return e._levels=t,e._tree={},e._listMap=n?{}:null,e}function f(){return a.call(this)||this}function h(e){void 0===e&&(e=null);var t=c.call(this)||this;return t._sources={},e&&t.load(e),t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=x.EventAware,l.__extends(i,n),_dp(i,"id",{get:function(){return this._id}}),i.prototype.exists=function(e){return!1},i.prototype._changed=function(){this.fireEvent(i.CHANGED)},i.CHANGED="onLookupSourceChanged",i);t.LookupSource=r;var s,o=(s=r,l.__extends(u,s),u.prototype._doDispose=function(){this._tree=this._listMap=null,s.prototype._doDispose.call(this)},u.prototype.clear=function(){this._tree=this._listMap={},this._changed()},u.prototype.exists=function(e){var t;if((e=p.Utils.makeArray(e))&&0<(t=e.length)&&t<=this._levels){if(0<(t=Math.min(t,this._levels)-1)){for(var n=this._tree,r=0;r<t&&(n=n[e[r]]);r++);return null!=n&&n.hasOwnProperty(e[t])}return this._tree.hasOwnProperty(e[0])}return!1},u.prototype.fill=function(e,t){if(e&&0<e.length&&t&&0<t.length){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=p.Utils.makeArray(e[r]);this.$_add(i,t[r])}this._changed()}},u.prototype.fillRows=function(e){if(e&&0<e.length){for(var t=0,n=e.length;t<n;t++)this.$_addRow(e[t]);this._changed()}},u.prototype.add=function(e,t){e&&(this.$_add(e,t),this._changed())},u.prototype.addRow=function(e){e&&(this.$_addRow(e),this._changed())},u.prototype.lookup=function(e,t){var n;if(1<this._levels){var r=void 0,i=this._levels-1,s=this._tree;for(r=0;r<i&&(s=s[n=e[r]]);r++);}else s=this._tree;if(n=e[e.length-1],s&&n&&t){for(var o=n.split(t),u=[],r=0,a=o.length;r<a;r++)u.push(s[o[r]]||o[r]);return u.join(t)}return s?s[n]:void 0},u.prototype.getDomain=function(e){if(!e||e.length!=this._levels-1)throw"Keys length must be "+(this._levels-1);var t=this._tree,n=[],r=[];if(1<this._levels)for(o=0,s=e.length;o<s;o++)if(e[o],!(t=t[e[o]]))return{keys:n,values:r};if(this._listMap)for(var i=this._listMap[e.slice(0,e.length).join("~!~")],s=i?i.length:0,o=0;o<s;o++)n.push(i[o]),r.push(t[i[o]]);else for(var u in t)n.push(u),r.push(t[u]);return{keys:n,values:r}},u.prototype.getTextDomain=function(e){for(var e=this.getDomain(e),t=e.keys,n=e.values,r=0,i=e.keys.length;r<i;r++)t[r]=t[r]?String(t[r]):null,n[r]=n[r]?String(n[r]):null;return e},u.prototype.$_add=function(e,t){if(e){e=p.Utils.makeArray(e);var n,r,i,s=this._levels;if(e.length<s)throw Error("Keys length must be equals or greater than "+s);for(var o,u=this._tree,a=0;a<s-1;a++)(i=u[r=e[a]])||(u[r]=i={}),u=i;u[n=e[s-1]]=t,this._listMap&&(o=e.slice(0,e.length-1).join("~!~"),t=this._listMap[o],p.Utils.isArray(t)||(this._listMap[o]=t=[]),t.push(n))}},u.prototype.$_addRow=function(e){if(e){if(e.length-1<this._levels)throw Error("Keys length must be equals or greater than "+this._levels);var t=e[this._levels];e=e.slice(0,this._levels),this.$_add(e,t)}},u),a,r=(a=x.EventAware,l.__extends(f,a),f.prototype._changed=function(){this.fireEvent(f.CHANGED)},f.CHANGED="onLookupSourceProviderChanged",f);t.LookupSourceProvider=r;var c,r=(c=r,l.__extends(h,c),h.prototype.dispose=function(){return c.prototype.dispose.call(this)},h.prototype.load=function(e){if(e=p.Utils.makeArray(e)){this._sources={};for(var t=0,n=e.length;t<n;t++)this.$_add(e[t]);this._changed()}},h.prototype.add=function(e){return e=this.$_add(e),e&&this._changed(),e},h.prototype.remove=function(e){this.$_remove(e)&&this._changed()},h.prototype.getSource=function(e){return this._sources[e]},h.prototype.$_createSource=function(e){if(e){var t=new o(e.id,e.levels,e.ordered);return t.fill(e.keys,e.values),t}return null},h.prototype.$_add=function(e){if(e&&e.id&&this._sources[e.id]!=e){var t=this.$_createSource(e);if(t)return this.$_remove(e.id),(this._sources[e.id]=t).addListener(this),t}},h.prototype.$_remove=function(e){if(e){var t=this._sources[e];if(t)return t.removeListener(this),delete this._sources[e],!0}return!1},h.prototype.onLookupSourceChanged=function(e){this._changed()},h.CHANGED="onLookupSourceProviderChanged",h);t.LocalLookupSourceProvider=r});t(Un),Un.LookupSource,Un.LookupSourceProvider,Un.LocalLookupSourceProvider;var zn=n(function(e,t){function s(){return n.call(this)||this}function a(e,t){var n=o.call(this)||this;return n._colCount=0,n._blockPaste=!1,n._lines=[],n._colCount=0,n._blockPaste=!1,n._parse(e,t),n}function d(){var e=f.call(this)||this;return e._lastLayout=null,e}function g(){var e=v.call(this)||this;return e._dataSource=null,e._values=null,e._dataRow=-1,e}function E(e,t){return e=b.call(this,e)||this,e._item=t,e}function S(e){this._grid=e,this._data=new h,this._appendingItem=new m,this._appendingIndex=new w(e,this._appendingItem)}Object.defineProperty(t,"__esModule",{value:!0});var n,r=c,i=(n=y.Base,l.__extends(s,n),s.prototype._doDispose=function(){n.prototype._doDispose.call(this)},s.prototype.lastLayout=function(){throw new Error("Method not implemented.")},s.prototype.getText=function(e,t){throw new Error("Method not implemented.")},s.prototype.getCellText=function(e,t){throw new Error("Method not implemented.")},s.prototype.getRows=function(e,t,n){throw new Error("Method not implemented.")},s.prototype.getCell=function(e,t,n){throw new Error("Method not implemented.")},s);t.ClipboardData=i;var o,u=(o=y.Base,l.__extends(a,o),a.prototype._doDispose=function(){o.prototype._doDispose.call(this)},_dp(a,"rowCount",{get:function(){return this._lines.length}}),_dp(a,"colCount",{get:function(){return this._colCount},set:function(e){this._colCount=e}}),_dp(a,"empty",{get:function(){return 0==this._lines.length||0==this._colCount}}),_dp(a,"single",{get:function(){return 1==this._lines.length&&1==this._colCount}}),_dp(a,"blockPaste",{get:function(){return this._blockPaste},set:function(e){this._blockPaste=e}}),_dp(a,"startIndex",{get:function(){return this._startIndex}}),a.prototype.get=function(e){return this._lines[e]},a.prototype._parse=function(e,t){var n,r,i,s,o,u=this._lines,a=[],f=e.length,l=0,c="";if(""===e)a.push(e),u.push(a),this._colCount=1;else{for(;l<f;)o=!1,n=e.charAt(l),r=l<f-1?e.charAt(l+1):"",'"'==n?s?i&&'"'==r?(c+=n,l++):i?i=!1:c+=n:i=s=!0:i||"\r"!=n&&"\n"!=n&&"	"!=n?(s=!0,c+=n):("	"==n&&(a.push(c),o=!0),"\r"!=n&&"\n"!=n||(a.push(c),this._colCount=Math.max(this._colCount,a.length),u.push(a),a=[],"\r"==n&&"\n"==r&&l++),c="",s=!1),l++;(0<(c=i?'"'+c:c).length||o)&&a.push(c),0<a.length&&(this._colCount=Math.max(this._colCount,a.length),u.push(a))}if(t&&t instanceof Zt.BlockSelection&&!t.single){var h=t.startIndex,p=t.endIndex;if(h&&p){var d,v=t.grid,m=h.layout,t=p.layout,h=h.itemIndex,p=p.itemIndex;m.col>t.col&&(d=m,m=t,t=d),p<h&&(d=h,h=p,p=d),m=v.activeCellLayout.getTopOf(m);for(var g=(t=v.activeCellLayout.getBottomOf(t,!0)).col-m.col+1,y=(t.row-m.row+1)*(p-h+1),l=0,b=0,w=u.length;b<w;b++){for(var E=u[b].slice(),S=E.length;S<g;S++)u[b].push(E[l]),l=l>=E.length?0:l;this._colCount=Math.max(this._colCount,u[b].length)}l=0;for(b=u.length;b<y;b++)u.push(u[l++]),l=l>=u.length?0:l;this._blockPaste=!0,this._startIndex=It.CellIndex.temp(v,h,m)}}},a);t.ClipboardSource=u;var f,h=(f=i,l.__extends(d,f),d.prototype._doDispose=function(){return f.prototype._doDispose.call(this)},d.prototype.lastLayout=function(){return this._lastLayout},d.prototype.getText=function(e,t){var n,r,i,s,o,u=e.grid,a=this._rangeToCells(e,null,t),f=[];if(u.copyOptions.includeHeaderText)for(o=0;o<a.length;o++){for(var l=[],c=0;c<a[o].length;c++)(n=p.Utils.cast(a[o][c],jt.DataColumn))?l.push(p.Utils.addQuot(n.header.displayText)):l.push("");f.push(l.join("	"))}for(i=t.r1,s=t.r2;i<=s;i++){var h=u.getItem(i);if(0<=h.dataRow||dt.ItemState_isInserting(h.itemState))for(o=0;o<a.length;o++){l=[];for(c=0;c<a[o].length;c++)(n=p.Utils.cast(a[o][c],jt.DataColumn))&&!n.blankWhenCopy?(r=It.CellIndex.temp(u,i,n).clone(),l.push(e.getData(r))):l.push("");f.push(l.join("	"))}}return f.join("\r\n")+"\r\n"},d.prototype.getCellText=function(e,t){
var n="";return e.grid.copyOptions.includeHeaderText&&(n=t.dataColumn.header.displayText+"\r\n"),n+=e.getData(t)},d.prototype.getRows=function(e,t,n){if(null==t)return null;var r=n.grid,i=r.pasteOptions.selectBlockPaste&&r.getSelection(),s=new u(t,i);if(s.empty)return null;if(s.single)return s.get(0)[0];s.blockPaste&&s.startIndex&&n.assign(s.startIndex);for(var o,t=r.activeCellLayout._dataCells,i=t[0][n.layout.col],t=t[t.length-1][Math.min(t[0].length-1,n.layout.col+s.colCount-1)],i=new It.CellIndex(r,n.itemIndex,i),t=new It.CellIndex(r,n.itemIndex,t),t=It.CellRange.create(i,t),a=this._rangeToCells(e,s,t),f=void 0,l=void 0,c=void 0,h=[],p=0,d=s.rowCount;p<d;){for(var v={columns:[],values:[]},f=0;f<a.length&&p<d;f++,p++){var m=a[f],g=s.get(p);for(v.columns.push(m),v.values.push(c=[]),o=Math.min(g.length,m.length),l=0;l<o;l++)m[l]?c.push(g[l]):c.push("")}h.push(v)}return h},d.prototype.getCell=function(e,t,n){return t?(t=new u(t),t.empty?null:t.get(0)[0]):null},d.prototype._rangeToCells=function(e,t,n){n.normalizeData(),this._lastLayout=null;for(var r=n.c1,i=n.c2,s=e.grid.activeCellLayout._dataCells,e=r===i?r.row:0,o=r===i?r.row:s.length-1,u=[],a=e;a<=o;a++){for(var f=[],l=r.col;l<=i.col;l++){var c=s[a][l];c instanceof Ft.CellLayoutColumnItem?f.push(c.firstColumn):f.push(null)}u.push(f)}return this._lastLayout=s[o][i.col],u},d);t.DefaultClipboardData=h;var v,m=(v=dt.GridItem,l.__extends(g,v),_dp(g,"isLeaf",{get:function(){return!0}}),_dp(g,"dataSource",{get:function(){return this._dataSource},set:function(e){this._dataSource=e}}),_dp(g,"checked",{get:function(){return 0!=(this._getExtents()&dt.ITEM_EXT_CHECKED)}}),g.prototype._getExtents=function(){return 0},g.prototype._setExtents=function(e){},_dp(g,"values",{set:function(e){this._values=e}}),_dp(g,"dataRow",{get:function(){return this._dataRow},set:function(e){this._dataRow=e}}),_dp(g,"dataId",{get:function(){return this._dataSource.getRowId(this._dataRow)}}),g.prototype.getRowObject=function(){for(var e={},t=this._dataSource,n=0,r=t.fieldCount;n<r;n++){var i=t.getOrgFieldName(n),s=this._values[n];e[i]=s}return e},g.prototype.getData=function(e){return this._values[e]},g.prototype.setIndex=function(e){this._setIndex(e)},g);t.ClipboardItem=m;var b,w=(b=It.CellIndex,l.__extends(E,b),E.prototype._doDispose=function(){return b.prototype._doDispose.call(this)},_dp(E,"item",{get:function(){return this._item}}),E);t.ClipboardIndex=w,S.prototype.dispose=function(){return null},_dp(S,"grid",{get:function(){return this._grid}}),_dp(S,"appendingIndex",{get:function(){return this._appendingIndex}}),_dp(S,"isPasting",{get:function(){return this._pasting}}),S.prototype.getDataRoots=function(){var e=this._grid._activeCellLayout._dataCells,t=[];if(e.length<0||e[0].length<0)return t;for(var n=0,r=e[0].length;n<r;n++)e[0][n].dataRoot,t.push(e[0][n].dataRoot);return t},S.prototype.getData=function(e){var t,n,r,i=this.grid,s=e.layout.firstColumn,o=i.getItem(e.itemIndex),u=i.copyOptions,a=u.datetimeFormat?T.DateTimeWriter.getFormatter(u.datetimeFormat):null,f=u.booleanFormat?N.BooleanFormatter.getFormatter(u.booleanFormat):null,l=u.copyTextCallback;if(!o||!(dt.ItemState_isInserting(o.itemState)||0<=o.dataRow))return"";if(r=o.getData(s.dataIndex),s&&null!=(t=i.dataSource.getField(s.dataIndex))){if(null==(n=l?l.call(this,i,e.itemIndex,e.dataColumn,r):void 0))if(u.copyDisplayText)n=i.getDisplayText(e);else switch(t.dataType){case c.ValueType.DATETIME:case c.ValueType.DATE:n=r?a?a.getText(r):String(r):"";break;case c.ValueType.BOOLEAN:n=null!=r?f?f.formatValue(r):String(r):"";break;case c.ValueType.NUMBER:n=r==isNaN(r)?"":String(r);break;case c.ValueType.OBJECT:n=r&&"object"==typeof r?JSON.stringify(r):"";break;default:n=u.lookupDisplay&&(s.lookupDisplay||s.labelField)?Et.DataCell.getText(o,s):null!=r?String(r):""}return p.Utils.addQuot(n)}return""},S.prototype.copyEmtpyToClipboard=function(){return""},S.prototype.copyToClipboard=function(e){return this._data.getText(this,e)},S.prototype.copyCellToClipboard=function(e){return this._data.getCellText(this,e)},S.prototype.pasteCellFromClipboard=function(e,t){(e=this._correctIndex(e))&&this._grid.isValid(e)&&null!=t&&(t=this._data.getCell(this,t,e),this._pasteSingleCell(e,t))},S.prototype.pasteFromClipboard=function(e,t){var n=this._grid&&this._grid.dataSource;this._appendingItem.dataSource=n,n=e.clone(),(e=this._correctIndex(e))&&this._grid.isValid(e)&&(null==t||null!=(t=this._data.getRows(this,t,e))&&("string"==typeof t?this._pasteSingleCell(e,t):1==t.length?this._pasteSingleLine(e,t[0]):1<t.length&&this._pasteMultiLines(e,t)),It.CellIndex.areEquals(e,n)||this._grid.setFocusedIndex(n,!1,!1))},S.prototype._correctIndex=function(e){var t;return e&&(t=this._grid,e.normalize(t),this._grid.isValid(e)&&t.pasteOptions.selectionBase&&0<t.selections.count&&(t=t.selections.getItem(0).getBounds().firstCell,e.column=t.column,e.itemIndex=t.itemIndex)),e},S.prototype._createDate=function(){return new h},S.prototype._readValue=function(e,t,n){var r=void 0;switch(e.getField(t.dataIndex).dataType){case c.ValueType.NUMBER:r=Number(n);break;case c.ValueType.DATETIME:r=new Date(n);break;case c.ValueType.BOOLEAN:r=Boolean(n);break;default:r=n}return r},S.prototype._convertValue=function(e,t,n,i,s){var o=void 0,u=n.dataIndex,a=e.getField(u),f=this._grid.delegate.getCellEditor(an.CellEditor.getEditorType(n.editor));switch(a.dataType){case c.ValueType.NUMBER:var o=NaN,l=void 0;i?(m=n.name,t.applyNumberFormat&&(v=n.getCellStyle(null),(g=f instanceof an.NumberCellEditor&&f.editFormat||"object"==typeof v&&v.numberFormat)&&(l=new C.DecimalFormatter(g))),(v=t.numberCharExpOfCol(m))&&(i=i.replace(v,"")),(g=t.numberSeparatorOfCol(m))&&(i=i.replace(g,".")),o=l?+parseFloat(i).toFixed(l.maxDigits):parseFloat(i),t.applyMaxLength&&(y=String(o).split("."),f instanceof an.NumberCellEditor&&0<f.maxIntegerLength&&(y[0]=y[0].substr(0,f.maxIntegerLength)),i=y.join("."),f instanceof an.NumberCellEditor&&0<f.maxLength&&(i=i.substr(0,f.maxLength)),o=parseFloat(i))):""==i&&(o=null);break;case c.ValueType.DATETIME:o=null;var h=t.dateReaders;if(i&&h)for(var p=0;p<h.length&&!(o=h[p].toDate(i));p++);null===o&&(o=new Date(i),isNaN(o.getTime())&&(o=null)),null===o&&(o=a.readValue(i));break;case c.ValueType.BOOLEAN:var d=t.boolReader;(o=void 0)===(o=i&&d?d.toBoolStrict(i):o)&&(o=a.readValue(i));break;default:if(i=String(i))if(f instanceof Nn.DropDownCellEditor){f.initOptions(),f.applyOptions(n.editor);var v=t.checkDomainOnly&&f.domainOnly,m=t.convertLookupLabel,g=-1,l=[],y=[];if(v||m)if(f.values&&0<f.values.length)y=f.values,l=f.labels;else if(n.lookupSource){for(var d=n.lookupSource,b=n.lookupKeyFieldIds,w=[],p=0;p<b.length-1;p++)w.push(s[b[p]]);d=d.getTextDomain(w),y=d&&d.keys,l=d&&d.values}else n.values&&0<n.values.length&&(y=n.values,l=n.labels);i=m&&y&&l&&y.indexOf(i)<0&&0<=(g=l.indexOf(i))?y[g]:i,i=!(y&&0<=y.indexOf(i))&&v?"":i}else t.applyMaxLength&&f&&f instanceof an.TextCellEditor&&0<f.maxLength&&(i=i.substr(0,f.maxLength)),n.textInputCase==r.TextInputCase.LOWER?i=i.toLocaleLowerCase():n.textInputCase==r.TextInputCase.UPPER&&(i=i.toLocaleUpperCase());o=i}return o},S.prototype._removeChars=function(e,t){if(t)for(;;){var n=e.replace(t,"");if(n.length==e.length)break;e=n}return e},S.prototype._fireRowsPasted=function(e){for(var t=this._grid,n=[],r=0;r<e.length;r++)n.push(t.getItemIndexOfRow(e[r]));0<n.length&&t._fireItemsPasted(n)},S.prototype._cellWritable=function(e,t,n){var r=this._grid,n=r._fireCellPasting(e,n);if("boolean"==typeof n)return n;if(!r.pasteOptions.checkReadOnly)return!0;n=r.body.getIndexCellStyle(e);if(!n||null==n.readOnly&&null==n.editable){n=r.body.getRowStyle(e.item,e.itemIndex<r.fixedOptions.rowCount);if("object"!=typeof n||null==n.readOnly&&null==n.editable){n=r.fixedOptions;if((e.colFixed||e.rightFixed)&&!n.editable||e.rowFixed&&!n.rowEditable)return!1;var n=e.item&&e.item.itemState,i=!0;switch(t||n){case dt.ItemState.NORMAL:case dt.ItemState.FOCUSED:case dt.ItemState.UPDATING:i=r.canUpdate(e.item,e.dataField);break;case dt.ItemState.INSERTING:case dt.ItemState.APPENDING:i=!0}n=this.grid.getBodyCellAt(e,!1);if(n&&n.renderer2&&n.renderer2.canEdit())return i&&!e.dataColumn.readOnly;if(!n){n=e.dataColumn.renderer;if(n&&"check"===n.type&&null!=n.editable)return i&&n.editable&&!e.dataColumn.readOnly}return i&&e.dataColumn.isWritable()}return(null==n.editable||n.editable)&&!n.readOnly}return(null==n.editable||n.editable)&&!n.readOnly},S.prototype._applyMaskValue=function(e,t){var n=this.grid.body.getIndexCellStyle(e);if(n.editor&&n.editor.mask?r=n.editor.mask:n.editor||(r=e.dataColumn.editor&&e.dataColumn.editor.mask),r){var r=new an.EditMask(null,r);return r.clearBuffer(),r.writeBuffer(t,!0),r.checkValid()?r.getStripValue():null}return t},S.prototype._applyInputChars=function(e,t){if(!this.grid.pasteOptions.applyInputChars)return t;var n,r=this.grid.body.getIndexCellStyle(e).editor||e.dataColumn.editor;return r?((e=r.inputCharacters)&&(n=new RegExp("[^"+e+"]","g")).test(t)&&(t=t.replace(n,"")),(e=r.ignoreCharacters)&&(n=new RegExp("["+e+"]","g")).test(t)?t.replace(n,""):t):t},S.prototype._pasteSingleCell=function(e,t){var n=this._grid,r=n.dataSource,i=e.dataColumn,s=n.pasteOptions;if(null!=t&&r&&i&&i.isWritable()&&!n.editOptions.readOnly&&e.item.canEdit()){(t=t.lastIndexOf("\r\n")==t.length-1?t.substr(0,t.length-2):t).lastIndexOf("\n")==t.length-1&&(t=t.substr(0,t.length-1));var o=this._convertValue(r,s,i,t,e.item&&e.item.getRowData()),o=s.applyEditMask?this._applyMaskValue(e,o):o;if(o=this._applyInputChars(e,o),this._cellWritable(e,null,o))if(n.isItemEditing()||s.startEdit&&n.edit(e)){var u=e.item,r=[],t=[];t[e.dataField]=o,r[e.dataField]=u.getData(e.dataField),n.setCellUpdateEventLock(s.noEditEvent);try{u.setData(i.dataIndex,o)}finally{n.setCellUpdateEventLock(!1)}n.validateCellCommit(e,e.item.getData(e.dataField)),n._fireEditItemPasted(u,[e.dataField],r,t),n.refreshView()}else{this._pasting=!0;try{var a=n.validationManager,f=s.forceRowValidation,l=s.forceColumnValidation;u=e.item;var h=f||l?u.getRowData():[];h[i.dataIndex]=o,this._appendingItem.values=h;var p=dt.ItemState_isInserting(u.itemState);if(this._appendingItem.dataRow=u.dataRow,this._appendingItem.setIndex(u.index),this._appendingIndex.column=null,this._appendingIndex.itemIndex=e.itemIndex,f&&a.validateRow(this._appendingItem,p,!0,!0),l){this._appendingIndex.column=i;try{a.validateCell(this._appendingIndex,p,!0)}catch(e){if(!(e instanceof Dt.ValidationError))throw e;if(c.ValidationLevel_compare(e.level,n.editOptions.commitLevel)<0)throw e}}a.clearInvalidCell(this._appendingIndex),n.updatePastedRow(u,h,!f)}finally{this._pasting=!1}}}},S.prototype._pasteSingleLine=function(e,t){var n,r=this._grid,i=r.dataSource,s=r.pasteOptions,o=r.editOptions,u=!1;if(i&&!o.readOnly&&i){if(r.isItemEditing()||s.startEdit&&r.edit(e)){for(var a=[],f=[],l=[],h=e.column,p=e.item,d=Math.min(t.columns.length,t.values.length),v=0;v<d;v++)for(var m=t.columns[v],g=t.values[v],y=0;y<g.length;y++){var b=m[y],w=g[y];if(b){var E=It.CellIndex.temp(r,e.itemIndex,b),S=p.getData(b.dataIndex),x=this._convertValue(i,s,b,w,p&&p.getRowData());x=s.applyEditMask?this._applyMaskValue(E,x):x,x=this._applyInputChars(E,x),r.setCellUpdateEventLock(s.noEditEvent);try{(n=this._cellWritable(E,null,x))&&p.setData(b.dataIndex,x)}finally{r.setCellUpdateEventLock(!1)}n&&(e.column=b,r.validateCellCommit(e,p.getData(b.dataIndex)),a.push(b.dataIndex),f[b.dataIndex]=S,l[b.dataIndex]=x,u=!0)}}u&&(r._fireEditItemPasted(p,a,f,l),e.column=h,r.refreshView())}else{this._pasting=!0;try{var T=r.validationManager,N=s.forceRowValidation,C=s.forceColumnValidation;p=e.item,l=N||C?p.getRowData():[],d=Math.min(t.columns.length,t.values.length);var k,m=void 0,g=void 0;for(v=0;v<d;v++)for(m=t.columns[v],g=t.values[v],y=0;y<g.length;y++)(k=m[y])&&(E=It.CellIndex.temp(r,e.itemIndex,k),x=this._convertValue(i,s,k,g[y],p&&p.getRowData()),x=s.applyEditMask?this._applyMaskValue(E,x):x,x=this._applyInputChars(E,x),this._cellWritable(E,null,x)&&(l[k.dataIndex]=x,u=!0));if(u){var L=dt.ItemState_isInserting(p.itemState);if(this._appendingItem.values=l,this._appendingItem.setIndex(p.index),this._appendingItem.dataRow=p.dataRow,this._appendingIndex.column=null,this._appendingIndex.itemIndex=e.itemIndex,N&&T.validateRow(this._appendingItem,L,!0,!0),C)for(v=0;v<d;v++)for(m=t.columns[v],g=t.values[v],y=0;y<g.length;y++){this._appendingIndex.column=m[y];try{T.validateCell(this._appendingIndex,L,!0)}catch(e){if(!(e instanceof Dt.ValidationError))throw e;if(c.ValidationLevel_compare(e.level,o.commitLevel)<0)throw e}}T.clearInvalidCells(p.dataId),r.updatePastedRow(p,l,!N)}}finally{this._pasting=!1}}r.selections.clear(),r.selections.add(e,new It.CellIndex(r,e.itemIndex,this._data.lastLayout()),Zt.SelectionStyle.BLOCK)}},S.prototype._pasteMultiLines=function(e,t){var n=this._grid,r=n.dataSource;if(r){var i=n.pasteOptions,s=i.checkReadOnly;if(!s||!n.editOptions.readOnly){var o=i.noDataEvent,u=t.length,a=e.itemIndex,f=r.fieldCount,l=n.getDataColumns(!1),h=l.length,p=n.validationManager,d=i.forceRowValidation,v=i.forceColumnValidation,m=this._appendingItem,g=this._appendingIndex,y=void 0,b=void 0,w=void 0,E=void 0,S=i.eventEachRow,x=[];i.commitEdit&&n.commit(!1)||n.cancel();var T=n.itemCount;m.dataSource=r,o&&r.beginUpdate();try{for(this._pasting=!0,y=0;y<u&&a<T;y++)try{if((F=n.getItem(a)).itemState==dt.ItemState.APPENDING)break;for(;F&&F.dataRow<0;)a++,F=n.getItem(a);if(null==F)break;for(var N=t[y],C=d||v?F.getRowData():[],k=d||v?F.getRowData():[],L=!1,A=[],w=Math.min(N.columns.length,N.values.length),b=0;b<w;b++)for(var O=N.columns[b],M=N.values[b],E=0;E<M.length;E++)(D=O[E])&&D instanceof jt.DataColumn&&(H=It.CellIndex.temp(n,F.index,D),B=this._convertValue(r,i,D,M[E],F&&F.getRowData()),B=i.applyEditMask?this._applyMaskValue(H,B):B,B=this._applyInputChars(H,B),(j=this._cellWritable(H,null,B))&&(L=L||j||!s,A.push(D.dataIndex),k[D.dataIndex]=F.getData(D.dataIndex),C[D.dataIndex]=B));if(L)try{m.values=C,m.setIndex(F.index),m.dataRow=F.dataRow,g.column=null,g.itemIndex=F.index;var _=dt.ItemState_isInserting(F.itemState);if(d&&p.validateRow(m,_,!0,!0),v)for(E=0;E<h;E++){var D=l[E];g.column=D;try{p.validateCell(g,_,!0)}catch(t){if(!(t instanceof Dt.ValidationError))throw t;if(c.ValidationLevel_compare(t.level,n.editOptions.commitLevel)<0)throw t}}n.updatePastedRow(F,C,!d),p.clearInvalidCells(m.dataId),S&&n._fireEditItemPasted(F,A,k,C),x.push(F.dataRow)}catch(t){if(i.stopOnError)throw t}a++}catch(t){throw a=Math.max(e.itemIndex,a-1),n.setFocusedIndex(e,!1),n.selections.clear(),n.selections.add(e,new It.CellIndex(n,a,this._data.lastLayout()),Zt.SelectionStyle.BLOCK),t}if(y<u&&i.enableAppend){for(;y<u;y++){N=t[y],C=m.values=[],k=[],m.dataRow=-1,m.setIndex(-1);try{var P,A=[];for(w=Math.min(N.columns.length,N.values.length),b=0;b<w;b++){var H,B,j,O=N.columns[b],M=N.values[b];for(E=0;E<M.length;E++)(D=O[E])&&(H=It.DummyCellIndex.tempItem(n,m,D),B=this._convertValue(r,i,D,M[E],C),B=i.applyEditMask?this._applyMaskValue(H,B):B,B=this._applyInputChars(H,B),(j=this._cellWritable(H,dt.ItemState.APPENDING,B))&&(A.push(D.dataIndex),C[D.dataIndex]=B,k[D.dataIndex]=void 0))}if(i.fillColumnDefaults)for(E=0;E<h;E++)-1<(D=l[E]).dataIndex&&void 0===C[D.dataIndex]&&void 0!==D.defaultValue&&(C[D.dataIndex]=D.defaultValue);if(i.fillFieldDefaults)for(E=0;E<f;E++)void 0!==C[E]||void 0!==(P=r.getField(E)).defaultValue&&(C[E]=P.defaultValue);try{if(m.values=C,m.dataRow=-1,m.setIndex(-1),this._appendingIndex.column=null,this._appendingIndex.itemIndex=-1,d&&p.validateRow(m,!0,!0,!0),i.forceColumnValidation)for(E=0;E<h;E++){D=l[E],this._appendingIndex.column=D;try{p.validateCell(this._appendingIndex,!0,!0)}catch(t){if(!(t instanceof Dt.ValidationError))throw t;if(c.ValidationLevel_compare(t.level,n.editOptions.commitLevel)<0)throw t}}n.appendPastedRow(C);var F,I=r.rowCount-1;S&&(F=n.getItem(n.getItemIndexOfRow(I)),n._fireEditItemPasted(F,A,k,C)),x.push(I)}catch(t){if(i.stopOnError)throw t}}catch(t){throw a=Math.max(e.itemIndex,n.itemCount-1),n.setFocusedIndex(e,!1),n.selections.clear(),n.selections.add(e,new It.CellIndex(e.grid,a,this._data.lastLayout()),Zt.SelectionStyle.BLOCK),t}}a=o?-1:n.itemCount}this._fireRowsPasted(x)}catch(t){throw this._fireRowsPasted(x),t}finally{this._pasting=!1,o&&(r.endUpdate(),a<0&&(a=r.rowCount))}n.setFocusedIndex(e,!1),n.selections.clear(),n.selections.add(e,new It.CellIndex(e.grid,a-1,this._data.lastLayout()),Zt.SelectionStyle.BLOCK)}}},i=S,t.ClipboardManager=i});t(zn),zn.ClipboardData,zn.ClipboardSource,zn.DefaultClipboardData,zn.ClipboardItem,zn.ClipboardIndex,zn.ClipboardManager;var Wn=n(function(e,t){function i(e){var t=n.call(this)||this;return t._visible=!0,t._enabled=!0,e&&t.assignFrom(e),t}function u(e,t){return t=s.call(this,t)||this,t._parent=e,t}function h(e,t){var n=a.call(this,t)||this;return n._name=t.name,n._parent=e,n._items=n._load(t.children),n}function m(e){var t=d.call(this)||this;return t._showing=!1,t._viewGridInside=!1,t._container=e,t._element=t._createElement(),t._element.addEventListener("contextmenu",function(e){e.preventDefault()}),t}function b(e){var t=g.call(this)||this;return t._grolbalMouseHandler=function(e){for(var t=e.target;t;){if(t===this._mainView._element||t.menuItem)return;t=t.parentElement}this.close()}.bind(t),t._container=e,t._containerDom=e._containerDom,t._menus=[],t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=x.EventAware,l.__extends(i,n),i.prototype._doDispose=function(){return n.prototype._doDispose.call(this)},_dp(i,"visible",{get:function(){return this._visible},set:function(e){this._visible=e}}),_dp(i,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e}}),_dp(i,"label",{get:function(){return this._label},set:function(e){this._label=e}}),_dp(i,"tag",{get:function(){return this._tag},set:function(e){this._tag=e}}),_dp(i,"group",{get:function(){return null}}),_dp(i,"manager",{get:function(){return null}}),_dp(i,"type",{get:function(){return null}}),_dp(i,"checked",{get:function(){return null}}),i.prototype.click=function(){},i.prototype.isSeparator=function(){return!1},i),s,o=(s=r,l.__extends(u,s),u.prototype._doDispose=function(){this._parent=null,this._callback=null,s.prototype._doDispose.call(this)},_dp(u,"type",{get:function(){return this._type},set:function(e){this._type=e}}),_dp(u,"group",{get:function(){return this._group},set:function(e){this._group=e}}),_dp(u,"checked",{get:function(){return this._checked},set:function(e){this._checked=e}}),_dp(u,"callback",{get:function(){return this._callback},set:function(e){this._callback=e}}),_dp(u,"parent",{get:function(){return this._parent},set:function(e){this._parent=e}}),u.prototype.isSeparator=function(){return"-"===this._label||this._type===c.MenuItemType.SEPARATOR},u.prototype.getData=function(){return{label:this._label,checked:this._checked,enabled:this._enabled,tag:this.tag}},u.prototype.click=function(){"check"===this._type&&(this._checked=!this._checked),this._parent&&this._parent.itemClicked(this)},_dp(u,"manager",{get:function(){return this._parent.manager}}),u.prototype._itemClicked=function(e){},u);t.PopupMenuItem=o;var a,f=(a=r,l.__extends(h,a),h.prototype._doDispose=function(){this._items&&this._items.forEach(function(e,t){e.dispose()}),this._items=null,this._parent=null,a.prototype._doDispose.call(this)},_dp(h,"name",{get:function(){return this._name},set:function(e){this._name=e}}),_dp(h,"items",{get:function(){return this._items}}),_dp(h,"parent",{get:function(){return this._parent}}),_dp(h,"manager",{get:function(){for(var e=this._parent;e;){if(e.popupMenuManager instanceof y)return e.popupMenuManager;if(e instanceof y)return e;e=e._parent}return null}}),h.prototype.count=function(){return this._items?this._items.length:0},h.prototype.itemClicked=function(e){if(e.parent==this&&e.type===c.MenuItemType.RADIO){var t=e.group,n=void 0;if(t){for(var r=0;r<this._items.length;r++)(n=this._items[r])instanceof o&&n.type===c.MenuItemType.RADIO&&n.group===t&&(n.checked=!1);e.checked=!0}}var i=this.manager.grid;"function"==typeof e.callback?e.callback.call(this,i.handler,e.toProxy(),this.manager.clickData):this._parent instanceof y?this._parent.doMenuItemClick(e,this.manager.clickData):this._parent.onMenuItemClick?this._parent.onMenuItemClick(e,this.manager.clickData):this._parent.itemClicked(e)},h.prototype._load=function(e){var t=[];if(e)for(var n=0,r=e.length;n<r;n++){var i=e[n];i=new(p.Utils.isArray(i.children)&&0<i.children.length?h:o)(this,i),t.push(i)}return t},h.CLICKED="onPopupMenuClicked",h);t.PopupMenu=f;var d,v=(d=x.EventAware,l.__extends(m,d),m._borrowView=function(e){var t=m.$_views[e.$_hash]||[];return(m.$_views[e.$_hash]=t).pop()||new m(e)},m._returnView=function(e){m.$_views[e._container.$_hash].push(e)},m.prototype._doDispose=function(){d.prototype._doDispose.call(this)},_dp(m,"parentView",{get:function(){return this._parentView},set:function(e){this._parentView=e}}),_dp(m,"childView",{get:function(){return this._childView},set:function(e){this._childView=e}}),_dp(m,"currDiv",{get:function(){return this._currDiv}}),_dp(m,"manager",{get:function(){return this._menu.manager}}),m.prototype.show=function(e,t,n,r,i,s,o,u){if(!this._showing){this._showing=!0;try{var a=n.parent;for(this._containerElement=e._container,this._parentView=t,this._firstItem=null,this._menu=n;a._parent&&!(a instanceof ir.GridBase);)a=a.parent;a&&(this._viewGridInside=a instanceof ir.GridBase?a.editorOptions.viewGridInside:a instanceof y&&a.grid.editorOptions.viewGridInside),this.$_show(e,this._menu,r,i,s,o)}finally{this._showing=!1}}},m.prototype.boundsByContainer=function(){return null},m.prototype.hide=function(e){(e=void 0===e?!0:e)&&this._parentView?this._parentView.hide(!0):(this.$_hideChildView(),(e=this._element)&&e.parentElement&&e.parentElement.removeChild(e))},m.prototype.hideChild=function(){this.$_hideChildView()},m.prototype.changeItemIndex=function(e){var t,n=this._itemIndex,r=this._menu._items;if(0==e)return this._itemIndex=-1,void this.$_refreshItems(this._itemIndex);if(r&&!(n>=r.length)){for(;(t=r[n+=e])&&!t.enabled;);t&&(this._itemIndex=n,this.$_refreshItems(this._itemIndex))}},m.prototype.menuItemClicked=function(e){this._menuItemClicked(e)},m.prototype.$_show=function(e,t,n,r,i,s){if(this._element){var o=e.doc,u=p.getDocWin(o),a=this._element,f=a.style,l=this.manager,c=e.gridView.displayOptions.baseZindex;this._element.style.zIndex=String(c+4);var h=l.dropdownCount,d=this._viewGridInside?e._container:o.documentElement;this._menu=t,this._itemIndex=-1,p.Utils.clearElements(this._element),this.$_buildItems(t),p.Utils.disableSelection(a),d.appendChild(a);var v=0;if(h&&t.items.length>h)for(var m=0,g=0;m<t.items.length&&g<h;m++){var y=this._element.children[m];y.menuItem.isSeparator()||(v+=y.offsetHeight,g++)}0<v&&v<a.offsetHeight?(f.height=v+2+"px",f.overflow="auto"):(f.removeProperty("height"),f.overflow="hidden");var b=p.Utils.getBrowserSize(),c=p.Utils.ieTen||p.Utils.ieOld?p.Utils.getClientRect(o.body):p.Utils.getClientRect(o.documentElement),l=p.Utils.getClientRect(e._container),d=b.width,e=b.height,b=p.Utils.getClientRect(a),a=u.pageXOffset||o.documentElement.scrollLeft,u=u.pageYOffset||o.documentElement.scrollTop;o.documentElement.scrollWidth>o.documentElement.clientWidth&&(e-=18),o.documentElement.scrollHeight>o.documentElement.clientHeight&&(d-=18),this._viewGridInside?(b.height>=l.height&&(f.height=l.height-4+"px",f.overflow="auto",b=p.Utils.getClientRect(this._element)),r+l.top+b.height>l.bottom&&(r=this._parentView?l.bottom-b.height-l.top-3:r-b.height-s),n+l.left+b.width>l.right&&(n=this._parentView?l.right-b.width-l.left-3:n-b.width-i)):(this._parentView||(n+=l.left-c.left,r+=l.top-c.top),b.height>=e&&(f.height=e-4+"px",f.overflow="auto",b=p.Utils.getClientRect(this._element)),r+b.height>=e+u-3&&(r=r-b.height-3)<0&&(r=Math.max(0,e-b.height-3)),n+b.width>=d+a-3?n=Math.max(0,d-b.width-3):void 0!==i&&b.width<i&&(n+=i-b.width)),p.Utils.move(this._element,Math.max(0,n),Math.max(0,r))}},m.prototype._createElement=function(){var e=function(e){27==e.keyCode&&this.hide()}.bind(this),t=this._container.doc.createElement("div");return t.style.setProperty("position","absolute","important"),t.className="rg-popup-menu",this._container.$_addListener(t,"keydown",e,!1),t},m.prototype._showChild=function(e){var t,n;this==this.manager.showingView&&(this._childView&&this._childView._menu===e.menuItem||this._currDiv!==e||(this.$_hideChildView(),t=e.menuItem,n=this._element.getBoundingClientRect(),n=this._element.offsetLeft+n.width-4,e=this._element.offsetTop+e.offsetTop-this._element.scrollTop,this._childView=m._borrowView(this._container),this._childView.show(this._container,this,t,n,e)))},m.prototype.$_hideChildView=function(){this.manager.showingView=null,this._childView&&(this._childView.$_hideChildView(),this._childView._element&&this._childView._element.parentElement&&this._childView._element.parentElement.removeChild(this._childView._element),m._returnView(this._childView)),this._childView=null},m.prototype._menuItemActived=function(e){p.getWin(e);var t=(this._currDiv=e).menuItem,n=this.manager.showingView=this.manager.activeView=e.menuView;t instanceof o?n.childView&&n.$_hideChildView():t instanceof f&&t.enabled&&(this._timer&&clearTimeout(this._timer),this._timer=setTimeout(function(){n._showChild(e)},200))},m.prototype._menuItemDeactived=function(e){},m.prototype._menuItemClicked=function(e){var t=e.menuItem;t instanceof f?t.enabled&&this._showChild(e):t?(this.hide(!0),t.enabled&&t.click(),this.manager.close()):this.$_hideChildView()},m.prototype.$_refreshItems=function(e){for(var t=this._element,n=0,r=t.childElementCount;n<r;n++){var i,s,o,u,a=t.childNodes[n];a.style.background=n===e?"rgba(0,255,0,0.2)":"",n==e&&(i=a.offsetTop,s=a.offsetHeight+4,o=t.offsetHeight,i<(u=t.scrollTop)?t.scrollTop=Math.max(0,t.scrollTop+(i-u)):u+o<i+s&&(t.scrollTop=t.scrollTop+i+s-(u+o)),this._menuItemActived(a))}},m.prototype.$_buildItems=function(e){for(var t=e.items,n=[],r=this._container.doc,i=0,s=t.length;i<s;i++){var u,a,l,h=t[i];h.visible&&((u=r.createElement("div")).menuView=this,u.menuItem=h,u.style.position="relative",u.style.cssFloat="none",u.style.width="100%",h instanceof o&&h.isSeparator()?(u.className="rg-popup-separator",(a=r.createElement("hr")).className="rg-popup-separator-hr",u.appendChild(a),u.onmouseover=function(e){this._menuItemActived(e.currentTarget)}.bind(this)):(this._firstItem||(this._firstItem=u),n.length=0,n.push("rg-popup-item"),h.group&&n.push("rg-popup-"+h.group),h.enabled||n.push("rg-popup-item-disable"),u.className=n.join(" "),u.style.whiteSpace="pre",u.onclick=function(e){this._menuItemClicked(e.currentTarget)}.bind(this),u.onmouseover=function(e){this._menuItemActived(e.currentTarget)}.bind(this),u.onmouseout=function(e){this._menuItemDeactived(e.currentTarget)}.bind(this),a=(l=r.createElement("span")).style,n.length=0,a.setProperty("display","inline-block"),a.setProperty("min-width","20px"),a.setProperty("min-height","7px"),a.setProperty("vertical-align","middle"),a.setProperty("pointer-events","none","important"),l.textContent="",p.Utils.included(h.type,[c.MenuItemType.CHECK,c.MenuItemType.RADIO])&&n.push(h.group?"rg-popup-radio":"rg-popup-check"),h.checked&&n.push(h.group?"rg-popup-radio-checked":"rg-popup-check-checked"),l.className=n.join(" "),l.tabIndex=-1,p.Utils.disableSelection(l),u.appendChild(l),(l=r.createElement("span")).id="$popupMenu_item_"+m.$_menuId++,l.style.paddingRight="24px",l.style.pointerEvents="none",l.style.verticalAlign="middle",l.innerHTML=h.label,l.tabIndex=-1,p.Utils.disableSelection(l),u.appendChild(l),h instanceof f&&((h=r.createElement("span")).className="rg-popup-expander",u.appendChild(h),h.style.position="absolute",h.style.right="0px",h.style.width="24px",h.style.height="17px",h.style.verticalAlign="middle",h.style.setProperty("pointer-events","none","important"),h.innerHTML=" ",h.tabIndex=-1,p.Utils.disableSelection(h),u.appendChild(h))),p.Utils.disableSelection(u),this._element.appendChild(u))}},m.$_menuId=0,m.$_views={},m);t.PopupMenuView=v;var g,y=(g=x.EventAware,l.__extends(b,g),b.prototype._doDispose=function(){this.close(),this._mainView=null,this._showingView=null,this._clickData=null,this._activeView=null,this._container=this._containerDom=null,g.prototype._doDispose.call(this)},_dp(b,"clickData",{get:function(){return this._clickData},set:function(e){this._clickData=e}}),_dp(b,"grid",{get:function(){return this._container.gridView}}),_dp(b,"dropdownCount",{get:function(){if(this._container&&this._container.gridView)return this._container.gridView.displayOptions.popupDropdownCount}}),_dp(b,"showingView",{get:function(){return this._showingView},set:function(e){this._showingView=e}}),_dp(b,"activeView",{get:function(){return this._activeView},set:function(e){this._activeView=e}}),b.prototype.popupManager=function(){return this},b.prototype.isShow=function(){return!!this._mainView},b.prototype.indexOf=function(e){for(var t=this._menus.length;t--;)if(p.Utils.compareTextValue(this._menus[t].name,e,!0,!1))return t;return-1},b.prototype.getMenu=function(e){for(var t=this._menus.length;t--;)if(p.Utils.compareTextValue(this._menus[t].name,e,!0,!1))return this._menus[t];return null},b.prototype.addMenu=function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=null),p.Utils.isWhiteSpace(e))throw"Menu name is empty.";var i;return 0<=(i=this.indexOf(e))&&!n?this._menus[i]:(t=new f(r||this,{name:e,children:t}),n&&-1<i?this._menus[i]=t:this._menus.push(t),t)},b.prototype.removeMenu=function(e){if(-1<(n=this.indexOf(e)))for(var t=this._menus.splice(n,1),n=t.length;0<n;n--)t[n-1].dispose()},b.prototype.clearMenus=function(){this._menus.length=0},b.prototype.show=function(e,t,n,r,i,s,o){void 0===r&&(r=null),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null);var u,a,l,c,h=this.grid,d=p.getWin(this._containerDom),m=n&&h.getBodyCellAt(n);"string"==typeof e?e=this.getMenu(e):e instanceof f||(e=new f(this,{children:e})),e&&(o=null!=r&&null!=i?(s=isNaN(s=Math.round(s))?0:s,isNaN(o=Math.round(o))?0:o):(u=this.grid.container.getBound(),l=void 0,a=(l=m&&m.merged?(a=h.layoutManager,l=(c=h.getBodyViewAt(n)).getCellRect(a,m,!1),c.boundsByScreen(l)):t.getBoundingClientRect()).bottom,r=l.left-u.x,i=a-u.y,s=l.width,l.height),this._mainView=this._activeView=v._borrowView(this._container),t instanceof d.HTMLTableCellElement&&(l=h.getCellType(t),c=h.getTableView(t),h=void 0,"data"===l?h=(m=m||c.bodyCellByCell(t)).grouped?qn.ClickData.getItem("groupHeader",m.item.index,null):qn.ClickData.getCell(l,m):"header"===l&&(t=c.layoutByCell(t),h=qn.ClickData.getLayout(l,t)),this.clickData=h),this._mainView.show(this._container,null,e,r,i,s,o),d.addEventListener("mousedown",this._grolbalMouseHandler,!1))},b.prototype.showContext=function(e,t,n,r,i){var s;e&&!this._mainView&&(s=p.getWin(this._containerDom),this.clickData=i,this._mainView=this._activeView=v._borrowView(this._container),this._mainView.show(this._container,null,e,n,r,0,0,t),s.addEventListener("mousedown",this._grolbalMouseHandler,!1))},b.prototype.close=function(){var e;this._mainView&&(e=p.getWin(this._containerDom),this._mainView.hide(),v._returnView(this._mainView),this._mainView=null,e.removeEventListener("mousedown",this._grolbalMouseHandler,!1))},b.prototype.keyDown=function(e){this._doKeydown(e)},b.prototype.doMenuItemClick=function(e,t){this.fireEvent(b.MENU_ITEM_CLICKED,e,t)},b.prototype._doKeydown=function(e){var t=this._activeView,n=null==t?void 0:t.currDiv;switch(e.keyCode){case 40:t.changeItemIndex(1);break;case 38:t.changeItemIndex(-1);break;case 37:t.parentView&&(t.changeItemIndex(0),t.hideChild(),this._showingView=this._activeView=t.parentView||this._mainView);break;case 39:t&&t.childView&&(t=this._showingView=this._activeView=t.childView).changeItemIndex(1);break;case 13:case 32:t.menuItemClicked(n)}},b.prototype.$_buildItems=function(e){},b.MENU_ITEM_CLICKED="onPopupMenuManagerMenuItemClicked",b);t.PopupMenuManager=y});t(Wn),Wn.PopupMenuItem,Wn.PopupMenu,Wn.PopupMenuView,Wn.PopupMenuManager;var Xn=n(function(e,t){function i(){return n.call(this,"summaryCell")||this}function u(e){return s.call(this,e)||this}function c(e){return e=a.call(this,e)||this,e.visible=!1,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=zt.SummaryCell,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(i,"summaryIndex",{get:function(){return this._childIndex},set:function(e){this._childIndex=e}}),i.prototype._getSummary=function(e,t){return e&&e.headerSummaries.get(t)},i);t.HeaderSummaryCell=r;var s,o=(s=zt.GridSummaryObject,l.__extends(u,s),_dp(u,"summaryIndex",{get:function(){return this._childIndex}}),u.prototype.getCellStyleName=function(){return u.CELL_CSS},u.prototype._createCell=function(){return new r},u.CELL_CSS="rg-header-summary-cell",u);t.HeaderSummary=o;var a,f=(a=zt.SummaryCollection,l.__extends(c,a),c.prototype._createSummary=function(e){return new o(e||this._grid)},c);t.HeaderSummaryCollection=f});t(Xn),Xn.HeaderSummaryCell,Xn.HeaderSummary,Xn.HeaderSummaryCollection;var Vn=n(function(e,t){function i(e,t){return n.call(this,e,t,"headerSummaryView")||this}function u(){return null!==s&&s.apply(this,arguments)||this}function f(){return null!==a&&a.apply(this,arguments)||this}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=hn.SummaryElement,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},i.prototype._getCssSelector=function(){return"rg-header-summary"},i.prototype._getRendererStyle=function(){return"rg-header-summary-renderer"},i.prototype._getSummaryRows=function(e){return e.headerSummaryRows},i.prototype._getCollection=function(){return this.model},i.prototype._getSummaryHeight=function(e){return e.summaryHeight},i.prototype._getSummaryCount=function(e){return e.headerSummaryCount},i.prototype._getSpanOf=function(e,t){return e.getSummarySpan(t)},i.prototype._getUserSpanOf=function(e,t){return e.getSummaryUserSpan(t)},i.prototype._getSummaryItem=function(e,t){return e.firstColumn.headerSummaries.get(t)},i.prototype._getTableRowCount=function(e){return e.headerSummaryRows*e.headerSummaryCount},i);t.HeaderSummaryElement=r;var s,o=(s=r,l.__extends(u,s),u.prototype._getCssSelector=function(){return"rg-fixed-header-summary"},u.prototype._getExplicitWidth=function(e){return e.fixedWidth-e.fixedBarWidth},u.prototype._getFirstCell=function(e){return this._getStartCell(e)},u.prototype._getLastCell=function(e){return this._getEndCell(e)},u.prototype._getStartCell=function(e){return 0},u.prototype._getEndCell=function(e){return e.fixedCellCount-1},u.prototype._getCellCount=function(e){return e.fixedCellCount},u.prototype._getCellWidth=function(e,t){return e.getFixedCellWidth(t)},u);t.FixedHeaderSummaryElement=o;var a,r=(a=r,l.__extends(f,a),f.prototype._getCssSelector=function(){return"rg-fixed-header-summary"},f.prototype._getFirstCell=function(e){return this._getStartCell(e)},f.prototype._getLastCell=function(e){return this._getEndCell(e)},f.prototype._getStartCell=function(e){return e.cellCount-e.rightCellCount},f.prototype._getEndCell=function(e){return e.cellCount-1},f.prototype._getCellCount=function(e){return e.rightCellCount},f.prototype._getCellWidth=function(e,t){return e.getRightCellWidth(t)},f);t.RightHeaderSummaryElement=r});t(Vn),Vn.HeaderSummaryElement,Vn.FixedHeaderSummaryElement,Vn.RightHeaderSummaryElement;var $n=n(function(e,t){function i(e){return e=n.call(this,e,"gridSumCellView")||this,e._text="",e._styleName="",e._textChanged=!1,e}function u(e){var t=s.call(this,e,null,"gridSumView")||this;t._cells=[];for(var n=t._count=0;n<3;n++)t.addChild(t._cells[n]=new r(e));return t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=sn.CellElement,l.__extends(i,n),_dp(i,"model",{get:function(){return this._model},set:function(e){e!==this._model&&(this._model=e,this._changed())}}),_dp(i,"text",{get:function(){return this._text},set:function(e){e!=this._text&&(this._text=e||"",this._textChanged=!0,this._changed())}}),i.prototype.setStyleName=function(e,t){t!=this._styleName&&(this._styleName=t,this._setClassName(e))},i.prototype._getCssSelector=function(){return this._styleName},i.prototype._doUpdateContent=function(e,t,n){this._textChanged&&(this._textChanged=!1,n[p.Utils.TextProp]=this._text)},i.prototype._doRender=function(e){},i);t.GridSumCellElement=r;var s,o=(s=rn.SimpleTableElement,l.__extends(u,s),u.prototype._doDispose=function(){this._cells=null,s.prototype._doDispose.call(this)},u.prototype.getSumModel=function(e){for(var t=0;t<this._cells.length;t++)if(e===this._getTableCell(0,t))return this._cells[t].model},u.prototype.getCellType=function(e){return e=this.getSumModel(e),e===this.grid.rowIndicator?"indicator":e===this.grid.stateBar?"state":e===this.grid.checkBar?"check":void 0},u.prototype._getCssSelector=function(){return"rg-sum"},u.prototype._doPrepareTableExtents=function(e){for(var t,n=e.grid.rowBarContainer,e=e.sectionObjects,r=this._count=0,i=e;r<i.length;r++){var s=i[r];s.visible&&(((t=this._cells[this._count++]).model=s)instanceof Xt.RowIndicator?t.width=n.rowIndicator.width:s instanceof Vt.StateBar?t.width=n.stateBar.width:s instanceof $t.CheckBar&&(t.width=n.checkBar.width))}},u.prototype._prepareCellContent=function(e,t){return this.grid.doc.createElement("div")},u.prototype._doLayoutContent=function(e){for(var t=e.grid,n=this._count,r=this._getTableRowCount(e);this.childCount<n;)this.addChild(this._cells[this.childCount]);for(;this.childCount>n;)this.removeLast();for(var i=0;i<n;i++){var s=this.getChild(i),o=s.model,u=o.getSumCell(),a=this._getTableCell(0,i),f=a.firstElementChild,l=this.$_getCellSelector()+" "+o.getSumStyleName();if(this._chromium){a.rowSpan=r;for(var c=1;c<r;c++)this._getTableCell(c,i).style.display="none"}s.setStyleName(a,l),s.text=o.sumText,s.updateCell(t,u,f)}},u.prototype._doRender=function(e){},u.prototype._getTableRowCount=function(e){return this._chromium?e.headerSummaryRows*e.headerSummaryCount:1},u.prototype._getTableRowHeight=function(e,t){return this._chromium?(e=e.grid.headerSummaryView._rowPoints,e[t+1]-e[t]):this.height},u.prototype._getCellCount=function(e){return this._count},u.prototype._getCellWidth=function(e,t){return this._cells[t].width},u.prototype.$_getCellSelector=function(){return"rg-sum-cell"},u.CELL_CSS="rg-sum-cell",u);t.GridSumElement=o});t($n),$n.GridSumCellElement,$n.GridSumElement;var Jn=n(function(e,t){function i(e){var t=n.call(this,e)||this;return t._enabled=!0,t._handleVisibility=c.HandleVisibility.VISIBLE,t._commitBeforeFiltering=!0,t._toast=new Sn.ToastOptions({visible:!1,message:"Filtering..."}),t._includeParentItem=!0,t._selector=new o(e),t._automating=new f(e),t}function u(e){return e=s.call(this,e)||this,e._listHeight=170,e._showButtons=!1,e._partialSearch=!0,e._excludeCheck=!1,e._filterReset=!0,e._filtersResetText="\ud544\ud130 \ucd08\uae30\ud654",e._acceptText="\ud655\uc778",e._cancelText="\ucde8\uc18c",e._allCheckText="(\uc804\uccb4 \uc120\ud0dd)",e._searchedCheckText="(\uc870\ud68c \uc804\uccb4 \uc120\ud0dd)",e._showEmptyFilter=!0,e._emptyFilterText="(\uac12 \uc5c6\uc74c)",e._searchPlaceholder="\uac80\uc0c9...",e._closeWhenClick=!1,e._maxWidth=0,e._width=0,e._minWidth=0,e._style="rg-filter-selector",e}function h(e){return e=a.call(this,e)||this,e._dateCategorize=!0,e._numberCategorize=!0,e._textCategorize=!1,e._dateYearFormat="YYYY\ub144\ub3c4",e._dateQuarterFormat="Q\uc0ac\ubd84\uae30",e._dateMonthFormat="M\uc6d4",e._dateDayFormat="YYYY-MM-DD",e._lookupDisplay=!1,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Kt.GridBaseOptions,l.__extends(i,n),i.prototype._doDispose=function(){this._selector=this._selector.dispose(),this._automating=this._automating.dispose(),this._toast=this._toast.dispose(),n.prototype._doDispose.call(this)},_dp(i,"enabled",{get:function(){return this._enabled},set:function(e){e!=this._enabled&&(this._enabled=e,this._refreshOwner())}}),_dp(i,"handleVisibility",{get:function(){return this._handleVisibility},set:function(e){e!=this._handleVisibility&&(this._handleVisibility=e,this._refreshOwner())}}),_dp(i,"commitBeforeFiltering",{get:function(){return this._commitBeforeFiltering},set:function(e){e!=this._commitBeforeFiltering&&(this._commitBeforeFiltering=e)}}),_dp(i,"includeParentItem",{get:function(){return this._includeParentItem},set:function(e){e!=this._includeParentItem&&(this._includeParentItem=e)}}),_dp(i,"selector",{get:function(){return this._selector}}),_dp(i,"automating",{get:function(){return this._automating}}),_dp(i,"toast",{get:function(){return this._toast}}),i.prototype.assignFrom=function(e){n.prototype.assignFrom.call(this,e),e.selector&&this._selector.assignFrom(e.selector),e.automating&&this._automating.assignFrom(e.automating),e.toast&&this._toast.assignFrom(e.toast)},i);t.FilteringOptions=r;var s,o=(s=Kt.GridBaseOptions,l.__extends(u,s),_dp(u,"listHeight",{get:function(){return this._listHeight},set:function(e){e!=this._listHeight&&(this._listHeight=e)}}),_dp(u,"showButtons",{get:function(){return this._showButtons},set:function(e){e!=this._showButtons&&(this._showButtons=e)}}),_dp(u,"partialSearch",{get:function(){return this._partialSearch},set:function(e){e!=this._partialSearch&&(this._partialSearch=e)}}),_dp(u,"acceptText",{get:function(){return this._acceptText},set:function(e){e!=this._acceptText&&(this._acceptText=e)}}),_dp(u,"cancelText",{get:function(){return this._cancelText},set:function(e){e!=this._cancelText&&(this._cancelText=e)}}),_dp(u,"allCheckText",{get:function(){return this._allCheckText},set:function(e){e!=this._allCheckText&&(this._allCheckText=e)}}),_dp(u,"showEmptyFilter",{get:function(){return this._showEmptyFilter},set:function(e){e!==this._showEmptyFilter&&(this._showEmptyFilter=e)}}),_dp(u,"emptyFilterText",{get:function(){return this._emptyFilterText},set:function(e){e!=this._emptyFilterText&&(this._emptyFilterText=e)}}),_dp(u,"searchPlaceholder",{get:function(){return this._searchPlaceholder},set:function(e){e!=this._searchPlaceholder&&(this._searchPlaceholder=e)}}),_dp(u,"excludeCheck",{get:function(){return this._excludeCheck},set:function(e){e!=this._excludeCheck&&(this._excludeCheck=e)}}),_dp(u,"searchedCheckText",{get:function(){return this._searchedCheckText},set:function(e){e!=this._searchedCheckText&&(this._searchedCheckText=e)}}),_dp(u,"userFilterAddCallback",{get:function(){return this._userFilterAddCallback},set:function(e){e!=this._userFilterAddCallback&&(this._userFilterAddCallback=e)}}),_dp(u,"style",{get:function(){return this._style},set:function(e){e!=this._style&&(this._style=e)}}),_dp(u,"closeWhenClick",{get:function(){return this._closeWhenClick},set:function(e){e!=this._closeWhenClick&&(this._closeWhenClick=e)}}),_dp(u,"filterReset",{get:function(){return this._filterReset},set:function(e){e!=this._filterReset&&(this._filterReset=e)}}),_dp(u,"filtersResetText",{get:function(){return this._filtersResetText},set:function(e){e!=this._filtersResetText&&(this._filtersResetText=e)}}),_dp(u,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth=Math.max(e,0)}}),_dp(u,"width",{get:function(){return this._width},set:function(e){e!==this._width&&(this._width=e)}}),_dp(u,"minWidth",{get:function(){return this._minWidth},set:function(e){e!==this._minWidth&&(this._minWidth=e)}}),_dp(u,"textToTitle",{get:function(){return!!this._textToTitle},set:function(e){this._textToTitle=!!e}}),_dp(u,"searchIgnoreCase",{get:function(){return!!this._searchIgnoreCase},set:function(e){this._searchIgnoreCase=e}}),u);t.FilterSelectorOptions=o;var a,f=(a=Kt.GridBaseOptions,l.__extends(h,a),_dp(h,"dateCategorize",{get:function(){return this._dateCategorize},set:function(e){e!=this._dateCategorize&&(this._dateCategorize=e)}}),_dp(h,"numberCategorize",{get:function(){return this._numberCategorize},set:function(e){e!=this._numberCategorize&&(this._numberCategorize=e)}}),_dp(h,"textCategorize",{get:function(){return this._textCategorize},set:function(e){e!=this._textCategorize&&(this._textCategorize=e)}}),_dp(h,"dateCategoryCallback",{get:function(){return this._dateCategoryCallback},set:function(e){e!=this._dateCategoryCallback&&(this._dateCategoryCallback=e)}}),_dp(h,"numberCategoryCallback",{get:function(){return this._numberCategoryCallback},set:function(e){e!=this._numberCategoryCallback&&(this._numberCategoryCallback=e)}}),_dp(h,"textCategoryCallback",{get:function(){return this._textCategoryCallback},set:function(e){e!=this._textCategoryCallback&&(this._textCategoryCallback=e)}}),_dp(h,"dateYearFormat",{get:function(){return this._dateYearFormat},set:function(e){this._dateYearFormat=e}}),_dp(h,"dateQuarterFormat",{get:function(){return this._dateQuarterFormat},set:function(e){this._dateQuarterFormat=e}}),_dp(h,"dateMonthFormat",{get:function(){return this._dateMonthFormat},set:function(e){this._dateMonthFormat=e}}),_dp(h,"dateDayFormat",{get:function(){return this._dateDayFormat},set:function(e){this._dateDayFormat=e}}),_dp(h,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(e){this._lookupDisplay=e}}),h);t.FilterAutomatingOptions=f});t(Jn),Jn.FilteringOptions,Jn.FilterSelectorOptions,Jn.FilterAutomatingOptions;var Kn=n(function(e,t){function i(e){this._options=e}var n;Object.defineProperty(t,"__esModule",{value:!0}),(r=n=n||{})[r.ALL=0]="ALL",r[r.YQ=1]="YQ",r[r.YM=2]="YM",r[r.Y=3]="Y",r[r.QM=4]="QM",r[r.Q=5]="Q",r[r.M=6]="M",r[r.NONE=7]="NONE";var r=(i.HasPartial=function(e,t,n){if(n&&(e=e&&e.toLowerCase(),t=t&&t.toLowerCase()),0<=e.indexOf(t))return!0;for(var r=p.Utils.hangulToChosungAll(e),i=p.Utils.hangulToChosungAll(t),s=-1,o=!1;0<=(s=r.indexOf(i,s+1));){for(var u=0;u<i.length&&u+s<r.length;u++){var a=p.Utils.hangulToChosung(e[u+s]),f=p.Utils.hangulToChosung(t[u]);if(f.org&&f.org!==a.org||!f.cho||f.cho!==a.cho){o=!1;break}o=!0}if(o)return!0}return!1},i.prototype.dispose=function(){return this._filters=null,this._options=null},_dp(i,"searched",{get:function(){return this._searched}}),i.prototype.buildItems=function(e,t,n,r){void 0===r&&(r=!0);var i=this._options.selector,s=this._options.automating,o=i.emptyFilterText;this._autoFilter=n;var u=this._filters=n?e.autoFilters:e.filters,a=[];if(n){0<e.autoFilters.activeCount&&(a=this._getActivatedFilters(e.autoFilters)),e.autoFilters.clear(!1);var f=!1,l=void 0;this._valueType=e.valueType;var h=t.getDistinctValues(e.dataIndex);switch(this._valueType){case c.ValueType.DATETIME:l=(f=s.dateCategorize)&&s.dateCategoryCallback?s.dateCategoryCallback(e,h):this._categorizeDateValues(h,f,o);break;case c.ValueType.NUMBER:l=(f=s.numberCategorize)&&s.numberCategoryCallback?s.numberCategoryCallback(e,h):this._categorizeNumberValues(h,f,o);break;case c.ValueType.BOOLEAN:for(var l=[],p=!1,d=0;d<h.length;d++){var v=h[d];null!=v?l.push({text:v.toString().toUpperCase(),value:v}):p=!0}p&&i.showEmptyFilter&&l.push({text:o,empty:!0});break;case c.ValueType.TEXT:l=(f=s.textCategorize)&&s.textCategoryCallback?s.textCategoryCallback(e,h):this._categorizeTextValues(h,f,o)}l&&this._createCategories(l,null,e.valueType,u),this._filters.activateItems(a,!0,r)}},i.prototype.search=function(e){var t=[];for(var n=0,r=this._filters.count;n<r;n++){var s,o=this._filters.getItem(n);o instanceof yt.ColumnFilterCategory||(s=this._autoFilter?o.tag:o.toString(),i.HasPartial(s,e,this._options.selector.searchIgnoreCase)&&function(e){if(t.indexOf(e)<0){for(var n=[],r=e;r;)t.indexOf(r)<0&&n.push(r),r=r.category;Array.prototype.push.apply(t,n.reverse())}}(o))}return t},i.prototype._getActivatedFilters=function(e){for(var t=[],n=e.count;n--;){var r=e.getItem(n);r instanceof yt.ColumnFilterCategory||!r.active||t.push(r.name)}return t},i.prototype._createCategories=function(e,t,n,r){function u(e,t,n){return null==e||n.empty?"value is empty":t!=c.ValueType.DATETIME?t!=c.ValueType.BOOLEAN?t==c.ValueType.NUMBER?"value = "+e:"value = '"+e+"'":n.value?"value":"not(value)":"(year(value) = "+n.year+") and (month(value) = "+(n.month+1)+") and (day(value) = "+n.day+")"}function a(e,t,r){return n===c.ValueType.TEXT&&e&&!t.empty?s.getLookupLabel(e):r}var s=r.getOwner(),o=this._options.automating.lookupDisplay&&s.lookupDisplay;for(var f=p.Utils.pad,l=0,h=e.length;l<h;l++){var d=e[l],v=d.hasOwnProperty("childs"),m=d.hasOwnProperty("values"),g=void 0;(g=v||m?new yt.ColumnFilterCategory:new yt.ColumnFilter(u(d.value,n,d))).text=o?a(d.value,d,d.text):d.text,m="",m=d.empty?i.EMPTY_FILTER:n==c.ValueType.DATETIME&&v&&t?t.name+" "+d.text:d.text;if(g.name=m,this._filters.add(g,!1),t&&t.addChild(g),g instanceof yt.ColumnFilterCategory){if(v)this._createCategories(d.childs,g,n,r);else if(p.Utils.isArray(d.values))for(var y=d.values,b=0,w=y.length;b<w;b++){var E=y[b],S=E+"",x=new yt.ColumnFilter(u(E,n,d));x.name=S,x.text=o?a(E,d,S):S,x.tag=S,g.addChild(x),this._filters.add(x,!1)}}else n!=c.ValueType.DATETIME||d.empty?g.tag=d.text:g.tag=(v=d).year+"-"+f(v.month+1,2)+"-"+f(v.day,2)}},i.prototype._categorizeDateValues=function(e,t,r){function u(e,t,a,f,l){l=-1==(l=void 0===l?-1:l)?e.length-1:l;for(var c,h,p=null,d=f=void 0===f?0:f,v=!1,m=function(r){var l,m,y,b,w,E,S=e[r],N=function(e,t,n){for(var r=[],i=0;i<=n;i++)r.push(_.DateTimeConverter.getDateProperty(e,t[i]));return r}(S,x,t),C=function(e,t,n){if(!e)return null;switch(t[n]){case _.DateProperty.YEAR:return e.getFullYear().toString();case _.DateProperty.HALF:return e.getFullYear().toString()+Math.floor(e.getMonth()/6).toString();case _.DateProperty.QUARTER:return e.getFullYear().toString()+Math.floor(e.getMonth()/3).toString();case _.DateProperty.MONTH:return e.getFullYear().toString()+e.getMonth().toString();case _.DateProperty.DAY:return e.getFullYear().toString()+e.getMonth()+e.getDate()}}(S,x,t);f<r&&C!=p&&(l=c[t],h&&(t===x.length-1?((E={text:"",year:h.getFullYear(),month:h.getMonth(),day:h.getDate(),value:h}).text=T[t](E.year,E.month,E.day),a.push(E)):(m={text:"",childs:[]},y=function(){m.year=h.getFullYear()},b=function(){m.quarter=Math.floor(h.getMonth()/3)},w=function(){m.month=h.getMonth()},(E=i&&s&&o?n.ALL:i&&s?n.YQ:i&&o?n.YM:i?n.Y:s&&o?n.QM:s?n.Q:o?n.M:n.NONE)===n.ALL?0===t?y():1===t?(y(),b()):2===t&&(y(),b(),w()):E===n.YQ?0===t?y():1===t&&(y(),b()):E===n.YM?0===t?y():1===t&&(y(),w()):E===n.Y?y():E===n.QM?0===t?b():1===t&&(b(),w()):E===n.Q?b():E===n.M&&w(),m.text=T[t](h.getFullYear(),h.getMonth(),l),a.push(m),u.call(g,e,t+1,m.childs,d,r-1))),d=r),f<r&&null==h&&(v=!0),p=C,c=N,h=S},g=this,y=f;y<=l+1;y++)m(y);0==t&&v&&this._options.selector.showEmptyFilter&&a.push({text:r,empty:!0})}function b(e,t){return t+="",e?e.replace("YYYY",t).replace("YY",t.slice(-2)):t}function w(e,t){var n=t+1+"";return e?(t=("0"+n).slice(-2),e.replace("QQ",t).replace("Q",n)):n}function E(e,t){var n=t+1+"";return e?(t=("0"+n).slice(-2),e.replace("MM",t).replace("M",n)):n}if(!e)return null;var i=!1,s=!1,o=!1;for(var a=_.DateTimeConverter.getDateProperty,f=0,l=0,c=0,h={year:null,quarter:null,month:null,day:null},p=e.length,d=0;d<p;d++){var v,m,g,y=e[d];y&&(v=a(y,_.DateProperty.YEAR),m=a(y,_.DateProperty.QUARTER),g=a(y,_.DateProperty.MONTH),y=a(y,_.DateProperty.DAY),!h||v!=h.year?(f++,l++,c++):m!=h.quarter||g!=h.month?(l++,c++):y!=h.day&&c++,h.year=v,h.quarter=m,h.month=g,h.day=y)}var S=this._options.automating,x=[],T=[];return t&&((i=1<f&&6<l)&&(x.push(_.DateProperty.YEAR),T.push(function(e,t,n){return b(S.dateYearFormat,n)})),(s=6<l/f)&&(x.push(_.DateProperty.QUARTER),T.push(i?function(e,t,n){return w(S.dateQuarterFormat,n)}:function(e,t,n){return b(S.dateYearFormat,e)+" "+w(S.dateQuarterFormat,n)})),(o=9<c&&3<l)&&(x.push(_.DateProperty.MONTH),T.push(i||s?function(e,t,n){return E(S.dateMonthFormat,n)}:function(e,t,n){return b(S.dateYearFormat,e)+" "+E(S.dateMonthFormat,n)}))),x.push(_.DateProperty.DAY),T.push(function(e,t,n){var r=E(r=b(S.dateDayFormat,e),t);return t=(e=n)+"",r=(n=r)?(e=("0"+t).slice(-2),n.replace("DD",e).replace("D",t)):t}),t=[],u.call(this,e,0,t),t},i.prototype._categorizeNumberValues=function(e,t,n){if(!e||e.length<0)return null;var r,i=e.filter(function(e){return null!=e&&null!=e&&!isNaN(e)}).sort(function(e,t){return e-t}),s=i.length,e=i.length!==e.length,o=[];if(t&&15<s)for(r=Math.round(s/Math.min(Math.max(4,Math.round(s/5)),8));0<i.length;){var u=i.splice(0,r);o.push({text:u[0]+" ~ "+u[u.length-1],values:u})}else for(var a=0;a<s;a++)o.push({text:i[a]+"",value:i[a]});return e&&this._options.selector.showEmptyFilter&&o.push({text:n,empty:!0}),o},i.prototype._categorizeTextValues=function(e,t,n){if(!e)return null;var r=e.length,i=[],s=!1;if(t&&15<r){for(var o,u,a,f=[{},{},{},{}],l=[0,0,0,0],c=[0,0,0,0],h=0;h<r;h++)(S=e[h])?(u=!1,a=void 0,f[a=48<=(o=(v=S[0]).charCodeAt(0))&&o<=57?0:65<=o&&o<=90||97<=o&&o<=122?1:1e4<=o?2:3][v]?f[a][v].push(S):(f[a][v]=[S],u=!0),l[a]++,u&&c[a]++):s=!0;for(var p=Math.min(Math.max(4,Math.round(r/5)),8),d=0;d<4;d++){var v,m=0==l[d]?0:Math.max(1,Math.min(c[d],Math.round(l[d]/r*p))),g=Math.round(c[d]/m),y=g,b=(Object.keys(f[d]),""),w=[];for(v in f[d])y===g&&(b=v),Array.prototype.push.apply(w,f[d][v]),0==--y&&(i.push({text:1==g?v:b+" ~ "+v,values:w}),w=[],y=g)}}else for(var h=0,E=e.length;h<E;h++){var S,x=e[h];x?(S=x.replace(/\\/g,"\\\\").replace(/\'/g,"\\'"),i.push({text:x,value:S})):s=!0}return s&&this._options.selector.showEmptyFilter&&i.push({text:n,empty:!0}),i},i.EMPTY_FILTER="$$empty",i);t.FilteringManager=r});t(Kn),Kn.FilteringManager;var Qn=n(function(e,t){function i(e,t,r){var i=n.call(this)||this;return i._opened=!1,i._grid=r,i._gridContainer=r.container._containerDom,r=p.getDoc(i._gridContainer),r=i._element=r.createElement("div"),r.style.position="absolute",r.style.display="none",r.className=t.selector.style,r.setAttribute("aria-hidden","true"),i._parent=e._containerDiv.parentElement,(e=e._containerDiv.nextSibling)?i._parent.insertBefore(r,e):i._parent.appendChild(r),i._options=t,i._soptions=t.selector,i._manager=new Kn.FilteringManager(i._options),i._globalMouseDownHandler=i._globalMouseDownHandler.bind(i),i._globalKeyDownHandler=i._globalKeyDownHandler.bind(i),i._scrollHandler=i._scrollHandler.bind(i),i._wheelHandler=i._wheelHandler.bind(i),i._resetClickHandler=i._resetClickHandler.bind(i),i._searchInputHandler=i._searchInputHandler.bind(i),i._searchKeyDownHandler=i._searchKeyDownHandler.bind(i),i._checkAllClickHandler=i._checkAllClickHandler.bind(i),i._confirmClickHandler=i._confirmClickHandler.bind(i),i._cancelClickHandler=i._cancelClickHandler.bind(i),i._itemClickHandler=i._itemClickHandler.bind(i),i}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=x.EventAware,l.__extends(i,n),_dp(i,"opened",{get:function(){return this._opened}}),_dp(i,"column",{get:function(){return this._targetColumn}}),_dp(i,"doc",{get:function(){return p.getDoc(this._element)}}),i.prototype._doDispose=function(){this._soptions=null,this._manager=this._manager.dispose(),this._grid=null,this._parent.removeChild(this._element),n.prototype._doDispose.call(this)},i.prototype.show=function(e,t,n){this._opened&&this.hide();var r=this._element,i=this._soptions;this._targetColumn=e,r.className=i.style,r.style.display="block",this._autoFiltering=e.autoFilter,this._build(e,n,this._autoFiltering);var s=t.getBoundingClientRect(),o=this._gridContainer.parentElement.clientWidth,e=i.width,n=r.style,t=0;-1===e?t=i.maxWidth<=0?this._viewWidth:Math.min(i.maxWidth,e,o):0<e&&(t=Math.min(e,o)),0<t&&(n.width=Math.max(t,i.minWidth)+"px"),e=p.getWin(this._gridContainer),o=r.getBoundingClientRect(),t=r.offsetParent instanceof e.HTMLBodyElement,i=t?{left:0,top:0}:r.offsetParent.getBoundingClientRect(),o=o.left-i.left+(s.right-o.right)+(t?e.scrollX||e.pageXOffset:r.offsetParent.scrollLeft),r=s.bottom-i.top+(t?e.scrollY||e.pageYOffset:r.offsetParent.scrollTop),n.left=Math.max(0,o)+"px",n.top=r+"px",e.addEventListener("mousedown",this._globalMouseDownHandler,!1),e.addEventListener("keydown",this._globalKeyDownHandler,!1),this._opened=!0},i.prototype.hide=function(){var e;this._opened&&((e=p.getWin(this._gridContainer)).removeEventListener("mousedown",this._globalMouseDownHandler,!1),e.removeEventListener("keydown",this._globalKeyDownHandler,!1),this._finalize(),this._element.style.display="none",this._opened=!1)},i.prototype._createItemInfo=function(e){this._items=[],this._roots=[],this._visbleItemMap={};for(var t=e instanceof yt.ColumnFilterCollection?e.count:e.length,n=[],r=0;r<t;r++){var i=e instanceof yt.ColumnFilterCollection?e.getItem(r):e[r],s=i instanceof yt.ColumnFilterCategory,o=i.level,u=void 0,u=i instanceof yt.ColumnFilterCategory?i.activeState:i.active?yt.ActiveState.ACTIVE:yt.ActiveState.UNACTIVE;(this._autoFiltering||i.visible)&&(i={text:i.toString(),state:u,index:r,level:o,filter:i},s&&(i.expanded=!1),n[o]=i,0<o&&(s=n[o-1],(i.parent=s).childs||(s.childs=[]),s.childs.push(i)),this._items.push(i),0==o&&this._roots.push(i),this._visbleItemMap[r]=i)}this._visibleAllCount=this._items.length,this._visibleCount=this._calcVisibleItems(),n=[],this._dirties=[]},i.prototype._build=function(e,t,n){var r=this._soptions,i=this._applyBatch=r.showButtons,s=this.doc;this._manager.buildItems(e,t,n,!1),this._filters=n?e.autoFilters:e.filters,this._createItemInfo(this._filters),this._headerDiv=s.createElement("div"),this._headerDiv.className="rg-filter-header",r.filterReset&&this._buildReset(this._headerDiv),this._soptions.partialSearch&&this._buildSearchbox(this._headerDiv),this._buildSelectAllBox(),this._element.appendChild(this._headerDiv),e=this._viewportDiv=s.createElement("div"),e.className="rg-filter-list-viewport",e.style.height=r.listHeight+"px",e.addEventListener("scroll",this._scrollHandler),e.addEventListener("wheel",this._wheelHandler),this._listDiv=s.createElement("div"),this._listDiv.className="rg-filter-list",this._listDiv.style.position="relative",e.appendChild(this._listDiv),this._element.appendChild(e),this._calcAllChecked(),this._calcluateStates(),this._buildItems(),i&&this._buildFooter(this._element),this._searched=!1},i.prototype._finalize=function(){this._roots=[],this._visbleItemMap={};for(var e=this._items.length;e--;)this._items[e].filter=null,this._items[e].parent=null,this._items[e].childs=null,this._items[e]=null;this._items=[],(t=this._resetDiv)&&(t.removeEventListener("click",this._resetClickHandler),this._headerDiv.removeChild(t),this._resetDiv=null),(t=this._searchDiv)&&(this._searchInput.removeEventListener("input",this._searchInputHandler),this._searchInput.removeEventListener("keydown",this._searchKeyDownHandler),this._headerDiv.removeChild(this._searchDiv),this._searchInput=null,this._searchDiv=null),this._selectAllDiv.removeEventListener("click",this._checkAllClickHandler),this._headerDiv.removeChild(this._selectAllDiv),this._element.removeChild(this._headerDiv),this._headerDiv=null,this._footerDiv&&(this._confirmButton.removeEventListener("click",this._confirmClickHandler),this._cancelButton.removeEventListener("click",this._cancelClickHandler),this._element.removeChild(this._footerDiv),this._confirmButton=null,this._cancelButton=null,this._footerDiv=null);for(e=this._itemElements.length;e--;)this._removeItem(e);this._itemElements=[];var t=this._viewportDiv;t.removeEventListener("scroll",this._scrollHandler),t.removeEventListener("wheel",this._wheelHandler),this._element.removeChild(t),this._listDiv=null,this._viewportDiv=null},i.prototype._buildSelectAllBox=function(){var e=this._soptions.allCheckText;this._selectAllDiv=this._buildItemElement(e,0,this._allCheck,"rg-filter-select-all"),this._selectAllCheck=this._selectAllDiv.childNodes[i.INDEX_CHECKBOX],this._headerDiv.appendChild(this._selectAllDiv),this._selectAllDiv.addEventListener("click",this._checkAllClickHandler)},i.prototype._buildReset=function(e){var t=this.doc,n=this._resetDiv=t.createElement("div");n.className="rg-filter-reset",n.appendChild(t.createTextNode(this._soptions.filtersResetText)),n.addEventListener("click",this._resetClickHandler),e.appendChild(n)},i.prototype._buildItems=function(){for(var e="temp\uc784\uc2dc",t=p.Utils.getTextLength(e),n=0,r=this._filters.count;n<r;n++){var i=this._filters.getItem(n).toString();t<p.Utils.getTextLength(i)&&(t=p.Utils.getTextLength(i),e=i)}var s=this._buildItemElement(e,0,void 0,"rg-filter-item");this._element.style.width="unset",this._listDiv.appendChild(s),this._itemHeight=Math.floor(s.getBoundingClientRect().height),this._viewWidth=Math.floor(s.getBoundingClientRect().width)+10,this._listDiv.removeChild(s),this._element.style.width="";var o=this._visibleCount,s=this._viewportDiv.offsetHeight;this._pageCount=Math.min(this._items.length,Math.ceil(s/this._itemHeight)),s=this._pageCount,this._listDiv.style.height=o*this._itemHeight+"px";var u=o<s?o:s;this._itemElements=[];for(n=0;n<u;n++){var a=this._visibleItems[n];this._itemElements.push(this._buildItem(a,n))}},i.prototype._buildSearchbox=function(e){var t=this.doc,n=this._searchDiv=t.createElement("div");n.className="rg-filter-searchbox",this._searchInput=this.doc.createElement("input"),this._searchInput.type="text",t=this._soptions.searchPlaceholder,this._searchInput.placeholder=t,this._searchInput.className="rg-filter-search-input",this._searchInput.addEventListener("input",this._searchInputHandler),this._searchInput.addEventListener("keydown",this._searchKeyDownHandler),n.appendChild(this._searchInput),e.appendChild(n)},i.prototype._buildFooter=function(e){var t=this.doc;this._footerDiv=t.createElement("div"),this._footerDiv.className="rg-filter-button";var n=this._confirmButton=t.createElement("input");n.type="button",n.className="rg-filter-accept",n.value=this._soptions.acceptText,n.addEventListener("click",this._confirmClickHandler),this._footerDiv.appendChild(n),t=this._cancelButton=t.createElement("input"),t.type="button",t.className="rg-filter-cancel",t.value=this._soptions.cancelText,t.addEventListener("click",this._cancelClickHandler),this._footerDiv.appendChild(t),e.appendChild(this._footerDiv)},i.prototype._buildItem=function(e,t){var n=this._items,r=this._listDiv,i=n[e],n=i.expanded,n=this._buildItemElement(i.text,i.level,i.state,"rg-filter-item",n);return n.filter_id=e+"",n.style.position="absolute",n.style.height=this._itemHeight+"px",n.style.top=t*this._itemHeight+"px",n.addEventListener("click",this._itemClickHandler),r.appendChild(n),n},i.prototype._removeItem=function(e){var t=this._itemElements[e];t.removeEventListener("click",this._itemClickHandler),this._listDiv.removeChild(t),this._itemElements[e]=null,this._itemElements.splice(e,1)},i.prototype._buildItemElement=function(e,t,n,r,i){var s=this.doc,o=s.createElement("div");return r&&(o.className=r),this._soptions.textToTitle&&e&&(o.title=e),r=s.createElement("div"),r.className="rg-filter-item-indent-"+t,o.appendChild(r),t=s.createElement("div"),r="rg-filter-expander",void 0!==i&&(r+=" "+(i?"rg-filter-expander-expanded":"rg-filter-expander-collapsed")),t.className=r,o.appendChild(t),t=s.createElement("input"),t.type="checkbox",t.className="rg-filter-checkbox",this._setCheckState(t,n),o.appendChild(t),s=s.createElement("div"),s.className="rg-filter-text",s.style.position="relative",s.style.display="inline",s.style.pointerEvents="none",s.innerHTML=p.Utils.htmlEncode(e),o.appendChild(s),o},i.prototype._calculateState=function(e){for(var t=void 0,n=0,r=e.length;n<r;n++){var i=e[n];if(t&&i.state!=t)return yt.ActiveState.INDETERMINATE;t=i.state}return t||yt.ActiveState.UNACTIVE},i.prototype._calcluateStates=function(){for(var e=this._items.length;e--;){var t=this._items[e];t.childs&&(t.state=this._calculateState(t.childs))}},i.prototype._calcVisibleItems=function(){var e=0;this._visibleItems=[];for(var t=0,n=this._items.length;t<n;t++){var r=this._items[t];r.parent&&!function(e){for(var t=e.parent;t;){if(!t.expanded)return;t=t.parent}return 1}(r)||(e++,this._visibleItems.push(t))}return e},i.prototype._setCheckState=function(e,t){e.checked=t==yt.ActiveState.ACTIVE,e.indeterminate=t==yt.ActiveState.INDETERMINATE},i.prototype._calcAllChecked=function(){this._allCheck=this._calculateState(this._roots),this._setCheckState(this._selectAllCheck,this._allCheck)},i.prototype._redrawCheck=function(){for(var e=this._itemElements.length;e--;){var t=this._itemElements[e],n=parseInt(t.filter_id),n=this._visbleItemMap[n],t=t.childNodes[i.INDEX_CHECKBOX];this._setCheckState(t,n.state)}},i.prototype._doRedraw=function(e){void 0===e&&(e=0);var t=this._itemElements,n=this._pageCount,r=Math.min(n,this._visibleCount),i=Math.max(0,this._visibleItems.indexOf(e));i+n>this._visibleCount&&(i=Math.max(0,this._visibleCount-n));for(var s=0,o=0;o<r;o++){var u=this._visibleItems[o+i];!t[o]&&o<r&&t.push(this._buildItem(u,o)),this._changeItemModel(t[o],u),s++}for(o=t.length-1;s-1<o;o--)this._removeItem(o);n=this._visibleCount*this._itemHeight,this._listDiv.style.height=n+"px",this._viewportDiv.scrollTop+this._viewportDiv.offsetHeight>n&&(this._viewportDiv.scrollTop=n-this._viewportDiv.offsetHeight)},i.prototype._changeItemModel=function(e,t){var n=p.getWin(e),r=this._items[t];e.filter_id=t+"",this._soptions.textToTitle&&r.text&&(e.title=r.text);for(var i=e.childNodes.length;i--;){var s,o,u,a=e.childNodes.item(i);a instanceof n.HTMLElement&&(o=a.className)&&(-1<o.indexOf("rg-filter-item-indent-")?a.className="rg-filter-item-indent-"+r.level:-1<o.indexOf("rg-filter-expander")?(s="rg-filter-expander",void 0!==r.expanded&&(s+=" "+(r.expanded?"rg-filter-expander-expanded":"rg-filter-expander-collapsed")),a.className=s):a instanceof n.HTMLInputElement&&"rg-filter-checkbox"==o?this._setCheckState(a,r.state):0<=o.indexOf("rg-filter-text")&&(u=p.Utils.htmlEncode(r.text),s=this._searchInput.value,o="g"+(this._soptions.searchIgnoreCase?"i":""),u=s?u.replace(new RegExp(s,o),function(e,t,n){return'<span class="rg-filter-search-text">'+e+"</span>"}):u,a.innerHTML="<span>"+u+"</span>"))}},i.prototype._doScroll=function(){for(var e=this._itemElements,t=Math.max(0,Math.floor(Math.min(this._viewportDiv.scrollTop,this._listDiv.offsetHeight-this._viewportDiv.offsetHeight)/this._itemHeight)),n=0,r=e.length;n<r;n++){var i=this._visibleItems[t+n];this._changeItemModel(e[n],i),e[n].style.top=(t+n)*this._itemHeight+"px"}},i.prototype._doSearch=function(e){e?this._createItemInfo(this._manager.search(e)):this._createItemInfo(this._filters),this._selectAllDiv.childNodes[i.INDEX_TEXT].textContent=e?this._soptions.searchedCheckText:this._soptions.allCheckText,this._doRedraw(),this._searched=!!e},i.prototype._resetActive=function(){for(var e=this._items.length;e--;)this._items[e].state=yt.ActiveState.UNACTIVE;this._filters.activateAll(!1),this._redrawCheck()},i.prototype._activateAll=function(e){var t=!this._applyBatch;if(t&&!this._searched){this._filters.activateAll(e);for(var n=this._items.length;n--;)(r=this._items[n]).childs||(r.state=e?yt.ActiveState.ACTIVE:yt.ActiveState.UNACTIVE)}else for(var r,n=this._items.length;n--;)(r=this._items[n]).childs||(r.state=e?yt.ActiveState.ACTIVE:yt.ActiveState.UNACTIVE,t?r.filter.active=e:this._dirties.push(r));t&&this._searched&&this._doFilterApply(),this._calcluateStates();var i=this._itemElements[0].filter_id,i=Math.max(0,this._visibleItems.indexOf(parseInt(i)));this._doRedraw(i)},i.prototype._doCheck=function(e,t){var n=t?yt.ActiveState.ACTIVE:yt.ActiveState.UNACTIVE,r=this._applyBatch||void 0!==e.childs,i=this._applyBatch?this._dirties:[];if(!function f(e,n,r,i){if(e.state!=n)if(e.state=n,e.childs)for(var s=e.childs.length;s--;)f(e.childs[s],n,r,i);else r?i.push(e):e.filter.active=t}(e,n,r,i),r&&!this._applyBatch){for(var s=[],o=0,u=i.length;o<u;o++)s.push(i[o].filter.name);0<s.length&&this._filters.activateItems(s,t)}for(var a=e.parent;a;)a.state=this._calculateState(a.childs),a=a.parent;(e.parent||e.childs)&&this._redrawCheck(),this._calcAllChecked()},i.prototype._doFilterApply=function(){for(var e=this._dirties.length;e--;){var t=this._dirties[e];t.filter.active=t.state==yt.ActiveState.ACTIVE}this._dirties=[]},i.prototype._doExpand=function(e,t){e.expanded=t,this._visibleCount=this._calcVisibleItems(),t=parseInt(this._itemElements[0].filter_id),this._doRedraw(t)},i.prototype._globalMouseDownHandler=function(e){for(var t=e.target;t;){if(t===this._element)return;t=t.parentElement}this.hide()},i.prototype._globalKeyDownHandler=function(e){27==e.keyCode&&this.hide()},i.prototype._wheelHandler=function(e){var t=e.deltaY;0!==t&&(t=(0<t?2:-2)*this._itemHeight,this._viewportDiv.scrollTop+=t,this._doScroll()),e.preventDefault()},i.prototype._scrollHandler=function(e){this._doScroll()},i.prototype._searchInputHandler=function(e){e=e.target,e instanceof p.getWin(e).HTMLInputElement&&this._doSearch(e.value)},i.prototype._searchKeyDownHandler=function(e){13==e.keyCode&&this._doSearch(this._searchInput.value)},i.prototype._resetClickHandler=function(){var e=this._grid.getFilteredColumns(),t=e.length,n=this._selectAllCheck;this._setCheckState(n,yt.ActiveState.UNACTIVE),this._resetActive(),this._searched&&this._doSearch(null);for(var r=0;r<t;r++)e[r].activateAllFilters(!1);this._soptions.closeWhenClick&&this.hide()},i.prototype._checkAllClickHandler=function(e){"rg-filter-checkbox"==e.target.className||(this._selectAllCheck.checked=!this._selectAllCheck.indeterminate||!this._selectAllCheck.checked),e=this._selectAllCheck.checked,this._activateAll(e),this._allCheck=e?yt.ActiveState.ACTIVE:yt.ActiveState.UNACTIVE,!this._applyBatch&&this._soptions.closeWhenClick&&this.hide()},i.prototype._itemClickHandler=function(e){var t=e.target,n=-1<t.className.indexOf("rg-filter-expander"),r="rg-filter-checkbox"==t.className,s=t;"rg-filter-item"!==t.className&&(s=s.parentElement),e=parseInt(s.filter_id),e=this._visbleItemMap[e],n?void 0!==e.expanded&&this._doExpand(e,!e.expanded):(n=void 0,r?n=t:(n=s.children.item(i.INDEX_CHECKBOX)).checked=!n.checked,this._doCheck(e,n.checked))},i.prototype._confirmClickHandler=function(){this._doFilterApply(),this.hide()},i.prototype._cancelClickHandler=function(){this.hide()},i.INDEX_PADDING=0,i.INDEX_EXPANDER=1,i.INDEX_CHECKBOX=2,i.INDEX_TEXT=3,i);t.FilterSelector=r});t(Qn),Qn.FilterSelector;var Gn=n(function(e,t){function r(){}function o(){}function a(){}Object.defineProperty(t,"__esModule",{value:!0});var n=(r.decode=function(e){for(var t=r.CHARACTERS,n=r.SUFFIX,i=e.split(""),s=[],o=i.length;i[--o]==n;);for(var u=0;u<o;){var a=t.indexOf(i[u++])<<18;u<=o&&(a|=t.indexOf(i[u++])<<12),u<=o&&(a|=t.indexOf(i[u++])<<6),u<=o&&(a|=t.indexOf(i[u++])),s.push(a>>>16&255),s.push(a>>>8&255),s.push(255&a)}for(;0==s[s.length-1];)s.pop();return s},r.SUFFIX="=",r.CHARACTERS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r),s=(o.union=function(e,t){var n=t.s3[255&e],r=t.s2[255&(e>>=8)],i=t.s1[255&(e>>=8)],e=t.s0[255&(e>>=8)],i=(e>>16)+(i>>16)+((65535&e)+(65535&i)>>16)<<16|(65535&e)+(65535&i)&65535;return((i=(i>>16^r>>16)<<16|65535&(65535&i^65535&r))>>16)+(n>>16)+((65535&i)+(65535&n)>>16)<<16|(65535&i)+(65535&n)&65535},o.xor=function(e,t){return(e>>16^t>>16)<<16|65535&(65535&e^65535&t)},o._encryptBlock=function(e,t){var n=e.left,r=e.right,i=o.xor,s=o.union,n=i(n,t.p[0]),r=i(r,i(s(n,t),t.p[1]));n=i(n,i(s(r,t),t.p[2])),r=i(r,i(s(n,t),t.p[3])),n=i(n,i(s(r,t),t.p[4])),r=i(r,i(s(n,t),t.p[5])),n=i(n,i(s(r,t),t.p[6])),r=i(r,i(s(n,t),t.p[7])),n=i(n,i(s(r,t),t.p[8])),r=i(r,i(s(n,t),t.p[9])),n=i(n,i(s(r,t),t.p[10])),r=i(r,i(s(n,t),t.p[11])),n=i(n,i(s(r,t),t.p[12])),r=i(r,i(s(n,t),t.p[13])),n=i(n,i(s(r,t),t.p[14])),r=i(r,i(s(n,t),t.p[15])),n=i(n,i(s(r,t),t.p[16])),e.right=n,e.left=i(r,t.p[17])},o._decryptBlock=function(e,t){var n=e.left,r=e.right,i=o.xor,s=o.union,n=i(n,t.p[17]),r=i(r,i(s(n,t),t.p[16]));n=i(n,i(s(r,t),t.p[15])),r=i(r,i(s(n,t),t.p[14])),n=i(n,i(s(r,t),t.p[13])),r=i(r,i(s(n,t),t.p[12])),n=i(n,i(s(r,t),t.p[11])),r=i(r,i(s(n,t),t.p[10])),n=i(n,i(s(r,t),t.p[9])),r=i(r,i(s(n,t),t.p[8])),n=i(n,i(s(r,t),t.p[7])),r=i(r,i(s(n,t),t.p[6])),n=i(n,i(s(r,t),t.p[5])),r=i(r,i(s(n,t),t.p[4])),n=i(n,i(s(r,t),t.p[3])),r=i(r,i(s(n,t),t.p[2])),n=i(n,i(s(r,t),t.p[1])),e.right=n,e.left=i(r,t.p[0])},o._init=function(e){for(var t,n=e.split("").map(function(e){return 255&e.charCodeAt(0)}),e=o.kb,r=o._encryptBlock,i=0,s=0,u={left:0,right:0},a={p:e.p.slice(0).map(function(e){for(var t=n.length,r=0;r<4;r++)s=s*o.POW8|n[i++%t];return(e>>16^s>>16)<<16|65535&(65535&e^65535&s)}),s0:e.s0.slice(0),s1:e.s1.slice(0),s2:e.s2.slice(0),s3:e.s3.slice(0)},f=0,l=a.p.length;f<l;)r(u,a),a.p[f++]=u.left,a.p[f++]=u.right;for(f=0;f<4;f++)for(t=0,l=a["s"+f].length;t<l;)r(u,a),a["s"+f][t++]=u.left,a["s"+f][t++]=u.right;return a},o.decrypt=function(e,t){for(var r=o._decryptBlock,i=o._init(t),s=[],u=n.decode(e),a=u.length>>3,f=0,l={left:null,right:null},c=0;c<a;c++){l.left=u[f]*o.POW24|u[f+1]*o.POW16|u[f+2]*o.POW8|u[f+3],l.right=u[f+4]*o.POW24|u[f+5]*o.POW16|u[f+6]*o.POW8|u[f+7],r(l,i);var h=l.left,p=l.right;s.push(h>>24&255),s.push(h>>16&255),s.push(h>>8&255),s.push(255&h),s.push(p>>24&255),s.push(p>>16&255),s.push(p>>8&255),s.push(255&p),f+=8}return s[s.length-1]!=s[s.length-2]&&1!=s[s.length-1]||(e=s[s.length-1],s.splice(s.length-e,e)),s.map(function(e){return String.fromCharCode(e)}).join("")},o.POW2=Math.pow(2,2),o.POW3=Math.pow(2,3),o.POW4=Math.pow(2,4),o.POW8=Math.pow(2,8),o.POW16=Math.pow(2,16),o.POW24=Math.pow(2,24),o.kb={p:[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s0:[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],s1:[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],s2:[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],s3:[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],k:[202,218,204,100]},o);t.Cryptor=s;var u=(a.eqaulsUpperDomain=function(e,t){return e==t||0===e.indexOf("*")&&(e=e.substr(1,e.length-1),t.substr(t.indexOf(e),e.length)==e)},a._getLDKey=function(e){for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]>>1);return t},a.includedDomains=function(e,t,n){for(var r=e.split(","),i=0,s=r.length;i<s;i++){var o=r[i];if(this.eqaulsUpperDomain(o,t))return!0;if(n&&o&&"*"===o[0]&&"*."!==o.substr(0,1)){o=new RegExp("^/"+o.substr(1)+"/");if(n&&o.exec(n))return!0}}return!1},a.decrypt=function(e){for(var t={},n=s.decrypt(e,dn._gk+this._getLDKey(s.kb.k)).split(";"),r=0,i=n.length;r<i;r++){var o=n[r].split("="),u=o[0],o=o[1];o&&0<o.length&&(t[u]=o)}return t},a);t.lk=function(){var e=location.hostname;try{r=realGrid2Lic}catch(e){return!1}if(!r)return!1;var t=u.decrypt(r);if("RealGrid2"!=t.name)return!1;var n=t.server.toLowerCase(),r=location.pathname.toLowerCase();if(i.globalRealGridInfo.license!=i.LicenseType.Developer&&!u.includedDomains(n,e.toLowerCase(),r))return!1;r=t.lic.toLowerCase();if(i.globalRealGridInfo.code=t.code,i.globalRealGridInfo.license=t.lic,r==i.LicenseType.Evaluation||r==i.LicenseType.Limited){t=t.expire.split(".").map(function(e){return parseInt(e)}),t=new Date(t[0],t[1],t[2],23,59,59,999);if(new Date>t)return!1}return!0}});t(Gn),Gn.Cryptor,Gn.lk;var Yn=n(function(e,t){function i(e){var t=n.call(this,"rowGroupHeaderCell")||this;return t._rowGroup=e,t}function u(e){var t=s.call(this,"rowGroupFooterCell")||this;return t._footerIndex=0,t._value=NaN,t._rowGroup=e,t}function h(){var e=a.call(this,"rowGroupBarCell")||this;return e._level=0,e}function m(e){var t=d.call(this)||this;return t._index=0,t.$_owner=e,t}function w(e){var t=g.call(this)||this;return t._items=[],t._owner=e,t._items.push(new v(t)),t}function x(e){return e=E.call(this,e)||this,e._mergeMode=!1,e._sorting=!0,e._expandedAdornments=c.RowGroupAdornments.BOTH,e._collapsedAdornments=c.RowGroupAdornments.HEADER,e._indentVisible=!0,e._levelIndent=20,e._mergeHeaderIndenting=!0,e._mergeFooterIndenting=!0,e._headerStatement="${groupField}: ${groupValue} - ${rowCount} rows",e._mergeExpanderVisibility=c.ExpanderVisibility.DEFAULT,e._headerCell=new r(e),e._footerCell=new o(e),e._barCell=new f,e._headerStatementExpr=new gt.ExpressionStatement(e._headerStatement),e._footerStatementExpr=new gt.ExpressionStatement,e._statementRuntime=new wt.RowGroupStatementRuntime,e._footerFormatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},e._footers=new b(e),e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Et.GridCell,l.__extends(i,n),i.prototype._doDispose=function(){this._rowGroup=null,n.prototype._doDispose.call(this)},_dp(i,"text",{get:function(){return this.item instanceof dt.GroupItemImpl?this._rowGroup.getHeaderText(this.item):""}}),_dp(i,"value",{get:function(){}}),i);t.RowGroupHeaderCell=r;var s,o=(s=Et.GridCell,l.__extends(u,s),u.$_getValue=function(e,t){if(t&&0<=t.dataIndex){var n=t.grid,r=e.parent,i=r.getFooterIndex(e),s=t.groupFooters.get(i);if(s&&s.expression)return e=n.rowGroupSummaryRuntime,e.setColumn(t,t.grid.summarizer),e.setItem(r),s.evaluate(e);if(s&&s.valueCallback)return(0,s.valueCallback)(n.handler,t,i,r,null);if(r&&t&&n.isGroupedColumn(t))return r=n.rowGroup.getFooterText(r),null==r?void 0:r}},u.getValue=function(e,t){try{return u.$_getValue(e,t)}catch(e){return Et.GridCell.ERROR}},u.$_displayText=function(e,t,n,r){var i,s,o,u="";return void 0!==n&&t&&(t.valueType==c.ValueType.DATETIME?(i=void 0,n instanceof Date&&(i=r.datetimeWriter)?u=i.getText(n):n&&(u=n)):(i=void 0,s=parseFloat(n),!isNaN(s)&&(i=r.numberFormatter)?u=i.getText(s):isNaN(n)||null==n||(u=n+"")),u&&((o=r.prefix)&&(u=o+u),(o=r.suffix)&&(u+=o))),u||(s=t.grid,n=p.Utils.cast(e.parent,dt.GroupItemImpl),r=s.rowGroup,o=void 0,n&&t&&s.isGroupedColumn(t)&&(o=r.getFooterText(n))?u=o:!t||(e=t.groupFooters.get(n.getFooterIndex(e)))&&(u=e.text)),u||""},u.prototype._doDispose=function(){this._rowGroup=null,s.prototype._doDispose.call(this)},_dp(u,"footerIndex",{get:function(){return this._footerIndex}}),u.prototype.calculate=function(e){this._value=NaN,this._error=null;try{this._value=u.$_getValue(this.index.item||e,this.index.dataColumn)}catch(e){this._error=e,this._errorDetail=e,p.Utils.log("FOOTER ERROR: "+e)}},u.prototype.getDisplayText=function(e){return this._error?Et.GridCell.ERROR:u.$_displayText(this.index.item,this.index.dataColumn,this._value,e)},u.prototype.getSummary=function(){return this._getSummary(this.valueColumn,this._footerIndex)},u.prototype.getTemplate=function(e){var t=this._getSummary(this.valueColumn,this._footerIndex);return t?t.realizeGroupSummary(this,e):void 0},_dp(u,"value",{get:function(){return this._value}}),_dp(u,"level",{get:function(){return this.index.item.level}}),u.prototype.setIndex=function(e){s.prototype.setIndex.call(this,e),this._footerIndex=e.item.$_footerIndex},u.prototype._getSummary=function(e,t){return e.groupFooters.get(t)},u);t.RowGroupFooterCell=o;var a,f=(a=Et.GridCell,l.__extends(h,a),_dp(h,"level",{get:function(){return this.item.level}}),_dp(h,"getText",{get:function(){return""}}),_dp(h,"value",{get:function(){}}),h);t.RowGroupBarCell=f;var d,v=(d=y.Base,l.__extends(m,d),m.prototype._doDispose=function(){d.prototype._doDispose.call(this)},_dp(m,"index",{get:function(){return this._index}}),_dp(m,"styleName",{get:function(){return this._styleName},set:function(e){e!=this._styleName&&(this._styleName=e,this._changed())}}),_dp(m,"exportStyleName",{get:function(){return this._exportStyleName},set:function(e){this._exportStyleName=e}}),_dp(m,"styleCallback",{get:function(){return this._styleCallback},set:function(e){e!==this._styleCallback&&(this._styleCallback=e,this._changed())}}),_dp(m,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(e){e!==this._cellStyleCallback&&(this._cellStyleCallback=e,this._changed())}}),m.prototype._changed=function(){this.$_owner&&this.$_owner.$_itemChanged(this)},m);t.RowGroupFooter=v;var g,b=(g=y.Base,l.__extends(w,g),w.prototype._doDispose=function(){for(var e=0,t=this._items;e<t.length;e++)t[e].dispose();this._items=null,g.prototype._doDispose.call(this)},_dp(w,"owner",{get:function(){return this._owner}}),_dp(w,"count",{get:function(){return this._items.length},set:function(e){e=Math.max(e,1);var t=this._items;if(e!==t.length){for(var n=void 0;t.length<e;)(n=new v(this))._index=t.length,t.push(n);for(;t.length>e;)t.pop().dispose();this.$_itemChanged(null)}}}),w.prototype.get=function(e){return this._items[e]},w.prototype.assignFrom=function(e){var t=this._items;if(p.Utils.isArray(e)){for(var n=e.length;t.length<n;)t.push(null);0<n&&t.length>n&&(t.length=n),0<n&&(t[0].assignFrom(e[0]),t[0]._index=0);for(var r=1;r<n;r++)e[r]?(t[r]||(t[r]=new v(this)),t[r].assignFrom(e[r]),t[r]._index=r):t[r]=null}else t[0].assignFrom(e),t[0]._index=0;this.$_itemChanged(null)},w.prototype.$_itemChanged=function(e){this._owner&&this._owner.rowGroupFooterChanged(e)},w);t.RowGroupFooterCollection=b;var E,S=(E=bt.VisualObject,l.__extends(x,E),x.prototype._doDispose=function(){this._footers=this._footers.dispose(),E.prototype._doDispose.call(this)},x.prototype.rowGroupFooterChanged=function(e){this._counterAware&&this._counterAware.groupfFooterCounterChanged(this)},x.prototype.getGroupFooterCount=function(e){return this._footers.count},x.prototype.setCounterAware=function(e){this._counterAware=e},_dp(x,"mergeMode",{get:function(){return this._mergeMode},set:function(e){e!=this._mergeMode&&(this._mergeMode=e,this._changed())}}),_dp(x,"sorting",{get:function(){return this._sorting},set:function(e){e!=this._sorting&&(this._sorting=e,this._changed())}}),_dp(x,"expandedAdornments",{get:function(){return this._expandedAdornments},set:function(e){e!=this._expandedAdornments&&(this._expandedAdornments=e,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this))}}),_dp(x,"collapsedAdornments",{get:function(){return this._collapsedAdornments},set:function(e){e!=this._collapsedAdornments&&(this._collapsedAdornments=e,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this))}}),_dp(x,"createFooterCallback",{get:function(){return this._createFooterCallback},set:function(e){e!==this._createFooterCallback&&(this._createFooterCallback=e,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this))}}),_dp(x,"indentVisible",{get:function(){return this._indentVisible},set:function(e){e!=this._indentVisible&&(this._indentVisible=e,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this),this._changed())}}),_dp(x,"levelIndent",{get:function(){return this._levelIndent},set:function(e){(e=Math.max(0,e))!=this._levelIndent&&(this._levelIndent=e,this._changed())}}),_dp(x,"mergeHeaderIndenting",{get:function(){return this._mergeHeaderIndenting},set:function(e){e!=this._mergeHeaderIndenting&&(this._mergeHeaderIndenting=e,this._changed())}}),_dp(x,"mergeFooterIndenting",{get:function(){return this._mergeFooterIndenting},set:function(e){e!=this._mergeFooterIndenting&&(this._mergeFooterIndenting=e,this._changed())}}),_dp(x,"footers",{get:function(){return this._footers}}),x.prototype.setFooters=function(e){this._footers.assignFrom(e)},_dp(x,"headerStatement",{get:function(){return this._headerStatement},set:function(e){e!==this._headerStatement&&(this._headerStatement=e,this._headerStatementExpr.source=e,this._changed())}}),_dp(x,"headerCallback",{get:function(){return this._headerCallback},set:function(e){this._headerCallback=e,this._changed()}}),_dp(x,"footerStatement",{get:function(){return this._footerStatement},set:function(e){e!=this._footerStatement&&(this._footerStatement=e,this._footerStatementExpr.source=e,this._changed())}}),_dp(x,"mergeExpanderVisibility",{get:function(){return this._mergeExpanderVisibility},set:function(e){e!=this._mergeExpanderVisibility&&(this._mergeExpanderVisibility=e,this._changed())}}),_dp(x,"expanderVisibleCallback",{get:function(){return this._expanderVisibleCallback},set:function(e){this._expanderVisibleCallback=e,this._changed()}}),x.prototype.getHeaderCell=function(e){return this._headerCell.setIndex(It.CellIndex.temp(this.owner,e.index)),this._headerCell},x.prototype.getFooterCell=function(e){var t=e.item;return this._footerCell.setIndex(e),this._footerCell.calculate(t),this._footerCell},x.prototype.getFooterStyleName=function(e){var t=this._footers.get(e.$_footerIndex),n="rg-rowgroup-footer rg-rowgroup-footer-level-"+String(e.parent.level),r=t.styleName,i=t.styleCallback;return r&&(n+=" "+r),i&&(r=i(this._grid.handler,e.index,t.index))&&(n+=" "+r),n},x.prototype.getFooterCellStyle=function(e,t,n){void 0===n&&(n=!0);var r,i=e.footerIndex,s=this._footers.get(i).cellStyleCallback,i=e.index.column.groupFooters.get(e.footerIndex);return s&&(r=s(this._grid.handler,e),t.assign(r)),!i||(r=i.styleCallback)&&(e=r(this._grid.handler,e),t.assign(e)),!t.styleName&&i&&(t.styleName=i.styleName),n&&(t.styleName?t.styleName=x.FOOTER_CELL_STYLE+" "+t.styleName:t.styleName=x.FOOTER_CELL_STYLE),t},x.prototype.getFooterCellFormatters=function(e,t){return t&&e?(t.numberFormatter=t.numberFormatter||e.numberFormatter,t.datetimeWriter=t.datetimeWriter||e.datetimeWriter,t.booleanFormatter=t.booleanFormatter||e.boolFormatter,t.textFormatter=t.textFormatter||e.textFormatter,t.prefix=t.prefix||e.prefix,t.suffix=t.suffix||e.suffix):e&&((t=this._footerFormatter).numberFormatter=e.numberFormatter,t.datetimeWriter=e.datetimeWriter,t.booleanFormatter=e.boolFormatter,t.textFormatter=e.textFormatter,t.prefix=e.prefix,t.suffix=e.suffix),t},x.prototype.getBarCell=function(e){return this._barCell.setIndex(e),this._barCell},x.prototype.getHeaderText=function(e){return!this._headerStatement&&this._headerCallback?this._headerCallback(this.owner.handler,e):(this._statementRuntime.setGrid(this.owner),this._statementRuntime.setGroup(e),this._headerStatementExpr.evaluate(this._statementRuntime))},x.prototype.getFooterText=function(e){return this._footerStatementExpr?(this._statementRuntime.setGrid(this.owner),this._statementRuntime.setGroup(e),this._footerStatementExpr.evaluate(this._statementRuntime)):null},x.prototype._doChanged=function(){this.owner.$_rowGroupChanged(this)},x.prototype.$_isMultiLine=function(e){var t=e.visible?1:0,n=e.footerCount;if(1<(t+=Math.max(e.descendantCount,e.count)-n))return!0;for(var r=0;r<n;r++)if(e.getFooter(r).visible&&1<++t)return!0;return!1},x.prototype.$_isMergeExpanderVisible=function(e){if(this._mergeMode){if(!e.expanded)return!0;if(this._expanderVisibleCallback){var t=this._expanderVisibleCallback.call(this._grid,this._grid.handler,e);return null==t||t}switch(this._mergeExpanderVisibility){case c.ExpanderVisibility.NONE:return!1;case c.ExpanderVisibility.ALWAYS:return!0;default:return this.$_isMultiLine(e)}}},x.FOOTER_CELL_STYLE="rg-rowgroup-footer-cell",x.FOOTER_CELL_RENDERER="rg-rowgroup-footer-renderer",x);t.RowGroup=S});t(Yn),Yn.RowGroupHeaderCell,Yn.RowGroupFooterCell,Yn.RowGroupBarCell,Yn.RowGroupFooter,Yn.RowGroupFooterCollection,Yn.RowGroup;var Zn=n(function(e,t){function i(e,t){var r=n.call(this,e.doc,"mobileSelectionHandle")||this;return r._dir=t,r._owner=e,r}function u(e,t){return s.call(this,e,t)||this}function c(e){return e=a.call(this,e)||this,e._leftHandle=new r(e,"left"),e._topHandle=new r(e,"top"),e._bottomHandle=new r(e,"bottom"),e._rightHandle=new r(e,"right"),e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Yt.VisualElement,l.__extends(i,n),i.prototype._doDispose=function(){this._owner=null,n.prototype._doDispose.call(this)},_dp(i,"selectionMask",{get:function(){return this._owner}}),_dp(i,"dir",{get:function(){return this._dir}}),i.prototype._getCssSelector=function(){return i.STYLE_NAME+this._dir+"-handle"},i.prototype._initDom=function(e){n.prototype._initDom.call(this,e),e.style.background="red"},i.prototype._doDraw=function(){},i.STYLE_NAME="rg-selection-handle",i);t.MobileSelectionHandle=r;var s,o=(s=Zt.SelectionLayer,l.__extends(u,s),u.prototype._doDispose=function(){},u.prototype.getSelectHandle=function(e){for(var t in this._views){t=this._views[t];if(t.leftHandle._dom===e)return t.leftHandle;if(t.topHandle._dom===e)return t.topHandle;if(t.bottomHandle._dom===e)return t.bottomHandle;if(t.rightHandle._dom===e)return t.rightHandle}},u.prototype.addView=function(e){var t=e.$_hash,n=this._views[t];return n||(n=this._pool.pop()||new f(this.doc),this._views[t]=n),n._item=e,this.addChild(n),this.addChild(n.leftHandle),this.addChild(n.topHandle),this.addChild(n.bottomHandle),this.addChild(n.rightHandle),n},u.prototype.clearViews=function(){for(var e in this._views)e=this._views[e],this.removeChild(e.leftHandle),this.removeChild(e.topHandle),this.removeChild(e.bottomHandle),this.removeChild(e.rightHandle),this.removeChild(e),this._pool.push(e);this._views={}},u.prototype.layout=function(){var e,t=this._grid.layoutManager,n=(this._grid.selections,new h.Rectangle);for(e in this._views){var r=this._views[e],i=r.item,s=!1,o=new h.Rectangle;r.prepare(),(s=i instanceof Zt.RowSelection||i instanceof Zt.ColumnSelection?s:this.$_getMobileSelectionRangeRect(t,i,r,o,n))&&(i=t.footerBounds.y+t.contentBounds.y,o.bottom>i&&(r._bottomed=!0,o.bottom=i)),r.visible=s,r.visible&&(r.setRectI(o),r.updateElement(),this._layoutHandle(r,o,n),r.invalidate(!1,!0))}},u.prototype._layoutHandle=function(e,t,n){var r,i;e._lefted?e.leftHandle.visible=!1:(e.leftHandle.visible=!0,r=n.x-6.5,i=t.y+(t.height-13)/2,e.leftHandle.setBounds(r,i,13,13)),r=n.x+(n.width-13)/2,i=t.y-6.5,!e._toped&&r>=t.x?(e.topHandle.visible=!0,e.topHandle.setBounds(r,i,13,13)):e.topHandle.visible=!1
,i=t.bottom-6.5,!e._bottomed&&r>=t.x?(e.bottomHandle.visible=!0,e.bottomHandle.setBounds(r,i,13,13)):e.bottomHandle.visible=!1,e._righted?e.rightHandle.visible=!1:(e.rightHandle.visible=!0,r=n.right-6.5,i=t.y+(t.height-13)/2,e.rightHandle.setBounds(r,i,13,13))},u.prototype.$_getMobileSelectionRowsRect=function(e,t,n,r){return s.prototype.$_getSelectionRowsRect.call(this,e,t,n,r)},u.prototype.$_getMobileSelectionColumnsRect=function(e,t,n,r){return s.prototype.$_getSelectionColumnsRect.call(this,e,t,n,r)},u.prototype.$_getMobileSelectionRangeRect=function(e,t,n,r,i){return s.prototype.$_getSelectionRangeRect.call(this,e,t,n,r,i)},u);t.MobileSelectionLayer=o;var a,f=(a=Zt.SelectionMask,l.__extends(c,a),c.prototype._doDispose=function(){this._leftHandle=this._leftHandle.dispose(),this._topHandle=this._topHandle.dispose(),this._bottomHandle=this._bottomHandle.dispose(),this._rightHandle=this._rightHandle.dispose(),a.prototype._doDispose.call(this)},_dp(c,"leftHandle",{get:function(){return this._leftHandle}}),_dp(c,"topHandle",{get:function(){return this._topHandle}}),_dp(c,"bottomHandle",{get:function(){return this._bottomHandle}}),_dp(c,"rightHandle",{get:function(){return this._rightHandle}}),c.prototype.prepare=function(){a.prototype.prepare.call(this)},c.prototype.updateElement=function(){a.prototype.updateElement.call(this)},c.prototype._initDom=function(e){a.prototype._initDom.call(this,e),this.setImportantStyle("overflow","hidden"),this.setImportantStyle("pointer-events","none")},c.prototype._visibleChanged=function(){this._leftHandle.visible=this._topHandle.visible=this._bottomHandle.visible=this._rightHandle.visible=this.visible},c);t.MobileSelectionMask=f});t(Zn),Zn.MobileSelectionHandle,Zn.MobileSelectionLayer,Zn.MobileSelectionMask;var er=n(function(e,t){function s(e){return e=r.call(this,e)||this,e._dropMode=n.COPY,e._proxyLabel="${rows}\ud589 ${mode}",e}var n;Object.defineProperty(t,"__esModule",{value:!0}),(i=n=t.DataDropMode||(t.DataDropMode={})).COPY="copy",i.MOVE="move";var r,i=(r=Kt.GridBaseOptions,l.__extends(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(s,"dragCallback",{get:function(){return this._dragCallback},set:function(e){this._dragCallback=e}}),_dp(s,"callback",{get:function(){return this._callback},set:function(e){this._callback=e}}),_dp(s,"dropMode",{get:function(){return this._dropMode},set:function(e){this._dropMode=e}}),_dp(s,"fieldMap",{get:function(){return this._fieldMap},set:function(e){this._fieldMap=e}}),_dp(s,"fieldMapCallback",{get:function(){return this._fieldMapCallback},set:function(e){this._fieldMapCallback=e}}),_dp(s,"proxyLabel",{get:function(){return this._proxyLabel},set:function(e){this._proxyLabel=e}}),_dp(s,"labelCallback",{get:function(){return this._labelCallback},set:function(e){this._labelCallback=e}}),s.prototype.getEnabled=function(e,t,n){var r=this._dragCallback;return!r||!1!==r(e.handler,t,this.grid.handler,n)},s.prototype.getLabel=function(e,t,r){var i=this._labelCallback,s=void 0;return s=void 0===(s=i?i(e.handler,t,this.grid.handler,r):s)&&this._proxyLabel?(s=(s=(s=this._proxyLabel.replace("${rows}",t.length+"")).replace("${mode}",e==this.grid||this.dropMode==n.MOVE?"\uc774\ub3d9":"\ubcf5\uc0ac")).replace("${from}",t[0]+"")).replace("${to}",r+""):s},s);t.DataDropOptions=i});t(er),er.DataDropMode,er.DataDropOptions;var tr=n(function(e,t){function i(e){var t=n.call(this,e.doc,"gridDebugLayer")||this;return t._owner=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Yt.LayerElement,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},i.prototype.layout=function(){var e=this._owner.layoutManager;this.$_setBounds(this._grid,e.gridBounds.clone().inflate(-1,-1));var t=e.dataBounds.clone();t.offset(e.contentBounds.x,e.contentBounds.y),this.$_setBounds(this._data,t)},i.prototype._getCssSelector=function(){return"rg-debug-layer"},i.prototype._initDom=function(e){var t=e.style,n=p.getDoc(e);t.position="absolute",e.appendChild(this._client=this.$_createElement(n,"Client")),e.appendChild(this._topContent=this.$_createElement(n,"Top Content")),e.appendChild(this._leftContent=this.$_createElement(n,"Left Content")),e.appendChild(this._fixedContent=this.$_createElement(n,"Fixed Content")),e.appendChild(this._content=this.$_createElement(n,"Content")),e.appendChild(this._rightContent=this.$_createElement(n,"Right Content")),e.appendChild(this._grid=this.$_createElement(n,"Grid Bounds","b")),e.appendChild(this._data=this.$_createElement(n,"Data Bounds","g")),e.appendChild(this._nonFixed=this.$_createElement(n,"Non Fixed","g"))},i.prototype.$_createElement=function(e,t,n){void 0===n&&(n="r");var r=e.createElement("span"),e=r.style;return e.display="inline-block",e.position="absolute",e.boxSizing="border-box",e.pointerEvents="none","b"==n?(e.border="2px dashed rgba(0, 0, 255, 0.5)",e.color="blue"):"g"==n?(e.paddingTop="20px",e.border="2px solid rgba(0, 128, 0, 0.5)",e.color="rgb(0, 128, 0)"):(e.border="1px solid rgba(255, 0, 0, 0.7)",e.color="red"),e.fontWeight="bold",e.textAlign="center",e.verticalAlign="middle",e.whiteSpace="normal",r[p.Utils.TextProp]=t,r},i.prototype.$_setBounds=function(e,t){e=e.style,t.isEmpty?e.display="none":(e.display="inline-block",e.left=t.x+"px",e.top=t.y+"px",e.width=t.width+"px",e.height=t.height+"px",e.lineHeight=t.height+"px")},i);t.DebugLayer=r});t(tr),tr.DebugLayer;var nr=n(function(e,t){function r(){var e=n.call(this)||this;return e._min=0,e._max=100,e._step=1,e._next=0,e._completed=!1,e._timer=void 0,e}function o(e){var t=i.call(this)||this;return t._message="Load data...",t._min=0,t._max=0,t._pos=0,e=p.getDoc(e),t._dom=t.$_createElement(e),t}function f(e){var t=u.call(this)||this;return t._container=e,t}function d(e){var t=c.call(this)||this,e=p.getDoc(e);return t._dom=t.$_createElement(e),t}Object.defineProperty(t,"__esModule",{value:!0});var n;n=x.EventAware,l.__extends(r,n),_dp(r,"min",{get:function(){return this._min},set:function(e){this._min=e}}),_dp(r,"max",{get:function(){return this._max},set:function(e){this._max=e}}),_dp(r,"step",{get:function(){return this._step},set:function(e){this._step=e}}),r.prototype.execute=function(e){var t;e&&(this._runner=e,this._next=this._min,t=p.getWin(e.container),e.container instanceof t.HTMLElement&&(this._view.setProperties(this._min,this._max,this._min),this._view.show(e.container)),this.$_runNext())},r.prototype.$_runNext=function(){if(this._next<this._max){var e=this._runner.run(this._next);if(this._next+=this._step,this._view.setPosition(this._next,e),this._next<this._max)return void setTimeout(function(){this.$_runNext()}.bind(this),0)}this._completed||this.$_complete()},r.prototype.$_complete=function(){try{this._runner.complete&&this._runner.complete()}finally{this._completed=!0,this._view.close()}};var i,s=(i=x.EventAware,l.__extends(o,i),_dp(o,"message",{get:function(){return this._message},set:function(e){this._message=e}}),_dp(o,"position",{get:function(){return this._pos}}),o.prototype.setPosition=function(e,t){(e=Math.max(this._min,Math.min(this._max,e)))!=this._pos&&(this._pos=e,this._message=t,this.$_refreshView())},o.prototype.setProperties=function(e,t,n,r,i){void 0===r&&(r=null),void 0===i&&(i=!1),this._min=e,this._max=Math.max(e,t),this._max==this._min&&(this._max=this._min+1),this._pos=Math.max(this._min,Math.min(this._max,n)),this._message=r,i&&this.$_refreshView()},o.prototype.setZIndex=function(e){this._dom.style.zIndex=String(e+5)},o.prototype.show=function(e,t){void 0===t&&(t=null),this._container=e,t&&this.$_setMessage(t),e.appendChild(this._dom),t=e.getBoundingClientRect(),e=p.Utils.getSize(this._dom),p.Utils.move(this._dom,(t.width-e.width)/2,(t.height-e.height)/3)},o.prototype.close=function(){this._dom.parentElement.removeChild(this._dom)},o.prototype.$_createElement=function(e){var t=e.createElement("div");t.className="rg-progress";var n=t.style;return n.position="absolute",n.zIndex="3001",n.minWidth="250px",n.padding="8px 10px",t.appendChild(t.$_bar=this.$_createBar(e)),t.appendChild(t.$_msg=this.$_createMsg(e)),t},o.prototype.$_createBar=function(e){var t=e.createElement("div");t.className="rg-progress-bar";var n=t.style;return n.width="100%",n.height="13px",n.marginBottom="4px",e=e.createElement("div"),e.className="rg-progress-progress",(n=e.style).height="100%",n.width="0px",t.appendChild(t.$_led=e),t},o.prototype.$_createMsg=function(e){var t=e.createElement("div"),n=e.createElement("span");return n.className="rg-progress-message",e=t.style,e.width="100%",e.textAlign="center",t.appendChild(t.$_span=n),t},o.prototype.$_refreshView=function(){var e=this._dom,t=e.$_bar,n=t.$_led;e.$_msg.$_span.innerHTML=p.Utils.htmlEncode(this._message),t=p.Utils.getSize(t),n.style.width=Math.min(t.width-1,Math.floor(t.width*(this._pos-this._min)/(this._max-this._min)))+"px"},o.prototype.$_setMessage=function(e){this._dom.$_msg.$_span.innerHTML=p.Utils.htmlEncode(this._message)},o),u,a=(u=x.EventAware,l.__extends(f,u),f.prototype.show=function(e,t,n){this._view||(this._view=new s(e)),this._view.setZIndex(n),this._view.show(e||this._container,t||"Load data...")},f.prototype.close=function(){this._view&&this._view.close()},f.prototype.setProperties=function(e,t,n,r){this._view&&(r||(r=this._title||"Load data... ",e<t&&(r+=Math.floor(100*(n-e)/(t-e))+"% ("+n+" / "+t+")")),this._view.setProperties(e,t,n,r,!0))},f.prototype.showLoader=function(e,t){this._loaderView||(this._loaderView=new h(e)),this._loaderView.setZIndex(t),this._loaderView.show(e||this._container)},f.prototype.closeLoader=function(){this._loaderView&&this._loaderView.close()},f);t.ProgressManager=a;var c,h=(c=x.EventAware,l.__extends(d,c),d.prototype.show=function(e){(this._container=e).appendChild(this._dom);var t=e.getBoundingClientRect(),e=p.Utils.getSize(this._dom);p.Utils.move(this._dom,(t.width-e.width)/2,(t.height-e.height)/3)},d.prototype.setZIndex=function(e){this._dom.style.zIndex=String(e+5)},d.prototype.close=function(){p.Utils.detach(this._dom)},d.prototype.$_createElement=function(e){return e=e.createElement("div"),e.className="rg-load-indicator",e.style.position="absolute",e},d)});t(nr),nr.ProgressManager;var rr=n(function(e,t){function i(e){var t=n.call(this,e)||this;return t._count=10,t._title="\ub9ac\uc5bc\uadf8\ub9ac\ub4dc \ud14c\uc774\ube14 (\ud14c\uc774\ube14\uc5d0\uc11c \uc5d4\ud130\ud0a4\ub85c \ubc84\ud2bc \ub9c1\ud06c\ub4f1\uc758 \uae30\ub2a5\uc774 \uc2e4\ud589\ub429\ub2c8\ub2e4)",t._description="${columns} \uc5f4\ub85c \uc774\ub8e8\uc5b4\uc9c4 \ub370\uc774\ud130 \ud14c\uc774\ube14\uc785\ub2c8\ub2e4.",t._autoDrawing=!0,t._indicatorTitle="\uc21c\ubc88",t._checkBarTitle="\uc120\ud0dd",t._stateBarTitle="\ud589 \uc0c1\ud0dc",t._emptyMessage="\ub370\uc774\ud130\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.",t._editButtonText="\ud3b8\uc9d1",t._cellButtonTexts={action:"\uc2e4\ud589",popup:"\ud31d\uc5c5"},t._stateTexts={created:"\ucd94\uac00",updated:"\uc218\uc815",deleted:"\uc0ad\uc81c",createAndDeleted:"\ucd94\uac00 \ud6c4 \uc0ad\uc81c"},t._rowText="${index} \ud589",t._linkText="\ub9c1\ud06c",t._groupSummaryText="${groupText} \ubd80\ubd84 \ud569\uacc4 \ud589",t._summaryText="\ud569\uacc4 \ud589",t._insertButtonText="\ud589 \uc0bd\uc785",t._deleteButtonText="\ud589 \uc0ad\uc81c",t._appendButtonText="\ud589 \ucd94\uac00",t._alreadyEditMessage="\uc774\ubbf8 \ud3b8\uc9d1\uc911\uc785\ub2c8\ub2e4.",t._editor=new o(e),t}function u(e){return e=s.call(this,e)||this,e._yearText="\ub144\ub3c4",e._monthText="\uc6d4",e._dayText="\uc77c\uc790",e._ampmText="\uc624\uc804/\uc624\ud6c4",e._amText="\uc624\uc804",e._pmText="\uc624\ud6c4",e._hourText="\uc2dc",e._minuteText="\ubd84",e._secondText="\ucd08",e._validationMessage="\uc798\ubabb\ub41c \uc785\ub825\uc785\ub2c8\ub2e4.",e}function h(e){var t=a.call(this)||this;return t._renderers={},t._grid=e,t}function b(e,t){var n=v.call(this)||this;n._start=0,n._indicatorVisible=!0,n._checkBarVisible=!0,n._stateBarVisible=!0,n._dataProvider=null,n._itemProvider=null,n._columns=[],n._colCount=0,n._elements=[],n._colTitles=[],n._editing=!1,n._editElement=null,n._rows=0,n._internalSet=!1,n._numberFormatter=null,n._datetimeWriter=null,n._booleanFormatter=null,n._numberFormat=null,n._datetimeFormat=null,n._booleanFormat=null,n._grid=e;var i=n._doc=e.doc,s=e.container,o=s._containerDiv.id;n._container=s,i=n._containerDiv=i.createElement("div"),o&&(i.id=o+"_shadowdom"),i.className="rg-grid-shadow",o=i.style,o.height="0px",o.overflow=p.Utils.isDebugging()?"":"hidden",o.whiteSpace="nowrap",i.tabIndex=-1,s._containerDiv.parentNode.insertBefore(i,s._containerDiv),n._renders=new f(e),n._createTable(i),n._start=0,t instanceof r?n._options=t:(n._options=new r(n._grid),n._options.assignFrom(t)),n._autoDrawing=n._options.autoDrawing,n._editor=new E(e,i,n._options.editor);var u=n;return n._editor.beforeCallback=function(e,t){return u._editing?(alert(u._options.alreadyEditMessage),u._editor.focusEditor(),!1):(u._editing=!0,u._options.beforeEditPopupCallback&&u._options.beforeEditPopupCallback(e.handler,t),!0)},n._editor.afterCallback=function(e,t){u._options.afterEditPopupCallback&&u._options.afterEditPopupCallback(e.handler,t),u._editing=!1},n._editor.editorCommited=function(e,t,n){u.$_editorCommitedHandler(e.handler,t,n)},n}function S(e,t,n){var r=w.call(this)||this;r._activeControls=[],r._lineInput=null,r._multiInput=null,r._numberInput=null,r._selector=null,r._yearInput=null,r._monthInput=null,r._dayInput=null,r._ampmSelector=null,r._hourInput=null,r._minuteInput=null,r._secondInput=null,r._defaultInput=null,r._focusControl=null,r._beforeCallback=null,r._afterCallback=null,r._editorCommited=null,r._grid=e;var i=r._doc=e.doc;r._container=e.container,r._options=n,r._valueChanged=!1,r._type=null,r._value=null,r._column=null,r._itemIndex=null,i.createElement("input"),r._dialog=i.createElement("div");var s=r._dialog;return s.class="popup",s.role="dialog",s.ariaLabelledby="popuptitle",s.style.display="none",s.style.position="absolute",s.style.left="0px",s.style.top="0px",e=i.createElement("div"),e.id=s.ariaLabelledby,e.style.display="none",s.appendChild(e),r._body=i.createElement("div"),s.appendChild(r._body),n=i.createElement("div"),e=i.createElement("input"),e.type="button",e.value="Apply",e.title="Apply",r._container.$_addListener(e,"click",r.$_applyButtonHandler.bind(r),!1),n.appendChild(e),i=i.createElement("input"),i.type="button",i.value="Cancel",i.title="Cancel",r._container.$_addListener(i,"click",r.$_cancelButtonHandler.bind(r),!1),n.appendChild(i),s.appendChild(n),t.firstElementChild?t.insertBefore(s,t.firstElementChild):t.appendChild(s),r}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Kt.GridBaseOptions,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(i,"count",{get:function(){return this._count},set:function(e){this._count!==e&&(this._count=e)}}),_dp(i,"title",{get:function(){return this._title},set:function(e){this._title!==e&&(this._title=e)}}),_dp(i,"description",{get:function(){return this._description},set:function(e){this._description!==e&&(this._description=e)}}),_dp(i,"autoDrawing",{get:function(){return this._autoDrawing},set:function(e){this._autoDrawing!==e&&(this._autoDrawing=e)}}),_dp(i,"indicatorTitle",{get:function(){return this._indicatorTitle},set:function(e){this._indicatorTitle!==e&&(this._indicatorTitle=e)}}),_dp(i,"checkBarTitle",{get:function(){return this._checkBarTitle},set:function(e){this._checkBarTitle!==e&&(this._checkBarTitle=e)}}),_dp(i,"stateBarTitle",{get:function(){return this._stateBarTitle},set:function(e){this._stateBarTitle!==e&&(this._stateBarTitle=e)}}),_dp(i,"emptyMessage",{get:function(){return this._emptyMessage},set:function(e){this._emptyMessage!==e&&(this._emptyMessage=e)}}),_dp(i,"editButtonText",{get:function(){return this._editButtonText},set:function(e){this._editButtonText!==e&&(this._editButtonText=e)}}),_dp(i,"cellButtonTexts",{get:function(){return this._cellButtonTexts},set:function(e){this._cellButtonTexts!==e&&(this._cellButtonTexts=e)}}),_dp(i,"stateTexts",{get:function(){return this._stateTexts},set:function(e){this._stateTexts!==e&&(this._stateTexts=e)}}),_dp(i,"rowText",{get:function(){return this._rowText},set:function(e){this._rowText!==e&&(this._rowText=e)}}),_dp(i,"linkText",{get:function(){return this._linkText},set:function(e){this._linkText!==e&&(this._linkText=e)}}),_dp(i,"groupSummaryText",{get:function(){return this._groupSummaryText},set:function(e){this._groupSummaryText!==e&&(this._groupSummaryText=e)}}),_dp(i,"summaryText",{get:function(){return this._summaryText},set:function(e){this._summaryText!==e&&(this._summaryText=e)}}),_dp(i,"insertButtonText",{get:function(){return this._insertButtonText},set:function(e){this._insertButtonText!==e&&(this._insertButtonText=e)}}),_dp(i,"deleteButtonText",{get:function(){return this._deleteButtonText},set:function(e){this._deleteButtonText!==e&&(this._deleteButtonText=e)}}),_dp(i,"appendButtonText",{get:function(){return this._appendButtonText},set:function(e){this._appendButtonText!==e&&(this._appendButtonText=e)}}),_dp(i,"alreadyEditMessage",{get:function(){return this._alreadyEditMessage},set:function(e){this._alreadyEditMessage!==e&&(this._alreadyEditMessage=e)}}),_dp(i,"editor",{get:function(){return this._editor}}),_dp(i,"beforeEditPopupCallback",{get:function(){return this._beforeEditPopupCallback},set:function(e){this._beforeEditPopupCallback=e}}),_dp(i,"afterEditPopupCallback",{get:function(){return this._afterEditPopupCallback},set:function(e){this._afterEditPopupCallback=e}}),_dp(i,"checkItemCallback",{get:function(){return this._checkItemCallback},set:function(e){this._checkItemCallback=e}}),i);t.ShadowDomOptions=r;var s,o=(s=Kt.GridBaseOptions,l.__extends(u,s),_dp(u,"yearText",{get:function(){return this._yearText},set:function(e){this._yearText!==e&&(this._yearText=e)}}),_dp(u,"monthText",{get:function(){return this._monthText},set:function(e){this._monthText!==e&&(this._monthText=e)}}),_dp(u,"dayText",{get:function(){return this._dayText},set:function(e){this._dayText!==e&&(this._dayText=e)}}),_dp(u,"ampmText",{get:function(){return this._ampmText},set:function(e){this._ampmText!==e&&(this._ampmText=e)}}),_dp(u,"amText",{get:function(){return this._amText},set:function(e){this._amText!==e&&(this._amText=e)}}),_dp(u,"pmText",{get:function(){return this._pmText},set:function(e){this._pmText!==e&&(this._pmText=e)}}),_dp(u,"hourText",{get:function(){return this._hourText},set:function(e){this._hourText!==e&&(this._hourText=e)}}),_dp(u,"minuteText",{get:function(){return this._minuteText},set:function(e){this._minuteText!==e&&(this._minuteText=e)}}),_dp(u,"secondText",{get:function(){return this._secondText},set:function(e){this._secondText!==e&&(this._secondText=e)}}),_dp(u,"validationMessage",{get:function(){return this._validationMessage},set:function(e){this._validationMessage!==e&&(this._validationMessage=e)}}),u);t.ShadowDomEditorOptions=o;var a,f=(a=y.Base,l.__extends(h,a),h.prototype._doDispose=function(){for(var e in this._grid=null,this._renderers)this._renderers[e].dispose();this._renderers=null,a.prototype._doDispose.call(this)},_dp(h,"grid",{get:function(){return this._grid}}),h.prototype.getRenderer=function(e){var e=e.type,t=this._renderers[e];if(!t){switch(e){case Ct.ImageCellRenderer.TYPE:t=new Ct.ImageCellRenderer;break;case Ct.ButtonCellRenderer.TYPE:t=new Ct.ButtonCellRenderer;break;case Ct.LinkCellRenderer.TYPE:t=new Ct.LinkCellRenderer}t=t||new Ct.TextCellRenderer,this._renderers[e]=this._renderers[e]||t}return t},h),v,m,g=(v=x.EventAware,l.__extends(b,v),b.prototype.dispose=function(){return this.$_clearBody(),this._container.$_removeListener(this._prevButton,"click"),this._container.$_removeListener(this._nextButton,"click"),this._editor.dispose(),this._table.parentNode&&this._table.parentNode.removeChild(this._table),this._renders=this._renders.dispose(),this._options=this._options&&this._options.dispose(),this._numberFormatter=null,delete this._numberFormatter,delete this._datetimeWriter,this._booleanFormatter=null,delete this._booleanFormatter,this._columns=[],this._dataProvider=null,this._itemProvider=null,this._containerDiv=null,this._container=null,v.prototype.dispose.call(this)},b.prototype.onGroupedItemProviderGrouped=function(e){0<this._columns.length&&this.$_setItems(0)},b.prototype.onDataProviderDataChanged=function(e){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},b.prototype.onDataProviderReset=function(e){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},b.prototype.onDataProviderRefresh=function(e){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},b.prototype.onDataProviderRefreshClient=function(e){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},b.prototype.onDataProviderRowCountChanged=function(e){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},b.prototype.onDataProviderRowMoved=function(e,t,n){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},b.prototype.onDataProviderRowsMoved=function(e,t,n,r){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},b.prototype.onDataProviderStateChanged=function(e,t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},b.prototype.onDataProviderStatesChanged=function(e,t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},b.prototype.onDataProviderStatesCleared=function(e){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},b.prototype.onDataProviderRestoreRows=function(e){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},_dp(b,"numberFormat",{get:function(){return this._numberFormat},set:function(e){e!=this._numberFormat&&(this._numberFormat=e,this._numberFormatter=e?C.DecimalFormatter.getFormatter(e):null,this._changed())}}),b.prototype._createTable=function(e){var t=this._doc;this._table=t.createElement("table"),this._caption=t.createElement("caption"),this._table.appendChild(this._caption),this._head=t.createElement("thead"),this._table.appendChild(this._head),this._body=t.createElement("tbody"),this._table.appendChild(this._body);var n=t.createElement("tfoot"),r=t.createElement("tr"),t=t.createElement("td");this._prevButton=this.$_addButton(t,"prev page",this.$_prevButtonHandler),this._nextButton=this.$_addButton(t,"next page",this.$_nextButtonHandler),r.appendChild(t),n.appendChild(r),this._table.appendChild(n),e.appendChild(this._table)},b.prototype.setFocus=function(){this._containerDiv.focus({preventScroll:!0})},b.prototype.setColumns=function(e){var t=this._grid,n=this._columns=[];if(this._fields=[],this._editables=[],e)for(var r=t.collectColumns(!0,!0,!0),i=0,s=r.length;i<s;i++)r[i]instanceof jt.DataColumn&&n.push(r[i]);else for(i=0,s=t.columnCount;i<s;i++){var o=t.getColumn(i);o instanceof jt.DataColumn&&o.visible&&n.push(o)}this._options.autoDrawing&&this._itemProvider&&this.reset()},b.prototype.setItemProvider=function(e){var t=this._options;if(e instanceof _t.TreeGridItemProvider)throw new Error("TreeView not support Web Accessibility.");var n,r=e!=this._itemProvider;r&&(n=void 0,this._itemProvider&&(n=this._itemProvider.dataSource).unregisterClient(this),this._itemProvider=e,(n=this._dataProvider=this._itemProvider.dataSource).registerClient(this),n.addListener(this),this._itemProvider.addListener(this)),t.autoDrawing&&0<this._columns.length&&(r||0==this._rows)&&this.reset()},b.prototype.reset=function(){this._resetTimer&&clearTimeout(this._resetTimer),this._resetTimer=setTimeout(function(){this._grid._loading?this._resetTimer=setTimeout(function(){this.reset()}.bind(this),75):(this.$_setOptions(),this.$_fillHead(),this.$_setItems(0),this._resetTime=null)}.bind(this),75)},b.prototype.$_setOptions=function(){var e=this._grid;this._options,this._indicatorVisible=e.rowIndicator.visible;var t=e.footers;t.count,this._footersVisible=t.visible,t=e.checkBar,this._checkBarVisible=t.visible,this._checkBarExclusive=t.exclusive,this._stateBarVisible=e.stateBar.visible,e=e.editOptions,this._insertable=e.insertable,this._appendable=e.appendable,this._deletable=e.deletable},b.prototype.$_setItems=function(e){this._start=e,this.$_clearBody(),this.$_fillBody()},b.prototype.$_fillHead=function(){var e=this._doc,t=this._options;(r=this._head.querySelector("tr"))&&this._head.removeChild(r),this._colCount=0;var n="",r=e.createElement("tr");this._indicatorVisible&&((o=e.createElement("th")).scope="col",o.innerText=t.indicatorTitle,r.appendChild(o),n+=t.indicatorTitle+", ",this._colCount++),this._stateBarVisible&&((o=e.createElement("th")).scope="col",o.innerText=t.stateBarTitle,r.appendChild(o),n+=t.stateBarTitle+", ",this._colCount++),this._checkBarVisible&&((o=e.createElement("th")).scope="col",o.innerText=t.checkBarTitle,r.appendChild(o),n+=t.checkBarTitle+", ",this._colCount++),this._colTitles=[];for(var i=0,s=this._columns.length;i<s;i++){var o,u=this._columns[i];u.visible&&0<u.width?(u=u.header.text||u.name,(o=e.createElement("th")).scope="col",o.innerText=u,r.appendChild(o),n+=u+", ",this._colTitles.push(u),this._colCount++):this._colTitles.push(null)}this._head.appendChild(r),o=e.createElement("th"),this._head.appendChild(r);var a="";t.title&&(a+="<strong>"+t.title+"</strong>"),t.description&&(a+="<span>"+t.description.replace("${columns}",n.substr(0,n.length-2))+"</span>"),this._caption.innerHTML=a},b.prototype.$_clearBody=function(){for(var e=this._elements.length;e--;){var t=this._elements[e];t!=this._prevButton&&t!=this._nextButton&&this._container.$_removeListenerAll(this._elements[e])}for(this._elements=[];0<this._body.childNodes.length;)this._body.removeChild(this._body.lastChild)},b.prototype.$_fillBody=function(){var e=this._doc,t=this._options;this._rows=this._itemProvider.rowCount;var n=Math.min(this._rows-this._start,t.count);if(this._prevButton.disabled=0==this._start,this._nextButton.disabled=n<t.count,0<n){for(var r=0;r<n;r++)this.$_buildItem(this._start+r);this._footersVisible}else{var i=e.createElement("tr"),e=e.createElement("td");e.colSpan=this._colCount,e.innerText=t.emptyMessage,i.appendChild(e),this._body.appendChild(i)}},b.prototype.$_buildItem=function(e){var t,n=this._grid,r=this._doc,i=this._options,s=this._itemProvider.getItem(e,!0),o=n.editOptions,u=o.isWritable()&&o.canUpdate(s.rowState===d.RowState.CREATED),a=r.createElement("tr");a.id=s.index.toString(),this._indicatorVisible&&((t=r.createElement("td")).id="indicator",t.innerText=this.$_getRowText(e+1),a.appendChild(t)),this._stateBarVisible&&((t=r.createElement("td")).id="state",o=s.rowState,t.innerText=i.stateTexts&&o!=d.RowState.NONE?i.stateTexts[o]:"",a.appendChild(t)),this._checkBarVisible&&((t=r.createElement("td")).id="checkbox",this.$_addCheckBox(t,s,s.checked,this._checkBarExclusive,this.$_checkboxHandler),a.appendChild(t));for(var f=0,l=this._columns.length;f<l;f++){var h,p,v,m,g,y=this._columns[f];null!=this._colTitles[f]&&((t=r.createElement("td")).id="col_"+f,h=this.$_getRowText(e+1)+" "+this._colTitles[f]+" ",v=It.CellIndex.temp(n,s.index,y),m=null==(m=n.getDisplayText(v))?"":m,g=n.body.getCell(v,!1),(p=this._renders.getRenderer(g.dataColumn.renderer||{})).assignFrom(g.dataColumn.renderer),p instanceof Ct.LinkCellRenderer?this.$_addLinkRenderer(t,p.$_getUrl(n,g),p.$_getTitle(n,g)||i.linkText,m,this.$_linkClickHandler):p instanceof Ct.ButtonCellRenderer?(v=Et.DataCell.getText(s,y))&&this.$_addButtonRenderer(t,h+v,v,this.$_buttonClickHandler):t.innerHTML="<span>"+m+"</span>",(m=y.button)!=c.CellButton.NONE?this.$_addButton(t,h+i.cellButtonTexts[m],"action"==m?this.$_actionButtonHandler:this.$_popupButtonHandler):p&&p instanceof Ct.ImageCellRenderer&&(g=p.$_getTitle(n,g))&&this.$_addButton(t,h+g,this.$_imageClickHandler,0),u&&y.isWritable()&&this.$_addButton(t,h+i.editButtonText,this.$_editButtonHandler),a.appendChild(t))}(this._insertable||this._appendable||this._deletable)&&(t=r.createElement("td"),this._insertable&&(this.$_addButton(t,i.insertButtonText,this.$_insertRowButtonHandler),e<this._start+i.count-1&&this.$_addButton(t,i.appendButtonText,this.$_appendRowButtonHandler)),this._deletable&&this.$_addButton(t,i.deleteButtonText,this.$_deleteRowButtonHandler),a.appendChild(t)),this._body.appendChild(a)},b.prototype.$_getRowText=function(e){return this._options.rowText?this._options.rowText.replace("${index}",String(e)):String(e)},b.prototype.$_getItemIndex=function(e){return e=e.parentElement,e=e?e.parentElement:null,e&&e.id?parseInt(e.id):-1},b.prototype.$_getCellIndex=function(e){var t=e.parentElement,e=t?t.parentElement:null;if(e){e=parseInt(e.id);if(!isNaN(e)){t=(t=t.id).substring(4,t.length),t=this._columns[parseInt(t)];if(t)return It.CellIndex.temp(this._grid,e,t)}}return null},b.prototype.$_addCheckBox=function(e,t,n,r,i){var s=this._doc.createElement("input");return s.type=r?"radio":"checkbox",s.name="rg_shadow_item",s.tabIndex=-1,s.title=this.$_getRowText(t.index+1),s.$$value=t.index,s.checked=n,this._container.$_addListener(s,"click",i.bind(this),!1),e.appendChild(s),this._elements.push(s),s},b.prototype.$_addButtonRenderer=function(e,t,n,r){var i=this._doc.createElement("input");return i.type="button",i.title=t,i.value=n,i.tabIndex=-1,this._container.$_addListener(i,"click",r.bind(this),!1),e.appendChild(i),this._elements.push(i),i},b.prototype.$_addLinkRenderer=function(e,t,n,r,i){var s=this._doc.createElement("a");return s.href=t,s.title=n,s.text=r,s.target="_blank",this._container.$_addListener(s,"click",i.bind(this),!1),e.appendChild(s),this._elements.push(s),s},b.prototype.$_addButton=function(e,t,n,r){var i=this._doc.createElement("input");return i.type="button",i.title=t,i.tabIndex=-1,null!=r&&(i.$$value=r.toString()),this._container.$_addListener(i,"click",n.bind(this),!1),e.appendChild(i),this._elements.push(i),i},b.prototype.isDataEditing=function(){return this._editing&&!this._internalSet},b.prototype.cancelDataEditing=function(){return!1},b.prototype.commitDataEditing=function(){return!1},b.prototype.commit=function(){return!1},b.prototype._changed=function(){},b.prototype.$_prevButtonHandler=function(e){this.$_setItems(this._start-this._options.count)},b.prototype.$_nextButtonHandler=function(e){this.$_setItems(this._start+this._options.count)},b.prototype.$_checkboxHandler=function(e){var t=this._grid,n=e.target||e.srcElement||e.originalTarget,e=n.$$value;"radio"==n.type?t.checkItem(e,n.checked,!0,!0):t.checkItem(e,n.checked,!1,!0),n=this._options.checkItemCallback,n&&n.call(this,t.handler,e,t.isCheckedItem(e))},b.prototype.$_actionButtonHandler=function(e){e=e.target||e.srcElement||e.originalTarget,e=this.$_getCellIndex(e),e&&this._grid._fireCellButtonClicked(e)},b.prototype.$_popupButtonHandler=function(e){},b.prototype.$_buttonClickHandler=function(e){var t=e.target||e.srcElement||e.originalTarget,e=this.$_getCellIndex(t),t={type:"button",value:e.value,accessibility:!0};return this._grid._fireCellItemClicked(e,t),!0},b.prototype.$_linkClickHandler=function(e){var t=e.target||e.srcElement,n=this.$_getCellIndex(t),t={type:Ct.LinkCellRenderer.TYPE,url:t.href,value:n.value,accessibility:!0};!1===this._grid._fireCellItemClicked(n,t)&&(e.preventDefault(),e.stopImmediatePropagation())},b.prototype.$_imageClickHandler=function(e){var t=e.target||e.srcElement||e.originalTarget,e=this.$_getCellIndex(t),t={type:Ct.ImageCellRenderer.TYPE,value:e.value,accessibility:!0};return this._grid._fireCellItemClicked(e,t),!0},b.prototype.$_editButtonHandler=function(e){var t=e.target||e.srcElement||e.originalTarget,n=this.$_getCellIndex(t).clone(),r=this.$_getRowText(n.itemIndex+1),i=n.dataColumn.header.text||n.dataColumn.name,s=this._grid,o={itemIndex:n.itemIndex,column:n.column.name};o.column||(o.fieldName=n.column.fieldName),e=s.focusedIndex.clone(),e.assignFrom(o),s.setFocusedIndex(e,!1,!0),this._editElement=t.parentElement,this._editor.popup(n,r,i,t)},b.prototype.$_appendRowButtonHandler=function(e){e=e.target||e.srcElement||e.originalTarget,e=this.$_getItemIndex(e),-1==e?this._dataProvider.addRow([]):(e=this._itemProvider.getItem(e),this._dataProvider.insertRow(e.dataRow+1,[]))},b.prototype.$_insertRowButtonHandler=function(e){e=e.target||e.srcElement||e.originalTarget,e=this.$_getItemIndex(e),-1!=e&&(e=this._itemProvider.getItem(e),this._dataProvider.insertRow(e.dataRow,[]))},b.prototype.$_deleteRowButtonHandler=function(e){e=e.target||e.srcElement||e.originalTarget,e=this.$_getItemIndex(e),-1!=e&&(e=this._itemProvider.getItem(e),this._dataProvider.removeRow(e.dataRow,[]))},b.prototype.$_editorCommitedHandler=function(e,t,n){var r=t.dataColumn,i=t.item,s=r.fieldName;this._internalSet=!0;try{i.setData(r.dataIndex,n)}finally{this._internalSet=!1}this.$_setElementText(this._editElement,t,i,r,n);for(var o=this._editElement.parentNode.childNodes,u=o.length;u--;){var a,f,l=o[u];l!=this._editElement&&(!(a=this.$_getCellIndex(l.firstChild))||(f=a.column)&&f.fieldName===s&&this.$_setElementText(l,a,i,f,n))}},b.prototype.$_setElementText=function(e,t,n,r,i){var s=this._grid,o=s.getDisplayText(t),u=s.getBodyCellAt(t),t=s.body.getCell(t,!1),u=u.renderer2;u instanceof Ct.LinkCellRenderer?(s=u.$_getUrl(s,t),(t=e.getElementsByTagName("a")[0]).text=o,t.href=s):e.getElementsByTagName("span")[0].innerText=o,e=e.parentElement.querySelector("#state"),e&&(n=n.rowState,e.innerText=this._options.stateTexts&&n!=d.RowState.NONE?this._options.stateTexts[n]:"")},b);t.ShadowDom=g,(g=m=m||{}).AM="am",g.PM="pm";var w,E=(w=x.EventAware,l.__extends(S,w),_dp(S,"beforeCallback",{get:function(){return this._beforeCallback},set:function(e){this._beforeCallback=e}}),_dp(S,"afterCallback",{get:function(){return this._afterCallback},set:function(e){this._afterCallback=e}}),_dp(S,"editorCommited",{get:function(){return this._editorCommited},set:function(e){this._editorCommited!==e&&(this._editorCommited=e)}}),S.prototype.popup=function(e,t,n,r){var i=!1;if(i=this._beforeCallback?this._beforeCallback(this._grid,e):i){this._focusControl=r;var i=(this._index=e).column,s=void 0;if(i instanceof jt.DataColumn)switch(i.valueType){case c.ValueType.NUMBER:s="number";break;case c.ValueType.DATETIME:s="date"}s||(r=this._grid.getBodyCellAt(e),s=(s=an.CellEditor.getEditorType(r))||"line"),this._value=e.item.getData(i.dataIndex),this.$_buildEditor(s,t,n),this.$_setEditValue(s,this._value),this._dialog.style.display="block",this._defaultInput&&this._defaultInput.focus()}},S.prototype.focusEditor=function(){this._defaultInput&&this._defaultInput.focus()},S.prototype.$_closeUp=function(e){!(e=void 0===e?!1:e)||(e=this.$_getEditValue(this._type))!=this._value&&this._editorCommited(this._grid,this._index,e),this._dialog.style.display="none",this._afterCallback&&this._afterCallback(this._grid,this._index),this._focusControl&&this._focusControl.focus()},S.prototype.$_clearControls=function(){for(var e=this._activeControls.length;e--;)this._container.$_removeListenerAll(this._activeControls[e]),this._body.removeChild(this._activeControls[e]),delete this._activeControls[e];this._activeControls=[]},S.prototype.$_buildEditor=function(e,t,n){var r=this._doc;this.$_clearControls();var i=t+" "+n;switch(e){case"multiline":(o=this._multiInput=r.createElement("textarea")).title=i,this._body.appendChild(o),this._activeControls.push(o);break;case"number":o=this._numberInput=this.$_addNumberInput(i);break;case"dropDown":(o=this._selector=r.createElement("select")).title=i,this.$_buildSelectOptions(o,this._index),this._body.appendChild(o),this._activeControls.push(o);break;case"date":var s=this._options,o=this._yearInput=this.$_addNumberInput(s.yearText,2e3,4,0,9999);this._monthInput=this.$_addNumberInput(s.monthText,1,2,1,12),this._dayInput=this.$_addNumberInput(s.dayText,1,2,1,31),this._ampmSelector=r.createElement("select"),this._ampmSelector.title=s.ampmText,this._ampmSelector.options[0]=new Option(s.amText,m.AM),this._ampmSelector.options[1]=new Option(s.pmText,m.PM),this._body.appendChild(this._ampmSelector),this._activeControls.push(this._ampmSelector),this._hourInput=this.$_addNumberInput(s.hourText,0,2,0,11),this._minuteInput=this.$_addNumberInput(s.minuteText,0,2,0,59),this._secondInput=this.$_addNumberInput(s.secondText,0,2,0,59);break;default:(o=this._lineInput=r.createElement("input")).type="text",o.title=i,this._body.appendChild(o),this._activeControls.push(o)}this._defaultInput=o,this._type=e},S.prototype.$_buildSelectOptions=function(e,t){var n,r,i=this._doc,s=t.item,t=t.dataColumn,o=!1;if(t.lookupSource){for(var u=t.lookupKeyFieldIds,a=[],f=0;f<u.length-1;f++)a.push(s.getData(u[f]));var l=t.lookupSource.getTextDomain(a);l&&l.values&&0<l.values.length&&(r=l.values,n=l.keys,o=!0)}else(l=t.values)&&0<l.length&&((t=t.labels)&&t.length>=l.length?(r=t,n=l,o=!0):r=l);if(r)for(f=0;f<r.length;f++){var c=i.createElement("option");c.innerText=r[f],c.value=(o&&f<n.length?n:r)[f],e.appendChild(c)}},S.prototype.$_addNumberInput=function(e,t,n,r,i){var s=this._doc.createElement("input");return(s.type="number")==s.type?(null!=r&&(s.min=r+""),null!=r&&(s.max=i+"")):(null!=n&&(s.maxLength=n),null!=r&&(s.dataset.min=r+""),null!=i&&(s.dataset.max=i+""),this._container.$_addListener(s,"keypress",this.$_numberEditHandler.bind(this),!1)),s.title=e,null!=t&&(s.value=t),this._body.appendChild(s),this._activeControls.push(s),s},S.prototype.$_setEditValue=function(e,t){switch(e){case"multiline":this._multiInput.value=t||"";break;case"number":isNaN(t)||(this._numberInput.value=t||"");break;case"dropDown":this._selector.value=t||"";break;case"date":var n,r=t;(r=t&&"string"==typeof t?new Date(t):r)instanceof Date&&!isNaN(r.getTime())?(this._yearInput.value=r.getFullYear(),this._monthInput.value=r.getMonth()+1,this._dayInput.value=r.getDate(),n=r.getHours(),this._ampmSelector.value=n<12?m.AM:m.PM,this._hourInput.value=n%12,this._minuteInput.value=r.getMinutes(),this._secondInput.value=r.getSeconds()):(this._yearInput.value="",this._monthInput.value="",this._dayInput.value="",this._ampmSelector.value=m.AM,this._hourInput.value="",this._minuteInput.value="",this._secondInput.value="");break;default:this._lineInput.value=t||""}},S.prototype.$_getEditValue=function(e){switch(e){case"multiline":return this._multiInput.value;case"number":var t=Number(this._numberInput.value);return isNaN(t)?null:t;case"dropDown":return this._selector.value;case"date":var n=parseInt(this._yearInput.value),r=parseInt(this._monthInput.value)-1,i=parseInt(this._dayInput.value),s=parseInt(this._hourInput.value)+(this._ampmSelector.value==m.PM?12:0),o=parseInt(this._minuteInput.value),t=parseInt(this._secondInput.value);return new Date(n,r,i,s,o,t);default:return this._lineInput.value}},S.prototype.$_checkValue=function(e){if("date"!=e)return!0;var t=parseInt(this._yearInput.value);if(isNaN(t)||t<0)return alert(this._yearInput.title+" "+this._options.validationMessage),this._yearInput.focus(),!1;var n=parseInt(this._monthInput.value);if(isNaN(n)||n<1||12<n)return alert(this._monthInput.title+" "+this._options.validationMessage),this._monthInput.focus(),!1;var r=parseInt(this._dayInput.value);if(isNaN(r)||r<1||31<r)return alert(this._dayInput.title+" "+this._options.validationMessage),this._dayInput.focus(),!1;var i=parseInt(this._hourInput.value);if(isNaN(i)||i<0||11<i)return alert(this._hourInput.title+" "+this._options.validationMessage),this._hourInput.focus(),!1;var s=parseInt(this._minuteInput.value);return isNaN(s)||s<0||59<s?(alert(this._minuteInput.title+" "+this._options.validationMessage),this._minuteInput.value.focus(),!1):(e=parseInt(this._secondInput.value),isNaN(e)||e<0||59<e?(alert(this._secondInput.title+" "+this._options.validationMessage),this._secondInput.value.focus(),!1):(e=new Date(t,n,r,i,s,e),!!e&&!isNaN(e.getTime())||(alert(this._options.validationMessage),this._monthInput.focus(),!1)))},S.prototype.$_numberEditHandler=function(e){return 48<=e.charCode&&e.charCode<=57},S.prototype.$_applyButtonHandler=function(e){this.$_checkValue(this._type)&&this.$_closeUp(!0)},S.prototype.$_cancelButtonHandler=function(e){this.$_closeUp()},S);t.ShadowEditor=E});t(rr),rr.ShadowDomOptions,rr.ShadowDomEditorOptions,rr.ShadowDom,rr.ShadowEditor;var ir=n(function(e,t){function o(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=null);var i=n.call(this,e.doc,!0)||this;i._debugging=!1,i._scrollBarWidth=16,i._scrollBarHeight=16,i._filterRunning=!1,i._keepNullFocus=!0,i._loading=!0,i._dataLoad=!1,i._userMode=!1,i._userModeError=null,i._gridObjects=[],i._tableViews={},i._columnMap={},i._columnLayouts=new jt.ColumnLayoutCollection,i._columnLock=0,i._columnsDirty=!1,i._columnSummaryRuntime=new qt.ColumnSummaryRuntime,i._columnValidationRuntime=new Dt.DataCellValidationRuntime,i._rowValidationRuntime=new Dt.DataRowValidationRuntime,i._layouted=!1,i._resetting=!1,i._needMerge=!1,i._leftPos=0,i._horzScrolled=!1,i._topIndex=0,i._prevTop=0,i._prevLast=-1,i._updateLock=!1,i._hoveredY=-1,i._focusing=!1,i._dataChanged=!1,i._validations=new Dt.EditValidationCollection(!1),i.$_editFocused=!1,i.$_showFocusCell=!1,i._needSyncHeadCheck=!1,i._cellUpdateEventLock=!1,i._currentRowId=-1,i._currentRow=-1,i._scrolledTime=0,i.$_fixedColCount=0,i.$_rfixedColCount=0,i._cellLayoutDirty=!1;var s=e.doc;if(!Gn.lk())return i;i._container=e,i._addGridObject(i._header=new Ut.GridHeader(i)),i._addGridObject(i._footers=new zt.GridFooterCollection(i)),i._addGridObject(i._headerSummaries=new Xn.HeaderSummaryCollection(i)),i._addGridObject(i._rowIndicator=new Xt.RowIndicator(i)),i._addGridObject(i._stateBar=new Vt.StateBar(i)),i._addGridObject(i._checkBar=new $t.CheckBar(i)),i._addGridObject(i._body=new Jt.GridBody(i)),i._rootElement=new Yt.LayerElement(s,"grid root view"),i.addChild(i._rootElement),i._debugView=new tr.DebugLayer(i),i._emptyView=new nn.EmptyGridElement(s),i.addChild(i._emptyView),i._contentPane=new Tn.DataContentPane(s,"contentPane"),i.addElement(i._contentPane),i._rightContentPane=new Tn.RightContentPane(s,"rightContentPane"),i.addElement(i._rightContentPane),i._fixedContentPane=new Tn.FixedContentPane(s,"fixedContentPane"),i.addElement(i._fixedContentPane),i._doContentPanesCreated(),i._leftContentPane=new Tn.LeftContentPane(s,"leftContentPane"),i.addElement(i._leftContentPane),i._sideContentPane=i._createSidePane(),i._sideContentPane&&i.addElement(i._sideContentPane),i._topContentPane=new Tn.ContentPane(s,"topContentPane"),i.addElement(i._topContentPane),i._bodyView=i._createBodyView(i._body),i._fixedBodyView=i._createFixedBodyView(i._body),i._rightBodyView=i._createRightBodyView(i._body),i._headerView=new ln.HeaderElement(s,i._header),i._fixedHeaderView=new ln.FixedHeaderElement(s,i._header),i._rightHeaderView=new ln.RightHeaderElement(s,i._header),i._headerSummaryView=new Vn.HeaderSummaryElement(s,i._headerSummaries),i._fixedHeaderSummaryView=new Vn.FixedHeaderSummaryElement(s,i._headerSummaries),i._rightHeaderSummaryView=new Vn.RightHeaderSummaryElement(s,i._headerSummaries),i._footerView=new pn.FooterElement(s,i.footers),i._fixedFooterView=new pn.FixedFooterElement(s,i.footers),i._rightFooterView=new pn.RightFooterElement(s,i.footers),i._rowBarContainer=new In.RowBarContainer(i),i._headView=new bn.GridHeadElement(i),i._sumView=new $n.GridSumElement(s),i._footView=new wn.GridFootElement(s);for(var o=[i._rowBarContainer,i._bodyView,i._fixedBodyView,i._rightBodyView,i._headerView,i._fixedHeaderView,i._rightHeaderView,i._headerSummaryView,i._fixedHeaderSummaryView,i._rightHeaderSummaryView,i._footerView,i._fixedFooterView,i._rightFooterView,i._headView,i._sumView,i._footView],u=o.length-1;0<=u;u--){var a=o[u];i._tableViews[a.$_hash]=a}return i._contentPane.addChild(i._bodyView),i._contentPane.addChild(i._footerView),i._contentPane.addChild(i._headerSummaryView),i._contentPane.addChild(i._headerView),i._fixedContentPane.addChild(i._fixedBodyView),i._fixedContentPane.addChild(i._fixedFooterView),i._fixedContentPane.addChild(i._fixedHeaderSummaryView),i._fixedContentPane.addChild(i._fixedHeaderView),i._rightContentPane.addChild(i._rightBodyView),i._rightContentPane.addChild(i._rightFooterView),i._rightContentPane.addChild(i._rightHeaderSummaryView),i._rightContentPane.addChild(i._rightHeaderView),i._leftContentPane.addChild(i._rowBarContainer),i._leftContentPane.addChild(i._footView),i._leftContentPane.addChild(i._sumView),i._leftContentPane.addChild(i._headView),i._doCreateOtherElements(),i._selectionLayer=i._createSelectionLayer(),i.addElement(i._selectionLayer),i._feedbackLayer=new Yt.LayerElement(s,"feedbackLayer"),i.addElement(i._feedbackLayer),i._rowHoverView=new qn.RowHoverView(s),i.addFeedbackElement(i._rowHoverView),i._hscrollBar=new gn.ScrollBar(e,!1),i._vscrollBar=new gn.ScrollBar(e,!0),i._scrollEdge=new gn.ScrollEdge(s),i.addElement(i._hscrollBar),i.addElement(i._vscrollBar),i.addElement(i._scrollEdge),i._hscrollBar.addListener(i),i._vscrollBar.addListener(i),i._selections=new Zt.SelectionManager(i),i._selections.addListener(i),i._fixedOptions=new Qt.FixedOptions(i),i._displayOptions=new en.DisplayOptions(i),i._formatOptions=new En.FormatOptions(i),i._editOptions=new kn.EditOptions(i),i._editorOptions=new kn.EditorOptions(i),i._copyOptions=new kn.CopyOptions(i),i._pasteOptions=new kn.PasteOptions(i),i._dataDropOptions=new er.DataDropOptions(i),i._sortingOptions=new xn.SortingOptions(i),i._filteringOptions=new Jn.FilteringOptions(i),i._mobileOptions=new kn.MobileOptions(i),i._initStyles(),i._columns=new Rt.ColumnCollection(i),i._activeCellLayout=i._defaultCellLayout=new Ft.DefaultCellLayout(i),i._delegate=i._createDelegate(),i._layoutManager=i._createLayoutManager(),i._editController=i._createEditController(),i._validationManager=new Dt.ValidationManager(i),i._lookupProvider=new Un.LocalLookupSourceProvider,i._lookupProvider.addListener(i),i._clipboardManager=new zn.ClipboardManager(i),i._progressManager=new nr.ProgressManager(i._container._containerDom),i._popupMenuManager=new Wn.PopupMenuManager(i._container),i._popupMenuManager.addListener(i),i._tooltipManager=new Mn.TooltipManager(i),i._filterSelector=new Qn.FilterSelector(i._container,i._filteringOptions,i),i._toastManager=new Sn.ToastManager(i),i._currentIndex=new It.CellIndex(i),i._editorIndex=new It.CellIndex(i),i._focusedIndex=new It.CellIndex(i),t&&(i._shadowDom=new rr.ShadowDom(i,r)),i}Object.defineProperty(t,"__esModule",{value:!0});var n,r=c,i=new h.Rectangle(-1e4,-1e4,100,100),s=(n=Yt.ViewLayer,l.__extends(o,n),o.createColumn=function(e){return e?new("series"==e.type?jt.SeriesColumn:jt.DataColumn)(e):null},o.prototype._doDispose=function(){return this.clearListener(),this._container=this._container.dispose(),this._gridObjects.length=0,this._header=this._header.dispose(),this._headerSummaries=this._headerSummaries.dispose(),this._footers=this._footers.dispose(),this._rowIndicator=this._rowIndicator.dispose(),this._stateBar=this._stateBar.dispose(),this._checkBar=this._checkBar.dispose(),this._body=this._body.dispose(),this._rootElement=this._rootElement.dispose(),this._contentPane=this._contentPane.dispose(),this._rightContentPane=this._rightContentPane.dispose(),this._fixedContentPane=this._fixedContentPane.dispose(),this._leftContentPane=this._leftContentPane.dispose(),this._sideContentPane=this._sideContentPane&&this._sideContentPane.dispose(),this._topContentPane=this._topContentPane&&this._topContentPane.dispose(),this._bodyView=this._bodyView.dispose(),this._fixedBodyView=this._fixedBodyView.dispose(),this._rightBodyView=this._rightBodyView.dispose(),this._headerView=this._headerView.dispose(),this._fixedHeaderView=this._fixedHeaderView.dispose(),this._rightHeaderView=this._rightHeaderView.dispose(),this._headerSummaryView=this._headerSummaryView.dispose(),this._fixedHeaderSummaryView=this._fixedHeaderSummaryView.dispose(),this._rightHeaderSummaryView=this._rightHeaderSummaryView.dispose(),this._footerView=this._footerView.dispose(),this._fixedFooterView=this._fixedFooterView.dispose(),this._rightFooterView=this._rightFooterView.dispose(),this._rowBarContainer=this._rowBarContainer.dispose(),this._headView=this._headView.dispose(),this._sumView=this._sumView.dispose(),this._footView=this._footView.dispose(),this._selectionLayer=this._selectionLayer.dispose(),this._feedbackLayer=this._feedbackLayer.dispose(),this._hscrollBar=this._hscrollBar.dispose(),this._vscrollBar=this._vscrollBar.dispose(),this._scrollEdge=this._scrollEdge.dispose(),this._selections=this._selections.dispose(),this._fixedOptions=this._fixedOptions.dispose(),this._displayOptions=this._displayOptions.dispose(),this._formatOptions=this._formatOptions.dispose(),this._editOptions=this._editOptions.dispose(),this._editorOptions=this._editorOptions.dispose(),this._copyOptions=this._copyOptions.dispose(),this._pasteOptions=this._pasteOptions.dispose(),this._sortingOptions=this._sortingOptions.dispose(),this._filteringOptions=this._filteringOptions.dispose(),this._mobileOptions=this._mobileOptions&&this._mobileOptions.dispose(),this._columns=this._columns.dispose(),this._activeCellLayout=null,this._defaultCellLayout=this._defaultCellLayout.dispose(),this._delegate=this._delegate.dispose(),this._layoutManager=this._layoutManager.dispose(),this._editController=this._editController&&this._editController.dispose(),this._filterSelector=this._filterSelector.dispose(),this._toastManager=this._toastManager.dispose(),this._tableViews=null,this._lookupProvider=this._lookupProvider&&this._lookupProvider.dispose(),this._columnSummaryRuntime=this._columnSummaryRuntime&&this._columnSummaryRuntime.dispose(),this._popupMenuManager=this._popupMenuManager&&this._popupMenuManager.dispose(),this._tooltipManager=this._tooltipManager&&this._tooltipManager.dispose(),this._focusedIndex=this._focusedIndex.dispose(),this._scrollTipView=this._scrollTipView&&this._scrollTipView.dispose(),this._shadowDom&&(this._shadowDom=this._shadowDom.dispose()),It.CellIndex.clearTemp(),n.prototype._doDispose.call(this)},_dp(o,"debugging",{get:function(){return this._debugging},set:function(e){e!=this._debugging&&((this._debugging=e)?(this.addChild(this._debugView),this.invalidateLayout()):this.removeChild(this._debugView))}}),_dp(o,"activeTool",{get:function(){return this.container.activeTool}}),_dp(o,"scrollBarWidth",{get:function(){return this._scrollBarWidth},set:function(e){(e=Math.max(0,e))!=this._scrollBarWidth&&(this._scrollBarWidth=e,this.invalidateLayout())}}),_dp(o,"scrollBarHeight",{get:function(){return this._scrollBarHeight},set:function(e){(e=Math.max(0,e))!=this._scrollBarHeight&&(this._scrollBarHeight=e,this.invalidateLayout())}}),_dp(o,"editorLender",{get:function(){return this._editorLender},set:function(e){this._editorLender=e}}),_dp(o,"body",{get:function(){return this._body}}),_dp(o,"header",{get:function(){return this._header}}),_dp(o,"footers",{get:function(){return this._footers}}),_dp(o,"footer",{get:function(){return this._footers.get(0)}}),o.prototype.setFooters=function(e){this._footers.assignFrom(e)},_dp(o,"headerSummaries",{get:function(){return this._headerSummaries}}),_dp(o,"headerSummary",{get:function(){return this._headerSummaries.get(0)}}),o.prototype.setHeaderSummaries=function(e){this._headerSummaries.assignFrom(e)},_dp(o,"rowIndicator",{get:function(){return this._rowIndicator}}),_dp(o,"checkBar",{get:function(){return this._checkBar}}),_dp(o,"stateBar",{get:function(){return this._stateBar}}),_dp(o,"activeCellLayout",{get:function(){return this._activeCellLayout}}),_dp(o,"cellLayout",{set:function(e){this._beforeChangeLayout();var t=this.isValid(this._focusedIndex)&&this._focusedIndex.layout.firstColumn;this._activeCellLayout&&this._activeCellLayout!==this._defaultCellLayout&&this._activeCellLayout.dispose();var e=e&&(new Ft.GridCellLayout(this)).load(e),n=this._focusedIndex&&this._focusedIndex.clone();this._activeCellLayout=e||this._defaultCellLayout,this._activeCellLayout.resetColumns(this._columns),this._activeCellLayout.invalidate(),this.refreshView(),n&&t&&setTimeout(function(){n.layout=this._activeCellLayout.layoutByColumn(t),this.setFocusedIndex(n)}.bind(this),10),this._cellLayoutDirty=!0,this.clearRowHeights(),this._populateMerges()}}),o.prototype._cellLayoutChanged=function(){this._cellLayoutDirty=!0,this._shadowDom&&this._shadowDom.setColumns(!1)},_dp(o,"layoutCount",{get:function(){return this._activeCellLayout.visibleCount}}),_dp(o,"visibleLayoutCount",{get:function(){return this._activeCellLayout.visibleCount}}),_dp(o,"columnCount",{get:function(){return this._columns.count}}),_dp(o,"dataSource",{get:function(){return this._items?this._items.dataSource:null},set:function(e){this.dataSource,this._items&&(this._items.dataSource=e),this.dataSource}}),_dp(o,"itemSource",{get:function(){return this._items},set:function(e){this._items&&this._items.removeListener(this),this._items=e,this._items&&this._items.addListener(this)}}),_dp(o,"maxItemCount",{get:function(){return this.itemSource.maxItemCount},set:function(e){this.itemSource.maxItemCount=Math.max(0,e)}}),_dp(o,"itemCount",{get:function(){return this._items?this._items.itemCount:0}}),_dp(o,"rowCount",{get:function(){return this._items?this._items.rowCount:0}}),_dp(o,"visibleRowCount",{get:function(){return this._items?this._items.rowCount:0}}),_dp(o,"dataCount",{get:function(){var e=this.dataSource;return e?e.rowCount:0}}),_dp(o,"columnSummaryRuntime",{get:function(){return this._columnSummaryRuntime}}),_dp(o,"columnValidationRuntime",{get:function(){return this._columnValidationRuntime}}),_dp(o,"rowValidationRuntime",{get:function(){return this._rowValidationRuntime}}),_dp(o,"focusedIndex",{get:function(){return this._focusedIndex}}),_dp(o,"focusedLayout",{get:function(){return this._focusedIndex&&this._focusedIndex.layout}}),_dp(o,"focusedColumn",{get:function(){return this._focusedIndex&&this._focusedIndex.layout&&this._focusedIndex.layout.firstColumn}}),_dp(o,"focusedRow",{get:function(){return this._focusedIndex?this._focusedIndex.itemIndex:-1}}),_dp(o,"focusedItem",{get:function(){return this._focusedIndex&&this._focusedIndex.item}}),_dp(o,"rowBarContainer",{get:function(){return this._rowBarContainer}}),_dp(o,"topContentPane",{get:function(){return this._topContentPane}}),_dp(o,"sideContentPane",{get:function(){return this._sideContentPane}}),_dp(o,"leftContentPane",{get:function(){return this._leftContentPane}}),_dp(o,"contentPane",{get:function(){return this._contentPane}}),_dp(o,"fixedContentPane",{get:function(){return this._fixedContentPane}}),_dp(o,"rightContentPane",{get:function(){return this._rightContentPane}}),_dp(o,"bodyView",{get:function(){return this._bodyView}}),_dp(o,"fixedBodyView",{get:function(){return this._fixedBodyView}}),_dp(o,"rightBodyView",{get:function(){return this._rightBodyView}}),_dp(o,"headerView",{get:function(){return this._headerView}}),_dp(o,"fixedHeaderView",{get:function(){return this._fixedHeaderView}}),_dp(o,"rightHeaderView",{get:function(){return this._rightHeaderView}}),_dp(o,"headerSummaryView",{get:function(){return this._headerSummaryView}}),_dp(o,"fixedHeaderSummaryView",{get:function(){return this._fixedHeaderSummaryView}}),_dp(o,"rightHeaderSummaryView",{get:function(){return this._rightHeaderSummaryView}}),_dp(o,"footerView",{get:function(){return this._footerView}}),_dp(o,"fixedFooterView",{get:function(){return this._fixedFooterView}}),_dp(o,"rightFooterView",{get:function(){return this._rightFooterView}}),_dp(o,"headView",{get:function(){return this._headView}}),_dp(o,"sumView",{get:function(){return this._sumView}}),_dp(o,"footView",{get:function(){return this._footView}}),_dp(o,"fixedOptions",{get:function(){return this._fixedOptions}}),_dp(o,"displayOptions",{get:function(){return this._displayOptions}}),_dp(o,"formatOptions",{get:function(){return this._formatOptions}}),_dp(o,"editOptions",{get:function(){return this._editOptions}}),_dp(o,"editorOptions",{get:function(){return this._editorOptions}}),_dp(o,"copyOptions",{get:function(){return this._copyOptions}}),_dp(o,"pasteOptions",{get:function(){return this._pasteOptions}}),_dp(o,"dataDropOptions",{get:function(){return this._dataDropOptions}}),_dp(o,"sortingOptions",{get:function(){return this._sortingOptions}}),_dp(o,"filteringOptions",{get:function(){return this._filteringOptions}}),_dp(o,"mobileOptions",{get:function(){return this._mobileOptions}}),_dp(o,"delegate",{get:function(){return this._delegate}}),_dp(o,"heightMeasurer",{get:function(){return this.container.heightMeasurer}}),_dp(o,"layoutManager",{get:function(){return this._layoutManager}}),_dp(o,"selections",{get:function(){return this._selections}}),_dp(o,"selectionLayer",{get:function(){return this._selectionLayer}}),_dp(o,"editController",{get:function(){return this._editController}}),_dp(o,"validations",{get:function(){return this._validations},set:function(e){this._validations.assignFrom(e)}}),_dp(o,"validationManager",{get:function(){return this._validationManager}}),_dp(o,"popupMenuManager",{get:function(){return this._popupMenuManager}}),_dp(o,"tooltipManager",{get:function(){return this._tooltipManager}}),_dp(o,"toastManager",{get:function(){return this._toastManager}}),_dp(o,"topIndex",{get:function(){return this._topIndex},set:function(e){(e=Math.max(0,Math.min(e,this.itemCount-this.layoutManager.fixedItemCount-1,this._vscrollBar?this._vscrollBar.maxPosition:0)))!=this._topIndex&&(this._topIndex=e,this.refreshView(),p.Utils.isMobile()&&this.isEditing()&&!this.isItemEditing()?this.closePopups(!1):this.closePopups())}}),_dp(o,"topItem",{get:function(){return this._topIndex+this.layoutManager.fixedItemCount}}),_dp(o,"leftPos",{get:function(){return this._leftPos},set:function(e){(e=Math.max(0,Math.min(e,this._hscrollBar?this._hscrollBar._maxPosition:0)))!=this._leftPos&&(this._leftPos=e,this._displayOptions.refreshMode==c.RefreshMode.VISIBLE_ONLY?this.refreshView():(this._horzScrolled=!0,this.invalidate()),this.closePopups()),this._displayOptions.refreshMode!=c.RefreshMode.VISIBLE_ONLY&&this._debugging&&this._debugView.layout()}}),_dp(o,"leftCell",{get:function(){return this._layoutManager.getCellIndex(this.leftPos)},set:function(e){this.leftPos=this._layoutManager.getCellPoint(e)}}),_dp(o,"leftLayout",{get:function(){return this._layoutManager.firstLayout},set:function(e){var t=this._layoutManager;e=Math.max(t.fixedLayoutCount,Math.min(e,t.layoutCount-1)),this.leftPos=t.getLayoutBounds(e).x}}),_dp(o,"undoable",{get:function(){return!1},set:function(e){}}),_dp(o,"undoing",{get:function(){return!1}}),_dp(o,"redoing",{get:function(){return!1}}),_dp(o,"filtering",{get:function(){return!1}}),_dp(o,"lookupProvider",{get:function(){return this._lookupProvider}}),_dp(o,"canHovering",{get:function(){return!this.isEditing()}}),_dp(o,"hoveredCell",{get:function(){return this._hoveredCell}}),_dp(o,"empty",{get:function(){return 0==this.itemCount||0==this.visibleLayoutCount}}),_dp(o,"sorted",{get:function(){return this.itemSource.sorted}}),_dp(o,"spanned",{get:function(){return this._bodyView.visible&&this._bodyView.spanned||this._fixedBodyView.visible&&this._fixedBodyView.spanned||this._rightBodyView.visible&&this._rightBodyView.spanned}}),o.prototype.addFeedbackElement=function(e){if(e&&!this._feedbackLayer.contains(e))return this._feedbackLayer.addChild(e),!0},o.prototype.removeFeedbackElement=function(e){return e=this._feedbackLayer.indexOf(e),0<=e&&(this._feedbackLayer.removeChildAt(e),!0)},o.prototype.setEventFrom=function(e){this._eventFrom=e},o.prototype.getVisibleLayout=function(e){return this._activeCellLayout.getVisible(e)},o.prototype.getColumn=function(e){return this._columns.getColumn(e)},o.prototype.setColumns=function(e){this._columns.setColumns(e),this._columnMap={};for(var t=this._columns.count-1;0<=t;t--){var n=this._columns.getColumn(t);this._columnMap[n.$_hash]=n}this._columnsReset(),this.dataSource&&this.applyFilters()},o.prototype._checkEditing=function(){if(this.itemSource instanceof mt.EditableItemProvider&&this.itemSource.isEditing())throw"Item is editing"},o.prototype.addColumn=function(e,t){return this._checkEditing(),t=this._columns.add(e,t),t&&(this._columnMap[t.$_hash]=t,this._columnsReset(),this.dataSource&&this.applyFilters()),t},o.prototype.removeColumn=function(e){return!!(e="string"==typeof e?this.columnByName(e):e)&&(this._checkEditing(),!!this._columns.remove(e)&&(delete this._columnMap[e.$_hash],this._columnsReset(),this.dataSource&&this.applyFilters(),!0))},o.prototype.restoreColumns=function(e){this._columns.restoreColumns(),this._columnsReset()},o.prototype.linearizeColumns=function(e){var t=this._activeCellLayout.collectColumns(!0,!0,!0);if(e=p.Utils.makeArray(e),t&&0<t.length){if(e&&0<e.length)for(var n=0;n<e.length;n++)!function(n){t.sort(function(t,r){return t=t[e[n]],r=r[e[n]],t<r?1:r<t?-1:0})}(n);var r=[];t.forEach(function(e){r.push(e.name)}),this.cellLayout=r}},o.prototype.registerColumnLayouts=function(e){this._columnLayouts.load(e)},o.prototype.findColumnLayout=function(e){return this._columnLayouts.find(e)},o.prototype.invalidateColumn=function(e){this._columnLock<=0&&this._resetColumnIndices(e),this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},o.prototype.invalidateColumns=function(){this._columnLock,this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},o.prototype.beginUpdate=function(){this._updateLock=!0},o.prototype.endUpdate=function(e){(e||this._updateLock)&&(this._updateLock=!1,this.refreshView())},o.prototype.invalidate=function(){this._container&&this._container.invalidate(!1)},o.prototype.invalidateLayout=function(){this._updateLock||this._loading||(n.prototype.invalidateLayout.call(this),this._columnsDirty=!0)},o.prototype.invalidateCellLayouts=function(){this._updateLock||(this.clearRowHeights(),n.prototype.invalidateLayout.call(this),this._columnsDirty=!0)},o.prototype.refreshView=function(e){this._loading||(e?((e=this._container)._layoutNeeded=!0,e._render(Date.now())):this.invalidateLayout(),this.topIndex=this.topIndex,this.leftPos=this.leftPos)},o.prototype.resetGrid=function(){this._resetting=!0,this.topIndex=0,this.leftPos=0,this.refreshView()},o.prototype.getFirstCell=function(){if(0<this.itemCount){for(var e=0,t=0,n=this.itemCount;t<n;t++)if(this.getItem(t)instanceof dt.GridRow){e=t;break}return new It.CellIndex(this,0<=e?e:0,this.getFirstColumn())}return null},o.prototype.$_setEditFocused=function(e,t){var n;e!=this.$_editFocused&&((this.$_editFocused=e)&&this.$_showFocusCell&&(n=this.focusedIndex)&&this.isValid(n),this.$_showFocusCell=!1),e&&"focusin"==t.type&&p.Utils.isAncestorOf(this._container._container,t.target)&&yn.VisualContainer.setActiveGrid(this.container.$_hash)},o.prototype.getItem=function(e){return this._items.getItem(e)},o.prototype.getItemIndexOfRow=function(e){return this._items.getIndexOfRow(e,!1)},o.prototype.getItemOfRow=function(e,t){return this._items.getItemOfRow(e,t)},o.prototype.getItemIndicesOfRows=function(e){return this._items.getIndicesOfRows(e,!1)},o.prototype.getRowOfItem=function(e){return e=this.getItem(e),e?e.dataRow:-1},o.prototype.getItemOfModel=function(e){return null},o.prototype.getRowsOfItems=function(e,t){void 0===t&&(t=!1);for(var n=[],r=0,i=e;r<i.length;r++){var s=i[r],s=this.getItem(s),s=s?s.dataRow:-1;(t||0<=s)&&n.push(s)}return n},o.prototype.getIndicatorIndex=function(e){return e.index},o.prototype.getAllItems=function(){return this._items.getAllItems()},o.prototype.getImage=function(e){return null},o.prototype.getIndex=function(e,t){return new It.CellIndex(this,e=void 0===e?-1:e,t=void 0===t?null:t)},o.prototype.getDataCellIndex=function(e,t){var n=e.parentElement,r=this._tableViews[n.$_view],n=n.$_row,e=r.layoutByCell(e);return null!=t?t.set(n,e):It.CellIndex.temp(this,n,e)},_dp(o,"handler",{get:function(){return this.$_handler}}),o.prototype.getDataColumns=function(e){return this._activeCellLayout.getDataColumns(e=void 0===e?!0:e)},o.prototype.optionsChanged=function(e){this.refreshView()},o.prototype.scrollRow=function(e){var t=this.topIndex;this.topIndex=t+e,e=this.topIndex-t},o.prototype.selectColumnFilters=function(e){if(this.isItemEditing(null)){if(!this.filteringOptions.commitBeforeFiltering)return;try{this.commit(!1)}catch(e){var t=this.focusedItem;if(t&&e instanceof Dt.ValidationError)return void ((e=this._fireValidationFail(t.index,e.column,e))&&alert(this.editOptions.showOnlyValidationMessage&&e.userMessage?e.userMessage:e.toString()));throw e}}this._fireFiltering()&&(this.hideEditor(!1),this._filterSelector.show(e.layout.firstColumn,e.cell,this.dataSource))},o.prototype.closeFilterSelector=function(){this._filterSelector.hide()},o.prototype.closePopups=function(e){void 0===e&&(e=!0),this.filtering||this._filterSelector.hide(),this._popupMenuManager.close(),this._tooltipManager.close(),e&&this._editController.closeList(!1)},o.prototype.layoutByDataCell=function(e){var t=e.parentElement;return this._tableViews[t.$_view].layoutByCell(e)},o.prototype.columnByHash=function(e){return this._columnMap[e]},o.prototype.columnByDataCell=function(e){return this._bodyView.columnByCell(e)||this._fixedBodyView.columnByCell(e)||this._rightBodyView.columnByCell(e)},o.prototype.columnByName=function(e){return this._columns.columnByName(e)},o.prototype.columnByField=function(e){return"string"==typeof e&&(e=this.dataSource.getFieldIndex(e)),this._columns.columnByField(e)},o.prototype.getHorzColumns=function(e,t){return this._activeCellLayout.getHorzColumns(e,t)},o.prototype.getGroupLevel=function(e){return-1},o.prototype.isGroupedColumn=function(e){return!1},o.prototype.layoutByColumn=function(e){return(e=e instanceof jt.GridColumn?e:this.columnByName(e))?this._activeCellLayout.layoutByColumn(e):null},o.prototype.layoutByName=function(e){return this._activeCellLayout.layoutByName(e)},o.prototype.setFocus=function(e){function t(e){this.$_showFocusCell=!0;var t=this.focusedIndex.clone();t&&!this.isValid(t)&&(t.set(Math.max(this.topItem,0),this.getFirstColumn(),this),this.setFocusedIndex(t,!0,!0)),p.Utils.isMobile()?this.container.setFocus():this._editController.setFocus(!0,e),yn.VisualContainer.getActiveGrid()!==this&&yn.VisualContainer.setActiveGrid(this.container.$_hash)}0<this.activeCellLayout.visibleCount?t.call(this,e):(this._setFocusTimer&&clearTimeout(this._setFocusTimer),this._setFocusTimer=setTimeout(function(){this._setFocusTimer=null,t.call(this,e)}.bind(this),10))},o.prototype.getFirstLayout=function(){return this._activeCellLayout.first},o.prototype.getFirstColumn=function(){return this._activeCellLayout.firstColumn},o.prototype.collectColumns=function(e,t,n){return this._activeCellLayout.collectColumns(e,t,n)},o.prototype.collectColumnNames=function(e,t){return this._activeCellLayout.collectColumnNames(e,t)},o.prototype.collectGroupNames=function(){return this._activeCellLayout.collectColumnNames(!1,!1,!0)},o.prototype.getChildColumnNames=function(e){return this._activeCellLayout.collectColumnNames(!1,!1,!1,e)},o.prototype.collectDataColumns=function(e,t){return this._activeCellLayout.collectDataColumns(e,t)},o.prototype.isValid=function(e){return e&&e.grid===this&&0<=e.itemIndex&&e.itemIndex<this.itemCount&&e.layout&&e.layout.grid===this},o.prototype.getSelection=function(){return 0<this._selections.count?this._selections.getItem(0):null},o.prototype.clearSelection=function(){var e=this.focusedIndex;this._selections.clear(),this.isValid(e)&&0<this.itemCount&&0<this.visibleLayoutCount&&this._selections.add(e,e,this._displayOptions.selectionStyle)},o.prototype.deleteSelection=function(e){this.$_deleteSelection(null,e=void 0===e?!1:e)},o.prototype.$_deleteSelection=function(e,t){function n(e,t){try{if(t&&0<t.length){for(var n=[],r=0,i=t.length;r<i;r++){var s=e.getItem(t[r]);s&&0<=s.dataRow&&n.push(s.dataRow)}if(0<n.length&&!e._fireRowsDeleting(n))return!1}}catch(e){return alert(e),!1}return!0}function r(e,r){return r&&((t||!e.editOptions.confirmWhenDelete||confirm(e.editOptions.deleteRowsMessage)&&(i=e,s=r.dataRow,(o=[]).push(s),n(i,o)))&&(e.cancel(),dt.ItemState_isInserting(r.itemState)||e.itemSource.remove(r)),1);var i,s,o}function i(e,t){for(var n=null,r=t.length;r--;){var i=e.getItem(t[r]),s=i.itemState;if(dt.ItemState_isEditing(s)){n=i,dt.ItemState_isInserting(s)&&t.splice(r,1);break}}var o=null;0<t.length&&(o=e.itemSource.getRemovableRows(t)),n&&e.cancel(),o&&e.itemSource.removeRows(o)}void 0===t&&(t=!1);var s=this.editOptions,o=this.selections,u=this.itemSource;if((t||s.deletable)&&u instanceof mt.EditableItemProvider)if(!this.isItemEditing(null)||s.deletableWhenEdit){if(this.commitEditor(!0),r(this,e))return!0;if(!function(e,t){if(0==t.count||1==t.count&&t.getItem(0).single){var n,i=-1;return 0<=(i=0==t.count?e.focusedIndex.itemIndex:t.getItem(0).getBounds().r1)&&e.canDelete(n=e.getItem(i))&&r(e,n),1}}(this,o)){for(var a=o.count,f=[],l=0;l<a;l++){var c=o.getItem(l);if(c.style==Zt.SelectionStyle.ROWS||c.style==Zt.SelectionStyle.BLOCK)for(var h=c.getBounds(),c=Math.min(h.r1,h.r2),p=Math.max(h.r1,h.r2),d=c;d<=p;d++){var v=this.getItem(d);(0<=v.dataRow||v.editable)&&f.push(d)}}f.sort(function(e,t){return t-t});for(var m=-1,l=f.length;l--;)f[l]==m?f.splice(l,1):m=f[l];0<f.length&&this.canDelete(this.getItem(f[0]))&&(t||!s.confirmWhenDelete?n(this,f)&&(i(this,f),this.clearSelection()):confirm(s.deleteRowsMessage)&&n(this,f)&&(i(this,f),this.clearSelection()))}}else alert(window.RG_CONST&&window.RG_CONST.COMMITEDITING?window.RG_CONST.COMMITEDITING:"\uba3c\uc800 \ud3b8\uc9d1\uc744 \uc644\ub8cc \ud558\uc2ed\uc2dc\uc624.")},o.prototype.revertSelection=function(e){void 0===e&&(e=!1);var t=this.editOptions,n=this.selections,r=this.itemSource;if((e||t.revertable)&&r instanceof mt.EditableItemProvider&&(this.commitEditor(!0),!function(e,t){if(0==t.count||1==t.count&&t.getItem(0).single){var n=-1;if(0<=(n=0==t.count?e.focusedIndex.itemIndex:t.getItem(0).getBounds().r1))return e.itemSource.revert(n),1}}(this,n))){for(var i=n.count,s=[],o=0;o<i;o++){var u=n.getItem(o);if(u.style==Zt.SelectionStyle.ROWS||u.style==Zt.SelectionStyle.BLOCK)for(var a=u.getBounds(),u=Math.min(a.r1,a.r2),f=Math.max(a.r1,a.r2),l=u;l<=f;l++){var c=this.getItem(l);(0<=c.dataRow||c.editable)&&s.push(l)}}s.sort(function(e,t){return t-t});for(var h=-1,o=s.length;o--;)s[o]==h?s.splice(o,1):h=s[o];0<s.length&&r.revertAll(s)}},o.prototype.eraseSelection=function(){var e=this.editOptions,t=this.selections,n=this.itemSource;if(e.readOnly||!e.erasable||!e.updatable)return!1;if(!(n instanceof mt.EditableItemProvider))return!1;if(this.isItemEditing())return!1;if(!!function(e,t){if(0==t.count||1==t.count&&t.getItem(0).single)return t=e.focusedIndex,e.setCellValue(t,void 0),1}(this,t))return!0;var r=t.count;if(r<1)return!1;for(var i=[],s=0;s<r;s++){var o=t.getItem(s);o.style!=Zt.SelectionStyle.ROWS&&o.style!=Zt.SelectionStyle.BLOCK||(i=i.concat(o.getItems()))}if(0<i.length){for(s=0;s<r;s++)t.getItem(s).setValues(void 0);return!0}},o.prototype.getSelectedItems=function(e){void 0===e&&(e=!1);var t=this._selections.getItem(0);return t&&t.getItems(e)},o.prototype.getSelectedItemIndices=function(e){void 0===e&&(e=!1);var t=this._selections.getItem(0);return t&&t.getItemIndices(e)},o.prototype.getSelectedRows=function(){var e=this._selections.getItem(0);return e&&e.getRows()},o.prototype.setFocusedIndex=function(e,t,n){if(void 0===t&&(t=!0),void 0===n&&(n=!1),!this._focusing&&!this.disposing){this._focusing=!0;try{return this.$_doSetFocusedIndex(e,t,n)}finally{this._focusing=!1}}},o.prototype.setFocusedItem=function(e){e instanceof dt.GridItem&&(e=e.index),this.setFocusedIndex(this.getIndex(e))},o.prototype.resetFocusedIndex=function(){this.setFocusedIndex(this._focusedIndex)},o.prototype.clearFocusedIndex=function(e){if(void 0===e&&(e=!1),!this._focusing&&!this.disposing){this._focusing=!0;try{var t=void 0;e&&this.focusedRow>=this.itemCount&&((t=this.focusedIndex.clone()).itemIndex=Math.max(-1,this.itemCount-1)),this.$_doSetFocusedIndex(t,!1,!1,!1)}finally{this._focusing=!1}}},o.prototype.getTableCell=function(e){if(!e)return null;for(var t=e,n=p.getWin(t);t&&!(t instanceof n.HTMLTableCellElement);)t=t.parentElement;if(t instanceof n.HTMLTableCellElement&&t.parentElement){if(t.parentElement[c.T_VIEW])return t;for(t=t.parentElement;t;){if(t instanceof n.HTMLTableCellElement&&t.parentElement[c.T_VIEW])return t;t=t.parentElement}}return null},o.prototype.getTableView=function(e){return this._tableViews[e.parentElement[c.T_VIEW]]},o.prototype.getBodyViewAt=function(e){return this._layoutManager.getBodyView(e)},o.prototype.getBodyView=function(e){return this.getTableView(e)},o.prototype.getRowView=function(e,t){return e.getRowView(t)},o.prototype.getHeaderView=function(e){return this.getTableView(e)},o.prototype.getFooterView=function(e){return this.getTableView(e)},o.prototype.getSummaryView=function(e){return this.getTableView(e)},o.prototype.getCellType=function(e){if(e){var t=e.parentElement;return-99===t[c.T_ROW]?"fixedbar":(t=this._tableViews[t[c.T_VIEW]],t instanceof fn.GridBodyElement?(e=t.bodyCellByCell(e),e?e.item instanceof dt.GroupFooter?"groupFooter":"data":void 0):t instanceof In.RowBarContainer?t.getCellType(e):t instanceof ln.HeaderElement?"header":t instanceof pn.FooterElement?"footer":t instanceof Vn.HeaderSummaryElement?"summary":t instanceof bn.GridHeadElement?"head":t instanceof wn.GridFootElement?"foot":t instanceof $n.GridSumElement?"sum":this._getCellTypeOf(t))}},o.prototype._getCellTypeOf=function(e){},o.prototype.getBodyCellAt=function(e,t){var n=this._layoutManager,e=this._bodyView.visible&&this._bodyView.getCellAt(n,e)||this._fixedBodyView.visible&&this._fixedBodyView.getCellAt(n,e)||this._rightBodyView.visible&&this._rightBodyView.getCellAt(n,e);return e&&t&&e.merged&&e.head?e.head:e},o.prototype.getBodyCellbyCell=function(e){return this.getBodyCellAt(this.cellToIndex(e),!1)},o.prototype.cellToIndex=function(e){var t,n=It.CellIndex.temp(this,-1,null);return(e=this.getCellViewOf(e))instanceof p.getWin(e).HTMLTableCellElement&&(t=this.getBodyView(e))&&(n.layout=t.layoutByCell(e),n.itemIndex=e.parentElement[c.T_ROW]),n},o.prototype.cellToContainer=function(e,t){var n=(t=void 0===t?null:t)||new Gt.Point,r=this.getTableView(e);return r.getCellPoint(e,t),t=r.boundsByContainer(h.Rectangle.Temp.set(t.x,t.y,0,0)),n.set(t.x,t.y),n},o.prototype.pointToIndex=function(e,t,n,r){var i=It.CellIndex.temp(this,-1,null);return r?this._layoutManager.mouseToIndex(this.getCellViewOf(e),t,n,i):this._layoutManager.mouseToIndexEx(this.getCellViewOf(e),t,n,i),i},o.prototype.getEditCellBounds=function(e,t){if(this._editorLender)return this._editorLender.getEditBounds(e,t);var n=this.layoutManager,r=n.getBodyView(t);return r.getCellAt(n,t)?(e=r.getCellRectAt(n,t,!1),e=r.boundsByContainer(e),!t.colFixed&&e.width>n.nonFixedBounds.width&&(e.width=n.nonFixedBounds.width),e):i.clone()},o.prototype.getEditBounds=function(e,t){if(this._editorLender)return this._editorLender.getEditBounds(e,t);var n=t.item;if(!n)return null;var r=this.layoutManager,s=r.fixedItemCount;return 0<s&&n.index>=s&&n.index-s<r.topIndex?i.clone():(n=r.getBodyView(t),(s=n.getCellAt(r,t))?(s=s.merged?s.head:s,t=n.getCellRectAt(r,t,!1),(t=n.boundsByContainer(t)).width-=(e.native?0:s.editWidth)+s.buttonWidth+s.errorWidth,t):i.clone())},o.prototype.getCellViewOf=function(e){for(var t=p.getWin(e);e;){if(e instanceof t.HTMLTableCellElement)return e;e=e.parentElement}return null},o.prototype.getFocusedCellView=function(e){var t=e.item;if(!t)return null;var n=this.layoutManager,r=n.fixedItemCount;if(0<r&&t.index>=r&&t.index-r<n.topIndex)return null;var i=t.merged,s=e.colFixed,r=e.rightFixed;return t.isData||i?(r?this._rightBodyView:s?this._fixedBodyView:this._bodyView).getCellView(n,e):null},o.prototype.isFocusedCell=function(e){return It.CellIndex.areEquals(e,this._focusedIndex)},o.prototype.isFocusedRow=function(e){return this._focusedIndex.itemIndex==e},o.prototype.isFocusedColumn=function(e){return this._focusedIndex.column===e},o.prototype.pasteFromClipboard=function(e,t){var n=this.focusedIndex.clone();if(n.normalize(this),this.isValid(n)&&n.dataColumn&&this.pasteOptions.enabled&&this._firePaste(n,t))try{this._pasteOptions.singleMode?this._clipboardManager.pasteCellFromClipboard(n,e):(this._clipboardManager.pasteFromClipboard(n,e),n.item&&dt.ItemState_isEditing(n.item.itemState)&&this.refreshView()),this.requestPrepareEditor(),this._firePasted()}catch(e){throw e instanceof Dt.ValidationError&&(e=this._fireValidationFail(this._clipboardManager.appendingIndex.itemIndex,e.column,e))&&alert(this._editOptions.showOnlyValidationMessage&&e.userMessage?e.userMessage:e.toString()),e}},o.prototype.copyToClipboard=function(e,t,n){var r,i=!1,s=this.focusedIndex;return(n=void 0===n?!1:n)||this.copyOptions.enabled?(n||(r=this.selections,r=(i=this.copyOptions.singleMode||0==r.count||r.single)?new Zt.BlockSelection(r,Zt.SelectionStyle.BLOCK,s,s):r.getItem(0),n=this._fireCopy(r,e)),n?(t=t||r.getBounds(),i?this._clipboardManager.copyCellToClipboard(s):this._clipboardManager.copyToClipboard(t)):null):this._clipboardManager.copyEmtpyToClipboard()},o.prototype.toClipboard=function(e,t){void 0===t&&(t=!0);var n=function(e){var t;return"string"==typeof e?t=this.columnByName(e):e instanceof jt.GridColumn&&(t=e),t&&t.layout}.bind(this);if(!this.empty){if(!(e&&e instanceof It.CellRange)){var r=void 0,i=void 0,i=e?(r=n(e.startColumn),n(e.endColumn)):(r=this._activeCellLayout.getVisible(0),this._activeCellLayout.getVisible(this._activeCellLayout.visibleCount-1));if(!r||!i)return;n=null==(e=e||{}).startItem?0:Math.max(0,e.startItem),e=null==e.endItem?this.itemCount-1:Math.min(e.endItem,this.itemCount-1),i=It.CellRange.createRange(n,r,e,i)}var s,o,i=null==(i=this.copyToClipboard(null,i,!0))?"":i;if(!t)return i;window.clipboardData?window.clipboardData.setData("text",i):(s=this.doc,o=s.createElement("textarea"),s.body.appendChild(o),o.value=i,o.select(),s.execCommand("copy"),setTimeout(function(){s.body.removeChild(o),o=null},100))}},o.prototype.showToast=function(e,t){this._toastManager.show(e,t,null)},o.prototype.hideToast=function(e){this._toastManager.close(),e&&setTimeout(e,0)},o.prototype.isEditing=function(e){return this._editorLender?this._editController.editing&&this._editorLender.isEditing():this._editController.editing&&(!e||It.CellIndex.areEquals(e,this._editController.editIndex))},o.prototype.getEditItem=function(){return this._editorLender?this._editorLender.getEditItem(this):this.itemSource instanceof mt.EditableItemProvider&&this.itemSource.editingItem},o.prototype.isItemEditing=function(e){return(e=this._editorLender?this._editorLender.getEditItem(this):e||this.focusedIndex.item)&&this.itemSource instanceof mt.EditableItemProvider&&this.itemSource.isEditing(e)},o.prototype.isItemEdited=function(e){return(e=this._editorLender?this._editorLender.getEditItem(this):e||this.focusedIndex.item)&&this.itemSource instanceof mt.EditableItemProvider&&this.itemSource.isEdited(e)},o.prototype.getEditValue=function(e,t,n){this._doGetEditValue(t,n)},o.prototype._doGetEditValue=function(e,t){this._fireGetEditValue(e,t)},o.prototype.isCellEditing=function(){return!!this._editOptions.commitByCell&&this._items.isUpdating},o.prototype.editorCommit=function(e,t,n){return this._doCellCommit(e,t,n)},o.prototype._doCellCommit=function(e,t,n){return this._editorLender?this._editorLender.editCellCommit(e,t,n):this._fireEditCommit(e,t,n)},o.prototype.editorActivated=function(e){this._doEditorActivated(e.editIndex,!0)},o.prototype._doEditorActivated=function(e,t){var n=this.getBodyCellAt(e,!1),e=n&&this.getBodyView(n.cell);e&&e.$_buttonZIndexChanged(this,n,t)},o.prototype.setCellUpdateEventLock=function(e){this._cellUpdateEventLock=e},o.prototype.$_validateCellValue=function(e,t){e.dataColumn;try{var n=dt.ItemState_isInserting(e.item.itemState);return this._validationManager.validateCell(e,n,!1),!0}catch(t){if(!(t instanceof Dt.ValidationError))throw t;this._validationManager.addInvalidateCell(e,t)}return!1},o.prototype.$_refreshInvalidList=function(e){this.itemCount<=0||e?this.validationManager.clearInvalidateList():this.validationManager.checkRowIds()},o.prototype.validateCellCommit=function(e,t){this.editOptions.validateOnEdited&&this.$_validateCellValue(e,t)},o.prototype.validateCells=function(e,t){return this._validationManager.validateCells(e,t)},o.prototype.getInvalidCells=function(){return this._validationManager.getInvalidCells()},o.prototype.clearInvalidCells=function(){this._validationManager.clearInvalidCells()},o.prototype.getEditableAt=function(e,t){if(!this._editorLender){var n=e.dataColumn;if(!n)return!1;if(t&&null!=t.editable)return t.editable;if(e.item.isDataRow){var r=e.item;if(null!=r.editable)return r.editable}r=this.editOptions;if(r.columnEditableFirst){if(!(null!=n.editable?n:r).editable)return!1}else{if(!r.editable)return!1;if(!1===n.editable)return!1}return n=this.fixedOptions,(!e.colFixed||!!n.editable)&&(!e.rowFixed||!!n.rowEditable)}},o.prototype.getReadOnlyAt=function(e,t){if(!this._editorLender){var n=e.dataColumn;return n?(e=this._items.getItem(e.itemIndex),e?t&&null!=t.readOnly?t.readOnly:(e=e.merged&&e instanceof dt.GroupItem?e.firstDataItem:e,!this.editOptions.updatable&&!dt.ItemState_isInsertItem(e.itemState,e.rowState)||!this._items.canUpdate(e,n.dataIndex)||!!this._editOptions.readOnly||!!n.readOnly):!0):!0}},o.prototype.getWritableAt=function(e){if(!this._editorLender){var t=this.getBodyViewAt(e);if(t){var n=t.getCellAt(this._layoutManager,e),r=n.merged&&n.head||n;return n?(null==n.editable||n.editable||r.renderer2&&r.renderer2.canEdit())&&!n.readonly:(t=e.dataColumn,r=this.body.getCell(e,!1),n=r&&t.getCellStyle(r),e=void 0,r=void 0,n&&"string"!=typeof n&&(e=(null!==n.readOnly?n:t).readOnly,r=null!==n.editable?n.editable:t.isWritable()),r&&!e)}}},o.prototype.canEditAt=function(e){var t=this.getBodyViewAt(e);if(t)return t=t.getCellAt(this._layoutManager,e),t&&void 0!==t.editable?t.editable:this.getEditableAt(e,null)},o.prototype.canWriteAt=function(e){var t=this.getBodyViewAt(e);if(t)return t=t.getCellAt(this._layoutManager,e),t&&void 0!==t.readonly?!t.readonly:!this.getReadOnlyAt(e,null)},o.prototype.canUpdate=function(e,t){return this.editOptions.canUpdate(e.rowState===d.RowState.CREATED)&&(this._editorLender||0<this.visibleLayoutCount)&&this.itemSource&&this.itemSource.canUpdate(e,t)},o.prototype.canAppend=function(){var e=this.itemSource,t=!this.isEditing()&&this.editOptions.canAppend()&&0<this.visibleLayoutCount&&e&&e.canAppend();if(t)try{if(!this._fireRowInserting(e.itemCount,-1))return!1}catch(e){return alert(e.message||e),!1}return t},o.prototype.canInsert=function(e,t,n){var r=this.itemSource,r=!this.isEditing()&&this._doCanInsert(e,t,n)&&this.editOptions.canInsert()&&0<this.visibleLayoutCount&&r&&r.canInsert(e);if(r)try{if(!this._fireRowInserting(e.index+(t?1:0),-1))return!1}catch(e){return alert(e.message||e),!1}return r},o.prototype._doCanInsert=function(e,t,n){return!0},o.prototype.canDelete=function(e){var t=this.itemSource;return this.editOptions.canDelete()&&0<this.visibleLayoutCount&&t&&(this.isItemEditing(e)||t.canDelete(e))},o.prototype.canCommit=function(e){return this.isItemEditing(e)&&(this.isItemEdited()||this.editOptions.commitWhenNoEdit)},o.prototype.canCancel=function(e){return this.isItemEditing(e)},o.prototype.edit=function(e){return e=e||this.focusedIndex,!!(this.isValid(e)&&this.itemSource instanceof mt.EditableItemProvider)&&(!e.dataColumn||!!this.canUpdate(e.item,e.dataField))&&(dt.ItemState_isEditing(e.item.itemState)||this.validationManager.cloneError(e.dataId,-1),this.itemSource.edit(e.item))},o.prototype.insertAt=function(e,t){return this.insert(this.getItem(e),t)},o.prototype.insert=function(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),!(e=(e=void 0===e?null:e)||(this.focusedIndex?this.focusedIndex.item:null)))return!1;var r=this.itemSource;if(r instanceof mt.EditableItemProvider&&this.canInsert(e,t,n)){var i=this.$_getInsertDefaults(null);return this._cancelDummy(),r.insert(e,i,t,n)}return!1},o.prototype.append=function(){var e=this.itemSource;if(e instanceof mt.EditableItemProvider&&e.dataSource&&this.canAppend()){var t=this.$_getInsertDefaults(null);return this._cancelDummy(),e.append(t)}return!1},o.prototype._appendDummy=function(){var e=this._editOptions;e.displayEmptyEditRow&&e.appendable&&this._items.appendDummy()},o.prototype._cancelDummy=function(){this._items.cancelDummy()},o.prototype.setValueAt=function(e,t,n){e=this.getItem(e),e&&0<=t&&(e instanceof mt.EditItem||e instanceof _t.TreeEditItem?e.setValue(t,n):0<=(e=e.dataRow)&&this.dataSource.setValue(e,t,n))},o.prototype.setCellValue=function(e,t){this.isValid(e)&&this.setValueAt(e.itemIndex,e.dataField,t)},o.prototype.$_canShowEditor=function(e,t,n){return!!this.isValid(e)&&this._fireShowEditor(this._editorIndex.assign(e),t,n)},o.prototype.hideEditor=function(e){void 0===e&&(e=!1),this._editController.closeList(!1),this._editController.hideEditor(),e&&this.activeTool.resetFocused()},o.prototype.reprepareEditor=function(){this._editController.reprepareEditor(this.focusedIndex)},o.prototype.requestPrepareEditor=function(){this._editController.requestPrepareEditor()},o.prototype.fillEditSearchItems=function(e,t,n,r){this._editController.fillSearchItems(e,t,n,r)},o.prototype.showEditor=function(e,t,n){if(void 0===t&&(t=!1),e=e||this.focusedIndex,this._editController.showEditor(e,n=void 0===n?!1:n))return this.activeTool.resetFocused(),t&&this._editController.caretToLast(),!0},o.prototype.showEditList=function(e){if(this._editController.showList(e))return!0},o.prototype.editorButtonClicked=function(e,t){this._editController.buttonClicked(e,t),this._fireEditButtonClicked(e)},_dp(o,"canUndo",{get:function(){var e=this.dataSource;return e&&e.canUndo&&!this.isItemEditing()}}),o.prototype.undo=function(){return!!this.canUndo&&(this.dataSource.undo(),!0)},_dp(o,"canRedo",{get:function(){var e=this.dataSource;return e&&e.canRedo&&!this.isItemEditing()}}),o.prototype.redo=function(){return!!this.canRedo&&(this.dataSource.redo(),!0)},o.prototype.execute=function(e){},o.prototype.clearCommandStack=function(e){this.dataSource.clearCommandStack()},o.prototype.setLookups=function(e){e&&(this._lookupProvider||(this._lookupProvider=new Un.LocalLookupSourceProvider,this._lookupProvider.addListener(this)),this._lookupProvider.load(e))},o.prototype.addLookupSource=function(e){(this._lookupProvider||(this._lookupProvider=new Un.LocalLookupSourceProvider)).add(e)},o.prototype.removeLookupSource=function(e){this._lookupProvider&&this._lookupProvider.remove(e)},o.prototype.existsLookupData=function(e,t){if(e&&t){var n=this._lookupProvider&&this._lookupProvider.getSource(e);if(!n)throw"Invalid lookup source id: "+e;return n.exists(p.Utils.makeArray(t))}},o.prototype.fillLookupData=function(e,t){if(e&&t){var n=this._lookupProvider&&this._lookupProvider.getSource(e);if(!n)throw"Invalid lookup source id: "+e;t.rows?n.fillRows(t.rows):n.fill(t.keys,t.values)}},o.prototype.clearLookupData=function(e){if(e){var t=this._lookupProvider&&this._lookupProvider.getSource(e);if(!t)throw"Invalid lookup source id: "+e;t.clear()}},o.prototype.addLookupData=function(e,t,n){if(void 0===n&&(n=null),e&&t){t=p.Utils.makeArray(t);var r=this._lookupProvider&&this._lookupProvider.getSource(e);if(!r)throw"Invalid lookup source id: "+e;n?r.add(t,n):r.addRow(t)}},o.prototype.setOptions=function(e){},o.prototype.doContextMenu=function(e){var t,n,i=e.mouseX,s=e.mouseY,o=this.activeTool,u=o._findTableCell(),a=o.findElementAt(i,s,!1);if(u){var f,l,h=this.getTableView(u),p=this.getCellType(u),d=void 0,v=void 0;switch(p){case"head":m=qn.ClickData.getSub(p,this.headView.getCellType(u)),b=(t=this.headView.getHeadModel(u))&&t.popupMenuName;break;case"foot":m=qn.ClickData.getSub(p,this.footView.getCellType(u)),b=(t=this.footView.getFootModel(u))&&t.popupMenuName;break;case"indicator":d=this.rowBarContainer.rowOf(u),v=this.getRowOfItem(d),m=qn.ClickData.getItem(p,d,v),b=this.rowIndicator.popupMenuName;break;case"state":d=this.rowBarContainer.rowOf(u),v=this.getRowOfItem(d),m=qn.ClickData.getItem(p,d,v),b=this.stateBar.popupMenuName;break;case"check":d=this.rowBarContainer.rowOf(u),v=this.getRowOfItem(d),m=qn.ClickData.getItem(p,d,v),b=this.checkBar.popupMenuName;break;case"header":f=h.layoutByCell(u),m=qn.ClickData.getLayout(p,f),b=f.firstColumn.header.popupMenuName;break;case"data":(l=h.bodyCellByCell(u)).grouped?m=qn.ClickData.getItem("groupHeader",l.item.index,null):(l.merged&&l.item!==a._item&&a instanceof un.RowElement&&(f=It.CellIndex.temp(this,a.itemIndex,l.layout),l=h.bodyCellAt(f)),m=qn.ClickData.getCell(p,l),b=l.dataColumn.popupMenuName);break;case"groupFooter":l=h.bodyCellByCell(u);var m=qn.ClickData.getCell(p,l),g=l.item.$_footerIndex,y=l.dataColumn.groupFooters.get(g),b=y&&y.popupMenuName;break;case"footer":case"summary":y=h.tableCellByCell(u),g=y.summaryIndex,g=("footer"===p?y.layout.firstColumn.footers:y.layout.firstColumn.headerSummaries).get(g),m=qn.ClickData.getSummary(p,y.summaryIndex,y.layout),b=g&&g.popupMenuName;break;case"groupHead":case"groupFoot":var w=u[r.T_LEV];m=qn.ClickData.getGroupElt(p,w);break;case"groupBar":w=u[c.T_ROW],v=this.getRowOfItem(w),m=qn.ClickData.getItem(p,w,v)}}else a&&a===o._clickElement&&(m=o._getClickData(a));!1!==(n=this._fireContextMenuPopup(i,s,m))&&(o=this._popupMenuManager,"string"==typeof n?b=n:null!=n&&"object"==typeof n||(b=b||this._contextMenu),b&&(e.preventDefault(),(n=o.getMenu(b))&&o.showContext(n,e,i,s,m)))},o.prototype.setContextMenu=function(e){return(e=p.Utils.makeArray(e))?(this._contextMenu="gridContextMenu",this.popupMenuManager.addMenu(this._contextMenu,e,!0,this)):this._contextMenu=null,this.popupMenuManager.getMenu(this._contextMenu)},o.prototype.addPopupMenu=function(e,t,n){void 0===n&&(n=!0),t=p.Utils.makeArray(t),e&&t&&this.popupMenuManager.addMenu(e,t,n)},o.prototype.removePopupMenu=function(e){this.popupMenuManager.removeMenu(e)},o.prototype.setCursor=function(e,t){if(e){e=this.getTableCell(e);if(e){e=this.getTableView(e);if(e instanceof nn.VisualObjectElement)return void e.setCursor(t)}}this._container.setCursor(t)},o.prototype.canMoveLayout=function(e){var t=e.root.vindex,e=this.layoutManager;return!(e.mergedRowGrouped&&t<e.rowGroupLevels)&&(this.fixedOptions.movable||t>=e.fixedLayoutCount&&t<e.rightFirstLayout)},o.prototype.canMoveToLayout=function(e){return this.canMoveLayout(e)},o.prototype.getEditCellValue=function(){return this._editController.editValue},o.prototype.setEditCellValue=function(e,t,n){(this.isEditing()||t)&&this._editController.setEditValue(e,n)},o.prototype.searchItem=function(e){var t=(e=e instanceof D.SearchOptions?e:new D.SearchOptions(e)).fields,n=e.values,r=this.itemSource,i=e.startIndex,s=-1;if(t&&0<t.length&&n&&0<n.length&&r){for(var o,u,a,f=void 0,l=t.length,c=[],f=0;f<l;f++)o=parseFloat(t[f]),!isNaN(o)&&0<=o?c.push(o):0<=(u=this.dataSource.getFieldIndex(t[f]))&&c.push(u);0<c.length&&(l=r.itemCount,(s=(i=Math.max(0,i))<l?r.findItem(c,n,e,i,l-1):-1)<0&&e.wrap&&0<i&&(s=r.findItem(c,n,e,0,i-1))),0<=s&&e.select&&(a=this.getIndex(s,p.Utils.pick(this.focusedIndex.column,this.getFirstColumn())),this.setFocusedIndex(a,!0,!0))}return s},o.prototype.searchCell=function(e){var t,n,r,i,s=e instanceof D.SearchCellOptions?e:new D.SearchCellOptions(e),o=s.wrap,u=s.select,a=p.Utils.makeArray(s.fields),f=this.itemSource,l=null,c=f&&f.dataSource,h=p.Utils.makeArray(s.columns),d=[],v=s.value;if(c){if(!a&&h)for(t=0,r=h.length;t<r;t++){var m=this.columnByName(h[t]);if(m instanceof jt.DataColumn){if(m.dataIndex<0)throw new Error("invalid search Column "+h[t]);d.push(m.dataIndex)}}else if(a&&0<a.length)for(t=0,r=a.length;t<r;t++)n=parseFloat(a[t]),!isNaN(n)&&0<=n?d.push(n):d.push(c.getFieldIndex(a[t]));d&&0<d.length&&null!=v&&(0<d.length&&(r=f.itemCount,i=Math.max(0,s.startIndex),e=Math.max(0,s.startFieldIndex),(l=!(l=i<r?f.findCell(d,v,s,i,r-1,e):null)&&o&&0<i?f.findCell(d,v,s,0,i,0):l)&&(l.fieldName=c.getOrgFieldName(l.fieldIndex))),l&&u&&(u=void 0,(u=h?this.getIndex(l.itemIndex,p.Utils.pick(this.columnByName(h[l.searchFieldIndex]),this.focusedIndex.column)):this.getIndex(l.itemIndex,p.Utils.pick(this.columnByField(l.fieldIndex),this.focusedIndex.column)))&&this.setFocusedIndex(u,!0,!0)))}return l},o.prototype.isCheckable=function(e){return e=this.getItem(e),e&&e.checkable},o.prototype.isCheckableOfRow=function(e){return e=this.getItemOfRow(e,!0),e&&e.checkable},o.prototype.setCheckable=function(e,t){e=this.getItem(e),e&&e.setCheckable(t)},o.prototype.setCheckableOfRow=function(e,t){e=this.getItemOfRow(e,!0),e&&e.setCheckable(t)},o.prototype.isCheckedItem=function(e){return e=this.getItem(e),e&&e.checked},o.prototype.isCheckedRow=function(e){return e=this._items.getItemOfRow(e,!0),e&&e.checked},o.prototype.checkAll=function(e,t,n,r){var i=this._checkBar.showGroup&&!this._checkBar.merged;this._items.checkAll(e,t,n,r,i)},o.prototype.toggleCheck=function(e){e=this.getItem(e),e&&e.checkable&&this.checkItem(e.index,!e.checked,this.checkBar.exclusive,!0)},o.prototype.toggleChecks=function(e,t){var n=[];if(t&&t.isDataRow&&t.checkable){if(this.checkBar.merged){var r=e[0],i=e[e.length-1],s=r.index,o=i.index,r=this.checkBar.merges,i=r.getRoom(It.CellIndex.temp(this,s,null)),s=Math.min(s,i?i.head:s),i=r.getRoom(It.CellIndex.temp(this,o,null)),o=Math.max(o,i?i.tail:o);e=[];for(var u=s;u<=o;u++){var a=this.getItem(u);a.checkable&&a.isDataRow&&e.push(a)}}for(u=0;u<e.length;u++)e[u].checkable&&0<=e[u].dataRow&&n.push(e[u]);t=!t.checked,this.checkBar.exclusive&&this.itemSource._clearChecked(),0<n.length&&this._items.checkItems(n,t,!0)}},o.prototype.checkItem=function(e,t,n,r){e=this.getItem(e),e&&this._items.checkItem(e,t,n,r)},o.prototype.checkRow=function(e,t,n,r){var i,s=this.getItemIndexOfRow(e);(i=(i=-1<s&&(i=this.getItem(s))?i instanceof mt.EditItem?i:null:i)||this.getItemOfRow(e,!0))&&this._items.checkItem(i,t,n,r)},o.prototype.checkItems=function(e,t,n){e=this._items.getItemsByIndices(e),this._items.checkItems(e,t,n)},o.prototype.checkRows=function(e,t,n){e=this._items.getItemsByRows(e,!0),this._items.checkItems(e,t,n)},o.prototype.setAllCheck=function(e,t){var n=this.checkBar.exclusive;this._headView.allChecked=e,!t||n&&e||(n=this.checkBar,this.checkAll(e,n.visibleOnly,n.checkableOnly,!1))},_dp(o,"allChecked",{get:function(){return this._headView.allChecked}}),o.prototype.resetCheckables=function(){},o.prototype.applyCheckables=function(){},o.prototype.registerCustomRenderer=function(e,t){this._delegate.addCustomRenderer(e,t)},o.prototype.unregisterCustomRenderer=function(e){this._delegate.removeCustomRenderer(e)},o.prototype.existsCustomRenderer=function(e){return this._delegate.existsCustomRenderer(e)},o.prototype.unregisterAllCustomRenderer=function(){this._delegate.clearCustomRenderers()},o.prototype.getValueAt=function(e,t){t=this.getItem(t),e=e.firstColumn;if(e instanceof jt.DataColumn)return t&&t.getData(e.dataIndex)},o.prototype.getCellValue=function(e){if(this.isValid(e)){var t=this.getItem(e.itemIndex),e=e.dataColumn;if(t&&e)return t.getData(e.dataIndex)}},o.prototype.getDistinctItemValues=function(e,t,n){void 0===n&&(n=c.SortDirection.ASCENDING);var r=this.itemCount;t=(t=void 0===t?-1:t)<0?r:t,r=this.columnByField(e);if(!r)return null;if(0<t){for(var i=r.getField().dataType,s=[],o=[],u=0,a=this.itemCount;u<a;u++){var f=this.getItem(u);if(f instanceof dt.GridRow||f instanceof Ot.TreeItem){var l=f.getData(e);switch(i){case c.ValueType.NUMBER:null!=l&&isNaN(l)||s.indexOf(l)<0&&s.push(l);break;case c.ValueType.DATE:case c.ValueType.DATETIME:l?o.indexOf(l.getTime())<0&&(o.push(l.getTime()),s.push(l)):(o.push(l),s.push(l));break;default:s.indexOf(l)<0&&s.push(l)}}}return n!==c.SortDirection.NONE&&(s=p.Utils.included(i,c.ValueType.DATETIME,c.ValueType.DATE,c.ValueType.NUMBER)?s.sort(function(e,t){return e-t}):s.sort(),n===c.SortDirection.DESCENDING&&(s=s.reverse())),s.slice(0,t)}return null},o.prototype.getDisplayText=function(e){var t=e.dataColumn;if(t){var n=t.dataIndex;if(0<=n){var r=e.item;if(r instanceof dt.GridRow||r instanceof Ot.TreeItem){var i=r.getData(n);if(t instanceof jt.SeriesColumn)return Et.SeriesCell.getText(i);var s=new jt.ColumnStyle,o=this._body.getCellFormatters(t,null,e,s);return Et.DataCell._getDisplayText(this,r,t,i,o)}if(r instanceof dt.GroupFooter)return s=t.groupFooters.get(r.$_footerIndex),i=Yn.RowGroupFooterCell.getValue(r,t),o=this._rowGroup.getFooterCellFormatters(s,null),Yn.RowGroupFooterCell.$_displayText(r,t,i,o)}}return""},o.prototype._fitLayoutWidth=function(e){if(!e.visible)return 0;var t=this.itemSource,n=this.getIndex(this.topIndex,e.firstColumn),r="",i="",s=0,r=i=e.firstColumn.header.displayText,o=p.Utils.getTextLength(r),u=this.getBodyCellAt(n,!1),u=u&&u.renderer2&&u.renderer2._dom;!u||(u=p.getWin(u).getComputedStyle(u))&&(i=u.paddingLeft,s+=0<(a=parseInt(i.substr(0,i.indexOf("px"))))?a:0,i=u.paddingRight,s+=0<(a=parseInt(i.substr(0,i.indexOf("px"))))?a:0,a={fontSize:u.fontSize,fontFamily:u.fontFamily,fontWeight:u.fontWeight,fontStyle:u.fontStyle});for(var a,f=0,l=t.itemCount;f<l;f++)n.itemIndex=f,i=this.getDisplayText(n),p.Utils.getTextLength(i)>o&&(o=p.Utils.getTextLength(i),r=i);return 0<o&&(s+=this.container.measureText("rg-data-cell",r,a)+6,a=(t=e.getDataColumn()).editor,(e=this.delegate.getCellEditor(an.CellEditor.getEditorType(a))).hasButton(e.native,a)&&(s+=this.body.editButtonWidth*e.buttonCount),t.button!==c.CellButton.NONE&&(s+=this.body.cellButtonWidth)),s},o.prototype.fitLayoutWidth=function(e,t,n){function i(e){for(var t=e.direction===Ft.ColumnLayoutDirection.HORIZONTAL,n=0,r=0,s=e.visibles;r<s.length;r++){var o=s[r],u=0;o instanceof Ft.CellLayoutColumnItem?(u=this._fitLayoutWidth(o),1===o._defColSpan&&(o.cellWidth=u)):o instanceof Ft.CellLayoutGroupItem&&(u=i.call(this,o)),n=t?n+u:Math.max(n,u)}return n}var r=0;return e instanceof Ft.CellLayoutColumnItem?r=this._fitLayoutWidth(e):e instanceof Ft.CellLayoutGroupItem&&(r=i.call(this,e)),n&&n>this.displayOptions.minCellWidth&&(r=Math.max(r,n)),t&&t>this.displayOptions.minCellWidth&&(r=Math.min(r,t)),e.cellWidth=r},o.prototype.canMoveRow=function(e,t){return void 0===t&&(t=!0),!this.isEditing()&&!this.isItemEditing()&&(t||this._editOptions.movable)&&(!e||this.itemSource.movable)},o.prototype.canMoveRows=function(e,t){if(this.canMoveRow(t,!1)&&e){for(var n=!1,r=0;r<e.length;r++){var i=e[r];i&&i.isDataRow&&(n=!0)}return n}},o.prototype.moveRows=function(e,t){if(this.canMoveRows(e,!0))return this._doMoveRows(e,t)},o.prototype.moveSelection=function(e){var t,n,r=this.getSelectedItems(!1);r&&0<r.length&&(t=r[0].index,n=this.itemSource,(0<e&&t+e<=n.itemCount||e<0&&0<t)&&this.moveRows(r,this.getItem(t+e))&&((r=this.getSelection()).moveRow(e),this._selections.clear(),this._selections.$_addItem(r),(r=this._focusedIndex.clone()).itemIndex=t+e,this.setFocusedIndex(r,!1,!0)))},o.prototype.isSelectedItem=function(e){var t=this.getSelection();return t&&t.containsItem(e)},o.prototype.isSelectedLayout=function(e){var t=this.getSelection();return t&&t.containsLayout(e)},o.prototype.getFilteredColumns=function(){for(var e=this.columnCount,t=[],n=0;n<e;n++){var r=this.getColumn(n);r.isFiltered()&&t.push(r)}return t},o.prototype.showProgress=function(){this._progressManager.show(this._container._containerDom,null,this.displayOptions.baseZindex)},o.prototype.setProgress=function(e,t,n,r){this._progressManager.setProperties(e,t,n,r)},o.prototype.closeProgress=function(){this._progressManager.close()},o.prototype.showLoading=function(e){this._progressManager._gridDisabled=this.container.disabled,e&&(this.container.disabled=!0),this._progressManager.showLoader(this._container._containerDom,this._displayOptions.baseZindex)},o.prototype.hideLoading=function(){this._progressManager.closeLoader(),this.container.disabled=this._progressManager._gridDisabled},o.prototype.beginExportProgress=
function(e){this._progressManager.show(this._container._containerDom,e,this._displayOptions.baseZindex)},o.prototype.endExportProgress=function(){this._progressManager.close()},o.prototype.setExportProgress=function(e,t,n){this._progressManager.setProperties(0,e,t,n)},o.prototype.setEmptyMessage=function(e){this._emptyView.setMessage(e)},o.prototype.setWatchTimer=function(e){this._container.setWatchTimer(e)},o.prototype._getCssSelector=function(){return""},_dp(o,"container",{get:function(){return this._container}}),o.prototype._createDelegate=function(){return new Rn.GridDelegate(this)},o.prototype._createLayoutManager=function(){return new cn.GridLayoutManager(this)},o.prototype._createEditController=function(){return new Pn.DefaultEditController(this)},o.prototype._createSelectionLayer=function(){return p.Utils.isMobile()?new Zn.MobileSelectionLayer(this,"mobileSelectionLayer"):new Zt.SelectionLayer(this,"selectionLayer")},o.prototype._initDom=function(e){n.prototype._initDom.call(this,e),e.style.setProperty("overflow","hidden","important")},o.prototype._doActivateView=function(){this._container.activeTool=this._container.defaultTool,this._editController.prepareEditor(this._focusedIndex),this.visible=!0,this._fireViewActivated(!0)},o.prototype._dodDeactivateView=function(){this._fireViewActivated(!1)},o.prototype.setRect=function(e){var t=e.width!=this.width||e.height!=this.height;n.prototype.setRect.call(this,e),t&&(this._dirty=!0)},o.prototype._doDraw=function(e){},o.prototype.$_containerResized=function(){this._layoutManager.requestZoom(),p.Utils.isMobile()&&this.isEditing()&&!this.isItemEditing()&&setTimeout(function(){var e=this.topItem,t=this.layoutManager.fullItemCount,n=this.focusedIndex.itemIndex;e+t<n&&(this.topIndex=n-Math.round(t/2))}.bind(this),10)},o.prototype._doCreateOtherElements=function(){},o.prototype._doContentPanesCreated=function(){},o.prototype._createSidePane=function(){return null},o.prototype.isSidePaneVisible=function(){return!1},o.prototype._createBodyView=function(e){return new fn.GridBodyElement(this.doc,e)},o.prototype._createFixedBodyView=function(e){return new fn.FixedBodyElement(this.doc,e)},o.prototype._createRightBodyView=function(e){return new fn.RightBodyElement(this.doc,e)},o.prototype._initStyles=function(){},o.prototype._columnsReset=function(){this._resetColumnIndices(),this._activeCellLayout._columnsChanged(this._columns),this._columnsDirty=!0,this._shadowDom&&this._shadowDom.setColumns(!1)},o.prototype._columnVisibleChanged=function(e){this._activeCellLayout._columnChanged(e)},o.prototype._resetColumnIndices=function(e){(e=void 0===e?null:e)?e._resetIndices(this):this._columns.resetIndices(),e||this._cellLayoutDirty||this.clearSelection()},o.prototype._resetColumnSortStates=function(){this._columns.resetSortStates()},o.prototype._cleanGridObjects=function(){for(var e=0,t=this._gridObjects.length;e<t;e++)this._gridObjects[e].clean()},o.prototype._visualObjectChanged=function(e){this.invalidateLayout(),this._shadowDom&&this._shadowDom.reset()},o.prototype._addGridObject=function(e){this._gridObjects.push(e)},o.prototype.addElement=function(e){this._rootElement.addChild(e)},o.prototype.$_prepareRender=function(e){this._doPrepareRender(e)},o.prototype._doPrepareRender=function(e){if(this._horzScrolled)try{var t=this._layoutManager;t.setLeftPos(e,this._leftPos),this._leftPos=t.leftPos,this.$_updateScrollBars(t),this._layoutSelectionViews(),this._editController.resetEditor(!1),this.container.defaultTool.layoutChanged()}finally{this._horzScrolled=!1}},o.prototype.$_layout=function(e){this._doLayout(e)},o.prototype.$_afterRender=function(){this._layoutManager.needRelayout()?this.invalidateLayout():(this._topIndexChanged&&(this._topIndexChanged=!1,this._fireTopIndexChanged(this.topIndex)),this._fireDataLoadComplated())},o.prototype._fireDataLoadComplated=function(){this._dataLoad&&this.fireEvent(o.DATA_LOAD_COMPLATED),this._dataLoad=!1},o.prototype._doLayout=function(e){var t,n=this._layoutManager;this._resetting=!1;try{this.$_doLayout(n,e)}finally{this._loading=!1,this._eventFrom=null}this.$_checkFocusedLayout(),(this._emptyView.visible=this.empty&&this._displayOptions.showEmptyMessage)&&((t=n.contentBounds.clone()).topBy(n.headerBounds.bottom),this._emptyView.setBounds(0,t.y,this.width,t.height)),this._debugging&&this._debugView.layout(),this._horzScrolled=!1,this._cleanGridObjects(),this._columnsDirty&&(this._columnsDirty=!1,this._activeCellLayout.cleanColumns()),this.$_resetHovering(this.container._currentX,this.container._currentY,!0),this.$_resetFocusRender(this.container._currentX,this.container._currentY),this.$_resetRowHover(),0<n.itemCount&&(n=(t=n.topIndex)+n.itemCount,this._topIndexChanged=t!==this._prevTop,this._prevTop=t,n!=this._prevLast&&n==this.itemCount&&setTimeout(function(){this._fireScrollToBottom()}.bind(this),1),this._prevLast=n),this.$_checkCurrentRow(),this._editController.prepareEditor(this.focusedIndex),this._cellLayoutDirty=!1,this.container.defaultTool.layoutChanged()},o.prototype.$_doLayout=function(e,t){var n=t.clone(),r=this._displayOptions.vscrollBar?this._scrollBarWidth:0,i=this._displayOptions.hscrollBar?this._scrollBarHeight:0,s=this.$_fixedColCount=this._fixedOptions.colCount,t=this.$_rfixedColCount=this._fixedOptions.rightCount;this.setFocusedClass(this._focusedIndex,!1),this.setFocusedRowClass(this._focusedIndex,!1),this._activeCellLayout.$_refresh(this._columns,this._displayOptions.minCellWidth),this._activeCellLayout.$_prepareLayout(this,s,t),this._needMerge&&(this.$_populateMerges(),this._needMerge=!1),this._body._prepareUpdate(),e.measure(n,this._leftPos,this._topIndex,r,i),e.layout(n),this._leftPos=e.leftPos,this._topIndex=e.topIndex,this.$_updateScrollBars(e,n),this._layoutSelectionViews(),this._layouted=!0,!this._editController.resetEditor(!1)&&this.isValid(this._focusedIndex)&&this._editController.resetEditable(this._focusedIndex),this.container.defaultTool.layoutChanged()},o.prototype._columnCheckedChanged=function(e){this._fireColumnCheckedChanged(e)},o.prototype.$_updateScrollBars=function(e,t){var n,r;e.hscrollBar?(r=e.bodyBounds.width,n=Math.min(e.scrollWidth),this._hscrollBar.setProperties(0,r,n),this._hscrollBar.setPosition(e.leftPos),this._hscrollBar.visible=!0):this._hscrollBar&&(this._hscrollBar.setProperties(0,0,0),this._hscrollBar.setPosition(0),this._hscrollBar.visible=!1),e.vscrollBar?(n=(r=this.itemCount)-e.fixedItemCount,r=Math.min(e.fullItemCount,r-e.topIndex),this._vscrollBar.setProperties(0,n,r),this._vscrollBar.setPosition(e.topIndex),this._vscrollBar.visible=!0):this._vscrollBar&&(this._vscrollBar.setProperties(0,0,0),this._vscrollBar.setPosition(0),this._vscrollBar.visible=!1),t&&this.$_layoutScrollBars(e,t)},o.prototype.$_layoutScrollBars=function(e,t){var n=e.scrollBarWidth,r=e.scrollBarHeight,i=this._hscrollBar,s=this._vscrollBar;e.hscrollBar&&(i.setBounds(t.x,t.bottom-r,t.width-n,r),i.layoutContent()),e.vscrollBar&&(s.setBounds(t.right-n,t.y,n,t.height-r),s.layoutContent()),(this._scrollEdge.visible=e.vscrollBar&&e.hscrollBar)&&this._scrollEdge.setBounds(t.right-n,t.bottom-r,n,r)},o.prototype._columnMergeRuleChanged=function(e){this._populateMerges(),this.refreshView()},o.prototype._canMerge=function(){return!1},o.prototype._populateMerges=function(){this._needMerge=!0},o.prototype.$_populateMerges=function(){if(this._canMerge()){for(var e=this.getHorzColumns(),t=0,n=e.length;t<n;t++){var r,i=e[t],s=i&&i.layout;s&&s.canMerge()&&((r=(r=s.merges)||new Bt.ColumnMergeManager(s)).clear(),i instanceof jt.DataColumn&&i.mergeGrouped&&!(0<this.getGroupLevel(i.dataIndex))||r.initialize(Bt.GridMergeRule.INIT_COUNT))}this._checkBar.canMerge()&&((r=this._checkBar.merges||new $t.CheckBarMergeManager(this._checkBar)).clear(),r.initialize(Bt.GridMergeRule.INIT_COUNT))}},o.prototype._doRowGroupMergeModeChanged=function(){},o.prototype._addSelectionView=function(e){this._selectionLayer.addView(e)},o.prototype._clearSelectionViews=function(){this._selectionLayer.clearViews()},o.prototype._layoutSelectionViews=function(){this._layouted&&!this._resetting&&this._selectionLayer.layout()},o.prototype.$_checkCurrentRow=function(e){if(void 0===e&&(e=!1),this._focusedIndex){var t=this._focusedIndex.dataId,n=this._focusedIndex.dataRow;if(e||t!=this._currentRowId){clearTimeout(this._rowChangeTimer);var r=this.container.defaultTool,i=this._currentRow,s=this._displayOptions.rowChangeDelay,e=e||s<=0;return this._currentRowId=t,this._currentRow=n,e?(this._fireCurrentRowChanged(i,n),r.currentRowChanged(i,n)):0<s&&(this._rowChangeTimer=setTimeout(function(){this._fireCurrentRowChanged(i,n),r.currentRowChanged(i,n)}.bind(this),s)),!0}}return!1},o.prototype.$_doSetFocusedIndex=function(e,t,n,r){if(void 0===r&&(r=!0),!e){if(r)return!1;e=this.getIndex(-1,null)}var i,s;if(!this.isValid(e)&&r&&(e=e.clone()).normalize(this),!this.isValid(e)){var o=this.dataSource;if(!o||0==o.rowCount||0==this.itemCount)return this._focusedIndex.itemIndex=-1,this._focusedIndex.layout=null,this.clearSelection(),!1}if(It.CellIndex.areEquals(e,this._focusedIndex))return!0;var u=this._editOptions,a=this._focusedIndex.clone(),f=this.itemSource,r=this.container.defaultTool,o=this.layoutManager;if(!this._editController.focusedIndexChanging()||!this._fireCurrentChanging(a,e)){var l=this.activeTool.dragTracker;return l instanceof On.SelectTracker&&(l.dragging?l.cancel():this.activeTool.dragTracker=null),!1}l=a.item;if(!this.isItemEditing(l)||this.isItemEdited(l)||e.itemIndex==a.itemIndex||l.itemState!==dt.ItemState.UPDATING||u.commitWhenNoEdit)if(f&&e.itemIndex!=a.itemIndex)try{if(l)switch(l.itemState){case dt.ItemState.INSERTING:if(!this.commit(u.forceInsert,!0))return this.cancel(!0),!1;break;case dt.ItemState.APPENDING:if(!this.commit(u.forceAppend,!0))return this.cancel(!0),!1;break;case dt.ItemState.UPDATING:if(!this.commit(u.commitWhenNoEdit,!0))return this.cancel(!0),!1}}catch(e){if(e instanceof Dt.ValidationError)return(e=this._fireValidationFail(l.index,e.column,e))&&alert(u.showOnlyValidationMessage&&e.userMessage?e.userMessage:e.toString()),this.invalidateLayout(),!1;if(e instanceof Dt.AbortError)return!1;throw e}else l&&this.isItemEditing(l)&&u.validateOnExit&&this.invalidateLayout();else this.cancel(!0);r.focusedIndexChanging(e),this._focusedIndex.assign(e),this.$_checkFocusedLayout(),this.isValid(a)&&(s=(i=o.getBodyView(a)).getCellAt(o,a),i.$_focusChanged(this,s,!1)),this.isValid(e)&&(s=(i=o.getBodyView(e)).getCellAt(o,e),i.$_focusChanged(this,s,!0)),f instanceof mt.EditableItemProvider&&f.setDiffs(this._editOptions.checkDiff,this._editOptions.checkCellDiff,this._editOptions.strictDiff),this._editController.focusedIndexChanged(a,e,!1),r.focusedIndexChanged(a,e),r=this._focusedIndex,e=this.isValid(r),!t&&e||this.clearSelection(),this._layouted&&this._refreshSideViews();var c,h,o=!It.CellIndex.areEquals(r,o._prevFocused);return(n||o)&&(this.$_makeFocusedIndexVisible()||(this._editController.resetEditor(!1),this.isValid(r)&&this.getItem(r.itemIndex).canEdit()&&this._editController.prepareEditor(r),this.isValid(a)&&(c=this.getBodyViewAt(a))&&(h=c.getRowView(a.item))instanceof un.RowElement&&h.resetButtons(this),!this.container.isLayoutNeeded()&&e&&(c=this.getBodyViewAt(r))&&(h=c.getRowView(r.item))instanceof un.RowElement&&h.resetButtons(this))),this._fireCurrentChanged(this._currentIndex.assign(r)),this.$_checkCurrentRow(),!0},o.prototype._refreshSideViews=function(){this.container.isLayoutNeeded()||(this._rowBarContainer.visible&&this._rowBarContainer.refresh(this),this._headerView.visible&&this._headerView.refresh(this),this._fixedHeaderView.visible&&this._fixedHeaderView.refresh(this),this._rightHeaderView.visible&&this._rightHeaderView.refresh(this))},o.prototype.$_makeFocusedIndexVisible=function(){return this.makeCellVisible(this._focusedIndex)},o.prototype.makeCellVisible=function(e){if(this._editorLender)return this._editorLender.makeCellVisible(e);if(this.isValid(e)||e&&e.column){if(this.layoutManager.makeCellVisible(e),!this.layoutManager.focusIsVisible())return"mousedown"!==this._eventFrom&&this.invalidateLayout(),!0;this.layoutManager.clearFocusRequest()}return!1},o.prototype.makeColumnVisible=function(e){e&&(e=this.getIndex(this._focusedIndex?this._focusedIndex.itemIndex:-1,e),this.makeCellVisible(e))},o.prototype.makeItemVisible=function(e){0<=e&&(e=this.getIndex(e,this._focusedIndex&&this._focusedIndex.layout),this.makeCellVisible(e))},o.prototype.makeLayoutVisible=function(e){e&&(e=this.getIndex(this._focusedIndex?this._focusedIndex.itemIndex:-1,e),this.makeCellVisible(e))},o.prototype.cancelEditor=function(e){this.isEditing()&&this._editController.cancelEditor(e=!(0<arguments.length)||e)},o.prototype.itemEditCancel=function(){return this._fireItemEditCancel(this.itemSource.editingItem)},o.prototype.$_cancelItem=function(e,t){void 0===t&&(t=!1);var n=p.Utils.cast(this.itemSource,mt.EditableItemProvider);return!!(n&&e&&n.isEditing(e))&&(this._validationManager.clearInvalidCells(-1),n.cancel(),t&&this.resetFocusedIndex(),!0)},o.prototype.cancel=function(e){void 0===e&&(e=!1);var t=this.editController;this.isEditing()&&(t.cancelEditor(!0),t.invalidateEditor());var n=this.focusedIndex;this.itemSource;if(this.isValid(n)){n.dataId;if(this.$_cancelItem(n.item))return n=n.clone(),this._rowBarContainer.stateError=void 0,t._prepareEditor(t._editIndex),n.normalize(this),n.item instanceof mt.DummyEditItem&&n.up(),this.setFocusedIndex(n),e&&this.$_makeFocusedIndexVisible(),!0}return!1},o.prototype.commitEditor=function(e){void 0===e&&(e=!0),this.isEditing()&&this.editController.commitEditor(e,!1)},o.prototype.$_commitItem=function(e,t,n){var r=p.Utils.cast(this.itemSource,mt.EditableItemProvider),i=this.validationManager;if(r&&e&&r.isEditing(e)&&(t||r.isEdited(e))){t=dt.ItemState_isInserting(e.itemState);try{i.validateRow(e,t,!1,!1),this._rowBarContainer.stateError=void 0}catch(e){throw e instanceof Dt.ValidationError&&(e.level=e.level||c.ValidationLevel.ERROR,e.column||(this._rowBarContainer.stateError=e)),e}if(r.commit())return-1<e.dataId&&i.cloneError(-1,e.dataId),i.clearInvalidCells(-1),this.editOptions.removeValidateOnCommit&&-1<e.dataId&&i.clearInvalidCells(e.dataId),!0;if(n)throw new Dt.AbortError("Commit failed.");return!1}},o.prototype.commit=function(e,t,n){void 0===n&&(n=!0);var r=this.focusedIndex;return!!this.isValid(r)&&(this.isEditing()&&(this.editController.commitEditor(!0,!1,n),this.editController.invalidateEditor()),this.$_commitItem(r.item,e,t))},o.prototype.editorCancel=function(e,t){this._doCellCancel(t)},o.prototype._doCellCancel=function(e){return this._fireEditCanceled(e)},o.prototype.editorCanceled=function(){this.activeTool.resetFocused()},o.prototype._editorStarted=function(e,t){if(this.closePopups(!1),this.edit(t))return!0},o.prototype._editorChange=function(e,t,n){this._fireEditChange(t,n)},o.prototype._editorSearch=function(e,t,n){this._fireEditSearch(t,n)},o.prototype._searchCellButtonClick=function(e,t,n){return this._fireSearchCellButtonClick(t,n)},o.prototype.$_getFieldDefaults=function(e){for(var t=this.dataSource.fieldCount,n=[],r=0;r<t;r++)n.push(void 0);for(r=0;r<t;r++){var i=function(e,t){for(var n=0;n<e.columnCount;n++){var r=e.getColumn(n);if(r instanceof jt.DataColumn&&r.dataIndex==t)return r=r.getField(),r&&r.defaultValue}}(this,r);i&&(n[r]=i)}return n},o.prototype.$_getColumnDefaults=function(e){for(var t=0,n=this.columnCount;t<n;t++){var r=this.getColumn(t);r instanceof jt.DataColumn&&null!=r.defaultValue&&(e[r.dataIndex]=r.defaultValue)}},o.prototype.$_getItemDefaults=function(e,t){},o.prototype.$_readDefaultValues=function(e){},o.prototype.$_getInsertDefaults=function(e){var t=this.$_getFieldDefaults(this.itemSource.dataSource);return this.$_getColumnDefaults(t),this.$_getItemDefaults(null,t),this.$_readDefaultValues(t),t},o.prototype.sortColumn=function(e,t){e&&(this.sortingOptions.style==c.SortStyle.EXCLUSIVE?t&&t.shiftKey?this.sortColumnWithStyle(c.SortStyle.INCLUSIVE,e):this.sortColumnWithStyle(c.SortStyle.EXCLUSIVE,e):this.sortColumnWithStyle(this.sortingOptions.style,e))},o.prototype.sortColumnWithStyle=function(e,t){if(!t)throw new Error("column is null");var n;this.isItemEditing(null)||t.dataIndex<0||(n=this._sortingOptions.textCase,e==c.SortStyle.EXCLUSIVE?t.sortOrder<0?this.orderBy([t],[c.SortDirection.ASCENDING],[n]):t.sortDirection==c.SortDirection.ASCENDING?this.orderBy([t],[c.SortDirection.DESCENDING],[n]):this.isGroupedColumn(t)&&this.itemSource._groupSorting?this.orderBy([t],[c.SortDirection.ASCENDING],[n]):this.unsortColumnWithStyle(e,t):e!=c.SortStyle.INCLUSIVE&&e!=c.SortStyle.REVERSE||(t.sortOrder<0?this.$$_addSort(t,c.SortDirection.ASCENDING,n,e==c.SortStyle.REVERSE):t.sortDirection==c.SortDirection.ASCENDING?this.$$_addSort(t,c.SortDirection.DESCENDING,n,e==c.SortStyle.REVERSE):this.isGroupedColumn(t)&&this.itemSource._groupSorting?this.$$_addSort(t,c.SortDirection.ASCENDING,n,e==c.SortStyle.REVERSE):this.unsortColumnWithStyle(e,t)))},o.prototype.orderBy=function(e,t,n){if(!this.isItemEditing(null))if(!e||e.length<1)this._sortItems([],[],[]);else{for(var r=[],i=e.length,s=0;s<i;s++){var o=e[s];r.push(o.dataIndex)}this._sortItems(r,t,n)}},o.prototype.unsortColumnWithStyle=function(e,t){var n,r,i;!this.isItemEditing()&&t&&(n=this.getSortFields(),r=this.getSortDirections(),i=this.getSortCases(),(t=n.indexOf(t.dataIndex))<0||(e==c.SortStyle.EXCLUSIVE?this.orderBy([],[],[]):e!=c.SortStyle.INCLUSIVE&&e!=c.SortStyle.REVERSE||(n.splice(t,1),r.splice(t,1),i.splice(t,1),this._sortItems(n,r,i))))},o.prototype.$$_addSort=function(e,t,n,r){var i=this.getSortFields(),s=this.getSortDirections(),o=this.getSortCases(),u=e.dataIndex,e=i.indexOf(u);0<=e?(s[e]=t,o[e]=n):r?(i.splice(0,0,u),s.splice(0,0,t),o.splice(0,0,n)):(i.push(u),s.push(t),o.push(n)),this._sortItems(i,s,o)},o.prototype._sortItems=function(e,t,n){var r=e.concat(),i=t?t.concat():[],s=n?n.concat():[];this._fireSorting(r,i)&&this._toastManager.show(this.sortingOptions.toast,!0,function(){var t=this.sortingOptions.keepFocusedRow&&this.focusedIndex?this.focusedIndex.dataRow:-1;this._doSortItems(e,i,s),0<=t&&(t=It.CellIndex.temp(this,this.getItemIndexOfRow(t),this.focusedIndex.column),this.setFocusedIndex(t,!0,!0))}.bind(this))},o.prototype._doPrepareComparer=function(e){for(var t={},n=0;n<e.length;n++){var r=this.columnByField(e[n]);r.sortByLabel&&(t[e[n]]=function(e){var t=e.grid;return function(n,r,i){return r=t.getItemOfRow(r,!0),i=t.getItemOfRow(i,!0),r=Et.DataCell.getText(r,e),i=Et.DataCell.getText(i,e),r==i?0:null==r?null==i?0:-1:null==i||i<r?1:r<i?-1:0}}(r))}return t},o.prototype._doSortItems=function(e,t,n){},o.prototype.getSortFields=function(){return null},o.prototype.getSortDirections=function(){return null},o.prototype.getSortCases=function(){return null},o.prototype.canFiltering=function(){return this._fireFiltering()},_dp(o,"filterSelecting",{get:function(){return this._filterSelector.opened}}),_dp(o,"filterSelector",{get:function(){return this._filterSelector}}),o.prototype.applyFilters=function(e,t){return!this.isItemEditing(null)&&!!this._fireFiltering()&&(this._toastManager.show(this.filteringOptions.toast,!0,function(){this.$_doApplyFilters(e,t)}.bind(this)),!0)},o.prototype.$_doApplyFilters=function(e,t){var n=this._items.itemCount;this._items.beginFiltering();try{this._filterRunning=!0,this._items.clearAllFilters(),this.$_addFilters()}finally{this._items.endFiltering(e,t),this._filterRunning=!1}n!==this._items.itemCount&&(this.topIndex=0)},o.prototype.$_addFilters=function(){for(var e=this.columnCount,t=0;t<e;t++){var n=this.getColumn(t),r=n.autoFilter?n.autoFilters:n.filters;if(r&&0<r.activeCount)for(var i=0,s=r.count;i<s;i++){var o=r.getItem(i);o.active&&this._items.addFilter(n.dataIndex,o)}}},o.prototype.columnFilterChanged=function(e,t){this._doColumnFiltersChanged(e,t)},o.prototype.canGrouping=function(){return!1},o.prototype.$_layoutRowHover=function(e,t,n){var r=this._layoutManager,i=r.footerBounds.y+r.contentBounds.y,s=this.getBodyView(e.cell);if(s&&!((t=r.getTableRowIndex(t))<0)){var t=s.getViewIndex(t),o=r.getTableItemBounds(t);switch(o.y+=r.contentBounds.y+r.bodyBounds.y,o.bottom>i&&(o.bottom=i),n){case c.RowMaskType.DATA:o.x=this._fixedContentPane.x,o.right=(this._rightContentPane.width?this._rightContentPane:this._contentPane).right;break;case c.RowMaskType.FILL:o.x=0,o.width=this.width;break;case c.RowMaskType.CELL:var u=s.pointByContainer(0,0),a=s.getCellRect(r,e,!0);o.x=a.x+u.x,o.width=a.width;break;case c.RowMaskType.ROW:o.x=0,o.right=(this._rightContentPane.width?this._rightContentPane:this._contentPane).right}this._rowHoverView.setRect(o)}},o.prototype.$_resetHovering=function(e,t,n){void 0===n&&(n=!1);var r=this.activeTool;if(r instanceof qn.GridSelectionTool&&this.canHovering){var i,s=this.container.getTableCell(r.mouseEventTarget),o=this.getCellType(s),u=!1,a=!1,f=!1;return"data"===o?(i=this.getBodyView(s).bodyCellByCell(s),this.$_setHoveredCell(i,t,n),r.$_setHoveredCell(i,e,t),u=!0):"header"===o?(i=this.getHeaderView(s).tableCellByCell(s),r.$_setHoveredHeaderCell(i,e,t),a=!0):"state"===o&&this._rowBarContainer.stateError&&this._stateBar.errorVisible&&this.editOptions.hintOnError&&(o=this._rowBarContainer.rowOf(s),this.isItemEditing(this.getItem(o))&&(f=!0,r.$_showStateError(s,this._rowBarContainer.stateError.message))),u||a||f||r._hideTooltip(),u||this.$_setHoveredCell(null,t,!1),!0}},o.prototype.$_setHoveredCell=function(e,t,n){!(n=void 0===n?!1:n)&&e===this._hoveredCell||(this._hoveredCell&&this._hoveredCell.cell&&this.getBodyView(this._hoveredCell.cell).$_mouseEnteredChanged(this,this._hoveredCell,!1),this._hoveredCell=e,this._hoveredCell&&this.getBodyView(this._hoveredCell.cell).$_mouseEnteredChanged(this,this._hoveredCell,!0),this._doHoveredCellChanged(e)),!n&&t==this._hoveredY||(this._hoveredY=t,this.$_resetRowHover())},o.prototype.$_resetRowHover=function(){var e=this._displayOptions.rowHoverType;this._hoveredCell&&e&&e!=c.RowMaskType.NONE?(this._rowHoverView.visible=!0,this.$_layoutRowHover(this._hoveredCell,this._hoveredY,e)):this._rowHoverView.visible=!1},o.prototype.$_resetFocusRender=function(e,t){var n,r,i=this.getBodyCellAt(this.focusedIndex,!0),s=i&&i.merged&&(i.renderer2||i.head.renderer2);s&&s.refreshFocusChanged&&(r=this.layoutManager,i=(n=this.getBodyViewAt(this.focusedIndex)).getCellRectAt(r,this.focusedIndex,!1),r=n.getCellRectAt(r,this.focusedIndex,!0),r=i.top-r.top+i.height/2-r.height/2,s.moveClickElement(r,this.focusedIndex.itemIndex))},o.prototype._doHoveredCellChanged=function(e){},o.prototype._doCellButtonClicked=function(e){this._fireCellButtonClicked(e)},o.prototype._syncHeadCheck=function(e,t){var n=this.checkBar;if(n.syncHeadCheck){this._needSyncHeadCheck=!1;var r=n.showGroup&&!n.merged;if(!1===t)this._headView.allChecked=t;else if(null==e)this._headView.allChecked=t;else{for(var i=0,s=void 0,o=n.visibleOnly,u=o?this._items.itemCount:(s=this.getAllItems()).length,a=0;a<u;a++){var f=o?this._items.getItem(a):s[a];if((f.isDataRow||r)&&f.checkable){if(!f.checked){i=-1;break}i++}}this._headView.allChecked=0<i}}},o.prototype.getRowHeight=function(e){return e=this.getItem(e),e?e.height:NaN},o.prototype.setRowHeight=function(e,t,n){void 0===n&&(n=!0),e=this.getItem(e),e&&(this._items.setRowHeight(e,t,!0),n&&this.refreshView())},o.prototype.clearRowHeights=function(e){this._items.clearRowHeights(e=void 0===e?!1:e)&&this.refreshView()},o.prototype.setFocusedClass=function(e,t){!this.displayOptions.useFocusClass||(e=this.getBodyCellAt(e,!0))&&e.cell&&(t?p.Utils.addClassName(e.cell,"rg-focused-cell"):p.Utils.removeClassName(e.cell,"rg-focused-cell"))},o.prototype.setFocusedRowClass=function(e,t){function n(e,n){n=e.getRowView(n);if(n)for(var r=0,i=n._getTableRows(this.layoutManager);r<i.length;r++){var s=i[r];t?p.Utils.addClassName(s,"rg-focused-row"):p.Utils.removeClassName(s,"rg-focused-row")}}this.displayOptions.useFocusClass&&(e=e.item,n.call(this,this.bodyView,e),n.call(this,this.fixedBodyView,e),n.call(this,this.rightBodyView,e))},o.prototype.getSummaryCount=function(e){switch(e){case"summary":return this.headerSummaries.count;case"footer":return this.footers.count;default:return 0}},o.prototype.$_rendererChanged=function(e){var t=this._layoutManager.getBodyView(e);t&&t.$_rendererChanged(e)},o.prototype.$_clearDropData=function(e){e=this.getRowsOfItems(e,!1),0<e.length&&this.dataSource.removeRows(e)},o.prototype.$_dropData=function(e,t,n){var r,i,s=this.dataDropOptions,o=s.callback;o?o(e.handler,t,this.handler,n):0<=n&&(r=e.getRowsOfItems(t),i=void 0,i=(i=(o=s.fieldMapCallback)?o(e.handler,t,this.handler,n):i)||s.fieldMap,n<this.itemCount?0<=(n=this.getRowOfItem(n))&&this.dataSource.insertRowsFrom(e.dataSource,i,r,n):this.dataSource.appendRowsFrom(e.dataSource,i,r)),s.dropMode==er.DataDropMode.MOVE&&e.$_clearDropData(t)},o.prototype.$_checkFocusedLayout=function(){var e;!this._focusedIndex||(e=this.getBodyCellAt(this._focusedIndex))&&e.spanned&&(e=this.getBodyView(e.cell).getCheckedLayout(e),this._focusedIndex.layout=e&&e.layout)},o.prototype.$_isBottomCell=function(e){e=this.getBodyCellAt(e);if(e)return this.getBodyView(e.cell).isBottomCell(e)},o.prototype.$_getLowerOfCell=function(e){e=this.getBodyCellAt(e);if(e)return(e=this.getBodyView(e.cell).getLowerOf(e))&&e.layout.source},o.prototype.$_isTopCell=function(e){e=this.getBodyCellAt(e);if(e)return this.getBodyView(e.cell).isTopCell(e)},o.prototype.$_getUpperOfCell=function(e){e=this.getBodyCellAt(e);if(e)return(e=this.getBodyView(e.cell).getUpperOf(e))&&e.layout.source},o.prototype._checkFieldIndex=function(e){this._items.setCheckFieldIndex(e)},o.prototype._fireViewActivated=function(e){this.fireEvent(o.VIEW_ACTIVATED,e)},o.prototype._fireCurrentChanging=function(e,t){return this.fireConfirmEvent(o.CURRENT_CHANGING,e,t)},o.prototype._fireCurrentChanged=function(e){this.fireEvent(o.CURRENT_CHANGED,e)},o.prototype._fireCurrentRowChanged=function(e,t){this.fireEvent(o.CURRENT_ROW_CHANGED,e,t)},o.prototype._fireValidateCell=function(e,t,n){this.fireEvent(o.VALIDATE_CELL,e,t,n)},o.prototype._fireValidateRow=function(e,t,n){this.fireEvent(o.VALIDATE_ROW,e,t,n)},o.prototype._fireValidationFail=function(e,t,n){return this.fireObjectEvent(o.VALIDATION_FAIL,e,t,n)},o.prototype._fireCellClicked=function(e){this.fireEvent(o.CELL_CLICKED,e)},o.prototype._fireCellDblClicked=function(e){this.fireEvent(o.CELL_DBL_CLICKED,e)},o.prototype._fireCellItemClicked=function(e,t){return this.fireConfirmEvent(o.CELL_ITEM_CLICKED,e,t)},o.prototype._fireColumnCheckedChanged=function(e){this.fireEvent(o.COLUMN_CHECKED_CHANGED,e,e.checked)},o.prototype._fireMenuItemClicked=function(e,t){this.fireEvent(o.MENU_ITEM_CLICKED,e,t)},o.prototype._fireContextMenuPopup=function(e,t,n){return this.fireObjectEvent(o.CONTEXT_MENU_POPUP,e,t,n)},o.prototype._fireContextMenuItemClicked=function(e,t){this.fireEvent(o.CONTEXT_MENU_ITEM_CLICKED,e,t)},o.prototype._fireCellButtonClicked=function(e){this.fireEvent(o.CELL_BUTTON_CLICKED,e)},o.prototype._fireEditButtonClicked=function(e){this.fireEvent(o.EDIT_BUTTON_CLICKED,e)},o.prototype._fireScrollToBottom=function(){this.fireEvent(o.SCROLL_TO_BOTTOM)},o.prototype._fireTopIndexChanged=function(e){this.fireEvent(o.TOP_INDEX_CHANGED,e)},o.prototype._fireDataCellClicked=function(e){this.fireEvent(o.DATA_CELL_CLICKED,e)},o.prototype._fireDataCellDblClicked=function(e){this.fireEvent(o.DATA_CELL_DBL_CLICKED,e)},o.prototype._fireRowsDeleting=function(e){return this.fireConfirmEvent(o.ROWS_DELETING,e)},o.prototype._fireRowInserting=function(e,t){return this.fireConfirmEvent(o.ROW_INSERTING,e,t)},o.prototype._fireItemCommit=function(e,t){this.fireEvent(o.ITEM_COMMIT)},o.prototype._fireSelectionChanged=function(){return this.fireEvent(o.SELECTION_CHANGED)},o.prototype._fireSelectionAdded=function(e){return this.fireEvent(o.SELECTION_ADDED,e)},o.prototype._fireSelectionRemoved=function(){return this.fireEvent(o.SELECTION_REMOVED)},o.prototype._fireSelectionCleared=function(){return this.fireEvent(o.SELECTION_CLEARED)},o.prototype._fireSelectionResized=function(e){return this.fireEvent(o.SELECTION_RESIZED)},o.prototype._fireSelectionEnded=function(e){return this.fireEvent(o.SELECTION_ENDED,e)},o.prototype._fireUpdateStarted=function(e,t){this.fireEvent(o.UPDATE_STARTED,e)},o.prototype._fireInsertStarted=function(e,t){this.fireEvent(o.INSERT_STARTED,e,t)},o.prototype._fireShowEditor=function(e,t,n){return this.fireConfirmEvent(o.SHOW_EDITOR,e,t,n)},o.prototype._fireHideEditor=function(e){return this._doEditorActivated(e,!1),this.fireEvent(o.HIDE_EDITOR,e)},o.prototype._fireEditChange=function(e,t){this.fireEvent(o.EDIT_CHANGE,e,t)},o.prototype._fireGetEditValue=function(e,t){this.fireEvent(o.GET_EDIT_VALUE,e,t)},o.prototype._fireEditCommit=function(e,t,n){return this.fireConfirmEvent(o.EDIT_COMMIT,e,t,n)},o.prototype._fireEditCanceled=function(e){this.fireEvent(o.EDIT_CANCELED,e)},o.prototype._fireItemEditCancel=function(e){return this.fireConfirmEvent(o.ITEM_EDIT_CANCEL,e)},o.prototype._fireItemEditCanceled=function(e){this.fireEvent(o.ITEM_EDIT_CANCELED,e)},o.prototype._fireEditSearch=function(e,t){this.fireEvent(o.EDIT_SEARCH,e,t)},o.prototype._fireSearchCellButtonClick=function(e,t){return this.fireObjectEvent(o.SEARCH_BUTTON_CLICK,e,t)},o.prototype._fireCellEdited=function(e,t){this.fireEvent(o.CELL_EDITED,e,t)},o.prototype._fireEditRowChanged=function(e,t,n,r){this.fireEvent(o.EDIT_ROW_CHANGED,e,t,n,r)},o.prototype._fireEditItemPasted=function(e,t,n,r){this.fireEvent(o.EDIT_ROW_PASTED,e,t,n,r)},o.prototype._fireItemsPasted=function(e){this.fireEvent(o.ROWS_PASTED,e)},o.prototype._fireCellPasting=function(e,t){return this.fireObjectEvent(o.CELL_PASTING,e,t)},o.prototype._fireItemChecked=function(e){this.fireEvent(o.ITEM_CHECKED,e,e.checked)},o.prototype._fireItemsChecked=function(e,t){this.fireEvent(o.ITEMS_CHECKED,e,t)},o.prototype._fireItemAllChecked=function(e){this.fireEvent(o.ITEM_ALL_CHECKED,e)},o.prototype._fireErrorClicked=function(e,t){this.fireEvent(o.ERROR_CLICKED,t)},o.prototype._fireSorting=function(e,t){return this.fireConfirmEvent(o.SORTING,e,t)},o.prototype._fireFiltering=function(){return this.fireConfirmEvent(o.FILTERING)},o.prototype._fireKeyDown=function(e){return this.fireConfirmEvent(o.KEY_DOWN,e)},o.prototype._fireKeyPress=function(e){this.fireEvent(o.KEY_PRESS,e)},o.prototype._fireKeyUp=function(e){this.fireEvent(o.KEY_UP,e)},o.prototype._fireShowTooltip=function(e,t){return this.fireObjectEvent(o.SHOW_TOOLTIP,e,t)},o.prototype._fireShowHeaderTooltip=function(e,t){return this.fireObjectEvent(o.SHOW_HEADER_TOOLTIP,e,t)},o.prototype._fireColumnPropertyChanged=function(e,t,n,r){this.fireEvent(o.COLUMN_PROPERTY_CHANGED,e,t,n,r)},o.prototype._fireLayoutPropertyChanged=function(e,t,n,r){this.fireEvent(o.LAYOUT_PROPERTY_CHANGED,e,t,n,r)},o.prototype._fireGridActivated=function(){return this.fireEvent(o.GRID_ACTIVATED,this)},o.prototype._fireCopy=function(e,t){return this.fireConfirmEvent(o.COPY,e,t)},o.prototype._firePaste=function(e,t){return this.fireConfirmEvent(o.PASTE,e,t)},o.prototype._firePasted=function(){this.fireEvent(o.PASTED)},o.prototype._fireCommandStackChanged=function(e,t){this.fireEvent(o.COMMAND_STACK_CHANGED,e,t)},o.prototype.onPopupMenuManagerMenuItemClicked=function(e,t,n){this._fireMenuItemClicked(t,n)},o.prototype.onScrollBarScrolled=function(e,t,n,r){var i,s,o,u=this.displayOptions,a=this.fixedOptions,f=(this.layoutManager,u.scrollMessageCallback),l=t===gn.ScrollEventType.SCROLL_END;if(e.vertical){var c=-1;switch(t){case gn.ScrollEventType.LINE:return void this.scrollRow(n);case gn.ScrollEventType.PAGE:c=this.topIndex+n*e._page;break;case gn.ScrollEventType.THUMB_TRACK:var h=u.scrollDuration;u.liveScroll||0<this._scrolledTime&&p.Utils.getTimer()-this._scrolledTime>h?(c=r,this._scrolledTime=0):(this._scrollTipView||(this._scrollTipView=new gn.ScrollTipView(this.container)),this._vscrollBar.tipView=this._scrollTipView,this._vscrollBar.setPosition(r,!0),s=this._vscrollBar.pos+a.rowCount,i=f?f(this.handler,e.vertical,s):String(s+1),this._vscrollBar.setText(i),0<h&&0==this._scrolledTime&&(this._scrolledTime=p.Utils.getTimer()));break;case gn.ScrollEventType.THUMB_END:this._scrollTipView&&this._scrollTipView.hide(),c=r,l=!(this._vscrollBar.tipView=null);break;default:c=r}0<=c&&(this.topIndex=c)}else{var d=-1;switch(t){case gn.ScrollEventType.LINE:d=this.leftPos+8*n;break;case gn.ScrollEventType.PAGE:d=0<n?this._layoutManager.scrollToNextCell():this._layoutManager.scrollToPrevCell();break;case gn.ScrollEventType.THUMB_TRACK:h=u.hscrollDuration,u.liveScroll||0<this._scrolledTime&&p.Utils.getTimer()-this._scrolledTime>h?(d=r,this._scrolledTime=0):(this._scrollTipView||(this._scrollTipView=new gn.ScrollTipView(this.container)),this._hscrollBar.tipView=this._scrollTipView,-1<(o=this._layoutManager.getPositionToVIndex(r))&&(i=f?f(this.handler,e.vertical,o):this.getVisibleLayout(o).getDataColumn().header.displayText,this._hscrollBar.setText(i)),this._hscrollBar.setPosition(r,!0),0<h&&0==this._scrolledTime&&(this._scrolledTime=p.Utils.getTimer()));break;case gn.ScrollEventType.THUMB_END:this._scrollTipView&&this._scrollTipView.hide(),d=r,l=!(this._hscrollBar.tipView=null);break;default:d=r}0<=d&&(this.leftPos=d)}l&&!p.Utils.isMobile()&&this.setFocus()},o.prototype.$_checkFocusedRow=function(e){void 0===e&&(e=!1),this.focusedRow>=this.itemCount&&this.clearFocusedIndex(e)},o.prototype.onItemProviderReset=function(e){this.hideEditor(),this._dataChanged=!0,this.clearRowHeights(),this._columnsReset(),this._populateMerges(),this.$_checkFocusedRow(),this.resetGrid(),this._syncHeadCheck([]),this.$_refreshInvalidList(!0),this._shadowDom&&e&&this._shadowDom.setItemProvider(e),this._editorLender&&this._editorLender.itemsChanged(this)},o.prototype.onItemProviderRefresh=function(e){this.hideEditor(),this._dataChanged=!0,this._resetColumnSortStates(),this.clearRowHeights(),this._populateMerges(),this.$_checkFocusedRow(!0),this.refreshView(),this._keepNullFocus||this.setFocusedIndex(this.focusedIndex,!0),this._needSyncHeadCheck&&this._syncHeadCheck([]),this.$_refreshInvalidList(!1),this._shadowDom&&e&&this._shadowDom.setItemProvider(e),this._editorLender&&this._editorLender.itemsChanged(this)},o.prototype.onItemProviderRefreshClient=function(e){this.hideEditor(),this._dataChanged=!0,this._populateMerges(),this.$_checkFocusedRow(),this.refreshView(),this._needSyncHeadCheck&&this._syncHeadCheck([]),this._shadowDom&&e&&this._shadowDom.setItemProvider(e)},o.prototype.onItemProviderItemInserted=function(e,t){this.hideEditor(),this._dataChanged=!0,this._needSyncHeadCheck=!0,this.clearRowHeights(),this._populateMerges(),this.refreshView(),(e.dataSource.undoing||e.dataSource.redoing)&&((e=this._focusedIndex.clone()).itemIndex=t.index,this.setFocusedIndex(e,!0,!0)),this._editorLender&&(this._editorLender.itemInserted(this,t),this._editorLender.itemsChanged(this))},o.prototype.onItemProviderItemDeleted=function(e,t){this.hideEditor(),this._dataChanged=!0,this._needSyncHeadCheck=!0,this.clearRowHeights(),this._populateMerges(),this.$_checkFocusedRow(!0),this.refreshView(),(e.dataSource.undoing||e.dataSource.redoing)&&((e=this._focusedIndex.clone()).itemIndex=t.index,this.setFocusedIndex(e,!0,!0)),this._editorLender&&this._editorLender.itemsChanged(this)},o.prototype.onItemProviderItemUpdated=function(e,t){this.hideEditor(),this._dataChanged=!0,this._updateRows?this._updateRows.push(t.dataId):this._updateRows=[t.dataId],this.clearRowHeights(),this._populateMerges(),this.refreshView(),(e.dataSource.undoing||e.dataSource.redoing)&&((e=this._focusedIndex.clone()).itemIndex=t.index,this.setFocusedIndex(e,!0,!0)),this._editorLender&&this._editorLender.itemsChanged(this)},o.prototype.onItemProviderCheckableChanged=function(e,t){this.refreshView(),this._syncHeadCheck([])},o.prototype.onItemProviderItemChecked=function(e,t){this.refreshView(),this._fireItemChecked(t)},o.prototype.onItemProviderItemsChecked=function(e,t,n){this.refreshView(),this._fireItemsChecked(t,n)},o.prototype.onItemProviderItemAllChecked=function(e,t){this.refreshView(),this._fireItemAllChecked(t)},o.prototype.onItemProviderItemCheckChanged=function(e,t,n){this._syncHeadCheck(t,n),this.checkBar.canMerge()&&this._populateMerges(),this._editorLender&&this._editorLender.itemsChanged(this)},o.prototype.onItemProviderRowStateChanged=function(e,t){this.refreshView()},o.prototype.onItemProviderRowStatesChanged=function(e,t){this.refreshView()},o.prototype.onItemProviderRowStatesCleared=function(e){this.refreshView()},o.prototype.onItemProviderSort=function(e,t,n){this.refreshView()},o.prototype.onItemProviderSorted=function(e){this.refreshView(),this.fireEvent(o.SORTING_CHANGED),this._shadowDom&&e&&this._shadowDom.reset()},o.prototype.onItemProviderFilterAdded=function(e){},o.prototype.onItemProviderFilterRemoved=function(e){},o.prototype.onItemProviderFilterCleared=function(e){},o.prototype.onItemProviderFilterAllCleared=function(e){},o.prototype.onItemProviderFiltered=function(e,t,n){this._populateMerges(),this.$_checkFocusedRow(),this.refreshView(),this._loading||this._syncHeadCheck([]),this.fireEvent(o.FILTERING_CHANGED,t,n),this._shadowDom&&e&&this._shadowDom.reset()},o.prototype.onItemProviderCommandStackChanged=function(e,t,n){this._fireCommandStackChanged(t,n)},o.prototype.onItemProviderDataLoadComplated=function(e){this._dataLoad=!0},o.prototype.$_focusEditItem=function(e){null==this._editorLender&&(!(e=this.getIndex(e.index,this.focusedIndex?this.focusedIndex.column:null)).column&&0<this.visibleLayoutCount&&(e._layout=this.getVisibleLayout(0)),this.setFocusedIndex(e,!0),this.makeCellVisible(this.focusedIndex))},o.prototype.$_beforeEditing=function(e,t){},o.prototype.onItemEditUpdateStarted=function(e,t){this.$_beforeEditing(e,t),this.refreshView(),this._fireUpdateStarted(t,!1),this._editorLender&&this._editorLender.itemUpdateStarted(this,t)},o.prototype.onItemEditAppendStarted=function(e,t){this.$_beforeEditing(e,t),this.hideEditor(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(t),this.requestPrepareEditor(),this._fireInsertStarted(t,!0),this._editorLender&&this._editorLender.itemAppendStarted(this,t)},o.prototype.onItemEditInsertStarted=function(e,t){this.$_beforeEditing(e,t),this.hideEditor(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(t),this.requestPrepareEditor(),this._fireInsertStarted(t,!1),this._editorLender&&this._editorLender.itemInsertStarted(this,t)},o.prototype.onItemEditCellEdited=function(e,t,n){this.refreshView(),this._cellUpdateEventLock||this._fireCellEdited(t,n)},o.prototype.onItemEditCellUpdated=function(e,t,n,r,i){this.refreshView(),this._cellUpdateEventLock||this._fireEditRowChanged(t,n,r,i)},o.prototype.onItemEditCommitting=function(e,t){},o.prototype.onItemEditCommitted=function(e,t){this._appendDummy(),this.hideEditor(),this.refreshView(),this._editorLender&&this._editorLender.itemCommited(this,t)},o.prototype.onItemEditCanceled=function(e){this._appendDummy(),this.hideEditor(),this._populateMerges(),this.refreshView(),this._fireItemEditCanceled(e._editingItem),this._editorLender&&this._editorLender.itemCanceled(this)},o.prototype.onItemEditCommitRequest=function(e){this.commit(!1)},o.prototype.onItemEditCancelReuqest=function(e){this.cancel()},o.prototype.onLookupSourceProviderChanged=function(e){this._resetColumnIndices(),this.refreshView()},o.prototype.onSelectionChanged=function(e){this._refreshSideViews(),this._fireSelectionChanged()},o.prototype.onSelectionAdded=function(e,t){this._addSelectionView(t),this._layoutSelectionViews(),this._fireSelectionAdded(t)},o.prototype.onSelectionRemoved=function(e){this._fireSelectionRemoved()},o.prototype.onSelectionCleared=function(e){this._clearSelectionViews(),this._fireSelectionCleared()},o.prototype.onSelectionResized=function(e,t){this._layoutSelectionViews(),this._fireSelectionResized(t)},o.prototype.onSelectionEnded=function(e,t){this._fireSelectionEnded(t)},o.prototype.onMenuItemClick=function(e,t){this._fireContextMenuItemClicked(e,t)},o.VIEW_ACTIVATED="onGridBaseViewActivated",o.CURRENT_CHANGING="onGridBaseCurrentChanging",o.CURRENT_CHANGED="onGridBaseCurrentChanged",o.CURRENT_ROW_CHANGED="onGridBaseCurrentRowChanged",o.VALIDATE_CELL="onGridBaseValidateCell",o.VALIDATE_ROW="onGridBaseValidateRow",o.VALIDATION_FAIL="onGridBaseValidationFail",o.CELL_CLICKED="onGridBaseCellClicked",o.CELL_DBL_CLICKED="onGridBaseCellDblClicked",o.CELL_ITEM_CLICKED="onGridBaseCellItemClicked",o.COLUMN_CHECKED_CHANGED="onGridBaseColumnCheckedChanged",o.MENU_ITEM_CLICKED="onGridBaseMenuItemClicked",o.CONTEXT_MENU_POPUP="onGridBaseContextMenuPopup",o.CONTEXT_MENU_ITEM_CLICKED="onGridBaseContextMenuItemClicked",o.CELL_BUTTON_CLICKED="onGridBaseCellButtonClicked",o.EDIT_BUTTON_CLICKED="onGridBaseEditButtonClicked",o.SCROLL_TO_BOTTOM="onGridBaseScrollToBottom",o.TOP_INDEX_CHANGED="onGridBaseTopIndexChanged",o.DATA_CELL_CLICKED="onGridBaseDataCellClicked",o.DATA_CELL_DBL_CLICKED="onGridBaseDataCellDblClicked",o.ROWS_DELETING="onGridBaseRowsDeleting",o.ROW_INSERTING="onGridBaseRowInserting",o.ITEM_COMMIT="onGridBaseItemCommit",o.SELECTION_ADDED="onGridBaseSelectionAdded",o.SELECTION_CHANGED="onGridBaseSelectionChanged",o.SELECTION_REMOVED="onGridBaseSelectionRemoved",o.SELECTION_CLEARED="onGridBaseSelectionCleared",o.SELECTION_RESIZED="onGridBaseSelectionResized",o.SELECTION_ENDED="onGridBaseSelectionEnded",o.INSERT_STARTED="onGridBaseInsertStarted",o.UPDATE_STARTED="onGridBaseUpdateStarted",o.SHOW_EDITOR="onGridBaseShowEditor",o.HIDE_EDITOR="onGridBaseHideEditor",o.EDIT_CHANGE="onGridBaseEditChange",o.GET_EDIT_VALUE="onGridBaseGetEditValue",o.EDIT_COMMIT="onGridBaseEditCommit",o.EDIT_CANCELED="onGridBaseEditCanceled",o.ITEM_EDIT_CANCELED="onGridBaseItemEditCanceled",o.ITEM_EDIT_CANCEL="onGridBaseItemEditCancel",o.EDIT_SEARCH="onGridBaseEditSearch",o.SEARCH_BUTTON_CLICK="onGridBaseSearchCellButtonClick",o.CELL_EDITED="onGridBaseCellEdited",o.EDIT_ROW_CHANGED="onGridBaseEditRowChanged",o.EDIT_ROW_PASTED="onGridBaseEditRowPasted",o.ROWS_PASTED="onGridBaseRowsPasted",o.CELL_PASTING="onGridBaseCellPasting",o.ITEM_CHECKED="onGridBaseItemChecked",o.ITEMS_CHECKED="onGridBaseItemsChecked",o.ITEM_ALL_CHECKED="onGridBaseItemAllChecked",o.ERROR_CLICKED="onGridBaseErrorClicked",o.SORTING="onGridBaseSorting",o.SORTING_CHANGED="onGridBaseSortingChanged",o.FILTERING="onGridBaseFiltering",o.FILTERING_CHANGED="onGridBaseFilteringChanged",o.KEY_PRESS="onGridBaseKeyPress",o.KEY_DOWN="onGridBaseKeyDown",o.KEY_UP="onGridBaseKeyUp",o.SHOW_TOOLTIP="onGridBaseShowTooltip",o.SHOW_HEADER_TOOLTIP="onGridBaseShowHeaderTooltip",o.COLUMN_PROPERTY_CHANGED="onGridBaseColumnPropertyChanged",o.LAYOUT_PROPERTY_CHANGED="onGridBaseLayoutPropertyChanged",o.GRID_ACTIVATED="onGridBaseGridActivated",o.COPY="onGridBaseCopy",o.PASTE="onGridBasePaste",o.PASTED="onGridBasePasted",o.COMMAND_STACK_CHANGED="onGridBaseCommandStackChanged",o.DATA_LOAD_COMPLATED="onGridBaseDataLoadComplated",o);t.GridBase=s});t(ir),ir.GridBase;var sr=n(function(e,t){function o(e){var t=n.call(this)||this;return t._styles=null,t.message="",t.visible=!0,t.spaceTop=0,t.spaceBottom=0,t.height=-1,t.styleName="",e&&t.extend(e),t._styles=e&&e.styles?e.styles:null,t}function f(e){var t=u.call(this)||this;return t.type=r.EXCEL,t.target=i.LOCAL,t.url=void 0,t.done=null,t.showProgress=!1,t.progressMessage="Exporting...",t.prepareProgress=10,t.progressCallback=null,t.params=null,t}function p(e){var n=c.call(this,e)||this;return n._booleanFormatter=null,n.nullDateText="",n.datetimeCallback=null,n.numberCallback=null,n.booleanCallback=null,n.objectCallback=null,n.textCallback=null,n.start=0,n.count=-1,n.linear=!1,n.allColumns=!1,n.allItems=!0,n.onlyCheckedItems=!1,n.pagingAllItems=!1,n.indicator=t.VIS_DEFAULT,n.checkBar=t.VIS_HIDDEN,n.header=t.VIS_DEFAULT,n.footer=t.VIS_DEFAULT,n.headerSummary=t.VIS_DEFAULT,n.indicatorValue=t.INDICATOR_DEFAULT,n.checkMark="v",n.indenting=!0,n.separateRows=!1,n.lookupDisplay=!1,n.showLevelOutline=!1,n.applyFitStyle=!0,n.applyDynamicStyles=!1,n.applyDefaultColumnFormat=!1,n.applyFixed=!1,n.sheetName=null,n.exportSeriesColumn=!1,n.replaceCrText=null,n.replaceLfText=null,n.showColumns=[],n.hideColumns=[],n.hiddenColumns=[],n.exportLink=!1,n.exportTemplate=!1,n.sheetAttrs=null,n.stylePrefix="",n.assignFrom(e),n}function v(e){return e=d.call(this,e)||this,e.lfText=null,e.crText=null,e.seperator=null,e.exportFields=null,e.hideFields=null,e.includeFieldNames=!1,e}function g(e,t){var n=m.call(this,t)||this;return n._grids=[],n._parseGrids(e,t),n}Object.defineProperty(t,"__esModule",{value:!0});var n,r,i,s=(n=y.Base,l.__extends(o,n),o.prototype._doDispose=function(){this._styles=null,n.prototype._doDispose.call(this)},_dp(o,"cssStyle",{get:function(){return this._styles}}),o);t.DocumentTitle=s,t.VIS_DEFAULT="default",t.VIS_HIDDEN="hidden",t.VIS_VISIBLE="visible",t.INDICATOR_DEFAULT="default",t.INDICATOR_ITEM="item",t.INDICATOR_ROW="row",t.PIXELS_PER_CHAR=7,(a=r=t.ExportType||(t.ExportType={})).EXCEL="excel",a.CSV="csv",(a=i=t.ExportTarget||(t.ExportTarget={})).LOCAL="local",a.REMOTE="remote",a.STREAM="stream";var u,a=(u=y.Base,l.__extends(f,u),_dp(f,"fileName",{get:function(){if(this._fileName){if(this._fileName.indexOf(".")<0){var e=this.type===r.CSV?".csv":".xlsx";return this._fileName+e}return this._fileName}return this.type===r.CSV?"realgrid.csv":"realgrid.xlsx"},set:function(e){e!=this._fileName&&(this._fileName=e?e.trim():null)}}),f);t.ExportBaseOptions=a;var c,h=(c=a,l.__extends(p,c),p.prototype._doDispose=function(){this._documentTitle&&(this._documentTitle=this._documentTitle.dispose()),this._documentSubtitle&&(this._documentSubtitle=this._documentSubtitle.dispose()),this._documentTail&&(this._documentTail=this._documentTail.dispose()),c.prototype._doDispose.call(this)},_dp(p,"documentTitle",{get:function(){return this._documentTitle}}),_dp(p,"documentSubtitle",{get:function(){return this._documentSubtitle}}),_dp(p,"documentTail",{get:function(){return this._documentTail}}),_dp(p,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(e){e!=this._datetimeFormat&&(this._datetimeFormat=e)}}),_dp(p,"booleanFormat",{get:function(){return this._booleanFormat},set:function(e){e!=this._booleanFormat&&(this._booleanFormat=e,this._booleanFormatter=e?N.BooleanFormatter.getFormatter(e):null)}}),_dp(p,"numberFormat",{get:function(){return this._numberFormat},set:function(e){e!=this._numberFormat&&(this._numberFormat=e)}}),_dp(p,"booleanFormatter",{get:function(){return this._booleanFormatter}}),p.prototype.indicatorVisible=function(e){if(e)switch(this.indicator){case t.VIS_VISIBLE:return!0;case t.VIS_HIDDEN:return!1;case t.VIS_DEFAULT:default:return e.rowIndicator.visible}return!1},p.prototype.checkBarVisible=function(e){if(e)switch(this.checkBar){case t.VIS_VISIBLE:return!0;case t.VIS_HIDDEN:return!1;case t.VIS_DEFAULT:default:return e.checkBar.visible}return!1},p.prototype.headerVisible=function(e){if(e)switch(this.header){case t.VIS_VISIBLE:return!0;case t.VIS_HIDDEN:return!1;case t.VIS_DEFAULT:default:return e.header.visible}return!1},p.prototype.headerSummaryVisible=function(e){if(e)switch(this.headerSummary){case t.VIS_VISIBLE:return!0;case t.VIS_HIDDEN:return!1;case t.VIS_DEFAULT:default:return 0<e.headerSummaries.visibleCount}return!1},p.prototype.footerVisible=function(e){if(e)switch(this.footer){case t.VIS_VISIBLE:return!0;case t.VIS_HIDDEN:return!1;case t.VIS_DEFAULT:default:return 0<e.footers.visibleCount}return!1},p.prototype.showIndicatorRow=function(e){if(e)switch(this.indicatorValue){case t.INDICATOR_ITEM:return!1;case t.INDICATOR_ROW:return!0;case t.INDICATOR_DEFAULT:default:return e.rowIndicator.displayValue==Xt.IndicatorValue.ROW}return!1},_dp(p,"yOffset",{get:function(){return null==this._yOffset?0:this._yOffset},set:function(e){this._yOffset=Math.floor(e)}}),_dp(p,"xOffset",{get:function(){return null==this._xOffset?0:this._xOffset},set:function(e){this._xOffset=Math.floor(e)}}),_dp(p,"xOffsetWidth",{get:function(){return null==this._xOffsetWidth?100:this._xOffsetWidth},set:function(e){this._xOffsetWidth=Math.floor(e)}}),p.prototype.assignFrom=function(e){var t,n=Object.getPrototypeOf(this);for(t in e)if("documentTitle"==t||"documentSubtitle"==t||"documentTail"==t)this["_"+t]=new s(e[t]);else if(this.hasOwnProperty(t))this[t]=e[t];else{var r=Object.getOwnPropertyDescriptor(n,t);if(r)r.set&&r.set.call(this,e[t]);else for(var i=Object.getPrototypeOf(n);i;)var o=Object.getOwnPropertyDescriptor(i,t),i=o?(o.set&&o.set.call(this,e[t]),null):Object.getPrototypeOf(i)}},p);t.GridExportOptions=h;var d,a=(d=a,l.__extends(v,d),v.prototype.assignFrom=function(e){var t,n,s=Object.getPrototypeOf(this);for(t in e)"type"==t||"target"==t?(e[t],n=e[t].toUpperCase(),"type"!=t||"EXCEL"!=n&&"CSV"!=n||(this.type=r[n]),"target"!=t||"LOCAL"!=n&&"REMOTE"!=n||(this.target=i[n])):(n=Object.getOwnPropertyDescriptor(s,t))&&n.set&&n.set.call(this,e[t])},v);t.DataExportOptions=a;var m,a=(m=h,l.__extends(g,m),_dp(g,"exportGrids",{get:function(){return this._grids}}),g.prototype._doDispose=function(){for(var e=this._grids.length;e--;)delete this._grids[e];this._grids=null,m.prototype._doDispose.call(this)},g.prototype._parseGrids=function(e,t){var n=t.exportGrids;if(n&&Array.isArray(n))for(var r=0,i=n.length;r<i;r++){var s,o=(o=n[r].grid).$_handler?o:o._view;(s=new h(t)).assignFrom(n[r]),o={grid:s.grid=o,sheetName:n[r].sheetName,options:s},this._grids.push(o)}else(s=new h(t)).grid=e,this._grids.push({grid:e,sheetName:t.sheetName?String(t.sheetName):"sheet1",options:s})},g);t.GridMultiExportOptions=a});t(sr),sr.DocumentTitle,sr.VIS_DEFAULT,sr.VIS_HIDDEN,sr.VIS_VISIBLE,sr.INDICATOR_DEFAULT,sr.INDICATOR_ITEM,sr.INDICATOR_ROW,sr.PIXELS_PER_CHAR,sr.ExportType,sr.ExportTarget,sr.ExportBaseOptions,sr.GridExportOptions,sr.DataExportOptions,sr.GridMultiExportOptions;var or=n(function(e,t){function r(){this.prepareProgress=10,this.indicatorNo=1}Object.defineProperty(t,"__esModule",{value:!0});var n=(r.prototype.dispose=function(){return null},r.prototype.export=function(e,t){this.grid=e},r);t.ExporterBase=n});t(or),or.ExporterBase;var ur=n(function(e,t){function i(e,t){void 0===e&&(e=null),void 0===t&&(t=!1),this._r=0,this._g=0,this._b=0,this._a=0,"string"==typeof e?i._parse(e,this,t,!1):e instanceof i?(this._r=e._r,this._g=e._g,this._b=e._b,this._a=e._a):isNaN(e)?(this._r=this._g=this._b=0,this._a=t?NaN:1):(this._a=(e>>>24)/255,this._r=(16711680&e)>>16,this._g=(65280&e)>>8,this._b=255&e)}Object.defineProperty(t,"__esModule",{value:!0});var n=p.Utils.hex,r=(i.createFrom=function(e,t){return t=i._parse(e,s,t=void 0===t?!1:t,!1),t?t instanceof i?t:s.clone():null},i.getColorStringArray=function(e){return e.trim().toLowerCase().split(/\s+|(rgba\(.*\))|(rgb\(.*\))|(pal\(.*\))/).filter(Boolean)},i.getColorCsvArray=function(e){return e.trim().toLowerCase().split(/\s*,\s*|\s+|(rgba\(.*\))|(rgb\(.*\))|(pal\(.*\))/).filter(Boolean)},i._parse=function(e,n,r,i){if(e){var s=e.length;if("#"==(e=e.trim().toLowerCase()).charAt(0))if(e=e.substr(1),6<=--s&&s<=8)n._b=p.Utils.toInt(e.substr(s-2,2),16),n._g=p.Utils.toInt(e.substr(s-4,2),16),n._r=p.Utils.toInt(e.substr(s-6,2),16),n._a=6==s?r?NaN:1:p.Utils.toInt(e.substr(0,s-6),16)/255;else{if(3!=s){if(i)throw"Invalid color value text: "+e;return!1}n._r=p.Utils.toInt(e.charAt(0)+e.charAt(0),16),n._g=p.Utils.toInt(e.charAt(1)+e.charAt(1),16),n._b=p.Utils.toInt(e.charAt(2)+e.charAt(2),16),n._a=r?NaN:1}else if(0==e.indexOf("rgba(")&&")"==e.charAt(s-1)){var u=(e=e.substring(5,s-1)).split(",");n._r=p.Utils.toInt(u[0]),n._g=p.Utils.toInt(u[1]),n._b=p.Utils.toInt(u[2]),n._a=p.Utils.toFloat(u[3])}else{if(0!=e.indexOf("rgb(")||")"!=e.charAt(s-1)){if(r&&t.StrictColors.hasOwnProperty(e))return u=t.StrictColors[e],n._r=u._r,n._g=u._g,n._b=u._b,n._a=u._a,u;if(!r&&o.hasOwnProperty(e))return u=o[e],n._r=u._r,n._g=u._g,n._b=u._b,n._a=u._a,u;if(i)throw new Error("Invalid color text: "+e);return!1}var u=(e=e.substring(4,s-1)).split(",");n._r=p.Utils.toInt(u[0]),n._g=p.Utils.toInt(u[1]),n._b=p.Utils.toInt(u[2]),n._a=r?NaN:1}return!0}return!1},i.areEqual=function(e,t){return e&&t&&e._r==t._r&&e._g==t._g&&e._b==t._b&&e._a==t._a},i.prototype.clone=function(){return new i(this)},i.prototype.copy=function(e,t){return void 0===t&&(t=1),(e=void 0===e?null:e)?(this._r=e._r,this._g=e._g,this._b=e._b,this._a=isNaN(e._a)?t:e._a):this._a=t,this},i.prototype.value=function(){return"rgba("+this._r+","+this._g+","+this._b+","+this._a+")"},i.prototype.valueWithBrightness=function(e){var t=this._r,n=this._g,r=this._b,e=Number(e);return isNaN(e)||1==e||(t=Math.floor(Math.max(0,Math.min(255,t*e))),n=Math.floor(Math.max(0,Math.min(255,n*e))),r=Math.floor(Math.max(0,Math.min(255,r*e))),255==t&&this._r<255&&(t=Math.floor((255+this._r)/2)),255==n&&this._g<255&&(n=Math.floor((255+this._g)/2)),255==r&&this._b<255&&(r=Math.floor((255+this._b)/2))),"rgba("+t+","+n+","+r+","+this._a+")"},i.prototype.argb=function(){return Math.floor(255*this._a)<<24|this._r<<16|this._g<<8|this._b},i.prototype.rgb=function(){return this._r<<16|this._g<<8|this._b},i.prototype.extractAlpha=function(){var e=this._a;return this._a=NaN,e},i.prototype.toHex=function(){return""+n(Math.floor(255*this._a))+n(this._r)+n(this._g)+n(this._b)},i.prototype.toColorHex=function(){return""+n(this._r)+n(this._g)+n(this._b)},i.prototype.toString=function(){return"#"+n(Math.floor(255*this._a))+n(this._r)+n(this._g)+n(this._b)},i.prototype.toColorString=function(){return"#"+n(this._r)+n(this._g)+n(this._b)},i),s=new(t.Color=r),o={transparent:new r("#00000000"),ltGray:new r("#d3d3d3"),ltgray:new r("#d3d3d3"),aliceblue:new r("#f0f8ff"),antiquewhite:new r("#faebd7"),aqua:new r("#00ffff"),aquamarine:new r("#7fffd4"),azure:new r("#f0ffff"),beige:new r("#f5f5dc"),bisque:new r("#ffe4c4"),black:new r("#000000"),blanchedalmond:new r("#ffebcd"),blue:new r("#0000ff"),blueviolet:new r("#8a2be2"),brown:new r("#a52a2a"),burlywood:new r("#deb887"),cadetblue:new r("#5f9ea0"),chartreuse:new r("#7fff00"),chocolate:new r("#d2691e"),coral:new r("#ff7f50"),cornflowerblue:new r("#6495ed"),cornsilk:new r("#fff8dc"),crimson:new r("#dc143c"),cyan:new r("#00ffff"),darkblue:new r("#00008b"),darkcyan:new r("#008b8b"),darkgoldenrod:new r("#b8860b"),darkgray:new r("#a9a9a9"),darkgreen:new r("#006400"),darkgrey:new r("#a9a9a9"),darkkhaki:new r("#bdb76b"),darkmagenta:new r("#8b008b"),darkolivegreen:new r("#556b2f"),darkorange:new r("#ff8c00"),darkorchid:new r("#9932cc"),darkred:new r("#8b0000"),darksalmon:new r("#e9967a"),darkseagreen:new r("#8fbc8f"),darkslateblue:new r("#483d8b"),darkslategray:new r("#2f4f4f"),darkslategrey:new r("#2f4f4f"),darkturquoise:new r("#00ced1"),darkviolet:new r("#9400d3"),deeppink:new r("#ff1493"),deepskyblue:new r("#00bfff"),dimgray:new r("#696969"),dimGray:new r("#696969"),dimgrey:new r("#696969"),dodgerblue:new r("#1e90ff"),firebrick:new r("#b22222"),floralwhite:new r("#fffaf0"),forestgreen:new r("#228b22"),fuchsia:new r("#ff00ff"),gainsboro:new r("#dcdcdc"),ghostwhite:new r("#f8f8ff"),goldenrod:new r("#daa520"),gold:new r("#ffd700"),gray:new r("#808080"),green:new r("#008000"),greenyellow:new r("#adff2f"),grey:new r("#808080"),honeydew:new r("#f0fff0"),hotpink:new r("#ff69b4"),indianred:new r("#cd5c5c"),indigo:new r("#4b0082"),ivory:new r("#fffff0"),khaki:new r("#f0e68c"),lavenderblush:new r("#fff0f5"),lavender:new r("#e6e6fa"),lawngreen:new r("#7cfc00"),lemonchiffon:new r("#fffacd"),lightblue:new r("#add8e6"),lightcoral:new r("#f08080"),lightcyan:new r("#e0ffff"),lightgoldenrodyellow:new r("#fafad2"),lightgray:new r("#d3d3d3"),lightgreen:new r("#90ee90"),lightgrey:new r("#d3d3d3"),lightpink:new r("#ffb6c1"),lightsalmon:new r("#ffa07a"),lightseagreen:new r("#20b2aa"),lightskyblue:new r("#87cefa"),lightslategray:new r("#778899"),lightslategrey:new r("#778899"),lightsteelblue:new r("#b0c4de"),lightyellow:new r("#ffffe0"),lime:new r("#00ff00"),limegreen:new r("#32cd32"),linen:new r("#faf0e6"),magenta:new r("#ff00ff"),maroon:new r("#800000"),mediumaquamarine:new r("#66cdaa"),mediumblue:new r("#0000cd"),mediumorchid:new r("#ba55d3"),mediumpurple:new r("#9370db"),mediumseagreen:new r("#3cb371"),mediumslateblue:new r("#7b68ee"),mediumspringgreen:new r("#00fa9a"),mediumturquoise:new r("#48d1cc"),mediumvioletred:new r("#c71585"),midnightblue:new r("#191970"),mintcream:new r("#f5fffa"),mistyrose:new r("#ffe4e1"),moccasin:new r("#ffe4b5"),navajowhite:new r("#ffdead"),navy:new r("#000080"),oldlace:new r("#fdf5e6"),olive:new r("#808000"),olivedrab:new r("#6b8e23"),orange:new r("#ffa500"),orangered:new r("#ff4500"),orchid:new r("#da70d6"),palegoldenrod:new r("#eee8aa"),palegreen:new r("#98fb98"),paleturquoise:new r("#afeeee"),palevioletred:new r("#db7093"),papayawhip:new r("#ffefd5"),peachpuff:new r("#ffdab9"),peru:new r("#cd853f"),pink:new r("#ffc0cb"),plum:new r("#dda0dd"),powderblue:new r("#b0e0e6"),purple:new r("#800080"),rebeccapurple:new r("#663399"),red:new r("#ff0000"),rosybrown:new r("#bc8f8f"),royalblue:new r("#4169e1"),saddlebrown:new r("#8b4513"),salmon:new r("#fa8072"),sandybrown:new r("#f4a460"),seagreen:new r("#2e8b57"),seashell:new r("#fff5ee"),sienna:new r("#a0522d"),silver:new r("#c0c0c0"),skyblue:new r("#87ceeb"),slateblue:new r("#6a5acd"),slategray:new r("#708090"),slategrey:new r("#708090"),snow:new r("#fffafa"),springgreen:new r("#00ff7f"),steelblue:new r("#4682b4"),tan:new r("#d2b48c"),teal:new r("#008080"),thistle:new r("#d8bfd8"),tomato:new r("#ff6347"),turquoise:new r("#40e0d0"),violet:new r("#ee82ee"),wheat:new r("#f5deb3"),white:new r("#ffffff"),whitesmoke:new r("#f5f5f5"),yellow:new r("#ffff00"),yellowgreen:new r("#9acd32")};t.StrictColors={transparent:new r("#00000000"),ltGray:new r("#ffd3d3d3",!0),ltgray:new r("#ffd3d3d3",!0),aliceblue:new r("#fff0f8ff",!0),antiquewhite:new r("#fffaebd7",!0),aqua:new r("#ff00ffff",!0),aquamarine:new r("#ff7fffd4",!0),azure:new r("#fff0ffff",!0),beige:new r("#fff5f5dc",!0),bisque:new r("#ffffe4c4",!0),black:new r("#ff000000",!0),blanchedalmond:new r("#ffffebcd",!0),blue:new r("#ff0000ff",!0),blueviolet:new r("#ff8a2be2",!0),brown:new r("#ffa52a2a",!0),burlywood:new r("#ffdeb887",!0),cadetblue:new r("#ff5f9ea0",!0),chartreuse:new r("#ff7fff00",!0),chocolate:new r("#ffd2691e",!0),coral:new r("#ffff7f50",!0),cornflowerblue:new r("#ff6495ed",!0),cornsilk:new r("#fffff8dc",!0),crimson:new r("#ffdc143c",!0),cyan:new r("#ff00ffff",!0),darkblue:new r("#ff00008b",!0),darkcyan:new r("#ff008b8b",!0),darkgoldenrod:new r("#ffb8860b",!0),darkgray:new r("#ffa9a9a9",!0),darkgreen:new r("#ff006400",!0),darkgrey:new r("#ffa9a9a9",!0),darkkhaki:new r("#ffbdb76b",!0),darkmagenta:new r("#ff8b008b",!0),darkolivegreen:new r("#ff556b2f",!0),darkorange:new r("#ffff8c00",!0),darkorchid:new r("#ff9932cc",!0),darkred:new r("#ff8b0000",!0),darksalmon:new r("#ffe9967a",!0),darkseagreen:new r("#ff8fbc8f",!0),darkslateblue:new r("#ff483d8b",!0),darkslategray:new r("#ff2f4f4f",!0),darkslategrey:new r("#ff2f4f4f",!0),darkturquoise:new r("#ff00ced1",!0),darkviolet:new r("#ff9400d3",!0),deeppink:new r("#ffff1493",!0),deepskyblue:new r("#ff00bfff",!0),dimgray:new r("#ff696969",!0),dimGray:new r("#ff696969",!0),dimgrey:new r("#ff696969",!0),dodgerblue:new r("#ff1e90ff",!0),firebrick:new r("#ffb22222",!0),floralwhite:new r("#fffffaf0",!0),forestgreen:new r("#ff228b22",!0),fuchsia:new r("#ffff00ff",!0),gainsboro:new r("#ffdcdcdc",!0),ghostwhite:new r("#fff8f8ff",!0),goldenrod:new r("#ffdaa520",!0),gold:new r("#ffffd700",!0),gray:new r("#ff808080",!0),green:new r("#ff008000",!0),greenyellow:new r("#ffadff2f",!0),grey:new r("#ff808080",!0),honeydew:new r("#fff0fff0",!0),hotpink:new r("#ffff69b4",!0),indianred:new r("#ffcd5c5c",!0),indigo:new r("#ff4b0082",!0),ivory:new r("#fffffff0",!0),khaki:new r("#fff0e68c",!0),lavenderblush:new r("#fffff0f5",!0),lavender:new r("#ffe6e6fa",!0),lawngreen:new r("#ff7cfc00",!0),lemonchiffon:new r("#fffffacd",!0),lightblue:new r("#ffadd8e6",!0),lightcoral:new r("#fff08080",!0),lightcyan:new r("#ffe0ffff",!0),lightgoldenrodyellow:new r("#fffafad2",!0),lightgray:new r("#ffd3d3d3",!0),lightgreen:new r("#ff90ee90",!0),lightgrey:new r("#ffd3d3d3",!0),lightpink:new r("#ffffb6c1",!0),lightsalmon:new r("#ffffa07a",!0),lightseagreen:new r("#ff20b2aa",!0),lightskyblue:new r("#ff87cefa",!0),lightslategray:new r("#ff778899",!0),lightslategrey:new r("#ff778899",!0),lightsteelblue:new r("#ffb0c4de",!0),lightyellow:new r("#ffffffe0",!0),lime:new r("#ff00ff00",!0),limegreen:new r("#ff32cd32",!0),linen:new r("#fffaf0e6",!0),magenta:new r("#ffff00ff",!0),maroon:new r("#ff800000",!0),mediumaquamarine:new r("#ff66cdaa",!0),mediumblue:new r("#ff0000cd",!0),mediumorchid:new r("#ffba55d3",!0),mediumpurple:new r("#ff9370db",!0),mediumseagreen:new r("#ff3cb371",!0),mediumslateblue:new r("#ff7b68ee",!0),mediumspringgreen:new r("#ff00fa9a",!0),mediumturquoise:new r("#ff48d1cc",!0),mediumvioletred:new r("#ffc71585",!0),midnightblue:new r("#ff191970",!0),mintcream:new r("#fff5fffa",!0),mistyrose:new r("#ffffe4e1",!0),moccasin:new r("#ffffe4b5",!0),navajowhite:new r("#ffffdead",!0),navy:new r("#ff000080",!0),oldlace:new r("#fffdf5e6",!0),olive:new r("#ff808000",!0),olivedrab:new r("#ff6b8e23",!0),orange:new r("#ffffa500",!0),orangered:new r("#ffff4500",!0),orchid:new r("#ffda70d6",!0),palegoldenrod:new r("#ffeee8aa",!0),palegreen:new r("#ff98fb98",!0),paleturquoise:new r("#ffafeeee",!0),palevioletred:new r("#ffdb7093",!0),papayawhip:new r("#ffffefd5",!0),peachpuff:new r("#ffffdab9",!0),peru:new r("#ffcd853f",!0),pink:new r("#ffffc0cb",!0),plum:new r("#ffdda0dd",!0),powderblue:new r("#ffb0e0e6",!0),purple:new r("#ff800080",!0),rebeccapurple:new r("#ff663399",!0),red:new r("#ffff0000",!0),rosybrown:new r("#ffbc8f8f",!0),royalblue:new r("#ff4169e1",!0),saddlebrown:new r("#ff8b4513",!0),salmon:new r("#fffa8072",!0),sandybrown:new r("#fff4a460",!0),seagreen:new r("#ff2e8b57",!0),seashell:new r("#fffff5ee",!0),sienna:new r("#ffa0522d",!0),silver:new r("#ffc0c0c0",!0),skyblue:new r("#ff87ceeb",!0),slateblue:new r("#ff6a5acd",!0),slategray:new r("#ff708090",!0),slategrey:new r("#ff708090",!0),snow:new r("#fffffafa",!0),springgreen:new r("#ff00ff7f",!0),steelblue:new r("#ff4682b4",!0),tan:new r("#ffd2b48c",!0),teal:new r("#ff008080",!0),thistle:new r("#ffd8bfd8",!0),tomato:new r("#ffff6347",!0),turquoise:new r("#ff40e0d0",!0),violet:new r("#ffee82ee",!0),wheat:new r("#fff5deb3",!0),white:new r("#ffffffff",!0),whitesmoke:new r("#fff5f5f5",!0),yellow:new r("#ffffff00",!0),yellowgreen:new r("#ff9acd32",!0)}});t(ur),ur.Color,ur.StrictColors;var ar=n(function(e,t){function r(){}function s(e,t){this._grid=e,this._exportOptions=t,this._exportLayout=t.exportLayout,this._dataColumns=[],this._sparkColumns={},this.parse()}function o(){}function u(){}Object.defineProperty(t,"__esModule",{value:!0});var n=(r.parseDocumentStyles=function(e){for(var t,n,r={},i=e.styleSheets,s=0,o=i.length;s<o;s++){t=i[s];try{t.rules?n=t.rules:t.cssRules&&(n=t.cssRules)}catch(e){continue}if(n)for(var u=n.length;u--;){var a,f=(a=n[u]).selectorText;if(f)if(-1<f.indexOf(","))for(var l=f.split(","),c=l.length;c--;){var h=l[c].trim();h&&(r[h]=a.style)}else r[a.selectorText]=a.style}}return r},r.extendCssStyle=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];"inherit"==e[i]||p.Utils.included(i,"background-color")&&p.Utils.included(e[i],"none","initial","unset")||(t[i]||(t[t.length]=i,t.length++),t[i]=e[i])}},r.$_getSelectorStyle=function(e,t){return e[t]},r.getSelectorStyle=function(e,t){if(r.prefix){var n=[],i={length:0};n.push(r.$_getSelectorStyle(e,t)),n.push(r.$_getSelectorStyle(e,r.prefix+t));for(var s=0,o=n.length;s<o;s++)n[s]&&r.extendCssStyle(n[s],i);return i}return r.$_getSelectorStyle(e,t)},r);t.CssFactory=n;var i=(s.prototype.dispose=function(){this._headerCells=null,this._dataCells=null,this._dataColumns=null,this._sparkColumns=null,this._exportLayout=null,this._layout=this._layout&&this._layout.dispose()},_dp(s,"grid",{get:function(){return this._grid}}),_dp(s,"colCount",{get:function(){var e=this._layout&&this._layout._dataCells;return e&&e.length?e[0].length:0}}),_dp(s,"headerRowCount",{get:function(){return(this._layout&&this._layout._headerCells).length}}),_dp(s,"dataRowCount",{get:function(){return(this._layout&&this._layout._dataCells).length}}),_dp(s,"sparkColumns",{get:function(){return this._sparkColumns}}),_dp(s,"documentCssStyles",{get:function(){return this._documentCssStyles}}),_dp(s,"groupModel",{get:function(){return this._groupModel}}),s.prototype.getHeader=function(e,t){return this._headerCells[e][t]},s.prototype.getItem=function(e,t){return this._dataCells[e][t]},s.prototype.getFooterItem=function(e,t){return this._footerCells[e][t]},s.prototype.getSummaryItem=function(e,t){return this._summaryCells[e][t]},s.prototype.clearDataSpanned=function(){for(var e=this._dataCells,t=0;t<e.length;t++)for(var n=0;n<e[t].length;n++)e[t][n].spanned=!1},s.prototype.prepareLayout=function(){var e,t=this.grid,n=this._exportOptions,r=t.activeCellLayout;if(n.linear){for(var i=r.getDataColumns(!1),s=[],o=0;o<=i.length-1;o++){var u=i[o];((u.visible&&u.layout.visible||n.allColumns)&&n.hideColumns.indexOf(u.name)<0||0<=n.showColumns.indexOf(u.name))&&s.push({column:u.name,width:u.layout.domWidth})}e=(new Ft.GridCellLayout(t)).load(s)}else e=n.exportLayout?(new Ft.GridCellLayout(t)).load(n.exportLayout):(new Ft.GridCellLayout(t)).load(t.activeCellLayout.getLayout(!0,n.applyFitStyle,n.allColumns,n.showColumns,n.hideColumns));return e},s.prototype.parse=function(){var e=this._grid,t=this._layout=this.prepareLayout(),r=this._exportOptions.stylePrefix;n.prefix=r?r.trim()+" ":void 0,t.$_refresh2(e._columns,e.displayOptions.minCellWidth),t.$_prepareLayout(e,e.fixedOptions.colCount,e.fixedOptions.rightCount),t.$_prepareMerges(e),this._setCellInfo(t._headerCells,this._headerCells=[]),this._setCellInfo(t._dataCells,this._dataCells=[]),this._setFooterInfo(t._dataCells,e.footers.visibleCount,this._footerCells=[]),this._setFooterInfo(t._dataCells,e.headerSummaries.visibleCount,this._summaryCells=[]),this._documentCssStyles=n.parseDocumentStyles(e.doc),this._setDataColumns(t._dataCells),this._setSparkInfo(this._dataCells)},s.prototype._setCellInfo=function(e,t){for(var n=0;n<e.length;n++){for(var r=[],i=0;i<e[n].length;i++)r.push({layout:e[n][i],spanned:!1});t.push(r)}},s.prototype._setFooterInfo=function(e,t,n){for(var r=0;r<t;r++)for(var i=0;i<e.length;i++){for(var s=[],o=0;o<e[i].length;o++)s.push({footerIndex:r,layout:e[i][o],spanned:!1});n.push(s)}},s.prototype.setGroupFooterItms=function(e,t,n){this._groupModel=e;var r,i,s=this._groupFooterCells=[],o=this._dataCells,u=!1;0<e.footerCount||(r=e.provider._expandedAdornments,i=e.provider._collapsedAdornments,u=n?t&&!e.expanded&&p.Utils.included(i,c.RowGroupAdornments.SUMMARY,c.RowGroupAdornments.FOOTER):(u=e.expanded&&r===c.RowGroupAdornments.SUMMARY)||!t&&!e.expanded&&p.Utils.included(i,c.RowGroupAdornments.SUMMARY,c.RowGroupAdornments.FOOTER));for(var a=u?e.allFooterCount:e.footerCount,f=0;f<a;f++)for(var l=u?e._allFooters[f]:e.getFooter(f),h=0;h<o.length;h++){for(var d=[],v=0;v<o[h].length;v++)d.push({footerIndex:l.footerIndex,layout:o[h][v].layout,spanned:!1});s.push(d)}},s.prototype.getGroupFooterCells=function(){return this._groupFooterCells},s.prototype._setDataColumns=function(e){var t;this._dataColumns=[];for(var n=0,r=e.length;n<r;n++){for(var i=[],s=0,o=e[n].length;s<o;s++)(t=e[n][s]).isProxy&&(t=t.source),i.push(t.firstColumn);this._dataColumns.push(i)}},s.prototype._setSparkInfo=function(e){var t=this.documentCssStyles;this._sparkColumns=[];for(var r=0,i=e.length;r<i;r++)for(var s,o,u,a,f,l,c,h,p,d,v,m,g,y=0,b=e[r].length;y<b;y++)(g=(m=(v=e[r][y]).layout)instanceof Ft.CellLayoutColumnItem?m.firstColumn:null)instanceof jt.SeriesColumn&&(d=g.renderer)&&on.SparkChartRenderer.interfaced(d)&&(o=g.fields,s=g.grid,(p=0<o.length&&function(e,t,n,r){var i={start:void 0,end:void 0,row:void 0},s=t[0],t=t[t.length-1],o=e.columnByField(s),u=e.columnByField(t);if(!o||!u)return null;for(var a=0,f=r.length;a<f;a++)for(var l=0,c=r[a].length;l<c;l++)o==r[a][l]&&(i.start=l,i.row=a-n),u==r[a][l]&&(i.end=l);return i}(s,o,r,this._dataColumns))&&(c=d.firstStyle,h=d.lastStyle,f=d.highStyle,l=d.lowStyle,m="",o=s=void 0,o=on.SparkLineRenderer.interfaced(d)?(m="line",h=h||on.SparkLineRenderer.LAST_STYLE,f=f||on.SparkLineRenderer.HIGH_STYLE,l=l||on.SparkLineRenderer.LOW_STYLE,s=(u=d.pointStyle?n.getSelectorStyle(t,"."+d.pointStyle):void 0)?(new ur.Color(u.fill)).toHex():void 0,(a=n.getSelectorStyle(t,"."+on.SparkLineRenderer.CHART_STYLE))?(new ur.Color(a.stroke)).toHex():void 0):(u=void 0,on.SparkColumnRenderer.interfaced(d)?(m="column",u=on.SparkColumnRenderer.CHART_STYLE,h=h||on.SparkColumnRenderer.LAST_STYLE,f=f||on.SparkColumnRenderer.HIGH_STYLE,l=l||on.SparkColumnRenderer.LOW_STYLE):(m="stacked",u=on.SparkWinLossRenderer.CHART_STYLE),a=n.getSelectorStyle(t,"."+u),(new ur.Color(a.fill)).toHex()),f=f?n.getSelectorStyle(t,"."+f):void 0,l=l?n.getSelectorStyle(t,"."+l):void 0,c=c?n.getSelectorStyle(t,"."+c):void 0,h=h?n.getSelectorStyle(t,"."+h):void 0,p={type:m,colors:{colorHigh:f&&f.fill?(new ur.Color(f.fill)).toHex():void 0,colorLow:l&&l.fill?(new ur.Color(l.fill)).toHex():void 0,colorFirst:c&&c.fill?(new ur.Color(c.fill)).toHex():void 0,colorLast:h&&h.fill?(new ur.Color(h.fill)).toHex():void 0,colorMarkers:s,colorSeries:o},sparkLines:{},range:p},v.sparkLineGroup=p,this._sparkColumns[g.$_hash]=v))},s);t.ExportPreparer=i,o.encode=function(e){var t,n,r,i,s,u,a="",f=0;for(e=o.utf8_encode(e);f<e.length;)r=(u=e.charCodeAt(f++))>>2,i=(3&u)<<4|(t=e.charCodeAt(f++))>>4,s=(15&t)<<2|(n=e.charCodeAt(f++))>>6,u=63&n,isNaN(t)?s=u=64:isNaN(n)&&(u=64),a=a+this._keyStr.charAt(r)+this._keyStr.charAt(i)+this._keyStr.charAt(s)+this._keyStr.charAt(u);return a},o.decode=function(e){var t,n,r,i,s,u,a="",f=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");f<e.length;)r=o._keyStr.indexOf(e.charAt(f++)),t=(15&(i=o._keyStr.indexOf(e.charAt(f++))))<<4|(s=o._keyStr.indexOf(e.charAt(f++)))>>2,n=(3&s)<<6|(u=o._keyStr.indexOf(e.charAt(f++))),a+=String.fromCharCode(r<<2|i>>4),64!=s&&(a+=String.fromCharCode(t)),64!=u&&(a+=String.fromCharCode(n));return a=o.utf8_decode(a)},o.utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):(127<r&&r<2048?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t},o.utf8_decode=function(e){for(var t,n,r="",i=0,s=0,o=e.length;i<o;)(t=e.charCodeAt(i))<128?(r+=String.fromCharCode(t),i++):191<t&&t<224?(s=e.charCodeAt(i+1),r+=String.fromCharCode((31&t)<<6|63&s),i+=2):(s=e.charCodeAt(i+1),n=e.charCodeAt(i+2),r+=String.fromCharCode((15&t)<<12|(63&s)<<6|63&n),i+=3);return r},i=o,t.Base64=i,u.convertNumberFormat=function(e){return 0<(e=0<e.indexOf(";")?e.split(";")[0]:e).indexOf(".#")?e.replace(".#",".0"):e},u.convertDateFormat=function(e){for(var t="",n=e.length,r=0;r<n;r++){var i=e.charAt(r);switch(i){case"y":case"d":case"m":case"s":case":":t+=i;break;case"M":t+="m";break;case"a":t+="AM/PM";break;case"H":t+="h",(n-1<=r||"H"!=e.charAt(r+1))&&(t+="h");break;case"h":0!=r&&"h"==e.charAt(r-1)||(t+="h");break;case"S":break;case".":case"/":case"-":case" ":(n-1<=r||"S"!=e.charAt(r+1))&&(t=t+"\\"+i);break;default:t=t+'"'+i+'"'}}return t},i=u,t.ExcelFormatConverter=i});t(ar),ar.CssFactory,ar.ExportPreparer,ar.Base64,ar.ExcelFormatConverter;var fr=n(function(e,t){function i(){return n.call(this)||this}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=or.ExporterBase,l.__extends(i,n),i.prototype.dispose=function(){return n.prototype.dispose.call(this),null},i.prototype.export=function(e,t){n.prototype.export.call(this,e,t);var r=this._exportOptions=t;this._cols=[],t=e.collectColumns(!0,!0,!0),this._cols=t.filter(function(e){return e instanceof jt.ValueColumn}),this.indicator=r.indicatorVisible(e)?e.rowIndicator:null,this.header=r.headerVisible(e)?e.header:null,this.headerSummary=r.headerSummaryVisible(e)?e.headerSummary:null,this.footer=r.footerVisible(e)?e.footer:null,this.indicatorHead=e.rowIndicator.headText||"No",this.indicatorFoot=e.rowIndicator.footText||"",this.indicatorSummary=e.rowIndicator.sumText,this.done=function(){this.save()},this.buildBook()},i.prototype.prepare=function(){},i.prototype.finallize=function(){},i.prototype.buildBook=function(){this.buildSheet(this.grid)},i.prototype.buildSheet=function(e){this._rows=[],this.header&&this.buildHeader(e),this.headerSummary&&this.buildSummaryItem(e,!1),this.buildItems(e),this.footer&&this.buildSummaryItem(e,!0),this.done()},i.prototype.addQuatation=function(e,t){var n,r;return null!=e&&(this._exportOptions&&(n=(r=this._exportOptions).replaceCrText,r=r.replaceLfText,n&&e&&(e=e.replace(/\n/g,n)),r&&e&&(e=e.replace(/\r/g,r))),(t===c.ValueType.TEXT||0<=e.indexOf("\n")||0<=e.indexOf(",")||0<=e.indexOf('"'))&&(e='"'+e.replace(/\"/g,'""')+'"')),null===e?"":e},i.prototype.buildHeader=function(e){var t=[],n=this._cols;this.indicator&&t.push(this.indicatorHead);for(var r=n.length,i=0;i<r;i++){var s=n[i];t.push(this.addQuatation(s.header.displayText))}this._rows.push(t.join(","))},i.prototype.buildSummaryItem=function(e,t){var n=this._exportOptions,r=t?e.footers:e.headerSummaries;if(r.visible)for(var i=r.visibleCount,s=0;s<i;s++){var o=[];this.indicator&&o.push(0==s?this.indicatorFoot:"");for(var u=r.getVisible(s),a=0,f=this._cols.length;a<f;a++){var l=this._cols[a],c=u.getCell(l.layout),h=c.getSummary(),p=c.value,p="number"==typeof p?isNaN(p)?c.text:String(p):p instanceof Date?!n.datetimeCallback||(p=n.datetimeCallback(-1,l.name,p))instanceof Date?_.DateTimeConverter.Default.getText(p):p:null==p?c.text||h.text:String(p);o.push(this.addQuatation(p))}this._rows.push(o.join(","))}},i.prototype.buildItems=function(e){for(var t=this.allItems?this.allItems.length:e.itemSource.itemCount,n=this.allItems,r=0;r<t;r++){var i=n?n[r]:e.getItem(r);this.buildRow(e,i)}},i.prototype.buildRow=function(e,t){var n=this._exportOptions,r=[];this.indicator&&(n=n.showIndicatorRow(e)?t.dataRow:this.indicatorNo++,r.push(n.toString()));for(var i=0,s=this._cols.length;i<s;i++){var o,u=this._cols[i],a=void 0;o=void 0,u instanceof jt.DataColumn&&(o=(a=u.getField())?(u=It.DummyCellIndex.tempItem(e,t,u),e.getDisplayText(u)):""),r.push(this.addQuatation(o,a&&a.dataType))}this._rows.push(r.join(","))},i.prototype.buildGroupHeader=function(e,t){},i.prototype.buildGroupFooter=function(e,t){},i.prototype.buildMergedGroupHeader=function(e,t){},i.prototype.buildMergedGroupFooter=function(e,t){},i.prototype.buildTreeSheet=function(e){this._rows=[],this.header&&this.buildHeader(e),this.headerSummary&&this.buildSummaryItem(e,!1),this.buildTreeItems(e),this.footer&&this.buildSummaryItem(e,!0),this.done()},i.prototype.buildTreeItems=function(e){for(var t=this.allItems?this.allItems.length:e.itemCount,n=this.allItems,r=0;r<t;r++){var i=n?n[r]:e.getItem(r);if(!(i instanceof Ot.TreeItem))throw"Unkonw tree item type";this.buildTreeRow(e,i)}},i.prototype.buildTreeRow=function(e,t){this.buildRow(e,t)},i.prototype.save=function(){var e=this._exportOptions,t=e.fileName,n="\ufeff"+this._rows.join("\n");e.target==sr.ExportTarget.LOCAL?this.saveLocal(t,n):this.saveServer(t,n)},i.prototype.saveLocal=function(e,t){var n=this.grid.doc,r=p.getDocWin(n),t=new Blob([t],{type:"text/csv charset=UTF-8"});r.navigator.msSaveOrOpenBlob?r.navigator.msSaveOrOpenBlob(t,e):r.navigator.msSaveBlob?r.navigator.msSaveBlob(t,e):(r=n.createElement("a"),n.body.appendChild(r),t=URL.createObjectURL(t),r.href=t,r.download=e,r.click(),n.body.removeChild(r))},i.prototype.saveServer=function(e,t){var n=this.grid.doc,r='<form name="tempForm" action="'+this._exportOptions.url+'" method="post">';r+='<input type="hidden" name="fileName" value = "'+e+'"/>',r+='<input type="hidden" name="data" value = "'+ar.Base64.encode(t)+'"/>',r+='<input id="submitBtn" type="submit"/>',r+="</form>",t=n.createElement("div"),t.innerHTML=r,n.body.appendChild(t),n.getElementById("submitBtn").click(),n.body.removeChild(t)},i);t.GridCsvExporter=r});t(fr),fr.GridCsvExporter;var lr=n(function(e,t){function r(e){return n.test(e)?e.replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\"/g,"&quot;"):e}function s(){}Object.defineProperty(t,"__esModule",{value:!0});var n=/\<|\>|\&|\"/,i=(s.createDocument=function(e,t){var n,r={name:e,attrs:{}};for(n in t)r.attrs[n]=t[n];return r},s.removeItem=function(e){if(e.texts=null,e.attrs=null,e.childs)for(var t=e.childs.length;t--;)s.removeItem(e.childs[t]),delete e.childs[t];e.childs=null},s.addChild=function(e,t,n,i){return n={name:t,attrs:n},i&&s.addText(n,r(i)),s.addChildElement(e,n),n},s.addChildElement=function(e,t){e.childs||(e.childs=[]),e.childs.push(t)},s.addProperty=function(e,t,n){e.attrs||(e.attrs={}),e.attrs[t]=r(n)},s.addText=function(e,t){e.texts||(e.texts=[]),e.texts.push(t)},s.toString=function(e){var t,n="<"+e.name;for(t in e.attrs)n+=" "+t+'="'+e.attrs[t]+'"';if(e.childs||e.texts){if(n+=">",e.texts)for(var r=0,i=e.texts.length;r<i;r++)n+=e.texts[r];if(e.childs)for(r=0,i=e.childs.length;r<i;r++)n+=s.toString(e.childs[r]);n+="</"+e.name+">"}else n+="/>";return n},s);t.TextXmlManager=i});t(lr),lr.TextXmlManager;var cr=n(function(e,t){function r(){}function s(){this._nextId=0,this._count=0,this._stringMap={},this._strings=[]}function u(e){this._id=e}function f(){this._items=[],this._indexer=0}function d(e,t,n,r,i,s,o){return void 0===t&&(t="Tahoma"),void 0===n&&(n=10),void 0===r&&(r="ff000000"),e=c.call(this,e)||this,e._bold=void 0,e._italic=void 0,e._underline=void 0,e._name=t,e._size=n,e._color=r,e._bold=i,e._italic=s,e._underline=o,e}function g(e){var t=v.call(this)||this,e=p.getWin(e).getComputedStyle(e);return t._defFontSize=t.$_convertUnit(e.fontSize||"16px"),t}function w(e,t,n,r,i,s,o){return void 0===t&&(t="solid"),void 0===r&&(r=0),void 0===i&&(i=!1),void 0===o&&(o=90),e=y.call(this,e)||this,e._pattern=t,e._color=n,e._linear=i,e._color2=s,e._degree=o,e._tint=r,e}function x(){return null!==E&&E.apply(this,arguments)||this}function C(e,t,n,r){return void 0===n&&(n=1),void 0===r&&(r="none"),e=T.call(this,e)||this,e._color=t,e._width=n,e._type=r,e}function A(){return null!==k&&k.apply(this,arguments)||this}function D(e,t,n,r,i){return e=O.call(this,e)||this,e._left=t,e._top=n,e._right=r,e._bottom=i,e}function B(e){var t=P.call(this)||this;return t._lines=e,t}function I(e,t,n,r,i,s,o,u,a){return void 0===i&&(i=!1),void 0===s&&(s=0),t=j.call(this,t)||this,t._collection=e,t._horzAlign=n,t._vertAlign=r,t._wrapText=i,t._formatId=s,t._font=o,t._fill=u,t._border=a,t}function U(e,t,n){var r=q.call(this)||this;return r._fonts=e,r._fills=t,r._borders=n,r}function W(e){this._numberFmts=[],this._fonts=new m(e),this._fills=new S,this._lines=new L,this._borders=new H(this._lines),this._styles=new R(this._fonts,this._fills,this._borders),this._fills.create("none"),this._fills.create("gray125"),this._borders.create(),this._fonts.create(),this._styles.create()}function $(e,t,n,r){return e=X.call(this,e)||this,e._width=t,e._style=n,e._hidden=r,e}function Q(){return null!==J&&J.apply(this,arguments)||this}function Y(e,t,r,i,s,o){void 0===s&&(s=""),this._range=n.toRange(t,e),this._style=r,this._type=s,this._fomula=o,this._value=i}function tt(e,t,n){this._row=0,this._sheet=e,this._book=e.workbook,this._index=t,this._height=n,this._cells=[]}function rt(e,t,n,r){this._mergeCount=0,this._outlineLevel=0,this._dataRows=[],this._sparkGroups={},this._firstRow=-1,this._lastRow=-1,this._fixedCol=0,this._fixedRow=0,this._book=e,this._index=t,this._name=n,this._attrs=r,this._columns=new K,this._prepare()}function it(e){this._sheet_indexer=3,this._parts={},this._parts={},this._strings=new i,this._styles=new z(e),this._sheets=[],this._preapreTemplateParts()}Object.defineProperty(t,"__esModule",{value:!0});var n=(r.toColCaption=function(e){for(var t="";0<=e;)t=String.fromCharCode(e%26+65)+t,e=Math.floor(e/26)-1;return t},r.toRange=function(e,t,n,i,s){return void 0===i&&(i=1),void 0===s&&(s=1),t+=1,(n=void 0===n?!1:n)?r.toColCaption(e)+t+":"+r.toColCaption(e+i-1)+(t+s-1):r.toColCaption(e)+t},r.XML_HEAD_STRING='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>',r);t.ExcelUtil=n;var i=(s.prototype.dispose=function(){for(var e,t=this._strings.length;t--;)delete this._strings[t];for(e in this._strings=null,this._stringMap)delete this._stringMap[e];this._stringMap=null},_dp(s,"count",{get:function(){return this._count}}),s.prototype.uniqueCount=function(){return this._nextId},s.prototype.add=function(e){this._count++;var t=this._stringMap[e];return void 0===t&&(t=this._nextId++,this._stringMap[e]=t,this._strings[t]=e),t},s.prototype.getIndex=function(e){return this._stringMap[e]},s.prototype.createPart=function(){var e=lr.TextXmlManager.createDocument("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"});lr.TextXmlManager.addProperty(e,"count",this._count.toString()),lr.TextXmlManager.addProperty(e,"uniqueCount",this._nextId.toString());for(var t=/^\s|\s$|\r|\n|\r\n/,r=0,i=this._strings.length;r<i;r++){var s=lr.TextXmlManager.addChild(e,"si"),s=lr.TextXmlManager.addChild(s,"t",null,this._strings[r]);t.test(this._strings[r])&&lr.TextXmlManager.addProperty(s,"xml:space","preserve")}var o=lr.TextXmlManager.toString(e);return n.XML_HEAD_STRING+o},s),o=(u.EqualsById=function(e,t){return!e&&!t||!(!e&&t||e&&!t)&&e._id==t.id},_dp(u,"id",{get:function(){return this._id}}),u.prototype.dispose=function(){},u),a=(f.prototype.dispose=function(){for(var e=this._items.length;e--;)this._items[e].dispose(),this._items[e]=null,delete this._items[e]},f.prototype.getIndexer=function(){return this._indexer++},f.prototype.create=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._items.length;n--;){var r=this._items[n];if(r.equals.apply(r,e))return r}var i=this.createInstance.apply(this,e);return this._items.push(i),i},f.prototype.createUnique=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.createInstance.apply(this,e);return this._items.push(n),n},f),c,h=(c=o,l.__extends(d,c),d.prototype.assignFrom=function(e){this._name=this._name||e._name,this._size=this._size||e._size,this._color=this._color||e._color,this._bold=(null==this._bold?e:this)._bold,this._italic=(null==this._italic?e:this)._italic,this._underline=(null==this._underline?e:this)._underline},d.prototype.equalsObj=function(e){return this._name==e._name&&this._size==e._size&&this._color==e._color&&this._bold==e._bold&&this._italic==e._italic&&this._underline==e._underline},d.prototype.equals=function(e,t,n,r,i,s){return void 0===t&&(t=10),void 0===n&&(n="ff000000"),void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===s&&(s=!1),this._name==(e=void 0===e?"Tahoma":e)&&this._size==t&&this._color==n&&this._bold==r&&this._italic==i&&this._underline==s},d.prototype.toXml=function(e,t){et.XmlUtils.addChildWithAttr(e,t,"sz","val",this._size||10),et.XmlUtils.addChildWithAttr(e,t,"name","val",this._name||"Calibri"),et.XmlUtils.addChildWithAttr(e,t,"color","rgb",this._color||"ff000000"),et.XmlUtils.addChildWithAttr(e,t,"b","val",this._bold?"true":"false"),et.XmlUtils.addChildWithAttr(e,t,"i","val",this._italic?"true":"false"),this._underline&&et.XmlUtils.addChild(e,t,"u")},d),v,m=(v=a,l.__extends(g,v),g.prototype.createInstance=function(e,t,n,r,i,s){return new h(this.getIndexer(),e,t,n,r,i,s)},g.prototype.createFromCss=function(e){var t=(t=e["font-family"])?(t=-1<t.indexOf(",")?t.split(",")[0]:t).replace(/\"/g,""):void 0,n=this.$_convertUnit(e["font-size"]),n=isNaN(n)?void 0:72*n/96,r=(r=e.color)&&("#"==r.charAt(0)?e.color:(new ur.Color(r)).toColorHex()),i="bold"==e["font-weight"],s="italic"==e["font-style"],e="underline"==e["font-decoration"];return this.create(t,n,r,i,s,e)},g.prototype.toXml=function(e,t){for(var n=this._items.length,r=0;r<n;r++){var i=et.XmlUtils.addChild(e,t,"font");this._items[r].toXml(e,i)}et.XmlUtils.setAttr(t,"count",n)},g.prototype.$_convertUnit=function(e){if(null!=e)return"string"==typeof e?0<e.indexOf("px")?parseFloat(e):0<e.indexOf("pt")?Math.round(1.3333*parseFloat(e)):0<e.indexOf("em")?parseFloat(e)*this._defFontSize:12:parseInt(e)},g),y,b=(y=o,l.__extends(w,y),w.prototype.assignFrom=function(e){this._pattern=e._pattern||this._pattern,this._color=e._color||this._color,this._tint=e._tint||this._tint,this._linear=(null==e._linear?this:e)._linear,this._color2=e._color2||this._color2,this._degree=e._degree||this._degree},w.prototype.equalsObj=function(e){return this._pattern==e._pattern&&this._color==e._color&&this._color2==e._color2&&this._linear==e._linear&&this._degree==e._degree&&this._tint==e._tint},w.prototype.equals=function(e,t,n,r,i,s){return void 0===n&&(n=0),void 0===r&&(r=!1),void 0===s&&(s=90),this._pattern==(e=void 0===e?"solid":e)&&this._color==t&&this._color2==i&&this._linear==r&&this._degree==s&&this._tint==n},w.prototype.toXml=function(e,t){var n,r,i,s=this._tint||0;this._linear?(n=et.XmlUtils.addChildWithAttr(e,t,"gradientFill","degree",this._degree||90),r=et.XmlUtils.addChildWithAttr(e,n,"stop","position","0"),i=et.XmlUtils.addChild(e,r,"color"),et.XmlUtils.setAttr(i,"rgb",this._color),et.XmlUtils.setAttr(i,"tint",this._tint||0),r=et.XmlUtils.addChildWithAttr(e,n,"stop","position","1"),i=et.XmlUtils.addChild(e,r,"color"),et.XmlUtils.setAttr(i,"rgb",this._color2),et.XmlUtils.setAttr(i,"tint",s)):(t=et.XmlUtils.addChildWithAttr(e,t,"patternFill","patternType",this._pattern.toString()),"none"!=this._pattern&&null!=this._color&&(t=et.XmlUtils.addChild(e,t,"fgColor"),et.XmlUtils.setAttr(t,"rgb",this._color),et.XmlUtils.setAttr(t,"tint",s)))},w),E,S=(E=a,l.__extends(x,E),x.prototype.createInstance=function(e,t,n,r,i,s){return new b(this.getIndexer(),e,t,n,r,i,s)},x.prototype.createFromCss=function(e){var t=e["background-image"],n="linear-gradient(",r=t?t.indexOf(n):-1;if(-1<r){var i=this._splitEscape(t.slice(r+n.length,t.length-1)),r=void 0,n=void 0,t=void 0;return t=((t=2<i.length?(r=new ur.Color(i[1]),n=new ur.Color(i[2]),parseInt(i[0])):(r=new ur.Color(i[0]),n=new ur.Color(i[1]),180))+270)%360,i=1-r._a,this.create("none",r.toHex(),i,!0,n.toHex(),t)}if(e["background-color"])return e=new ur.Color(e["background-color"]),i=1-e._a,e?this.create("solid",e.toHex(),i):this._items[0]},x.prototype.toXml=function(e,t){for(var n=this._items.length,r=0;r<n;r++){var i=et.XmlUtils.addChild(e,t,"fill");this._items[r].toXml(e,i)}et.XmlUtils.setAttr(t,"count",n)},x.prototype._splitEscape=function(e,t){if(void 0===t&&(t=","),e){for(var n=[],r=!1,i="",s=0;s<e.length;s++){var o=e[s];o!=t||r?" "==o&&!r||(i+=o):(n.push(i),i=""),"("==o&&(r=!0),")"==o&&(r=!1)}return i&&n.push(i),n}return null},x),T,N=(T=o,l.__extends(C,T),C.equalsObj=function(e,t){return!e&&!t||!(!e&&t||e&&!t)&&e._color==t._color&&e._type==t._type&&e._width==t._width},C.prototype.equals=function(e,t,n){return void 0===t&&(t=1),void 0===n&&(n="none"),this._color==e&&this._width==t&&this._type==n},C.prototype.toXml=function(e,t){var n=this._width<=1?"thin":this._width<=2?"medium":"thick";et.XmlUtils.setAttr(t,"style",n),et.XmlUtils.addChildWithAttr(e,t,"color","rgb",this._color)},C),k,L=(k=a,l.__extends(A,k),A.prototype.createInstance=function(e,t,n){return new N(this.getIndexer(),e,t,n)},A.prototype.createFromCss=function(e,t){var n=e[t+"-style"];if(n&&"none"!=n){var r=new ur.Color(e[t+"-color"]),n=n,t=parseInt(e[t+"-width"]);if(!r&&isNaN(t))return this._items[0];if(isNaN(t))t=0;else if(0===t)return;return this.create(r.toColorHex(),t,n)}},A),O,M=(O=o,l.__extends(D,O),D.equalsObj=function(e,t){return N.equalsObj(e._left,t._left)&&N.equalsObj(e._top,t._top)&&N.equalsObj(e._right,t._right)&&N.equalsObj(e._bottom,t._bottom)},_dp(D,"left",{get:function(){return this._left}}),_dp(D,"right",{get:function(){return this._right}}),_dp(D,"top",{get:function(){return this._top}}),_dp(D,"bottom",{get:function(){return this._bottom}}),D.prototype.dispose=function(){this._left=null,this._top=null,this._right=null,this._bottom=null,O.prototype.dispose.call(this)},D.prototype.equals=function(e,t,n,r){return N.EqualsById(this._left,e)&&N.EqualsById(this._top,t)&&N.EqualsById(this._right,n)&&N.EqualsById(this._bottom,r)},D.prototype.toXml=function(e,t){this.borderToXml(e,t,"left"),this.borderToXml(e,t,"right"),this.borderToXml(e,t,"top"),this.borderToXml(e,t,"bottom")},D.prototype.extend=function(e){return new D(null,e.left||this.left,e.top||this.top,e.right||this.right,e.bottom||this.bottom)},D.prototype.borderToXml=function(e,t,n){t=et.XmlUtils.addChild(e,t,n),n=this[n],n&&n.toXml(e,t)},D),P,H=(P=a,l.__extends(B,P),B.prototype.dispose=function(){this._lines=null,P.prototype.dispose.call(this)},B.prototype.createInstance=function(e,t,n,r){return new M(this.getIndexer(),e,t,n,r)},B.prototype.createFromCss=function(e){var t=this._lines,n=t.createFromCss(e,"border-left"),r=t.createFromCss(e,"border-right"),i=t.createFromCss(e,"border-top"),e=t.createFromCss(e,"border-bottom");if(n||r||i||e)return this.create(n,i,r,e)},B.prototype.extend=function(e,t){e=e||{};for(var n=new M(null,t.left||e.left,t.top||e.top,t.right||e.right,t.bottom||e.bottom),r=this._items.length;r--;){var i=this._items[r];if(M.equalsObj(this._items[r],n))return i}return n._id=this.getIndexer(),this._items.push(n),n},B.prototype.toXml=function(e,t){for(var n=this._items.length,r=0;r<n;r++){var i=et.XmlUtils.addChild(e,t,"border");this._items[r].toXml(e,i)}et.XmlUtils.setAttr(t,"count",n)},B),j,F=(j=o,l.__extends(I,j),_dp(I,"horzAlign",{get:function(){return this._horzAlign},set:function(e){this._horzAlign=e}}),_dp(I,"vertAlign",{get:function(){return this._vertAlign},set:function(e){this._vertAlign=e}}),I.prototype.dispose=function(){this._font=null,this._fill=null,this._border=null,this._collection=null,j.prototype.dispose.call(this)},I.prototype.equals=function(e,t,n,r,i,s,o){return this._horzAlign==e&&this._vertAlign==t&&this._wrapText==n&&this._formatId==r&&h.EqualsById(this._font,i)&&b.EqualsById(this._fill,s)&&M.EqualsById(this._border,o)},I.prototype.toXml=function(e,t){et.XmlUtils.setAttr(t,"borderId",(this._border?this._border.id:0)+""),et.XmlUtils.setAttr(t,"fillId",(this._fill?this._fill.id:0)+""),et.XmlUtils.setAttr(t,"fontId",(this._font?this._font.id:0)+""),et.XmlUtils.setAttr(t,"numFmtId",this._formatId+""),et.XmlUtils.setAttr(t,"xfId","0"),t=et.XmlUtils.addChild(e,t,"alignment"),et.XmlUtils.setAttr(t,"horizontal",this._horzAlign||"left"),et.XmlUtils.setAttr(t,"vertical",this._vertAlign||"center"),this._wrapText&&et.XmlUtils.setAttr(t,"wrapText","1")},I.prototype.cloneAsNew=function(e,t,n,r,i,s,o,u,a){return new I(this._collection,e,t||this._horzAlign,n||this._vertAlign,null!=r?r:this._wrapText,null!=i?i:this._formatId,s||this._font,o||this._fill,u||this._border)},I);t.ExcelStyle=F;var q,R=(q=a,l.__extends(U,q),U.prototype.dispose=function(){this._fonts=null,this._fills=null,this._borders=null,q.prototype.dispose.call(this)},U.prototype.addStyle=function(e){for(var t=this._items.length;t--;){var n=this._items[t];if(n.equals(e.horzAlign,e.vertAlign,e._wrapText,e._formatId,e._font,e._fill,e._border))return n}return e._id=this.getIndexer(),e._collection=this,e},U.prototype.changeFormatId=function(e,t){for(var n,r=this._items.length;r--;)if((n=this._items[r]).equals(e.horzAlign,e.vertAlign,e._wrapText,t,e._font,e._fill,e._border))return n;return n=e.cloneAsNew(this.getIndexer(),null,null,null,t,null,null,null),this._items.push(n),n},U.prototype.changeBorder=function(e,t){for(var n,r=this._borders.extend(e._border,t),i=this._items.length;i--;)if((n=this._items[i]).equals(e.horzAlign,e.vertAlign,e._wrapText,e._formatId,e._font,e._fill,r))return n;return t=e.cloneAsNew(this.getIndexer(),null,null,null,null,null,null,r),this._items.push(t),t},U.prototype.cloneAsNew=function(e,t,n,r,i,s,o,u,a){return void 0===a&&(a=!1),a=e.cloneAsNew(this.getIndexer(),t,n,r,i,s,o,u,a),this._items.push(a),a},U.prototype.createInstance=function(e,t,n,r,i,s,o){return void 0===n&&(n=!1),void 0===r&&(r=0),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),new F(this,this.getIndexer(),e,t,n,r,i,s,o)},U.prototype.createFromCss=function(e,t,n,r,i,s){void 0===n&&(n=!0),void 0===r&&(r=!0),void 0===i&&(i=!1),void 0===s&&(s=0);var o,u,a=(t=void 0===t?!0:t)?this._borders.createFromCss(e):null,t=n?this._fonts.createFromCss(e):null,n=r?this._fills.createFromCss(e):null,r=e["text-align"];return r&&("center"==r?o="center":"right"==r?o="right":"left"==r&&(o="left")),e=e["vertical-align"],e&&("top"==e?u="top":"bottom"==e&&(u="bottom")),this.create(o,u,i,s,t,n,a)},U.prototype.toXml=function(e,t){for(var n=this._items.length,r=0;r<n;r++){var i=et.XmlUtils.addChild(e,t,"xf");this._items[r].toXml(e,i)}et.XmlUtils.setAttr(t,"count",n)},U),z=(W.prototype.dispose=function(){this._styles.dispose(),this._borders.dispose(),this._lines.dispose(),this._fills.dispose(),this._fonts.dispose()},W.prototype.addFont=function(e){return e?this._fonts.createFromCss(e):null},W.prototype.addFill=function(e){return e?this._fills.createFromCss(e):null},W.prototype.addBorder=function(e){return e?this._borders.createFromCss(e):null},W.prototype.addNumberFormat=function(e){var t=this._numberFmts.indexOf(e);return t<0&&(this._numberFmts.push(e),t=this._numberFmts.length-1),W.EXCEL_NUMFMT_START+t},W.prototype.addStyle=function(e,t,n,r,i,s){return e?this._styles.createFromCss(e,t,n,r,i,s):null},W.prototype.extendStyle=function(e,t,n,r){return n=this._styles.createFromCss(t,!0,!0,!0,n,r),n._border=n._border||e._border,n._fill=n._fill||e._fill,n._font=n._font||e._font,n._horzAlign=n._horzAlign||e._horzAlign,n._vertAlign=n._vertAlign||e._vertAlign,n._wrapText=(null!=n._wrapText?n:e)._wrapText,n._formatId=(null!=r&&null!=n._formatId?n:e)._formatId,this._styles.addStyle(n)},W.prototype.changeFormatId=function(e,t){return this._styles.changeFormatId(e,t)},W.prototype.changeBorder=function(e,t){return this._styles.changeBorder(e,t)},W.prototype.createPart=function(){var e,t=et.XmlUtils.parse('<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"></styleSheet>'),r=t.documentElement;0<this._numberFmts.length&&(i=et.XmlUtils.addChild(t,r,"numFmts"),this._createNumberFormats(t,i));var i=et.XmlUtils.addChild(t,r,"fonts");return this._createFonts(t,i),i=et.XmlUtils.addChild(t,r,"fills"),this._createFills(t,i),i=et.XmlUtils.addChild(t,r,"borders"),this._createBorders(t,i),i=et.XmlUtils.addChild(t,r,"cellStyleXfs"),this._createDefXfs(t,i),r=et.XmlUtils.addChild(t,r,"cellXfs"),this._createStyles(t,r),e=et.XmlUtils.toString(t),n.XML_HEAD_STRING+e},W.prototype._createNumberFormats=function(e,t){for(var n=0,r=this._numberFmts.length;n<r;n++){var i=et.XmlUtils.addChild(e,t,"numFmt");et.XmlUtils.setAttr(i,"formatCode",this._numberFmts[n]),et.XmlUtils.setAttr(i,"numFmtId",W.EXCEL_NUMFMT_START+n)}},W.prototype._createFonts=function(e,t){this._fonts.toXml(e,t)},W.prototype._createFills=function(e,t){this._fills.toXml(e,t)},W.prototype._createBorders=function(e,t){this._borders.toXml(e,t)},W.prototype._createDefXfs=function(e,t){t=et.XmlUtils.addChildWithAttr(e,t,"xf","count",1),et.XmlUtils.setAttr(t,"borderId",0),et.XmlUtils.setAttr(t,"fillId",0),et.XmlUtils.setAttr(t,"fontId",0),et.XmlUtils.setAttr(t,"numFmtId",0)},W.prototype._createStyles=function(e,t){this._styles.toXml(e,t)},W.EXCEL_NUMFMT_START=200,W);t.ExcelWorkbookStyles=z;var X,V=(X=o,l.__extends($,X),$.prototype.dispose=function(){this._style=null,X.prototype.dispose.call(this)},$.prototype.equals=function(e){return this.id==e},$.prototype.toXml=function(e,t){et.XmlUtils.setAttr(t,"min",this.id),et.XmlUtils.setAttr(t,"max",this.id),et.XmlUtils.setAttr(t,"width",this._width),this._style&&et.XmlUtils.setAttr(t,"style",this._style.id),this._hidden&&et.XmlUtils.setAttr(t,"hidden","1")},$.prototype.toTextXml=function(e){var t=this.id+1,t={min:t,max:t,width:this._width};this._style&&(t.style=this._style.id),this._hidden&&(t.hidden="1"),lr.TextXmlManager.addChild(e,"col",t)},$);t.ExcelColumn=V;var J,K=(J=a,l.__extends(Q,J),Q.prototype.createInstance=function(e,t,n){return new V(this.getIndexer(),e,t,n)},_dp(Q,"count",{get:function(){return this._items.length}}),Q.prototype.toTextXml=function(e){for(var t=lr.TextXmlManager.addChild(e,"cols"),n=0,r=this.count;n<r;n++)this._items[n].toTextXml(t)},Q),G=(Y.prototype.dispose=function(){this._style=null},_dp(Y,"style",{get:function(){return this._style},set:function(e){this._style=e}}),Y.prototype.toXmlText=function(){(t=[]).push("<"+Y.ELEMENT_NAME),t.push(' r="'+this._range+'"'),""!=this._type&&t.push(' t="'+this._type+'"'),this._style&&t.push(' s="'+this._style.id+'"'),t.push(">"),this._fomula&&t.push("<f>"+this._fomula+"</f>"),null!=this._value&&t.push("<v>"+this._value+"</v>"),t.push("</"+Y.ELEMENT_NAME+">");var e=t.join(""),t=null;return e},Y.ELEMENT_NAME="c",Y),Z=(_dp(tt,"outLineLevel",{get:function(){return this._outlineLevel},set:function(e){this._outlineLevel=e}}),_dp(tt,"index",{get:function(){return this._index}}),tt.prototype.dispose=function(){for(var e=this._cells.length;e--;)this._cells[e].dispose(),this._cells[e]=null,delete this._cells[e]},tt.prototype.toXmlText=function(){var e,t=[];t.push("<"+tt.ELEMENT_NAME),t.push(' r="'+(this._index+1)+'"'),this._height&&-1<this._height&&(t.push(' ht="'+this._height+'"'),t.push(' customHeight="1"')),null!=this._outlineLevel&&t.push(' outlineLevel="'+this._outlineLevel+'"'),t.push(">");for(var n=0,r=this._cells.length;n<r;n++){var i=this._cells[n];i&&t.push(i.toXmlText())}return t.push("</"+tt.ELEMENT_NAME+">"),e=t.join(""),t=null,e},tt.prototype.borrowCell=function(e,t,n,r,i){void 0===r&&(r="");var s=this._cells[e];s&&s.dispose(),s=new G(this._index,e,t,n,r,i),this._cells[e]=s},tt.prototype.addBlank=function(e,t){this.borrowCell(e,t)},tt.prototype.addCell=function(e,t,n,r,i){this.borrowCell(e,r,n,t,i)},tt.prototype.addText=function(e,t,n){t=this._book.addSharedString(t||""),this.addCell(e,"s",t,n)},tt.prototype.addNumber=function(e,t,n,r){t=isNaN(t)||null==t?"":String(t),this.addCell(e,"n",t,n,r)},tt.prototype.addBool=function(e,t,n){this.addCell(e,"b",null==t?"":t?1:0,n)},tt.prototype.addDate=function(e,t,n){t?(t=_.DateTimeConverter.Default.toExcelDate(t),this.addNumber(e,t,n)):this.addCell(e,"s","",n)},tt.prototype.addLink=function(e,t,n,r){var i;n&&""!=n?((i=document.createElement("div")).innerText=i.textContent=n,n=i.innerHTML.replace(/(<br>|<br\/>)/gi,"&#13;&#10;"),i.innerText=i.textContent=t,t=i.innerHTML.replace(/(<br>|<br\/>)/gi,"\r\n"),this.addCell(e,"str",t,r,n='HYPERLINK("'+n+(t?'","'+t+'")':'")')),i=null):this.addText(e,t,r)},tt.prototype.addSparkLine=function(e,t,r,i){var s=r.layout.firstColumn,o=this._sheet,u=this._index,a=o.borrowSparkGroup(s.index,r.sparkLineGroup),f=a.range.start,s=a.range.end-f+1,r=a.range.row,a=a.sparkLines,s=o.name+"!"+n.toRange(t+f,u+(r=null==r?0:r),!0,s);a[n.toRange(e,this._index)]=s,this.addBlank(e,i)},tt.ELEMENT_NAME="row",tt.LINE_REGEX=/\r|\n|\r\n/,tt.BR_REGEX=/<br>|<br\/>/,tt);t.ExcelRow=Z;var nt=(rt.prototype.dispose=function(){this._txmerge=null,lr.TextXmlManager.removeItem(this._txdoc),this._txdoc=null,this._columns=null,this.clearRows(),this._dataRows=null,this._borderEdges=null},_dp(rt,"id",{get:function(){return rt.RELATION_ID+this._index}}),_dp(rt,"name",{get:function(){return this._name}}),_dp(rt,"colCount",{get:function(){return this._columns.count}}),_dp(rt,"rowCount",{get:function(){return this._dataRows.length}}),_dp(rt,"workbook",{get:function(){return this._book}}),rt.prototype.setFirstRow=function(e){this._firstRow<0&&(this._firstRow=e)},rt.prototype.setLastRow=function(e){this._lastRow=Math.max(this._lastRow,e)},rt.prototype.clearRows=function(){for(var e=this._dataRows.length;e--;)this._dataRows[e].dispose(),this._dataRows[e]=null,delete this._dataRows[e];this._dataRows=[]},rt.prototype.addColumn=function(e,t,n){return this._columns.createUnique(e,t,n)},rt.prototype.addRow=function(e,t){return this
._dataRows[e]=new Z(this,e,t)},rt.prototype.getRow=function(e){return this._dataRows[e]},rt.prototype.borrowRow=function(e,t){return this._dataRows[e]||this.addRow(e,t)},rt.prototype.borrowSparkGroup=function(e,t){return this._sparkGroups[e]||(this._sparkGroups[e]=t),this._sparkGroups[e]},rt.prototype.setRowLevel=function(e,t){0<=t&&(e=this._dataRows[e])&&(e.outLineLevel=t,this._outlineLevel=Math.max(t,this._outlineLevel))},rt.prototype.addMerge=function(e,t,r,i){(1<r||1<i)&&(r=n.toRange(t,e,!0,i,r),lr.TextXmlManager.addChild(this._txmerge,"mergeCell",{ref:r}),this._mergeCount++)},rt.prototype.createPart=function(){var e=this._txdoc,t="A1:"+n.toRange(this._columns.count-1,this._dataRows.length-1);lr.TextXmlManager.addChild(e,"dimension",{ref:t}),0<this._outlineLevel&&lr.TextXmlManager.addChild(e,"sheetFormatPtr",{outlineLevelRow:this._outlineLevel});var r=lr.TextXmlManager.addChild(e,"sheetViews"),t={workbookViewId:0,showOutlineSymbols:"true"};this._attrs&&p.Utils.extendObj(this._attrs,t),0==this._book.count&&(t.tabSelected=1),t=lr.TextXmlManager.addChild(r,"sheetView",t),(0<this._fixedCol||0<this._fixedRow)&&lr.TextXmlManager.addChild(t,"pane",{xSplit:this._fixedCol,ySplit:this._fixedRow,topLeftCell:n.toRange(this._fixedCol,this._fixedRow),activePane:"bottomRight",state:"frozen"}),this._columns&&this._columns.toTextXml(e);for(var i=lr.TextXmlManager.addChild(e,"sheetData"),s=this._dataRows,o=0,u=s.length;o<u;o++){if(o==this._firstRow){for(var a=0,f=0;f<s[o]._cells.length;f++)(l=s[o]._cells[f])&&this._borderEdges&&(l.style=this._book.changeBorderId(l.style,this._borderEdges[a++?"top":"leftTop"]));for(f=s[o]._cells.length;f--;)if((l=s[o]._cells[f])&&this._borderEdges){l.style=this._book.changeBorderId(l.style,this._borderEdges.rightTop);break}}else if(o===this._lastRow){for(a=0,f=0;f<s[o]._cells.length;f++)(l=s[o]._cells[f])&&this._borderEdges&&(l.style=this._book.changeBorderId(l.style,this._borderEdges[a++?"bottom":"leftBottom"]));for(f=s[o]._cells.length;f--;)if((l=s[o]._cells[f])&&this._borderEdges){l.style=this._book.changeBorderId(l.style,this._borderEdges.rightBottom);break}}else if(o>this._firstRow&&o<this._lastRow){for(f=0;f<s[o]._cells.length;f++)if((l=s[o]._cells[f])&&this._borderEdges){l.style=this._book.changeBorderId(l.style,this._borderEdges.left);break}for(var l,f=s[o]._cells.length;f--;)if((l=s[o]._cells[f])&&this._borderEdges){l.style=this._book.changeBorderId(l.style,this._borderEdges.right);break}}s[o]&&lr.TextXmlManager.addText(i,s[o].toXmlText())}if(0<this._mergeCount&&(lr.TextXmlManager.addChildElement(this._txdoc,this._txmerge),lr.TextXmlManager.addProperty(this._txmerge,"count",this._mergeCount+"")),0<Object.keys(this._sparkGroups).length){var t=lr.TextXmlManager.addChild(e,"extLst"),t=lr.TextXmlManager.addChild(t,"ext",{uri:"{05C60535-1F16-4fd2-B633-F4F36F0B64E0}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),c=lr.TextXmlManager.addChild(t,"x14:sparklineGroups",{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"});for(o in this._sparkGroups){var h=this._sparkGroups[o],d=h.colors,v=h.sparkLines,h=lr.TextXmlManager.addChild(c,"x14:sparklineGroup",{type:h.type||"line"});d.colorSeries&&lr.TextXmlManager.addChild(h,"x14:colorSeries",{rgb:d.colorSeries}),d.colorMarkers&&(lr.TextXmlManager.addProperty(h,"markers","1"),lr.TextXmlManager.addChild(h,"x14:colorMarkers",{rgb:d.colorMarkers})),d.colorFirst&&(lr.TextXmlManager.addProperty(h,"first","1"),lr.TextXmlManager.addChild(h,"x14:colorFirst",{rgb:d.colorFirst})),d.colorLast&&(lr.TextXmlManager.addProperty(h,"last","1"),lr.TextXmlManager.addChild(h,"x14:colorLast",{rgb:d.colorLast})),d.colorHigh&&(lr.TextXmlManager.addProperty(h,"high","1"),lr.TextXmlManager.addChild(h,"x14:colorHigh",{rgb:d.colorHigh})),d.colorLow&&(lr.TextXmlManager.addProperty(h,"low","1"),lr.TextXmlManager.addChild(h,"x14:colorLow",{rgb:d.colorLow}));var m,g=lr.TextXmlManager.addChild(h,"x14:sparklines");for(m in v){var y=lr.TextXmlManager.addChild(g,"x14:sparkline");lr.TextXmlManager.addChild(y,"xm:f",void 0,v[m]),lr.TextXmlManager.addChild(y,"xm:sqref",void 0,m)}}}return n.XML_HEAD_STRING+lr.TextXmlManager.toString(e)},rt.prototype.createBorderEdges=function(e){function t(t){var n={};return t.forEach(function(t){n["border-"+t+"-style"]=e["border-"+t+"-style"],n["border-"+t+"-color"]=e["border-"+t+"-color"],n["border-"+t+"-width"]=e["border-"+t+"-width"]}),this._book._styles._borders.createFromCss(n)||{}}e&&(this._borderEdges={leftTop:t.call(this,["left","top"]),top:t.call(this,["top"]),rightTop:t.call(this,["right","top"]),left:t.call(this,["left"]),right:t.call(this,["right"]),leftBottom:t.call(this,["left","bottom"]),bottom:t.call(this,["bottom"]),rightBottom:t.call(this,["right","bottom"])})},rt.prototype.setFixedInfo=function(e,t){this._fixedRow=null==e?this._fixedRow:Math.max(this._fixedRow,e),this._fixedCol=null==t?this._fixedCol:Math.max(this._fixedCol,t)},rt.prototype._prepare=function(){this._txdoc=lr.TextXmlManager.createDocument("worksheet",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}),this._txmerge=lr.TextXmlManager.createDocument("mergeCells")},rt.RELATION_ID="rId",rt);t.ExcelWorksheet=nt,it.prototype.dispose=function(){if(this._parts={},this._strings.dispose(),this._strings=null,this._styles.dispose(),this._styles=null,this._sheets.length)for(var e=0,t=this._sheets.length;e<t;e++)this._sheets[e].dispose(),delete this._sheets[e];this._sheets=null},_dp(it,"currentSheet",{get:function(){return this._currentSheet}}),_dp(it,"count",{get:function(){return this._sheets?this._sheets.length:0}}),_dp(it,"styles",{get:function(){return this._styles}}),it.prototype.createSheet=function(e,t){return t=new nt(this,this._sheet_indexer++,e||"Sheet"+(this._sheets.length+1),t),this._sheets.push(t),this._currentSheet=t},it.prototype.addSharedString=function(e){return this._strings.add(e)},it.prototype.addNumberFormat=function(e){return this._styles.addNumberFormat(e)},it.prototype.addStyle=function(e,t,n,r,i,s){var o;return null==i&&(i=null!=(o=e.whiteSpace||e["white-space"])&&"none"!==o&&"nowrap"!==o),this._styles.addStyle(e,t,n,r,i,s)},it.prototype.changeFormatId=function(e,t){return this._styles.changeFormatId(e,t)},it.prototype.changeBorderId=function(e,t){return this._styles.changeBorder(e,t)},it.prototype.extendStyle=function(e,t,n,r){return this._styles.extendStyle(e,t,n,r)},it.prototype.createParts=function(){var e=this._parts,t=lr.TextXmlManager.createDocument("Types",{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"});lr.TextXmlManager.addChild(t,"Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),lr.TextXmlManager.addChild(t,"Default",{Extension:"xml",ContentType:"application/xml"}),lr.TextXmlManager.addChild(t,"Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),lr.TextXmlManager.addChild(t,"Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),lr.TextXmlManager.addChild(t,"Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),lr.TextXmlManager.addChild(t,"Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),lr.TextXmlManager.addChild(t,"Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"});var r=lr.TextXmlManager.createDocument("Relationships",{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"});lr.TextXmlManager.addChild(r,"Relationship",{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}),lr.TextXmlManager.addChild(r,"Relationship",{Id:"rId2",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"});var i=lr.TextXmlManager.createDocument("workbook",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"});lr.TextXmlManager.addChild(i,"workbookPr",{date1904:"false"});var s=lr.TextXmlManager.addChild(i,"bookViews");lr.TextXmlManager.addChild(s,"workbookView",{activeTab:"0"});for(var o=lr.TextXmlManager.addChild(i,"sheets"),u=0,a=this._sheets.length;u<a;u++){var f=this._sheets[u],l="worksheets/sheet"+(u+1).toString()+".xml",c="xl/"+l;e[c]=f.createPart(),t&&lr.TextXmlManager.addChild(t,"Override",{PartName:"/"+c,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"}),o&&lr.TextXmlManager.addChild(o,"sheet",{name:f.name||"Sheet"+(u+1).toString(),sheetId:(u+1).toString(),"r:id":f.id}),r&&lr.TextXmlManager.addChild(r,"Relationship",{Id:f.id,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:l})}return s=n.XML_HEAD_STRING,e["[Content_Types].xml"]=s+lr.TextXmlManager.toString(t),e["xl/workbook.xml"]=s+lr.TextXmlManager.toString(i),e["xl/_rels/workbook.xml.rels"]=s+lr.TextXmlManager.toString(r),e["xl/sharedStrings.xml"]=this._strings.createPart(),e["xl/styles.xml"]=this._styles.createPart(),e},it.prototype._preapreTemplateParts=function(){var e=this._parts,t=n.XML_HEAD_STRING,r=(new Date).toISOString();e["_rels/.rels"]=t+'<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/></Relationships>',e["docProps/app.xml"]=t+'<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties"><Application>RealGrid</Application><AppVersion>2.0</AppVersion></Properties>',e["docProps/core.xml"]=t+'<coreProperties xmlns="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dcterms:created xsi:type="dcterms:W3CDTF">'+r+"</dcterms:created><dc:creator>Wooritech</dc:creator></coreProperties>"},a=it,t.ExcelWorkbook=a});t(cr),cr.ExcelUtil,cr.ExcelStyle,cr.ExcelWorkbookStyles,cr.ExcelColumn,cr.ExcelRow,cr.ExcelWorksheet,cr.ExcelWorkbook;var hr=n(function(e,t){function i(e,t){return void 0===t&&(t=null),e=n.call(this,null,e)||this,e._groupSorting=!0,e._groupSortDirection=c.SortDirection.ASCENDING,e._groupSortCase=c.SortCase.SENSITIVE,e._rs=new At.DefaultItemProvider(!1),e._rs.addListener(e),e._groupedProvider=new Ht.GroupedItemProvider(e._rs,!1),e._groupedProvider.footerCounter=t,e.source=e._groupedProvider,e._summarizer=new Mt.DefaultSummarizer(e._rs),e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=mt.EditableItemProviderImpl,l.__extends(i,n),i.prototype._doDispose=function(){this.clearListener(),this._rs&&this._rs.dispose(),this._rs=null,this._groupedProvider&&this._groupedProvider.dispose(),this._groupedProvider=null,this._summarizer&&this._summarizer.dispose(),this._summarizer=null,n.prototype._doDispose.call(this)},_dp(i,"maxRowCount",{get:function(){return this._rs.maxItemCount},set:function(e){this._rs.maxItemCount=Math.max(0,e)}}),_dp(i,"hideDeleted",{get:function(){return this._rs.hideDeleted},set:function(e){this._rs.hideDeleted=e}}),_dp(i,"inclusiveFiltering",{get:function(){return this._rs.isFilterOr},set:function(e){this._rs.isFilterOr=e}}),_dp(i,"summaryMode",{get:function(){return this._rs.summaryMode},set:function(e){this._rs.summaryMode=e}}),_dp(i,"groupSummaryMode",{get:function(){return this._groupedProvider.summaryMode},set:function(e){this._groupedProvider.summaryMode=e}}),_dp(i,"sortMode",{get:function(){return this._rs.sortMode},set:function(e){this._rs.sortMode=e}}),_dp(i,"filterMode",{get:function(){return this._rs.filterMode},set:function(e){this._rs.filterMode=e}}),_dp(i,"grouped",{get:function(){return this._groupedProvider.grouped}}),_dp(i,"mergedGrouped",{get:function(){return this._groupedProvider.grouped&&this._groupedProvider.mergeMode}}),_dp(i,"groupLevels",{get:function(){return this._groupedProvider.groupCount}}),_dp(i,"groupByFieldCount",{get:function(){return this._groupedProvider.groupCount}}),_dp(i,"groupByFields",{get:function(){return this._groupedProvider.groupedFields}}),_dp(i,"expandWhenGrouping",{set:function(e){this._groupedProvider.expandWhenGrouping=e}}),_dp(i,"summarizer",{get:function(){return this._summarizer}}),i.prototype.canGrouping=function(e){return this._groupedProvider.canGrouping(e)},i.prototype.getFieldDomain=function(e){return this._rs.getFieldDomain(e)},i.prototype.isFiltered=function(e){return null!=e?this._rs.hasFilter(e):this._rs.hasFilters()},i.prototype.addFilter=function(e,t){this._rs.addFilter(e,t)},i.prototype.removeFilter=function(e,t){this._rs.removeFilter(e,t)},i.prototype.clearFilters=function(e){this._rs.clearFilters(e)},i.prototype.clearAllFilters=function(){this._rs.clearAllFilters()},i.prototype.beginFiltering=function(){this._rs.beginFilter()},i.prototype.endFiltering=function(e,t){this._rs.endFilter(!0,e,t)},i.prototype.setHideDeletedRows=function(e){this._rs.hideDeleted=e},i.prototype.orderBy=function(e,t,n){if(this._groupedProvider.grouped&&this._groupSorting){for(var r=t?t.length:0,i=n?n.length:0,s=this._groupedProvider.groupedFields,o=this._rs.getSortDirections(),u=this._rs.getSortCases(),a=[],f=0,l=s.length;f<l;f++)a.push(s[f]);for(f=0,l=e.length;f<l;f++){var h=e[f],p=a.indexOf(h),d=void 0,v=void 0,d=f<r?t[f]:0<r?t[r-1]:c.SortDirection.ASCENDING,v=f<i?n[f]:0<i?n[i-1]:c.SortCase.SENSITIVE;p<0?(a.push(h),o[a.length-1]=d,u[a.length-1]=v):(o[p]=d,u[p]=v)}this._rs.orderBy(s=a,o,u)}else this._rs.orderBy(e,t,n)},i.prototype.getSortFields=function(){return this._rs.getSortFields()},i.prototype.getSortDirections=function(){return this._rs.getSortDirections()},i.prototype.getSortCases=function(){return this._rs.getSortCases()},i.prototype.setLabelComparer=function(e){this._rs.labelComparer=e},i.prototype.groupBy=function(e,t,n,r){void 0===t&&(t=!0),void 0===n&&(n=c.SortDirection.ASCENDING),void 0===r&&(r=c.SortCase.SENSITIVE),(e&&!(e.length<1)||this._groupedProvider.grouped)&&this._groupedProvider.canGrouping(e)&&(this._groupSorting=t,this._groupSortDirection=n,t&&this._rs.orderBy(e,[n],[r],!1),this._groupedProvider.groupBy(e))},i.prototype.groupByMode=function(e,t){this._groupSorting&&this._rs.orderBy(e,[this._groupSortDirection],[this._groupSortCase],!1),this._groupedProvider.canGrouping(e)&&this._groupedProvider.groupByMode(e,t)},i.prototype.addGroupBy=function(e,t,n){var r;this._groupedProvider.groupCount<1?r=[t]:(r=this._groupedProvider.groupedFields).splice(e,0,t),this._groupSorting=0===e?n:this._groupSorting,this._groupedProvider.canGrouping(r)&&(this._groupSorting&&(n=[this._groupSortDirection],this._rs.orderBy(r,n,null,!1)),this._groupedProvider.groupBy(r))},i.prototype.removeGroupBy=function(e,t){if(this._groupedProvider.grouped){for(var n=this._groupedProvider.groupedFields,r=-1,i=0,s=n.length-1;0<=s;s--)if(i++,n[s]==e){r=s;break}0<=r?(n.splice(r,t?i:1),this._groupedProvider.canGrouping(n)&&(this._groupSorting&&this._rs.orderBy(n,[this._groupSortDirection],null,!1),this._groupedProvider.groupBy(n))):this._groupedProvider.canGrouping(null)&&this._groupSorting&&this._rs.orderBy(null,null,null,!1)}},i.prototype.isGroupedField=function(e){return this._groupedProvider.isGroupedField(e)},i.prototype.getGroupLevel=function(e){return this._groupedProvider.getGroupLevel(e)},_dp(i,"isGroupSorting",{set:function(e){this._groupSorting=e,this._groupedProvider._groupSorting=e}}),i.prototype.expand=function(e,t,n,r){this._groupedProvider.expand(e,t,n,r)},i.prototype.collapse=function(e,t,n){this._groupedProvider.collapse(e,t,n)},i.prototype.collapseAll=function(e){this._groupedProvider.collapseAll(e)},i.prototype.expandAll=function(e,t){this._groupedProvider.expandAll(e,t)},i.prototype.setPaging=function(e,t,n,r){this._rs.setPaging(e,t,n,r)},_dp(i,"page",{get:function(){return this._rs.page}}),i.prototype.setPage=function(e,t){this._rs.setPage(e,t)},_dp(i,"pageCount",{get:function(){return this._rs.pageCount},set:function(e){this._rs.pageCount=e}}),i.prototype.getDisplayItemIndex=function(e){return this._rs.isPaging?e.index+this._rs.pageStartIndex:e.index},i.prototype.getCheckedRows=function(e){return this._rs.getCheckedRows(e)},_dp(i,"checkableExpression",{set:function(e){this._rs.checkableExpression=e}}),_dp(i,"checkableCallback",{set:function(e){this._rs.checkableCallback=e}}),i.prototype.resetCheckables=function(){this._rs.resetCheckables()},i.prototype.applyCheckables=function(){this._rs.applyCheckables()},i.prototype.setCheckFieldIndex=function(e){this._rs.setCheckFieldIndex(e)},i.prototype.getFirstRow=function(){if(0<this.itemCount)return this._groupedProvider.grouped?this._groupedProvider.getFirstRow():this._rs.getItem(0)},i.prototype.getLastRow=function(){if(0<this.itemCount)return this._groupedProvider.grouped?this._groupedProvider.getLastRow():this._rs.getItem(this._rs.itemCount-1)},i.prototype.getPrevRow=function(e){if(0<this.itemCount)return this._groupedProvider.grouped?this._groupedProvider.getPrevRow(e):e&&0<e.index?this._rs.getItem(e.index-1):this._rs.getItem(0)},i.prototype.getNextRow=function(e){if(0<this.itemCount)return this._groupedProvider.grouped?this._groupedProvider.getNextRow(e):e&&e.index<this._rs.itemCount-1?this._rs.getItem(e.index+1):this._rs.getItem(0)},i.prototype.getGroupItem=function(e){if(this._groupedProvider.grouped)return this._groupedProvider.getGroupItem(e)},i.prototype.getJsonRows=function(){return this._rs.getJsonRows()},_dp(i,"rowCount",{get:function(){return this._rs.rowCount}}),_dp(i,"visibleRowCount",{get:function(){return this.grouped?this._groupedProvider.visibleRowCount:this._rs.rowCount}}),_dp(i,"sorted",{get:function(){return this._rs.sorted}}),_dp(i,"movable",{get:function(){return!this.grouped&&this._rs.movable}}),i.prototype.getAllItems=function(){return this._groupedProvider.getAllItems()},i.prototype.getPagingAllItems=function(){var e=this._rs;return(e.isSorted?e._sortedItems:e._items).slice()},i.prototype.findItem=function(e,t,n,r,i){return this._groupedProvider.findItem(e,t,n,r,i)},i.prototype.findCell=function(e,t,n,r,i,s){return this._groupedProvider.findCell(e,t,n,r,i,s)},i.prototype.checkItems=function(e,t,n){this._groupedProvider.checkItems(e,t,n)},i.prototype.checkItem=function(e,t,n,r){this._groupedProvider.checkItem(e,t,n,r)},i.prototype.checkAll=function(e,t,n,r,i){this._groupedProvider.checkAll(e,t,n,r,i)},i.prototype.setItemChecked=function(e,t){var n=this._rs._checkFieldIndex;if(-1<n){var r=this.dataSource.getField(n),t=(r._boolParser||r._ownerBoolParser).toText(t);return this.isEditing(e)?e.setValue(n,t):e.setData(n,t),!0}return!1},i.prototype.getItemChecked=function(e,t){var n=this._rs._checkFieldIndex;return-1<n?this.dataSource.getField(n).readBooleanValue(e.getData(n)):t},i.prototype.getItemOfRow=function(e,t){return this._rs.getItemOfRow(e,t)},i.prototype._doBeginUpdate=function(e){return e=n.prototype._doBeginUpdate.call(this,e),this._groupedProvider.$_setEditItem(e),e},i.prototype._doBeginAppendDummy=function(){var e=n.prototype._doBeginAppendDummy.call(this);return this._groupedProvider.$_setDummyEditItem(e),e},i.prototype._doBeginAppend=function(e){return e=n.prototype._doBeginAppend.call(this,e),this._groupedProvider.$_setEditItem(e),e},i.prototype._doBeginInsert=function(e,t,r,i){return i=n.prototype._doBeginInsert.call(this,e,t,r,i),this._groupedProvider.$_setEditItem(i),i},i.prototype._doCancelDummyEdit=function(){n.prototype._doCancelDummyEdit.call(this),this._groupedProvider.$_setDummyEditItem(null)},i.prototype._doCancelEdit=function(e,t){n.prototype._doCancelEdit.call(this,e,t),this._groupedProvider.$_setEditItem(null)},i.prototype._doCommitEdit=function(e,t){return!!n.prototype._doCommitEdit.call(this,e,t)&&(this._groupedProvider.$_setEditItem(null),!0)},i.prototype.onGroupedItemProviderGrouping=function(e,t){return this.fireConfirmEvent(Ht.GroupedItemProvider.GROUPING,t)},i.prototype.onGroupedItemProviderGrouped=function(e){this.fireEvent(Ht.GroupedItemProvider.GROUPED)},i.prototype.onGroupedItemProviderExpand=function(e,t){return this.fireConfirmEvent(Ht.GroupedItemProvider.EXPAND,t)},i.prototype.onGroupedItemProviderExpanded=function(e,t){this.fireEvent(Ht.GroupedItemProvider.EXPANDED,t)},i.prototype.onGroupedItemProviderCollapse=function(e,t){return this.fireConfirmEvent(Ht.GroupedItemProvider.COLLAPSE,t)},i.prototype.onGroupedItemProviderCollapsed=function(e,t){this.fireEvent(Ht.GroupedItemProvider.COLLAPSED,t)},i.prototype.onItemProviderFilterAdded=function(e,t,n){this._fireFilterAdded(t,n)},i.prototype.onItemProviderFilterRemoved=function(e,t,n){this._fireFilterRemoved(t,n)},i.prototype.onItemProviderFilterCleared=function(e,t){this._fireFilterCleared(t)},i.prototype.onItemProviderFilterAllCleared=function(e){this._fireFilterAllCleared()},i.prototype.onItemProviderFiltered=function(e,t,n){this._fireFiltered(t,n)},i.prototype.onItemProviderSort=function(e,t,n){this._fireSort(t,n,null)},i.prototype.onItemProviderSorted=function(e){this._fireSorted()},i.prototype.onItemProviderDataLoadComplated=function(e){this._fireDataLoadComplated()},i);t.GridItemProvider=r});t(hr),hr.GridItemProvider;var pr=n(function(e,t){function i(e,t,r){return r=n.call(this,e,r=void 0===r?null:r)||this,r._clickable=!1,r._owner=t,r}function o(e,t,n){return s.call(this,e,t,n=void 0===n?null:n)||this}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Yt.VisualElement,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(i,"owner",{get:function(){return this._owner}}),_dp(i,"clickable",{get:function(){return this._clickable},set:function(e){e!=this._clickable&&(this._clickable=e,this._changed())}}),i.prototype._getCssSelector=function(){return""},i.prototype._doDraw=function(e){},i.prototype._hoverChanged=function(){this.invalidate()},i.prototype._changed=function(){this.invalidate()},i);t.HandleElement=r;var s,r=(s=r,l.__extends(o,s),o.prototype._doDispose=function(){s.prototype._doDispose.call(this)},_dp(o,"cellView",{get:function(){return this.owner}}),o);t.CellHandle=r});t(pr),pr.HandleElement,pr.CellHandle;var dr=n(function(e,t){function i(e){return n.call(this,e,"rowGroupHeadCellView")||this}function u(e){return e=s.call(this,e,null,"rowGroupHeadView")||this,e._cells=[],e._levels=0,e._count=0,e}function h(e){return a.call(this,e,"rowGroupFootCellView")||this}function m(e){return e=d.call(this,e,null,"rowGroupFootView")||this,e._cells=[],e._levels=0,e}function w(e,t){return t=g.call(this,e,t,"rowGroupExpandHandle")||this,t._expanded=!1,t.clickable=!0,t}function x(e){var t=E.call(this,e,"rowGroupBarCell")||this;return t._level=0,t._expander=new b(e,t),t.addChild(t._expander),t}function C(e){return e=T.call(this,e,null,"rowGroupBarContainer")||this,e._cells=[],e._levels=0,e._bars=[],e}function A(e){var t=k.call(this,e,"rowGroupBarPane")||this;return t._barContainer=new N(e),t.addChild(t._barContainer),t._footView=new v(e),t.addChild(t._footView),t._headView=new o(e),t.addChild(t._headView),t}function M(e){return O.call(this,e,"rowGroupPane")||this}function P(e){return e=_.call(this,e,"rowGroupHeaderCellView")||this,e._indent=0,e}function j(e){var t=H.call(this,e,"rowGroupHeaderView")||this;return t._cellView=new D(e),t.addChild(t._cellView),t}function q(e){return F.call(this,e,"rowGroupRightHeaderView")||this}function z(e){return R.call(this,e,"rowGroupFooterView")||this}function V(){return null!==W&&W.apply(this,arguments)||this}function K(){return null!==$&&$.apply(this,arguments)||this}function G(e,t){return t=Q.call(this,e,t||"rowGroupLayer")||this,t._headerPool=[],t._headerViews=[],t._rightHeaderPool=[],t._rightHeaderViews=[],t._footerPool=[],t._footerViews=[],t._fixedFooterPool=[],t._fixedFooterViews=[],t._rightFooterPool=[],t._rightFooterViews=[],t._indents=[],t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=sn.CellElement,l.__extends(i,n),i.prototype._doUpdateContent=function(e,t,n){n[p.Utils.TextProp]=""},i.prototype._doRender=function(e){},i),s,o=(s=rn.SimpleTableElement,l.__extends(u,s),u.prototype._doDispose=function(){this._cells=null,s.prototype._doDispose.call(this)},u.prototype.prepare=function(e,t){for(this._levels=e,this._count=t?2*e:e;this._cells.length<this._count;){var n=new r(this.doc);this._cells.push(n)}},u.prototype._getCssSelector=function(){return"rg-rowgroup-head"},u.prototype._getTableRowHeight=function(e,t){return(1==t?e.summaryBounds:e.headBounds).height},u.prototype._doPrepareTableExtents=function(e){if(0<this._count)for(var t=this.width/this._levels,n=0;n<this._count;n++)this._cells[n].width=t},u.prototype._prepareCellContent=function(e,t){var n=p.getDoc(e);return e[c.T_LEV]=t+1,n.createElement("div")},u.prototype._doLayoutContent=function(e){for(var t=this._count;this.childCount<t;)this.addChild(this._cells[this.childCount]);for(;this.childCount>t;)this.removeLast()},u.prototype._doRender=function(e){},u.prototype._getTableRowCount=function(e){return 2},u.prototype._getCellCount=function(e){return this._count},u.prototype._getCellWidth=function(e,t){return this._cells[t].width},u);t.RowGroupHeadElement=o;var a,f=(a=sn.CellElement,l.__extends(h,a),h.prototype._doUpdateContent=function(e,t,n){n[p.Utils.TextProp]=""},h.prototype._doRender=function(e){},h),d,v=(d=rn.SimpleTableElement,l.__extends(m,d),m.prototype._doDispose=function(){this._cells=null,d.prototype._doDispose.call(this)},m.prototype.prepare=function(e){for(this._levels=e;this._cells.length<e;){var t=new f(this.doc);this._cells.push(t)}},m.prototype._getCssSelector=function(){return"rg-rowgroup-foot"},m.prototype._getTableRowHeight=function(e,t){return e.footBounds.height},m.prototype._doPrepareTableExtents=function(e){if(0<this._levels)for(var t=this.width/this._levels,n=0;n<this._levels;n++)this._cells[n].width=t},m.prototype._prepareCellContent=function(e,t){var n=p.getDoc(e);return e[c.T_LEV]=t+1,n.createElement("div")},m.prototype._doLayoutContent=function(e){for(var t=this._levels;this.childCount<t;)this.addChild(this._cells[this.childCount]);for(;this.childCount>t;)this.removeLast()},m.prototype._doRender=function(e){},m.prototype._getTableRowCount=function(e){return 1},m.prototype._getCellCount=function(e){return this._levels},m.prototype._getCellWidth=function(e,t){return this._cells[t].width},m);t.RowGroupFootElement=v;var g,y="rg-rowgroup-expander",b=(g=pr.CellHandle,l.__extends(w,g),w.isExpander=function(e){return e=e.className,e&&0<=e.indexOf(y)},_dp(w,"expanded",{get:function(){return this._expanded},set:function(e){e!=this._expanded&&(this._expanded=e,this._changed())}}),w.prototype._createDom=function(e){return e.createElement("span")},w.prototype._initDom=function(e){g.prototype._initDom.call(this,e),e.style.position="",e.style.display="inline-block"},w.prototype._getCssSelector=function(){return this._expanded?"rg-rowgroup-expander rg-rowgroup-expander-expanded":"rg-rowgroup-expander rg-rowgroup-expander-collapsed"},w.prototype._getCssDisplay=function(){return""},w.prototype._beforeDraw=function(e){this._setClassName(e)},w);t.RowGroupExpandHandle=b;var E,S=(E=sn.CellElement,l.__extends(x,E),_dp(x,"level",{get:function(){return this._level},set:function(e){this._level=e}}),x.prototype.updateCell=function(e,t,n){E.prototype.updateCell.call(this,e,t,n);var r,i=t.item;i instanceof dt.GroupItemImpl&&i.level==this.bar.l||i instanceof dt.GroupFooter&&i.expandable&&i.displayLevel===this.bar.l?(r=this._expander._dom,t=i instanceof dt.GroupItemImpl?i:i.parent,n.appendChild(r),this._expander.setBounds(1,1,this.width-2,this.width-2),this._expander.expanded=t.expanded,e=!(e=e.rowGroup._expanderVisibleCallback)||e.call(this.grid,this.grid.handler,t),this._expander.visible=!t.expanded||null==e||e,r[c.T_ROW]=i.index):this._expander.visible=!1,n.style.paddingTop="2px"},x.prototype.validate=function(){E.prototype.validate.call(this);var e=this._expander._dom;e&&e.parentElement&&e.parentElement.removeChild(e)},x),T,N=(T=rn.DataTableElement,l.__extends(C,T),C.prototype._doDispose=function(){this._cells=null,T.prototype._doDispose.call(this)},C.prototype.prepare=function(e,t){this._levels=t},C.prototype.getLevelIndent=function(e){return e*this.width/this._levels},C.prototype._getCssSelector=function(){return"rg-rowgroup-bar"},C.prototype._prepareCellContent=function(e,t){return p.getDoc(e).createElement("div")},C.prototype._doLayoutContent=function(e){for(var t=e.grid,n=t.rowGroup,r=this.width/this._levels,i=this._bars,s=i.length,o=e.topIndex,u=e.fixedItemCount,a=0<u;this.childCount<s;)c=0<this._cells.length?this._cells.pop():this._createCell(),this.addChild(c);for(;this.childCount>s;)(c=this.removeLast()).validate(),this._cells.push(c);for(var f=0;f<s;f++){var l=i[f],c=this.getChild(f),h=l.tr1,p=It.CellIndex.temp(t,a?h<u?h:h-1+o:h+o),d=n.getBarCell(p),p=e.getTableItemBounds(l.r);c.bar=l,c.level=l.c+1,c.updateCell(t,d,this.getCellContent(h,l.c)),p.x=r*l.c,p.width=r,c.setRect(p)}},C.prototype._doRender=function(e){},C.prototype._doPrepareTableRows=function(e,t){T.prototype._doPrepareTableRows.call(this,e,t),this.$_layoutBarCells(e,t)},C.prototype._getTableRowHeight=function(e,t){var n=0<e.fixedItemCount&&t>e.fixedItemCount?1:0;return e.getTableItemHeight(t-n)},C.prototype._getCellCount=function(e){return this._levels},C.prototype._getCellWidth=function(e,t){return this.width/this._levels},C.prototype._createCell=function(){return new S(this.doc)},C.prototype.$_calcLevels=function(e,t,n,r){for(var i=new Array,s=n;s<r;s++){var o=e[s];i.push(o instanceof dt.GroupFooter?o.displayLevel:o.level)}for(var u=-1,a=0,s=0;s<i.length;s++){var f=i[s];f<t?(i[s]=1,0<=u&&(i[u]=a,u=-1,a=0)):f==t?(0<=u&&(i[u]=a),u=s,a=1):(u<0?u=s:i[s]=-1,a++)}return 0<=u&&(i[u]=a),i},C.prototype.$_layoutBarCells=function(e,t){var n=e.$_getItems(),r=n.length,i=e.fixedItemCount,s=t.children,o=this._bars=[];if(!(r<1)){for(var u=0,a=this._getCellCount(e);u<a;u++){var f=u+1,l=0,h=0;if(0<i){for(var d=void 0,v=void 0;l<i;l++,h++)(v=(d=s[h]).children[u]).style.display="",v.removeAttribute("rowspan"),p.Utils.setClassName(v,""),0===u&&p.Utils.setClassName(d,""),v[c.T_ROW]=l;d=s[h++],0===u&&p.Utils.setClassName(d,Qt.FixedOptions.ROW_BAR_STYLE),(v=d.children[u]).style.display="",v.removeAttribute("rowspan"),p.Utils.setClassName(v,Qt.FixedOptions.ROW_BAR_CELL_STYLE)}if(l<r)for(var m=this.$_calcLevels(n,f,l,r),g=0;l<r;l++,g++,h++){var y=m[g],v=(d=s[h]).children[u],b=n[l];0===u&&p.Utils.setClassName(d,""),0<y?(1<y||b instanceof dt.GroupItemImpl&&b.level==f||1===y&&b instanceof dt.GroupFooter&&!b.parent.expanded?(o.push({r:l,tr1:h,tr2:h+y-1,c:u,l:f}),v.rowSpan=y):v.removeAttribute("rowspan"),v.style.display="",p.Utils.setClassName(v,"rg-rowgroup-bar-cell rg-rowgroup-bar-level-"+String(f)),v[c.T_ROW]=b.index):(v.removeAttribute("rowspan"),v.style.display="none",p.Utils.setClassName(v,""))}}o.sort(function(e,t){return e.r-t.r})}},C);t.RowGroupBarContainer=N;var k,L=(k=Tn.DataContentPane,l.__extends(A,k),A.prototype._doDispose=function(){k.prototype._doDispose.call(this)},_dp(A,"levelCount",{get:function(){return this.grid.layoutManager.rowGroupLevels}}),A.prototype.getLevelIndent=function(e){return this._barContainer.getLevelIndent(e)},A.prototype._doMeasure=function(e,t,n){var r=this.levelCount;return this._headView.prepare(r,e.headerSummaries.visible),this._footView.prepare(r),this._barContainer.prepare(e,r),new tn.Size(this.levelCount*e.rowGroup.levelIndent,n)},A.prototype._doLayoutContent=function(e){var t=this.grid,n=e.headBounds,r=e.summaryBounds;(this._headView.visible=t.header.visible||t.headerSummaries.isVisible())&&(this._headView.setBounds(0,n.y,this.width,n.height+r.height),this._headView.layoutContent(e)),n=e.footBounds,(this._footView.visible=t.footers.isVisible())&&(this._footView.setBounds(0,n.y,this.width,n.height),this._footView.layoutContent(e)),n=e.rowBarBounds,this._barContainer.setBounds(0,n.y,this.width,n.height),this._barContainer.layoutContent(e)},A.prototype._getCssSelector=function(){return"rg-rowgroup-bar-container"},A);t.RowGroupBarPane=L;var O,L=(O=Tn.DataContentPane,l.__extends(M,O),M.prototype._doDispose=function(){O.prototype._doDispose.call(this)},M);t.RowGroupPane=L;var _,D=(_=sn.CellElement,l.__extends(P,_),P.prototype._doDispose=function(){_.prototype._doDispose.call(this)},_dp(P,"indent",{get:function(){return this._indent},set:function(e){this._indent=Math.max(0,e)}}),P.prototype._createDom=function(e){return e.createElement("div")},P.prototype._initDom=function(e){_.prototype._initDom.call(this,e),e=e.style,e.top="50%",e.msTransform=e.transform="translate(0px, -50%)",e.setProperty("overflow","hidden","important"),e.setProperty("pointer-events","none","important")},P.prototype._beforeDraw=function(e){},P.prototype._doUpdateContent=function(e,t,n){n[p.Utils.TextProp]=t.text,n.style.left=0<this._indent?this._indent+"px":""},P);t.RowGroupHeaderCellElement=D;var H,B=(H=nn.GridElement,l.__extends(j,H),j.prototype._doDispose=function(){this._item=null,this._cellView=null,H.prototype._doDispose.call(this)},_dp(j,"item",{get:function(){return this._item},set:function(e){this._item=e}}),_dp(j,"itemIndex",{get:function(){return this._item.index}}),j.prototype._initDom=function(e){H.prototype._initDom.call(this,e),e.style.setProperty("overflow","hidden","important")},j.prototype._getCssSelector=function(){return"rg-rowgroup-header rg-rowgroup-header-level-"+String(this._item.level)},j.prototype._doLayoutContent=function(e){var t=e.grid,e=t.rowGroup;this._cellView.indent=e.indentVisible?0:t.groupBarPane.getLevelIndent(this._item.level-1),this._cellView.updateCell(t,e.getHeaderCell(this._item),this._cellView._dom)},j);t.RowGroupHeaderElement=B;var F,I=(F=nn.GridElement,l.__extends(q,F),q.prototype._doDispose=function(){this._item=null,F.prototype._doDispose.call(this)},_dp(q,"item",{get:function(){return this._item},set:function(e){this._item=e}}),q.prototype._getCssSelector=function(){return"rg-rowgroup-header rg-rowgroup-header-level-"+String(this._item.level)},q);t.RowGroupRightHeaderElement=I;var R,U=(R=un.ItemElement,l.__extends(z,R),z.prototype._doLayoutContent=function(e){var t=e.grid,n=t.rowGroup,r=e.cellLayouts._dataCells.length,i=this._getFirstCell(e),s=this._getStartCell(e)-i,o=s,u=this._getEndCell(e)-i,a=this._item instanceof Ht.MergedGroupFooter;a&&(o=Math.max(s,this._item.parent.level-i)),this.$_refreshSpans(this._item.index,this._item.$_footerIndex,r,o,u);for(var o=0,f=0;f<r;f++){var l=this._getTableRow(e,this._domIndex+f),c=this._getBodyCells(this._domIndex+f),h=n.getFooterStyleName(this._item);l.className=h;for(var p=o;p<=u;p++){var d=c[p],v=d.layout;a&&d.merged&&d.head&&d!==d.head||(d.clearExpander(),d.clearButtons(),d.renderer2&&d.renderer2.clearContent(),d.visible&&(v.isNull?v.isProxy||d.setClassName(Yn.RowGroup.FOOTER_CELL_STYLE):(v=It.CellIndex.temp(t,this._item.index,v),v=n.getFooterCell(v),this._updateCell(t,n,v,d))))}}},z.prototype._getBodyCells=function(e){return this.parent.$_getBodyCells(e)},z.prototype._getTableRow=function(e,t){return this.parent.$_getTableRow(e,t)},z.prototype._getTableCell=function(e){return this.parent.$_getTableCell(this._domIndex,e)},z.prototype._getFirstCell=function(e){return e._firstCell},z.prototype._getLastCell=function(e){return e._lastCell},z.prototype._getStartCell=function(e){return e.getStartCell()},z.prototype._getEndCell=function(e){return e.getEndCell()},z.prototype._getBodyView=function(){return this.parent._bodyView},z.prototype._updateCell=function(e,t,n,r){var i=n.dataColumn.groupFooters.get(n.footerIndex),s=t.getFooterCellStyle(n,r.style.clear()),o=n.getSummary(),u=r.cell.firstElementChild;r.setClassName(s.styleName),p.Utils.setClassName(u,Yn.RowGroup.FOOTER_CELL_RENDERER),r.refreshFormatters(s),t.getFooterCellFormatters(i,r),o?void 0===(o=n.getTemplate(r))?u[p.Utils.TextProp]=n.getDisplayText(r):u.innerHTML=o:u[p.Utils.TextProp]=""},z.prototype.$_refreshSpans=function(e,t,n,r,i){for(var s=0;s<n;s++)for(var o=this._getBodyCells(this._domIndex+s),u=r;u<=i;u++){var a=o[u],f=a.layout,l=f.parent,c=l&&l.vertical;if(!a.spanned)if(f.isProxy)a.clear(!1);else{var h=0,p=0,d=f.getGroupFooterUserSpan(this._item.parent,t),v=d?0:f.getGroupFooterSpan(e,t)-1;if(d){var m=this._item,g=(m.parent.footerCount-m.vindex)*n,m=d.footerCount||0,y=0<m?m*n:d.rowspan||1,b=d.colspan||1,y=Math.min(y,g);a.set(b,y,!0);for(var w=0;w<y;w++)for(var E=this._getBodyCells(this._domIndex+w+s),S=0;S<b;S++){var x=E&&E[S+u];x&&x!==a&&x.span(a)}}else if(0<v){var T,N=0,C=f.vindex+1;if(c)for(;N++<v&&N<n;)p+=(T=l.getVisible(C++))._dspan,this._getBodyCells(this._domIndex+s+1)[u].span(a);else for(;N++<v&&u-r+N<o.length&&C<l.visibleCount;){if(!(T=l.getVisible(C++)))break;h+=T._cspan,o[u+N].span(a)}}f.isNull&&a.clear(!0),d||a.set(f._cspan+h,f._dspan+p,!0)}}},z);t.RowGroupFooterElement=U;var W,X=(W=U,l.__extends(V,W),V.prototype._getBodyCells=function(e){return this.parent.$_getFixedBodyCells(e)},V.prototype._getTableRow=function(e,t){return this.parent.$_getFixedTableRow(t)},V.prototype._getTableCell=function(e){return this.parent.$_getFixedTableCell(this._domIndex,e)},V.prototype._getBodyView=function(){return this.parent._fixedView},V.prototype._getFirstCell=function(e){return this._getStartCell(e)},V.prototype._getLastCell=function(e){return this._getEndCell(e)},V.prototype._getStartCell=function(e){return 0},V.prototype._getEndCell=function(e){return e.fixedLayoutCount-1},V);t.RowGroupFixedFooterElement=X;var $,J=($=U,l.__extends(K,$),K.prototype._getBodyCells=function(e){return this.parent.$_getRightBodyCells(e)},K.prototype._getTableRow=function(e,t){return this.parent.$_getRightTableRow(t)},K.prototype._getTableCell=function(e){return this.parent.$_getRightTableCell(this._domIndex,e)},K.prototype._getBodyView=function(){return this.parent._rightView},K.prototype._getFirstCell=function(e){return this._getStartCell(e)},K.prototype._getLastCell=function(e){return this._getEndCell(e)},K.prototype._getStartCell=function(e){return e.layoutCount-e.rightLayoutCount},K.prototype._getEndCell=function(e){return e.layoutCount-1},K);t.RowGroupRightFooterElement=J;var Q,L=(Q=Yt.LayerElement,l.__extends(G,Q),G.prototype._doDispose=function(){this._bodyView=this._fixedView=this._rightView=null,Q.prototype._doDispose.call(this)},_dp(G,"grid",{get:function(){return this.getAncestor(gr.GridView)}}),G.prototype.layout=function(e){this._doPrepareContent(e),this._doLayoutContent(e)},G.prototype.getHeaderView=function(e){for(var t=0,n=this._headerViews;t<n.length;t++){var r=n[t];if(r.item===e)return r}},G.prototype._initDom=function(e){Q.prototype._initDom.call(this,e),e=e.style,e.setProperty("overflow","hidden","important"),e.setProperty("pointer-events","none","important")},G.prototype._getCssSelector=function(){return"rg-rowgroup-layer"},G.prototype._doDraw=function(e){},G.prototype._doPrepareContent=function(e){this.$_prepareHeaders(e)},G.prototype.$_prepareIndents=function(e){for(var t=this._indents,n=e.rowGroupLevels+1,r=0;r<t.length;r++)t[r]=e.getLevelIndent(r);for(;t.length<n;)t.push(e.getLevelIndent(t.length));return t},G.prototype._doLayoutContent=function(e){var t,n=this.$_prepareIndents(e),r=e.$_getItems(),i=r.length,s=e.fixedItemCount,o=this._rightView,u=e.contentBounds.right-e.sideContentBounds.x,a=0,f=0,l=e.trs,c=s,h=0<s?c*l+1:c*l;for(o&&(t=e.rightContentBounds.clone(),u=Math.min(u,this.width-t.width),t.x-=this.x,t.leftBy(e.rightBarWidth));c<i;c++){var d,v,m,g=r[c];g instanceof dt.GroupItemImpl?(m=this._headerViews[a],d=e.getTableItemBounds(c),v=n[g.level],m.item=g,m.setBounds(v,d.y,u-v,d.height),m.layoutContent(e),o&&((v=this._rightHeaderViews[a]).item=g,v.setBounds(t.x,d.y,t.width,d.height),v.layoutContent(e)),a++,h++):(g instanceof dt.GroupFooter&&(this._fixedView&&((m=this._fixedFooterViews[f]).updateItem(g,h,l,!0),m.layoutContent(e)),this._rightView&&((m=this._rightFooterViews[f]).updateItem(g,h,l,!0),m.layoutContent(e)),this._bodyView&&(m=this._footerViews[f++],p.Utils.isDebugging(),m.updateItem(g,h,l,!0),m.layoutContent(e))),h+=l)}},G.prototype.$_prepareHeaders=function(e){for(var t=e.$_getItems(),n=0,r=e.fixedItemCount,i=t.length;r<i;r++)t[r]instanceof dt.GroupItemImpl&&n++;for(var s=this._headerPool,o=this._headerViews;o.length<n;)u=(u=s.pop())||new B(this.doc),this.addChild(u),o.push(u);for(;o.length>n;){var u=o.pop();this.removeChild(u),s.push(u)}if(this._rightView){for(var a=this._rightHeaderPool,f=this._rightHeaderViews;f.length<n;)u=(u=a.pop())||new I(this.doc),this.addChild(u),f.push(u);for(;f.length>n;)u=f.pop(),this.removeChild(u),a.push(u)}else for(var l=this._rightHeaderPool,c=this._rightHeaderViews;0<c.length;)u=c.pop(),this.removeChild(u),l.push(u)},G.prototype.$_prepareGroupItems=function(e,t,n,r){this._bodyView=t,this._fixedView=n,this._rightView=r},G.prototype.$_prepareGroupFooters=function(e,t){for(var n=0,r=t.fixedItemCount,i=e.length;r<i;r++)e[r]instanceof dt.GroupFooter&&n++;for(;this._footerViews.length<n;)s=(s=this._footerPool.pop())||new U(this.doc),this.addChild(s),this._footerViews.push(s);for(;this._footerViews.length>n;){var s=this._footerViews.pop();this.removeChild(s),this._footerPool.push(s)}if(this._fixedView){for(;this._fixedFooterViews.length<n;)s=(s=this._fixedFooterPool.pop())||new X(this.doc),this.addChild(s),this._fixedFooterViews.push(s);for(;this._fixedFooterViews.length>n;){var s=this._fixedFooterViews.pop();this.removeChild(s),this._fixedFooterPool.push(s)}}else for(;0<this._fixedFooterViews.length;)s=this._fixedFooterViews.pop(),this.removeChild(s),this._fixedFooterPool.push(s);if(this._rightView){for(;this._rightFooterViews.length<n;)s=(s=this._rightFooterPool.pop())||new J(this.doc),this.addChild(s),this._rightFooterViews.push(s);for(;this._rightFooterViews.length>n;)s=this._rightFooterViews.pop(),this.removeChild(s),this._rightFooterPool.push(s)}else for(;0<this._rightFooterViews.length;)s=this._rightFooterViews.pop(),this.removeChild(s),this._rightFooterPool.push(s)},G.prototype.$_getTableRow=function(e,t){return this._bodyView._tbody.children[t]},G.prototype.$_getTableCell=function(e,t){return this._bodyView._tbody.children[e].children[t]},G.prototype.$_getFixedTableRow=function(e){return this._fixedView._tbody.children[e]},G.prototype.$_getFixedTableCell=function(e,t){return this._fixedView._tbody.children[e].children[t]},G.prototype.$_getRightTableRow=function(e){return this._rightView._tbody.children[e]},G.prototype.$_getRightTableCell=function(e,t){return this._rightView._tbody.children[e].children[t]},G.prototype.$_getBodyCells=function(e){return this._bodyView._cells[e]},G.prototype.$_getFixedBodyCells=function(e){return this._fixedView._cells[e]},G.prototype.$_getRightBodyCells=function(e){return this._rightView._cells[e]},G);t.RowGroupElement=L});t(dr),dr.RowGroupHeadElement,dr.RowGroupFootElement,dr.RowGroupExpandHandle,dr.RowGroupBarContainer,dr.RowGroupBarPane,dr.RowGroupPane,dr.RowGroupHeaderCellElement,dr.RowGroupHeaderElement,dr.RowGroupRightHeaderElement,dr.RowGroupFooterElement,dr.RowGroupFixedFooterElement,dr.RowGroupRightFooterElement,dr.RowGroupElement;var vr=n(function(e,t){function i(e){return e=n.call(this,e)||this,e._enabled=!0,e._prompt="\uceec\ub7fc \ud5e4\ub354\ub97c \uc774 \uacf3\uc73c\ub85c \ub04c\uc5b4\ub2e4 \ub193\uc73c\uba74 \uadf8 \uceec\ub7fc\uc73c\ub85c \uadf8\ub8f9\ud551\ud569\ub2c8\ub2e4.",e._expandWhenGrouping=!0,e._summarizing=!0,e._commitBeforeGrouping=!0,e._commitBeforeExpand=!0,e._commitBeforeCollapse=!0,e._fixMergedColumns=!0,e._toast=new Sn.ToastOptions({visible:!1,message:"Grouping..."}),e._headerClickable=!1,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Kt.GridBaseOptions,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(i,"enabled",{get:function(){return this._enabled},set:function(e){e!=this._enabled&&(this._enabled=e,this._changed())}}),_dp(i,"prompt",{get:function(){return this._prompt},set:function(e){e!=this._prompt&&(this._prompt=e,this._changed())}}),_dp(i,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(e){e!=this._expandWhenGrouping&&(this._expandWhenGrouping=e,this._changed())}}),_dp(i,"summarizing",{get:function(){return this._summarizing},set:function(e){e!=this._summarizing&&(this._summarizing=e,this._changed())}}),_dp(i,"commitBeforeGrouping",{get:function(){return this._commitBeforeGrouping},set:function(e){this._commitBeforeGrouping=e}}),_dp(i,"commitBeforeExpand",{get:function(){return this._commitBeforeExpand},set:function(e){this._commitBeforeExpand=e}}),_dp(i,"commitBeforeCollapse",{get:function(){return this._commitBeforeCollapse},set:function(e){this._commitBeforeCollapse=e}}),_dp(i,"fixMergedColumns",{get:function(){return this._fixMergedColumns},set:function(e){this._fixMergedColumns=e}}),_dp(i,"headerClickable",{get:function(){return this._headerClickable},set:function(e){this._headerClickable=e}}),_dp(i,"toast",{get:function(){return this._toast}}),i.prototype._changed=function(){this.grid._groupingOptionsChanged(this),this._layoutOwner()},i);t.GroupingOptions=r});t(vr),vr.GroupingOptions;var mr=n(function(e,t){function i(e){return e=n.call(this,e)||this,e._field=-1,e._text="",e._textWidth=0,e._textHeight=0,e._closeHeight=0,e._padHorz=5,e._padVert=4,e._itemGap=8,e}function u(e,t){return t=s.call(this,e,t)||this,t._minHeight=0,t._itemViews=[],t._count=0,t._padHorz=16,t._padVert=10,t._itemGap=20,t.visible=!1,t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=nn.GridElement,l.__extends(i,n),i.prototype._doDispose=function(){p.Utils.detach(this._textView),p.Utils.detach(this._closeView),this._textView=this._closeView=null,n.prototype._doDispose.call(this)},_dp(i,"field",{get:function(){return this._field}}),_dp(i,"text",{get:function(){return this._text}}),i.prototype.setColumn=function(e){this._field=e.dataIndex,this._textView[p.Utils.TextProp]=this._text=e.displayText},i.prototype.isCloseButton=function(e){return e===this._closeView},i.prototype._getCssSelector=function(){return"rg-header rg-header-cell rg-group-panel-item"},i.prototype._initDom=function(e){n.prototype._initDom.call(this,e);var t=p.getDoc(e);this._textView=t.createElement("span"),this._textView.className="rg-group-panel-item-text",this._textView.style.display="inline-block",e.appendChild(this._textView),this._closeView=t.createElement("span"),this._closeView.className="rg-group-panel-item-close",e.appendChild(this._closeView)},i.prototype._doMeasure=function(e,t,n){var r=(this._textWidth=this._textView.offsetWidth)+this._itemGap+this._closeView.offsetWidth+2*this._padHorz,i=this._textHeight=this._textView.offsetHeight,i=Math.max(i,this._closeHeight=this._closeView.offsetHeight);return i+=2*this._padVert,new tn.Size(r,i)},i.prototype._doLayoutContent=function(e){},i.prototype._doDraw=function(e){var t=this._dom.clientHeight;this._textView.style.left=this._padHorz+"px",this._textView.style.top=Math.floor((t-this._textHeight)/2)+"px",this._closeView.style.left=this._padHorz+this._textWidth+this._itemGap+"px",this._closeView.style.top=Math.floor((t-this._closeHeight)/2)+"px"},i);t.GroupPanelItemView=r;var s,o=(s=nn.VisualObjectElement,l.__extends(u,s),u.prototype._doDispose=function(){this._itemViews&&this._itemViews.forEach(function(e,t){e.dispose()}),this._itemViews=null,p.Utils.detach(this._messageView),this._messageView=null,s.prototype._doDispose.call(this)},_dp(u,"minHeight",{get:function(){return this._minHeight},set:function(e){this._minHeight!==e&&(this._minHeight=e,this._doSizeChanged())}}),u.prototype._getCssSelector=function(){return"rg-group-panel"},u.prototype._initDom=function(e){s.prototype._initDom.call(this,e);var t=p.getDoc(e);e.style.overflow="hidden",t=this._messageView=t.createElement("span"),t.className="rg-group-panel-message",e.appendChild(t)},u.prototype._doMeasure=function(e,t,n){var r=e.groupingOptions;this._count=e.rowGroupLevels;var i=this.minHeight,s=0,o=this._messageView.style;if(0<this._count?o.display="none":(o.display="",this._messageView[p.Utils.TextProp]=r.prompt,s=this._messageView.offsetHeight,i=Math.max(i,s+2*this._padVert),o.left=this._padHorz+"px",o.top=(i-s)/2+"px"),this.$_prepareItemViews(e,this._count),0<this._count){for(var u=0;u<this._count;u++){var a=(f=this._itemViews[u]).measure(e,t,n);f.width=a.width,s=Math.max(s,a.height)}for(var f,i=Math.max(i,s+2*this._padVert),u=0;u<this._count;u++)(f=this._itemViews[u]).height=s,f.y=(i-s)/2}return new tn.Size(t,i)},u.prototype._doPrepareContent=function(e){},u.prototype._doLayoutContent=function(e){if(0<this._count)for(var t=this._padHorz,n=(this._padVert,0);n<this._count;n++){var r=this._itemViews[n];r.x=t,t+=this._itemGap+r.width}},u.prototype._doDraw=function(e){},u.prototype._visibleChanged=function(){this.grid&&this.grid.invalidateLayout()},u.prototype._doSizeChanged=function(){this.grid&&this.grid.invalidateLayout()},u.prototype.$_prepareItemViews=function(e,t){for(var n=this._itemViews,i=e.rowGroupFields,s=n.length;s<t;s++)n.push(new r(e.doc));for(s=0;s<t;s++){var o=n[s];o.setColumn(e.$_getVisibleRootByField(i[s],!0)),o.visible=!0,this.addChild(o)}for(s=t;s<n.length;s++)this.removeChild(n[s])},u);t.GroupPanelElement=o});t(mr),mr.GroupPanelItemView,mr.GroupPanelElement;var gr=n(function(e,t){function i(e,t,r){var i=n.call(this,e,t=void 0===t?!1:t,r=void 0===r?null:r)||this;i._rowGroupSummaryRuntime=new qt.RowGroupSummaryRuntime,i._addGridObject(i._rowGroup=new Yn.RowGroup(i)),i._rs=i._createItemSource(),i.itemSource=i._rs,i._groupingOptions=new vr.GroupingOptions(i),i._groupingOptionsChanged(i._groupingOptions),i._groupPanelView=new mr.GroupPanelElement(i.doc,i.rowGroup),i.topContentPane.addChild(i._groupPanelView);for(var s=[i._groupBarPane._headView,i._groupBarPane._footView,i._groupBarPane._barContainer],o=s.length-1;0<=o;o--){var u=s[o];i._tableViews[u.$_hash]=u}return i}function u(e){return s.call(this,e)||this}function f(e){var t=a.call(this,e,"gridSelectionTool")||this;return t._panelCellReq=new d,t._panelCellFeedback=new g(e.doc),t._groupingReq=new x,t}function v(){var e=h.call(this)||this;return e._field=-1,e}function y(e){return e=m.call(this,e)||this,e._no=!1,e}function E(e,t,n){return e=b.call(this,e,"groupPanelCellTracker")||this,e._request=t,e._feedback=n,e}function T(){return S.call(this)||this}function k(e,t,n){return e=N.call(this,e,"groupingCellTracker")||this,e._request=t,e._feedback=n,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=ir.GridBase,l.__extends(i,n),i.prototype._doDispose=function(){this._rs.dispose(),this._rs=null,this._groupPanelView=this.groupPanelView.dispose(),this._rowGroup=this._rowGroup.dispose(),this._groupingOptions=this._groupingOptions.dispose(),n.prototype._doDispose.call(this)},i.prototype._doCreateOtherElements=function(){this._groupView=new dr.RowGroupElement(this.doc),this.addElement(this._groupView)},_dp(i,"maxRowCount",{get:function(){return this._rs.maxRowCount},set:function(e){this._rs.maxRowCount=e}}),_dp(i,"rowGroup",{get:function(){return this._rowGroup}}),_dp(i,"groupPanelView",{get:function(){return this._groupPanelView}}),_dp(i,"groupBarPane",{get:function(){return this._groupBarPane}}),_dp(i,"groupView",{get:function(){return this._groupView}}),_dp(i,"groupingOptions",{get:function(){return this._groupingOptions}}),_dp(i,"paged",{get:function(){return 0<=this._rs.page}}),_dp(i,"page",{get:function(){return this._rs.page},set:function(e){this.setPage(e)}}),_dp(i,"pageCount",{get:function(){return this._rs.pageCount},set:function(e){var t=this._rs.pageCount;this._rs.pageCount=e,this._rs.pageCount!=t&&this.$_firePageCountChanged(this._rs.pageCount)}}),_dp(i,"pageSorting",{set:function(e){}}),_dp(i,"rowGroupLevels",{get:function(){return this._rs.groupLevels}}),_dp(i,"rowGroupFields",{get:function(){return this._rs.groupByFields}}),_dp(i,"rowGrouped",{get:function(){return this._rs.grouped}}),_dp(i,"mergedRowGrouped",{get:function(){return this._rs.mergedGrouped}}),_dp(i,"rowGroupSummaryRuntime",{get:function(){return this._rowGroupSummaryRuntime}}),i.prototype.isTree=function(){return!1},i.prototype._beforeChangeLayout=function(){this.ungroupBy()},i.prototype.isGrouped=function(e){return e&&0<e.groupLevel},i.prototype.isGroupedField=function(e){return this._rs.isGroupedField(e)},i.prototype.isSortByLabelColumn=function(e){return this.columnByField(e).sortByLabel},i.prototype.getGroupLevel=function(e){return this._rs.getGroupLevel(e)},i.prototype.groupByFieldNames=function(e,t,n){void 0===n&&(n=c.SortDirection.ASCENDING);var r=this.dataSource;if(r&&e&&0<e.length){for(var i=[],s=0;s<e.length;s++){var o=e[s],u=r.getFieldIndex(o),o=this.columnByField(o),o=o&&this.layoutByColumn(o);!o||this.rowGroup.mergeMode&&o.parent!=this.activeCellLayout._root||0<=u&&i.push(u)}0<i.length&&(t=void 0===t?this.rowGroup.sorting:t,this.groupBy(i,t,n))}else this.ungroupBy()},i.prototype.groupBy=function(e,t,n){this.isItemEditing(null)||this.toastManager.show(this.groupingOptions.toast,!0,function(){this.$_doGroupBy(e,t,n)}.bind(this))},i.prototype.clearGroupBy=function(){this.isItemEditing(null)||(this._rs.setLabelComparer(null),this._rs.groupBy(null,!0,c.SortDirection.ASCENDING),this.$_doRowGroupFooterMergeChanged(),this.$_clearColumnMergeGrouped())},i.prototype.ungroupBy=function(){this.clearGroupBy()},i.prototype.addGroupBy=function(e,t){t&&(this.isItemEditing(null)||this.isGrouped(t)||t.layout&&t.layout.visible&&(!t.layout.isRoot&&this.rowGroup.mergeMode||0<=t.dataIndex&&this.toastManager.show(this.groupingOptions.toast,!0,function(){this.$_doAddGroupBy(e,t)}.bind(this))))},i.prototype.removeGroupByField=function(e){e<0||this.isItemEditing(null)||this.isGroupedField(e)&&(this._rs.groupByFields,this._rs.removeGroupBy(e,!1),this._rs.groupByFields.length,this.$_doRowGroupFooterMergeChanged())},i.prototype.removeGroupBy=function(e){this.removeGroupByField(e.dataIndex)},i.prototype.expand=function(e,t,n,r){this.isItemEditing(null)||this._rs.expand(e,t,n,r)},i.prototype.expandAll=function(e,t){this.isItemEditing(null)||this._rs.expandAll(e,t)},i.prototype.collapse=function(e,t,n){this.isItemEditing(null)||this._rs.collapse(e,t,n)},i.prototype.collapseAll=function(e){this.isItemEditing(null)||this._rs.collapseAll(e)},i.prototype.isGroupedColumn=function(e){return e&&0<=e.dataIndex&&this._rs.isGroupedField(e.dataIndex)},i.prototype.getSortFields=function(){return this.itemSource.getSortFields()},i.prototype.getSortDirections=function(){return this.itemSource.getSortDirections()},i.prototype.getSortCases=function(){return this.itemSource.getSortCases()},i.prototype.setPaging=function(e,t,n){this._rs.setPaging(e,t=void 0===t?10:t,n=void 0===n?-1:n,null)},i.prototype.setPage=function(e,t){var n;void 0===t&&(t=-1),(e=Math.max(0,Math.min(e,this._rs.pageCount-1)))!=this._rs.page&&(n=!1,this.$_firePageChanging(e)&&(this._rs.setPage(e,t),n=!0),n&&this.$_firePageChanged(this._rs.page))},_dp(i,"isLayer",{get:function(){return!1}}),_dp(i,"summarizer",{get:function(){return this._rs.summarizer}}),i.prototype._createSidePane=function(){return this._groupBarPane=new dr.RowGroupBarPane(this.doc)},i.prototype.isSidePaneVisible=function(){return this.rowGrouped&&!this.mergedRowGrouped&&this._rowGroup.indentVisible},i.prototype._createLayoutManager=function(){return new o(this)},i.prototype.canGrouping=function(){return this._groupPanelView.visible},i.prototype._canMerge=function(){return!0},_dp(i,"undoable",{get:function(){return this._rs.undoable},set:function(e){this._rs.undoable=e}}),_dp(i,"canUndo",{get:function(){return this._rs.canUndo}}),_dp(i,"canRedo",{get:function(){return this._rs.canRedo}}),_dp(i,"undoing",{get:function(){return this._rs.undoing}}),_dp(i,"redoing",{get:function(){return this._rs.redoing}}),i.prototype.undo=function(){return!!this._rs.canUndo&&(this._rs.cancelWhenLastUndo=this.editOptions.cancelWhenLastUndo,this.editController.cancelEditor(!0),this._rs.undo(),!0)},i.prototype.redo=function(){return!!this._rs.canRedo&&(this._rs.redo(),!0)},i.prototype.execute=function(e){this._rs.execute(e)},i.prototype.clearCommandStack=function(e){this._rs.clearCommandStack(e=void 0===e?!0:e)},i.prototype.getRowView=function(e,t){return t instanceof dt.GroupItemImpl?this._groupView.getHeaderView(t):n.prototype.getRowView.call(this,e,t)},i.prototype._doSortItems=function(e,t,n){var r=this.itemSource;r.setLabelComparer(this._doPrepareComparer(e)),r.orderBy(e,t,n)},i.prototype._doColumnFiltersChanged=function(e,t){this.applyFilters(e,t),this.invalidateLayout()},i.prototype.setOptions=function(e){var t;e&&(t=this._rs,void 0!==e.hideDeleted&&(t.hideDeleted=e.hideDeleted),void 0!==e.hideDeletedRows&&(t.hideDeleted=e.hideDeletedRows),void 0!==e.inclusiveFiltering&&(t.inclusiveFiltering=e.inclusiveFiltering),void 0!==e.filterOr&&(t.inclusiveFiltering=e.filterOr),void 0!==e.summaryMode&&(t.summaryMode=e.summaryMode),void 0!==e.groupSummaryMode&&(t.groupSummaryMode=e.groupSummaryMode),void 0!==e.sortMode&&(t.sortMode=e.sortMdoe),void 0!==e.filterMode&&(t.filterMode=e.filterMode),n.prototype.setOptions.call(this,e))},i.prototype._visualObjectChanged=function(e){n.prototype._visualObjectChanged.call(this,e),e instanceof $t.CheckBar&&(this._rs.checkableExpression=e.checkableExpression)},i.prototype.resetCheckables=function(){this._rs.resetCheckables()},i.prototype.applyCheckables=function(){this._rs.applyCheckables()},i.prototype.getCheckedRows=function(e,t,n){var r;if(t)for(var i=[],s=0,o=this.itemCount;s<o;s++)(r=this.getItem(s)).checked&&0<=r.dataRow&&i.push(r.dataRow);else i=this._rs.getCheckedRows(n);return e&&i.sort(function(e,t){return e-t}),i},i.prototype.getCheckedItemIndices=function(e){for(var t=[],n=0,r=this.itemCount;n<r;n++){var i=this.getItem(n);i.checked&&(e||0<=i.dataRow)&&t.push(i.index)}return t},i.prototype.getCheckedItems=function(e){for(var t=[],n=0,r=this.itemCount;n<r;n++){var i=this.getItem(n);i.checked&&(e||0<=i.dataRow)&&t.push(i)}return t},i.prototype.findGroupItem=function(e,t){var n=this.getGroupLevel(t);if(0<n)for(var r=e instanceof dt.GroupItem?e:e.parent;r;){if(r.level==n)return r;r=r.parent}return null},i.prototype.getItemOfModel=function(e){return 0<=e.itemIndex?this.getItem(e.itemIndex):0<=e.id?this._rs.getGroupItem(e.id):null},i.prototype.getJsonRows=function(){return this._rs.getJsonRows()},i.prototype.getIndicatorIndex=function(e){return this._rs.getDisplayItemIndex(e)},i.prototype.getFirstRow=function(){return this._rs.getFirstRow()},i.prototype.getLastRow=function(){return this._rs.getLastRow()},i.prototype.getPrevRow=function(e){return this._rs.getPrevRow(e)},i.prototype.getNextRow=function(e){return this._rs.getNextRow(e)},i.prototype._doMoveRows=function(e,t){t=t&&t.dataRow;if(0<=t){for(var n=[],r=0,i=e;r<i.length;r++){var s=i[r],s=s&&s.dataRow;0<=s&&n.push(s)}if(0<n.length)return this.dataSource.moveRowList(n,t)}},i.prototype._getCellTypeOf=function(e){return e instanceof dr.RowGroupHeadElement?"groupHead":e instanceof dr.RowGroupFootElement?"groupFoot":e instanceof dr.RowGroupBarContainer?"groupBar":void 0},i.prototype.updatePastedRow=function(e,t,n){var r=e.dataRow;0<=r&&(e=this.dataSource)&&e.updateRow(r,t,n)},i.prototype.appendPastedRow=function(e){var t=this.dataSource;t&&t.appendRow(e)},i.prototype.getSummaryCount=function(e){return"groupFooter"===e?this.rowGroup.footers.count:n.prototype.getSummaryCount.call(this,e)},i.prototype._createItemSource=function(){return new hr.GridItemProvider(!0,this._rowGroup)},i.prototype.$_rowGroupChanged=function(e){this._doRowGroupMergeModeChanged()},i.prototype._groupingOptionsChanged=function(e){this._rs.expandWhenGrouping=e.expandWhenGrouping},i.prototype.$_rowGroupAdornmentsChanged=function(e){this._rs._groupedProvider.resetAdornments(e.expandedAdornments,e.collapsedAdornments,this.handler,e.createFooterCallback,e.indentVisible)},i.prototype.$_getVisibleRootByField=function(e,t){for(var n=this.visibleLayoutCount,r=0;r<n;r++){var i=this.getVisibleLayout(r),i=i instanceof Ft.CellLayoutColumnItem&&p.Utils.cast(i.firstColumn,jt.DataColumn);if(i&&i.dataIndex==e)return i}return t?this.columnByField(e):null},i.prototype.$_clearColumnMergeGrouped=function(){this._activeCellLayout._clearMergeGrouped()},i.prototype._doRowGroupMergeModeChanged=function(){n.prototype._doRowGroupMergeModeChanged.call(this),this.$_clearColumnMergeGrouped();var e=this._rs.groupByFields;if(this.rowGroup.mergeMode){if(e&&0<e.length)for(var t=e.length-1;0<=t;t--){var r=this.$_getVisibleRootByField(e[t],!1);r?r.$_setMergeGrouped(!0):e.splice(t,1)}this._rs.groupByMode(e,!0)}else this._rs.groupByMode(e,!1)},i.prototype.$_doRowGroupFooterMergeChanged=function(){},i.prototype.$_doGroupBy=function(e,t,n){var r,i=this.dataSource;if(this.$_clearColumnMergeGrouped(),i&&e&&0<(r=e.length)){for(var s=i.fieldCount,o=[],u=0;u<r;u++)0<=e[u]&&e[u]<s&&o.push(e[u]);if(0<o.length){if(this.rowGroup.mergeMode)for(u=o.length-1;0<=u;u--){var a=this.$_getVisibleRootByField(o[u],!1);a?a.$_setMergeGrouped(!0):o.splice(u,1)}0<o.length&&(this._rs.setLabelComparer(this._doPrepareComparer(o)),this._rs.groupBy(o,t,n))}}else this._rs.setLabelComparer(null),this._rs.groupBy(null,!0,c.SortDirection.ASCENDING);this.$_doRowGroupFooterMergeChanged()},i.prototype.$_doAddGroupBy=function(e,t){var n=t.dataIndex;t.$_setMergeGrouped(this.rowGroup.mergeMode);try{var r=this.rowGroupFields?this.rowGroupFields.slice():[];r.push(n),this._rs.setLabelComparer(this._doPrepareComparer(r)),this._rs.addGroupBy(e,n,this.rowGroup.sorting),this.$_doRowGroupFooterMergeChanged()}catch(e){throw t.$_setMergeGrouped(!1),e}},i.prototype.$_clearGroupedIndices=function(){for(var e=this.columnCount-1;0<=e;e--){var t=p.Utils.cast(this.getColumn(e),jt.DataColumn);t&&t.$_setGroupLevel(this._rs.getGroupLevel(-1))}},i.prototype.$_setGroupedIndices=function(){for(var e=this.columnCount-1;0<=e;e--){var t=p.Utils.cast(this.getColumn(e),jt.DataColumn);t&&t.$_setGroupLevel(this._rs.getGroupLevel(t.dataIndex))}},i.prototype.$_firePageChanging=function(e){return this.fireConfirmEvent(i.PAGE_CHANGING,e)},i.prototype.$_firePageChanged=function(e){this.fireEvent(i.PAGE_CHANGED,e)},i.prototype.$_firePageCountChanged=function(e){this.fireEvent(i.PAGE_COUNT_CHANGED,e)},i.prototype.$_fireGrouping=function(e){return this.fireConfirmEvent(i.GROUPING,e)},i.prototype.$_fireGrouped=function(){this.fireEvent(i.GROUPED)},i.prototype.$_fireExpanding=function(e){return this.fireConfirmEvent(i.EXPANDING,e)},i.prototype.$_fireExpanded=function(e){this.fireEvent(i.EXPANDED,e)},i.prototype.$_fireCollapsing=function(e){return this.fireConfirmEvent(i.COLLAPSING,e)},i.prototype.$_fireCollapsed=function(e){this.fireEvent(i.COLLAPSED,e)},i.prototype.onGroupedItemProviderGrouping=function(e,t){return this.$_fireGrouping(t)},i.prototype.onGroupedItemProviderGrouped=function(e){this.selections.clear(),this.$_clearGroupedIndices();var t=this._rs.groupByFields;if(t&&0<t.length&&this.$_setGroupedIndices(),this.rowGroup.mergeMode){for(var n=[],r=this.visibleLayoutCount,i=0;i<r;i++){var s=this.getVisibleLayout(i),o=p.Utils.cast(s.firstColumn,jt.DataColumn),u=s.merges;o&&(o.mergeGrouped&&o.groupLevel<=0?(u&&u.clear(),o.$_setMergeGrouped(!1)):o.mergeGrouped&&(u=u||new Bt.ColumnMergeManager(s),n.push(o)))}if(0<(r=n.length))for(n=n.sort(function(e,t){return e.groupLevel-t.groupLevel}),i=0;i<r;i++)(u=n[i].layout.merges).clear(),u.initialize(Bt.GridMergeRule.INIT_COUNT),n[i].layout.vindex=i;for(r=this.visibleLayoutCount,i=0;i<r;i++)(o=p.Utils.cast(this.getVisibleLayout(i).firstColumn,jt.DataColumn))&&!o.mergeGrouped&&(u=o.layout.merges)&&(u.clear(),u.initialize(Bt.GridMergeRule.INIT_COUNT))}this.requestPrepareEditor(),this._syncHeadCheck([]),this.$_fireGrouped(),this._cellLayoutChanged(),this.container.defaultTool.layoutChanged()},i.prototype.onGroupedItemProviderExpand=function(e,t){return this.$_fireExpanding(t)},i.prototype.onGroupedItemProviderExpanded=function(e,t){this.$_fireExpanded(t)},i.prototype.onGroupedItemProviderCollapse=function(e,t){return this.$_fireCollapsing(t)},i.prototype.onGroupedItemProviderCollapsed=function(e,t){this.$_fireCollapsed(t)},i.PAGE_CHANGING="onGridViewPageChanging",i.PAGE_CHANGED="onGridViewPageChanged",i.PAGE_COUNT_CHANGED="onGridViewPageCountChanged",i.GROUPING="onGridViewGrouping",i.GROUPED="onGridViewGrouped",i.EXPANDING="onGridViewExpanding",i.EXPANDED="onGridViewExpanded",i.COLLAPSING="onGridViewCollapsing",i.COLLAPSED="onGridViewCollapsed",i);t.GridView=r;var s,o=(s=cn.GridLayoutManager,l.__extends(u,s),_dp(u,"panelVisible",{get:function(){return this.grid.groupPanelView.visible}}),u.prototype.getLevelIndent=function(e){var t=this.grid;if(this.mergedRowGrouped){for(var n=this.fixedLayoutCount,r=0,i=0;i<e&&i<n;i++)r+=this.getFixedLayoutWidth(i);for(i=n;i<e;i++)r+=this.getLayoutWidth(i-n);return n?n<e?r=Math.max(this.fixedWidth,r+this.fixedBarWidth-this.leftPos):r+=this.fixedBarWidth:r-=this.leftPos,r}return t.rowGroup.indentVisible?t.groupBarPane.getLevelIndent(e):0},_dp(u,"grid",{get:function(){return this._grid}}),_dp(u,"topPanelVisible",{get:function(){return this.panelVisible}}),_dp(u,"rowGrouped",{get:function(){return!this.grid.rowGroup.mergeMode&&this.grid.rowGrouped}}),_dp(u,"mergedRowGrouped",{get:function(){return this.grid.rowGroup.mergeMode&&this.grid.rowGrouped}}),_dp(u,"rowGroupLevels",{get:function(){return this.grid.rowGroupLevels}}),_dp(u,"rowGroupFields",{get:function(){return this.grid.rowGroupFields}}),u.prototype.$_groupView=function(e){return this.grid._groupView},u.prototype.setLeftPos=function(e,t){s.prototype.setLeftPos.call(this,e,t),e=this.grid,t=e.mergedRowGrouped,t=this.$_groupView(t),t.visible&&this.$_layoutRowGroupView(e,t)},u.prototype._prepareItems=function(){s.prototype._prepareItems.call(this);var e,t,n,r=this.grid;r.rowGrouped&&(n=r.mergedRowGrouped,e=this.$_groupView(n),t=this.contentBounds.isEmpty?null:r.bodyView,n=this.fixedContentBounds.isEmpty?null:r.fixedBodyView,r=this.rightContentBounds.isEmpty?null:r.rightBodyView,e.$_prepareGroupItems(this,t,n,r),e.$_prepareGroupFooters(this._items,this))},u.prototype._doMeasureTopPane=function(e,t){e.groupingOptions;var n=e.groupPanelView;this.panelVisible?(e=n.measure(e,t.width,t.height),t.height=e.height):(t.height=1,t.width=1)},u.prototype._doLayoutTopPane=function(e,t){e=e.groupPanelView,e.setBounds(0,0,t.width,t.height),this.panelVisible&&e.layoutContent(this)},u.prototype._doLayout=function(e,t){s.prototype._doLayout.call(this,e,t)},u.prototype._adjustLayout=function(e,t){s.prototype._adjustLayout.call(this,e,t);var n=e.rowGrouped,r=e.mergedRowGrouped,t=e._sideContentPane;t&&this._layoutSidePane(e,t),t=this.$_groupView(r),this.$_groupView(!r).visible=!1,(t.visible=n)&&this.$_layoutRowGroupView(e,t)},u.prototype.isMergedCell=function(e){var t=this.grid;if(t.rowGroup.mergeMode&&t.isGroupedColumn(e.dataColumn))return!0;t=e.layout;if(t&&t.isColumn&&e.layout.merged){t=t.merges;if(t)return null!=t.getRoom(e)}return!1},u.prototype.$_layoutRowGroupView=function(e,t){var n=this.contentBounds,r=this.sideContentBounds.clone();r.top=n.y+this.bodyBounds.y,r.right=this.rightContentBounds.right,r.bottom=Math.min(this.footBounds.y+n.y,n.bottom),t.setRect(r),t.layout(this)},u);t.GridViewLayoutManager=o;var a,r=(a=qn.GridSelectionTool,l.__extends(f,a),f.prototype._doDispose=function(){this._panelCellReq=null,a.prototype._doDispose.call(this)},f.prototype._doMouseDown=function(e){var t=e.mouseX,n=e.mouseY,r=this.grid,i=(this.findElementAt(t,n,!1),this.mouseEventTarget),s=p.getWin(e.target);if(i instanceof s.HTMLElement&&un.RowElement.isExpander(i)){var o,t=this._findTableCell(i),n=r.getTableView(t);n instanceof fn.GridBodyElement&&(o=r.getDataCellIndex(t,this._tempIndex),o=n.getCellAt(r.layoutManager,o),o=r.findGroupItem(o.item,o.layout.firstColumn.dataIndex),this.$_toggleExpanded(r,o))}else if(i instanceof s.HTMLElement&&dr.RowGroupExpandHandle.isExpander(i))return void ((o=(o=r.getItem(i[c.T_ROW]))instanceof dt.GroupFooter?o.parent:o)instanceof dt.GroupItemImpl&&this.$_toggleExpanded(r,o));a.prototype._doMouseDown.call(this,e)},f.prototype._doClick=function(e){var t=e.mouseX,n=e.mouseY,r=this.grid,n=this.findElementAt(t,n,!1);n instanceof mr.GroupPanelItemView&&n.isCloseButton(e.target)&&r.removeGroupByField(n.field),a.prototype._doClick.call(this,e)},f.prototype._doDblClick=function(e){var t=e.mouseX,n=e.mouseY,r=this.grid,n=this.findElementAt(t,n,!1);n instanceof dr.RowGroupHeaderElement&&r.groupingOptions.headerClickable?this.$_toggleExpanded(r,n.item):a.prototype._doDblClick.call(this,e)},f.prototype._getEditRequest=function(e,t,n,r,i,s,o){i=a.prototype._getEditRequest.call(this,e,t,n,r,i,s,o);if(i)return i;s=this.grid,o=this.findElementAt(n,r,!1),i=this._findTableCell(e),e=i&&s.getTableView(i);if(e instanceof ln.HeaderElement){e=e.layoutByCell(i),i=e.firstColumn;if(s.groupPanelView.visible&&i&&i.groupable&&s.groupingOptions.enabled)return s=s.layoutManager.getHeaderCellRect(e),this._groupingReq.init(e,s,n,r)}return o instanceof mr.GroupPanelItemView?this._panelCellReq.init(o,n,r):void 0},f.prototype._getDragTracker=function(e,t,n){var r=this.grid;return e instanceof d?new w(r,e,this._panelCellFeedback):e instanceof x?new C(r,e,this._panelCellFeedback):a.prototype._getDragTracker.call(this,e,t,n)},f.prototype.getNextRequest=function(e,t,n,r){if(e instanceof Ln.ColumnMoveRequest&&e.layout instanceof Ft.CellLayoutColumnItem){var i=this.grid,s=e.layout.firstColumn;if(i.groupingOptions.enabled&&i.layoutManager.topPanelVisible&&s instanceof jt.DataColumn&&s.groupable&&r<i.groupPanelView.bottom)return this._groupingReq.init(e.layout,t,n,r)}},f.prototype._getClickData=function(e,t){if(e instanceof dr.RowGroupHeaderElement)return qn.ClickData.getItem("groupHeader",e.itemIndex,null);if(e instanceof mr.GroupPanelElement)return qn.ClickData.getData("groupPanel");if(e instanceof mr.GroupPanelItemView){if(!e.isCloseButton(t.target))return t=this.grid.dataSource.getOrgFieldName(e.field),qn.ClickData.getField("groupColumn",e.field,t)}else if(e instanceof ir.GridBase)return qn.ClickData.getData("gridEmpty")},f.prototype.$_toggleExpanded=function(e,t){t.expanded?e.collapse(t,!1,!1):e.expand(t,!1,!1,0)},f);t.GridViewSelectionTool=r;var h,d=(h=mn.EditRequest,l.__extends(v,h),_dp(v,"source",{get:function(){return this._source}}),_dp(v,"x",{get:function(){return this._x}}),_dp(v,"y",{get:function(){return this._y}}),_dp(v,"field",{get:function(){return this._field}}),v.prototype.init=function(e,t,n){return this._source=e,this._x=t,this._y=n,this._field=e.field,this},_dp(v,"cursor",{get:function(){return"pointer"}}),v),m,g=(m=Yt.VisualElement,l.__extends(y,m),y.prototype.setField=function(e,t){void 0===t&&(t=!1),this._textView[p.Utils.TextProp]=e,this._noMark.style.display=(this._no=t)?"inline-block":"none"},y.prototype._getCssSelector=function(){return"rg-header rg-header-cell rg-group-panel-item rg-group-panel-cell-feedback"},y.prototype._initDom=function(e){m.prototype._initDom.call(this,e);var t=this.doc;this._textView=t.createElement("span"),this._textView.className="rg-group-panel-item-text",this._textView.style.display="inline-block",e.appendChild(this._textView),this._noMark=t.createElement("span"),this._noMark.className="rg-group-panel-no-mark",this._noMark.style.display="none",e.appendChild(this._noMark)},y.prototype._doDraw=function(e){var t=this._textView.offsetWidth,n=this._textView.offsetHeight,r=this._textView.style;r.left=Math.max(0,(this.width-t)/2)+"px",r.top=Math.max(0,(this.height-n)/2)+"px",this._no&&(t=this._noMark.offsetWidth,r=this._noMark.offsetHeight,(n=this._noMark.style).left=Math.max(0,(this.width-t)/2)+"px",n.top=Math.max(0,(this.height-r)/2)+"px")},y),b,w=(b=An.GridDragTracker,l.__extends(E,b),E.prototype._doDispose=function(){this._request=null,this._feedback=null,b.prototype._doDispose.call(this)},E.prototype.getRequest=function(){return this._request},E.prototype._doStart=function(e,t,n,r){var i=this.grid,s=(i.layoutManager,this._request.source.boundsByContainer());return this._feedback.setRect(s),this._feedback.setField(this._request.source.text),this._feedback.visible=!0,i.addFeedbackElement(this._feedback),this._offsetX=t-s.x,this._offsetY=n-s.y,!0},E.prototype._doDrag=function(e,t,n){return t-=this._offsetX,n-=this._offsetY,this._feedback.move(t,n),!0},E.prototype._doCompleted=function(){var e=this.grid,t=e.layoutManager;this.currentY>t.contentBounds.y&&e.removeGroupByField(this._request.field)},E.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},E),S,x=(S=mn.EditRequest,l.__extends(T,S),T.prototype._doDispose=function(){this._layout=null,this._source=null,S.prototype._doDispose.call(this)},_dp(T,"layout",{get:function(){return this._layout}}),_dp(T,"source",{get:function(){return this._source}}),_dp(T,"x",{get:function(){return this._x}}),_dp(T,"y",{get:function(){return this._y}}),T.prototype.init=function(e,t,n,r){return this._layout=e,this._source=t,this._x=n,this._y=r,this},_dp(T,"cursor",{get:function(){return"pointer"}}),T),N,C=(N=An.GridDragTracker,l.__extends(k,N),k.prototype._doDispose=function(){this._request=null,this._feedback=null,N.prototype._doDispose.call(this)},k.prototype.getRequest=function(){return this._request},k.prototype._doStart=function(e,t,n,r){var i=this.grid,s=this._request.source,o=s instanceof Yt.VisualElement?s.boundsByContainer():s,s=i.isGroupedField(this._request.layout.firstColumn.dataIndex);return this._feedback.setRect(o),this._feedback.setField(this._request.layout.firstColumn.displayText,s),this._feedback.visible=!0,i.addFeedbackElement(this._feedback),this._offsetX=t-o.x,this._offsetY=o.height/3,!0},k.prototype._doDrag=function(e,t,n){return t-=this._offsetX,n-=this._offsetY,this._feedback.move(t,n),!0},k.prototype._doCompleted=function(){var e,t=this.grid,n=t.layoutManager;this.currentY<n.contentBounds.y&&(e=t.$_getVisibleRootByField(this._request.layout.firstColumn.dataIndex,!0),t.addGroupBy(n.rowGroupLevels,e))},k.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},k)});t(gr),gr.GridView,gr.GridViewLayoutManager,gr.GridViewSelectionTool;var yr=n(function(e,t){function i(){var e=n.call(this)||this;return e._modal=!1,e._items=[],e._itemChanged=!1,e._visibleChanged=!1,e._visibleItems=[],e._header=new d(e),e._footer=new E(e),e._body=new g(e),e}function u(){return s.call(this)||this}function f(e){var t=a.call(this)||this;return t._visible=!0,t._styleName="",t._owner=e,t}function v(e){return e=h.call(this,e)||this,e._height=24,e._labelCell={displayText:"Field"},e._valueCell={displayText:"Value"},e}function b(e){return e=m.call(this,e)||this,e._minRowHeight=24,e}function S(e){return e=w.call(this,e)||this,e._height=26,e}function N(){var e=T.call(this)||this;return e._visible=!0,e._height=0,e._vindex=-1,e}function L(e){var t=C.call(this)||this;return t._text="",t._owner=e,t}function O(){var e=A.call(this)||this;return e._header=new k(e),e}function D(){var e=M.call(this)||this;return e._items=[],e._expanded=!0,e}function B(){var e=P.call(this)||this;return e._editButtonVisibility=c.ButtonVisibility.ALWAYS,e}function I(){var e=j.call(this)||this;return e._dirty=!1,e._valueIndex=-1,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=x.EventAware,l.__extends(i,n),i.prototype._doDispose=function(){this._header=this._header.dispose(),this._footer=this._footer.dispose(),this._body=this._body.dispose(),n.prototype._doDispose.call(this)},i.prototype.itemVisibleChanged=function(e){},i.prototype.itemChanged=function(e){},_dp(i,"header",{get:function(){return this._header}}),_dp(i,"footer",{get:function(){return this._footer}}),_dp(i,"body",{get:function(){return this._body}}),_dp(i,"itemCount",{get:function(){return this._items.length}}),_dp(i,"visibleItemCount",{get:function(){return this._visibleItems.length}}),i.prototype.load=function(e){e&&(e.title&&this._header.assignFrom(e.title),e.footer&&this._footer.assignFrom(e.footer),e.body&&this._body.assignFrom(e.body),p.Utils.isArray(e.items)&&this.$_loadItems(e.items,this._items=[]),this._itemChanged=!0,this._changed())},i.prototype.getItem=function(e){return this._items[e]},i.prototype.getVisibleItem=function(e){return this._visibleItems[e]},i.prototype._changed=function(){this.fireEvent(i.CHANGED)},i.prototype.$_loadItems=function(e,t,n){void 0===n&&(n=null);for(var r=0,i=e;r<i.length;r++){var s,o=i[r];o&&(s=void 0,!n&&p.Utils.isArray(o.items)?(s=new _,this.$_loadItems(o.items,s._items,s)):"string"==typeof o.template?s=new F:"string"!=typeof o.column&&"string"!=typeof o||(s=new H),s.assignFrom(o),s&&(n?(n._items.push(s),s.$_attached(n)):(this._items.push(s),s.$_attached(this))))}},i.prototype.$_refreshItems=function(){var e=this._items;if(e)for(var t=e.length-1;0<=t;t--){var n=e[t];n._index=t,n._vindex=-1,n.$_refresh(this)}},i.prototype.$_resetvisibles=function(){for(var e=this._visibleItems=[],t=0,n=this._items;t<n.length;t++){var r=n[t];if(r.visible&&(e.push(r),r._vindex=e.length-1,r instanceof _&&r.expanded))for(var i=0,s=r._items;i<s.length;i++){var o=s[i];o.visible&&(e.push(o),o._vindex=e.length-1)}}},i.prototype.$_prepareLayout=function(){this._itemChanged?(this.$_refreshItems(),this._itemChanged=!1,this.$_resetvisibles(),this._visibleChanged=!1):this._visibleItems&&(this.$_resetvisibles(),this._visibleChanged=!1)},i.CHANGED="onFormChanged",i);t.Form=r;var s,o=(s=y.Base,l.__extends(u,s),u.prototype._doDispose=function(){s.prototype._doDispose.call(this)},u.prototype._changed=function(){},u);t.FormObject=o;var a,r=(a=o,l.__extends(f,a),f.prototype._doDispose=function(){a.prototype._doDispose.call(this)},_dp(f,"owner",{get:function(){return this._owner}}),_dp(f,"visible",{get:function(){return this._visible},set:function(e){e!=this._visible&&(this._visible=e,this._changed())}}),_dp(f,"styleName",{get:function(){var e=this._getDefaultStyle();return this._styleName&&(e+=" "+this._styleName),e}}),f.prototype._changed=function(){a.prototype._changed.call(this)},f);t.FormSection=r;var h,d=(h=r,l.__extends(v,h),v.prototype._doDispose=function(){h.prototype._doDispose.call(this)},_dp(v,"height",{get:function(){return this._height},set:function(e){e!=this._height&&(this._height=e,this._changed())}}),_dp(v,"labelCell",{get:function(){return this._labelCell},set:function(e){this._labelCell=e="string"==typeof e?{displayText:e}:e}}),_dp(v,"valueCell",{get:function(){return this._valueCell},set:function(e){this._valueCell=e="string"==typeof e?{displayText:e}:e}}),v.prototype._getDefaultStyle=function(){return v.STYLE_NAME},v.STYLE_NAME="rg-form-header",v);t.FormHeader=d;var m,g=(m=r,l.__extends(b,m),b.prototype._doDispose=function(){m.prototype._doDispose.call(this)},_dp(b,"minRowHeight",{get:function(){return this._minRowHeight},set:function(e){e!=this._minRowHeight&&(this._minRowHeight=e,this._changed())}}),b.prototype._getDefaultStyle=function(){return b.STYLE_NAME},b.STYLE_NAME="rg-form-body",b);t.FormBody=g;var w,E=(w=r,l.__extends(S,w),S.prototype._doDispose=function(){w.prototype._doDispose.call(this)},_dp(S,"height",{get:function(){return this._height},set:function(e){e!=this._height&&(this._height=e,this._changed())}}),_dp(S,"popupMenu",{get:function(){return this._popupMenu},set:function(e){e!=this._popupMenu&&(this._popupMenu=e,this._popupMenuName="string"==typeof e?e:null)}}),S.prototype.getPopupMenuName=function(e){return this._popupMenuName||(this._popupMenu?(this._popupMenuName="form_footer_menu",e.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this._popupMenuName):null)},S.prototype._getDefaultStyle=function(){return S.STYLE_NAME},S.STYLE_NAME="rg-form-footer",S);t.FormFooter=E;var T,r=(T=y.Base,l.__extends(N,T),N.prototype._doDispose=function(){T.prototype._doDispose.call(this)},_dp(N,"visible",{get:function(){return this._visible},set:function(e){e!=this._visible&&(this._visible=e)}}),_dp(N,"vindex",{get:function(){return this._vindex}}),N.prototype.canEdit=function(){return!1},N.prototype.$_attached=function(e){this._group=e},N.prototype._changed=function(){},N.prototype._headerChanged=function(){this._changed()},N.prototype.$_refresh=function(e){},N.prototype.$_prepareLayout=function(e,t,n){this._doPrepare(e,t,n)},N.prototype._doPrepare=function(e,t,n){},N);t.FormItem=r;var C,k=(C=o,l.__extends(L,C),L.prototype._doDispose=function(){this._owner=null,C.prototype._doDispose.call(this)},_dp(L,"text",{get:function(){return this._text},set:function(e){e!=this._text&&(this._text=e,this._changed())}}),_dp(L,"owner",{get:function(){return this._owner}}),_dp(L,"displayText",{get:function(){return this._text||this._owner.displayLabel}}),L.prototype.doAssignSimple=function(e){if("string"==typeof e)return this._text=e,!0},L.prototype._changed=function(){this._owner&&this._owner._headerChanged()},L);t.FormItemHeader=k;var A,o=(A=r,l.__extends(O,A),O.prototype._doDispose=function(){A.prototype._doDispose.call(this)},_dp(O,"header",{get:function(){return this._header}}),_dp(O,"renderer",{get:function(){return this._renderer},set:function(e){this._renderer=e,this._changed()}}),_dp(O,"valueChanged",{get:function(){return!1}}),O.prototype.assignFrom=function(e){A.prototype.assignFrom.call(this,e),e.header&&this._header.assignFrom(e.header)},O);t.FormValueItem=o;var M,_=(M=r,l.__extends(D,M),D.prototype._doDispose=function(){M.prototype._doDispose.call(this)},D.prototype.itemVisibleChanged=function(e){this._group&&this._group.itemVisibleChanged(this)},D.prototype.itemChanged=function(e){this._group&&this._group.itemChanged(this)},_dp(D,"expanded",{get:function(){return this._expanded}}),D.prototype.expand=function(){return!this._expanded&&(this._expanded=!0)},D.prototype.collapse=function(){return!!this._expanded&&!(this._expanded=!1)},D.prototype._doPrepare=function(e,t,n){},D);t.FormItemGroup=_;var P,H=(P=o,l.__extends(B,P),B.prototype._doDispose=function(){P.prototype._doDispose.call(this)},_dp(B,"column",{get:function(){return this._column},set:function(e){e!=this._column&&(this._column=e,this._changed())}}),_dp(B,"editor",{get:function(){return this._editor},set:function(e){this._editor=e,this._changed()}}),_dp(B,"button",{get:function(){return this._button},set:function(e){e!=this._button&&(this._button=e,this._changed())}}),_dp(B,"buttonVisibility",{get:function(){return this._buttonVisibility},set:function(e){e!=this._buttonVisibility&&(this._buttonVisibility=e,this._changed())}}),_dp(B,"editButtonVisibility",{get:function(){return this._editButtonVisibility},set:function(e){e!=this._editButtonVisibility&&(this._editButtonVisibility=e,this._changed())}}),B.prototype.doAssignSimple=function(e){if("string"==typeof e)return this.column=e,!0},_dp(B,"displayLabel",{get:function(){return this._columnObj&&this._columnObj.displayText}}),_dp(B,"value",{get:function(){return""}}),B.prototype._doPrepare=function(e,t,n){this._columnObj=t.getColumnObject(this._column)},B);t.FormColumnItem=H;var j,F=(j=o,l.__extends(I,j),I.prototype._doDispose=function(){j.prototype._doDispose.call(this)},_dp(I,"template",{get:function(){return this._template},set:function(e){e!=this._template&&(this._template=e,this._dirty=!0,this._changed())}}),_dp(I,"valueField",{get:function(){return this._valueField},set:function(e){e!=this._valueField&&(this._valueField=e,this._valueIndex=-99,this._changed())}}),_dp(I,"displayLabel",{get:function(){return this._valueField}}),_dp(I,"value",{get:function(){return"Template"}}),I.prototype._doPrepare=function(e,t,n){this._valueIndex<-1&&(this._valueIndex=t.getDataFieldIndex(this._valueField))},I);t.FormTemplateItem=F});t(yr),yr.Form,yr.FormObject,yr.FormSection,yr.FormHeader,yr.FormBody,yr.FormFooter,yr.FormItem,yr.FormItemHeader,yr.FormValueItem,yr.FormItemGroup,yr.FormColumnItem,yr.FormTemplateItem;var br=n(function(e,t){function i(e){var t=n.call(this)||this;return t._name=e,t}function u(e){return s.call(this,e)||this}function f(e){return a.call(this,e)||this}function p(e){return h.call(this,e)||this}function v(e,t){return d.call(this,e,t)||this}function g(e){return e=m.call(this,e,"mobileBodyScrollTracker")||this,e._tapX=NaN,e._tapY=NaN,e._vertical=!0,e}function w(e){return b.call(this,e)||this}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(i,"name",{get:function(){return this._name}}),i.prototype.start=function(e,t,n,r){return this._doStart(e,t,n,r)},i.prototype.move=function(e,t){},i.prototype.stop=function(e,t){this._doEnd()},i.prototype.drag=function(e,t,n,r){return this._doDrag(e,t,n,r)},i.prototype.drop=function(e,t){try{this._doDrop(e,t)}finally{this._doEnd()}},i.prototype.cancel=function(){try{this._doCancel()}finally{this._doEnd()}},i.prototype.end=function(e){this._doEnd()},i.prototype._doStart=function(e,t,n,r){},i.prototype._doDrag=function(e,t,n,r){return!1},i.prototype._doDrop=function(e,t){},i.prototype._doCancel=function(){},i.prototype._doEnd=function(){},i);t.MobileDragTracker=r;var s,o=(s=Ln.GridEditRequest,l.__extends(u,s),u.prototype._doDispose=function(){s.prototype._doDispose.call(this)},_dp(u,"targetElement",{get:function(){return this._targetElement},set:function(e){this._targetElement=e}}),u);t.MobileEditRequest=o;var a,r=(a=o,l.__extends(f,a),f.prototype._doDispose=function(){a.prototype._doDispose.call(this)},f);t.TouchScorllRequest=r;var h,r=(h=o,l.__extends(p,h),p.prototype._doDispose=function(){h.prototype._doDispose.call(this)},_dp(p,"handle",{get:function(){return this._handle},set:function(e){this._handle=e}}),p);t.TouchSelectRequest=r;var d,o=(d=An.GridDragTracker,l.__extends(v,d),_dp(v,"request",{get:function(){return this._request},set:function(e){this._request=e}}),v.prototype.stop=function(){},v.prototype.end=function(e){this._doEnd(e)},v.prototype._doEnd=function(e){},v.prototype.getRequest=function(){return this._request},v);t.TouchDragTracker=o;var m,r=(m=o,l.__extends(g,m),g.prototype._doDispose=function(){this._grid=null,m.prototype._doDispose.call(this)},g.prototype._doStart=function(e,t,n,r){var i=this._grid;if(i.isEditing())switch(i.mobileOptions.scrollOnEditing){case c.ScrollOnEditing.CANCEL:i.cancelEditor(!0);break;case c.ScrollOnEditing.COMMIT:i.commitEditor(!0);break;case c.ScrollOnEditing.DEFAULT:}return this._tapX=t,this._tapY=n,!0},g.prototype._doDrag=function(e,t,n){var r=this._grid,i=t-this._tapX,s=n-this._tapY,o=Math.abs(s)>=Math.abs(i);if(o!=this._vertical&&(o&&Math.abs(s)>2*Math.abs(i)||!o&&Math.abs(i)>2*Math.abs(s))&&(this._vertical=o),this._vertical){if(5<Math.abs(s)){var u=r.topIndex,o=r.layoutManager.fullItemCount,s=0<s?-1:1;if(r.itemCount<=u+o&&1==s||0==u&&-1==s)return!1;r.topIndex=r.topIndex+s,this._tapY=n}}else r.leftPos=r.leftPos-i,this._tapX=t;return!0},g);t.TouchScrollTracker=r;var b,o=(b=o,l.__extends(w,b),w.prototype._doStart=function(e,t,n,r){return!0},w.prototype._doDrag=function(e,t,n){var r=this._grid.pointToIndex(null,t,n,!1);return r&&0<=r.itemIndex&&(n=(t=this.request.handle).selectionMask.item)&&n.inflate(t.dir,r),!0},w);t.TouchSelectTracker=o});t(br),br.MobileDragTracker,br.MobileEditRequest,br.TouchScorllRequest,br.TouchSelectRequest,br.TouchDragTracker,br.TouchScrollTracker,br.TouchSelectTracker;var wr=n(function(e,t){function i(e){var t=n.call(this,e,"formSelectionTool")||this;t._focusMask=null,t._cellResizer=null,t._tapTracker=null,t._swipeTimer=null,t._swipeDistance=0,t._swipeDelta=0,t._swipeDuration=0,t._swipeStarted=null,t._swipePrev=void 0,t._swipeAmount=0,t._tapX=NaN,t._tapY=NaN;var r=t._form=e.formView;return t._focusMask=new qn.FocusMask(e.doc),t._cellResizer=new qn.HeaderCellResizer(e.doc),r.addBodyElement(t._focusMask),t._colResizeReq=new a(r),t._touchManager=t.$_createTouchManager(e),t}function o(e){var t=s.call(this)||this;return t._form=e,t}function f(e){return u.call(this,e)||this}function h(e,t){return t=c.call(this,e.container,t)||this,t._form=e,t}function m(e,t){var n=d.call(this,e.form,"formColumnResizeTracker")||this;return n._request=e,n._feedback=t,n._start=e.x+e.offset-n.form.labelWidth,n._offset=e.offset,n}function b(){var e=null!==g&&g.apply(this,arguments)||this;return e.delta=0,e}function S(){var e=null!==w&&w.apply(this,arguments)||this;return e.delta=0,e}function N(e,t){var n=x.call(this)||this;return n._tapX=NaN,n._tapY=NaN,n._vertical=!0,n._moving=!1,n._ending=-1,n._form=e,n._focusMask=t,n._body=e._bodyView,n._body2=e._bodyView2,n._swipeMarker=new y(t.doc,"swipeMarker"),n._endMakrer=new E(t.doc,"endMarker"),n}function L(e){var t=C.call(this)||this;return t._form=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=mn.VisualTool,l.__extends(i,n),i.prototype._doDispose=function(){this._focusMask=this._focusMask.dispose(),this._colResizeReq=this._colResizeReq.dispose(),n.prototype._doDispose.call(this)},_dp(i,"form",{get:function(){return this._form}}),_dp(i,"grid",{get:function(){return this._form.container.gridView}}),i.prototype.focuseIndexChanging=function(e){},i.prototype.focusedChanged=function(e,t){this.$_resetFocusView()},i.prototype.resetFocused=function(){this.$_resetFocusView()},i.prototype._doSetFocus=function(e){this.grid.editController.setFocus(!0,e)},i.prototype._doFocusLeave=function(){},i.prototype._doKeyDown=function(e){var t=e.keyCode,n=e.ctrlKey,r=(e.shiftKey,this._form),i=r.options,e=this.grid;if(27==t)e.closePopups();else if(13==t)e.isEditing()&&(r.$_commitEditor(),i.enterToNextCell&&r.focusedIndex++);else if(9!=t&&113!=t&&(90!=t||!n)&&(89!=t||!n)&&p.Utils.included(t,36,35,39,37,40,38,34,33)){var s=r.model.itemCount;if(0==s)return!0;if(!r.focusedItem)return!(r.focusedIndex=0);var o=r.focusedIndex;switch(t){case 36:o=0;break;case 35:o=s-1;break;case 37:case 38:case 33:o=Math.max(0,o-1);break;case 39:case 40:case 34:o=Math.min(s-1,o+1)}r.focusedIndex=o}},i.prototype._doMouseDown=function(e){var t,n=e.mouseX,r=e.mouseY,i=e.ctrlKey||e.metaKey,s=this.form,o=s.container.gridView;clearInterval(this._swipeTimer),this._stopTapTracker(!1),o.closePopups(),this.dragTracker&&(this.dragTracker.dispose(),this.dragTracker=null),0==e.button&&(t=this._clickTarget=this.mouseEventTarget,i=this._getEditRequest(t,n,r,i,e.shiftKey),n=this._getDragTracker(i,n,r),(r=this._findTableCell(t))?(s.container._containerDom.focus(),s.focusedIndex=r.parentElement.sectionRowIndex,(r=s.bodyView.bodyCellByCell(r))&&r.isEditButton(t)&&s.showEditor(s.focusedIndex)&&o.editController.buttonDown(null,e)):s.$_commitEditor(),this.dragTracker=n)},i.prototype._doMouseUp=function(e){this.grid.editController.buttonUp(null,e),n.prototype._doMouseUp.call(this,e)},i.prototype._doMouseMove=function(e){var t=e.mouseX,e=e.mouseY;this.form,this.dragTracker||(this.mouseEventTarget.style.cursor="default",(e=this._getEditRequest(this.mouseEventTarget,t,e,!1,!1))&&e.cursor&&(this.mouseEventTarget.style.cursor=e.cursor))},i.prototype._doClick=function(e){var t=e.target,n=this.form;if(t instanceof p.getWin(e.target).HTMLElement){if(n.$_elementClicked(t))return;n.footerView.isCheck(t)&&n.container.gridView.toggleCheck(n.currentRow),n.headerView.isClose(t)&&(n.visible=!1)}var r=this._findTableCell(e.target);!r||(t=this.form.bodyView.bodyCellByCell(r))&&t.isEditButton(e.target)&&(r=n.focusedIndex=r.parentElement.$_row,t=t.editorType,t=this.grid.delegate.getCellEditor(t),p.Utils.isMobile()&&t.hasList?n.showList(r)&&n.editorButtonClicked(r):n.showEditor(r)&&n.editorButtonClicked(r))},i.prototype._doDblClick=function(e){e.target;var t,n=this.form,r=this._findTableCell(e.target);!r||0<=(t=r.parentElement.$_row)&&t==n.focusedIndex&&1==r.cellIndex&&(n.showEditor(t),e.preventDefault(),e.stopImmediatePropagation())},i.prototype._getEditRequest=function(e,t,n,r,i){var s=this.form,o=s._headerView;if(o.visible){s=s.labelWidth;if(n<o.height&&s-1<=t&&t<=s+1)return this._colResizeReq.init(t,n,t-s)}return null},i.prototype._getDragTracker=function(e,t,n){return e instanceof a?new v(e,this._cellResizer):null},i.prototype.$_resetFocusView=function(){var e=this._form,t=e.container.gridView,n=e.options,r=e.focusedItem,i=!1;r&&n.focusVisible&&!e.isEditing()&&((r=(n=e._bodyView).getValueCellRect(r)).y+=n.y,0<r.width&&0<r.height&&(t=t.isEditing(),r.width-=1+e.$_getScrollBarWidth(),t&&(r.y--,r.height+=1),this._focusMask.updateElement(0,0,r.width,r.height,t),this._focusMask.setRect(r),i=!0)),this._focusMask.visible=i},i.prototype._stopTapTracker=function(e){this._tapTracker},i.prototype.onTouch=function(e,t,n){clearInterval(this._swipeTimer),this._stopTapTracker(!1);var r=this.form;return this._clickTarget=e.target,(this._clickCell=this._findTableCell(this._clickTarget))&&r.container._containerDom.focus(),null},i.prototype.onTap=function(e,t,n){p.Utils.isiOS&&this.touchManager&&(p.Utils.getTimer(),this.touchManager.touchEndt)},i.prototype.onDoubleTapHandler=function(e,t,n){this.form,this._findTableCell(e.target),e.mouseX=t,e.mouseY=n,this._doDblClick(e)},i.prototype.onLongTapHandler=function(e,t,n){},i.prototype.onDragStartHandler=function(e,t,n,r){var i=null;return(i=this.form.$_isScrollBar(this._clickTarget)?new k(this._form):new T(this._form,this._focusMask))&&i.start(e,t,n,r)&&(this._tapTracker=i),this._tapTracker},i.prototype.onDragHandler=function(e,t,n,r){var i=this._tapTracker,s=!1;return i&&(this._tapTracker,(s=i.drag(e,t,n,r))?this.$_resetFocusView():(i.cancel(),this._tapTracker=null)),s},i.prototype.onDragEndHandler=function(e,t,n){var r,i,s;this._tapTracker&&(r=this._form,n||r.canSwipeCommit()||(n=!0),this._tapTracker instanceof T&&(i=this._form._bodyView2).visible&&(s=r.width,this._swipePrev=this._swipeStarted=p.Utils.getTimer(),this._swipeAmount=0,this._swipeDelta=n?0:r.canSwipe(i.x),0<this._swipeDelta||this._swipeDelta<0?(this._swipeDistance=i.x,this._swipeDuration=200,this._swipeTimer=setInterval(this.$_scrollBody.bind(this),50)):0<i.x?(this._swipeDistance=-(s-i.x),this._swipeDuration=120,this._swipeTimer=setInterval(this.$_scrollBody.bind(this),50)):i.x<0&&(this._swipeDistance=s+i.x,this._swipeDuration=120,this._swipeTimer=setInterval(this.$_scrollBody.bind(this),50))),this._tapTracker.end(n),this._tapTracker=null)},i.prototype.onSwipeHandler=function(e,t,n,r){var i=this.form,s=(this._form.width,this._form._bodyView2);this._swipePrev=this._swipeStarted=p.Utils.getTimer(),this._swipeAmount=0;var o=this._touchManager._events,u=o[o.length-1],u=r.timeStamp-u.t;if(!i.canSwipeCommit()||!i.canSwipe(s.x)&&300<u)return!1;if("left"===n||"right"===n)for(var a=Math.sign(o[0].x-o[1].x),f=1,l=o.length;f<l-1;f++)if(a!==Math.sign(o[f].x-o[f+1].x))return!1;switch(this._startDragTracker&&(this._tapTracker.end(!0),this._tapTracker=null),this._swipeDelta=1,n){case"right":this._swipeDelta=-1;case"left":this._swipeDistance=s.x,this._swipeDuration=200,this._swipeTimer=setInterval(this.$_scrollBody.bind(this),50);break;case"bottom":this._swipeDelta=-1;case"top":this._swipeDistance=this._swipeDelta*t,this._swipeDuration=200,this._swipeTimer=setInterval(this.$_scrollRow.bind(this),50)}return!0},i.prototype.$_scrollBody=function(){var e,t=this.form,n=t.container.gridView,r=p.Utils.getTimer();r-this._swipeStarted<this._swipeDuration?(e=r-this._swipePrev,e=Math.floor((this._swipeDistance-this._swipeAmount)*e/this._swipeDuration),this._swipeAmount-=Math.abs(e),this._swipePrev=r,t._bodyView2.x-=e):(clearInterval(this._swipeTimer),t._bodyView2.visible&&(t._bodyView2.visible=!1,t._bodyView._dom.style.opacity="",this._focusMask._dom.style.opacity="",0!=this._swipeDelta&&(e=n.getItem(t.currentRow),(e=0<this._swipeDelta?n.getNextRow(e):n.getPrevRow(e)).index!=t.currentRow&&(t.container.gridView.commit(!0,!0),t.currentRow=e?e.index:-1))))},i.prototype.$_scrollRow=function(){this.form;var e,t=p.Utils.getTimer();t-this._swipeStarted<this._swipeDuration?(e=t-this._swipePrev,e=Math.floor((this._swipeDistance-this._swipeAmount)*e/this._swipeDuration),this._swipeAmount-=e,this._swipePrev=t,this.form.topPos+=e):clearInterval(this._swipeTimer)},i.prototype.$_createTouchManager=function(e){return e=new _n.SingleTouchManager(e),e.touchHandler=this.onTouch.bind(this),e.tapHandler=this.onTap.bind(this),e.doubleTapHandler=this.onDoubleTapHandler.bind(this),e.longTapHandler=this.onLongTapHandler.bind(this),e.dragStartHandler=this.onDragStartHandler.bind(this),e.dragHandler=this.onDragHandler.bind(this),e.dragEndHandler=this.onDragEndHandler.bind(this),e.swipeHandler=this.onSwipeHandler.bind(this),e},i);t.FormSelectionTool=r;var s,r=(s=mn.EditRequest,l.__extends(o,s),o.prototype._doDispose=function(){this._form=null,s.prototype._doDispose.call(this)},_dp(o,"form",{get:function(){return this._form}}),o);t.FormEditRequest=r;var u,a=(u=r,l.__extends(f,u),f.prototype._doDispose=function(){u.prototype._doDispose.call(this)},_dp(f,"x",{get:function(){return this._x}}),_dp(f,"y",{get:function(){return this._y}}),_dp(f,"offset",{get:function(){return this._offset}}),f.prototype.init=function(e,t,n){return this._x=e,this._y=t,this._offset=n,this},_dp(f,"cursor",{get:function(){return"col-resize"}}),f);t.FormColumnResizeRequest=a;var c,r=(c=vn.DragTracker,l.__extends(h,c),h.prototype._doDispose=function(){this._form=null,c.prototype._doDispose.call(this)},_dp(h,"form",{get:function(){return this._form}}),_dp(h,"startWhenCreated",{get:function(){return!1}}),h);t.FormDragTracker=r;var d,v=(d=r,l.__extends(m,d),m.prototype._doDispose=function(){try{this.form.removeFeedbackElement(this._feedback)}catch(e){}this._request=null,this._feedback=null,d.prototype._doDispose.call(this)},m.prototype._doStart=function(e,t,n,r){var i=this._form._footerView.y;return this._feedback.resize(2,+i),this._feedback.move(t-this._offset,0),this.form.addFeedbackElement(this._feedback),!0},m.prototype._doDrag=function(e,t,n){var r=this._form.options.minLabelWidth;return this._form.labelWidth,(t-=this._offset)>=this._start+r&&t<this._start+1e6&&(this._feedback.x=t,!0)},m.prototype._doEnded=function(){var e=this._feedback.x-this._start;this.form.removeFeedbackElement(this._feedback),this.form.labelWidth=e,this.form.container.setCursor("default")},m),g,y=(g=Yt.LayerElement,l.__extends(b,g),b.prototype._getCssSelector=function(){return 0<this.delta?"rg-form-swipe-left":"rg-form-swipe-right"},b),w,E=(w=Yt.LayerElement,l.__extends(S,w),S.prototype._getCssSelector=function(){return 0<this.delta?"rg-form-end-right":"rg-form-end-left"},S),x,T=(x=br.MobileDragTracker,l.__extends(N,x),N.prototype._doDispose=function(){try{this._form.removeFeedbackElement(this._swipeMarker),this._form.removeFeedbackElement(this._endMakrer)}catch(e){}this._form=null,this._focusMask=null,this._body=null,this._body2=null,this._swipeMarker=this._swipeMarker.dispose(),this._endMakrer=this._endMakrer.dispose(),x.prototype._doDispose.call(this)},N.prototype._doStart=function(e,t,n,r){var i,s=this._form,o=s.container.gridView,u=n-e,a=r-t;return s.$_commitEditor(),this._vertical=Math.abs(a)>=Math.abs(u),this._moving=!1,this._vertical||0!=u&&s.canSwipeCommit()&&(i=s.currentRow,e=o.rowCount,0<u&&(0==e||0==i)?this._ending=-1:u<0&&(0==e||o.getLastRow().index==i)?this._ending=1:(t=this._body.x,a=this._body.width,0<u?t-=a-u:t+=a+u,this._body._dom.style.opacity="0.5",this._focusMask._dom.style.opacity="0.1",s=this._form._layoutInfo,e=o.getItem(i),e=0<u?o.getPrevRow(e):o.getNextRow(e),s.gridRow=e.index,this._body2.setBounds(t,this._body.y,a,this._body.height),this._body2.layoutContent(s),this._body2.visible=!0,s.gridRow=i,this._moving=!0)),this._tapX=n,this._tapY=r,!0},N.prototype
._doDrag=function(e,t,n,r){var i,s,o,u=this._form,e=n-e;return this._vertical?u.topPos-=r-t:this._moving?(i=this._swipeMarker,0!=(t=u.canSwipe(this._body2.x))?(o=u.width,s=u.height,i.delta=t,i.resetStyleName(),i.setBounds((o-80)/2,(s-80)/2,80,80),i.applyBounds(),u.addFeedbackElement(i)):u.removeFeedbackElement(i),this._body2.x+=e):0!=this._ending&&(i=this._endMakrer,o=.12*(s=u.height),e=this._ending<0?0:u.width-o,i.delta=this._ending,i.resetStyleName(),i.setBounds(e,0,o,s),i.applyBounds(),u.addFeedbackElement(i)),!0},N.prototype._doEnd=function(){this._moving?this._form.removeFeedbackElement(this._swipeMarker):this._form.removeFeedbackElement(this._endMakrer)},N);t.FormMobileScrollTracker=T;var C,k=(C=br.MobileDragTracker,l.__extends(L,C),L.prototype._doDispose=function(){this._form=null,C.prototype._doDispose.call(this)},L.prototype._doStart=function(e,t,n,r){var i=this._form;return i.container.gridView,i.$_commitEditor(),!0},L.prototype._doDrag=function(e,t,n,r){return this._form.topPos+=r-t,!0},L.prototype._doEnd=function(){},L);t.FormMobileScrollBarTracker=k});t(wr),wr.FormSelectionTool,wr.FormEditRequest,wr.FormColumnResizeRequest,wr.FormDragTracker,wr.FormMobileScrollTracker,wr.FormMobileScrollBarTracker;var Er=n(function(e,t){function i(){var e=n.call(this)||this;return e._output=void 0,e._html="",e._parser=new kt.HtmlTemplateParser,e.template="<span>${value}</span>",e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Ct.DataCellRenderer,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(i,"template",{get:function(){return this._parser.template},set:function(e){e!=this._parser.template&&(this._parser.template=e,this._changed())}}),_dp(i,"output",{get:function(){return this._output},set:function(e){this._output=e}}),_dp(i,"valueCallback",{get:function(){return this._valueCallback},set:function(e){e!==this._valueCallback&&(this._valueCallback=e,this._changed())}}),i.prototype.renderFormCell=function(e,t){this.$_setHtml(this._parser.realizeForm(e,t,this._valueCallback))},_dp(i,"type",{get:function(){return i.TYPE}}),i.prototype.$_setHtml=function(e){e!=this._html&&(this._html=e,this._dom.innerHTML=e)},i.TYPE="formHtml",i);t.FormTemplateRenderer=r});t(Er),Er.FormTemplateRenderer;var Sr=n(function(e,t){function i(e){var t=n.call(this)||this;return t._modal=!1,t._modalPadding="10%",t._modalOpacity=.15,t._autoClose=!1,t._editable=!0,t._itemResizable=!0,t._minLabelWidth=60,t._focusVisible=!0,t._scrollBarWidth=9,t._commitWhenSwipe=!1,t._enterToNextCell=!0,t._editWhenFocused=!0,t._checkBarSync=!0,t._saveLabel="Save",t._cancelLabel="Cancel",t._fieldLabel="Field",t._valueLabel="Value",t._padTopP=10,t._padBottomP=10,t._padLeftP=10,t._padRightP=10,t._padTop=NaN,t._padBottom=NaN,t._padLeft=NaN,t._padRight=NaN,t._owner=e,t}function a(){return null!==s&&s.apply(this,arguments)||this}function v(e,t){return f.call(this,e,t)||this}function b(e){return m.call(this,e,"formScrollBar")||this}function S(e,t,n){return n=w.call(this,e,n)||this,n._model=t,n}function T(e){return x.call(this,e)||this}function C(e){return N.call(this,e)||this}function A(){return null!==k&&k.apply(this,arguments)||this}function _(){return null!==O&&O.apply(this,arguments)||this}function H(e,t){var n=D.call(this,e.doc)||this;n._topPos=0,n._labelWidth=120,n._currentRow=-1,n._valueWidth=0,n._needEditor=!1,n._layout=new nt(null),n._editIndex=-1,n._saveRow=-1,n._cellRect=new h.Rectangle;var i=e.doc;return n._container=e,e=n._model=new yr.Form,n._options=new r(n),t&&n._options.assignFrom(t),n.addChild(n._headerView=new z(i,e.header)),n.addChild(n._bodyContainer=new Yt.LayerElement(i)),n._bodyContainer._dom.style.overflow="hidden",n._bodyContainer.addChild(n._bodyView=n._bodyView1=new st(i,e.body)),n._bodyContainer.addChild(n._bodyView2=new st(i,e.body)),n._bodyView2.visible=!1,n._bodyView2._dom.style.background="white",n._bodyView2._dom.style.borderLeft="1px solid gray",n._bodyView2._dom.style.borderRight="1px solid gray",n.addChild(n._footerView=new V(i,e.footer)),n.addChild(n._feedbackLayer=new Yt.LayerElement(i,"feedbackLayer")),n.addChild(n._scrollBar=new g(i)),n._layoutInfo=new o,n._dataCell=new L,n._literalCell=new Et.LiteralCell,n._seriesCell=new Et.SeriesCell,n._rowRuntime=new wt.DataRowExpressionRuntime,n._cellRuntime=new wt.DataCellExpressionRuntime,n.visible=!1,n}function F(e,t){return void 0===t&&(t=!1),e=B.call(this,e)||this,e._right=t,e}function R(){return null!==I&&I.apply(this,arguments)||this}function W(e,t){return t=U.call(this,e,t,"headerView")||this,t._labelCell=new j(e),t.addChild(t._labelCell),t._valueCell=new j(e,!0),t.addChild(t._valueCell),t._closeView=new q(e),t.addChild(t._closeView),t}function $(e,t){return t=X.call(this,e,t,"footerView")||this,t._editMode=!1,t._menuEnabled=!0,t._posVisible=!0,t._firstVisible=!0,t._prevVisible=!0,t._nextVisible=!0,t._lastVisible=!0,t._firstEnabled=!0,t._prevEnabled=!0,t._nextEnabled=!0,t._lastEnabled=!0,t._commitVisible=!0,t._cancelVisible=!0,t._checkEnabled=!0,t}function K(e){return J.call(this,e)||this}function G(e){return Q.call(this,e)||this}function et(e,t){return e=Y.call(this,e)||this,e.tcol=t,e}function rt(){return null!==tt&&tt.apply(this,arguments)||this}function ot(e,t){return t=it.call(this,e,t,"bodyView")||this,t._cells=[[],[]],t._rowPoints=[],t}function at(e,t){return t=ut.call(this,e,t,"groupContainer")||this,t._headerViews=[],t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=y.Base,l.__extends(i,n),_dp(i,"modal",{get:function(){return this._modal},set:function(e){e!=this._modal&&(this._modal=e,this._changed())}}),_dp(i,"modalPadding",{get:function(){return this._modalPadding},set:function(e){var t,n;e!=this._modalPadding&&(this._modalPadding=e,this._padTop=this._padBottom=this._padLeft=this._padRight=0,this._padTopP=this._padBottomP=this._padLeftP=this._padRightP=NaN,e&&(0<(e=(t=e.split(/\s+/)).length)&&("%"==(n=t[0]).charAt(n.length-1)?this._padTopP=parseFloat(n):this._padTop=p.Utils.toFloat(n)),1<e&&("%"==(n=t[1]).charAt(n.length-1)?this._padRightP=parseFloat(n):this._padRight=p.Utils.toFloat(n)),2<e&&("%"==(n=t[2]).charAt(n.length-1)?this._padBottomP=parseFloat(n):this._padBottom=p.Utils.toFloat(n)),3<t.length&&("%"==(n=t[3]).charAt(n.length-1)?this._padLeftP=parseFloat(n):this._padLeft=p.Utils.toFloat(n)),3==t.length&&(this._padLeftP=this._padRightP,this._padLeft=this._padRight),2==t.length&&(this._padBottomP=this._padTopP,this._padBottom=this._padTop,this._padLeftP=this._padRightP,this._padLeft=this._padRight),1==t.length&&(this._padRightP=this._padBottomP=this._padLeftP=this._padTopP,this._padRight=this._padBottom=this._padLeft=this._padTop)),this._changed())}}),_dp(i,"modalOpacity",{get:function(){return this._modalOpacity},set:function(e){this._modalOpacity=Math.max(0,Math.min(1,e))}}),_dp(i,"autoClose",{get:function(){return this._autoClose},set:function(e){this._autoClose=e}}),_dp(i,"editable",{get:function(){return this._editable},set:function(e){this._editable=e}}),_dp(i,"itemResizable",{get:function(){return this._itemResizable},set:function(e){e!=this._itemResizable&&(this._itemResizable=e,this._changed())}}),_dp(i,"minLabelWidth",{get:function(){return this._minLabelWidth},set:function(e){(e=Math.max(0,e))!=this._minLabelWidth&&(this._minLabelWidth=e,this._changed())}}),_dp(i,"focusVisible",{get:function(){return this._focusVisible},set:function(e){e!=this._focusVisible&&(this._focusVisible=e,this._changed())}}),_dp(i,"scrollBarWidth",{get:function(){return this._scrollBarWidth},set:function(e){(e=Math.max(0,e))!=this._scrollBarWidth&&(this._scrollBarWidth=e,this._changed())}}),_dp(i,"commitWhenSwipe",{get:function(){return this._commitWhenSwipe},set:function(e){this._commitWhenSwipe=e}}),_dp(i,"enterToNextCell",{get:function(){return this._enterToNextCell},set:function(e){this._enterToNextCell=e}}),_dp(i,"editWhenFocused",{get:function(){return this._editWhenFocused},set:function(e){this._editWhenFocused=e}}),_dp(i,"checkBarSync",{get:function(){return this._checkBarSync},set:function(e){e!=this._checkBarSync&&(this._checkBarSync=e,this._changed())}}),_dp(i,"saveLabel",{get:function(){return this._saveLabel},set:function(e){e!=this._saveLabel&&(this._saveLabel=e,this._changed())}}),_dp(i,"cancelLabel",{get:function(){return this._cancelLabel},set:function(e){e!=this._cancelLabel&&(this._cancelLabel=e,this._changed())}}),_dp(i,"fieldLabel",{get:function(){return this._fieldLabel},set:function(e){e!==this._fieldLabel&&(this._fieldLabel=e,this._changed())}}),_dp(i,"valueLabel",{get:function(){return this._valueLabel},set:function(e){e!==this._valueLabel&&(this._valueLabel=e,this._changed())}}),_dp(i,"commitCallback",{get:function(){return this._commitCallback},set:function(e){this._commitCallback=e}}),_dp(i,"cancelCallback",{get:function(){return this._cancelCallback},set:function(e){this._cancelCallback=e}}),i.prototype.setModalPadding=function(e,t,n,r){this.modalPadding=e+" "+(t||"")+" "+(n||"")+" "+(r||"")},i.prototype.padRect=function(e){isNaN(this._padLeftP)?e.leftBy(this._padLeft):e.leftBy(Math.floor(this._padLeftP*e.width/100)),isNaN(this._padRightP)?e.rightBy(this._padRight):e.rightBy(-Math.floor(this._padRightP*e.width/100)),isNaN(this._padTopP)?e.topBy(this._padTop):e.topBy(Math.floor(this._padTopP*e.height/100)),isNaN(this._padBottomP)?e.bottomBy(this._padBottom):e.bottomBy(-Math.floor(this._padBottomP*e.height/100))},i.prototype._changed=function(){this._owner&&this._owner.invalidateLayout()},i);t.FormOptions=r;var s,o=function(){},u=(s=Yt.VisualElement,l.__extends(a,s),a.prototype._getCssSelector=function(){return"rg-form-marquee"},a.prototype._doDraw=function(e){},a);t.FormMarquee=u;var f,d=(f=Yt.VisualElement,l.__extends(v,f),v.prototype._doDispose=function(){f.prototype._doDispose.call(this)},v.prototype._doDraw=function(e){},v.prototype._changed=function(){},v),m,g=(m=d,l.__extends(b,m),b.prototype._doDispose=function(){m.prototype._doDispose.call(this)},b.prototype._getCssSelector=function(){return"rg-form-scrollbar"},b),w,E=(w=Yt.LayerElement,l.__extends(S,w),S.prototype._doDispose=function(){w.prototype._doDispose.call(this)},_dp(S,"model",{get:function(){return this._model}}),_dp(S,"formView",{get:function(){var e=this.parent;do if(e instanceof P)return e;while(e=e.parent)}}),S.prototype.measure=function(e,t,n){return this.resetStyleName(),this._doMeasure(e,t,n)},S.prototype.layoutContent=function(e){p.Utils.isMobile()?this._doLayoutMobile(e,this.width,this.height):this._doLayoutContent(e,this.width,this.height)},S.prototype._getCssSelector=function(){return this._model.styleName},S.prototype._doLayoutMobile=function(e,t,n){this._doLayoutContent(e,t,n)},S.prototype._changed=function(){},S),x,u=(x=Yt.VisualElement,l.__extends(T,x),T.prototype._doDispose=function(){x.prototype._doDispose.call(this)},T.prototype.updateContent=function(e,t){this._doUpdateContent(e,t)},T.prototype._getCssSelector=function(){return"rg-form-cell"},T.prototype._changed=function(){},T.prototype._doUpdateContent=function(e,t){},T.prototype._doDraw=function(e){},T),N;N=Yt.VisualElement,l.__extends(C,N),C.prototype._doDispose=function(){N.prototype._doDispose.call(this)},C.prototype._changed=function(){};var k,L=(k=Et.DataCell,l.__extends(A,k),A.prototype.getValue=function(){var e,t=this._column.dataIndex;if(0<=t)return null===(e=this.$_getItem())||void 0===e?void 0:e.getData(t)},A.prototype.getBlankState=function(){return c.BlankState.NONE},A.prototype.isValueChanged=function(){var e,t=this._column.dataIndex;return 0<=t&&(null===(e=this.$_getItem())||void 0===e?void 0:e.isChanged(t))},A.prototype.getDisplayText=function(e,t){return Et.DataCell._getDisplayText(e,this.$_getItem(),this._column,this.getValue(),t)},A.prototype.$_getItem=function(){return this._column.grid.getItem(this.index.itemIndex)},A),O,M=(O=It.CellIndex,l.__extends(_,O),_),D,P=(D=Yt.ViewLayer,l.__extends(H,D),H.prototype._doDispose=function(){this._dataCell=this._dataCell.dispose(),this._literalCell=this._literalCell.dispose(),this._seriesCell=this._seriesCell.dispose(),this._rowRuntime=this._rowRuntime.dispose(),this._cellRuntime=this._cellRuntime.dispose(),this._options=this._options.dispose(),D.prototype._doDispose.call(this)},H.prototype.getColumnObject=function(e){var t=this.container.gridView;return t&&t.columnByName(e)},H.prototype.getDataFieldIndex=function(e){var t=this.container.gridView;return t&&t.dataSource?t.dataSource.getFieldIndex(e):-1},H.prototype.getEditItem=function(e){return e.getItem(this._currentRow)},H.prototype.canWrite=function(e){return!0},H.prototype.getEditor=function(e){if(e instanceof M)return e.formItem.editor},H.prototype.getEditBounds=function(e,t){var n=this._bodyView,r=this._model.getItem(this._editIndex),i=n.boundsByContainer(n.getValueCellRect(r)),r=n.bodyCellAt(r),r=(e.native?0:r.editWidth)+r.buttonWidth+r.errorWidth;return i.width-=this.$_getScrollBarWidth(),0<r&&i.width>r+10&&(i.width-=r+10,i.width<0&&(i.width+=r+10)),i.width=Math.max(0,i.width),i},H.prototype.isEditing=function(){return 0<=this._editIndex},H.prototype.isItemEditing=function(){return this.container.gridView.isItemEditing()},H.prototype.validateCellCommit=function(e,t){},H.prototype.makeCellVisible=function(e){return!0},H.prototype.editCellCommit=function(e,t,n){return this.invalidateLayout(),!0},H.prototype.editorChange=function(e,t,n){},H.prototype.editorShow=function(e){this._selectionTool.resetFocused()},H.prototype.editorHide=function(e){this._editIndex=-1,this._selectionTool.resetFocused()},H.prototype.itemUpdateStarted=function(e,t){this._saveRow=this._currentRow,this.invalidateLayout()},H.prototype.itemAppendStarted=function(e,t){this._saveRow=this._currentRow,this._currentRow=t.index,this.invalidateLayout()},H.prototype.itemInsertStarted=function(e,t){this._saveRow=this._currentRow,this._currentRow=t.index,this.invalidateLayout()},H.prototype.itemCommited=function(e,t){this.invalidateLayout()},H.prototype.itemCanceled=function(e){this._currentRow=this._saveRow,this.invalidateLayout()},H.prototype.itemInserted=function(e,t){this._currentRow=t.index,this.invalidateLayout()},H.prototype.itemsChanged=function(e){this.invalidateLayout()},_dp(H,"container",{get:function(){return this._container}}),_dp(H,"delegate",{get:function(){return this._delegate}}),_dp(H,"model",{get:function(){return this._model}}),_dp(H,"options",{get:function(){return this._options}}),_dp(H,"dataSource",{get:function(){var e=this.container.gridView;return e&&e.dataSource}}),_dp(H,"headerView",{get:function(){return this._headerView}}),_dp(H,"footerView",{get:function(){return this._footerView}}),_dp(H,"topPos",{get:function(){return this._topPos},set:function(e){(e=Math.max(0,e))!=this._topPos&&(this._topPos=e,this.invalidateLayout())}}),_dp(H,"labelWidth",{get:function(){return this._labelWidth},set:function(e){(e=Math.max(0,e))!=this._labelWidth&&(this._labelWidth=e,this.invalidateLayout())}}),_dp(H,"valueWidth",{get:function(){return this._valueWidth}}),_dp(H,"currentRow",{get:function(){return this._currentRow},set:function(e){e!==this._currentRow&&(this.$_commitEditor(),this._currentRow=e,this.invalidateLayout())}}),_dp(H,"focusedItem",{get:function(){return this._focusedItem},set:function(e){var t,n,r;e!=this._focusedItem&&(r=this._focusedItem,this.$_commitEditor(),t=this._focusedItem=e,this._selectionTool.focusedChanged(r,e),this.$_focusedChanged(r,e),this.$_makeCellVisible(t),t instanceof yr.FormColumnItem&&(n=this.container.gridView,r=this.$_getIndex(t),e=t._columnObj.isWritable(),n._editController._needPrepare=!0,n._editController.prepareEditor(r),this._options.editWhenFocused&&e&&(this._editIndex=t.vindex,this._needEditor=!0,this.showEditor(this.focusedIndex))))}}),_dp(H,"focusedIndex",{get:function(){return this._focusedItem?this._focusedItem.vindex:-1},set:function(e){var t=this.model;0<=e&&0<t.itemCount?(e=Math.min(e,t.itemCount-1),this.focusedItem=p.Utils.cast(t.getItem(e),yr.FormValueItem)):this.focusedItem=null}}),_dp(H,"bodyView",{get:function(){return this._bodyView}}),H.prototype.getHandler=function(){return this},H.prototype.invalidateLayout=function(){this.visible&&this._container.invalidateLayout()},H.prototype.addFeedbackElement=function(e){if(e&&!this._feedbackLayer.contains(e))return this._feedbackLayer.addChild(e),!0},H.prototype.removeFeedbackElement=function(e){return e=this._feedbackLayer.indexOf(e),0<=e&&(this._feedbackLayer.removeChildAt(e),!0)},H.prototype.canSwipeCommit=function(){return!this.isItemEditing()||!!this._options.commitWhenSwipe},H.prototype.canSwipe=function(e){var t=this.width;return 0<e&&e<.6*t?1:e<0&&.4*t<e+t?-1:0},H.prototype.$_getIndex=function(e){var t=this.container.gridView,n=e._columnObj,r=new M;return r.assign(t.getIndex(this.currentRow,n)),r.layout=this._layout.setColumn(t,n),r.formItem=e,r},H.prototype.showEditor=function(e){var t=this.container.gridView,n=this._model.getItem(e);if(n instanceof yr.FormColumnItem){var r=this.$_getIndex(n);if(null===(n=n._columnObj)||void 0===n?void 0:n.isWritable())return this._editIndex=e,t.showEditor(r)}},H.prototype.showList=function(e){var t=this.container.gridView,n=this._model.getItem(e);if(n instanceof yr.FormColumnItem){var r=this.$_getIndex(n);if(null===(n=n._columnObj)||void 0===n?void 0:n.isWritable())return this._editIndex=e,t.showEditList(r)}},H.prototype.deleteRow=function(){var e=this;setTimeout(function(){e.$_deleteRow()},0)},H.prototype.appendRow=function(){this.$_appendRow()},H.prototype.addBodyElement=function(e){return this._bodyContainer.addChild(e)},H.prototype.removeBodyElement=function(e){return this._bodyContainer.removeChild(e)},H.prototype.close=function(){this.visible&&(this.visible=!1)},H.prototype.editorButtonClicked=function(e){var t=this.container.gridView,n=this._model.getItem(e);n instanceof yr.FormColumnItem&&(e=this.$_getIndex(n),this._editIndex=n.vindex,t._editController.buttonClicked(e))},H.prototype.setModel=function(e){this.model.load(e)},_dp(H,"isLayer",{get:function(){return!1}}),H.prototype._getCssSelector=function(){return this._options.modal?H.STYLE_MODAL:H.STYLE_NAME},H.prototype._doActivateView=function(){var e=this._container.gridView.focusedItem;e instanceof dt.GroupItem&&(e=e.firstDataItem),this.currentRow=e?e.index:-1,this._container.activeTool=this._selectionTool,this._container.gridView.editorLender=this},H.prototype._dodDeactivateView=function(){this._container.gridView.hideEditor(),this._container.gridView.editorLender=null},H.prototype._visibleChanged=function(){this.visible,this.container.invalidateLayout()},H.prototype.$_initialzie=function(){this._selectionTool=new wr.FormSelectionTool(this._container)},H.prototype.$_prepareRender=function(e){},H.prototype.$_layout=function(e,t){var n,r=t.x,i=t.y,s=t.width,o=t.height,u=this._model,a=this._options,f=this._layoutInfo;this._delegate=e,this._model.$_prepareLayout(),f.form=u,f.formView=this,f.columnBinder=this,f.gridRow=this._currentRow,f.items=u._visibleItems,f.labelWidth=this.labelWidth,f.valueWidth=this._valueWidth=t.width-f.labelWidth,((u=this._headerView).visible=u.model.visible)&&(n=u.measure(f,s,o),u.setBounds(r,i,s,n.height),u.layoutContent(f),o-=n.height,i+=n.height),((u=this._footerView).visible=u.model.visible)&&(n=u.measure(f,s,o),u.setBounds(r,t.bottom-n.height,n.width,n.height),u.layoutContent(f),o-=n.height),this._bodyContainer.setBounds(r,i,s,o),this._bodyView2.visible=!1,((u=this._bodyView).visible=0<=f.gridRow)&&(u._dom.style.opacity="",u.measure(f,s,o),u.layoutContent(f),t=u._dom.offsetHeight,n=this._topPos=Math.max(0,Math.min(t-o,this._topPos)),u.setBounds(0,-n,s,t),((f=this._scrollBar).visible=o<t)&&(u=a.scrollBarWidth,n=t,a=o,t=Math.max(0,n-a),n=Math.min(o,Math.max(20,o*a/n)),t=Math.min(o-n,Math.max(0,(o-n)*(this._topPos/t))),f.setBoundsI(r+s-u-2,i+t,u,n)),this._selectionTool.$_resetFocusView(),this._needEditor&&(this._needEditor=!1),this.container.gridView._editController.resetEditor(!1))},H.prototype.$_getScrollBarWidth=function(){return this._scrollBar.visible?this._scrollBar.width:0},H.prototype._changed=function(){},H.prototype.$_getGridCell=function(e,t){var n,e=e._columnObj;return e instanceof jt.DataColumn?(n=this._dataCell)._column=e:n=e instanceof jt.SeriesColumn?this._seriesCell:e instanceof Et.LiteralCell?this._literalCell:this._dataCell,n.setIndex2(this.container.gridView,t,e),n},H.prototype.$_elementClicked=function(e){return!!this._footerView.$_elementClicked(e)},H.prototype.$_focusedChanged=function(e,t){this._bodyView.$_focusedChanged(e?e.vindex:-1,t?t.vindex:-1)},H.prototype.$_commitEditor=function(){this.container.gridView.isEditing()&&this.container.gridView.commitEditor(!0)},H.prototype.$_deleteRow=function(){var e=this.container.gridView,t=e.getItem(this._currentRow);t&&e.$_deleteSelection(t)},H.prototype.$_appendRow=function(){this.container.gridView.append()},H.prototype.$_isScrollBar=function(e){return this._scrollBar._dom===e},H.prototype.$_makeCellVisible=function(e){var t=this.topPos,e=this._bodyView.getValueCellRect(e,this._cellRect);e.y<t?this.topPos=e.y:e.bottom>=t+this._bodyContainer.height&&(this.topPos+=e.bottom-(t+this._bodyContainer.height))},H.STYLE_NAME="rg-form-root rg-form",H.STYLE_MODAL="rg-form-root rg-form rg-form-modal",H);t.FormView=P;var B,j=(B=u,l.__extends(F,B),F.prototype._doDispose=function(){B.prototype._doDispose.call(this)},F.prototype._getCssSelector=function(){return this._right?B.prototype._getCssSelector.call(this)+" rg-form-cell-right":B.prototype._getCssSelector.call(this)},F.prototype._createDom=function(e){var t=B.prototype._createDom.call(this,e),n=this._div=e.createElement("div");return this._div.className=F.STYLE_NAME,t.appendChild(n),this._span=e.createElement("span"),n.appendChild(this._span),t},F.prototype._doAttached=function(e){},F.prototype._doUpdateContent=function(e,t){this._span.textContent=t||e.displayText},F.STYLE_NAME="rg-form-header-cell",F);t.FormHeaderCellElement=j;var I,q=(I=Yt.VisualElement,l.__extends(R,I),R.prototype._getCssSelector=function(){return""},R.prototype._createDom=function(e){var t=I.prototype._createDom.call(this,e),e=e.createElement("span");return t.appendChild(e),e.className="rg-form-close",t},R.prototype.isDom=function(e){return e===this._dom.firstElementChild||I.prototype.isDom.call(this,e)},R.prototype._doDraw=function(e){},R);t.FormCloseView=q;var U,z=(U=E,l.__extends(W,U),W.prototype._doDispose=function(){U.prototype._doDispose.call(this)},W.prototype.isClose=function(e){return this._closeView.isDom(e)},W.prototype._doMeasure=function(e,t,n){var r=this.model;return tn.Size.create(t,r.height)},W.prototype._doLayoutContent=function(e,t,n){var r=this.model,i=e.formView.options;this._labelCell.setBounds(0,0,e.labelWidth,n),this._labelCell.updateContent(r.labelCell,i.fieldLabel),this._valueCell.setBounds(e.labelWidth,0,e.valueWidth,n),this._valueCell.updateContent(r.valueCell,i.valueLabel),this._closeView.setBounds(0,0,n,n),this._closeView.visible=!this.formView.isItemEditing()},W.prototype._doDraw=function(e){},W);t.FormHeaderView=z;var X,V=(X=E,l.__extends($,X),$.prototype._doDispose=function(){X.prototype._doDispose.call(this)},_dp($,"editMode",{get:function(){return this._editMode},set:function(e){e!=this._editMode&&(this._editMode=e,this.invalidateLayout())}}),$.prototype.isCheck=function(e){return e==this._checkView},$.prototype._initDom=function(e){X.prototype._initDom.call(this,e),this.$_createElements(e)},$.prototype._doMeasure=function(e,t,n){var r=this.model;return tn.Size.create(t,r.height)},$.prototype._doLayoutContent=function(e,t,n){var r=this.formView,i=r.container.gridView,s=r.options,o=r.currentRow;this._currView.textContent=o+1+"",this._totalView.textContent=i.itemCount+"",this._headView.style.left="0px",this._headView.style.top="0px",this._headView.style.height=n+"px",o=(n-this._menuView.offsetHeight)/2,this._menuView.style.top=o+"px",this._footView.style.right="0px",this._footView.style.top="0px",this._footView.style.height=n+"px",o=(n-this._checkView.offsetHeight)/2,this._checkView.style.right="0px",this._checkView.style.top=o+"px",r.options.checkBarSync?this._checkView.style.visibility=i.checkBar.visible?"":"hidden":this._checkView.style.visibility="",this._cancelLabel.textContent=s.cancelLabel||"Cancel",this._commitLabel.textContent=s.saveLabel||"Save",i=this._checkView.offsetWidth+30,o=(n-this._cancelLabel.offsetHeight)/2+1,this._cancelLabel.style.right=i+"px",this._cancelLabel.style.top=o+"px",i+=this._cancelLabel.offsetWidth+5,o=(n-this._cancelView.offsetHeight)/2,this._cancelView.style.right=i+"px",this._cancelView.style.top=o+"px",i+=this._cancelView.offsetWidth+16,o=(n-this._commitLabel.offsetHeight)/2+1,this._commitLabel.style.right=i+"px",this._commitLabel.style.top=o+"px",i+=this._commitLabel.offsetWidth+5,o=(n-this._commitView.offsetHeight)/2,this._commitView.style.right=i+"px",this._commitView.style.top=o+"px",s=this._posView.offsetWidth,o=(n-this._posView.offsetHeight)/2+1,t=(t-s)/2,s=t+s,this._posView.style.left=t+"px",this._posView.style.top=o+"px",i=t-8,this._leftView.style.top="0px",this._leftView.style.height="100%",this._leftView.style.left=i+"px",i=8,o=(n-this._prevView.offsetHeight)/2,this._prevView.style.right="8px",this._prevView.style.top=o+"px",i+=this._prevView.offsetWidth+8,o=(n-this._firstView.offsetHeight)/2,this._firstView.style.right=i+"px",this._firstView.style.top=o+"px",this._rightView.style.top="0px",this._rightView.style.height="100%",this._rightView.style.left=(s+=8)+"px",i=8,o=(n-this._nextView.offsetHeight)/2,this._nextView.style.left="8px",this._nextView.style.top=o+"px",i+=this._nextView.offsetWidth+8,o=(n-this._lastView.offsetHeight)/2,this._lastView.style.left=i+"px",this._lastView.style.top=o+"px",this.invalidate()},$.prototype._doDraw=function(e){var t=this.formView,n=t.container.gridView,r=t.currentRow,i=n.getItem(r),t=n.isItemEditing(i),r=n.getFirstRow()!==i;r!=this._firstEnabled&&(this._firstEnabled=r,this._firstView.style.opacity=r?"":"0.3"),r!=this._prevEnabled&&(this._prevEnabled=r,this._prevView.style.opacity=r?"":"0.3"),(r=n.getLastRow()!==i)!=this._lastEnabled&&(this._lastEnabled=r,this._lastView.style.opacity=r?"":"0.3"),r!=this._nextEnabled&&(this._nextEnabled=r,this._nextView.style.opacity=r?"":"0.3"),n=!t,n!=this._firstVisible&&(this._firstVisible=n,this._firstView.style.opacity=n?"":"0"),n!=this._prevVisible&&(this._prevVisible=n,this._prevView.style.opacity=n?"":"0"),n!=this._lastVisible&&(this._lastVisible=n,this._lastView.style.opacity=n?"":"0"),n!=this._nextVisible&&(this._nextVisible=n,this._nextView.style.opacity=n?"":"0"),n!=this._posVisible&&(this._posVisible=n,this._posView.style.opacity=n?"":"0"),(n=t)!=this._commitVisible&&(this._commitVisible=n,this._commitView.style.opacity=n?"":"0",this._commitLabel.style.opacity=n?"":"0",this._commitView.style.pointerEvents=n?"":"none",this._commitLabel.style.pointerEvents=n?"":"none"),n!=this._cancelVisible&&(this._cancelVisible=n,this._cancelView.style.opacity=n?"":"0",this._cancelLabel.style.opacity=n?"":"0",this._cancelView.style.pointerEvents=n?"":"none",this._cancelLabel.style.pointerEvents=n?"":"none"),i&&(r=i.checked)!=this._checkEnabled&&(this._checkEnabled=r,this._checkView.style.opacity=r?"":"0.3")},$.prototype.$_createElements=function(e){var t=p.getDoc(e);e.appendChild(this._posView=this.$_createPosition(t)),e.appendChild(this._leftView=this.$_createLeft(t)),e.appendChild(this._rightView=this.$_createRight(t)),e.appendChild(this._headView=this.$_createHead(t)),e.appendChild(this._footView=this.$_createFoot(t))},$.prototype.$_setIconStyle=function(e){var t=e.style;return t.position="absolute",t.display="inline-block",e},$.prototype.$_createHead=function(e){var t=e.createElement("div");return t.className="rg-footer-form-head",t.style.position="absolute",t.appendChild(this._menuView=this.$_setIconStyle(e.createElement("span"))),this._menuView.className="rg-form-menu",t},$.prototype.$_createFoot=function(e){var t=e.createElement("div");return t.className="rg-footer-form-foot",t.style.position="absolute",t.appendChild(this._checkView=this.$_setIconStyle(e.createElement("span"))),this._checkView.className="rg-form-check",t.appendChild(this._cancelView=this.$_setIconStyle(e.createElement("span"))),this._cancelView.className="rg-form-cancel",t.appendChild(this._cancelLabel=this.$_setIconStyle(e.createElement("span"))),this._cancelLabel.className="rg-form-label",this._cancelLabel.textContent="Cancel",t.appendChild(this._commitView=this.$_setIconStyle(e.createElement("span"))),this._commitView.className="rg-form-commit",t.appendChild(this._commitLabel=this.$_setIconStyle(e.createElement("span"))),this._commitLabel.className="rg-form-label",this._commitLabel.textContent="Save",t},$.prototype.$_createPosition=function(e){var t=e.createElement("div");return t.style.position="absolute",t.appendChild(this._currView=e.createElement("span")),this._currView.className="rg-form-position rg-form-position-current",this._currView.textContent="0",t.appendChild(this._slashView=e.createElement("span")),this._slashView.className="rg-form-position rg-form-position-slash",this._slashView.textContent="/",t.appendChild(this._totalView=e.createElement("span")),this._totalView.className="rg-form-position rg-form-position-total",this._totalView.textContent="0",t},$.prototype.$_createLeft=function(e){var t=e.createElement("div");return t.style.position="absolute",t.appendChild(this._firstView=this.$_setIconStyle(e.createElement("span"))),this._firstView.className="rg-form-first",t.appendChild(this._prevView=this.$_setIconStyle(e.createElement("span"))),this._prevView.className="rg-form-prev",t},$.prototype.$_createRight=function(e){var t=e.createElement("div");return t.style.position="absolute",t.appendChild(this._lastView=this.$_setIconStyle(e.createElement("span"))),this._lastView.className="rg-form-last",t.appendChild(this._nextView=this.$_setIconStyle(e.createElement("span"))),this._nextView.className="rg-form-next",t},$.prototype.$_elementClicked=function(e){var t=this.formView,n=t.model,r=t.container.gridView,i=t.currentRow;try{if(e===this._menuView&&this._menuEnabled){var s=n.footer.getPopupMenuName(r);s?r.popupMenuManager.show(s,e,null):t.visible=!1}else if(e===this._firstView&&this._firstEnabled)u=r.getFirstRow(),t.currentRow=u.index;else if(e===this._lastView&&this._lastEnabled)u=r.getLastRow(),t.currentRow=u.index;else if(e===this._prevView&&this._prevEnabled)u=r.getPrevRow(r.getItem(i)),t.currentRow=u.index;else if(e===this._nextView&&this._nextEnabled)u=r.getNextRow(r.getItem(i)),t.currentRow=u.index;else if(e!=this._commitLabel&&e!=this._commitView||!this._commitVisible){if(e!=this._cancelLabel&&e!=this._cancelView||!this._cancelVisible)return!1;if(u=r.getItem(i),(o=this.formView.options.cancelCallback)&&!1===o.call(this,r.handler,i,u))return;r.$_cancelItem(u,!0),t.options.autoClose&&t.close()}else{var o,u=r.getItem(i);if((o=this.formView.options.commitCallback)&&!1===o.call(this,r.handler,i,u))return;r.$_commitItem(u,!0,!0),t.options.autoClose&&t.close()}}catch(e){alert(e)}return!0},$);t.FormFooterView=V;var J,u=(J=u,l.__extends(K,J),K.prototype._doDispose=function(){J.prototype._doDispose.call(this)},K.prototype._getCssSelector=function(){return""},K.prototype._doDraw=function(e){},K);t.FormBodyCellElement=u;var Q,d=(Q=d,l.__extends(G,Q),G.prototype._doDispose=function(){Q.prototype._doDispose.call(this)},G.prototype._getCssSelector=function(){return""},G.prototype._doDraw=function(e){},G);t.FormGroupHeaderElement=d;var Y,Z=(Y=fn.BodyTableCell,l.__extends(et,Y),et),tt,nt=(tt=Ft.CellLayoutColumnItem,l.__extends(rt,tt),rt.prototype.setColumn=function(e,t){return this._grid=e,this._columnObj=t,this},_dp(rt,"grid",{get:function(){return this._grid}}),rt),it,st=(it=E,l.__extends(ot,it),ot.prototype._doDispose=function(){this._tbody=this._thead=this._table=null;for(var e=0;e<2;e++)for(var t=this._cells[e],n=0,r=t.length;n<r;n++)t[n].dispose(),t[n]=null;this._cells=null,it.prototype._doDispose.call(this)},ot.prototype.bodyCellByCell=function(e){for(var t=0;t<this._cells.length;t++)for(var n=this._cells[t],r=0;r<n.length;r++){var i=n[r];if(i&&i.cell===e)return i}},ot.prototype.bodyCellAt=function(e){return this._cells[1][e.vindex]},ot.prototype.getValueCellRect=function(e,t){var n=this.formView,r=this._rowPoints,e=e.vindex;return(t=t||new h.Rectangle).set(n.labelWidth,r[e],n.valueWidth,r[e+1]-r[e]),t},ot.prototype._createDom=function(e){var t=e.createElement("div"),n=this._table=e.createElement("table"),r=n.style;return r.setProperty("table-layout","fixed","important"),r.setProperty("width","0px","important"),n.className="rg-form-table",t.appendChild(n),this._thead=e.createElement("thead"),n.appendChild(this._thead),this._tbody=e.createElement("tbody"),n.appendChild(this._tbody),this.$_initTable(),t},ot.prototype._initDom=function(e){it.prototype._initDom.call(this,e),e.style.overflow="hidden"},ot.prototype._doMeasure=function(e,t,n){return tn.Size.create(t,n)},ot.prototype._doLayoutContent=function(e,t,n){var r=this.model;this.$_prepareRows(e,this._tbody),this.$_refreshCells(e.items,this._tbody),this.$_setCellsDisplay(this._cells,e.items),this.$_updateHead(e),this.$_updateRows(e,r)},ot.prototype._doDraw=function(e){},ot.prototype.$_initTable=function(){var e=p.getDoc(this._thead),t=this._thead,n=e.createElement("tr");t.appendChild(n),n.setAttribute("aria-hidden","true");var r=n.style;r.setProperty("border","0px none","important");for(var i=0;i<2;i++){var s=e.createElement("th");s.scope="col",(r=s.style).setProperty("visibility","hidden","important"),r.setProperty("margin","0px","important"),r.setProperty("padding","0px","important"),r.setProperty("font-size","0px","important"),r.setProperty("line-height","0px","important"),r.height="0px",n.appendChild(s)}},ot.prototype.$_prepareRows=function(e,t){for(var n=p.getDoc(t),r=e.items.length;t.childElementCount<r;){var i=n.createElement("tr");i.$_view=this.$_hash;for(var s=0;s<2;s++){var o=n.createElement("td");o.className=0==s?"rg-form-label-cell":"rg-form-value-cell",i.appendChild(o);var u=n.createElement("div");o.appendChild(u)}t.appendChild(i)}for(;t.childElementCount>r;)t.removeChild(t.lastChild)},ot.prototype.$_refreshCells=function(e,t){for(var n=this.formView.focusedIndex,r=this._cells,i=e.length,s=t.children,o=0;o<i;o++)for(var u=e[o],a=s[o].children,f=0;f<2;f++){var l=r[f][o];l?(l.cell,a[f]):l=r[f][o]=new Z(a[f],f),l.formItem=u,l.trow=o,l.focused=o==n}for(f=0;f<2;f++)for(var c=this._cells[f],o=i;o<r.length;o++)c[f]=null;r.length=i},ot.prototype.$_setCellsDisplay=function(e,t){for(var n=t.length,r=0;r<n;r++)for(var i=t[r],s=0;s<2;s++){var o=e[s][r];o.spanned=!1,i instanceof yr.FormItemGroup?0==s?(o.setColSpan(2),o.setVisible(!0)):o.clear(!1):(o.setColSpan(1),o.setVisible(!0))}},ot.prototype.$_updateHead=function(e){var t=this._thead.firstElementChild.children,n=t[0].style;n.width=e.labelWidth+"px",(n=t[1].style).width=e.valueWidth+"px"},ot.prototype.$_updateRows=function(e,t){for(var n=e.form,r=this.formView.container.gridView,i=this._tbody.rows,s=t.minRowHeight+"px",o=this._rowPoints=[0],u=0,a=i.length;u<a;u++){var f=n.getVisibleItem(u),l=i[u];l.style.height=s,l.$_row=u,f.$_prepareLayout(n,e.columnBinder,u),this.$_updateRow(e,r,f,u,l),o[u+1]=o[u]+l.getBoundingClientRect().height}},ot.prototype.$_setLabelStyle=function(e,t){e.className=t?"rg-form-label-cell rg-form-label-focused":"rg-form-label-cell"},ot.prototype.$_updateRow=function(e,t,n,r,i){var s=this._cells,o=i.children[0];i.children[1],n instanceof yr.FormValueItem&&(o.firstElementChild.textContent=n.header.displayText,this.$_setLabelStyle(o,s[1][r].focused),this.$_updateValueCell(e,t,e.gridRow,n,this._cells[1][r]))},ot.prototype.$_updateValueCell=function(e,t,n,r,i){var s,o=r instanceof yr.FormColumnItem&&e.formView.$_getGridCell(r,n);o?(t.body.getCellFormatters((s=r)._columnObj,i),this.$_renderColumnCell(e,t,n,s,o,i)):this.$_renderDataCell(e,r,i)},ot.prototype.$_createRenderer=function(e,t,n){return t!==Er.FormTemplateRenderer.TYPE?e.delegate.createRenderer(t,n,null):(t=new Er.FormTemplateRenderer,n&&t.assignFrom(n),t)},ot.prototype.$_getButtonVisible=function(e,t,n){var r=!1;switch(n){case c.ButtonVisibility.ALWAYS:r=!0;break;case c.ButtonVisibility.HIDDEN:r=!1;break;case c.ButtonVisibility.VISIBLE:case c.ButtonVisibility.ROWFOCUSED:r=t.focused;break;case c.ButtonVisibility.DEFAULT:default:r=t.focused||t.mouseEntered}return r},ot.prototype.$_buttonWidth=function(e,t,n){var r,i=0;return(e.button||n.button)!=c.CellButton.NONE&&(r=t.grid,t=e.buttonVisibility||t.buttonVisibility,this.$_getButtonVisible(r,n,t)&&(i=r.body.cellButtonWidth)),i},ot.prototype.$_editButtonWidth=function(e,t,n,r){var i,s,o,u,a=0;return!r.readonly&&t&&(i=n.grid,o=r.editorType,s=i.delegate.getCellEditor(o),u=r.editor||n.editor,s.hasButton(i.displayOptions.showNativeEditButton,u)&&(u=!1,((u=It.CellIndex.equalsTo(i.focusedIndex,t.index,n.layout)?!!(o=i.delegate.getCellEditor(o))&&o.listing:u)||this.$_getButtonVisible(i,r,e.editButtonVisibility||n.editButtonVisibility))&&(a=i.body.editButtonWidth))),a},ot.prototype.$_editButtonCount=function(e,t,n,r){return r=r.editorType,n.grid.delegate.getCellEditor(r).buttonCount},ot.prototype.$_editButtonVerti=function(e,t,n){if("number"===t.editorType)return n=t.editor||n.editor||{},null==n.direction||"horizontal"!==n.direction},ot.prototype.$_errorWidth=function(e,t){return t.error?e.body.errorIconWidth:0},ot.prototype.$_renderColumnCell=function(e,t,n,r,i,s){var o=s.cell,u=r._columnObj,a=r.renderer||u.renderer;s.setEditor(null,r.editor||u.editor),"string"==typeof a?f=a:(f=a&&a.type||(u instanceof jt.SeriesColumn?on.SeriesTextCellRenderer.SERIES_TYPE:Ct.TextCellRenderer.TYPE),l=a),a=!1,s.renderer2&&!s.rendererChanged&&s.renderer2.type==f||(s.renderer2&&s.renderer2.clearAndDispose(),s.renderer2=this.$_createRenderer(e.formView,f,l),a=!(s.rendererChanged=!1));var f=o.firstElementChild,l=s.renderer2,c=p.getDoc(f);!a&&l&&l._dom!=f&&(l.clearContent(),a=!0);var h,n=t.getItem(n),d=this.$_buttonWidth(r,u,s),v=this.$_editButtonWidth(r,n,u,s),m=v&&this.$_editButtonCount(r,n,u,s),g=v&&this.$_editButtonVerti(t,s,u),r=this.$_errorWidth(t,s),y=6+this.formView.$_getScrollBarWidth(),n=s.cellButton,b=s.editButtons,u=s.errorIcon;if(0<d?(n?h=n.style:(n=c.createElement("span"),s.cellButton=n,(h=n.style).position="absolute",h.display="inline-block",h.height="100%",h.top="0px"),s.buttonWidth<=0&&(o.appendChild(n),s.buttonWidth=d),h.right=y+"px",h.width=d+"px",s.resetButtonClass()):0<s.buttonWidth&&(o.removeChild(n),s.buttonWidth=0),0<v){if(!b||b&&b.length!=m){b&&b.forEach(function(e){o.removeChild(e)});for(var b=s.editButtons=[],w=0;w<m;w++){var E=c.createElement("span");b.push(E),(h=E.style).position="absolute",h.display="inline-block",h.height="100%",h.top="0px",o.appendChild(E)}}var n=s.editorType,S=t.delegate.getCellEditor(n);b.forEach(function(e,t){S.setButtonStyle(e,t,g,d,v)||((h=e.style).right=y+d+t*v+"px",h.width=v+"px",s.resetEditClass(e,t))}),s.editWidth=v*(g?1:m)}else 0<s.editWidth&&(b.forEach(function(e){o.removeChild(e)}),s.editWidth=0);0<r?(u?h=u.style:(u=c.createElement("span"),s.errorIcon=u,(h=u.style).position="absolute",h.display="inline-block",h.top="0px",h.height="100%"),s.errorWidth<=0&&(o.appendChild(u),s.errorWidth=r),h.right=y+d+s.editWidth+"px",h.width=r+"px",s.resetErrorClass()):0<s.errorWidth&&(o.removeChild(u),s.errorWidth=0),u=l.styleName,a?l.initContent(i._index,f,u):l.checkClassName(u)&&(l.clearContent(),l.initContent(i._index,f,u)),l.renderCell(t,i,s),i=i.isValueChanged()&&t.body._showChangeMarker,i!=s.valueChanged&&(i?((t=s.changedMarker)||((t=s.changedMarker=c.createElement("div")).className="rg-changed-marker",t.style.position="absolute",t.style.display="block",t.style.top="0px",s.changedMarker=t),o.appendChild(t)):s.changedMarker&&s.valueChanged&&o.removeChild(s.changedMarker),s.valueChanged=i)},ot.prototype.$_renderDataCell=function(e,t,n){var r,i=n.cell,s=t.renderer;t instanceof yr.FormTemplateItem?r=Er.FormTemplateRenderer.TYPE:"string"==typeof s?r=s:(r=s&&s.type||Ct.TextCellRenderer.TYPE,o=s),s=!1,n.renderer2&&!n.rendererChanged&&n.renderer2.type==r||(n.renderer2&&n.renderer2.clearAndDispose(),n.renderer2=this.$_createRenderer(e.formView,r,o),s=!(n.rendererChanged=!1));var o=i.firstElementChild,i=n.renderer2;!s&&i&&i._dom!=o&&(i.clearContent(),s=!0),n=i.styleName,s?i.initFormContent(o,n):i.checkClassName(n)&&(i.clearContent(),i.initFormContent(o,n)),i instanceof Er.FormTemplateRenderer&&(i.template=t.template,i.renderFormCell(e.formView,t))},ot.prototype.$_focusedChanged=function(e,t){var n=this._tbody.rows;0<=e&&this.$_setLabelStyle(n[e].cells[0],!1),0<=t&&this.$_setLabelStyle(n[t].cells[0],!0)},ot);t.FormBodyView=st;var ut,E=(ut=E,l.__extends(at,ut),at.prototype._doDispose=function(){for(var e=0,t=this._headerViews;e<t.length;e++)t[e].dispose();this._headerViews=null,ut.prototype._doDispose.call(this)},at.prototype._getCssSelector=function(){return""},at.prototype._doMeasure=function(e,t,n){return tn.Size.create(t,n)},at.prototype._doLayoutContent=function(e,t,n){},at.prototype._doDraw=function(e){},at);t.FormGroupContainer=E});t(Sr),Sr.FormOptions,Sr.FormMarquee,Sr.FormView,Sr.FormHeaderCellElement,Sr.FormCloseView,Sr.FormHeaderView,Sr.FormFooterView,Sr.FormBodyCellElement,Sr.FormGroupHeaderElement,Sr.FormBodyView,Sr.FormGroupContainer;var xr=n(function(e,t){function i(e){return e=n.call(this,e)||this,e._touchScrollRequest=new br.TouchScorllRequest(e.grid),e._touchScrollTracker=new br.TouchScrollTracker(e.grid),e._touchSelectRequest=new br.TouchSelectRequest(e.grid),e._touchSelectTracker=new br.TouchSelectTracker(e.grid),e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=gr.GridViewSelectionTool,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},i.prototype._getTouchRequest=function(e){var t=this.grid,n=t.selectionLayer;if(n instanceof Zn.MobileSelectionLayer){var r=n.getSelectHandle(e.target);if(r)return this._touchSelectRequest.handle=r,this._touchSelectRequest}r=t.getCellViewOf(e.target),r=t.getCellType(r);if("data"===r)return t=t.getBodyCellbyCell(e.target),t&&t.isEditButton(e.target)?void 0:this._touchScrollRequest},i.prototype._getTouchTracker=function(e,t,r){var i=p.getWin(e.target);if(e.target instanceof i.HTMLInputElement)return null;if((s=this._getTouchRequest(e))instanceof br.TouchScorllRequest)return this._touchScrollTracker.request=s,this.dragTracker=this._touchScrollTracker,void (this.touchManager.swipeHandler=this.onSwipeHandler.bind(this));if(s instanceof br.TouchSelectRequest)return this._touchSelectTracker.request=s,void (this.dragTracker=this._touchSelectTracker);var i=this.mouseEventTarget,s=this._getEditRequest(i,null,t,r,!1,!1,!1)||this._getSelectRequest(i,t,r,!1,!1,!1),s=this._getDragTracker(s,t,r);if(s)return this.dragTracker=s,this.dragTracker;n.prototype._getTouchTracker.call(this,e,t,r)},i);t.MobileGridTool=r});t(xr),xr.MobileGridTool;var Tr=n(function(e,t){function i(e,t,r,i){return i=n.call(this,e,r=void 0===r?!1:r,i=void 0===i?null:i)||this,i._gridView&&(i._gridView.$_handler=t),i}function u(e){var t=s.call(this)||this;return t._bodyStyle="rg-body",t._headerStyle="rg-header",t._summaryStyle="rg-header-summary",t._footerStyle="rg-footer",t._dataRowStyle="rg-data-row",t._headerRowStyle="",t._summaryRowStyle="",t._footerRowStyle="",t._groupFooterStyle="rg-rowgroup-footer",t._dataCellStyle="rg-data-cell",t._headerCellStyle="rg-header-cell",t._summaryCellStyle="rg-header-summary-cell",t._footerCellStyle="rg-footer-cell",t._groupFooterCellStyle="rg-rowgroup-footer-cell",t._rowHeight=0,t._headerHeight=0,t._summaryHeight=0,t._footerHeight=0,t._gfooterHeight=0,t._dirty=!0,t._container=e,t.$_prepareElements(e),t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=yn.VisualContainer,l.__extends(i,n),i.prototype._doDispose=function(){this._gridView=null,this._watchTimer&&clearInterval(this._watchTimer),n.prototype._doDispose.call(this)},_dp(i,"gridView",{get:function(){return this._gridView}}),_dp(i,"formView",{get:function(){return this._formView||(this._formMarquee=new Sr.FormMarquee(this.doc),this.addElement(this._formMarquee),this._formView=new Sr.FormView(this),this._formView.$_initialzie(),this.addElement(this._formView)),this._formView}}),_dp(i,"heightMeasurer",{get:function(){return this._heightMeasurer}}),i.prototype.setWatchTimer=function(e){this._watchTimer&&clearInterval(this._watchTimer),this._watchTimer=null,this._displayOberver=this.$_displayOberver.bind(this),e&&(this._watchTimer=setInterval(this._displayOberver,100))},i.prototype.getTableCell=function(e){return this._gridView.getTableCell(e)},i.prototype._doResized=function(e){n.prototype._doResized.call(this,e),this._gridView.$_containerResized()},i.prototype._doPrepareContainer=function(e,t,n){e.className="rg-root rg-grid",p.Utils.isMobile()&&(e.style.touchAction="manipulation"),t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden"),this._gridView=this._createGridView(t,n),this.addElement(this._gridView),this._activeView=this._gridView,this._heightMeasurer=new o(this.measurer),this._sizeInfo=new h.Rectangle(0,0,e.clientWidth,e.clientHeight)},i.prototype._createDefaultTool=function(){return new(p.Utils.isMobile()?xr.MobileGridTool:gr.GridViewSelectionTool)(this)},i.prototype._doLayout=function(e){var t,n,r=this._gridView,i=this._formView,s=this._formMarquee;i&&i.visible?this._activeView!==i&&(r.$_deactivateView(),i.$_activateView(),0<=r.focusedRow&&(t=(t=!(t=r.focusedItem)||t instanceof dt.GridRow?t:r.getNextRow(t))||r.getFirstRow(),i.currentRow=t?t.index:-1),this._activeView=i):this._activeView===i&&(i&&i.$_deactivateView(),r.$_activateView(),i&&0<=i.currentRow&&r.setFocusedItem(i.currentRow),this._activeView=r),s&&(s.visible=i.visible),this._activeView!=r&&!i.options.modal||(n=e.clone(),r.setRect(n),n.x=n.y=0,r.$_layout(n)),r._dom.style.opacity=this._activeView!=r&&i.options.modal?i.options.modalOpacity+"":"",this._activeView===i&&(n=e.clone(),this._formView.options.padRect(n),this._formView.setRect(n),n.x=n.y=0,i.$_layout(r.delegate,n),s.setRect(e))},i.prototype._layoutChildren=function(e){n.prototype._layoutChildren.call(this,e),this._sizeInfo.width=e.width,this._sizeInfo.height=e.height},i.prototype._doAfterRender=function(){this._gridView.visible&&this._gridView.$_afterRender()},i.prototype.$_displayOberver=function(){var e=this._containerDom,t=e.clientWidth,n=e.clientHeight,e=this._sizeInfo;0<t&&0<n&&(1<Math.abs(this._sizeInfo.width-t)||1<Math.abs(this._sizeInfo.height-n))&&(e.width=t,e.height=n,this.invalidateLayout(),this._doResized(null))},i.prototype._doPrepareRender=function(e){e=e.clone(),this._gridView.visible&&(this._gridView.setRect(e),e.x=e.y=0,this._gridView.$_prepareRender(e)),this._formView&&this._formView.visible&&(this._formView.options.padRect(e),this._formView.setRect(e),e.x=e.y=0,this._formView.$_prepareRender(e))},i.prototype._createGridView=function(e,t){return new gr.GridView(this,e=void 0===e?!1:e,t=void 0===t?null:t)},i);t.GridContainer=r;var s,o=(s=y.Base,l.__extends(u,s),u.prototype._doDispose=function(){this._container=null,s.prototype._doDispose.call(this)},_dp(u,"rowHeight",{get:function(){return this._rowHeight||(this._rowHeight=this.$_measure(this._bodyStyle,this._dataRowStyle,this._dataCellStyle))}}),_dp(u,"headerHeight",{get:function(){return this._headerHeight||(this._headerHeight=this.$_measure(this._headerStyle,this._headerRowStyle,this._headerCellStyle))}}),_dp(u,"summaryHeight",{get:function(){return this._summaryHeight||(this._summaryHeight=this.$_measure(this._summaryStyle,this._summaryRowStyle,this._summaryCellStyle))}}),_dp(u,"footerHeight",{get:function(){return this._footerHeight||(this._footerHeight=this.$_measure(this._footerStyle,this._footerRowStyle,this._footerCellStyle))}}),_dp(u,"groupFooterHeight",{get:function(){return this._gfooterHeight||this.$_measure(this._bodyStyle,this._groupFooterStyle,this._groupFooterCellStyle)}}),u.prototype.measure=function(e){this._dirty&&(this._dirty=!1)},u.prototype.invalidate=function(){this._dirty=!0},u.prototype.$_prepareElements=function(e){var t=p.getDoc(e),n=t.createElement("table");e.appendChild(n),e=n.style,e.width="1000px",e.height="1px",e.left="-10000px",e.position="absolute",n.className="rg-table",e=t.createElement("tbody"),n.appendChild(e),n=t.createElement("tr"),e.appendChild(n),e=t.createElement("td"),e.className="rg-data-cell",n.appendChild(e),t=t.createElement("div"),e.appendChild(t),t[p.Utils.TextProp]="AYwyhi\uc6b0\ub9ac\ud14c\ud06c"},u.prototype.$_measure=function(e,t,n){var r=this._container,i=this._container.firstElementChild.tBodies[0].rows[0],s=i.cells[0];return r.className=e,i.className=t,s.className=n,i.offsetHeight},u);t.GridMeasurer=o});t(Tr),Tr.GridContainer,Tr.GridMeasurer;var Nr=n(function(e,t){function i(e){return e=n.call(this,e)||this,e._levelIndent=16,e._lineVisible=!0,e._showCheckBox=!1,e._iconImagesRoot="",e._defaultIcon=-1,e._collapseWhenLeftKey=!0,e._collapseWhenCtrlKey=!0,e._expandWhenRightKey=!0,e._expandWhenCtrlKey=!0,e._iconVisible=!0,e._expandedIcon=-1,e._collapsedIcon=-1,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Kt.GridBaseOptions,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(i,"levelIndent",{get:function(){return this._levelIndent}}),_dp(i,"lineVisible",{get:function(){return this._lineVisible},set:function(e){e!=this._lineVisible&&(this._lineVisible=e,this._changed())}}),_dp(i,"showCheckBox",{get:function(){return this._showCheckBox},set:function(e){e!=this._showCheckBox&&(this._showCheckBox=e,this._changed())}}),_dp(i,"iconImagesRoot",{get:function(){return this._iconImagesRoot},set:function(e){e!==this._iconImagesRoot&&(this._iconImagesRoot=e,this._changed())}}),_dp(i,"iconImages",{get:function(){return this._iconImages},set:function(e){e!==this._iconImages&&(this._iconImages=e?e.slice():[],this._changed())}}),_dp(i,"defaultIcon",{get:function(){return this._defaultIcon},set:function(e){e!=this._defaultIcon&&(this._defaultIcon=e,this._changed())}}),_dp(i,"expandedIcon",{get:function(){return this._expandedIcon},set:function(e){e!=this._expandedIcon&&(this._expandedIcon=e,this._changed())}}),_dp(i,"collapsedIcon",{get:function(){return this._collapsedIcon},set:function(e){e!=this._collapsedIcon&&(this._collapsedIcon=e,this._changed())}}),_dp(i,"iconCallback",{get:function(){return this._iconCallback},set:function(e){e!=this._iconCallback&&(this._iconCallback=e,this._changed())}}),_dp(i,"collapseWhenLeftKey",{get:function(){return this._collapseWhenLeftKey},set:function(e){e!=this._collapseWhenLeftKey&&(this._collapseWhenLeftKey=e,this._changed())}}),_dp(i,"collapseWhenCtrlKey",{get:function(){return this._collapseWhenCtrlKey},set:function(e){e!=this._collapseWhenCtrlKey&&(this._collapseWhenCtrlKey=e,this._changed())}}),_dp(i,"expandWhenRightKey",{get:function(){return this._expandWhenRightKey},set:function(e){e!=this._expandWhenRightKey&&(this._expandWhenRightKey=e,this._changed())}}),_dp(i,"expandWhenCtrlKey",{get:function(){return this._expandWhenCtrlKey},set:function(e){e!=this._expandWhenCtrlKey&&(this._expandWhenCtrlKey=e,this._changed())}}),_dp(i,"iconVisible",{get:function(){return this._iconVisible},set:function(e){e!=this._iconVisible&&(this._iconVisible=e,this._changed())}}),i);t.TreeOptions=r});t(Nr),Nr.TreeOptions;var Cr=n(function(e,t){function i(e,t){return t=n.call(this,e,t,"treeExpandHandle")||this,t._expanded=!1,t.clickable=!0,t}function u(){var e=s.call(this)||this;return e._exclusive=!1,e}function c(e){return a.call(this,e,"treeItemView")||this}function v(){return null!==h&&h.apply(this,arguments)||this}function y(){return null!==m&&m.apply(this,arguments)||this}function w(e,t){return b.call(this,e,t)||this}function S(){return null!==E&&E.apply(this,arguments)||this}function T(){return null!==x&&x.apply(this,arguments)||this}function C(e){var t=N.call(this,e.doc)||this;return t._levelWidth=16,t._handleWidth=9,t._handleHeight=9,t._stroke="gray",t._linePool=[],t._lines=[],t._startIndex=-1,t._endIndex=-1,t._treeView=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=pr.CellHandle,l.__extends(i,n),_dp(i,"expanded",{get:function(){return this._expanded},set:function(e){e!=this._expanded&&(this._expanded=e,this._changed())}}),i.prototype._createDom=function(){return null},i);t.TreeExpandHandle=r,t.TREE_INDENT=3;var s,o=(s=Ct.DataCellRenderer,l.__extends(u,s),u.prototype._doDispose=function(){this._expander=this._check=this._icon=this._span=null,s.prototype._doDispose.call(this)},_dp(u,"type",{get:function(){return u.TYPE}}),_dp(u,"styleName",{get:function(){return u.STYLE_NAME}}),u.prototype._doInitContent=function(e){var t=p.getDoc(e),n=this._expander=t.createElement("span");e.appendChild(n),n=this._check=t.createElement("input"),n.type="checkbox",n.className="rg-tree-checkbox",n.style.display="inline-block",e.appendChild(n),n=this._icon=t.createElement("img"),n.className="rg-tree-icon",e.appendChild(n),t=this._span=t.createElement("span"),e.appendChild(t)},u.prototype._doRenderCell=function(e,n,r,i,s){var o=e.treeOptions,u=o.showCheckBox,a=o.levelIndent,f=this._expander,l=this._dom,c=this._check,h=this._icon,d=this._span,v=n.item;f.className=v.isLeaf?"rg-tree-leaf":v.expanded?"rg-tree-expanded":"rg-tree-collapsed",this._exclusive!=e.checkBar.exclusive&&(this._exclusive=e.checkBar.exclusive,c.setAttribute("type",this._exclusive?"radio":"checkbox"),c.className=this._exclusive?"rg-tree-radio":"rg-tree-checkebox"),u?(c.parentElement||l.insertBefore(c,this._span),c.checked=v.checked):c.parentElement&&l.removeChild(c),o.iconVisible?(h.parentElement||l.insertBefore(h,this._span),(o=e.getTreeIcon(v))?(h.src=o,h.removeAttribute("height"),h.style.removeProperty("visibility")):(h.removeAttribute("src"),h.height=1,h.style.visibility="hidden")):h.parentElement&&l.removeChild(h),d[p.Utils.TextProp]=this._makeText(e,n,r),l.style.setProperty("padding-left",t.TREE_INDENT+(v.level-1)*a+"px","important")},u.TYPE="tree",u.STYLE_NAME="rg-renderer "+(u.STYLE="rg-tree-renderer"),u);t.TreeCellRenderer=o;var a,f=(a=un.RowElement,l.__extends(c,a),c.prototype.isTreeExpander=function(e){return e=e.className,"rg-tree-expanded"==e||"rg-tree-collapsed"==e},c.prototype.isCheckBox=function(e){return e=e.className,"rg-tree-checkbox"==e||"rg-tree-radio"==e},c.prototype._doLayoutContent=function(e){a.prototype._doLayoutContent.call(this,e)},c.prototype._createRenderer=function(e,t,n,r,i){var s=e.layoutManager,u=t.dataColumn.layout;return 0===s.getHorzColumnIndex(u)?new o:a.prototype._createRenderer.call(this,e,t,n,r,i)},c.prototype.$_getDefaultRenderer=function(e,t){return e=e.layoutManager,t=t.dataColumn.layout,(0===e.getHorzColumnIndex(t)?o:Ct.TextCellRenderer).TYPE},c);t.TreeItemElement=f;var h,d=(h=f,l.__extends(v,h),v.prototype._getFirstCell=function(e){return this._getStartCell(e)},v.prototype._getLastCell=function(e){return this._getEndCell(e)},v.prototype._getStartCell=function(e){return 0},v.prototype._getEndCell=function(e){return e.fixedCellCount-1},v);t.FixedTreeItemElement=d;var m,g=(m=f,l.__extends(y,m),y.prototype._getFirstCell=function(e){return this._getStartCell(e)},y.prototype._getLastCell=function(e){return this._getEndCell(e)},y.prototype._getStartCell=function(e){return e.cellCount-e.rightCellCount},y.prototype._getEndCell=function(e){return e.cellCount-1},y);t.RightTreeItemElement=g;var b,r=(b=fn.GridBodyElement,l.__extends(w,b),w.prototype.isTreeCell=function(e){return e=this.bodyCellAt(e),e&&e.renderer2 instanceof o},w.prototype.createRowElement=function(){return new f(this.doc)},w);t.TreeBodyElement=r;var E,r=(E=fn.FixedBodyElement,l.__extends(S,E),S.prototype.isTreeCell=function(e){return e=this.bodyCellAt(e),e&&e.renderer2 instanceof o},S.prototype.createRowElement=function(){return new d(this.doc)},S);t.FixedTreeBodyElement=r;var x,r=(x=fn.RightBodyElement,l.__extends(T,x),T.prototype.isTreeCell=function(e){return e=this.bodyCellAt(e),e&&e.renderer2 instanceof o},T.prototype.createRowElement=function(){return new g(this.doc)},T);t.RightTreeBodyElement=r;var N,r=(N=Yt.LayerElement,l.__extends(C,N),C.prototype._doDispose=function(){this._linePool=null,this._lines=null,N.prototype._doDispose.call(this)},_dp(C,"levelWidth",{get:function(){return this._levelWidth},set:function(e){e!=this._levelWidth&&(this._levelWidth=e,this.invalidate())}}),_dp(C,"handleWidth",{get:function(){return this._handleWidth},set:function(e){e!=this._handleWidth&&(this._handleWidth=e,this.invalidate())}}),_dp(C,"handleHeight",{get:function(){return this._handleHeight},set:function(e){e!=this._handleHeight&&(this._handleHeight=e,this.invalidate())}}),_dp(C,"stroke",{get:function(){return this._stroke},set:function(e){e!=this._stroke&&(this._stroke=e,this.invalidate())}}),C.prototype.setRange=function(e,t,n){t==this._startIndex&&n==this._endIndex||(this._startIndex=t,this._endIndex=n,this.invalidate())},C.prototype.layout=function(e){var t=this._treeView;if(this.$_hideAll(),!(!t||this._startIndex<0||this._endIndex<0||this._startIndex>this._endIndex)){for(var n=null,r=this._startIndex;r<=this._endIndex&&!(n=t.getItem(r));r++);if(n){var i=n.level;if(1<i||0<n.childIndex){for(var s=0;s<i;s++){var o=n.getAncestor(s);(u=o.last)&&u.index>=r&&(u=this.$_findLevelItem(s+1,r),this.$_drawVertLine(e,this.$_borrowLine(),null,u,o.level))}0<n.childIndex&&this.$_drawVertLine(e,this.$_borrowLine(),null,n,n.parent.level)}for(;r<=this._endIndex;r++){var u,a=t.getItem(r),f=a.parent;(s=a.childIndex)<f.count-1&&((u=f.getItem(s+1)).index>this._endIndex&&(u=null),this.$_drawVertLine(e,this.$_borrowLine(),a,u,f.level)),(f=a)&&f.expanded&&0<f.count&&((u=f.getItem(0)).index>this._endIndex&&(u=null),this.$_drawChildLine(e,this.$_borrowLine(),a,u)),this.$_drawHorzLine(e,this.$_borrowLine(),a)}}}},C.prototype._getCssSelector=function(){return"rg-tree-lines"},C.prototype._initDom=function(e){N.prototype._initDom.call(this,e),e=e.style,e.setProperty("pointer-events","none","important"),e.setProperty("overflow","hidden")},C.prototype._doDraw=function(e){},C.prototype.$_borrowLine=function(){var e=this._linePool.pop();return e||((e=this._treeView.doc.createElement("div")).className="rg-tree-line",e.style.position="absolute",this._dom.appendChild(e)),e.style.display="inline-block",this._lines.push(e),e},C.prototype.$_hideAll=function(){for(var e=this._lines.length-1;0<=e;e--)"none"!=this._lines[e].style.display&&(this._lines[e].style.display="none");this._linePool=this._linePool.concat(this._lines.splice(0,this._lines.length))},C.prototype.$_findLevelItem=function(e,t){for(var n=t;n<=this._endIndex;n++){var r=this._treeView.getItem(n);if(r&&r.level==e)return r}return null},C.prototype.$_setBounds=function(e,n,r,i,s){e=e.style,e.left=t.TREE_INDENT+n+"px",e.top=r+"px",e.width=1==i?"1px":i+"px",e.height=1==s?"1px":s+"px"},C.prototype.$_drawVertLine=function(e,t,n,r,i){var s,o,u=e.topIndex,a=i*this._levelWidth+this._levelWidth/2,f=0,i=this.height;n&&(s=e.getItemBounds(n.index-u),o=n instanceof Ot.TreeItem&&n.hasChildren?this._handleHeight:0,f=s.y+s.height/2+o/2),r&&(s=e.getItemBounds(r.index-u),o=r instanceof Ot.TreeItem&&r.hasChildren?this._handleHeight:0,i=s.y+s.height/2-o/2),this.$_setBounds(t,a,f,1,i-f)},C.prototype.$_drawHorzLine=function(e,t,n){var r=e.topIndex,i=n.parent.level*this._levelWidth+this._levelWidth/2,s=n.level*this._levelWidth;n.hasChildren&&(i+=this._handleWidth/2);var r=e.getItemBounds(n.index-r),o=r.y+r.height/2;this.$_setBounds(t,i,o,s-i,1)},C.prototype.$_drawChildLine=function(e,t,n,r){var i=e.topIndex,s=n.level*this._levelWidth+this._levelWidth/2,o=this.height,u=e.getItemBounds(n.index-i),n=12;n-=2,n=u.y+u.height/2+5,r&&(u=e.getItemBounds(r.index-i),r=r.hasChildren?this._handleHeight:0,o=u.y+u.height/2-r/2),this.$_setBounds(t,s,n,1,o-n)},C);t.TreeLinesElement=r});t(Cr),Cr.TreeExpandHandle,Cr.TREE_INDENT,Cr.TreeCellRenderer,Cr.TreeItemElement,Cr.FixedTreeItemElement,Cr.RightTreeItemElement,Cr.TreeBodyElement,Cr.FixedTreeBodyElement,Cr.RightTreeBodyElement,Cr.TreeLinesElement;var kr=n(function(e,t){function i(e){return n.call(this,e,"treeViewSelectionTool")||this}function u(e,t){return s.call(this,e,t)||this}function h(){return a.call(this,"treeItemExpanderCell")||this}function m(){return d.call(this,"treeItemFooterCell")||this}function b(e,t){return t=g.call(this,e,t=void 0===t?!1:t)||this,t._expanderCell=new f,t._footerCell=new v,t._focusedRow=-1,t.itemSource=t._rs=t._createItemSource(),t}function S(e){return w.call(this,e)||this}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=qn.GridSelectionTool,l.__extends(i,n),i.prototype._doDispose=function(){n.prototype._doDispose.call(this)},i.prototype._doKeyDown=function(e){var t,r=this.focused.clone(),i=this.grid.treeOptions,s=e.which,o=e.ctrlKey||e.metaKey;if(r&&(t=r.item))switch(s){case 39:if(!o&&1==this.grid.visibleLayoutCount&&r.isRight&&i.expandWhenRightKey||o&&i.expandWhenCtrlKey){if(!t.expanded)return t.setExpanded(!0,!1,!1),!0;if(0<t.count)return r.down(),this.setFocused(r,!0),!0}break;case 37:if(!o&&r.isLeft&&i.collapseWhenLeftKey||o&&i.collapseWhenCtrlKey){if(t.expanded)return t.setExpanded(!1,!1,!1),!0;if(!(t.parent instanceof Ot.RootTreeItem))return r.itemIndex=t.parent.index,this.setFocused(r,!0),!0}}return n.prototype._doKeyDown.call(this,e)},i.prototype._doMouseDown=function(e){var t=e.mouseX,r=e.mouseY,i=(e.ctrlKey||e.metaKey,e.shiftKey,e.altKey),s=this.grid,t=this.findElementAt(t,r,!1),r=this.mouseEventTarget;t instanceof Cr.TreeItemElement&&t.isTreeExpander(r)&&!i?(t=t._item)instanceof Ot.TreeItem&&(t.expanded?s.collapse(t,!1):s.expand(t,!1,!1)):n.prototype._doMouseDown.call(this,e)},i.prototype._doClick=function(e,t,r){t=t||e.mouseX,r=r||e.mouseY;var i=e.shiftKey,s=this.grid,o=(this.focused,this.findElementAt(t,r,!1)),u=this.mouseEventTarget;o instanceof Cr.TreeItemElement&&o.isCheckBox(u)&&(o=s.getItem(o.itemIndex),this._doCheck(u,o,i)),n.prototype._doClick.call(this,e,t,r)},i.prototype._canMoveRowAt=function(e,t,n){var r=e.boundsByContainer(e.getCellRectAt(this.grid.layoutManager,t,!1)),i=Cr.TREE_INDENT+(t.item.level-1)*this.grid.treeOptions.levelIndent;if(n<r.x+(e.isTreeCell(t)?i:20)){var s=this.grid.getSelectedItems();if(1<s.length)for(var o=s[0].level,u=1;u<s.length;u++)if(s[u].level<o)return!1;return!0}},i);t.TreeViewSelectionTool=r;var s,o=(s=Tr.GridContainer,l.__extends(u,s),u.prototype._doDispose=function(){s.prototype._doDispose.call(this)},_dp(u,"treeView",{get:function(){return this.gridView}}),u.prototype._createGridView=function(){return new y(this)},u.prototype._createDefaultTool=function(){return new r(this)},u);t.TreeContainer=o;var a,f=(a=Et.GridCell,l.__extends(h,a),_dp(h,"getText",{get:function(){return null}}),_dp(h,"value",{get:function(){return null}}),h),d,v=(d=Et.GridCell,l.__extends(m,d),_dp(m,"getText",{get:function(){var e,t=String(this.value());return t||(e=this.index).dataColumn&&(t=e.column.footer.text),t}}),_dp(m,"value",{get:function(){return null}}),m),g,y=(g=ir.GridBase,l.__extends(b,g),b.prototype._doDispose=function(){g.prototype._doDispose.call(this)},_dp(b,"treeOptions",{get:function(){return this._treeOptions}}),_dp(b,"linesView",{get:function(){return this._linesView}}),b.prototype.isTree=function(){return!0},b.prototype._beforeChangeLayout=function(){},b.prototype.getLevels=function(e){return this._rs.getLevels(e)},b.prototype.getExpanderCell=function(e){return this._expanderCell.setIndex(It.CellIndex.temp(this,e)),this._expanderCell},b.prototype.getFooterCell=function(e){return this._footerCell.setIndex(e),this._footerCell},b.prototype.expand=function(e,t,n,r){this.isItemEditing(null)||this._rs.expand(e,t,n,r)},b.prototype.collapse=function(e,t){this.isItemEditing(null)||this._rs.collapse(e,t)},b.prototype.expandAll=function(e){void 0===e&&(e=0),this.isItemEditing(null)||this._rs.expandAll(e)},b.prototype.collapseAll=function(){this.isItemEditing(null)||this._rs.collapseAll()},b.prototype.getTreeIcon=function(e){var t=this.treeOptions,n=t.iconImages;if(n){var r=void 0,r=e.hasChildren&&e.expanded&&-1<t.expandedIcon?t.expandedIcon:e.hasChildren&&e.collapsed&&-1<t.collapsedIcon?t.collapsedIcon:e.iconIndex,i=t.iconCallback;if(i&&(e=i(this.handler,e.index,e.dataRow,r),isNaN(e)||(r=e)),0<=(r=r<0||r>=n.length?t.defaultIcon:r)&&r<n.length)return t.iconImagesRoot+n[r]}},b.prototype.getCheckedItems=function(){for(var e=[],t=0,n=this.itemCount;t<n;t++){var r=this.getItem(t);r.checked&&e.push(r)}return e},b.prototype.getCheckedItemIndices=function(){for(var e=[],t=0,n=this.itemCount;t<n;t++){var r=this.getItem(t);r.checked&&e.push(r.index)}return e},b.prototype.getCheckedRows=function(e){var t=null;if(e)for(var t=[],n=0,r=this.itemCount;n<r;n++){var i=this.getItem(n);i.checked&&t.push(i.row)}else t=this._rs.getCheckedRows();return t},b.prototype.getCheckedRowIds=function(e){var t=null;if(e)for(var t=[],n=0,r=this.itemCount;n<r;n++){var i=this.getItem(n);i.checked&&t.push(i.dataRow)}else t=this._rs.getCheckedRowIds();return t},b.prototype.checkChildren=function(e,t,n,r,i,s){if(void 0===i&&(i=!0),void 0===s&&(s=!1),e)for(var o=0,u=e.count;o<u;o++){var a=e.getItem(o);(!i||a.checkable)&&a.setChecked(t,s),!n||!a.expanded&&r||this.checkChildren(a,t,!0,r,i,s)}},b.prototype.resetCheckables=function(){this._rs.resetCheckables()},b.prototype.applyCheckables=function(){this._rs.applyCheckables()},b.prototype.getItemOfModel=function(e){return 0<=e.itemIndex?this.getItem(e.itemIndex):0<=e.dataRow?this.getItemOfRow(e.dataRow,!1):null},b.prototype.getJsonRows=function(){return this._rs.getJsonRows()},_dp(b,"dataSource",{get:function(){return this._rs&&this._rs.dataSource},set:function(e){this._rs&&(this._rs.dataSource=e)}}),_dp(b,"maxItemCount",{get:function(){return this._rs?this._rs.maxItemCount:0},set:function(e){this._rs&&(this._rs.maxItemCount=e)}}),_dp(b,"summarizer",{get:function(){return this._rs.summarizer}}),b.prototype._initStyles=function(){g.prototype._initStyles.call(this),this._treeOptions=new Nr.TreeOptions(this)},b.prototype._createItemSource=function(){return new _t.TreeGridItemProvider(!0)},b.prototype._doContentPanesCreated=function(){this._linesView=new Cr.TreeLinesElement(this),this.addElement(this._linesView)},b.prototype._createSidePane=function(){return g.prototype._createSidePane.call(this)},b.prototype._createLayoutManager=function(){return new E(this)},b.prototype._createBodyView=function(e){return new Cr.TreeBodyElement(this.doc,e)},b.prototype._createFixedBodyView=function(e){return new Cr.FixedTreeBodyElement(this.doc,e)},b.prototype._createRightBodyView=function(e){return new Cr.RightTreeBodyElement(this.doc,e)},b.prototype._visualObjectChanged=function(e){g.prototype._visualObjectChanged.call(this,e),$t.CheckBar},b.prototype.append=function(){return this.insert(this._rs.rootItem,!1,!0)},b.prototype._doCanInsert=function(e,t,n){return e&&(0<e.count||!n||0==e.level||this.editOptions.appendable)},b.prototype._doMaxRowCountChanged=function(){this._rs.maxItemCount=this.maxItemCount},b.prototype.getSortFields=function(){return this._rs.getSortFields()},b.prototype.getSortDirections=function(){return this._rs.getSortDirections()},b.prototype.getSortCases=function(){return this._rs.getSortCases()},b.prototype._doSortItems=function(e,t,n){this._rs.setLabelComparer(this._doPrepareComparer(e)),this._rs.orderBy(e,t,n)},b.prototype._doColumnFiltersChanged=function(e,t){this._rs.includeParentItem=this.filteringOptions.includeParentItem,this.applyFilters(e,t)},b.prototype.setOptions=function(e){var t;e&&(t=this._rs,void 0!==e.hideDeleted&&(t.hideDeleted=e.hideDeleted),void 0!==e.hideDeletedRows&&(t.hideDeleted=e.hideDeletedRows),void 0!==e.summaryMode&&(t.summaryMode=e.summaryMode),void 0!==e.sortMode&&(t.sortMode=e.sortMdoe),g.prototype.setOptions.call(this,e))},b.prototype._doPrepareRender=function(e){var t=this._horzScrolled;g.prototype._doPrepareRender.call(this,e),t&&this.layoutManager.$_layoutLines()},b.prototype.$_doLayout=function(e,t){this._treeOptions,g.prototype.$_doLayout.call(this,e,t)},b.prototype.assignImageList=function(e){},b.prototype.refreshView=function(){g.prototype.refreshView.call(this)},b.prototype.getEditBounds=function(e,t){return g.prototype.getEditBounds.call(this,e,t)},b.prototype.updatePastedRow=function(e,t,n){e instanceof Ot.TreeItem&&(e=e.row)&&e.update(t,n)},b.prototype.appendPastedRow=function(e){var t=this.dataSource;t&&(e=t.createRow(e,-1,!1),t.rootRow.addChild(e,!1))},_dp(b,"undoable",{get:function(){return this._rs.undoable},set:function(e){this._rs.undoable=e}}),_dp(b,"canUndo",{get:function(){return this._rs.canUndo}}),_dp(b,"canRedo",{get:function(){return this._rs.canRedo}}),_dp(b,"undoing",{get:function(){return this._rs.undoing}}),_dp(b,"redoing",{get:function(){return this._rs.redoing}}),b.prototype.undo=function(){return!!this._rs.canUndo&&(this._rs.cancelWhenLastUndo=this.editOptions.cancelWhenLastUndo,this.editController.cancelEditor(!0),this._rs.undo(),!0)},b.prototype.redo=function(){return!!this._rs.canRedo&&(this._rs.redo(),!0)},b.prototype.execute=function(e){this._rs.execute(e)},b.prototype.clearCommandStack=function(e){this._rs.clearCommandStack(e=void 0===e?!0:e)},b.prototype.getFirstRow=function(){return null},b.prototype.getLastRow=function(){return null},b.prototype.getPrevRow=function(e){return null},b.prototype.getNextRow=function(e){return null},b.prototype._doMoveRows=function(e,t){var n=t&&t.dataId;if(0<=n){for(var r=[],i=0,s=e;i<s.length;i++){var o=s[i],o=o&&o.dataId;0<=o&&r.push(o)}0<r.length&&0<(e=(t=this.dataSource).rowsByIds(r,!1)).length&&t.moveRows(e,t.rowById(n))}return!1},b.prototype._fitLayoutWidth=function(e){if(!e.visible)return 0;var t,n=this.itemSource,r=this.getIndex(this.topIndex,e.firstColumn),i="",s=0,o=i=e.firstColumn.header.displayText,u=this.getBodyCellAt(r,!1),a=u&&u.renderer2&&u.renderer2._dom,f=u&&u.renderer2 instanceof Cr.TreeCellRenderer,l={0:p.Utils.getTextLength(o)},h={0:o};!a||(E=p.getWin(a).getComputedStyle(a))&&(i=E.paddingLeft,s+=0<(a=parseInt(i.substr(0,i.indexOf("px"))))?a:0,i=E.paddingRight,s+=0<(a=parseInt(i.substr(0,i.indexOf("px"))))?a:0,t={fontSize:E.fontSize,fontFamily:E.fontFamily,fontWeight:E.fontWeight,fontStyle:E.fontStyle});for(var d=0,v=n.itemCount;d<v;d++)r.itemIndex=d,l[b=f?r.item.level:0]=l[b]||0,i=this.getDisplayText(r),p.Utils.getTextLength(i)>l[b]&&(l[b]=p.Utils.getTextLength(i),h[b]=i);for(var m=0,g=0,y=Object.keys(l);g<y.length;g++){var b=y[g],w=f?parseInt(b)*this.linesView.levelWidth+6+(this.treeOptions.iconVisible?24:0):6;w+=this.container.measureText("rg-data-cell",h[b],t),m=Math.max(m,w)}s+=m;var E=e.firstColumn,n=E.editor,e=this.delegate.getCellEditor(an.CellEditor.getEditorType(n));return e.hasButton(e.native,n)&&(s+=this.body.editButtonWidth*e.buttonCount),E.button!==c.CellButton.NONE&&(s+=this.body.cellButtonWidth),s},b.prototype.$_getVisibleAncestor=function(e){var t=this._rs.getItemOfRow(e);if(t){for(;t&&!t.visible;)t=t.parent;return t}return null},b.prototype.onItemProviderReset=function(e){this._currentRowId=-1,g.prototype.onItemProviderReset.call(this,e)},b.prototype.onTreeItemProviderItemChanged=function(e,t){this.invalidateLayout(),this.fireEvent(b.CHANGED,t)},b.prototype.onTreeItemProviderExpanding=function(e,t){return this._focusedRow=this.focusedIndex?this.focusedIndex.dataRow:-1,this.editController.editing&&!e.isEditing()&&this.editController.cancelEditor(!0),!this.editController.editing&&!e.isEditing()&&this.fireConfirmEvent(b.EXPANDING,t)},b.prototype.onTreeItemProviderExpanded=function(e,t){var n;t&&0<=t.index&&((n=this.focusedIndex.clone()).itemIndex=t?t.index:-1,this.setFocusedIndex(n,!0)),this.fireEvent(b.EXPANDED,t)},b.prototype.onTreeItemProviderCollapsing=function(e,t){return this._focusedRow=this.focusedIndex?this.focusedIndex.dataRow:-1,this.editController.editing&&!e.isEditing()&&this.editController.cancelEditor(!0),!this.editController.editing&&!e.isEditing()&&this.fireConfirmEvent(b.COLLAPSING,t)},b.prototype.onTreeItemProviderCollapsed=function(e,t){var n;t&&0<=t.index&&((n=this.focusedIndex.clone()).itemIndex=t?t.index:-1,this.setFocusedIndex(n,!0)),this.fireEvent(b.COLLAPSED,t)},b.EXPANDING="onTreeViewExpanding",b.EXPANDED="onTreeViewExpanded",b.COLLAPSING="onTreeViewCollapsing",b.COLLAPSED="onTreeViewCollapsed",b.CHANGED="onTreeViewChanged",b);t.TreeView=y;var w,E=(w=cn.GridLayoutManager,l.__extends(S,w),S.prototype.layout=function(e){w.prototype.layout.call(this,e),this.$_layoutLines()},S.prototype.$_layoutLines=function(){var e,t,n=this.grid,r=n.linesView;(r.visible=n.treeOptions.lineVisible)&&(t=((e=0<this.fixedLayoutCount)?this.fixedBodyBounds:this.bodyBounds).clone(),e?(t.y+=this.fixedContentBounds.y,t.x+=this.fixedContentBounds.x):(t.y+=this.contentBounds.y,t.x+=this.contentBounds.x),0<this.layoutCount?t.width=Math.max(0,this.getLayoutWidth(0)):t.width=0,r.setRect(t),r.levelWidth=16,r.setRange(n,this.topIndex,Math.min(n.itemCount,this.topIndex+this.itemCount)-1),r.layout(this))},S);t.TreeGridLayoutManager=E});t(kr),kr.TreeViewSelectionTool,kr.TreeContainer,kr.TreeView,kr.TreeGridLayoutManager;var Lr=n(function(e,t){function i(){var e=n.call(this)||this;return e._columns=null,e}function u(){var e=s.call(this)||this;return e._gridIndex=0,e._numberFormatId=0,e._textFormatId=49,e._dateFormatId=14,e._rowLevels=0,e._indents=0,e._indentWidth=3,e._seriesCell=new Et.SeriesCell,e._excelFormulaRuntime=new r,e}Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=b.ExpressionRuntime,l.__extends(i,n),i.prototype._doDispose=function(){this._columns=null,n.prototype._doDispose.call(this)},i.prototype.setColumns=function(e){this._columns=[];for(var t=0;t<e.length;t++)e[t].layout instanceof Ft.CellLayoutColumnItem&&this._columns.push(e[t].layout.firstColumn.name)},i.prototype.setItemIndex=function(e,t){this._itemIndex=e,this._startCol=t},i.prototype.isIdentifier=function(e){return e=e.toLowerCase(),i.IDENTS.hasOwnProperty(e)?i.IDENTS[e]:n.prototype.isIdentifier.call(this,e)},i.prototype.evaluateIdentifier=function(e){if(e===i.ID_ROW)return String(this._itemIndex+1);throw new b.ExpressionEvaluationError("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(e,t){if(e!=i.ID_EXCELCOLUMN)throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e);if(t<0||t>=this._columns.length)throw new b.ExpressionEvaluationError("Data field index out of bounds:"+t);return this._columns[t]},i.prototype.evaluateIndexerS=function(e,t,n){if(e!=i.ID_EXCELCOLUMN)throw new b.ExpressionEvaluationError("Invalid identifier indexer: "+e);if(this._columns){e=this._columns.indexOf(t);if(e<0||e>=this._columns.length)throw new b.ExpressionEvaluationError("Column is not exists:"+t);return cr.ExcelUtil.toColCaption(e+this._startCol)}},i.IDENTS={excelcolumn:i.ID_EXCELCOLUMN=0,row:i.ID_ROW=1},i);t.ColumnExportStatementRuntime=r;var s,o=(s=or.ExporterBase,l.__extends(u,s),u.prototype.dispose=function(){return s.prototype.dispose.call(this),this._seriesCell=this._seriesCell.dispose(),this._linkRenderer&&(this._linkRenderer=this._linkRenderer.dispose()),this._templateRenderer&&(this._templateRenderer=this._templateRenderer.dispose()),this._excelFormulaRuntime=this._excelFormulaRuntime.dispose(),null},u.prototype._progressCallback=function(e,t,n,r){var i=this._progressGrid,s=this._multiOptions;i&&i.setExportProgress(n,r+s.prepareProgress,s.progressMessage)},u.prototype.export=function(e,t){function n(){var e=++this._gridIndex;e<r.exportGrids.length?this._exportGridAsync(o,r,e,n.bind(this)):(!t.progressCallback&&this._progressGrid&&this._progressGrid.endExportProgress(),this.save())}if(s.prototype.export.call(this,e,t),this._progressGrid=e,t){var r=this._multiOptions=t,i=this._multiOptions.exportGrids;if(i&&!(i.length<=0)){var e=p.getDoc(e.container._containerDiv).documentElement,o=new cr.ExcelWorkbook(e);if(this._mergeHeads=[],r.showProgress)this._allCount=this._prepareCount(r,i),this._progressMax=this._allCount+r.prepareProgress,this._progressPos=0,this._progressStep=Math.max(this._allCount/10|0,1),r.progressCallback?this.setProgress=r.progressCallback:(this._progressGrid&&this._progressGrid.beginExportProgress(r.progressMessage),this.setProgress=this._progressCallback),this._exportGridAsync(o,r,this._gridIndex=0,n.bind(this));else{for(var u=0,a=i.length;u<a;u++)this._exportGrid(o,i[u].options);this.save()}}}},u.prototype.buildBook=function(e){var t=this._exportOptions.grid;t.isTree()?this.buildTreeSheet(t,e):this.buildSheet(t,e)},u.prototype.buildSheet=function(e,t){var n=this._exportOptions,r=this._workbook,i=r.createSheet(this._sheetName,n.sheetAttrs),s=e.displayOptions;if(this._defaultHeight=s.rowHeight||s.minRowHeight,this._rowGrouped=e.rowGrouped,this._mergedGrouped=e.mergedRowGrouped,this._rowGrouped&&(this._rowLevels=e.rowGroupLevels),this._startItem=0,n.allItems&&this._rowGrouped){this.allItems=e.itemSource.getAllItems();var o=e.layoutManager.fixedItemCount;if(0<o)for(var u=0;u<o;u++)this.allItems.splice(u,0,e.getItem(u))}else n.pagingAllItems&&e.paged?(a=e.itemSource)instanceof hr.GridItemProvider&&(this.allItems=a.getPagingAllItems()):n.onlyCheckedItems&&!e.rowGrouped&&(this.allItems=e.getCheckedItems(!1));var s=this.allItems,a=s?s.length:e.itemCount;this._rowGrouped||(this._startItem=0<n.start?n.start:0,a=!(0<(s=0<n.count?n.count:a))||this._startItem+s>a?a-this._startItem:s),this._indexItem=this._startItem,this._lastItem=this._startItem+a,this._currentRow=n.yOffset,this._startCol=n.xOffset,this._prepareCommonStyles(e),this._buildColumns(e),i.createBorderEdges(ar.CssFactory.getSelectorStyle(this._preparer.documentCssStyles,".rg-grid")),this._buildDocumentTitle(r),this.header&&this.buildHeader(e),this.headerSummary&&this.buildSummaryItem(e,!1),this.buildItems(e,function(){this.footer&&this.buildSummaryItem(e,!0),this._buildDocumentTail(r),t&&t()}.bind(this))},u.prototype.buildHeader=function(e){for(var t=this._workbook,n=t.currentSheet,r=this._preparer,i=r.colCount,s=r.headerRowCount,o=e.header.heights||[],a=o&&0<o.length?e.header.minRowHeight:Math.max(e.header.height,e.header.minRowHeight*s)/s,f=[],l=0;l<s;l++)f.push(Math.max(o[l]||a,a)*u.LINE_HEIGHT);var c=this._indents,h=this._currentRow;n.setFirstRow(this._currentRow);for(var p=this._startCol,d=this._headerCellStyle,v=[],m=0;m<s;m++)v.push(n.borrowRow(h+m,f[m]));if(this.indicator){if(v[0].addText(p,this.indicatorHead,d),1<s){for(m=1;m<s;m++)v[m].addBlank(p,d);n.addMerge(h,p,s,1)}p++}if(this.checkBar){if(v[0].addText(p,this.checkBarHead,d),1<s){for(m=1;m<s;m++)v[m].addBlank(p,d);n.addMerge(h,p,s,1)}p++}if(0<c){for(var g=0;g<c;g++){for(m=0;m<s;m++)v[m].addBlank(g+p,this._indentHeadStyle);n.addMerge(h,g+p,s,1)}p+=c}for(m=0;m<s;m++)for(var y=h+m,b=v[m],g=0;g<i;g++){var w=r.getHeader(m,g),E=w&&w.layout,S=g+p;if(E.isProxy||w.spanned)b.addBlank(S,d);else{var x=E.displayText,T=this._preparer.documentCssStyles,w=(E instanceof Ft.CellLayoutColumnItem?E.firstColumn:E).header,w=w.exportStyleName||w.styleName,d=this._headerCellStyle;w&&(d=this._parseStyles(t,this._inheritStyles([this._headerCssStyle,ar.CssFactory.getSelectorStyle(T,"."+w)]),!0)),b.addText(S,x,d);var N=0,C=E.getHeaderSpan()-1,k=E.parent,x=k&&k.vertical;if(0<C){var L=0,A=E.vindex+1;if(x)for(;L++<C&&L<s;)N+=k.getVisible(A++)._hspan,r.getHeader(m+L,g).spanned=!0;else for(;L++<C&&g+L<i&&A<k.visibleCount;)N+=k.getVisible(A++)._cspan,r.getHeader(m,g+L).spanned=!0}x?n.addMerge(y,S,E.hspan+N,E.cspan):n.addMerge(y,S,E.hspan,E.cspan+N)}}this._currentRow+=s,n.setLastRow(this._currentRow-1)},u.prototype.buildSummaryItem=function(e,t){function n(e,n,r,i,s){var o=w.getCell(r.layout),u=this._exportOptions,a=o.value;a instanceof Date?!u.datetimeCallback||(a=u.datetimeCallback(-1,r.name,a))instanceof Date?e.addDate(n,a,s):e.addText(n,a,s):isNaN(a)?(r=(r=(r=t?r.getFooter(w._childIndex):r.getHeaderSummary(w._childIndex))&&w.getCellFormatters(r,null))?o.getDisplayText(r):a,e.addText(n,r||"",s)):e.addNumber(n,a,s)}var r,i=this._workbook.currentSheet,s=this._preparer,o=s.colCount,a=s.dataRowCount,f=this._indents,l=t?e.footers:e.headerSummaries;if(l.visible){var c=l.visibleCount,h=c*a,p=this._currentRow;i.setFirstRow(this._currentRow);for(var d,v=this._startCol,m=e.layoutManager.getDataRowHeights(a),g=m.reduce(function(e,t){return e+t},0),y=[],b=0;b<c;b++)for(var w,E=-1===(E=(w=l.getVisible(b)).height)?-1:0<E?E/a:Math.max(w.minHeight,e.heightMeasurer.summaryHeight,E),S=0;S<a;S++)0<g&&0<m[S]?y.push(m[S]*w.height/g*u.LINE_HEIGHT):y.push(E*u.LINE_HEIGHT);if(this.indicator){for(var x=0,T=0;x<c;x++)for(var N=0;N<a;N++)d=i.borrowRow(p+T,y[T]),t?0===T?d.addText(v,this.indicatorFoot,this._indicatorFootStyle):d.addBlank(v,this._indicatorFootStyle):0===T?d.addText(v,this.indicatorSummary,this._indicatorSumStyle):d.addBlank(v,this._indicatorSumStyle),T++;i.addMerge(p,v++,h,1)}if(this.checkBar){for(var C=0,T=0;C<c;C++)for(N=0;N<a;N++)d=i.borrowRow(p+T,y[T]),t?0===T?d.addText(v,this.checkBarSummary,this._checkBarSumStyle):d.addBlank(v,this._checkBarSumStyle):0===T?d.addText(v,this.checkBarFoot,this._checkBarFootStyle):d.addBlank(v,this._checkBarFootStyle),T++;i.addMerge(p,v++,h,1)}if(0<f){for(var k=0;k<f;k++){for(var L=0,T=0;L<c;L++)for(N=0;N<a;N++)(d=i.borrowRow(p+T,y[T])).addBlank(v+k,this._indentFootStyle),T++;i.addMerge(p,v+k,c*a,1)}v+=f}for(var A=p,O=(t?s.getFooterItem:s.getSummaryItem).bind(s),M=S=0;S<c;S++)for(w=l.getVisible(S),b=0;b<a;b++,M++){for(d=i.borrowRow(A,y[M]),r=0;r<o;r++){var _=O(S*a+b,r),D=_.layout,P=D.firstColumn,H=r+v,B=D.firstColumn.$_hash,j=(t?this._columnFooterStyles:this._columnSummaryStyles)[B][S];if(D.isProxy||_.spanned)d.addBlank(H,j);else{var F=0,I=t?D.getFooterSpan(S)-1:D.getSummarySpan(S)-1,q=t?D.getFooterUserSpan(w._childIndex):D.getSummaryUserSpan(w._childIndex),R=D.parent,B=R&&R.vertical;if(q){var _=q.footerCount||0,U=0<_?_*a:q.rowspan||1,z=q.colspan||1;n.call(this,d,H,P,S,j);for(var W=0,X=0,V=0;V<U;V++){var $=(t?s._footerCells:s._summaryCells)[S*a+b+V];$&&W++;for(var J=0;$&&J<z;J++){var K=$[r+J];K&&(X=Math.max(X,J+1),K.spanned=!0)}}(1<U||1<z)&&i.addMerge(A,H,W,X)}else{if(0<I){var Q=0,G=D.vindex+1;if(B)for(;Q++<I&&Q<a;)F+=R.getVisible(G++)._dspan,O(S*a+b+Q,r).spanned=!0;else for(;Q++<I&&r+Q<o&&G<R.visibleCount;)F+=R.getVisible(G++)._cspan,O(S*a+b,r+Q).spanned=!0}n.call(this,d,H,P,S,j),B?i.addMerge(A,H,D._dspan+F,D._cspan):i.addMerge(A,H,D._dspan,D._cspan+F)}}}A++}this._rowGrouped&&this._exportOptions.showLevelOutline&&i.setRowLevel(A,1),this._currentRow+=h,i.setLastRow(this._currentRow-1)}},u.prototype.buildItems=function(e,t){for(var n=this._exportOptions,r=n.showIndicatorRow(e),i=this.allItems,s=this._progressStep?this._indexItem+Math.min(this._progressStep,this._lastItem-this._indexItem):this._lastItem,o=this._indexItem;o<s;o++){var u=i?i[o]:e.getItem(o);if(this._indicatorNo=r?u.isDataRow?u.dataRow+1:void 0:o+1,u instanceof dt.GridRow)this.buildRow(e,u);else if(u instanceof Ht.MergedGroupHeader)this.buildMergedGroupHeader(e,u);else if(u instanceof Ht.MergedGroupFooter||u instanceof dt.GroupFooter)this._preparer.groupModel!=u.parent&&this._preparer.setGroupFooterItms(u.parent,n.allItems,e.rowGroup.mergeMode),u instanceof Ht.MergedGroupFooter?this.buildMergedGroupFooter(e,u):this.buildGroupFooter(e,u);else{if(!(u instanceof dt.GroupItemImpl))throw"Unkown item type";this.buildGroupHeader(e,u)}this._progressPos+=1,this._preparer.clearDataSpanned()}this.setProgress&&this.setProgress(e.handler,"process",this._progressMax,this._progressPos),this._indexItem=s,this._indexItem>=this._lastItem?t&&t():setTimeout(function(){this.buildItems(e,t)}.bind(this),0)},u.prototype.buildRow=function(e,t){var n=e.rowGroup,r=this._preparer,i=r.dataRowCount,s=r.colCount,o=e.layoutManager,a=this._columnMerged,f=this._mergeHeads,l=this._indents,h=this._workbook.currentSheet,p=this._currentRow;h.setFirstRow(this._currentRow);for(var d=this._startCol,v=e.displayOptions,m=o.getDataRowHeights(i),g=m.reduce(function(e,t){return e+t},0)||t.height,g=-1===(g=isNaN(g)?-1===v.rowHeight?-1:Math.max(v.rowHeight||0,v.minRowHeight*i):g)?-1:0<g?g/i:g,y=n.expandedAdornments===c.RowGroupAdornments.SUMMARY&&n.mergeMode,b=[],w=0;w<i;w++)b.push(h.borrowRow(p+w,-1===g?-1:(m[w]||g)*u.LINE_HEIGHT));this.indicator&&this._buildIndicatorCell(e,h,b,this._indicatorNo,p,d++,i),this.checkBar&&this._buildCheckBarCell(e,h,b,t.checked,p,d++,i);for(w=0;w<i;w++){for(var E=b[w],S=p+(E._row=w),x=d,T=0;T<l;T++)E.addBlank(x,this._indentBarStyle),x++;for(T=0;T<s;T++){var N=T+x,C=r.getItem(w,T),k=C.layout,L=k.firstColumn,A=L.$_hash,O=this._columnStyles[A];if(k.isProxy||C.spanned)E.addBlank(N,O);else{var M=k._dspan,_=!1;if(a){var D=It.DummyCellIndex.tempItem(e,t,k),C=o.getMergeRoom(D);if(C)_=(C.isHead(D)&&0==w||0<this._startItem&&t.index==this._startItem&&!y?(this._buildValueCell(e,h,E,t,k,N,x),f[A]=S):(E.addBlank(N,O),(C.isTail(D)||0<this._lastItem&&t.index==this._lastItem-1)&&(M=S-f[A]+i,h.addMerge(f[A],N,M,1),delete f[A])),!0);else if(this.allItems&&!t.visible&&e.isGroupedColumn(L)&&this._mergedGrouped){E.addBlank(N,O);for(var _=!0,P=t.parent;L.groupLevel!=P.level&&P;)P=P.parent;switch(e.rowGroup.expandedAdornments){case c.RowGroupAdornments.NONE:t==P.firstItem&&t==P.lastDataItem?_=!1:t==P.firstItem?(this._buildValueCell(e,h,E,t,k,N,x),f[A]=S):t==P.lastDataItem&&(M=S-f[A]+i,h.addMerge(f[A],N,M,1));break;case c.RowGroupAdornments.BOTH:t==P.lastDataItem&&0==P.footerCount&&(M=S-f[A]+i,h.addMerge(f[A],N,M,1));break;case c.RowGroupAdornments.HEADER:case c.RowGroupAdornments.SUMMARY:t==P.firstItem&&t==P.lastDataItem?f[A]?(M=S-f[A]+i,h.addMerge(f[A],N,M,1),delete f[A]):_=!1:t==P.lastDataItem?(M=S-f[A]+i,h.addMerge(f[A],N,M,1),delete f[A]):P.firstDataItem;break;case c.RowGroupAdornments.FOOTER:t==P.firstItem&&(this._buildValueCell(e,h,E,t,k,N,x),f[A]=S),t==P.lastDataItem&&(0<P.footerCount||(M=S-f[A]+i,h.addMerge(f[A],N,M,1),delete f[A]))}}}if(!_){var H=k.parent,D=H&&H.vertical,O=k.spanCallback,B=O?O(e.handler,k,t.index)-1:void 0,j=0;if(0<(B=void 0===B?k.getDataSpan()-1:B)){var F=0,I=k.vindex+1;if(D)for(;F++<B&&F<i;)j+=H.getVisible(I++)._dspan,r.getItem(w+F,T).spanned=!0;else for(;F++<B&&T+F<s&&I<H.visibleCount;)j+=H.getVisible(I++)._cspan,r.getItem(w,T+F).spanned=!0}this._buildValueCell(e,h,E,t,k,N,x),D?h.addMerge(S,N,k._dspan+j,k._cspan):h.addMerge(S,N,k._dspan,k._cspan+j)}}}this._rowGrouped&&this._exportOptions.showLevelOutline&&h.setRowLevel(S,t.level)}this._currentRow+=i,h.setLastRow(this._currentRow-1),t.index},u.prototype.buildGroupHeader=function(e,t){var n=this._workbook,r=n.currentSheet,i=this._preparer,s=t.level-1,o=this._indentBarStyle,a=i.colCount,f=this._currentRow;r.setFirstRow(this._currentRow);var l=this._startCol,c=(c=e.layoutManager.getDataRowHeights(i.dataRowCount).reduce(function(e,t){return e+t},0))||this._defaultHeight*i.dataRowCount,h=this._exportOptions,p=r.borrowRow(f,c*u.LINE_HEIGHT);if(this.indicator&&this._buildIndicatorCell(e,r,p,this._indicatorNo,f,l++,1),this.checkBar&&this._buildCheckBarCell(e,r,p,t.checked,f,l++,1),h.indenting)for(var d=0;d<s;d++)p.addBlank(l,o),l++;var v=e.rowGroup.getHeaderText(t),m=this._groupHeaderStyle,i=this._preparer.documentCssStyles,c=this._dynamicStyles,e="groupheader-style=.rg-rowgroup-header-level-"+t.level;c[e]?m=c[e]:((i=ar.CssFactory.getSelectorStyle(i,".rg-rowgroup-header-level-"+t.level))&&(m=this._extendStyles(n,m,i)),this._dynamicStyles[e]=m),p.addText(l,v,m),0<this._indents&&(a+=this._indents-(t.level-1));for(var g=1;g<a;g++)p.addBlank(g+l,m);r.addMerge(f,l,1,a),this._rowGrouped&&h.showLevelOutline&&r.setRowLevel(f,t.level),this._currentRow++,r.setLastRow(this._currentRow-1)},u.prototype.buildGroupFooter=function(e,t){function n(n,r,i,s){var o,u,a=Yn.RowGroupFooterCell.getValue(t,i),f=this._exportOptions;a instanceof Date?!f.datetimeCallback||(a=f.datetimeCallback(t.index,i.name,a))instanceof Date?n.addDate(r,a,s):n.addText(r,a,s):"string"==typeof a?n.addText(r,a,s):isNaN(a)?(u=a,o=void 0,t?(f=It.DummyCellIndex.tempItem(e,t,i),u=void 0===a||"number"==typeof a?e.getDisplayText(f)||"":a):(o=i.groupFooter.text)&&(u=o),n.addText(r,u,s)):n.addNumber(r,a,s)}var r,i=this._workbook.currentSheet,s=this._exportOptions,o=this._preparer,a=o.dataRowCount,f=o.colCount,l=this._groupFooterCellStyle,h=this._indentBarStyle,p=this._indents,d=t.level,v=this._currentRow;i.setFirstRow(this._currentRow);for(var m=this._startCol,g=e.rowGroup.expandedAdornments==c.RowGroupAdornments.SUMMARY,y=this._defaultHeight,b=e.layoutManager.getDataRowHeights(a),w=[],E=0;E<a;E++)w.push(i.borrowRow(v+E,(b[E]||y)*u.LINE_HEIGHT));this.indicator&&this._buildIndicatorCell(e,i,w,this._indicatorNo,v,m++,a),this.checkBar&&this._buildCheckBarCell(e,i,w,t.checked,v,m++,a);for(var S=o.getGroupFooterCells(),x=t.vindex*a,E=0;E<a;E++){var T=v+E,N=m,C=w[E];if(0<p)for(r=0;r<p;r++)!g||r<d-2?C.addBlank(N,h):C.addBlank(N,l),0==E&&1<a&&i.addMerge(T,N,a,1),N++;for(var k=0;k<f;k++){var L,A=k+N,O=S[x+E][k],M=O.layout,_=M.firstColumn;if(L=this._columnGroupFooterStyles[_.$_hash][t.footerIndex],s.applyDynamicStyles&&(U=It.DummyCellIndex.tempItem(e,t,M),j=(P=e.rowGroup.getFooterCell(U)).getSummary(),L=this.$_summaryStyleSet(P,j,L)),M.isProxy||O.spanned)C.addBlank(A,L);else{var D=M.parent,P=D&&D.vertical,H=0,B=0,j=M.getGroupFooterUserSpan(t.parent,t.footerIndex),F=j?0:M.getGroupFooterSpan(t.index,t.footerIndex)-1;if(j){O=j.footerCount||0,H=0<O?O*a:j.rowspan||1,B=j.colspan||1,H=Math.min((t.parent.footerCount-t.vindex)*a,H),i.addMerge(T,A,H,B);for(var I=0;I<H;I++)for(var q=0;q<B;q++)S[x+I+E][k+q].spanned=!0}else if(0<F){var R=0,U=M.vindex+1;if(P)for(;R++<F&&R<a;)H+=D.getVisible(U++)._dspan,S[x+R][k].spanned=!0;else for(;R++<F&&U<Math.min(f,D.visibleCount);)B+=D.getVisible(U++)._cspan,S[x+E][k+R].spanned=!0}n.call(this,C,A,_,L),j||i.addMerge(T,A,M._dspan+H,M._cspan+B)}this._rowGrouped&&s.showLevelOutline&&i.setRowLevel(T,t.level)}}this._currentRow+=a,i.setLastRow(this._currentRow-1)},u.prototype.buildMergedGroupHeader=function(e,t){var n=this._workbook.currentSheet,r=this._preparer,i=t.level,s=this._defaultHeight,o=r.colCount,a=this._currentRow;n.setFirstRow(this._currentRow);var f=this._startCol,l=n.borrowRow(a,s*u.LINE_HEIGHT);this.indicator&&this._buildIndicatorCell(e,n,l,this._indicatorNo,a,f++,1),this.checkBar&&this._buildCheckBarCell(e,n,l,t.checked,a,f++,1);for(var c=0;c<i-1;c++){var h=r.getItem(0,f+c).layout.firstColumn;l.addBlank(f+c,this._columnStyles[h.$_hash])}var p=i-1,d=r.getItem(0,p).layout,s=d.firstColumn;this._buildValueCell(e,n,l,t.firstItem,d,f+p),this._mergeHeads[s.$_hash]=a;var t=e.rowGroup.getHeaderText(t),c=f+i,v=this._groupHeaderStyle;for(i<r.colCount&&l.addText(c++,t,v);c<o+f;c++)l.addBlank(c,v);1<o-i&&n.addMerge(a,i+f,1,o-i),this._currentRow++,n.setLastRow(this._currentRow-1)},u.prototype.buildMergedGroupFooter=function(e,t){function n(n,r,i,s){var o=Yn.RowGroupFooterCell.getValue(t,i),u=this._exportOptions;o instanceof Date?!u.datetimeCallback||(o=u.datetimeCallback(t.index,i.name,o))instanceof Date?n.addDate(r,o,s):n.addText(r,o,s):isNaN(o)?(i=It.DummyCellIndex.tempItem(e,t,i),i=e.getDisplayText(i)||"",n.addText(r,i,s)):n.addNumber(r,o,s)}var r=this._workbook.currentSheet,i=this._exportOptions,s=this._preparer,o=s.dataRowCount,a=s.colCount,f=t.level-1,l=this._currentRow;r.setFirstRow(this._currentRow);for(var h=this._startCol,p=e.rowGroup.expandedAdornments==c.RowGroupAdornments.SUMMARY,d=this._defaultHeight,v=e.layoutManager.getDataRowHeights(o),m=[],g=e.layoutManager,y=0;y<o;y++){var b=r.borrowRow(l+y,(v[y]||d)*u.LINE_HEIGHT);b._row=y,m.push(b)}for(this.indicator&&this._buildIndicatorCell(e,r,m,this._indicatorNo,l,h++,o),this.checkBar&&this._buildCheckBarCell(e,r,m,t.checked,l,h++,o),A=0;A<f;A++){for(var w=(O=s.getItem(0,A).layout).firstColumn,E=this._columnStyles[w.$_hash],S=t.parent;S&&w.groupLevel!==S.level;)S=S.parent;if(this.allItems||t.parent.expanded){for(var x,T,N,y=0;y<o;y++)p&&0===y&&S&&S.getFooter(0)===t?this._buildValueCell(e,r,m[y],t.parent.firstItem,O,h+A):m[y].addBlank(h+A,E);this._columnMerged&&(p?!this._mergeHeads[w.$_hash]||w.groupLevel===f&&S&&S.getFooter(0)===t?this._mergeHeads[w.$_hash]=l:w.groupLevel:t.visible?(x=It.DummyCellIndex.tempItem(e,t,O),(T=g.getMergeRoom(x))&&T.isTail(x)&&(N=this._mergeHeads[w.$_hash],r.addMerge(N,A+h,l+o-N,O._defColSpan))):S&&S.last===t&&(N=this._mergeHeads[w.$_hash],r.addMerge(N,A+h,l+o-N,O._defColSpan)))}else for(y=0;y<o;y++)this._buildValueCell(e,r,m[y],t.parent.firstItem,O,h+A)}for(var C=s.getGroupFooterCells(),k=t.vindex*o,y=0;y<o;y++)for(var L=l+y,A=f;A<a;A++){var O,M=A+h,_=C[k+y][A];if(w=(O=_.layout).firstColumn,O.isProxy||_.spanned)E=this._columnStyles[w.$_hash],m[y].addBlank(M,E);else{var D=O.parent,P=D&&D.vertical,H=0,B=0,_=O.getGroupFooterUserSpan(t.parent,t.footerIndex),j=_?0:O.getGroupFooterSpan(t.index,t.footerIndex)-1;if(_){var F=_.footerCount||0,H=0<F?F*o:_.rowspan||1,B=_.colspan||1;H=Math.min((t.parent.footerCount-t.vindex)*o,H),r.addMerge(L,M,H,B);for(var I=0;I<H;I++)for(var q=0;q<B;q++)C[k+I+y][q+A].spanned=!0}else if(0<j){var R=0,U=O.vindex+1;if(P)for(;R++<j&&R<o;)H+=D.getVisible(U++)._dspan,C[k+R][A].spanned=!0;else for(;R++<j&&U<Math.min(a-1,D.visibleCount);)B+=D.getVisible(U++)._cspan,C[k+y][A+R].spanned=!0}E=this._columnGroupFooterStyles[w.$_hash][t.footerIndex],i.applyDynamicStyles&&(U=It.DummyCellIndex.tempItem(e,t,O),P=(F=e.rowGroup.getFooterCell(U)).getSummary(),E=this.$_summaryStyleSet(F,P,E)),n.call(this,m[y],M,w,E),_||r.addMerge(L,M,O._dspan+H,O._cspan+B)}this._rowGrouped&&i.showLevelOutline&&r.setRowLevel(L,f)}this._currentRow+=o,r.setLastRow(this._currentRow-1)},u.prototype.buildTreeSheet=function(e,t){var n=this._exportOptions,r=this._workbook;n.allItems&&(this.allItems=e.getAllItems());var i=this.allItems,s=i?i.length:e.itemCount,o=r.createSheet(this._sheetName,n.sheetAttrs),i=e.displayOptions;this._defaultHeight=i.rowHeight||i.minRowHeight,this._rowLevels=e.getLevels(!1),this._startItem=this._indexItem=0,this._rowGrouped||(this._startItem=0<n.start?n.start:0,s=!(0<(i=0<n.count?n.count:s))||this._startItem+i>s?s-this._startItem:i),this._lastItem=this._startItem+s,this._prepareCommonStyles(e),this._currentRow=n.yOffset,this._startCol=n.xOffset,this._buildColumns(e),o.createBorderEdges(ar.CssFactory.getSelectorStyle(this._preparer.documentCssStyles,".rg-grid")),this._buildDocumentTitle(r),this.header&&this.buildHeader(e),this.headerSummary&&this.buildSummaryItem(e,!1),this.buildTreeItems(e,function(){this.footer&&this.buildSummaryItem(e,!0),this._buildDocumentTail(r),t&&t()}.bind(this))},u.prototype.buildTreeItems=function(e,t){for(var n=this._exportOptions.showIndicatorRow(e),r=this.allItems,i=this._progressStep?this._indexItem+Math.min(this._progressStep,this._lastItem-this._indexItem):this._lastItem,s=this._indexItem;s<i;s++){var o=r?r[s]:e.getItem(s);if(this._indicatorNo=o instanceof dt.GridRow&&n?o.dataRow:s+1,!(o instanceof Ot.TreeItem))throw"Unkown tree item type";this.buildTreeRow(e,o),this._progressPos+=1,this._preparer.clearDataSpanned()}this.setProgress&&this.setProgress(e.handler,"process",this._progressMax,this._progressPos),this._indexItem=i,this._indexItem>=this._lastItem?t&&t():setTimeout(function(){this.buildTreeItems(e,t)}.bind(this),0)},u.prototype.buildTreeRow=function(e,t){var n=this._workbook.currentSheet,r=this._preparer,i=r.dataRowCount,s=r.colCount,o=this._indents,a=t.level,f=this._currentRow;n.setFirstRow(this._currentRow);for(var l=this._startCol,c=e.displayOptions,h=e.layoutManager.getDataRowHeights(i),p=t.height,p=-1===(p=isNaN(p)?(c.rowHeight||c.minRowHeight)*i:p)?-1:0<p?p/i:p,d=[],v=0;v<i;v++)d.push(n.borrowRow(f+v,(h[v]||p)*u.LINE_HEIGHT));this.indicator&&this._buildIndicatorCell(e,n,d,this._indicatorNo,f,l++,i),this.checkBar&&this._buildCheckBarCell(e,n,d,t.checked,f,l++,i);for(var m=this._bodyCellStyle,v=0;v<i;v++){for(var g=d[v],y=f+(g._row=v),b=0<o?l+a-1:l,w=(N=(T=r.getItem(v,0)).layout).firstColumn,E=this._columnStyles[w.$_hash],S=0<o?o-a+1:0,x=0;x<a-1;x++)g.addBlank(x+l,m);for(N.isProxy||T.spanned?g.addBlank(b,E):(this._buildValueCell(e,n,g,t,N,b,b),n.addMerge(y,b,N._dspan,N._defColSpan+S)),x=0;x<S;x++)g.addBlank(1+x+b,E);for(b=0<o?l+o:l,x=1;x<s;x++){var T,N,C=x+b,w=(N=(T=r.getItem(v,x)).layout).firstColumn,E=this._columnStyles[w.$_hash];if(N.isProxy||T.spanned)g.addBlank(C,E);else{var k=N.parent,L=k&&k.vertical,A=N.spanCallback,O=A?A(e.handler,N,t.index)-1:void 0,M=0;if(0<(O=void 0===O?N.getDataSpan()-1:O)){var _=0,D=N.vindex+1;if(L)for(;_++<O&&_<i;)M+=k.getVisible(D++)._dspan,r.getItem(v+_,x).spanned=!0;else for(;_++<O&&x+_<s&&D<k.visibleCount;)M+=k.getVisible(D++)._cspan,r.getItem(v,x+_).spanned=!0}this._buildValueCell(e,n,g,t,N,C,b),L?n.addMerge(y,C,N._dspan+M,N._cspan):n.addMerge(y,C,N._dspan,N._cspan+M)}}this._exportOptions.showLevelOutline&&n.setRowLevel(f,t.level)}this._currentRow+=i,n.setLastRow(this._currentRow-1)},u.prototype.prepare=function(){},u.prototype.finallize=function(){},u.prototype.save=function(){function r(n){var r;t.navigator.msSaveOrOpenBlob?t.navigator.msSaveOrOpenBlob(n,s):t.navigator.msSaveBlob?t.navigator.msSaveBlob(n,s):(r=e.createElement("a"),e.body.appendChild(r),n=URL.createObjectURL(n),r.href=n,r.download=s,r.click(),e.body.removeChild(r))}function i(t){var r='<form name="tempForm" action="'+n.url+'" method="post">';if(r+='<input type="hidden" name="fileName" value = "'+s+'"/>',r+='<input type="hidden" name="data" value = "'+t+'"/>',o)for(var i in o)r+='<input type="hidden" name="'+i+'" value = "'+o[i]+'"/>';r+='<input id="submitBtn" type="submit"/>',r+="</form>",t=e.createElement("div"),t.innerHTML=r,e.body.appendChild(t),e.getElementById("submitBtn").click(),e.body.removeChild(t)}var e=this.grid.doc,t=p.getDocWin(e),n=this._multiOptions,s=n.fileName,o=n.params,u="local"==n.target;if(JSZip.support.blob||!u){var a,f=new JSZip,l=this._workbook.createParts();for(a in l){var c=l[a];0<=c.indexOf('xmlns=""')&&(c=c.replace(/ xmlns=""/g,"").replace(/xmlns=""/g,"")),f.file(a,c)}u?f.generateAsync?f.generateAsync({type:"blob",compression:"DEFLATE",streamFiles:!0},function(e){n.progressCallback&&n.progressCallback(null,"zip",100,e.percent)}).then(function(e){n.done&&"function"==typeof n.done&&n.done(),r(e)}):(n.done&&"function"==typeof n.done&&n.done(),r(f.generate({type:"blob",compression:"DEFLATE"}))):n.target===sr.ExportTarget.STREAM?f.generateAsync?f.generateAsync({type:"base64",compression:"DEFLATE",streamFiles:!0},function(e){n.progressCallback&&n.progressCallback(null,"zip",100,e.percent)}).then(function(e){n.done&&"function"==typeof n.done&&n.done(e)}):(u=f.generate({type:"base64",compression:"DEFLATE"}),n.done&&"function"==typeof n.done&&n.done(u)):f.generateAsync?f.generateAsync({type:"base64",compression:"DEFLATE",streamFiles:!0},function(e){n.progressCallback&&n.progressCallback(null,"zip",100,e.percent)}).then(function(e){n.done&&"function"==typeof n.done&&n.done(),i(e)}):(n.done&&"function"==typeof n.done&&n.done(),i(f.generate({type:"base64",compression:"DEFLATE"})))}else alert("not supported on this browser")},u.prototype._prepareCount=function(e,t){for(var n=0,r=0,i=t.length;r<i;r++){var s=void 0,o=t[r].grid;if(o instanceof gr.GridView)if(e.allItems&&this._rowGrouped){var s=o.itemSource.getAllItems(),u=o.layoutManager.fixedItemCount;if(0<u)for(var a=0;a<u;a++)s.splice(a,0,o.getItem(a))}else e.pagingAllItems&&o.paged?s=o.itemSource.getPagingAllItems():e.onlyCheckedItems&&!o.rowGrouped&&(s=o.getCheckedItems(!1));else o instanceof kr.TreeView&&e.allItems&&(s=o.getAllItems());n+=s?s.length:o.itemCount}return n},u.prototype._inheritStyles=function(e){for(var t={length:0},n=0,r=e.length;n<r;n++)e[n]&&ar.CssFactory.extendCssStyle(e[n],t);return t},u.prototype._prepareCommonStyles=function(e){var t=this._preparer.documentCssStyles,n=ar.CssFactory.getSelectorStyle(t,"table"),r=ar.CssFactory.getSelectorStyle(t,"tr"),i=ar.CssFactory.getSelectorStyle(t,"td"),s=this._inheritStyles([n,r,i]),o=this._inheritStyles([ar.CssFactory.getSelectorStyle(t,".rg-root"),ar.CssFactory.getSelectorStyle(t,"html")]),u=ar.CssFactory.getSelectorStyle(t,".rg-header"
),a=ar.CssFactory.getSelectorStyle(t,".rg-footer"),f=ar.CssFactory.getSelectorStyle(t,".rg-header-summary"),l=ar.CssFactory.getSelectorStyle(t,".rg-body"),c=ar.CssFactory.getSelectorStyle(t,".rg-fixed-body"),h=this._inheritStyles([ar.CssFactory.getSelectorStyle(t,".rg-root table"),ar.CssFactory.getSelectorStyle(t,".rg-root .rg-table"),ar.CssFactory.getSelectorStyle(t,".rg-root table tr"),ar.CssFactory.getSelectorStyle(t,".rg-root .rg-table tr"),ar.CssFactory.getSelectorStyle(t,".rg-root table tr td"),ar.CssFactory.getSelectorStyle(t,".rg-root .rg-table tr td"),ar.CssFactory.getSelectorStyle(t,".rg-root .rg-table td")]),p=this._inheritStyles([h,ar.CssFactory.getSelectorStyle(t,".rg-header table"),ar.CssFactory.getSelectorStyle(t,".rg-header .rg-table"),ar.CssFactory.getSelectorStyle(t,".rg-header table tr"),ar.CssFactory.getSelectorStyle(t,".rg-header .rg-table tr"),ar.CssFactory.getSelectorStyle(t,".rg-header table tr td"),ar.CssFactory.getSelectorStyle(t,".rg-header .rg-table tr td")]),d=this._inheritStyles([h,ar.CssFactory.getSelectorStyle(t,".rg-footer table"),ar.CssFactory.getSelectorStyle(t,".rg-footer .rg-table"),ar.CssFactory.getSelectorStyle(t,".rg-footer table tr"),ar.CssFactory.getSelectorStyle(t,".rg-footer .rg-table tr"),ar.CssFactory.getSelectorStyle(t,".rg-footer table tr td"),ar.CssFactory.getSelectorStyle(t,".rg-footer .rg-table tr td")]),v=this._inheritStyles([h,ar.CssFactory.getSelectorStyle(t,".rg-header-summary table"),ar.CssFactory.getSelectorStyle(t,".rg-header-summary .rg-table"),ar.CssFactory.getSelectorStyle(t,".rg-header-summary table tr"),ar.CssFactory.getSelectorStyle(t,".rg-header-summary .rg-table tr"),ar.CssFactory.getSelectorStyle(t,".rg-header-summary table tr td"),ar.CssFactory.getSelectorStyle(t,".rg-header-summary .rg-table tr td")]),m=this._inheritStyles([h,ar.CssFactory.getSelectorStyle(t,".rg-body table"),ar.CssFactory.getSelectorStyle(t,".rg-body .rg-table"),ar.CssFactory.getSelectorStyle(t,".rg-body table tr"),ar.CssFactory.getSelectorStyle(t,".rg-body .rg-table tr"),ar.CssFactory.getSelectorStyle(t,".rg-body table tr td"),ar.CssFactory.getSelectorStyle(t,".rg-body .rg-table tr td")]),g=this._inheritStyles([h,ar.CssFactory.getSelectorStyle(t,".rg-fixed-body .rg-table"),ar.CssFactory.getSelectorStyle(t,".rg-fixed-body .rg-table tr"),ar.CssFactory.getSelectorStyle(t,".rg-fixed-body table tr"),ar.CssFactory.getSelectorStyle(t,".rg-fixed-body .rg-table tr td"),ar.CssFactory.getSelectorStyle(t,".rg-fixed-body table tr td"),ar.CssFactory.getSelectorStyle(t,".rg-fixed-body .rg-data-row")]),y=this._inheritStyles([h,ar.CssFactory.getSelectorStyle(t,".rg-rowgroup-bar .rg-table"),ar.CssFactory.getSelectorStyle(t,".rg-rowgroup-bar .rg-table tr"),ar.CssFactory.getSelectorStyle(t,".rg-rowgroup-bar table tr"),ar.CssFactory.getSelectorStyle(t,".rg-rowgroup-bar .rg-table tr td"),ar.CssFactory.getSelectorStyle(t,".rg-rowgroup-bar table tr td")]),b=this._inheritStyles([h,ar.CssFactory.getSelectorStyle(t,".rg-rowgroup-head .rg-table"),ar.CssFactory.getSelectorStyle(t,".rg-rowgroup-head .rg-table tr"),ar.CssFactory.getSelectorStyle(t,".rg-rowgroup-head table tr"),ar.CssFactory.getSelectorStyle(t,".rg-rowgroup-head .rg-table tr td"),ar.CssFactory.getSelectorStyle(t,".rg-rowgroup-head table tr td")]),w=this._inheritStyles([h,ar.CssFactory.getSelectorStyle(t,".rg-rowgroup-foot .rg-table"),ar.CssFactory.getSelectorStyle(t,".rg-rowgroup-foot .rg-table tr"),ar.CssFactory.getSelectorStyle(t,".rg-rowgroup-foot table tr"),ar.CssFactory.getSelectorStyle(t,".rg-rowgroup-foot .rg-table tr td"),ar.CssFactory.getSelectorStyle(t,".rg-rowgroup-foot table tr td")]),E=this._inheritStyles([h,m]),S=ar.CssFactory.getSelectorStyle(t,".rg-header-cell"),x=ar.CssFactory.getSelectorStyle(t,".rg-footer-cell"),T=ar.CssFactory.getSelectorStyle(t,".rg-header-summary-cell"),N=ar.CssFactory.getSelectorStyle(t,".rg-data-cell"),C=ar.CssFactory.getSelectorStyle(t,".rg-rowgroup-header"),k=ar.CssFactory.getSelectorStyle(t,".rg-rowgroup-footer"),L=ar.CssFactory.getSelectorStyle(t,".rg-rowgroup-footer-cell"),A=this._inheritStyles([o,ar.CssFactory.getSelectorStyle(t,".rg-rowgroup-head"),s,b]),O=this._inheritStyles([o,ar.CssFactory.getSelectorStyle(t,".rg-rowgroup-foot"),s,w]),M=this._inheritStyles([o,ar.CssFactory.getSelectorStyle(t,".rg-rowgroup-bar"),s,ar.CssFactory.getSelectorStyle(t,".rg-rowgroup-bar-cell"),y]),r=ar.CssFactory.getSelectorStyle(t,".rg-data-row"),i=ar.CssFactory.getSelectorStyle(t,".rg-fixed-row"),b=this._inheritStyles([o,ar.CssFactory.getSelectorStyle(t,".rg-rowbarcontainer"),s,h,ar.CssFactory.getSelectorStyle(t,".rg-rowbarcontainer .rg-table tr"),ar.CssFactory.getSelectorStyle(t,".rg-rowbarcontainer table tr"),ar.CssFactory.getSelectorStyle(t,".rg-rowbarcontainer .rg-table tr td"),ar.CssFactory.getSelectorStyle(t,".rg-rowbarcontainer table tr td"),ar.CssFactory.getSelectorStyle(t,".rg-rowbarcontainer .rg-table tr td.rg-rowindicator-cell")]),w=this._inheritStyles([o,ar.CssFactory.getSelectorStyle(t,".rg-foot"),s,h,ar.CssFactory.getSelectorStyle(t,".rg-foot .rg-table tr td"),ar.CssFactory.getSelectorStyle(t,".rg-rowindicator-foot")]),y=this._inheritStyles([o,ar.CssFactory.getSelectorStyle(t,".rg-sum"),s,h,ar.CssFactory.getSelectorStyle(t,".rg-sum .rg-table tr td"),ar.CssFactory.getSelectorStyle(t,".rg-rowindicator-sum")]);this._indicatorCellStyle=this._parseStyles(this._workbook,b),this._indicatorFootStyle=this._parseStyles(this._workbook,w),this._indicatorSumStyle=this._parseStyles(this._workbook,y),w=this._inheritStyles([o,ar.CssFactory.getSelectorStyle(t,".rg-rowbarcontainer"),s,h,ar.CssFactory.getSelectorStyle(t,".rg-rowbarcontainer .rg-table tr"),ar.CssFactory.getSelectorStyle(t,".rg-rowbarcontainer table tr"),ar.CssFactory.getSelectorStyle(t,".rg-rowbarcontainer .rg-table tr td"),ar.CssFactory.getSelectorStyle(t,".rg-rowbarcontainer table tr td.rg-checkbar-cell")]),y=this._inheritStyles([o,ar.CssFactory.getSelectorStyle(t,".rg-foot"),s,h,ar.CssFactory.getSelectorStyle(t,".rg-foot .rg-table tr td"),ar.CssFactory.getSelectorStyle(t,".rg-checkbar-foot")]),h=this._inheritStyles([o,ar.CssFactory.getSelectorStyle(t,".rg-sum"),s,h,ar.CssFactory.getSelectorStyle(t,".rg-sum .rg-table tr td"),ar.CssFactory.getSelectorStyle(t,".rg-checkbar-sum")]),this._checkBarCellStyle=this._parseStyles(this._workbook,w),this._checkBarFootStyle=this._parseStyles(this._workbook,y),this._checkBarSumStyle=this._parseStyles(this._workbook,h),H=(D=e.header.exportStyleName||e.header.styleName)?ar.CssFactory.getSelectorStyle(t,"."+D):null,H=this._headerCssStyle=this._inheritStyles([o,u,H,s,S,p]),this._headerCellStyle=this._parseStyles(this._workbook,H,!0),this._footerCellStyles=[];for(var _=0;_<e.footers.visibleCount;_++)H=(D=e.footers.getVisible(_).styleName)?ar.CssFactory.getSelectorStyle(t,"."+D):null,H=this._inheritStyles([o,a,H,s,x,d]),this._footerCellStyles.push(this._parseStyles(this._workbook,H,!0));this._summaryCellStyles=[];for(_=0;_<e.headerSummaries.visibleCount;_++)H=(D=e.headerSummaries.getVisible(_).styleName)?ar.CssFactory.getSelectorStyle(t,"."+D):null,H=this._inheritStyles([o,f,H,s,T,v]),this._summaryCellStyles.push(this._parseStyles(this._workbook,H,!0));if(this._groupFooterCellStyles=[],e instanceof gr.GridView)for(_=0;_<e.rowGroup.footers.count;_++){var D,P=e.rowGroup.footers.get(_),H=(D=P.exportStyleName||P.styleName)?ar.CssFactory.getSelectorStyle(t,"."+D):null;H=this._inheritStyles([o,k,H,s,L,E]),this._groupFooterCellStyles.push(this._parseStyles(this._workbook,H,!0))}H=this._cellCssStyle=this._inheritStyles([o,l,n,m,r,N]),this._bodyCellStyle=this._parseStyles(this._workbook,H,!1),H=this._inheritStyles([o,l,n,i,m,N]),this._bodyFixedCellStyle=this._parseStyles(this._workbook,H,!1),H=this._fixedCellCssStyle=this._inheritStyles([o,c,n,r,g,N]),this._fixedCellStyle=this._parseStyles(this._workbook,H,!1),this._groupHeaderStyle=this._parseStyles(this._workbook,this._inheritStyles([o,C])),this._groupFooterCellStyle=this._parseStyles(this._workbook,this._inheritStyles([o,n,k,L,m])),this._indentHeadStyle=this._parseStyles(this._workbook,A),this._indentFootStyle=this._parseStyles(this._workbook,O),this._indentBarStyle=this._parseStyles(this._workbook,M),this._dynamicStyles={}},u.prototype._exportGridAsync=function(e,t,n,r){var i;void 0===r&&(r=null),n<t.exportGrids.length&&(i=t.exportGrids[n],setTimeout(function(){this._exportGrid(e,i.options,function(){r()}.bind(this))}.bind(this)))},u.prototype._exportGrid=function(e,t,n){var r=t.grid;this._preparer=new ar.ExportPreparer(r,t),this._exportOptions=t,this.indicator=t.indicatorVisible(r)?r.rowIndicator:null,this.checkBar=t.checkBarVisible(r)?r.checkBar:null,this.header=t.headerVisible(r)?r.header:null,this.headerSummary=t.headerSummaryVisible(r)?r.headerSummary:null,this.footer=t.footerVisible(r)?r.footer:null,this.indicatorHead=this.indicator&&this.indicator.headText||"No",this.indicatorFoot=this.indicator&&this.indicator.footText||"",this.indicatorSummary=this.indicator&&this.indicator.sumText||"",this.checkBarHead=this.checkBar&&this.checkBar.headText||"",this.checkBarFoot=this.checkBar&&this.checkBar.footText||"",this.checkBarSummary=this.checkBar&&this.checkBar.sumText||"",this._sheetName=t.sheetName,this._workbook=e,this.buildBook(function(){this._preparer&&this._preparer.dispose(),n&&n()}.bind(this))},u.prototype._changeFormatId=function(e,t,n){return e.changeFormatId(t,n)},u.prototype._parseStyles=function(e,t,n){return e.addStyle(t,!0,!0,!0,n)},u.prototype._extendStyles=function(e,t,n,r,i){return e.extendStyle(t,n,r=void 0===r?!0:r,i)},u.prototype.$_summaryStyleSet=function(e,t,n){var r=this._exportOptions,i=this._workbook,s=void 0;if(t){var o=t.exportStyleName||t.styleName,u=void 0;r.applyDynamicStyles&&(e instanceof zt.GridSummaryObject?(a=new jt.ColumnSummaryStyle,o=(u=e.getCellStyle(e.getCell(t.column.layout),a,!1)).exportStyleName||u.styleName||o):e instanceof Yn.RowGroupFooterCell&&(a=new jt.ColumnStyle,o=(u=this.grid.rowGroup.getFooterCellStyle(e,a,!1)).exportStyleName||u.styleName||o));var e=void 0,a=void 0;if((e=(e=u&&u.numberFormat||t.numberFormat)||(e=u&&u.datetimeFormat||t.datetimeFormat)?ar.ExcelFormatConverter.convertNumberFormat(e):e)&&((a=t.prefix)&&(e='"'+a+'"'+e),(a=t.suffix)&&(e=e+'"'+a+'"'),s=i.addNumberFormat(e)),o||void 0!==s){for(var f=this._preparer.documentCssStyles,l=o?o.trim().split(" "):[],c=[],h=0,p=l.length;h<p;h++)c.push(ar.CssFactory.getSelectorStyle(f,"."+l[h]));return t.$_owner.type?(t=t.$_owner.type+"=styleName="+o+"formatId="+s,o=this._dynamicStyles,o[t]||(o[t]=this._extendStyles(i,n,this._inheritStyles(c),!0,s)),o[t]):this._extendStyles(i,n,this._inheritStyles(c),!0,s)}}return n},u.prototype._buildColumns=function(e){for(var t,n,r,i=this._exportOptions,s=this._workbook,o=s.currentSheet,a=this._preparer,f=0;f<this._startCol;f++)o.addColumn(i.xOffsetWidth/u.PIXELS_PER_CHAR,null);if(this.indicator&&(r=Math.round(e.rowIndicator.minWidth/u.PIXELS_PER_CHAR),o.addColumn(r,null)),this.checkBar&&(r=Math.round(e.checkBar.width/u.PIXELS_PER_CHAR),o.addColumn(r,null)),i.indenting&&(e instanceof gr.GridView&&this._rowGrouped&&!this._mergedGrouped?this._indents=this._rowLevels-(e.rowGroup.expandedAdornments===c.RowGroupAdornments.SUMMARY?0:1):e instanceof kr.TreeView&&(this._indents=this._rowLevels-1),0<this._indents))for(v=0;v<this._indents;v++)r=Math.max(this._indentWidth,1),o.addColumn(r,null);var l=e.formatOptions;this._columnStyles={},this._columnFixedStyles={},this._columnFooterStyles={},this._columnSummaryStyles={},this._columnGroupFooterStyles={};for(var h=a.colCount,p=a.dataRowCount,d=!1,v=0;v<p;v++)for(t=0;t<h;t++){var m=a.getItem(v,t).layout,g=m.firstColumn;if(0===v&&(r=Math.round(m._cellWidth/u.PIXELS_PER_CHAR),o.addColumn(r,null,0<=i.hiddenColumns.indexOf(g.name))),n=g.$_hash,!this._columnStyles[n]){var y=e.dataSource;if(g instanceof jt.DataColumn){var b=i.exportLink&&g.renderer&&g.renderer.type==Ct.LinkCellRenderer.TYPE&&!g.excelFormat,w=y.getField(g.dataIndex),E=this._textFormatId,S=w?w.dataType:c.ValueType.TEXT;S===c.ValueType.NUMBER?E=this._numberFormatId:S===c.ValueType.DATETIME&&(E=this._dateFormatId),y=g.excelFormat,w=void 0,null!=y?E="number"==typeof y||0<parseInt(y)?parseInt(y):s.addNumberFormat(y):b?E=0:(S==c.ValueType.NUMBER?"string"==typeof (y=null===g.numberFormat?void 0:g.numberFormat||i.numberFormat||l.numberFormat)&&(y=ar.ExcelFormatConverter.convertNumberFormat(y)):S==c.ValueType.DATETIME&&"string"==typeof (y=g.datetimeFormat||i.datetimeFormat||l.datetimeFormat)&&(y=ar.ExcelFormatConverter.convertDateFormat(y)),y&&((w=g.prefix)&&(y='"'+w+'"'+y),(w=g.suffix)&&(y=y+'"'+w+'"'),E=s.addNumberFormat(y))),this._columnStyles[n]=this._changeFormatId(s,m.isFixed?this._fixedCellStyle:this._bodyCellStyle,E),this._columnFixedStyles[n]=this._changeFormatId(s,this._bodyFixedCellStyle,E),this._columnFooterStyles[n]=[],this._columnSummaryStyles[n]=[],this._columnGroupFooterStyles[n]=[];for(var x=0;x<e.footers.visibleCount;x++){var T=e.footers.getVisible(x),N=g.footers.get(T._childIndex);this._columnFooterStyles[n][x]=this.$_summaryStyleSet(T,N,this._footerCellStyles[x])}for(var C=0;C<e.headerSummaries.visibleCount;C++){var k=e.headerSummaries.getVisible(C),L=g.headerSummaries.get(k._childIndex);this._columnSummaryStyles[n][C]=this.$_summaryStyleSet(k,L,this._summaryCellStyles[C])}if(e instanceof gr.GridView)for(var A=0;A<e.rowGroup.footers.count;A++){var O=e.rowGroup.footers.get(A),O=g.groupFooters.get(O.index);this._columnGroupFooterStyles[n][A]=this.$_summaryStyleSet(null,O,this._groupFooterCellStyles[A])}}e instanceof gr.GridView&&(i.separateRows||i.onlyCheckedItems&&!e.rowGrouped||g instanceof jt.DataColumn&&(g.mergeRule||e.rowGroup.mergeMode&&e.isGroupedColumn(g))&&(d=!0))}}this._columnMerged=d},u.prototype._buildTitleCommon=function(e,t,n){if(t&&t.visible){for(var r=this._currentRow,i=this._startCol,s=void 0,o=e.currentSheet,u=void 0,u=0;u<t.spaceTop;u++)for(s=o.addRow(r+u,void 0),0;u<n;u++)s.addBlank(i+u,void 0);r+=t.spaceTop;var a,f,l=t.message,c=void 0,c=t.styleName?(a=this._preparer.documentCssStyles,f=[],t.styleName.split(" ").forEach(function(e){f.push(ar.CssFactory.getSelectorStyle(a,"."+e))}),this._parseStyles(e,this._inheritStyles(f),!0)):this._parseStyles(e,t.cssStyle,!0),s=o.addRow(r,t.height);for(u=0;u<n;u++)0==u?(s.addText(i,l,c),o.addMerge(r,i,1,n)):s.addBlank(i+u,c);for(r++,u=0;u<t.spaceBottom;u++)for(s=o.addRow(r+u,void 0),0;u<n;u++)s.addBlank(i+u,void 0);r+=t.spaceBottom,this._currentRow=r}},u.prototype._buildDocumentTitle=function(e){var t=this._exportOptions,n=e,e=this._preparer.colCount;this.indicator&&e++,this.checkBar&&e++,this._buildTitleCommon(n,t.documentTitle,e),this._buildTitleCommon(n,t.documentSubtitle,e)},u.prototype._buildDocumentTail=function(e){var t=this._exportOptions,n=this._preparer.colCount;this.indicator&&n++,this.checkBar&&n++,this._buildTitleCommon(e,t.documentTail,n)},u.prototype._buildIndicatorCell=function(e,t,n,r,i,s,o){var u=this._indicatorCellStyle;if((Array.isArray(n)?n[0]:n).addNumber(s,r,u),1<o){for(var a=1;a<o;a++)n[a].addBlank(s,u);t.addMerge(i,s,o,1)}},u.prototype._buildCheckBarCell=function(e,t,n,r,i,s,o){var u=this._checkBarCellStyle,a=Array.isArray(n)?n[0]:n,f=this._exportOptions.checkMark;if(a.addText(s,r?f:"",u),1<o){for(var l=1;l<o;l++)n[l].addBlank(s,u);t.addMerge(i,s,o,1)}},u.prototype._buildValueCell=function(e,t,n,r,i,s,o){void 0===o&&(o=0);var u,a=this._workbook,f=0<=r.index&&r.index<e.fixedOptions.rowCount,l=e.body,h=this._exportOptions,p=It.DummyCellIndex.tempItem(e,r,i),d=i.firstColumn,v=l.getRowStyle(r,f,h.applyDynamicStyles),m=v.exportStyleName||v.styleName,g=d.exportStyleName||d.styleName;h.applyDynamicStyles&&(u=l.getIndexCellStyle(p,!1));var y,b=(!i.isFixed&&f?this._columnFixedStyles:this._columnStyles)[d.$_hash]||this._bodyCellStyle;if(h.applyFixed&&(!e.isTree()&&f&&t.setFixedInfo(n.index+1,void 0),i.$_fixed&&t.setFixedInfo(void 0,s+1)),d.blankWhenExport)n.addBlank(s,b);else if(d instanceof jt.DataColumn){var v=d.dataIndex,w=e.dataSource.getField(v),E=h.exportLink&&!d.excelFormat&&d.renderer&&d.renderer.type==Ct.LinkCellRenderer.TYPE,S=h.exportTemplate&&d.renderer&&d.renderer.type===kt.TemplateCellRenderer.TYPE,x=void 0;if(w){var T,N,C,k=r.getData(v),x=d.displayCallback;if(m&&!i.isFixed||g||u){var L,l=void 0,f=void 0,A=[i.isFixed?this._fixedCellCssStyle:this._cellCssStyle];u&&"object"==typeof u?(l="string"==typeof (l=(t=u).exportStyleName||u.styleName||g)?l:void 0,v=e.dataSource.getField(d.dataIndex),L=void 0,(f=u.excelFormat)||(v.dataType==c.ValueType.NUMBER?f=(L=t.numberFormat)?ar.ExcelFormatConverter.convertNumberFormat(L):void 0:v.dataType==c.ValueType.DATETIME&&(f=(L=t.datetimeFormat)?ar.ExcelFormatConverter.convertDateFormat(L):void 0),f&&((_=t.prefix)&&(f='"'+_+'"'+f),(_=t.suffix)&&(f=f+'"'+_+'"')))):l="string"==typeof u?u:void 0;var O,M=this._preparer.documentCssStyles,_=this._dynamicStyles;if(_[O=d.$_hash+"="+m+"="+g+"="+JSON.stringify(u)+"="+!0])b=_[O];else{var D=[];m&&!i.isFixed&&Array.prototype.push.apply(D,m.trim().split(" ")),g&&Array.prototype.push.apply(D,g.trim().split(" ")),l&&Array.prototype.push.apply(D,l.trim().split(" "));for(var P=0,H=D.length;P<H;P++)A.push(ar.CssFactory.getSelectorStyle(M,"."+D[P]));var B=void 0;f&&(B=a.addNumberFormat(f)),l=this._inheritStyles(A),E&&(l["font-decoration"]="underline",l.color="blue"),f=l.whiteSpace||l["white-space"],b=this._extendStyles(a,b,l,null!=f&&"none"!=f&&"nowrap"!=f,B),this._dynamicStyles[O]=b}}switch(w.dataType){case"number":(h.numberCallback||x)&&(k=h.numberCallback?h.numberCallback(r.index,d.name,k):x(e.handler,p.proxy(),k));var j,F=d.excelFormulaExprStatement,I=void 0;F&&((j=this._excelFormulaRuntime).setItemIndex(n.index,o),j.setColumns(this._preparer._dataCells[n._row]),I=F.evaluate(j)),null!=k||I?"number"==typeof k?n.addNumber(s,k,b,I):n.addText(s,k,b):n.addBlank(s,b);break;case"datetime":case"date":k?!h.datetimeCallback&&!x||(k=h.datetimeCallback?h.datetimeCallback(r.index,d.name,k):x(e.handler,p.proxy(),k))instanceof Date?n.addDate(s,k,b):n.addText(s,k,b):h.nullDateText?n.addText(s,h.nullDateText,b):n.addBlank(s,b);break;case"boolean":h.booleanCallback||x?(k=h.booleanCallback?h.booleanCallback(r.index,d.name,k):x(e.handler,p.proxy(),k),n.addText(s,k,b)):h.booleanFormatter?(k=h.booleanFormatter.formatValue(k),n.addText(s,k,b)):n.addBool(s,k,b);break;default:I=k||"",h.lookupDisplay&&(d.labelField||d.lookupDisplay)?I=Et.DataCell.getText(r,d):w.dataType===c.ValueType.OBJECT&&"object"==typeof k?(O=((T=d.objectKey||d.objectCallback)?d:w).objectKey,I=(T=(T?d:w).objectCallback)&&"function"==typeof T?T(w.orgFieldName,r.dataRow,k):O&&k.hasOwnProperty(O)?k[O]:JSON.stringify(k)):S?(this._templateRenderer?this._templateRenderer.clearAndAssignFrom(d.renderer):this._templateRenderer=e.delegate.createRenderer(kt.TemplateCellRenderer.TYPE,d.renderer,null),N=this._templateRenderer._parser,T=d.renderer.callback,C=e.body.getCell(p,!1),I=(N=T?T.call(this,e.handler,C,-1,-1):N.realize(e,C,null,this._templateRenderer.valueCallback))?N.replace(/<br[\s/]*>/gi,"\n").replace(/(<([^>]+)>)/gi,""):""):null!=k&&(I=d.textFormatter?d.textFormatter.getText(k):I),"number"==typeof (I=h.textCallback?h.textCallback(r.index,d.name,I):x&&!d.textFormatter?x(e.handler,p.proxy(),k):I)?n.addNumber(s,I,b):I&&E?(C=e.body.getCell(p,!1),e.getBodyCellAt(p),this._linkRenderer?this._linkRenderer.assignFrom(d.renderer):this._linkRenderer=e.delegate.createRenderer(Ct.LinkCellRenderer.TYPE,d.renderer,null),(N=this._linkRenderer)?(C=N.$_getUrl(e,C),n.addLink(s,I,C,b)):n.addText(s,I,b)):I?n.addText(s,I,b):n.addBlank(s,b)}}else n.addBlank(s,b)}else d instanceof jt.SeriesColumn&&((B=d.renderer)&&B.type&&B.type!=on.SeriesTextCellRenderer.TYPE?(y=this._preparer,h.exportSeriesColumn&&on.SparkChartRenderer.interfaced(B)&&y.sparkColumns[d.$_hash]?n.addSparkLine(s,o,y.sparkColumns[d.$_hash],b):n.addBlank(s,b)):(this._seriesCell.setIndex(p),(y=this._seriesCell.value)?(L=Et.SeriesCell.getText(y,","),n.addText(s,L,b)):n.addBlank(s,b)))},u.CSS_HEAD="rg-header",u.CSS_FOOT="rg-footer",u.CSS_BODY="rg-body",u.CSS_FIXED="rg-fixed-body",u.CSS_TABLE="rg-table",u.CSS_ROWGROUP_BAR="rg-rowgroup-bar",u.CSS_ROWGROUP_HEAD="rg-rowgroup-head",u.CSS_ROWGROUP_FOOT="rg-rowgroup-foot",u.CSS_HEAD_CELL="rg-header-cell",u.CSS_INDICATOR="rg-rowindicator-cell",u.CSS_CHECK="rg-checkbar-cell",u.CSS_DATA_ROW="rg-data-row",u.PIXELS_PER_CHAR=7,u.LINE_HEIGHT=.75,u);t.GridExcelExporter=o});t(Lr),Lr.ColumnExportStatementRuntime,Lr.GridExcelExporter;var Ar=n(function(e,t){function s(){}function u(e,t,n){this.onViewActivated=null,this.onCurrentChanging=null,this.onCurrentChanged=null,this.onCurrentRowChanged=null,this.onValidateColumn=null,this.onValidateRow=null,this.onValidationFail=null,this.onColumnCheckedChanged=null,this.onMenuItemClicked=null,this.onContextMenuPopup=null,this.onContextMenuItemClicked=null,this.onCellButtonClicked=null,this.onScrollToBottom=null,this.onTopIndexChanged=null,this.onRowsDeleting=null,this.onRowInserting=null,this.onSelectionChanged=null,this.onSelectionAdded=null,this.onSelectionEnded=null,this.onShowEditor=null,this.onHideEditor=null,this.onEditChange=null,this.onGetEditValue=null,this.onEditCommit=null,this.onEditCanceled=null,this.onItemEditCanceled=null,this.onItemEditCancel=null,this.onEditSearch=null,this.onSearchCellButtonClick=null,this.onCellEdited=null,this.onEditRowChanged=null,this.onEditRowPasted=null,this.onRowsPasted=null,this.onCellPasting=null,this.onItemChecked=null,this.onItemAllChecked=null,this.onErrorClicked=null,this.onSorting=null,this.onSortingChanged=null,this.onFiltering=null,this.onFilteringChanged=null,this.onKeyDown=null,this.onKeyPress=null,this.onKeyUp=null,this.onShowTooltip=null,this.onShowHeaderTooltip=null,this.onColumnPropertyChanged=null,this.onLayoutPropertyChanged=null,this.onGridActivated=null,this.onCopy=null,this.onPaste=null,this.onPasted=null,this.onItemsChecked=null,this.onCellClicked=null,this.onCellDblClicked=null,this.onCellItemClicked=null,this.onCommandStackChanged=null,this.onDataLoadComplated=null,this._view=this._createView(e,t,n),this._listener=this._createListener(this._view)}function h(e,t,n){return n=a.call(this,e,t,n)||this,n.onPageChanging=null,n.onPageChanged=null,n.onPageCountChanged=null,n.onGrouping=null,n.onGrouped=null,n.onExpanding=null,n.onExpanded=null,n.onCollapsing=null,n.onCollapsed=null,t&&(n.shadowDom=n._view._shadowDom),n}function v(){var e=null!==d&&d.apply(this,arguments)||this;return e.onTreeItemExpanding=null,e.onTreeItemExpanded=null,e.onTreeItemCollapsing=null,e.onTreeItemCollapsed=null,e.onTreeItemChanged=null,e}function g(e,t){var n=m.call(this)||this;return n._del=e,n._view=t,n._view.addListener(n),n}function E(e,t){return b.call(this,e,t)||this}function T(e,t){return S.call(this,e,t)||this}Object.defineProperty(t,"__esModule",{value:!0});var n=dt,r=jt,i=(s.getColumn=function(e,t){if(t){if("string"==typeof t)return e.columnByName(t);if(t instanceof jt.GridColumn)return t;if(t.$_hash)return e.columnByHash(t.$_hash);if(t.name)return e.columnByName(t.name)}return null},s.getItemProxy=function(e,t){var r=e.parent,r={type:void 0,id:e.id,parentId:null==r?-1:r.id,itemIndex:e.index,index:e.index,dataRow:-1,checked:e.checked};return t&&(r.childIndex=e.childIndex,r.level=e.level),e instanceof n.GridRow?(r.type="row",r.dataRow=e.dataRow):e instanceof dt.GroupItem?(r.count=e.children.length,r.expanded=e.expanded,e instanceof n.GroupItemImpl||e instanceof Ht.MergedGroupHeader?(r.type="group",r.footerId=e.footer?e.footer.id:-1,t&&(r.firstItem=s.getItemProxy(e.firstItem),r.firstDataItem=s.getItemProxy(e.firstDataItem),r.dataRows=e.getRows())):e instanceof Ot.TreeItem&&(r.type="tree",r.dataRow=e.dataRow||-1)):e instanceof n.GroupFooter&&(r.type="footer"),r},s.getItemIndices=function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n].index);return t},s.getValues=function(e,t){var n={},r=t.dataSource;if(e.isItemEditing(t))return(n=t.getRowObject()).__rowId=t.dataRow,n;if(0<=t.dataRow){if(t instanceof Ot.TreeItem){var e=t.row,i=e.values;n.__rowId=e.rowId;for(var s=0,o=r.fieldCount;s<o;s++)n[r.getOrgFieldName(s)]=i[s]}else(n=r.getRowObject(t.dataRow)).__rowId=t.dataRow;return n}return null},s.getDisplayValues=function(e,t){var n=e.getDataColumns();if(t){for(var r=t.getRowObject(),i=new jt.ColumnStyle,s=0,o=n.length;s<o;s++){var u=0<=t.index?It.CellIndex.temp(e,t.index,n[s]):It.DummyCellIndex.tempItem(e,t,n[s]),a=e.body.getCell(u,!1);a._index=u,i.clear(),i.assign(n[s]),e.body.getCellStyle(a,i),a=i.toFormatter(null),r[n[s].fieldName]=Et.DataCell._getDisplayText(e,t,n[s],r[n[s].fieldName],a)}return r}},s.setValues=function(e,t,n,r){var i,s,o=t.dataSource,u=o.fieldCount,a=!1;if(e.isItemEditing(t))if(t)t.values=n;else for(var f=0;f<u;f++){var l=o.getOrgFieldName(f);n.hasOwnProperty(l)&&t.setData(f,n[l])}else if(0<=(s=t.dataRow))if(o instanceof ft.LocalTreeDataProvider){e=o.rowById(s);if(e){if(a=!1,i=e.values||[],Array.isArray(n))for(var f=0,c=n.length;f<c&&!(a=!o.getField(f).equalValues(i[f],n[f]));f++);else for(f=0;f<u;f++){l=o.getOrgFieldName(f);if(n.hasOwnProperty(l)&&(a=!o.getField(f).equalValues(i[f],n[l])))break}a&&e.update(n,r)}}else if(o instanceof Y.LocalDataProvider){if(a=!1,i=o.getRow(s),Array.isArray(n))for(f=0,c=n.length;f<c&&!(a=!o.getField(f).equalValues(i[f],n[f]));f++);else for(f=0;f<u;f++){l=o.getOrgFieldName(f);if(n.hasOwnProperty(l)&&(a=!o.getField(f).equalValues(i[f],n[l])))break}a&&o.updateRow(s,n,r)}},s),o=(u.prototype.dispose=function(){this._view.dispose(),this._view=null,this._container&&this._container.dispose(),this._container=null},_dp(u,"summaryMode",{get:function(){return this._view.itemSource.summaryMode},set:function(e){this._view.itemSource.summaryMode=e}}),_dp(u,"hideDeletedRows",{get:function(){return this._view.itemSource.hideDeleted},set:function(e){this._view.itemSource.hideDeleted=e}}),_dp(u,"sortMode",{get:function(){return this._view.itemSource.sortMode},set:function(e){this._view.itemSource.sortMode=e}}),_dp(u,"undoable",{get:function(){return this._view.undoable},set:function(e){this._view.undoable=e}}),_dp(u,"undoing",{get:function(){return this._view.undoing}}),_dp(u,"redoing",{get:function(){return this._view.redoing}}),_dp(u,"disabled",{get:function(){return this._view.container.disabled},set:function(e){this._view.container.disabled=e}}),_dp(u,"scrollBarWidth",{get:function(){return this._view.scrollBarWidth},set:function(e){this._view.scrollBarWidth=e}}),_dp(u,"scrollBarHeight",{get:function(){return this._view.scrollBarHeight},set:function(e){this._view.scrollBarHeight=e}}),_dp(u,"fixedOptions",{get:function(){return this._view.fixedOptions}}),_dp(u,"displayOptions",{get:function(){return this._view.displayOptions}}),_dp(u,"formatOptions",{get:function(){return this._view.formatOptions}}),_dp(u,"editOptions",{get:function(){return this._view.editOptions}}),_dp(u,"editorOptions",{get:function(){return this._view.editorOptions}}),_dp(u,"copyOptions",{get:function(){return this._view.copyOptions}}),_dp(u,"pasteOptions",{get:function(){return this._view.pasteOptions}}),_dp(u,"sortingOptions",{get:function(){return this._view.sortingOptions}}),_dp(u,"filteringOptions",{get:function(){return this._view.filteringOptions}}),_dp(u,"mobileOptions",{get:function(){return this._view.mobileOptions}}),_dp(u,"dataDropOptions",{get:function(){return this._view.dataDropOptions}}),_dp(u,"formOptions",{get:function(){return this.formView.options}}),_dp(u,"rowIndicator",{get:function(){return this._view.rowIndicator}}),_dp(u,"stateBar",{get:function(){return this._view.stateBar}}),_dp(u,"checkBar",{get:function(){return this._view.checkBar}}),_dp(u,"header",{get:function(){return this._view.header}}),_dp(u,"footer",{get:function(){return this._view.footer}}),_dp(u,"footers",{get:function(){return this._view.footers}}),_dp(u,"headerSummary",{get:function(){return this._view.headerSummary}}),_dp(u,"headerSummaries",{get:function(){return this._view.headerSummaries}}),_dp(u,"formView",{get:function(){return this._view.container.formView}}),u.prototype.ping=function(e){this._view instanceof ir.GridBase&&alert(e)},u.prototype.refresh=function(e){this._view.refreshView(e)},u.prototype.beginUpdate=function(){this._view.beginUpdate()},u.prototype.endUpdate=function(e){this._view.endUpdate(e)},u.prototype.isVisible=function(){return this._view.visible},u.prototype.setVisible=function(e){this._view.visible=e},u.prototype.getItemCount=function(){return this._view.itemCount},u.prototype.getDataRow=function(e){return e=this._view.getItem(e),e?e.dataRow:-1},u.prototype.getRowsOfItems=function(e){var t=[];if(e)for(var n=0,r=e.length;n<r;n++){var i=this._view.getItem(e[n]);i&&t.push(i.dataRow)}return t},u.prototype.getItemIndex=function(e){return this._view.getItemIndexOfRow(e)},u.prototype.getItemsOfRows=function(e){return this._view.getItemIndicesOfRows(e)},u.prototype.removeColumn=function(e){return this._view.removeColumn(e)},u.prototype.restoreColumns=function(){this._view.restoreColumns()},u.prototype.getDataSource=function(){return this._dataDelegator},u.prototype.setDataSource=function(e){this._dataDelegator=e,this._dataProvider=e?e.getProvider():null,this._view.dataSource=this._dataProvider},u.prototype.getOptions=function(){return{summaryMode:this._view.itemSource.summaryMode.toString(),fixed:this.fixedOptions,display:this.displayOptions,format:this.formatOptions,edit:this.editOptions,editor:this.editorOptions,copy:this.copyOptions,paste:this.pasteOptions,sorting:this.sortingOptions,filtering:this.filteringOptions,dataDrop:this.dataDropOptions,rowIndicator:this.rowIndicator,checkBar:this.checkBar,stateBar:this.stateBar,header:this.header,footer:this.footer,footers:this.footers,headerSummary:this.headerSummary,headerSummaries:this.headerSummaries}},u.prototype.setOptions=function(e){e&&(this._view.setOptions(e),e.fixed&&this.setFixedOptions(e.fixed),e.display&&this.setDisplayOptions(e.display),e.format&&this.setFormatOptions(e.format),e.edit&&this.setEditOptions(e.edit),e.editor&&this.setEditorOptions(e.editor),e.copy&&this.setCopyOptions(e.copy),e.paste&&this.setPasteOptions(e.paste),e.sorting&&this.setSortingOptions(e.sorting),e.filtering&&this.setFilteringOptions(e.filtering),e.dataDrop&&this.setDataDropOptions(e.dataDrop),e.rowIndicator&&this.setRowIndicator(e.rowIndicator),e.checkBar&&this.setCheckBar(e.checkBar),e.stateBar&&this.setStateBar(e.stateBar),e.header&&this.setHeader(e.header),e.footer&&this.setFooter(e.footer),e.footers&&this.setFooters(e.footers),e.headerSummary&&this.setHeaderSummary(e.headerSummary),e.headerSummaries&&this.setHeaderSummaries(e.headerSummaries))},u.prototype.getFixedOptions=function(){return this._view.fixedOptions.toProxy()},u.prototype.setFixedOptions=function(e){this._view.fixedOptions.assignFrom(e)},u.prototype.getDisplayOptions=function(){return this._view.displayOptions.toProxy()},u.prototype.setDisplayOptions=function(e){this._view.displayOptions.assignFrom(e)},u.prototype.getFormatOptions=function(){return this._view.formatOptions.toProxy()},u.prototype.setFormatOptions=function(e){this._view.formatOptions.assignFrom(e)},u.prototype.getEditOptions=function(){return this._view.editOptions.toProxy()},u.prototype.setEditOptions=function(e){this._view.editOptions.assignFrom(e)},u.prototype.getEditorOptions=function(){return this._view.editorOptions.toProxy()},u.prototype.setEditorOptions=function(e){this._view.editorOptions.assignFrom(e)},u.prototype.getCopyOptions=function(){return this._view.copyOptions.toProxy()},u.prototype.setCopyOptions=function(e){this._view.copyOptions.assignFrom(e)},u.prototype.getPasteOptions=function(){return this._view.pasteOptions.toProxy()},u.prototype.setPasteOptions=function(e){this._view.pasteOptions.assignFrom(e)},u.prototype.getSortingOptions=function(){return this._view.sortingOptions.toProxy()},u.prototype.setSortingOptions=function(e){this._view.sortingOptions.assignFrom(e)},u.prototype.getFilteringOptions=function(){return this._view.filteringOptions.toProxy()},u.prototype.setFilteringOptions=function(e){this._view.filteringOptions.assignFrom(e)},u.prototype.getMobileOptions=function(){return this._view.mobileOptions.toProxy()},u.prototype.setMobileOptions=function(e){this._view.mobileOptions.assignFrom(e)},u.prototype.getDataDropOptions=function(){return this._view.dataDropOptions.toProxy()},u.prototype.setDataDropOptions=function(e){this._view.dataDropOptions.assignFrom(e)},u.prototype.getFormOptions=function(){return this.formView.options.toProxy()},u.prototype.setFormOptions=function(e){this.formView.options.assignFrom(e)},u.prototype.getRowIndicator=function(){return this._view.rowIndicator.toProxy()},u.prototype.setRowIndicator=function(e){this._view.rowIndicator.assignFrom(e)},u.prototype.getStateBar=function(){return this._view.stateBar.toProxy()},u.prototype.setStateBar=function(e){this._view.stateBar.assignFrom(e)},u.prototype.getCheckBar=function(){return this._view.checkBar.toProxy()},u.prototype.setCheckBar=function(e){this._view.checkBar.assignFrom(e)},u.prototype.getHeader=function(){return this._view.header.toProxy()},u.prototype.setHeader=function(e){this._view.header.assignFrom(e)},u.prototype.getFooter=function(){return this._view.footer.toProxy()},u.prototype.setFooter=function(e){this._view.footer.assignFrom(e)},u.prototype.getFooters=function(){return this._view.footers.toProxy()},u.prototype.setFooters=function(e){this._view.footers.assignFrom(e)},u.prototype.getHeaderSummary=function(){return this._view.headerSummary.toProxy()},u.prototype.setHeaderSummary=function(e){this._view.headerSummary.assignFrom(e)},u.prototype.getHeaderSummaries=function(){return this._view.headerSummaries.toProxy()},u.prototype.setHeaderSummaries=function(e){this._view.headerSummaries.assignFrom(e)},u.prototype.setCellStyleCallback=function(e){this._view.body.cellStyleCallback=e},u.prototype.setRowStyleCallback=function(e){this._view.body.rowStyleCallback=e},u.prototype.orderBy=function(e,t,n){if(e){var r=[],i=[],s=[],o=this._dataProvider;if(t)for(var u=0,a=e.length;u<a;u++)r.push(this._view.columnByField(o.getFieldIndex(e[u]))),i.push(t&&u<t.length&&t[u]||c.SortDirection.ASCENDING),s.push(n&&u<n.length&&n[u]||c.SortCase.SENSITIVE);this._view.orderBy(r,i,s)}},u.prototype.getSortedFields=function(){var e,t=this._view,n=t.getSortFields(),r=t.getSortDirections();if(n&&0<(e=n.length)){for(var i=this._dataProvider,s=[],o=0;o<e;o++)s.push({fieldName:i.getFieldName(n[o]),orgFieldName:i.getOrgFieldName(n[o]),direction:r[o]});return s}return null},u.prototype.setFocus=function(){this._view.setFocus()},u.prototype.getColumn=function(e){return this._view.getColumn(e)},u.prototype.getColumns=function(){for(var e=this._view.columnCount,t=[],n=0;n<e;n++)t.push(this._view.getColumn(n));return t},u.prototype.setColumns=function(e){this._view.setColumns(e)},u.prototype.addColumn=function(e,t){this._view.addColumn(e,t)},u.prototype.layoutByColumn=function(e){return this._view.layoutByColumn(e)},u.prototype.layoutByName=function(e){return this._view.layoutByName(e)},u.prototype.getColumnNames=function(e,t){return this._view.collectColumnNames(e,t)},u.prototype.columnByName=function(e){return this._view.columnByName(e)},u.prototype.columnByField=function(e){return this._view.columnByField(e)},u.prototype.getColumnProperty=function(e,t){e=i.getColumn(this._view,e);if(e&&t)return e[t]instanceof y.Base?e[t].toProxy():e[t]},u.prototype.setColumnProperty=function(e,t,n){e=i.getColumn(this._view,e),e&&t&&(e[t]instanceof y.Base?e[t].assignFrom(n):e[t]=n)},u.prototype.setColumn=function(e){var t=i.getColumn(this._view,e);t&&t.assignFrom(e)},u.prototype.getDisplayColumns=function(){return this._view.collectColumns(!0,!0,!0)},u.prototype.setColumnLayout=function(e){"string"==typeof e&&!(e=this._view.findColumnLayout(e))||(this._view.cellLayout=e)},u.prototype.getLayoutByColumn=function(e){return e=this._view.layoutByColumn(e),e?e.toProxy():null},u.prototype.saveColumnLayout=function(){return this._view.activeCellLayout.getLayout.apply(this._view.activeCellLayout,arguments)},u.prototype.linearizeColumns=function(e){this._view.linearizeColumns(e)},u.prototype.registerColumnLayouts=function(e){this._view.registerColumnLayouts(e)},u.prototype.fitLayoutWidth=function(e,t,n){var r;if(e){if("string"==typeof e?r=this.layoutByName(e):e.name&&(r=this.layoutByColumn(e.name)),r instanceof Ft.CellLayoutItem)return this._view.fitLayoutWidth(r,t,n)}else if(null==e)return this._view.fitLayoutWidth(this._view.activeCellLayout._root,t,n)},u.prototype.setRowHeight=function(e,t,n){this._view.setRowHeight(e,t=void 0===t?0:t,n=void 0===n?!0:n)},u.prototype.getRowHeight=function(e){var t=this._view.getRowHeight(e);return isNaN(t)&&(e=this._view.getItem(e),t=this._view.layoutManager.getItemHeight(e)),t},u.prototype.clearRowHeights=function(e){this._view.clearRowHeights(e)},u.prototype.getCurrent=function(){var e=this._view.focusedIndex;return e?e.proxy():null},u.prototype.setCurrent=function(e,t){void 0===t&&(t=!0);var n=this._view.focusedIndex.clone();n.assignFrom(e),this._view.setFocusedIndex(n,t,!0)},u.prototype.resetCurrent=function(){this._view.setFocusedIndex(this._view.focusedIndex.clone().reset())},u.prototype.clearCurrent=function(){this._view.clearFocusedIndex()},u.prototype.mouseToIndex=function(e,t){return t=this._view.pointToIndex(null,e,t,!1),t?t.proxy():null},u.prototype.getCellBounds=function(e,t,n){void 0===n&&(n=!0);var r=i.getColumn(this._view,t),t=new It.CellIndex(this._view,e,r);if(r&&t){e=this._view.layoutManager,r=e.getBodyView(t),t=r.getCellRectAt(e,t,!0);if(t=t&&(n?r.boundsByScreen(t):r.boundsByContainer(t)))return{x:t.x,y:t.y,width:t.width,height:t.height}}return null},u.prototype.getIndexOfElement=function(e){return e=this._view.getCellViewOf(e),e=this._view.getDataCellIndex(e),e?e.proxy():null},u.prototype.setColumnFilters=function(e,t){e=i.getColumn(this._view,e),e instanceof r.DataColumn&&e.setFilters(t)},u.prototype.clearColumnFilters=function(e){e=i.getColumn(this._view,e),e instanceof r.DataColumn&&e.clearFilters()},u.prototype.addColumnFilters=function(e,t,n){e=i.getColumn(this._view,e),e instanceof r.DataColumn&&e.addFilters(t,n)},u.prototype.removeColumnFilters=function(e,t){e=i.getColumn(this._view,e),e instanceof r.DataColumn&&e.removeFilters(t)},u.prototype.activateColumnFilters=function(e,t,n){e=i.getColumn(this._view,e),e instanceof r.DataColumn&&e.activateFilters(t,n)},u.prototype.activateAllColumnFilters=function(e,t){e=i.getColumn(this._view,e),e instanceof r.DataColumn&&e.activateAllFilters(t)},u.prototype.hideColumnFilters=function(e,t,n){void 0===n&&(n=!0),e=i.getColumn(this._view,e),e instanceof r.DataColumn&&(e.hideColumnFilters(t,n),this._view.closePopups())},u.prototype.hideAllColumnFilters=function(e,t){void 0===t&&(t=!0),e=i.getColumn(this._view,e),e instanceof r.DataColumn&&(e.hideAllColumnFilters(t),this._view.closePopups())},u.prototype.toggleColumnFilters=function(e,t){e=i.getColumn(this._view,e),e instanceof r.DataColumn&&e.toggleFilters(t)},u.prototype.toggleAllColumnFilters=function(e){e=i.getColumn(this._view,e),e instanceof r.DataColumn&&e.toggleAllFilters()},u.prototype.getColumnFilter=function(e,t){return e=i.getColumn(this._view,e),e instanceof r.DataColumn&&e.getFilter(t)?e.getFilter(t).toProxy():null},u.prototype.getColumnFilters=function(e){e=i.getColumn(this._view,e);if(e instanceof r.DataColumn){for(var t=(e.autoFilter?e.autoFilters:e.filters).items,n=[],s=0,o=t.length;s<o;s++)n.push(t[s].toProxy());return n}return null},u.prototype.getActiveColumnFilters=function(e,t){void 0===t&&(t=!0),e=i.getColumn(this._view,e);if(e instanceof r.DataColumn){for(var n=e.getActiveFilters(t),s=[],o=0,u=n.length;o<u;o++)s.push(n[o].toProxy());return s}return null},u.prototype.isFiltered=function(e){if(e){var t=i.getColumn(this._view,e);return t instanceof r.DataColumn?t.isFiltered():!1}return t=this._view.getFilteredColumns(),t&&0<t.length},u.prototype.autoFiltersRefresh=function(e,t){e=e?p.Utils.makeArray(e):this._view.getChildColumnNames(null);for(var n=0;n<e.length;n++){var s=i.getColumn(this._view,e[n]);s instanceof r.DataColumn&&s.autoFilterRefresh(t)}},u.prototype.getValues=function(e){return e=this._view.getItem(e),e?i.getValues(this._view,e):null},u.prototype.getDisplayValues=function(e){e=this._view.getItem(e);if(e)return i.getDisplayValues(this._view,e)},u.prototype.getDisplayValuesOfRow=function(e){e=this._view.getItemOfRow(e,!0);if(e)return i.getDisplayValues(this._view,e)},u.prototype.getJsonRows=function(){return this._view.getJsonRows()},u.prototype.setValues=function(e,t,n){e=this._view.getItem(e),e&&i.setValues(this._view,e,t,n)},u.prototype.getValue=function(e,t){return e=this._view._clipboardManager.isPasting?this._view._clipboardManager.appendingIndex.item:this._view.getItem(e),e?(t="string"==typeof t?this._dataProvider.getFieldIndex(t):t,e.getData(t)):null},u.prototype.setValue=function(e,t,n){t=this._dataProvider.getFieldIndex(t),this._view.setValueAt(e,t,n)},u.prototype.getEditValue=function(){return this._view.getEditCellValue()},u.prototype.setEditValue=function(e,t,n){this._view.setEditCellValue(e,t,n=void 0===n?!0:n)},u.prototype.registerCustomRenderer=function(e,t){this._view.registerCustomRenderer(e,t)},u.prototype.unregisterCustomRenderer=function(e){this._view.unregisterCustomRenderer(e)},u.prototype.existsCustomRenderer=function(e){return this._view.existsCustomRenderer(e)},u.prototype.unregisterAllCustomRenderer=function(){this._view.unregisterAllCustomRenderer()},u.prototype.addPopupMenu=function(e,t){this._view.addPopupMenu(e,t)},u.prototype.removePopupMenu=function(e){this._view.removePopupMenu(e)},u.prototype.setContextMenu=function(e){this._view.setContextMenu(e)},u.prototype.getSelection=function(){var e=this._view.getSelection();return e?e.toProxy():null},u.prototype.setSelection=function(e){if(e.style&&"string"==typeof e.style){var t=Zt.SelectionStyle[e.style.toUpperCase()]||Zt.SelectionStyle.BLOCK,n=0,r=0;if(e.hasOwnProperty("startItem"))n=e.startItem;else if(e.hasOwnProperty("startRow"))n=this._view.getItemIndexOfRow(e.startRow);else if("singleColumn"!=t&&"columns"!=t)return;if(e.hasOwnProperty("endItem"))r=e.endItem;else if(e.hasOwnProperty("endRow"))r=this._view.getItemIndexOfRow(e.endRow);else if("singleColumn"!=t&&"columns"!=t)return;var s=i.getColumn(this._view,e.startColumn),o=i.getColumn(this._view,e.endColumn),s=new It.CellIndex(this._view,n,s),o=new It.CellIndex(this._view,r,o);this._view.clearSelection(),this._view.selections.add(s,o,t)}},u.prototype.clearSelection=function(){this._view.clearSelection()},u.prototype.getSelectedItems=function(e){return this._view.getSelectedItemIndices(e)},u.prototype.getSelectedRows=function(){return this._view.getSelectedRows()},u.prototype.deleteSelection=function(e){this._view.deleteSelection(e)},u.prototype.eraseSelection=function(){this._view.eraseSelection()},u.prototype.getSelectionData=function(e){return void 0===e&&(e=-1),0<this._view.selections.count?this._view.selections.getItem(0).getData(e):null},u.prototype.copyToClipboard=function(e,t){return this._view.toClipboard(e,t=void 0===t?!0:t)},u.prototype.commitEditor=function(e){this._view.commitEditor(e=void 0===e?!0:e)},u.prototype.commit=function(e){return this._view.commit(e)},u.prototype.cancel=function(){return this._view.cancel()},u.prototype.fillEditSearchItems=function(e,t,n,r){e=i.getColumn(this._view,e),this._view.fillEditSearchItems(e,t,n,r)},u.prototype.isItemEditing=function(){return this._view.isItemEditing()},u.prototype.isEditing=function(){return this._view.isEditing()},u.prototype.showEditor=function(e){this._view.showEditor(null,null,e=void 0===e?!1:e)},u.prototype.hideEditor=function(){this._view.hideEditor(!0)},u.prototype.cancelEditor=function(){this._view.cancelEditor(!0)},u.prototype.setValidations=function(e){this._view.validations=e},u.prototype.validateCells=function(e,t){return this._view.validateCells(e,t=void 0===t?!0:t)},u.prototype.getInvalidCells=function(){return this._view.getInvalidCells()},u.prototype.clearInvalidCells=function(){return this._view.clearInvalidCells()},u.prototype.getEditingItem=function(){var e=this._view.getEditItem();return e?(e.getRowObject(),{itemIndex:e.index,dataRow:e.dataRow,values:e.getRowObject()}):null},u.prototype.getItemState=function(e){var t=this._view.getItem(e);return t?(e=t.itemState,e=e==dt.ItemState.NORMAL&&this._view.focusedIndex.itemIndex==t.index?dt.ItemState.FOCUSED:e):null},u.prototype.showToast=function(e,t){this._view.showToast(e,t)},u.prototype.hideToast=function(e){this._view.hideToast(e)},u.prototype.setLookups=function(e){this._view.setLookups(e)},u.prototype.addLookupSource=function(e){this._view.addLookupSource(e)},u.prototype.removeLookupSource=function(e){this._view.removeLookupSource(e)},u.prototype.existsLookupData=function(e,t){return this._view.existsLookupData(e,t)},u.prototype.fillLookupData=function(e,t){this._view.fillLookupData(e,t)},u.prototype.clearLookupData=function(e){this._view.clearLookupData(e)},u.prototype.isCheckable=function(e){return this._view.isCheckable(e)},u.prototype.isCheckableOfRow=function(e){return this._view.isCheckableOfRow(e)},u.prototype.setCheckable=function(e,t){this._view.setCheckable(e,t)},u.prototype.setCheckableOfRow=function(e,t){this._view.setCheckableOfRow(e,t)},u.prototype.isCheckedItem=function(e){return this._view.isCheckedItem(e)},u.prototype.isCheckedRow=function(e){return this._view.isCheckedRow(e)},u.prototype.checkItem=function(e,t,n,r){this._view.checkItem(e,t=void 0===t?!0:t,n,r=void 0===r?!0:r)},u.prototype.checkRow=function(e,t,n,r){this._view.checkRow(e,t=void 0===t?!0:t,n,r=void 0===r?!0:r)},u.prototype.checkItems=function(e,t,n){this._view.checkItems(e,t=void 0===t?!0:t,n=void 0===n?!0:n)},u.prototype.checkRows=function(e,t,n){this._view.checkRows(e,t=void 0===t?!0:t,n=void 0===n?!0:n)},u.prototype.checkAll=function(e,t,n,r){this._view.checkAll(e=void 0===e?!0:e,t,n=void 0===n?!0:n,r=void 0===r?!0:r)},u.prototype.setAllCheck=function(e,t){this._view.setAllCheck(e=void 0===e?!0:e,t=void 0===t?!0:t)},u.prototype.isAllChecked=function(){return this._view.allChecked},u.prototype.resetCheckables=function(e){this._view.resetCheckables(),e&&(this._view.checkBar.checkableExpression=null,this._view.checkBar.checkableCallback=null)},u.prototype.applyCheckables=function(){this._view.applyCheckables()},u.prototype.setCheckableExpression=function(e,t){void 0===t&&(t=!0),this._view.checkBar.checkableExpression=e,t&&this._view.applyCheckables()},u.prototype.setCheckableCallback=function(e,t){void 0===t&&(t=!0),this._view.checkBar.checkableCallback=e,t&&this._view.applyCheckables()},u.prototype.getSummary=function(e,t){var n=this._view.summarizer,r="string"==typeof e?this._dataProvider.getFieldIndex(e):e;if(-1==r)return null;switch(t){case"count":return n.getCount(r);case"sum":return n.getSum(r);case"max":return n.getMax(r);case"min":return n.getMin(r);case"avg":return n.getAvg(r);case"var":return n.getVar(r);case"varp":return n.getVarp(r);case"stdev":return n.getStdev(r);case"stdevp":return n.getStdevp(r);case"datacount":return n.getDataCount(r);case"dataavg":return n.getDataAvg(r)}},u.prototype.getModel=function(e,t){return e=this._view.getItem(e),e&&i.getItemProxy(e,t)},u.prototype.getModelAs=function(e,t,r){var s=this._view.getItem(e);switch(t){case"row":s=p.Utils.cast(s,n.GridRow);break;case"group":s=p.Utils.cast(s,dt.GroupItem);break;case"footer":s=p.Utils.cast(s,n.GroupFooter);break;case"tree":s=p.Utils.cast(s,Ot.TreeItem)}return s?i.getItemProxy(s,r):null},u.prototype.getGroupModel=function(e,t){return e=this._view.getItem(e),(e=!e||e instanceof dt.GroupItem?e:e.parent)?i.getItemProxy(e,t):null},u.prototype.getRootModel=function(e,t){if(e){e=this._view.getItem(e.index);if(e)return e.root?i.getItemProxy(e.root,t):null}},u.prototype.getModels=function(e,t){if(e=p.Utils.makeArray(e)){for(var n=[],r=0,s=e.length;r<s;r++){var o=this._view.getItem(e[r]);o&&n.push(i.getItemProxy(o,t))}return n}},u.prototype.getModelOfRow=function(e,t){return e=this._view.getItemOfRow(e,!1),e?i.getItemProxy(e,t):null},u.prototype.getModelsOfRows=function(e,t){if(e=p.Utils.makeArray(e)){for(var n=[],r=0,s=e.length;r<s;r++){var o=this._view.getItemOfRow(e[r],!1);o&&n.push(i.getItemProxy(o,t))}return n}},u.prototype.getParentModel=function(e,t){var n;return!((n=e?this._view.getItemOfModel(e):n)&&n instanceof mt.EditItem)&&n?i.getItemProxy(n.parent,t):null},u.prototype.getChildModel=function(e,t,n){e=e&&this._view.getItemOfModel(e);if(e instanceof dt.GroupItem)return t=e.getItem(t),t?i.getItemProxy(t,n):null},u.prototype.getChildModels=function(e,t){var n=e&&this._view.getItemOfModel(e);if(n instanceof dt.GroupItem){for(var r=[],s=0,o=n.count;s<o;s++)r.push(i.getItemProxy(n.children[s],t));return r}return null},u.prototype.getDescendantModels=function(e,t){e=e&&this._view.getItemOfModel(e);if(e instanceof dt.GroupItem){var n=e.getDescendants(!1),r=[];if(n)for(var s=0,o=n.length;s<o;s++)r.push(i.getItemProxy(n[s],t));return r}return null},u.prototype.getGroupSummary=function(e,t,n){if(e){var r=this._view.getItemOfModel(e),e="string"==typeof t?this._dataProvider.getFieldIndex(t):t;if(r instanceof dt.GroupItem&&0<=e)return t={count:r.getNumber(e),sum:r.getSum(e),max:r.getMax(e),min:r.getMin(e),avg:r.getAvg(e),datacount:r.getDataCount(e),dataavg:r.getSum(e)/r.getDataCount(e)},n&&(t.var=r.getVar(e,1),t.varp=r.getVar(e,0),t.stdev=r.getStdev(e,1),t.stdevp=r.getStdev(e,0)),t}},u.prototype.showProgress=function(){this._view.showProgress()},u.prototype.setProgress=function(e,t,n,r){this._view.setProgress(e,t,n,r)},u.prototype.closeProgress=function(){this._view.closeProgress()},u.prototype.showLoading=function(e){this._view.showLoading(e)},u.prototype.closeLoading=function(){this._view.hideLoading()},u.prototype.searchItem=function(e){return e?this._view.searchItem(e):-1},u.prototype.searchCell=function(e){return e?this._view.searchCell(e):null},u.prototype.resetSize=function(e){this._view.container.resetSize(e)},u.prototype.closeList=function(){this._view.closePopups()},u.prototype.exportGrid=function(e){var t;"csv"===e.type?(t=new sr.GridExportOptions(e),(new fr.GridCsvExporter).export(this._view,t)):"excel"===e.type&&(t=new sr.GridMultiExportOptions(this._view,e),(new Lr.GridExcelExporter).export(this._view,t))},u.prototype.scrollPage=function(e){this._view._vscrollBar._doScroll(gn.ScrollEventType.PAGE,e,0)},u.prototype.getTopItem=function(){return this._view.topIndex},u.prototype.setTopItem=function(e){this._view.topIndex=e=void 0===e?0:e},u.prototype.getLeftPos=function(){return this._view.leftPos},u.prototype.setLeftPos=function(e){this._view.leftPos=e},u.prototype.setLeftCol=function(e){this._view.leftCell=e},u.prototype.getContainer=function(){return this._view.container._containerDiv},u.prototype.destroy=function(){this.dispose()},u.prototype.fullItemCount=function(){return this._view.layoutManager.fullItemCount},u.prototype.undo=function(){return this._view.undo()},u.prototype.redo=function(){return this._view.redo()},u.prototype.clearCommandStack=function(e){this._view.clearCommandStack(e=void 0===e?!0:e)},u.prototype._getView=function(){return this._view},u);t.GridBase=o;var a,f=(a=o,l.__extends(h,a),_dp(h,"rowGroup",{get:function(){return this._view.rowGroup}}),_dp(h,"groupPanel",{get:function(){return this._view.groupPanelView}}),_dp(h,"filterMode",{get:function(){return this._view._rs.filterMode},set:function(e){this._view._rs.filterMode=e}}),_dp(h,"filterOr",{get:function(){return this._view._rs.inclusiveFiltering},set:function(e){this._view._rs.inclusiveFiltering=e}}),_dp(h,"groupSummaryMode",{get:function(){return this._view._rs.groupSummaryMode},set:function(e){this._view._rs.groupSummaryMode=e}}),_dp(h,"groupingOptions",{get:function(){return this._view.groupingOptions}}),h.prototype.getRowGroup=function(){return this._view.rowGroup.toProxy()},h.prototype.setRowGroup=function(e){this._view.rowGroup.assignFrom(e)},h.prototype.getGroupPanel=function(){return{visible:this._view.groupPanelView.visible,height:this._view.groupPanelView.height,minHeight:this._view.groupPanelView.minHeight}},h.prototype.setGroupPanel=function(e){this._view.groupPanelView.assignFrom(e)},h.prototype.getOptions=function(){var e=a.prototype.getOptions.call(this);return e.grouping=this.groupingOptions,e.groupPanel=this.groupPanel,e},h.prototype.setOptions=function(e){a.prototype.setOptions.call(this,e),e.grouping&&this._view.groupingOptions.assignFrom(e.grouping),e.groupPanel&&this._view.groupPanelView.assignFrom(e.groupPanel)},h.prototype.getGroupingOptions=function(){return this._view.groupingOptions.toProxy()},h.prototype.setGroupingOptions=function(e){this._view.groupingOptions.assignFrom(e)},h.prototype.groupBy=function(e,t,n){this._view.groupByFieldNames(e,t,n)},h.prototype.isGrouped=function(){return this._view.rowGrouped},h.prototype.isMergedGrouped=function(){return this._view.mergedRowGrouped},h.prototype.getGroupFields=function(){return this._view.rowGroupFields},h.prototype.getGroupFieldNames=function(e){void 0===e&&(e=!0);var t=this._view.rowGroupFields;if(t){var n=this._dataProvider;if(n){for(var r=[],i=0,s=t.length;i<s;i++)r.push(e?n.getOrgFieldName(t[i]):n.getFieldName(t[i]));return r}return t}return null},h.prototype.getGroupLevels=function(){return this._view.rowGroupLevels},h.prototype.getGroupLevel=function(e){return-1<(e=this._dataProvider.getFieldIndex(e))?this._view.getGroupLevel(e):-1},h.prototype.getGroupIndex=function(e){return e=this._view.getItem(e),e?(e=e.parent,e?e.index:-1):-1},h.prototype.isGroupItem=function(e){return this._view.getItem(e)instanceof dt.GroupItem},h.prototype.isParentVisible=function(e){return e=this._view.getItem(e),e&&e.parent&&e.parent.visible},h.prototype.expandGroup=function(e,t,n,r){void 0===r&&(r=0),e=this._view.getItem(e),e&&e instanceof dt.GroupItem&&this._view.expand(e,t,n,r)},h.prototype.collapseGroup=function(e,t,n){e=this._view.getItem(e),e&&e instanceof dt.GroupItem&&this._view.collapse(e,t,n)},h.prototype.expandParent=function(e,t,n,r){void 0===r&&(r=0),e=this._view.getItem(e),!e||(e=e.parent)&&e.expandable&&(e.collapsed||n)&&this._view.expand(e,t,n,r)},h.prototype.collapseParent=function(e,t,n){e=this._view.getItem(e),!e||(e=e.parent)&&e instanceof dt.GroupItem&&this._view.collapse(e,t,n)},h.prototype.expandAll=function(e,t){void 0===e&&(e=!0),0<this._view.itemCount&&this._view.expandAll(e,t)},h.prototype.collapseAll=function(e){0<this._view.itemCount&&this._view.collapseAll(e)},h.prototype.beginInsertRow=function(e,t){this._view.insertAt(e=void 0===e?-1:e,t)},h.prototype.beginAppendRow=function(){this._view.append()},h.prototype.beginUpdateRow=function(e){var t;this._view.focusedIndex&&(t=this._view.focusedIndex.clone(),void 0!==e&&(t.itemIndex=e),this._view.edit(t))},h.prototype.setPaging=function(e,t,n){this._view.setPaging(e,t=void 0===t?10:t,n=void 0===n?-1:n)},h.prototype.getPage=function(){return this._view.page},h.prototype.setPage=function(e,t){this._view.setPage(e,t=void 0===t?-1:t)},h.prototype.getPageCount=function(){return this._view.pageCount},h.prototype.setPageCount=function(e){this._view.pageCount=e},h.prototype.getCheckedItems=function(e){return this._view.getCheckedItemIndices(!(e=void 0===e?!0:e))},h.prototype.getCheckedRows=function(e,t,n){return this._view.getCheckedRows(e=void 0===e?!0:e,t,n)},h.prototype._createView=function(e,t,n){return(this._container=new Tr.GridContainer(e,this,t,n)).gridView},h.prototype._createListener=function(e){return new w(this,e)},h);t.GridView=f;var d,o=(d=o,l.__extends(v,d),_dp(v,"treeOptions",{get:function(){return this._view.treeOptions}}),v.prototype.getTreeOptions=function(){return this._view.treeOptions.toProxy()},v.prototype.setTreeOptions=function(e){this._view.treeOptions.assignFrom(e)},v.prototype.getParent=function(e){return e=this._view.getItem(e),e?e.parentIndex:-1},v.prototype.getChildren=function(e){var t=this._view.getItem(e);if(t){for(var n=[],r=0,i=t.count;r<i;r++)n.push(t.getItem(r).index);return n}return null},v.prototype.getDescendants=function(e){e=this._view.getItem(e);if(e){for(var t=[],n=e.getDescendants(!1),r=0,i=n.length;r<i;r++)t.push(n[r].index);return t}return null},v.prototype.getAncestors=function(e,t){void 0===t&&(t=!0),e=this._view.getItem(e);if(e){for(var n=[],r=e.getAncestors(),i=0,s=r.length;i<s;i++)!t&&r[i]instanceof Ot.RootTreeItem||n.push(r[i].index);return n}return null},v.prototype.expand=function(e,t,n,r){void 0===r&&(r=0),e=this._view.getItem(e),e&&this._view.expand(e,t,n,r)},v.prototype.expandModel=function(e,t,n,r){void 0===r&&(r=0),e=this._view.getItemOfModel(e),e&&this._view.expand(e,t,n,r)},v.prototype.collapse=function(e,t){e=this._view.getItem(e),e&&this._view.collapse(e,t)},v.prototype.collapseModel=function(e,t){e=this._view.getItemOfModel(e),e&&this._view.collapse(e,t)},v.prototype.expandAll=function(e){this._view.expandAll(e=void 0===e?0:e)},v.prototype.collapseAll=function(){this._view.collapseAll()},v.prototype.getCheckedItems=function(){return this._view.getCheckedItemIndices()},v.prototype.getCheckedRows=function(e){return this._view.getCheckedRowIds(e)},v.prototype.checkChildren=function(e,t,n,r,i,s){void 0===s&&(s=!0),e=this._view.getItem(e),e&&this._view.checkChildren(e,t,n,r,i,s)},v.prototype._createView=function(e){return(this._container=new kr.TreeContainer(e,this)).gridView},v.prototype._createListener=function(e){return new x(this,e)},v);t.TreeView=o;var m,o=(m=ct.EventListenerBase,l.__extends(g,m),g.prototype.dispose=function(){this._view.removeListener(this),this._view=null,this._del=null},g.prototype.onGridBaseViewActivated=function(e,t){this._del.onViewActivated?this._del.onViewActivated(this._del,t):p.Utils.log("onViewActivated",t)},g.prototype.onGridBaseCurrentChanging=function(e,t,n){return this._del.onCurrentChanging?this._del.onCurrentChanging(this._del,t.proxy(),n.proxy()):(p.Utils.log("onCurrentChanging",t,n),!0)},g.prototype.onGridBaseCurrentChanged=function(e,t){this._del.onCurrentChanged?this._del.onCurrentChanged(this._del,t.proxy()):p.Utils.log("onCurrentChanged",t)},g.prototype.onGridBaseCurrentRowChanged=function(e,t,n){this._del.onCurrentRowChanged?this._del.onCurrentRowChanged(this._del,t,n):p.Utils.log("onCurrentRowChanged",t,n)},g.prototype.onGridBaseValidateCell=function(e,t,n,r){if(this._del.onValidateColumn){var i=t.itemIndex,s=t.item&&t.item.dataRow,s=this._del.onValidateColumn(this._del,t.column,n,r,i,s);if(s&&s.level&&s.message)throw new Dt.ValidationError(s.level,s.message,t.column&&t.column,s.message);if("string"==typeof s||"number"==typeof s)throw new Dt.ValidationError(c.ValidationLevel.ERROR,s,t.column&&t.column,s)}},g.prototype.onGridBaseValidateRow=function(e,t,n,r){if(this._del.onValidateRow){r=this._del.onValidateRow(this._del,t.index,t.dataRow,n,r);if(r&&r.level&&r.message)throw new Dt.ValidationError(r.level,r.message,null,r.message);if("string"==typeof r||"number"==typeof r)throw new Dt.ValidationError(c.ValidationLevel.ERROR,r,null,r)}},g.prototype.onGridBaseValidationFail=function(e,t,n,r){return this._del.onValidationFail?(n=this._del.onValidationFail(this._del,t,n,{level:r.level,message:r.message}),n&&n.level&&n.message?(r.level=n.level,r.message=n.message,r.userMessage=n.message,r):"string"==typeof n||"number"==typeof n?(r.message=n,r.userMessage=n,r):void 0):r},g.prototype.onGridBaseCellClicked=function(e,t){this._del.onCellClicked?this._del.onCellClicked(this._del,t):p.Utils.log("onCellClicked: ",t)},g.prototype.onGridBaseCellDblClicked=function(e,t){this._del.onCellDblClicked?this._del.onCellDblClicked(this._del,t):p.Utils.log("onCellDblClicked: ",t)},g.prototype.onGridBaseCellItemClicked=function(e,t,n){return this._del.onCellItemClicked?this._del.onCellItemClicked(this._del,t.toProxy(),n):p.Utils.log("onCellItemClicked: ",n)},g.prototype.onGridBaseColumnCheckedChanged=function(e,t,n){this._del.onColumnCheckedChanged?this._del.onColumnCheckedChanged(this._del,t,n):p.Utils.log("onColumnCheckedChanged: ("+t.name+", "+n+")")},g.prototype.onGridBaseMenuItemClicked=function(e,t,n){this._del.onMenuItemClicked?this._del.onMenuItemClicked(this._del,t.toProxy(),n):p.Utils.log("onMenuItemClicked: ",t.toProxy(),n)},g.prototype.onGridBaseContextMenuPopup=function(e,t,n,r){return this._del.onContextMenuPopup?this._del.onContextMenuPopup(this._del,t,n,r):p.Utils.log("onContextMenuPopup: x = ",t,", y = ",n,", clickData =",r)},g.prototype.onGridBaseContextMenuItemClicked=function(e,t,n){this._del.onContextMenuItemClicked?this._del.onContextMenuItemClicked(this._del,t.toProxy(),n):p.Utils.log("onContextMenuItemClicked: ",t.toProxy(),n)},g.prototype.onGridBaseCellButtonClicked=function(e,t){this._del.onCellButtonClicked?this._del.onCellButtonClicked(this._del,t.proxy(),t.column):p.Utils.log("onCellButtonClicked: ",t)},g.prototype.onGridBaseScrollToBottom=function(e){this._del.onScrollToBottom?this._del.onScrollToBottom(this._del):p.Utils.log("onScrollToBottom")},g.prototype.onGridBaseTopIndexChanged=function(e,t){this._del.onTopIndexChanged?this._del.onTopIndexChanged(this._del,t):p.Utils.log("onTopItemIndexChanged: "+t)},g.prototype.onGridBaseRowsDeleting=function(e,t){return this._del.onRowsDeleting?this._del.onRowsDeleting(this._del,t):(p.Utils.log("onRowsDeleting:",t),!0)},g.prototype.onGridBaseRowInserting=function(e,t,n){if(this._del.onRowInserting)return this._del.onRowInserting(this._del,t,n);p.Utils.log("onRowInserting: "+t,n)},g.prototype.onGridBaseSelectionChanged=function(e){this._del.onSelectionChanged?this._del.onSelectionChanged(this._del):p.Utils.keyLog("onSelectionChanged")},g.prototype.onGridBaseSelectionAdded=function(e,t){this._del.onSelectionAdded?this._del.onSelectionAdded(this._del,t):p.Utils.keyLog("onSelectionAdded: ",t)},g.prototype.onGridBaseSelectionEnded=function(e){this._del.onSelectionEnded?this._del.onSelectionEnded(this._del):p.Utils.keyLog("onSelectionEnded")},g.prototype.onGridBaseShowEditor=function(e,t,n,r){return this._del.onShowEditor?this._del.onShowEditor(this._del,t.proxy(),n,r):p.Utils.log("onShowEditor",t.proxy(),n,r)},g.prototype.onGridBaseHideEditor=function(e,t){this._del.onHideEditor?this._del.onHideEditor(this._del,t.proxy()):p.Utils.log("onHideEditor: ",t.proxy())},g.prototype.onGridBaseEditChange=function(e,t,n){this._del.onEditChange?this._del.onEditChange(this._del,t.proxy(),n):p.Utils.log("onEditChange: "+n,t.proxy())},g.prototype.onGridBaseGetEditValue=function(e,t,n){this._del.onGetEditValue?this._del.onGetEditValue(this._del,t.proxy(),n):p.Utils.log("onGetEditValue: ",t,n)},g.prototype.onGridBaseEditCommit=function(e,t,n,r){return this._del.onEditCommit?this._del.onEditCommit(this._del,t.proxy(),n,r):(p.Utils.log("onEditCommit",t.proxy(),n,r),!0)},g.prototype.onGridBaseEditCanceled=function(e,t){this._del.onEditCanceled?this._del.onEditCanceled(this._del,t.proxy()):p.Utils.log("onEditCanceled",t.proxy())},g.prototype.onGridBaseItemEditCanceled=function(e,t){this._del.onItemEditCanceled?this._del.onItemEditCanceled(this._del,t.index,t.itemState):p.Utils.log("onItemEditCanceled: "+t.index+", "+t.itemState)},g.prototype.onGridBaseItemEditCancel=function(e,t){return this._del.onItemEditCancel?this._del.onItemEditCancel(this._del,t.index,t.itemState):(p.Utils.log("onItemEditCancel: "+t.index+", "+t.itemState),!0)},g.prototype.onGridBaseEditSearch=function(e,t,n){this._del.onEditSearch?this._del.onEditSearch(this._del,t.proxy(),n):p.Utils.log("onEditSearch: "+n,t.proxy())},g.prototype.onGridBaseSearchCellButtonClick=function(e,t,n){return this._del.onSearchCellButtonClick?this._del.onSearchCellButtonClick(this._del,t.proxy(),n):(p.Utils.log("onSearchCellButtonClick: "+n,t.proxy()),null)},g.prototype.onGridBaseCellEdited=function(e,t,n){return this._del.onCellEdited?this._del.onCellEdited(this._del,t.index,t.dataRow,n):p.Utils.log("onCellEdited: "+t.index+", "+t.dataRow+", "+n)},g.prototype.onGridBaseEditRowChanged=function(e,t,n,r,i){return this._del.onEditRowChanged?this._del.onEditRowChanged(this._del,t.index,t.dataRow,n,r,i):p.Utils.log("onEditRowChanged: "+t.index+", "+t.dataRow+", "+n+", "+r+" => "+i)},g.prototype.onGridBaseEditRowPasted=function(e,t,n,r,i){return this._del.onEditRowPasted?this._del.onEditRowPasted(this._del,t.index,t.dataRow,n,r,i):p.Utils.log("onEditRowPasted: "+t.index+", "+t.dataRow,n,r,i)},g.prototype.onGridBaseRowsPasted=function(e,t){return this._del.onRowsPasted?this._del.onRowsPasted(this._del,t):p.Utils.log("onRowsPasted: ",t)},g.prototype.onGridBaseCellPasting=function(e,t,n){return this._del.onCellPasting?this._del.onCellPasting(this._del,t.proxy(),n):p.Utils.log("onCellPasting: ",t,n)},g.prototype.onGridBaseItemChecked=function(e,t,n){return this._del.onItemChecked?this._del.onItemChecked(this._del,t.index,n):p.Utils.log("onItemChecked",t.index,n)},g.prototype.onGridBaseItemsChecked=function(e,t,n){return t=i.getItemIndices(t),this._del.onItemsChecked?this._del.onItemsChecked(this._del,t,n):p.Utils.log("onItemsChecked: "+n,t)},g.prototype.onGridBaseItemAllChecked=function(e,t){return this._del.onItemAllChecked?this._del.onItemAllChecked(this._del,t):p.Utils.log("onItemAllChecked: "+t)},g.prototype.onGridBaseErrorClicked=function(e,t){this._del.onErrorClicked?this._del.onErrorClicked(this._del,t):p.Utils.log("onErrorClicked: "+t)},g.prototype.onGridBaseSorting=function(e,t,n){for(var r=[],i=0,s=n.length;i<s;i++)r.push(n[i]?n[i].toString():"ascending");return this._del.onSorting?this._del.onSorting(this._del,t,n):p.Utils.log("onSorting: ",t,r)},g.prototype.onGridBaseSortingChanged=function(e){this._del.onSortingChanged?this._del.onSortingChanged(this._del):p.Utils.log("onSortingChanged")},g.prototype.onGridBaseFiltering=function(e){return this._del.onFiltering?this._del.onFiltering(this._del):p.Utils.log("onFiltering")},g.prototype.onGridBaseFilteringChanged=function(e,t,n){var r=t?t.getOwner():null,i=n?n.toProxy():null,t=r?r.name:"",n=n?n.name:"";return this._del.onFilteringChanged?this._del.onFilteringChanged(this._del,r,i):p.Utils.log("onFilteringChanged: "+t+", "+n)},g.prototype.onGridBaseKeyDown=function(e,t){return this._del.onKeyDown?this._del.onKeyDown(this._del,t):p.Utils.keyLog("onKeyDown: "+t)},g.prototype.onGridBaseKeyPress=function(e,t){this._del.onKeyPress?this._del.onKeyPress(this._del,t):p.Utils.keyLog("onKeyPress: "+t)},g.prototype.onGridBaseKeyUp=function(e,t){this._del.onKeyUp?this._del.onKeyUp(this._del,t):p.Utils.keyLog("onKeyUp: "+t)},g.prototype.onGridBaseShowTooltip=function(e,t,n){return this._del.onShowTooltip?this._del.onShowTooltip(this._del,t.proxy(),n):(p.Utils.log("onShowTooltip: "+n,t.proxy()),n)},g.prototype.onGridBaseShowHeaderTooltip=function(e,t,n){return this._del.onShowHeaderTooltip?this._del.onShowHeaderTooltip(this._del,t,n):(p.Utils.log("onShowHeaderTooltip: "+t.name+", "+n),n)},g.prototype.onGridBaseColumnPropertyChanged=function(e,t,n,r,i){this._del.onColumnPropertyChanged?this._del.onColumnPropertyChanged(this._del,t,n,r,i):p.Utils.log("onColumnPropertyChanged: "+t.name+", "+n+", "+r+", "+i)},g.prototype.onGridBaseLayoutPropertyChanged=function(e,t,n,r,i){this._del.onLayoutPropertyChanged?this._del.onLayoutPropertyChanged(this._del,t,n,r,i):p.Utils.log("onLayoutPropertyChanged: "+t.name+", "+n+", "+r+", "+i)},g.prototype.onGridBaseGridActivated=function(e){this._del.onGridActivated?this._del.onGridActivated(this._del):p.Utils.log("onGridActivated")},g.prototype.onGridBasePaste=function(e,t,n){if(this._del.onPaste)return this._del.onPaste(this._del,t.proxy(),n);p.Utils.log("onPaste: ",t)},g.prototype.onGridBaseCopy=function(e,t,n){if(this._del.onCopy)return this._del.onCopy(this._del,t.toProxy(),n);p.Utils.log("onCopy: ",t.toProxy())},g.prototype.onGridBasePasted=function(e){return this._del.onPasted?this._del.onPasted(this._del):p.Utils.log("onPasted")},g.prototype.onGridBaseCommandStackChanged=function(e,t,n){this._del.onCommandStackChanged?this._del.onCommandStackChanged(e.handler,t,n):p.Utils.log("onCommandStackChanged: undoable "+t+", redoable "+n)},g.prototype.onGridBaseDataLoadComplated=function(e){this._del.onDataLoadComplated?this._del.onDataLoadComplated(e.handler):p.Utils.log("onDataLoadComplated: ")},g),b,w=(b=o,l.__extends(E,b),E.prototype.dispose=function(){b.prototype.dispose.call(this)},E.prototype.onGridViewPageChanging=function(e,t){return this._del.onPageChanging?this._del.onPageChanging(this._del,t):(p.Utils.log("onPageChanging:"+t),!0)},E.prototype.onGridViewPageChanged=function(e,t){this._del.onPageChanged?this._del.onPageChanged(this._del,t):p.Utils.log("onPageChanged:"+t)},E.prototype.onGridViewPageCountChanged=function(e,t){this._del.onPageCountChanged?this._del.onPageCountChanged(this._del,t):p.Utils.log("onPageCountChanged:"+t)},E.prototype.onGridViewGrouping=function(e,t){return this._del.onGrouping?this._del.onGrouping(this._del,t):(p.Utils.log("onGrouping",t),!0)},E.prototype.onGridViewGrouped=function(e){this._del.onGrouped?this._del.onGrouped(this._del):p.Utils.log("onGrouped")},E.prototype.onGridViewExpanding=function(e,t){return this._del.onExpanding?this._del.onExpanding(this._del,t.index):(p.Utils.log("onExpanding: "+t.index),!0)},E.prototype.onGridViewExpanded=function(e,t){this._del.onExpanded?this._del.onExpanded(this._del,t.index):p.Utils.log("onExpanded: "+t.index)},E.prototype.onGridViewCollapsing=function(e,t){return this._del.onCollapsing?this._del.onCollapsing(this._del,t.index):(p.Utils.log("onCollapsing: "+t.index),!0)},E.prototype.onGridViewCollapsed=function(e,t){this._del.onCollapsed?this._del.onCollapsed(this._del,t.index):p.Utils.log("onCollapsed: "+t.index)},E),S,x=(S=o,l.__extends(T,S),T.prototype.dispose=function(){S.prototype.dispose.call(this)},T.prototype.onTreeViewExpanding=function(e,t){return this._del.onTreeItemExpanding?this._del.onTreeItemExpanding(this._del,t.index,t.rowId):(p.Utils.log("TreeItem expanding: "+t),!0)},T.prototype.onTreeViewExpanded=function(e,t){this._del.onTreeItemExpanded?this._del.onTreeItemExpanded(this._del,t.index,t.rowId):p.Utils.log("TreeItem expanded: "+t)},T.prototype.onTreeViewCollapsing=function(e,t){return this._del.onTreeItemCollapsing?this._del.onTreeItemCollapsing(this._del,t.index,t.rowId):(p.Utils.log("TreeItem collapsing: "+t),!0)},T.prototype.onTreeViewCollapsed=function(e,t){this._del.onTreeItemCollapsed?this._del.onTreeItemCollapsed(this._del,t.index,t.rowId):p.Utils.log("TreeItem collapsed: "+t)},T.prototype.onTreeViewChanged=function(e,t){this._del.onTreeItemChanged?this._del.onTreeItemChanged(this._del,t.index,t.rowId):p.Utils.log("TreeItem item changed: "+t)},T)});return t(Ar),Ar.GridBase,Ar.GridView,Ar.TreeView,t(n(function(e,t){function s(){}Object.defineProperty(t,"__esModule",{value:!0}),r.defineProp;var n=(s.getVersion=function(){return i.globalRealGridInfo.version},s.getLicenseType=function(){return i.globalRealGridInfo.license},s.getLicenseCode=function(){return i.globalRealGridInfo.code},s.getActiveGrid=function(){var e=yn.VisualContainer.getActiveGrid();return e&&e.handler},s.getGridInstance=function(e){return e=yn.VisualContainer.getGridInstance(e),e&&e.handler},s.exportGrid=function(e){var t=e&&e.exportGrids;if(t){for(var n=this.getActiveGrid(),r=void 0,i=0;i<t.length;i++){var s=t[i].grid;if(s===n){r=s;break}r=r||s}if(r)return void r.exportGrid(e)}throw new Error("multiExport must have exportGrids.")},s.setDebug=function(e,t,n){p.Utils.setDebugging(e,t,n)},s.setMobile=function(e){p.Utils.setMobile(e)},Object.defineProperty(s,"ImageList",{get:function(){return ht.ImageList}}),Object.defineProperty(s,"GridView",{get:function(){return Ar.GridView}}),Object.defineProperty(s,"TreeView",{get:function(){return Ar.TreeView}}),Object.defineProperty(s,"LocalDataProvider",{get:function(){return ct.LocalDataProvider}}),Object.defineProperty(s,"LocalTreeDataProvider",{get:function(){return ct.LocalTreeDataProvider}}),Object.defineProperty(s,"ValueType",{get:function(){return c.ValueType}}),s);t.default=n}))}();