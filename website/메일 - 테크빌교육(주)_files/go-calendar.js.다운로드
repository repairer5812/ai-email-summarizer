(function(e,t,n,r,i,s){var o=t(),u=typeof define=="function"&&define.amd,a=typeof module!="undefined"&&module.exports;if(u)define(o);else if(a)module.exports=o;else{var f=null,l=e.split("."),c=this;for(var h=0,p=l.length;h<p;h++){var d=l[h];f&&h==p-1?f[d]=o:typeof c[d]=="undefined"&&(c[d]={}),f=c[d]}}})("GO.Calendar",function(){function i(){return!!window.Backbone&&GO.hasOwnProperty("router")}var e,t,n,r=window.$||jQuery;return e=function(){var e=Array.prototype.slice;return{fixedUrl:function(e){return e.replace("//","/")},fixLocaleCode:function(e){return e==="jp"?"ja":e},navigate:function(e,t,n){n=n||"/";var s=r.extend({},{trigger:!0,replace:!1},t||{});i()?GO.router.navigate(e,s):window.opener?s.replace?location.replace(e):location.assign(e):s.replace?window.top.window.location.replace(e):window.top.window.location.assign(e)},isSupportHistoryAPI:function(){return!!window.history&&!!history.pushState},hourMinute:function(e,t){return this.formatDatetime(e,t,"HH:mm")},formatDatetime:function(e,t,n){return this.toMoment(e).format(n)},toMoment:function(){var t=e.call(arguments),n=t[0];if(!moment.isMoment(n)){if(!moment.apply(moment,t).isValid())throw new Error("Invalid Date Format");n=moment.apply(moment,t)}return n},isSameDate:function(e,t){var n=this.toMoment(e).clone().startOf("days"),r=this.toMoment(t).clone().startOf("days");return Math.floor(n.diff(r))===0}}}(),t=function(){function t(t){this.languages=_.defaults(t||{},e)}var e={"\ub0b4 \uce98\ub9b0\ub354":"\ub0b4 \uce98\ub9b0\ub354","\uc77c\uc815 \ub4f1\ub85d":"\uc77c\uc815 \ub4f1\ub85d","\uc77c\uc815\uba85":"\uc77c\uc815\uba85","\uc77c\uc2dc":"\uc77c\uc2dc","\uc2dc\uac04":"\uc2dc\uac04","\ubd84":"\ubd84","\uc885\uc77c":"\uc885\uc77c","\ud655\uc778":"\ud655\uc778","\ucde8\uc18c":"\ucde8\uc18c","\uc77c\uc815\uc0c1\uc138 \uc785\ub825":"\uc77c\uc815\uc0c1\uc138 \uc785\ub825","\uae30\ubcf8 \uce98\ub9b0\ub354 \uc774\ub984":"{{username}}\uc758 \uc77c\uc815","\uae30\ubcf8 \uce98\ub9b0\ub354 \ud45c\uc2dc":"(\uae30\ubcf8)","\uc7a5\uc18c":"\uc7a5\uc18c","\uc804\uc0ac\uc77c\uc815":"\uc804\uc0ac\uc77c\uc815","\uc54c\ub9bc\uba54\uc77c \ud655\uc778":"\uc54c\ub9bc\uba54\uc77c \ud655\uc778","\uc77c\uc815\ub4f1\ub85d\uc5d0 \ub300\ud55c \uc54c\ub9bc\uba54\uc77c\uc744 \ubcf4\ub0b4\uc2dc\uaca0\uc2b5\ub2c8\uae4c?":"\uc77c\uc815\ub4f1\ub85d\uc5d0 \ub300\ud55c \uc54c\ub9bc\uba54\uc77c\uc744 \ubcf4\ub0b4\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","\ubcf4\ub0b4\uae30":"\ubcf4\ub0b4\uae30","\ubcf4\ub0b4\uc9c0 \uc54a\uc74c":"\ubcf4\ub0b4\uc9c0 \uc54a\uc74c"};return t.prototype.set=function(e,t){r.isPlainObject(e)?r.extend(!0,this.languages,e):this.languages[e]=t},t.prototype.get=function(e){return _.isUndefined(e)?this.languages:this.languages[e]},t}(),n=function(e,t){function h(e){s=moment(),this.options=e,this.contextRoot=e.contextRoot||"/",this.session=e.session||{},this.calendarId=e.calendarId,this.location=e.location||"",this.summary=e.summary||"",this.timeType=e.timeType||"timed",this.type=e.type||"normal",this.visibility=e.visibility||"public",this.startDate=e.startDate||s.format(u),this.endDate=e.endDate||this.startDate,this.startTime=e.startTime||Q().format(a),this.endTime=e.endTime||Q().add("hours",1).format(a),this.afterAddEvent=e.afterAddEvent||function(){},this.onCreateError=e.onCreateError||function(){},this.modal=e.modal||!1,this.width=e.width||f,e.returnType=="related"?this.returnType=!1:this.returnType=!0,this._sdate=moment(this.startDate+"T"+this.startTime+":00"),this._edate=moment(this.endDate+"T"+this.endTime+":00"),this.lang=new t(e.lang||{}),this.afterChangeCallbacks=r.Callbacks(),this.el=e.el,this.submitFlag=!1,this.changeEvent=e.changeEvent}function p(e){var t=this,n=this.contextRoot+"api/calendar/user/"+this.session.id+"/calendar";r.ajax(n).then(function(n){var i=[],s=[],o=_.filter(n.data||[],function(e){return e.type==="normal"}),u=_.filter(n.data||[],function(e){return e.type==="company"&&e.permission==1});u.length>0&&(r(e).find("#company_calendar").closest("tr").show(),_.each(u,function(e,t){s.push('<option value="',e.id,'">',e.name,"</option>")},t),r(e).find("select[name=companyId]").empty().append(s.join(""))),_.each(o,function(e,t){i.push('<option value="',e.id,'"',e.defaultCalendar?"selected":"",">",e.defaultCalendar?this.lang.get("\uae30\ubcf8 \uce98\ub9b0\ub354 \ud45c\uc2dc"):"",e.name||d.call(this,e.owner.name),"</option>")},t),t.type&&t.type=="company"&&r(e).find("input[name=companyType]").click(),r(e).find("select[name=calendarId]").empty().append(i.join("")),t.calendarId&&r(e).find("select[name=calendarId]").val(t.calendarId),t.timeType=="allday"&&r(e).find("input[name=timeType]").click()}).always(function(){t.preloader&&t.preloader.release()})}function d(e){var t=this.lang.get("\uae30\ubcf8 \uce98\ub9b0\ub354 \uc774\ub984");return t.replace(/\{\{username\}\}/,e),t}function v(e){e.find("#startDate").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,yearSuffix:"",onClose:_.bind(function(e){g.call(this,e),this.el.trigger("calendarDate:change")},this)}),e.find("#endDate").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,yearSuffix:"",onClose:_.bind(function(e){y.call(this,e),this.el.trigger("calendarDate:change")},this),minDate:this.startDate})}function m(){var e=r("#startDate").val(),t=r("#endDate").length?r("#endDate").val():r("#startDate").val(),n=r("#startDate").attr("data-prev"),i="",s=null;if(t){var a=moment(e+" "+r("#startTime").val(),o),f=moment(n+" "+r("#startTime").attr("data-prev"),o),l=moment(t+" "+r("#endTime").val(),o),h=l.diff(f,"minutes");h<c?(s=a.clone().add("minutes",h),i=s.format(u)):i=moment(t).format(u)}else i=moment(e).format(u);return r(this.el).find("#endDate").datepicker("setDate",i),r("#endTimeList").empty(),E.call(this,this.el,s),r(this.el).find("#endDate").datepicker("option","minDate",e),et.call(this,r("#endDate").val()),this}function g(e){var t={isDateDiff:r("#endDate").val()!==r("#startDate").val(),prevStartDate:this.startDate,prevEndDate:this.endDate};Z.call(this,r("#startDate").val()),m.call(this),this.afterChangeCallbacks.fire(),this.changeEvent&&this.changeEvent(t)}function y(e){var t={isDateDiff:r("#endDate").val()!==r("#startDate").val(),prevStartDate:this.startDate,prevEndDate:this.endDate},n=moment(e+" "+this.endTime,o);r("#startTimeList").empty(),r("#endTimeList").empty(),E.call(this,this.el,n);if(j()){G.call(this),this.afterChangeCallbacks.fire();return}et.call(this,e),this.afterChangeCallbacks.fire(),this.changeEvent&&this.changeEvent(t)}function b(e){var t=r.Deferred(),n,i=[];return this.returnType?i=[z.call(this),W.call(this),{btext:this.lang.get("\ucde8\uc18c"),btype:"cancel"}]:i=[W.call(this),{btext:this.lang.get("\ucde8\uc18c"),btype:"cancel"}],n={header:this.lang.get("\uc77c\uc815 \ub4f1\ub85d"),modal:this.modal,width:this.width,contents:K.call(this),buttons:i,closeCallback:function(e){r(".ui-droppable").removeClass("conti_schedule")}},!this.modal&&this.options.hasOwnProperty("offset")&&(n.offset=this.options.offset),this.el=r.goPopup(n),t.resolve(w(this.el)),t}function w(e){var t=e.offset(),n=e.outerWidth(),i=e.outerHeight(),s=t.left+n,o=t.top+i,u=r(window).width(),a=r(window).height();return s>u&&e.css("left",u-n-10),o>a&&e.css("top",a-i-10),e}function E(e){r(e).find("#startTimeList").empty().append(I.call(this,this.startTime)).end().find("#endTimeList").empty().append(q.call(this,this.startTime)).end(),r(e).find("#startTime").val(this.startTime),r(e).find("#endTime").val(this.endTime)}function S(e){r(e).on("submit","form[name=f_regist_event]",_.bind(M,this)).on("click",'input[name="timeType"]',_.bind(D,this)).on("click",'input[name="companyType"]',_.bind(P,this)).on("click","#startTime",_.bind(k,this)).on("click","#endTime",_.bind(k,this)).on("click","#startTimeList li",_.bind(L,this)).on("click","#endTimeList li",_.bind(L,this)).on("keydown","#startTime",_.bind(N,this)).on("keydown","#endTime",_.bind(N,this)).on("change","#startTime",_.bind(H,this)).on("change","#endTime",_.bind(B,this));var t={start:"end",end:"start"};r(document).off("click.outside-calendar"),r(document).on("click.outside-calendar",function(e){var n=r(e.target).attr("data-outside");n==undefined?(x(),C()):C(t[n])})}function x(){var e=r("#startTime"),t=r("#endTime");e.val(A(e.val())),t.val(A(t.val()))}function T(e){return parseInt(e.split(":").join(""))}function N(e){if(e.keyCode&&e.keyCode!=13)return;e.preventDefault();var t=O(e),n=r(e.currentTarget),i=n.val();r("#"+t+"TimeList").hide(),n.val(A(i)),n.attr("data-prev",A(i)),n.trigger("change")}function C(e){e?r("#"+e+"TimeList").hide():(r("#startTimeList").hide(),r("#endTimeList").hide())}function k(e){var t=O(e),n=r("#"+t+"TimeList"),i=r("#"+t+"Time");n.show();if(t=="start"){n.scrollTop(0);var s=n.find("li[data-value='"+i.val()+"']").position(),o=s?s.top:0;n.scrollTop(o)}}function L(e){var t=r(e.currentTarget),n=t.parent().attr("data-type"),i=t.text(),s=r("#"+n+"Time");r("#"+n+"TimeList").hide(),s.val(A(i)),s.attr("data-prev",A(i)),s.trigger("change")}function A(t){if(!t)return"";var n=/[^(0-9)]/gi;t=t.replace(n,""),t=t.substr(0,4);var r=t.substr(0,1);parseInt(r)>2&&(t="0"+t.substr(0,3));var i=t,s=i.substr(0,2),o=i.substr(2,2);o.length==0&&(o="00"),o.length==1&&(o="0"+o);var u=parseInt(s)<=23&&parseInt(s)>=0&&parseInt(o)<=59&&parseInt(o)>=0;return u?i=s+":"+o:i=e.hourMinute(),i}function O(e){var t=r(e.currentTarget),n=t.attr("id")=="startTime"?"start":"end";return n}function M(e){e.preventDefault()}function D(e){var t=r(e.delegateTarget).find(".wrap-selecttime");r(e.currentTarget).is(":checked")?t.hide():t.show()}function P(e){var t=r(e.delegateTarget).find("#compnay_event_list"),n=r(e.delegateTarget).find("#my_calendar").closest("tr");r(e.currentTarget).is(":checked")?(t.show(),n.hide()):(t.hide(),n.show())}function H(e){var t=A(r("#startTime").val()),n=moment(this._sdate.format("YYYY-MM-DDT")+t+":00"),i=this._edate.diff(this._sdate,"minutes",!0),s=moment(n).add("minutes",i);tt.call(this,t),r(e.delegateTarget).find("#startTimeList").empty().append(I.call(this,t)),r(e.delegateTarget).find("#endTimeList").empty().append(q.call(this,t)),r("#endTime").removeClass("error");var o=s.format("HH:mm"),u=r("#startDate").val(),a=r("#endDate").val();nt.call(this,o),u==a&&o<t&&et(s.format("YYYY-MM-DD")),this.afterChangeCallbacks.fire(),this.changeEvent&&this.changeEvent(!1)}function B(e){if(j()){G.call(this);return}nt.call(this,A(r("#endTime").val())),this.afterChangeCallbacks.fire(),this.changeEvent&&this.changeEvent(!1)}function j(){var e=r("#startDate").val(),t=r("#endDate").val()||e,n=r("#startTime").val(),i=r("#endTime").val(),s=A(n),o=A(i),u=moment(e+"T"+s+":00"),a=moment(t+"T"+o+":00");return u>a}function F(e,t){r.goError(t,e),e.addClass("enter error").focus()}function I(e){var t=30,n=moment().startOf("days"),r=60/t*24,i=[],s=0;typeof e=="string"&&(s=e.split(":")[1]),n.add("minutes",parseInt(s));for(var o=0;o<r;o++){var u=n.format("HH:mm");i.push('<li data-value="'+u+'">'+u+"</li>"),n.add("minutes",t)}return i.join("\n")}function q(t){var n=[],i=r("#startDate").val(),s=r("#startTime").val()||this.startTime,u=moment(i+" "+s,o),a=r("#endDate").length?r("#endDate").val():r("#startDate").val(),f=e.isSameDate(i,a),l=t,c=R.call(this,l);for(var h=0,p=c.length;h<p;h++){var d=c[h].time,v=moment(a+" "+d,o),m=Math.floor(v.diff(u,"hours",!0)*10)/10,g=null,y=!1;f&&m>=0&&m<1&&(g="("+m*60+this.lang.get("\ubd84")+")"),f&&m>=1&&(g="("+m+this.lang.get("\uc2dc\uac04")+")"),f&&m<0&&(y=!0);if(y)continue;var b=U().render({option_value:d,option_label:d,duration:g});n.push(b),l===d&&r("#endTime").val(l)}return n.join("\n")}function R(e){var t=s.startOf("days"),r=new Array(60/n*24),i=parseInt(e.split(":")[1])%30;t.add("minutes",parseInt(i));for(var o=0,u=r.length;o<u;o++)r[o]={time:t.format(a)},t.add("minutes",n);return _.where(r,{time:e}).length||(r.push({time:e}),r=_.sortBy(r,function(e){return parseInt((""+e.time).replace(":",""))})),r}function U(){var e=[];return e.push('<li data-value="{{option_label}}" data-outside><span class="txt" data-outside>'),e.push("{{option_label}}{{duration}}"),e.push("</span></li>"),Hogan.compile(e.join("\n"))}function z(){return{btext:this.lang.get("\uc77c\uc815\uc0c1\uc138 \uc785\ub825"),btype:"confirm",callback:_.bind(function(t){var n=[],r=t.find("input[name=timeType]:checked").val()||this.timeType,s=t.find('input[name="companyType"]:checked').val()||"public",o=t.find("input[name=summary]").val(),u=t.find("select[name=calendarId]").val(),a="calendar/regist",f=this._sdate,l=this._edate;i()||(a=e.fixedUrl(this.contextRoot+"/app/"+a)),!o||n.push("summary="+encodeURIComponent(o)),s=="company"&&(u=t.find("select[name=companyId]").val()),n.push("calendar="+u),n.push("tt="+r),n.push("ct="+s),n.push("sd="+f.format("YYYY-MM-DD")),n.push("ed="+l.format("YYYY-MM-DD")),n.push("location="+t.find("input[name=location]").val()),r==="timed"&&(n.push("st="+t.find("#startTime").val()),n.push("et="+t.find("#endTime").val())),e.navigate([a,n.join("&")].join("?"),{trigger:!0,pushState:!0})},this)}}function W(){return{btext:this.lang.get("\ud655\uc778"),btype:"confirm",autoclose:!1,callback:_.bind(function(e){var t=this,n=r(e),i=this.getCurrentTimeInfo(),s=moment(i.startTime),o=moment(i.endTime),u=[],a=J(r(e)),f=n.find("input[name=timeType]:checked").val()||"timed",l=n.find('input[name="companyType"]:checked').val()||"public";if(f==="allday"){var c=n.find("input[name=start_date]").val(),h=n.find("input[name=end_date]").val();s=moment(c,"YYYY-MM-DD").clone().startOf("day"),o=moment(h,"YYYY-MM-DD").clone().endOf("day")}if(a)return t.onCreateError(a),!1;if(this.submitFlag)return!1;this.submitFlag=!0;var p,d;l=="company"?(d="company",p=parseInt(r(e).find("select[name=companyId]").val())):(d="normal",p=parseInt(r(e).find("select[name=calendarId]").val()),u.push({id:this.session.id}));var v="YYYY-MM-DDTHH:mm:ss.SSSZ";f==="allday"&&(v="YYYY-MM-DDTHH:mm:ss.SSS"+this.session.serverTZOffset);var m=n.find("input[name=summary]").val();GO.util.isXSSPettern(m)&&(m=GO.util.escapeXssToBlank(m));var g={type:d,calendarId:p,attendees:u,timeType:f,summary:m,startTime:s.format(v),endTime:o.format(v),visibility:"public",timeZoneOffset:moment(new Date).format("Z"),location:n.find("input[name=location]").val()};l=="company"?X.call(this,g).done(function(){V.call(t,e,g,p)}):V.call(this,e,g,p)},this)}}function X(e){var t=this,n=r.Deferred();return r.goPopup({allowPrevPopup:!0,modal:!1,title:t.lang.get("\uc54c\ub9bc\uba54\uc77c \ud655\uc778"),message:t.lang.get("\uc77c\uc815\ub4f1\ub85d\uc5d0 \ub300\ud55c \uc54c\ub9bc\uba54\uc77c\uc744 \ubcf4\ub0b4\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"),buttons:[{btext:t.lang.get("\ubcf4\ub0b4\uae30"),btype:"confirm",callback:function(){r.extend(e,{mailNoti:!0}),n.resolve()}},{btext:t.lang.get("\ubcf4\ub0b4\uc9c0 \uc54a\uc74c"),btype:"normal",callback:function(){r.extend(e,{mailNoti:!1}),n.resolve()}}],closeCallback:function(){t.submitFlag=!1}}),n}function V(e,t,n){var i=this;i.returnType?r.ajax({url:i.contextRoot+"api/calendar/"+n+"/event",type:"POST",contentType:"application/json",data:JSON.stringify(t)}).done(function(t){e.close(),i.afterAddEvent(t.data)}).error(function(){i.onCreateError()}).always(function(){i.submitFlag=!1}):(e.close(),i.afterAddEvent(t))}function J(e){var t=e.find("input[name=summary]").val(),n=e.find("select[name=calendarId]").val();return t?t.length>l?"max:summary":n?!1:"required:calendarId":"required:summary"}function K(){var e=[];return e.push('<form name="f_regist_event">'),e.push("<fieldset>"),e.push('<table class="form_type go_renew">'),e.push("<tbody>"),e.push("<tr>"),e.push('<th><span class="title">'+this.lang.get("\uc77c\uc815\uba85")+'<ins class="asterisk">*</ins></span></span></th>'),e.push('<td><div class="wrap_txt w_max"><input class="txt_mini w_max" type="text" name="summary" value="'+this.summary+'"maxlength="500"></div></td>'),e.push("</tr>"),e.push("<tr>"),e.push('<th><span class="title">'+this.lang.get("\uc77c\uc2dc")+"</span></th>"),e.push("<td>"),e.push('<span class="wrap_date">'),e.push('<input id="startDate" class="start-date txt wfix_small" type="text" name="start_date" value="'+this.startDate+'" readonly="readonly">'),e.push('<span class="ic ic_calendar"></span>'),e.push("</span>"),e.push('<span class="wrap_multiselect wrap-selecttime">'),e.push('<span class="wrap_select">'),e.push('<span class="wrap_select_list">'),e.push('<input id="startTime" name="start_time" type="text" class="txt wfix_small" data-outside="start">'),e.push('<ul id="startTimeList" data-type="start" class="select_list" style="display:none" data-outside="start">'),e.push("</ul>"),e.push("</span>"),e.push("</span>"),e.push("</span>"),e.push('<span class="date_wave">~</span>'),e.push('<span class="wrap_date">'),e.push('<input id="endDate" class="end-date txt wfix_small" type="text" name="end_date" value="'+this.endDate+'" readonly="readonly">'),e.push('<span class="ic ic_calendar"></span>'),e.push("</span>"),e.push('<span class="wrap_multiselect wrap-selecttime">'),e.push('<span class="wrap_select">'),e.push('<span class="wrap_select_list">'),e.push('<input id="endTime" name="end_time" type="text" class="txt wfix_normal" data-outside="end">'),e.push('<ul id="endTimeList" data-type="end" class="select_list" style="display:none" data-outside="end">'),e.push("</ul>"),e.push("</span>"),e.push("</span>"),e.push("</span>"),e.push('<span class="horspace1"></span>'),e.push('<span class="wrap_option"><input id="checkbox-allday" type="checkbox" name="timeType" value="allday"><label for="checkbox-allday">'+this.lang.get("\uc885\uc77c")+"</label></span>"),e.push("</td>"),e.push("</tr>"),e.push('<tr style="display:none;">'),e.push('<th><span id="company_calendar" class="title">'+this.lang.get("\uc804\uc0ac\uc77c\uc815")+"</span></th>"),e.push("<td>"),e.push('<span class="wrap_option"><input id="checkbox-company" type="checkbox" name="companyType" value="company"><label for="checkbox-company">'+this.lang.get("\uc804\uc0ac\uc77c\uc815")+"</label></span><br>"),e.push('<span id="compnay_event_list" class="wrap_multiselect" style="display: none;">'),e.push('<span class="wrap_select"><select name="companyId"></select></span>'),e.push("</span>"),e.push("</td>"),e.push("</tr>"),e.push("<tr>"),e.push('<th><span id="my_calendar" class="title">'+this.lang.get("\ub0b4 \uce98\ub9b0\ub354")+"</span></th>"),e.push('<td class="">'),e.push('<span class="wrap_multiselect">'),e.push('<span class="wrap_select"><select name="calendarId"></select></span>'),e.push("</span>"),e.push("</td>"),e.push("</tr>"),e.push("<tr>"),e.push('<th><span class="title">'+this.lang.get("\uc7a5\uc18c")+"</span></th>"),e.push('<td><div class="wrap_txt w_max"><input class="txt_mini w_max" type="text" name="location" value="'+this.location+'"maxlength="500"></div></td>'),e.push("</tr>"),e.push("</tbody>"),e.push("</table>"),e.push("</fieldset>"),e.push("</form>"),e.join("\n")}function Q(e,t){var n=moment(e||new Date),r=n.isSame(new Date,"day")?n:n.clone().startOf("day"),i=60*(t||30);return moment(Math.ceil(Math.floor(r.valueOf()/1e3)/i)*i*1e3)}function G(){et.call(this,r("#startDate").val()),nt.call(this,r("#startTime").val())}function Y(e,t){e=="start"?tt.call(this,t):e=="end"&&nt.call(this,t)}function Z(e){r("#startDate").val(e),r("#startDate").attr("data-prev",e),this.startDate=e,this._sdate=moment(this.startDate+"T"+this.startTime+":00")}function et(e){r("#endDate").val(e),r("#endDate").attr("data-prev",e),this.endDate=e,this._edate=moment(this.endDate+"T"+this.endTime+":00")}function tt(e){r("#startTime").val(e),r("#startTime").attr("data-prev",e),this.startTime=e,this._sdate=moment(this.startDate+"T"+this.startTime+":00")}function nt(e){r("#endTime").val(e),r("#endTime").attr("data-prev",e),this.endTime=e,this._edate=moment(this.endDate+"T"+this.endTime+":00")}var n=30,s=moment(),o="YYYY-MM-DD HH:mm",u="YYYY-MM-DD",a="HH:mm",f=620,l=500,c=60;return h.prototype.open=function(){var e=this;this.preloader=null,r&&r.goPreloader&&(this.preloader=r.goPreloader(),this.preloader.render()),b.call(this).then(function(t){t.addClass("layer_calendar_speed"),v.call(e,t),E.call(e,t),p.call(e,t),S.call(e,t)})},h.prototype.init=function(){v.call(this,this.el),E.call(this,this.el),S.call(this,this.el)},h.prototype.afterChanged=function(e){this.afterChangeCallbacks.add(e)},h.prototype.getCurrentTimeInfo=function(){var e=r("#endDate"),t=e.length?e.val():r("#startDate").val();return{startTime:r("#startDate").val()+"T"+r("#startTime").val()+":00",endTime:t+"T"+r("#endTime").val()+":00"}},h.prototype.updateSelectedTime=function(e,t){var i=Q(e,n);return typeof t=="undefined"&&(t=i.clone().add("hours",1)),r("#startTime").attr("data-prev",i.format(a)),E.call(this,this.el),this},h.prototype.reset=function(e){r("#startDate").val(e.startDate),r("#startTime").val(e.startTime),r("#endDate").val(e.endDate),r("#endTime").val(e.endTime),r("#startDate").attr("data-prev",e.startDate),r("#startTime").attr("data-prev",e.startTime),r("#endDate").attr("data-prev",e.endDate),r("#endTime").attr("data-prev",e.endTime)},h.prototype.updatePrevDate=function(e){Z.call(this,e.prevStartDate),et.call(this,e.prevEndDate)},h}(e,t),{addSimpleEvent:function(e){var t=new n(e||{});t.open()},init:function(e){var t=new n(e||{});return t.init(),t}}},jQuery,_,moment);