jQuery.fn.makeUploadFrame=function(a){var b=jQuery(this);b.empty();b.html("<iframe name='"+a+"' id='"+a+"' src='about:blank' frameborder='0' width='1' height='1' style='width:1px;height:1px;'></iframe>")};function innerHtml(c,b){if(c){var a=(typeof c==="string"?document.getElementById(c):c);var d=document.createElement(a.nodeName);d.id=a.id;d.className=a.className;d.innerHTML=b;if(a.parentNode){a.parentNode.replaceChild(d,a)}else{a.innerHTML=b}return d}}var PageMainLoadingManager={processLoadStack:[],processCompleteStack:[],isWork:false,isFirst:true,initLoadView:function(){jQuery("#mbodyLoadMask").show();jQuery("#mbodyLoadContent").show();PageMainLoadingManager.isWork=true;jQuery("#mainWorkProgressBar").css("width","0%")},startLoad:function(a){if(PageMainLoadingManager.isFirst){PageMainLoadingManager.processLoadStack=a;setTimeout(PageMainLoadingManager.checkProgress,100)}PageMainLoadingManager.isFirst=false},checkProgress:function(){var a=PageMainLoadingManager.processLoadStack.length;var b=PageMainLoadingManager.processCompleteStack.length;var c=(b/a)*100;if(c>=100){c=100}jQuery("#mainWorkProgressBar").css("width",c+"%");if(c==100){setTimeout(PageMainLoadingManager.clearLoad,2000)}else{setTimeout(PageMainLoadingManager.checkProgress,100)}},clearLoad:function(){jQuery("#mbodyLoadMask").hide();jQuery("#mbodyLoadContent").hide();PageMainLoadingManager.isWork=false;PageMainLoadingManager.processLoadStack=[];PageMainLoadingManager.processCompleteStack=[]},completeWork:function(a){if(PageMainLoadingManager.isWork){PageMainLoadingManager.processCompleteStack.push(a)}}};var bodyMaskIsShown=false;var bodtMaskPaneId="";function addEvent(d,c,a){if(d.addEventListener){d.addEventListener(c,a,false);return true}else{if(d.attachEvent){var b=d.attachEvent("on"+c,a);return b}else{return false}}}function addEventAttach(id,evType,fn,exceptObjName){var obj=document.getElementById(id);if(obj.addEventListener){obj.addEventListener(evType,function(event){var eventTarget=(event.target)?event.target:event.srcElement;if(eventTarget.nodeName!=exceptObjName){eval(fn)}},false);return true}else{if(obj.attachEvent){var r=obj.attachEvent("on"+evType,function(event){var eventTarget=(event.target)?event.target:event.srcElement;if(eventTarget.nodeName!=exceptObjName){eval(fn)}});return r}else{return false}}}function getViewportHeight(){if(window.innerHeight!=window.undefined){return window.innerHeight}if(document.compatMode=="CSS1Compat"){return document.documentElement.clientHeight}if(document.body){return document.body.clientHeight}return window.undefined}function getViewportWidth(){var b=17;var a=null;if(window.innerWidth!=window.undefined){return window.innerWidth}if(document.compatMode=="CSS1Compat"){return document.documentElement.clientWidth}if(document.body){return document.body.clientWidth}}function setBodyMaskSize(){if(bodyMaskIsShown){var b=document.getElementsByTagName("BODY")[0];var a=getViewportHeight();var c=getViewportWidth();if(a>b.scrollHeight){popHeight=a}else{popHeight=b.scrollHeight}if(c>b.scrollWidth){popWidth=c}else{popWidth=b.scrollWidth}jQuery("#"+bodtMaskPaneId).css("height",popHeight+"px");if(!jQuery.browser.mozilla){jQuery("#"+bodtMaskPaneId).css("width",popWidth+"px")}}}addEvent(window,"resize",setBodyMaskSize);jQuery.makeBodyMask=function(b,a){bodyMaskIsShown=true;var c="smask";if(b){c=b}bodtMaskPaneId=c;jQuery("body").append(jQuery("<div>").attr("id",c).addClass((a)?"subMaskW":"subMask"));setBodyMaskSize()};var loadTimeout;jQuery.makeProcessBodyMask=function(c){jQuery("#mbodyLoadMask").show();var d=jQuery(window).width();var b=jQuery(window).height();jQuery("#mbodyLoadMask").css({width:d+"px",height:b+"px"});if(isMsie){window.document.body.scroll="no"}var a=jQuery("<div id='contentLoadMask'>");a.css("display","none");a.addClass("TM_c_loadding");jQuery("#mbodyLoadMask").append(a);var g=(b/2-a.height()/2);var f=(d/2-a.width()/2);jQuery("#contentLoadMask").css({top:g+"px",left:f+"px"});setTimeout(function(){jQuery("#contentLoadMask").show()},1);jQuery("object").hide();var e=(typeof(c)=="undefined")?5000:c;if(e>0){loadTimeout=setTimeout(function(){document.location.reload()},e)}};jQuery.removeProcessBodyMask=function(){jQuery("#mbodyLoadMask").remove();clearTimeout(loadTimeout);if(isMsie){window.document.body.scroll="auto";jQuery("object").show()}};jQuery.removeBodyMask=function(a){bodyMaskIsShown=false;var b="smask";if(a){b=a}bodtMaskPaneId="";jQuery("#"+b).remove()};function resizeMask(a,c){var b=jQuery(a).height();jQuery("#"+c).css("height",b+"px")}jQuery.fn.makeMask=function(b,c){var f="smask";if(b){f=b}var e=jQuery(this);e.append(jQuery("<div>").attr("id",f).addClass((c)?"subMaskW":"subMask"));var d=e.children().height();var a=jQuery("#"+f).height();if(d>a){jQuery("#"+f).css("height",d)}jQuery(e).bind("resize",function(h){var g=jQuery(this);resizeMask(g,f)});jQuery(e).css("overflow","hidden")};jQuery.fn.removeMask=function(a){var c="smask";if(a){c=a}jQuery("#"+c).remove();var b=jQuery(this);jQuery(b).unbind("resize",function(e){var d=(e.target)?jQuery(e.target):jQuery(e.srcElement);resizeMask(d,c)});jQuery(b).css("overflow","auto")};jQuery.fn.makeModal=function(i,e,b){var g=jQuery("body");var d=jQuery(this);var f=(e)?e:-1;var c=(b)?b:-1;function h(){var j=jQuery(window).height();var k=jQuery(window).width();var m=(f>0)?e:(j/2-d.height()/2);var l=(c>0)?b:(k/2-d.width()/2);d.css("top",m+"px");d.css("left",l+"px")}var a=d.attr("id");d.show();jQuery.makeBodyMask(i);jQuery("object:not(div#"+a+" object)").hide();jQuery("select:not(div#"+a+" select)").hide();g.bind("resize",h);h()};jQuery.fn.removeModal=function(d){var a=jQuery("body");var b=jQuery(this);function c(){}b.hide();jQuery.removeBodyMask(d);a.unbind("resize",c);jQuery("object").show();jQuery("select").show()};jQuery.fn.loadbar=function(a){if(a){jQuery("#"+a).css("overflow","hidden")}var b=jQuery(this);b.empty();var c=jQuery("<div><div>");c.css("text-align","center");c.append("<img src=''  >");b.append(c)};jQuery.fn.loadWorkMaskOnly=function(e,j){var c=jQuery(this);var d=jQuery("<div id='contentLoadMask'>");d.addClass("TM_c_loadding");jQuery("object").each(function(){var l=jQuery(this).attr("id");if(l.indexOf("SWFUpload")<0){jQuery(this).hide()}});jQuery("select").hide();c.makeMask("contentBodyMask",true);if(e){jQuery("#contentBodyMask").after(d);var b=c.outerHeight(true);var k=c.outerWidth();var g=c.children().outerHeight(true);var a=c.scrollTop();if(k==0){jQuery("#contentBodyMask").css("width",jQuery(window).width()+"px")}if(b==0){jQuery("#contentBodyMask").css("height",jQuery(window).height()+"px")}b=(b==0)?jQuery(window).height():b;k=(k==0)?jQuery(window).width():k;var h=(b/2-d.height()/2);var f=(k/2-d.width()/2);if(b<g&&a>0){var i=(g-b);if(i>a){i=i-a}h=h+i}d.css({top:h+"px",left:f+"px"})}};jQuery.fn.loadWorkMask=function(g,a){var e=jQuery(this);var b=e.attr("id");var f=jQuery("<div id='contentLoadMask'>");f.addClass("TM_c_loadding");e.makeMask("contentBodyMask",true);jQuery("object").hide();if(g){jQuery("#contentBodyMask").after(f);var d=e.outerHeight(true);var l=e.outerWidth(true);var i=e.children().outerHeight(true);var c=e.scrollTop();if(l==0){jQuery("#contentBodyMask").css("width",jQuery(window).width()+"px")}if(d==0){jQuery("#contentBodyMask").css("height",jQuery(window).height()+"px")}d=(d==0)?jQuery(window).height():d;l=(l==0)?jQuery(window).width():l;var j=(d/2-f.height()/2);var h=(l/2-f.width()/2);if(d<i&&c>0){var k=(i-d);if(k>c){k=k-c}j=j+k}f.css({top:j+"px",left:h+"px"})}if(a){jQuery("#"+a.cid).load(a.url,a.param,function(){if(a.exeFunction){a.exeFunction()}jQuery("#"+a.cid).removeWorkMask();jQuery("object").show();setTimeout(function(){ActionLoader.isloadAction=false},1000)})}else{ActionLoader.isloadAction=false}};jQuery.fn.removeWorkMask=function(){var a=jQuery(this);a.removeMask("contentBodyMask");jQuery("#contentLoadMask").remove()};jQuery.fn.makeSubMenu=function(c,d,f){var l=jQuery(this);l.css("position","relative");var a=jQuery("<div>");a.addClass("sub_menu_wrapper");var b="";if(c.width>0){a.css("width",(c.width+8)+"px");b=c.width+"px"}l.append(a);var g=1;var j=d.length;var h,e,k;jQuery.each(d,function(){var i=this.name;var m=this.link;k=jQuery("<div>");k.css("cursor","pointer");k.css("z-index","5");k.css("position","relative");k.addClass("sub_item");h=jQuery("<a href='javascript:;'></a>");e=jQuery("<span class='item_body jpf'></span>").append(i);if(c.width>0){e.css("width",b)}h.addClass("sitem");h.append(e.hover(function(){jQuery(this).addClass("item_body_over")},function(){jQuery(this).removeClass("item_body_over")}));h.click(function(n){jQuery(n.target).parent().parent().parent().hide();m(f)});k.append(h);a.append(k);g++})};var ActionLoader={};ActionLoader.isloadAction=false;ActionLoader.loadAction=function(c,b,g,h,d){ActionLoader.isloadAction=true;var a={};var e=false;if(g){a=g}if(d){e=d}var f={cid:c,url:b,param:a,exeFunction:e};jQuery("#"+c).loadWorkMask(h,f)};ActionLoader.postLoadAction=function(b,d,c,a){ActionLoader.isloadAction=true;jQuery.post(b,d,function(e,f){c(e,f)},a)};ActionLoader.requestGoUpdateAction=function(c,h,b,d,g,f,a,e){ActionLoader.isloadAction=true;jQuery.ajax({type:c,contentType:h,url:d+"?"+jQuery.param(g),async:b,success:function(i){f(i.data)},error:function(j){removeProcessLoader();var i=JSON.parse(j.responseText);if(e){e(i)}else{jQuery.goAlert(i.message)}},dataType:a})};ActionLoader.requestGoLoadAction=function(c,h,b,d,g,f,a,e){ActionLoader.isloadAction=true;jQuery.ajax({type:c,contentType:h,url:d,data:g,async:b,success:function(i){f(i.data)},error:function(j){removeProcessLoader();var i=JSON.parse(j.responseText);if(i.code=="401"){}else{if(e){e(i)}else{jQuery.goAlert(i.message)}}},dataType:a})};var formContentType="application/x-www-form-urlencoded; charset=UTF-8";var jsonContentType="application/json; charset=UTF-8";ActionLoader.getGoLoadAction=function(b,e,d,a,c){ActionLoader.requestGoLoadAction("GET",formContentType,true,b,e,d,a,c)};ActionLoader.getSyncGoLoadAction=function(b,e,d,a,c){ActionLoader.requestGoLoadAction("GET",formContentType,false,b,e,d,a,c)};ActionLoader.postGoLoadAction=function(b,e,d,a,c){ActionLoader.requestGoLoadAction("POST",formContentType,true,b,e,d,a,c)};ActionLoader.putGoLoadAction=function(b,e,d,a,c){ActionLoader.requestGoUpdateAction("PUT",jsonContentType,true,b,e,d,a,c)};ActionLoader.postSyncGoLoadAction=function(b,e,d,a,c){ActionLoader.requestGoLoadAction("POST",formContentType,false,b,e,d,a,c)};ActionLoader.postGoJsonLoadAction=function(b,e,d,a,c){ActionLoader.requestGoLoadAction("POST",jsonContentType,true,b,JSON.stringify(e),d,a,c)};ActionLoader.postSyncGoJsonLoadAction=function(b,e,d,a,c){ActionLoader.requestGoLoadAction("POST",jsonContentType,false,b,JSON.stringify(e),d,a,c)};ActionLoader.putGoJsonLoadAction=function(b,e,d,a,c){ActionLoader.requestGoLoadAction("PUT",jsonContentType,true,b,JSON.stringify(e),d,a,c)};var ActionNotMaskLoader={};ActionNotMaskLoader.loadAction=function(c,b,e,d){ActionLoader.isloadAction=true;var a={};if(e){a=e}$(c).scrollTop=0;jQuery("#"+c).load(b,a,function(){if(d){d()}ActionLoader.isloadAction=false})};var ActionBasicLoader={};ActionBasicLoader.loadAction=function(b,a,c){jQuery("#"+b).load(a,c)};jQuery.fn.selectboxSetIndex=function(a){var f=jQuery(this);var b=f.attr("id");var c=jQuery("#"+b+"_selectMain").data("selectId");var g=f.find(".selectItem");var e,h;for(var d=0;d<g.length;d++){e=jQuery(g[d]).removeClass("jselect_listselect");h=e.attr("selectValue");if(d==a){e.addClass("jselect_listselect");jQuery("#"+c).val(h);jQuery("#"+b+"_selectText").html(e.html())}}};jQuery.fn.selectboxSetValue=function(f){var e=jQuery(this);var a=e.attr("id");var b=jQuery("#"+a+"_selectMain").data("selectId");var g=e.find(".selectItem");var d,h;for(var c=0;c<g.length;c++){d=jQuery(g[c]).removeClass("jselect_listselect");h=d.attr("selectValue");if(h==f){d.addClass("jselect_listselect");jQuery("#"+b).val(f);jQuery("#"+a+"_selectText").html(d.html())}}};jQuery.fn.selectboxGetText=function(h){var d=jQuery(this);var b=d.attr("id");var j=jQuery("#"+b+"_selectMain").data("selectId");var g=d.find(".selectItem");var f,c;var a="";for(var e=0;e<g.length;e++){f=jQuery(g[e]);c=f.attr("selectValue");if(c==h){a=f.html();break}}return a};jQuery.fn.selectboxGetOptionsCount=function(){var c=jQuery(this);var a=c.attr("id");var b=jQuery("#"+a+"_selectMain").data("selectId");var d=c.find(".selectItem");if(!d||!d.length){return 0}else{return d.length}};jQuery.fn.selectboxDisable=function(){var b=jQuery(this);var a=b.attr("id");b.data("use","F");jQuery("#"+a+"_selectMain").css("background","#EFEFEF")};jQuery.fn.selectboxEnable=function(){var b=jQuery(this);var a=b.attr("id");b.data("use","T");jQuery("#"+a+"_selectMain").css("background","#FFFFFF")};jQuery.fn.selectbox=function(b,z,q){var d=b.selectId;var u=b.selectFunc;var t=(jQuery.browser.msie&&jQuery.browser.version<7);var a=jQuery(this);var k=a.attr("id");var f="off";function n(){if("F"!=a.data("use")){var A=jQuery("#"+k+"_selectList").height();var i=jQuery("#"+k+"_selectList");if(b.height){A=b.height}else{if(A>150){A=150}}i.css("height",A+"px");if(f=="off"){f="on";if(t){jQuery("#"+k+"_sbgFrame").show()}i.show()}else{f="off";if(t){jQuery("#"+k+"_sbgFrame").hide()}i.hide()}if(t){jQuery("#"+k+"_sbgFrame").css("height",(A-1)+"px")}}}function g(){if(f=="on"){jQuery("#"+k+"_selectList").show();if(t){jQuery("#"+k+"_sbgFrame").show()}}}function h(){f="off";jQuery("#"+k+"_selectList").hide();if(t){jQuery("#"+k+"_sbgFrame").hide()}}function o(C,B,A){var i=jQuery("#"+k+"_selectList div.selectItem").removeClass("jselect_listselect");jQuery("#"+A).addClass("jselect_listselect");jQuery("#"+k+"_selectText").html(C).attr("title",unescape_tag_title(C));jQuery("#"+d).val(B);if(u){u(B)}}a.data("use","T");var w=jQuery("<div class='jselect'>").attr("id",k+"_selectMain").hover(function(){clearTimeout(a.data("timeout"));g()},function(){a.data("timeout",setTimeout(function(){h()},100))});var e=jQuery("<div class='selectContent jpf'>").attr("id",k+"_selectText").click(function(){n()});var m=jQuery("<div class='selectIcon'></div>").attr("id",k+"_selectIcon").click(function(){n()});w.append(e).append(m);var v=jQuery("<div style='position:relative;' id='"+k+"_listWraaper'></div>");if(t){v.append("<iframe frameborder='0' tabindex='-1' class='bgFrame' id='"+k+"_sbgFrame'></iframe>")}var l=jQuery("<div class='selectList jpf'>").attr("id",k+"_selectList");if(b.width){l.css("width",b.width+"px")}var c="";var y="";var p=false;var j;for(var x=0;x<q.length;x++){c="";if(x==0){y=q[x].index;if(!z||z==""){z=q[x].value;p=true}}if(q[x].value==z){c="jselect_listselect";y=q[x].index;p=true}j=q[x].index;if(b.textMaxLength){if(b.textMaxLength<j.length){j=j.substring(0,b.textMaxLength);j+="..."}}l.append(jQuery("<div class='selectItem jpf'></div>").attr("id",k+"_sList_Item_"+x).attr("selectValue",q[x].value).addClass(c).hover(function(){g();jQuery(this).addClass("jselect_listover")},function(){jQuery(this).removeClass("jselect_listover")}).click(function(){h();o(escape_tag(jQuery(this).text()),jQuery(this).attr("selectValue"),jQuery(this).attr("id"))}).attr("title",unescape_tag_title(q[x].index)).append((b.unescape)?j:escape_tag(j)))}v.append(l);w.append(jQuery("<div class='cls'></div>"));w.append(v);a.append(w);a.append(jQuery("<input type='hidden' name='"+d+"' id='"+d+"' value='"+z+"'>"));w.data("selectId",d);if(!p){jQuery("#"+k+"_sList_Item_0").addClass("jselect_listselect");z=jQuery("#"+k+"_sList_Item_0").attr("selectValue");jQuery("#"+d).val(z)}if(b.textMaxLength){if(b.textMaxLength<y.length){y=y.substring(0,b.textMaxLength);y+="..."}}jQuery("#"+k+"_selectText").html(escape_tag(y)).attr("title",y);var s;if(b.width){var s=b.width;jQuery("#"+k+"_selectList").css("width",s+"px");jQuery("#"+k+"_selectMain").css("width",s+"px");jQuery("#"+k+"_selectText").css("width",(s-27)+"px")}else{var r=jQuery("#"+k+"_selectMain").width();s=jQuery("#"+k+"_selectList").width();s=s+17;jQuery("#"+k+"_selectList").css("width",s+"px");if(s>r){jQuery("#"+k+"_selectMain").css("width",s+"px");jQuery("#"+k+"_selectText").css("width",(s-jQuery("#"+k+"_selectIcon").width()-10)+"px")}}if(t){jQuery("#"+k+"_sbgFrame").css("width",(s-1)+"px")}jQuery("#"+k+"_listWraaper").css("width",s+"px");jQuery("#"+k+"_selectList").css("overflow-X","hidden");jQuery("#"+k+"_selectList").css("overflow-Y","auto")};function makeForm(a,c,e,d){var b=jQuery("<div id='"+a+"FormLayer'><form name='"+a+"' id='"+a+"' method='"+e+"' action='"+c+"'></form></div>");jQuery("body").append(b);if(d){jQuery.each(d,function(g,h){if(jQuery.isArray(h)){for(var f=0;f<h.length;f++){jQuery("#"+a).append(jQuery("<input type='hidden' name='"+g+"' id='"+a+g+f+"'/>"))}}else{jQuery("#"+a).append(jQuery("<input type='hidden' name='"+g+"' id='"+a+g+"'/>"))}})}if(d){jQuery.each(d,function(g,h){if(g&&h){if(jQuery.isArray(h)){for(var f=0;f<h.length;f++){$(a+g+f).value=h[f]}}else{$(a+g).value=h}}})}return $(a)}function showPopupDialog(b,a){jQuery("#"+b).dialog(a);jQuery("#"+b).dialog("open")}function hidePopupDialog(a){jQuery("#"+a).dialog("close")}jQuery.fn.dropDownMenu=function(d){d=(!d)?{}:d;var h=(!d.timeout)?1000:d.timeout;var i=(!d.selecter)?"li":d.selecter;var j;var a;var f=this;function g(){b();a=jQuery(f).show()}function c(){if(a){a.hide()}jQuery(d.clickObj).unbind("mouseover");jQuery(d.clickObj).unbind("mouseout");jQuery(f).find(i).unbind("mouseover");jQuery(f).find(i).unbind("mouseout")}function e(){j=window.setTimeout(c,h)}function b(){window.clearTimeout(j);j=null}if(d.clickObj){jQuery(d.clickObj).bind("mouseover",b);jQuery(d.clickObj).bind("mouseout",e)}jQuery(f).find(i).bind("mouseover",g);jQuery(f).find(i).bind("mouseout",e);g()};var HistoryControl=function(a){this.historyIdx=0;this.History=window.History;this.History.Adapter.bind(window,"statechange",function(){a(this.History.getState())});this.setHistory=function(b){b.state=this.historyIdx;this.historyIdx++;this.History.pushState(b,TITLENAME,"?state="+this.historyIdx)};this.getHistoryIndex=function(){return this.historyIdx}};var EventControl=function(a,d,e,c){var b=this;this.events={};this.options=c||{};this.eventKey=this.options.eventKey||"evt-rol";jQuery(a).on(d,e,function(f){var g=jQuery(this).attr(b.eventKey);if(!g){return}if(f.stopPropagation){f.stopPropagation()}else{f.cancelBubble=true}if(b.options.everyPreFunc){b.options.everyPreFunc()}b.trigger(g,this)});if(this.options.initFunc){this.options.initFunc()}this.add=function(f,g){this.events[f]=g};this.trigger=function(f,h){var g=this.events[f];if(!g){return}if(typeof g==="function"){g(h)}else{if(typeof g==="string"){window[g](h)}}}};(function(a){a.fn.extend({autocomplete:function(b,c){var d=typeof b=="string";c=a.extend({},a.Autocompleter.defaults,{url:d?b:null,data:d?null:b,delay:d?a.Autocompleter.defaults.delay:10,max:c&&!c.scroll?10:150,noRecord:"No Records."},c);c.highlight=c.highlight||function(e){return e};c.formatMatch=c.formatMatch||c.formatItem;return this.each(function(){new a.Autocompleter(this,c)})},result:function(b){return this.bind("result",b)},search:function(b){return this.trigger("search",[b])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(b){return this.trigger("setOptions",[b])},unautocomplete:function(){return this.trigger("unautocomplete")}});a.Autocompleter=function(l,g){var c={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var i=null;if(g.failure!=null&&typeof g.failure=="function"){i=g.failure}var b=a(l).attr("autocomplete","off").addClass(g.inputClass);var q="";var m=a.Autocompleter.Cache(g);var e=0;var v;var s=(g.autoResizeWidth?b.width():0);var y={mouseDownOnSelect:false};var r=a.Autocompleter.Select(g,l,d,y);var x;navigator.userAgent.indexOf("Opera")!=-1&&a(l.form).bind("submit.autocomplete",function(){if(x){x=false;return false}});b.keyup(function(z){e=1;v=z.keyCode;switch(z.keyCode){case c.UP:if(r.visible()){z.preventDefault();r.prev()}else{u(0,true)}break;case c.DOWN:if(r.visible()){z.preventDefault();r.next()}else{u(0,true)}break;case c.PAGEUP:if(r.visible()){z.preventDefault();r.pageUp()}else{u(0,true)}break;case c.PAGEDOWN:if(r.visible()){z.preventDefault();r.pageDown()}else{u(0,true)}break;case c.TAB:case c.RETURN:if(d()){z.preventDefault();x=true;return false}break;case c.ESC:r.hide();break;default:clearTimeout(A);var A=setTimeout(u,g.delay);break}}).keydown(function(A){var C=A.which==9;var z=isRcptModeNormal&&!isRcptModeNoneAC;var B=jQuery("#"+b.attr("id")+"_actb").css("display")=="block";if(z&&C&&B){A.preventDefault()}}).focus(function(){e++}).blur(function(){e=0;if(!y.mouseDownOnSelect){t()}}).click(function(){if(g.clickFire){if(!r.visible()){u(0,true)}}else{if(e++>1&&!r.visible()){u(0,true)}}}).bind("search",function(){var z=(arguments.length>1)?arguments[1]:null;function A(E,D){var B;if(D&&D.length){for(var C=0;C<D.length;C++){if(D[C].result.toLowerCase()==E.toLowerCase()){B=D[C];break}}}if(typeof z=="function"){z(B)}else{b.trigger("result",B&&[B.data,B.value])}}a.each(h(b.val()),function(B,C){f(C,A,A)})}).bind("flushCache",function(){m.flush()}).bind("setOptions",function(){a.extend(true,g,arguments[1]);if("data" in arguments[1]){m.populate()}}).bind("unautocomplete",function(){r.unbind();b.unbind();a(l.form).unbind(".autocomplete")});function d(){var C=r.selected();if(!C){if(g.makeFormat){var E=a.trim(b.val());if(E!=""){C=E}else{return false}}else{return false}}var z=C;q=z;if(g.multiple){var G=h(b.val());if(G.length>1){var B=g.multipleSeparator.length;var F=a(l).selection().start;var D,A=0;a.each(G,function(H,I){A+=I.length;if(F<=A){D=H;return false}A+=B});G[D]=z;z=G.join(g.multipleSeparator)}z+=g.multipleSeparator}if(g.makeFormat){if(g.editMode){g.editModeFunc(b,z)}else{g.makeFormatFunc(b,z)}}else{b.val(z)}if(g.autoResizeWidth){b.width(s)}w();b.trigger("result",[C.data,C.value]);return true}function u(C,B){if(v==c.DEL){r.hide();return}var z=b.val();r.setImeMode((validateHan(z))?"etc":"en");if(!B&&z==q){return}if(g.autoResizeWidth){var A=jQuery("#writeStrWidth");A.text(z);if(A.outerWidth()+50>b.width()){b.width(A.outerWidth()+50)}}q=z;z=j(z);if(z.length>=g.minChars){b.addClass(g.loadingClass);if(!g.matchCase){z=z.toLowerCase()}if(z!=""){f(z,k,w)}}else{n();r.hide()}}function h(D){if(!D){return[""]}var A=D.split(g.multipleSeparator);var E=[];var B;for(var C=0;C<A.length;C++){if(A[C].indexOf(g.multipleSeparatorEtc)>-1){B=A[C].split(g.multipleSeparatorEtc);a.each(B,function(F,G){if(a.trim(G)){E[E.length]=G}})}else{E[E.length]=A[C]}}var z=[];a.each(E,function(F,G){if(a.trim(G)){z[F]=a.trim(G)}});return z}function j(z){if(!g.multiple){return z}var B=h(z);if(B.length==1){return B[0]}var A=a(l).selection().start;if(A==z.length){B=h(z)}else{B=h(z.replace(z.substring(A),""))}var C=(B&&B.length>0)?B[B.length-1]:"";return C}function p(z,A){if(g.autoFill&&(j(b.val()).toLowerCase()==z.toLowerCase())&&v!=c.BACKSPACE){b.val(b.val()+A.substring(j(q).length));a(l).selection(q.length,q.length+A.length)}}function t(){clearTimeout(z);var z=setTimeout(w,200)}function w(){var z=r.visible();r.hide();n();if(g.mustMatch){b.search(function(A){if(!A){if(g.multiple){var B=h(b.val()).slice(0,-1);b.val(B.join(g.multipleSeparator)+(B.length?g.multipleSeparator:""))}else{b.val("");b.trigger("result",null)}}})}}function k(A,z){if(z&&z.length&&e){n();r.display(z,A);p(A,z[0].value);r.show()}else{w()}}function f(A,C,z){if(!g.matchCase){A=A.toLowerCase()}var B=m.load(A);if(B&&B.length){C(A,B)}else{if((typeof g.url=="string")&&(g.url.length>0)){var D={timestamp:+new Date()};a.each(g.extraParams,function(E,F){D[E]=typeof F=="function"?F():F});jQuery.post(g.url,{keyword:j(A),notContact:g.notContact},function(E){if(E.code=="200"){if(E.data&&A==q){m.add(A,E.data);C(A,E.data)}}},"json")}else{r.emptyList();if(i!=null){i()}else{z(A)}}}}function o(C){var z=[];var B=C.split("\n");for(var A=0;A<B.length;A++){var D=a.trim(B[A]);if(D){D=D.split("|");z[z.length]={data:D,value:D[0],result:g.formatResult&&g.formatResult(D,D[0])||D[0]}}}return z}function n(){b.removeClass(g.loadingClass)}};a.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:100,matchCase:false,matchSubset:false,matchContains:true,cacheLength:10,max:1000,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(b){return b},formatMatch:null,autoFill:false,width:0,multiple:true,multipleSeparator:",",multipleSeparatorEtc:";",inputFocus:true,clickFire:false,highlight:function(c,b){c=c.split("<").join("&lt;");c=c.split(">").join("&gt;");if(b!=""){return c.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+b.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")}else{return c}},scroll:true,scrollHeight:80,scrollJumpPosition:true,autoResizeWidth:false,makeFormat:false,makeFormatFunc:null,editMode:false,editModeFunc:null};a.Autocompleter.Cache=function(c){var f={};var d=0;function h(l,k){if(!c.matchCase){l=l.toLowerCase()}var j=l.indexOf(k);if(c.matchContains=="word"){j=l.toLowerCase().search("\\b"+k.toLowerCase())}if(j==-1){return false}return j==0||c.matchContains}function g(j,i){if(d>c.cacheLength){b()}if(!f[j]){d++}f[j]=i}function e(){if(!c.data){return false}var k={},j=0;if(!c.url){c.cacheLength=1}k[""]=[];for(var m=0,l=c.data.length;m<l;m++){var p=c.data[m];p=(typeof p=="string")?[p]:p;var o=c.formatMatch(p,m+1,c.data.length);if(typeof(o)==="undefined"||o===false){continue}var n=o.charAt(0).toLowerCase();if(!k[n]){k[n]=[]}var q={value:o,data:p,result:c.formatResult&&c.formatResult(p)||o};k[n].push(q);if(j++<c.max){k[""].push(q)}}a.each(k,function(r,s){c.cacheLength++;g(r,s)})}setTimeout(e,25);function b(){f={};d=0}return{flush:b,add:g,populate:e,load:function(n){if(!c.cacheLength||!d){return null}if(!c.url&&c.matchContains){var m=[];for(var j in f){if(j.length>0){var o=f[j];a.each(o,function(p,k){if(h(k.value,n)){m.push(k)}})}}return m}else{if(f[n]){return f[n]}else{if(c.matchSubset){for(var l=n.length-1;l>=c.minChars;l--){var o=f[n.substr(0,l)];if(o){var m=[];a.each(o,function(p,k){if(h(k.value,n)){m[m.length]=k}});return m}}}}}return null}}};a.Autocompleter.Select=function(e,k,m,q){var j={ACTIVE:"ac_over"};var l,g=-1,s,n="",t=true,c,p,f;function o(){if(!t){return}c=a("<div class='layer_auto_complete' data-outside='"+a(k).attr("id")+"'/>").hide().addClass(e.resultsClass).css("position","absolute").css("overflow","auto").attr("id",a(k).attr("id")+"_actb").appendTo(document.body).hover(function(u){if(a(this).is(":visible")){k.focus()}q.mouseDownOnSelect=false});p=a("<ul class='layer_auto_complete'/>").appendTo(c).mouseover(function(u){if(r(u).nodeName&&r(u).nodeName.toUpperCase()=="LI"){g=a("li",p).removeClass(j.ACTIVE).index(r(u));a(r(u)).addClass(j.ACTIVE)}}).click(function(u){a(r(u)).addClass(j.ACTIVE);m();if(e.inputFocus){k.focus()}jQuery(k).css("ime-mode",(f=="etc")?"active":"auto");return false}).mousedown(function(){q.mouseDownOnSelect=true}).mouseup(function(){q.mouseDownOnSelect=false});if(e.width>0){c.css("width",e.width)}t=false}function r(v){var u=v.target;while(u&&u.tagName!="LI"){u=u.parentNode}if(!u){return[]}return u}function i(u){l.slice(g,g+1).removeClass(j.ACTIVE);h(u);var w=l.slice(g,g+1).addClass(j.ACTIVE);if(e.scroll){var v=0;l.slice(0,g).each(function(){v+=this.offsetHeight});if((v+w[0].offsetHeight-p.scrollTop())>p[0].clientHeight){p.scrollTop(v+w[0].offsetHeight-p.innerHeight())}else{if(v<p.scrollTop()){p.scrollTop(v)}}}}function h(u){if(e.scrollJumpPosition||(!e.scrollJumpPosition&&!((u<0&&g==0)||(u>0&&g==l.size()-1)))){g+=u;if(g<0){g=l.size()-1}else{if(g>=l.size()){g=0}}}}function b(u){return e.max&&e.max<u?e.max:u}function d(){p.empty();var v=b(s.length);for(var w=0;w<v;w++){if(!s[w]){continue}if(s[w].result){continue}var x=e.formatItem(s[w],w+1,v,s[w],n);if(x===false){continue}var u=a("<li/>").html(e.highlight(x,n)).addClass(w%2==0?"ac_even":"ac_odd").appendTo(p)[0];a.data(u,"ac_data",s[w])}l=p.find("li");if(e.selectFirst){l.slice(0,1).addClass(j.ACTIVE);g=0}if(a.fn.bgiframe){p.bgiframe()}}return{display:function(v,u){o();s=v;n=u;d()},next:function(){i(1)},prev:function(){i(-1)},pageUp:function(){if(g!=0&&g-8<0){i(-g)}else{i(-8)}},pageDown:function(){if(g!=l.size()-1&&g+8>l.size()){i(l.size()-1-g)}else{i(8)}},hide:function(){c&&c.hide();l&&l.removeClass(j.ACTIVE);g=-1},visible:function(){return c&&c.is(":visible")},current:function(){return this.visible()&&(l.filter("."+j.ACTIVE)[0]||e.selectFirst&&l[0])},show:function(){var y=a(k).offset();var x=navigator.userAgent.toLowerCase();var v=k.offsetHeight;if(x.indexOf("firefox")!=-1){v=k.offsetHeight-6}c.css({width:typeof e.width=="string"||e.width>0?e.width:a(k).width(),top:y.top+v,left:y.left}).show();if(e.scroll){p.scrollTop(0);p.css({maxHeight:e.scrollHeight,overflow:"auto"});if(navigator.userAgent.indexOf("MSIE")!=-1&&typeof document.body.style.maxHeight==="undefined"){var u=0;l.each(function(){u+=this.offsetHeight});var w=u>e.scrollHeight;p.css("height",w?e.scrollHeight:u);if(!w){l.width(p.width()-parseInt(l.css("padding-left"))-parseInt(l.css("padding-right")))}}}},selected:function(){var u=l&&l.filter("."+j.ACTIVE).removeClass(j.ACTIVE);return u&&u.length&&a.data(u[0],"ac_data")},emptyList:function(){p&&p.empty()},unbind:function(){c&&c.remove()},setImeMode:function(u){f=u}}};a.fn.selection=function(i,b){if(i!==undefined){return this.each(function(){if(this.createTextRange){var j=this.createTextRange();if(b===undefined||i==b){j.move("character",i);j.select()}else{j.collapse(true);j.moveStart("character",i);j.moveEnd("character",b);j.select()}}else{if(this.setSelectionRange){this.setSelectionRange(i,b)}else{if(this.selectionStart){this.selectionStart=i;this.selectionEnd=b}}}})}var g=this[0];if(g.createTextRange){var c=document.selection.createRange(),h=g.value,f="<->",d=c.text.length;c.text=f;var e=g.value.indexOf(f);g.value=h;this.selection(e,e+d);return{start:e,end:e+d}}else{if(g.selectionStart!==undefined){return{start:g.selectionStart,end:g.selectionEnd}}}}})(jQuery);(function(c){var a=["swfupload_loaded_handler","file_queued_handler","file_queue_error_handler","file_dialog_start_handler","file_dialog_complete_handler","upload_start_handler","upload_progress_handler","upload_error_handler","upload_success_handler","upload_complete_handler","queue_complete_handler"];var b=[];c.fn.swfupload=function(){var d=c.makeArray(arguments);return this.each(function(){var g;if(d.length==1&&typeof(d[0])=="object"){g=c(this).data("__swfu");if(!g){var i=d[0];var h=c(this);var f=[];c.merge(f,a);c.merge(f,b);c.each(f,function(l,k){var j=k.replace(/_handler$/,"").replace(/_([a-z])/g,function(){return arguments[1].toUpperCase()});i[k]=function(){var m=c.Event(j);h.trigger(m,c.makeArray(arguments));return !m.isDefaultPrevented()}});c(this).data("__swfu",new SWFUpload(i))}}else{if(d.length>0&&typeof(d[0])=="string"){var e=d.shift();g=c(this).data("__swfu");if(g&&g[e]){g[e].apply(g,d)}}}})};c.swfupload={additionalHandlers:function(){if(arguments.length===0){return b.slice()}else{c(arguments).each(function(e,d){c.merge(b,c.makeArray(d))})}},defaultHandlers:function(){return a.slice()},getInstance:function(d){return c(d).data("__swfu")}}})(jQuery);jQuery.fn.bindAll=function(a){var b=this;jQuery.each(a,function(c,d){b.bind(c,d)});return this};jQuery.fn.unbindAll=function(a){var b=this;jQuery.each(a,function(c,d){b.unbind(c,d)});return this};var SimpleBasicControl=function(a){this.opt=a;this.init=function(){var b=this.opt};this.makeBtnControl=function(){var c=this.opt;var b="font-family:돋움,dotum,AppleGothic,arial,Helvetica,sans-serif";if(this.opt.locale=="jp"){b="font-family:MS PGothic,Osaka,arial,sans-serif !important"}jQuery("#swfupload-control").swfupload({file_post_name:"NewFile",upload_url:"/api/mail/image/upload",file_size_limit:"10240",file_types:"*.jpg;*.gif;*.png;*.bmp",file_types_description:"",file_upload_limit:"0",flash_url:BASEURL+"resources/js/plugins/mail/swfupload/swfupload.swf",post_params:{maxImageSize:"1024000",uploadType:"flash"},button_cursor:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,button_text:"<span class='buttonText'>"+mailMsg.common_upload_picture+"</span>",button_text_style:".buttonText {color:#ffffff;font-size:12px;font-weight:bold;font-family:"+b+"}",button_width:100,button_height:20,button_text_top_padding:1,button_text_left_padding:(this.opt.locale=="ko")?15:5,button_placeholder:jQuery("#button")[0],debug:false}).bind("swfuploadLoaded",function(d){}).bind("fileQueued",function(e,d){jQuery(this).swfupload("startUpload")}).bind("fileQueueError",function(f,d,g,e){}).bind("fileDialogStart",function(d){}).bind("fileDialogComplete",function(e,d,f){}).bind("uploadStart",function(f,e){var g=new RegExp("(.jpg|.gif|.png|.bmp)","gi"),d=e.type.toLowerCase();if(!g.test(d)){jQuery.goMessage(mailMsg.conf_sign_8);jQuery(this).swfupload("cancelUpload")}}).bind("uploadProgress",function(f,d,e){}).bind("uploadSuccess",function(g,f,e){var d=jQuery.parseJSON(e);if(d.errorMessage==""){jQuery("#thumbnail_image").attr("src",d.fileURL).attr("img-data",d.filePath).attr("img-name",d.fileName);jQuery("#vcard_img_delete").show()}else{jQuery.goSlideMessage(d.errorMessage,"caution")}}).bind("uploadComplete",function(e,d){}).bind("uploadError",function(f,d,g,e){})};this.destroy=function(){try{jQuery("#swfupload-control").swfupload("destroy")}catch(b){}}};var SignSettingControl=function(a){this.opt=a;this.init=function(){var b=this.opt};this.makeBtnControl=function(){var c=this.opt;var b="font-family:돋움,dotum,AppleGothic,arial,Helvetica,sans-serif";if(this.opt.locale=="jp"){b="font-family:MS PGothic,Osaka,arial,sans-serif !important"}jQuery("#swfupload-control").swfupload({file_post_name:"NewFile",upload_url:"/api/mail/image/upload",file_size_limit:"10240",file_types:"*.jpg;*.gif;*.png;*.bmp",file_types_description:"",file_upload_limit:"0",flash_url:BASEURL+"resources/js/plugins/mail/swfupload/swfupload.swf",post_params:{maxImageSize:"1024000",uploadType:"flash"},button_cursor:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,button_text:"<span class='buttonText'>"+mailMsg.comn_file_select+"</span>",button_text_style:".buttonText {color:#656565;font-size:12px;font-weight:bold;font-family:"+b+"}",button_width:(this.opt.locale=="jp")?90:73,button_height:26,button_text_top_padding:4,button_text_left_padding:7,button_placeholder:jQuery("#button")[0],debug:false}).bind("swfuploadLoaded",function(d){}).bind("fileQueued",function(e,d){jQuery(this).swfupload("startUpload")}).bind("fileQueueError",function(f,d,g,e){}).bind("fileDialogStart",function(d){}).bind("fileDialogComplete",function(e,d,f){}).bind("uploadStart",function(f,e){var g=new RegExp("(.jpg|.gif|.png|.bmp)","gi"),d=e.type.toLowerCase();if(!g.test(d)){jQuery.goMessage(mailMsg.conf_sign_8);jQuery(this).swfupload("cancelUpload")}}).bind("uploadProgress",function(f,d,e){}).bind("uploadSuccess",function(g,f,e){var d=jQuery.parseJSON(e);if(d.errorMessage==""){jQuery("#thumbnail_image").attr("src",d.fileURL).attr("img-data",d.filePath).attr("img-name",d.fileName);jQuery("#sign_img_delete").show()}else{jQuery.goSlideMessage(d.errorMessage,"caution")}}).bind("uploadComplete",function(e,d){}).bind("uploadError",function(f,d,g,e){}).css("width",(this.opt.locale=="jp")?90:73)};this.destroy=function(){try{jQuery("#swfupload-control").swfupload("destroy")}catch(b){}}};var SimpleBasicCSVControl=function(a){this.opt=a;this.defaultImgPath="";this.init=function(){var b=this.opt;this.btnId="#"+b.btnId;this.queueFileList=new HashMap();this.uploadCompleteFile=[]};this.makeBtnControl=function(){var c=this.opt;var b="font-family:돋움,dotum,AppleGothic,arial,Helvetica,sans-serif";if(this.opt.locale=="jp"){b="font-family:MS PGothic,Osaka,arial,sans-serif !important"}jQuery(this.btnId).swfupload({file_post_name:c.formName,post_params:c.param,upload_url:c.url,file_size_limit:c.maxFileSize+"",file_types:c.fileType,file_types_description:"",file_upload_limit:"0",flash_url:BASEURL+"resources/js/plugins/mail/swfupload/swfupload.swf",button_cursor:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,button_text:"<span class='buttonText'>"+mailMsg.comn_file_select+"</span>",button_text_style:".buttonText {color:#656565;font-size:12px;font-weight:bold;font-family:"+b+"}",button_width:73,button_height:26,button_text_top_padding:4,button_text_left_padding:7,debug:c.debug,button_placeholder:jQuery("#button")[0]});jQuery(this.btnId).bindAll(c.handler)};this.startUpload=function(){jQuery(this.btnId).swfupload("startUpload")};this.addPostParam=function(b,c){jQuery(this.btnId).swfupload("addPostParam",b,c)};this.destroy=function(){try{jQuery(this.btnId).swfupload("destroy")}catch(b){}}};var UploadBasicControl=function(a){this.opt=a;this.defaultImgPath="";this.init=function(){var b=this.opt;this.btnId="#"+b.btnId;this.listId="#"+this.opt.listId;this.controlType=b.controlType;this.quota={hugeMax:0,normalMax:0,hugeUse:0,normalUse:0};this.normalFileList=new HashMap();this.hugeFileList=new HashMap();this.queueFileList=new HashMap();this.uploadCompleteFile=[];this.hugeMode=(b.controlType=="power")?true:false;this.defaultImgPath="/resources/images/upload.gif"};this.makeBtnControl=function(){var c=this.opt;if(isMsie){c.buttonTextTopPadding=4}else{c.buttonTextTopPadding=4}var b="font-family:돋움,dotum,AppleGothic,arial,Helvetica,sans-serif";if(this.opt.locale=="jp"){b="font-family:MS PGothic,Osaka,arial,sans-serif !important"}jQuery(this.btnId).swfupload({file_post_name:c.formName,post_params:c.param,upload_url:c.url,file_size_limit:c.maxFileSize+"",file_types:c.fileType,file_types_description:"",file_upload_limit:"0",flash_url:BASEURL+"resources/js/plugins/mail/swfupload/swfupload.swf",button_text:"<span class='buttonText'>"+c.btnText+"</span>",button_text_style:".buttonText {color:#656565;font-size:12px;font-weight:bold;"+b+"}",button_width:this.opt.width?this.opt.width:73,button_height:26,button_text_top_padding:this.opt.buttonTextTopPadding,button_text_left_padding:7,button_placeholder_id:c.btnCid,button_cursor:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,debug:c.debug,button_action:c.singleSelect?SWFUpload.BUTTON_ACTION.SELECT_FILE:SWFUpload.BUTTON_ACTION.SELECT_FILES}).css("width",(this.opt.width?this.opt.width:73));jQuery(this.btnId).bindAll(c.handler)};this.btnControldestory=function(){jQuery(this.btnId).swfupload("destroy")};this.getControlFile=function(b){return jQuery(this.btnId).swfupload("getFile",b)};this.startUpload=function(){jQuery(this.btnId).swfupload("startUpload")};this.stopUpload=function(){jQuery(this.btnId).swfupload("stopUpload");this.uploadCompleteFile=[]};this.cancelUpload=function(){if(this.queueFileList){var d=this.queueFileList.getKeys();for(var c=0;c<d.length;c++){var b=this.getControlFile(d[c]);if(b){jQuery(this.btnId).swfupload("cancelUpload",d[c]);this.queueFileList.remove(d[c])}}}};this.resetUpload=function(){this.stopUpload();this.cancelUpload();this.init();this.makeListControl()};this.makeListControl=function(){var f=jQuery('<table id="basicAttachTitle" class="in_table form_mail004">');var d=jQuery("<thead></thead>");var e=jQuery("<tr></tr>");e.append('<th class="checkbox"><input type="checkbox" id="basicAttachChkAll" onclick="checkAll(this,document.uploadForm.basicAttachFileEl)"/></th>');e.append('<th class="align_l filename">'+mailMsg.bigattach_list_001+"</th>");e.append('<th class="align_r filesize">'+mailMsg.bigattach_list_002+"</th>");if(this.controlType=="power"){e.append('<th class="align_c attachtype">'+mailMsg.mail_attach_type+"</th>")}e.append('<th class="align_c remove">'+mailMsg.mail_attach_delete+"</th>");d.append(e);f.append(d);var b=jQuery('<div id="basicAttachItemList" class="div_scroll" style="max-height: 125px">');var c=f.clone();c.attr("id","basicAttachList");c.find("tr").remove();b.append(c);var g=this.listId;setTimeout(function(){jQuery(g).empty();jQuery(g).append(f);jQuery(g).append(b)},100)};this.makeListWebFolderControl=function(){var d=jQuery('<table class="form_type"></table>');var i=jQuery("<tr></tr>");var b=jQuery('<td style="padding:0"></td>');var e=jQuery('<table id="basicAttachTitle" class="in_table form_mail004"></table>');var c=jQuery("<thead></thead>");var g=jQuery("<tr></tr>");g.append('<th class="checkbox"><input type="checkbox" id="basicAttachChkAll" onclick="checkAll(this,document.uploadForm.basicAttachFileEl)"/></th>');g.append('<th class="align_l filename">'+mailMsg.bigattach_list_001+"</th>");g.append('<th class="align_r filesize">'+mailMsg.bigattach_list_002+"</th>");g.append('<th class="align_c attachtype">'+mailMsg.comn_upload_status+"</th>");g.append('<th class="align_c remove">'+mailMsg.mail_attach_delete+"</th>");c.append(g);e.append(c);b.append(e);i.append(b);d.append(i);var f=jQuery('<div class="div_scroll" style="height:200px"><table id="basicAttachList" class="in_table form_mail004">');var h=this.listId;setTimeout(function(){jQuery(h).empty();jQuery(h).append(d);jQuery(h).append(f)},100)};this.addAttachList=function(d){var b=(d.type=="huge")?true:false;var c='<tr id="'+d.id+'Low" ><td class="checkbox"><input type="checkbox" id="'+d.id+'" name="basicAttachFileEl" value="" attsize="'+d.size+'" atttype="'+((b)?"huge":"normal")+'"></td><td class="align_l filename" title="'+escape_tag(d.name)+'"><span class="item_file file_wrap"><span class="ic_file ic_'+getFileTypeImage(d.name)+'"></span><span class="name">'+escape_tag(d.name)+'</span></span></td><td class="align_r filesize"><span class="size">'+printSize(d.size)+"</span></td>";if(this.controlType=="power"||this.opt.webfolder){c+='<td id="'+d.id+'TypeInfo" class="attachtype">'+((b)?mailMsg.bigattach_11:mailMsg.bigattach_10)+'<span id="progress_'+d.id+'" class="progressBar"></span></td>'}c+='<td class="remove"><span class="btn_bdr" onclick="deletefileById(\''+d.id+'\')"><span title="'+mailMsg.comn_del+'" class="ic_classic ic_basket"></span></span></td>';c+="</tr>";if(b){this.hugeFileList.put(d.id,d)}else{this.normalFileList.put(d.id,d)}c=this.previewTempAttach(d,jQuery(c));jQuery("#basicAttachList").append(c)};this.previewTempAttach=function(f,e){var c=[];if(b(getFileTypeImage(f.name))){var g=['<span class="btn_fn4 " style="margin:0 0 0 2px !important;" onclick="previewTempFile(\''+f.id+"')\">",'<span class="txt" style="padding:0px;">'+mailMsg.mail_preview+"</span>","</span>"];jQuery.merge(c,g)}var d=['<span class="btn_fn4 " style="margin:0 0 0 2px !important;" onclick="downloadTempFile(\''+f.id+"')\">",'<span class="txt" style="padding:0px;">'+mailMsg.bigattach_09+"</span>","</span>"];jQuery.merge(c,d);e.find("span.item_file").append(c.join(""));return e;function b(i){i=i.toLowerCase();var h="doc|docx|hwp|ppt|pptx|xls|xlsx|pdf|txt";var j=new RegExp("("+h+")$","i");if(j.test(i)){return true}else{return false}}};this.addAttachWebfolderList=function(d){var b=(d.type=="huge")?true:false;var c='<tr id="'+d.id+'Low" ><td class="checkbox"><input type="checkbox" id="'+d.id+'" name="basicAttachFileEl" value="" attsize="'+d.size+'" atttype="'+((b)?"huge":"normal")+'"></td><td class="align_l filename" title="'+escape_tag(d.name)+'"><span class="item_file file_wrap"><span class="ic_file ic_'+getFileTypeImage(d.name)+'"></span><span class="name">'+escape_tag(d.name)+'</span></span></td><td class="align_r filesize"><span class="size">'+printSize(d.size)+"</span></td>";c+='<td id="'+d.id+'TypeInfo" class="align_c attachtype"><span id="progress_'+d.id+'" class="progressBar">['+mailMsg.comn_upload_ready+"]</span></td>";c+='<td class="align_c remove"><span class="btn_bdr" onclick="deletefileById(\''+d.id+'\')"><span title="'+mailMsg.comn_del+'" class="ic_classic ic_basket"></span></span></td>';c+="</tr>";if(b){this.hugeFileList.put(d.id,d)}else{this.normalFileList.put(d.id,d)}jQuery("#basicAttachList").append(c)};this.getCheckAttachFileIds=function(){var b=[];jQuery("#basicAttachList input[name=basicAttachFileEl]:checked").each(function(){b.push(jQuery(this).attr("id"))});return b};this.deleteAttachList=function(e){var d=jQuery("#"+e).attr("atttype");var c=jQuery("#"+e).attr("attsize");if(d=="huge"){this.quota.hugeUse-=c;this.hugeFileList.remove(e)}else{this.quota.normalUse-=c;this.normalFileList.remove(e)}jQuery("#"+e+"Low").remove();var b=this.getControlFile(e);if(b){jQuery(this.btnId).swfupload("cancelUpload",e);this.queueFileList.remove(e)}};this.setAttachSize=function(c,b){if(c=="hugeMax"){this.quota.hugeMax=b}else{if(c=="hugeUse"){this.quota.hugeUse=b}else{if(c=="normalMax"){this.quota.normalMax=b}else{if(c=="normalUse"){this.quota.normalUse=b}}}}};this.getAttachSize=function(c){var b=0;if(c=="hugeMax"){b=this.quota.hugeMax}else{if(c=="hugeUse"){b=this.quota.hugeUse}else{if(c=="normalMax"){b=this.quota.normalMax}else{if(c=="normalUse"){b=this.quota.normalUse}}}}return b};this.getAttachQuotaInfo=function(){return this.quota};this.getFileList=function(b){if(b=="huge"){return this.hugeFileList.getValues()}else{return this.normalFileList.getValues()}};this.setFileList=function(e,b){var d=new HashMap();for(var c=0;c<b.length;c++){d.put(b[c].id,b[c])}if(e=="huge"){this.hugeFileList=d}else{this.normalFileList=d}};this.getAttachFileInfo=function(b,c){return(b=="huge")?this.hugeFileList.get(c):this.normalFileList.get(c)};this.setAttachFileInfo=function(b,d,c){if(b=="huge"){this.hugeFileList.put(d,c)}else{this.normalFileList.put(d,c)}};this.addUploadQueueFile=function(b){this.queueFileList.put(b.id,{id:b.id,name:b.name,size:b.size})};this.getUploadQueueFile=function(){return this.queueFileList.getValues()};this.getUploadQueueSize=function(){return this.queueFileList.size()};this.isNextUploadQueue=function(b){this.queueFileList.remove(b);return(this.queueFileList.size()>0)?true:false};this.setUploadCompleteFile=function(d,b){var c=this.hugeFileList.get(d);if(c){c.uid=b.uid;c.path=b.filePath;c.hostId=b.hostId;this.hugeFileList.remove(d);this.hugeFileList.put(d,c)}else{c=this.normalFileList.get(d);if(c){c.uid=b.uid;c.path=b.filePath;c.hostId=b.hostId;this.normalFileList.remove(d);this.normalFileList.put(d,c)}}};this.setHugeUploadUse=function(b){this.hugeMode=b};this.getHugeUploadUse=function(){return this.hugeMode};this.isHugeTypeFile=function(c){var b=this.hugeFileList.get(c);return(b)?true:false};this.chageAttachType=function(e){var d=jQuery("#"+e).attr("atttype");var c;if(d=="huge"){c=this.hugeFileList.get(e);this.normalFileList.put(e,c);this.hugeFileList.remove(e);jQuery("#"+e).attr("atttype","normal");jQuery("#"+e+"TypeInfo").text(mailMsg.bigattach_10);jQuery("#"+e+"ChgLink").text(mailMsg.mail_attach_chg_bigattach);jQuery(this.btnId).swfupload("removeFileParam",e,"attachtype");jQuery(this.btnId).swfupload("removeFileParam",e,"regdate")}else{c=this.normalFileList.get(e);this.hugeFileList.put(e,c);this.normalFileList.remove(e);var b=new Date();jQuery("#"+e).attr("atttype","huge");jQuery("#"+e+"TypeInfo").text(mailMsg.bigattach_11);jQuery("#"+e+"ChgLink").text(mailMsg.mail_attach_chg_normal);jQuery(this.btnId).swfupload("addFileParam",e,"attachtype","huge");jQuery(this.btnId).swfupload("addFileParam",e,"regdate",b.getTime())}};this.destroy=function(){try{jQuery(this.btnId).swfupload("destroy")}catch(b){}if(this.listId){jQuery(this.listId).empty()}this.quota={hugeMax:0,normalMax:0,hugeUse:0,normalUse:0};if(this.normalFileList){this.normalFileList.destroy()}if(this.hugeFileList){this.hugeFileList.destroy()}if(this.queueFileList){this.queueFileList.destroy()}this.uploadCompleteFile=[]};this.emptyFileList=function(){jQuery(this.btnId).unbindAll(a.handler);if(this.listId){jQuery(this.listId).empty()}this.cancelUpload()}};var MailInlineImgControl=function(a){this.opt=a;this.init=function(){var b=this.opt};this.makeBtnControl=function(){var d=this.opt;var e=this;var c=0;var b="font-family:돋움,dotum,AppleGothic,arial,Helvetica,sans-serif";if(this.opt.locale=="jp"){b="font-family:MS PGothic,Osaka,arial,sans-serif !important"}jQuery("#swfupload-control").swfupload({file_post_name:"NewFile",post_params:d.param,upload_url:"/api/mail/image/upload",file_size_limit:"10240",file_types:"*.jpg;*.gif;*.png;*.bmp",file_types_description:"",file_upload_limit:"0",flash_url:BASEURL+"resources/js/plugins/mail/swfupload/swfupload.swf",button_cursor:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,button_text:"<span class='buttonText'>"+mailMsg.comn_file_select+"</span>",button_text_style:".buttonText {color:#656565;font-size:12px;font-weight:bold;"+b+"}",button_width:(this.opt.locale=="jp")?90:73,button_height:26,button_text_top_padding:6,button_text_left_padding:7,button_placeholder:jQuery("#button")[0],debug:false}).bind("swfuploadLoaded",function(f){}).bind("fileQueued",function(g,f){c++;jQuery(this).swfupload("startUpload")}).bind("fileQueueError",function(i,g,k,h){var j=new RegExp("(.jpg|.gif|.png|.bmp|.jpeg|.tif)","gi"),f=g.type.toLowerCase();if(!j.test(f)){jQuery.goSlideMessage(mailMsg.conf_sign_8,"caution");return}if(g.size>10240){jQuery.goSlideMessage(msgArgsReplace(mailMsg.conf_userinfo_msg_11,["10MB"]),"caution");return}}).bind("fileDialogStart",function(f){}).bind("fileDialogComplete",function(g,f,h){}).bind("uploadStart",function(h,g){var i=new RegExp("(.jpg|.gif|.png|.bmp|.jpeg|.tif)","gi"),f=g.type.toLowerCase();if(!i.test(f)){jQuery.goMessage(mailMsg.conf_sign_8);jQuery(this).swfupload("cancelUpload")}}).bind("uploadProgress",function(h,f,g){}).bind("uploadSuccess",function(i,h,g){var j=jQuery.parseJSON(g),k=j.errorMessage;if(k!=""){jQuery.goSlideMessage(j.errorMessage,"caution");return}else{var f='<img src="'+j.fileURL+'" title="'+j.fileName+'"/>';editorControl.addEditorText(f)}}).bind("uploadComplete",function(g,f){c--;if(c==0){jQuery("#swfupload-control").swfupload("destroy");e.opt.popupContents.close()}else{jQuery(this).swfupload("startUpload")}}).bind("uploadError",function(h,f,i,g){}).css("width",(this.opt.locale=="jp")?90:73)};this.destroy=function(){try{jQuery("#swfupload-control").swfupload("destroy")}catch(b){}}};(function(a){a.extend({progressBar:new function(){this.defaults={steps:20,stepDuration:20,max:100,showText:true,textFormat:"percentage",width:120,height:12,callback:null,boxImage:"images/progressbar.gif",barImage:{0:"images/progressbg_red.gif",30:"images/progressbg_orange.gif",70:"images/progressbg_green.gif"},running_value:0,value:0,image:null};this.construct=function(c,b){var d=null;var e=null;if(c!=null){if(!isNaN(c)){d=c;if(b!=null){e=b}}else{e=c}}return this.each(function(f){var p=this;var h=this.config;if(d!=null&&this.bar!=null&&this.config!=null){this.config.value=parseInt(d);if(e!=null){p.config=a.extend(this.config,e)}h=p.config}else{var n=a(this);var h=a.extend({},a.progressBar.defaults,e);h.id=n.attr("id")?n.attr("id"):Math.ceil(Math.random()*100000);if(d==null){d=n.html().replace("%","")}h.value=parseInt(d);h.running_value=0;h.image=m(h);var q=["steps","stepDuration","max","width","height","running_value","value"];for(var j=0;j<q.length;j++){h[q[j]]=parseInt(h[q[j]])}n.html("");var l=document.createElement("img");var s=document.createElement("span");var g=a(l);var o=a(s);p.bar=g;g.attr("id",h.id+"_pbImage");o.attr("id",h.id+"_pbText");o.html(r(h));g.attr("title",r(h));g.attr("alt",r(h));g.attr("src",h.boxImage);g.attr("width",h.width);g.css("width",h.width+"px");g.css("height",h.height+"px");g.css("background-image","url("+h.image+")");g.css("background-position",((h.width*-1))+"px 50%");g.css("padding","0");g.css("margin","0");n.append(g);n.append(o)}function k(i){return i.running_value*100/i.max}function m(t){var w=t.barImage;if(typeof(t.barImage)=="object"){for(var v in t.barImage){if(t.running_value>=parseInt(v)){w=t.barImage[v]}else{break}}}return w}function r(i){if(i.showText){if(i.textFormat=="percentage"){return" "+Math.round(i.running_value)+"%"}else{if(i.textFormat=="fraction"){return" "+i.running_value+"/"+i.max}}}}h.increment=Math.round((h.value-h.running_value)/h.steps);if(h.increment<0){h.increment*=-1}if(h.increment<1){h.increment=1}var u=setInterval(function(){var w=h.width/100;if(h.running_value>h.value){if(h.running_value-h.increment<h.value){h.running_value=h.value}else{h.running_value-=h.increment}}else{if(h.running_value<h.value){if(h.running_value+h.increment>h.value){h.running_value=h.value}else{h.running_value+=h.increment}}}if(h.running_value==h.value){clearInterval(u)}var v=a("#"+h.id+"_pbImage");var i=a("#"+h.id+"_pbText");var t=m(h);if(t!=h.image){v.css("background-image","url("+t+")");h.image=t}v.css("background-position",(((h.width*-1))+(k(h)*w))+"px 50%");v.attr("title",r(h));i.html(r(h));if(h.callback!=null&&typeof(h.callback)=="function"){h.callback(h)}p.config=h},h.stepDuration)})}}});a.fn.extend({progressBar:a.progressBar.construct})})(jQuery);